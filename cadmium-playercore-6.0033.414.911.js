function sec2time(t){var e=(e=Math.floor(t/3600))<10?"0"+e:e,i=(i=Math.floor(t/60%60))<10?"0"+i:i,t=Math.floor(t%60);return e+":"+i+":"+(t=t<10?"0"+t:t)}function _esm(t){Object.defineProperties(t,{__esModule:{value:!0}})}function a000(){}a000.Z4L=function(){return"function"==typeof a000.D4L.g4L?a000.D4L.g4L.apply(a000.D4L,arguments):a000.D4L.g4L},a000.j4L=function(){return"function"==typeof a000.D4L.V4L?a000.D4L.V4L.apply(a000.D4L,arguments):a000.D4L.V4L},a000.J4L=function(){return"function"==typeof a000.D4L.V4L?a000.D4L.V4L.apply(a000.D4L,arguments):a000.D4L.V4L},a000.N4L=function(){return"function"==typeof a000.D4L.g4L?a000.D4L.g4L.apply(a000.D4L,arguments):a000.D4L.g4L},a000.D4L=function(i){return{V4L:function(){var t,e=arguments;switch(i){case 4:t=e[1]+e[4]+e[2]+e[3]+e[0];break;case 3:t=void 0!==e[0];break;case 20:t=e[0]===e[1];break;case 17:t=e[3]*(e[2]-e[0]+e[4])-e[1];break;case 6:t=e[1]*e[0];break;case 5:t=e[0]+e[2]+e[1];break;case 10:t=(e[1]/e[0]|e[2])*e[3];break;case 1:t=e[0]+e[1];break;case 13:t=-(e[3]-e[0])*e[1]/e[2];break;case 7:t=e[0]/e[1];break;case 19:t=e[0]<e[1];break;case 0:t=e[1]-e[0];break;case 15:t=e[2]/e[0]-e[1];break;case 2:t=e[2]/e[1]/e[0];break;case 9:t=e[1]/e[0]|e[2];break;case 18:t=e[0]<=e[1];break;case 12:t=(e[2]/e[4]+e[0])*e[3]/e[1];break;case 8:t=e[2]*e[3]/e[0]|e[1];break;case 14:t=(-e[0]*e[1]-e[3])/-e[2];break;case 16:t=(e[0]-e[1])*e[2];break;case 11:t=e[1]+e[3]/e[0]*e[2]}return t},g4L:function(t){i=t}}}(),function(pt,A){var w,i,l,r,g,O,p,n,a,I,x,y,f,s,h,c,v,u,d,t,b,P,R,N,o,m,_,j,E,k,S,C,L,T,M,D,U,B,F,q,H,K,V,G,J,z,Y,W,X,Q,Z,$,tt,et,it,nt,rt,at,ot,st,ut,ct,ht,ft,lt,dt,bt,mt,gt,vt,yt,wt,_t,Et,kt,St,Tt,At,Ot,It,xt,Pt,Rt,Nt,jt,Ct,Lt,Mt,Dt,Ut,Bt,Ft,qt,Ht,Kt,Vt,Gt,Jt,zt,Yt,Wt,Xt,Qt,Zt,$t,te,ee,ie,ne,re,ae,oe,se,ue,ce,he,fe,le,pe,de,be,me,ge,ve,ye,we,_e,Ee,ke,Se,Te,Ae,Oe,Ie,xe,Pe,Re,Ne,je,Ce,Le,Me,De,Ue,Be,Fe,qe,He,Ke,Ve,Ge,Je,ze,Ye,We,Xe,Qe,Ze,$e,ti,ei,ii,ni,ri,ai,oi,si,ui,ci,hi,fi,li,pi,di,bi,mi,gi,vi,yi,wi,_i,Ei,ki,Si,Ti,Ai,Oi,Ii,xi,Pi,Ri,Ni,ji,Ci,Li,Mi,Di,Ui,Bi,Fi,qi,Hi,Ki,Vi,Gi,Ji,zi,Yi,Wi,Xi,Qi,Zi,$i,tn,en,nn,rn,an,on,sn,un,cn,hn,fn,ln,pn,dn,bn,mn,gn,vn,yn,wn,_n,En,kn,Sn,Tn,An,On,In,xn,Pn,Rn,Nn,jn,Cn,Ln,Mn,Dn,Un,Bn,Fn,qn,Hn,Kn,Vn;function Gn(t,e){if(!e||"utf-8"===e)return zn(t);throw Error("unsupported encoding")}function Jn(t,e){if(!e||"utf-8"===e)return Yn(t);throw Error("unsupported encoding")}function zn(t){for(var e,i=0,n=t.length,r="";i<n;){if(128&(e=t[i++]))if(192==(224&e))e=((31&e)<<6)+(63&t[i++]);else{if(224!=(240&e))throw Error("unsupported character");e=((15&e)<<12)+((63&t[i++])<<6)+(63&t[i++])}r+=String.fromCharCode(e)}return r}function Yn(t){for(var e,i=t.length,n=0,r=0,a=i;a--;)(e=t.charCodeAt(a))<128?n++:n=e<2048?n+2:n+3;for(n=new Uint8Array(n),a=0;a<i;a++)(e=t.charCodeAt(a))<128?n[r++]=e:(e<2048?n[r++]=192|e>>>6:(n[r++]=224|e>>>12,n[r++]=128|e>>>6&63),n[r++]=128|63&e);return n}function Wn(t,e){if(t===e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}function Xn(t){var e;if(!(t&&t.constructor==Uint8Array||Array.isArray(t)))throw new TypeError("Cannot compute the hash code of "+t);for(var i=1,n=0;n<t.length;++n){if("number"!=typeof(e=t[n]))throw new TypeError("Cannot compute the hash code over non-numeric elements: "+e);i=31*i+e&4294967295}return i}function Qn(t,e){var i;if(t===e)return!0;if(!t||!e)return!1;e instanceof Array||(e=[e]);for(var n=0;n<e.length;++n){for(var r=e[n],a=!1,o=0;o<t.length;++o)if(i=t[o],r.equals&&"function"==typeof r.equals&&r.equals(i)||r==i){a=!0;break}if(!a)return!1}return!0}function Zn(t,e){return Qn(t,e)&&(t.length==e.length||Qn(e,t))}function $n(e,t,i){var n,r;if(i&&(n=i),"object"!=typeof e||"function"!=typeof e.result||"function"!=typeof e.error)throw new TypeError("callback must be an object with function properties 'result' and 'error'.");try{(r=t.call(n,e))!==A&&e.result(r)}catch(t){try{e.error(t)}catch(t){}}}function tr(t,e,i){if("object"!=typeof t||"function"!=typeof t.timeout)throw new TypeError("callback must be an object with function properties 'result', 'timeout', and 'error'.");$n(t,e,i)}function er(t,e,i){t<1e5&&(t=1e5+t),Object.defineProperties(this,{internalCode:{value:t,writable:!1,configurable:!1},responseCode:{value:e,writable:!1,configurable:!1},message:{value:i,writable:!1,configurable:!1}})}function ir(t){switch(t){case yt.PSK:case yt.MGK:return!0;default:return!1}}function nr(t){switch(t){case yt.PSK:case yt.MGK:case yt.X509:case yt.RSA:case yt.NPTICKET:case yt.ECC:return!0;default:return!1}}function rr(t){return t.toJSON()}function ar(t,e){wi?e.result(wi):Promise.resolve().then(function(){return T.getKeyByName(t)}).catch(function(){return T.generateKey({name:t},!1,["wrapKey","unwrapKey"])}).then(function(t){wi=t,e.result(wi)}).catch(function(t){e.error(new P(er.INTERNAL_EXCEPTION,"Unable to get system key"))})}function or(t,e){var i=e.masterToken,n=e.userIdToken;return e=e.serviceTokens,{NccpMethod:t.method,UserId:t.userId,UT:n&&n.serialNumber,MT:i&&i.serialNumber+":"+i.sequenceNumber,STCount:e&&e.length}}function sr(t){return t.uniqueKey()}function ur(l,n,r,p,d){var a;function b(t){(t=p.getUserIdToken(t))&&(p.removeUserIdToken(t),m())}function m(){p.getStoreState({result:function(t){for(var e=a.slice(),i=0;i<e.length;i++)e[i]({storeState:t})},timeout:function(){l.error("Timeout getting store state",""+e)},error:function(t){l.error("Error getting store state",""+t)}})}a=[],this.addEventHandler=function(t,e){"shouldpersist"===t&&a.push(e)},this.send=function(f){return new Promise(function(u,c){var h=f.timeout,t=new Ei(l,r,f,p.getKeyRequestData()),e=new Dt(f.url);l.trace("Sending MSL request"),n.request(r,t,e,h,{result:function(t){var e,i,n,r,s,a,o;l.trace("Received MSL response",{Method:f.method}),t?(f.allowTokenRefresh&&m(),(e=t.getErrorHeader())?(a=e,o=f.profileGuid||f.userId,a.errorCode===v.ENTITY_REAUTH||a.errorCode===v.ENTITYDATA_REAUTH?(p.clearCryptoContexts(),m()):a.errorCode!==v.USER_REAUTH&&a.errorCode!==v.USERDATA_REAUTH||b(o),c({success:!1,error:e})):(i=t,n=h,r={result:function(t){u({success:!0,body:Gn(t)})},timeout:function(){c({success:!1,subCode:d.MSL_READ_TIMEOUT})},error:function(t){c({success:!1,error:t})}},s=[],function o(){i.read(-1,n,{result:function(a){$n(r,function(){var t,e,i,n,r;if(a)s.push(a),o();else switch(s.length){case 0:return new Uint8Array(0);case 1:return s[0];default:for(i=s.length,e=t=n=0;e<i;e++)t+=s[e].length;for(t=new Uint8Array(t),e=0;e<i;e++)r=s[e],t.set(r,n),n+=r.length;return t}})},timeout:function(){r.timeout()},error:function(t){r.error(t)}})}())):c({success:!1,error:new P(er.INTERNAL_EXCEPTION,"Null response stream"),description:"Null response stream"})},timeout:function(){c({success:!1,subCode:d.MSL_REQUEST_TIMEOUT})},error:function(t){c({success:!1,error:t})}})})},this.hasUserIdToken=function(t){return!!p.getUserIdToken(t)},this.getUserIdTokenKeys=function(){return p.getUserIdTokenKeys()},this.removeUserIdToken=b,this.clearUserIdTokens=function(){p.clearUserIdTokens(),m()},this.isErrorReauth=function(t){return t&&t.errorCode==v.USERDATA_REAUTH},this.isErrorHeader=function(t){return t instanceof se},this.getErrorCode=function(t){return t&&t.errorCode},this.getStateForMdx=function(t){var e=p.getMasterToken();return{masterToken:e,userIdToken:t=p.getUserIdToken(t),cryptoContext:p.getCryptoContext(e)}},this.buildPlayDataRequest=function(t,e){var i=new Bt;n.request(r,new Ei(l,r,t),i,t.timeout,{result:function(){e.result(i.getRequest())},error:function(){e.result(i.getRequest())},timeout:function(){e.timeout()}})},this.rekeyUserIdToken=function(t,e){p.rekeyUserIdToken(t,e),m()},this.getServiceTokens=function(t){var e=p.getMasterToken();return(t=p.getUserIdToken(t))&&!t.isBoundTo(e)&&(t=A),p.getServiceTokens(e,t)},this.removeServiceToken=function(e){var t=p.getMasterToken();p.getServiceTokens(t).find(function(t){return t.name===e})&&(p.removeServiceTokens(e,t),m())}}function cr(r,n,a,o,s,u){function t(t){var n;return Promise.resolve().then(function(){if(!(n=r.authenticationKeyNames[t]))throw new P(er.KEY_IMPORT_ERROR,"Invalid config keyName "+t);return T.getKeyByName(n)}).then(function(i){return new Promise(function(t,e){Y(i,{result:t,error:function(){e(new P(er.KEY_IMPORT_ERROR,"Unable to create "+n+" CipherKey"))}})})}).catch(function(t){throw new P(er.KEY_IMPORT_ERROR,"Unable to import "+n,t)})}return Promise.resolve().then(function(){if(!T.getKeyByName)throw new P(er.INTERNAL_EXCEPTION,"No WebCrypto cryptokeys");return Promise.all([t("e"),t("h"),t("w")])}).then(function(t){var e,i={};return i[n]=new a(r.esn,t[0],t[1],t[2]),t=new o(r.esn),e=new di,{entityAuthFactories:i,entityAuthData:t,keyExchangeFactories:[new s(e)],keyRequestData:new u(n)}})}function hr(i,t,e){var r;function n(){return Promise.resolve().then(function(){return T.generateKey(t,!1,["wrapKey","unwrapKey"])}).then(function(t){return a(t.publicKey,t.privateKey)})}function a(i,n){return Promise.all([new Promise(function(t,e){Q(i,{result:t,error:function(t){e(new P(er.INTERNAL_EXCEPTION,"Unable to create keyx public key",t))}})}),new Promise(function(t,e){tt(n,{result:t,error:function(t){e(new P(er.INTERNAL_EXCEPTION,"Unable to create keyx private key",t))}})})]).then(function(t){return t=new ee("rsaKeypairId",e,t[0],t[1]),r&&(t.storeData={keyxPublicKey:i,keyxPrivateKey:n}),t})}return r=!i.systemKeyWrapFormat,Promise.resolve().then(function(){var t=i.storeState,e=t&&t.keyxPublicKey;return t=t&&t.keyxPrivateKey,r&&e&&t?a(e,t):n()}).then(function(t){var e={};return e[yt.NONE]=new jt,{entityAuthFactories:e,entityAuthData:new Rt(i.esn),keyExchangeFactories:[new $t],keyRequestData:t,createKeyRequestData:r?n:A}})}function fr(t,e){t instanceof Ai?(this.abv=t.abv,this.position=t.position):(this.abv=t,this.position=e||0)}function lr(t){var e=t.readByte(),i=127&e;if(i==e)return i;if(3<i||0==i)return-1;for(var n=e=0;n<i;++n)e=e<<8|t.readByte();return e}function pr(t,e,i){if(9==i){for(i=0;i<9;++i)if(t[e++]!=ji[i])return;return 1}}function dr(t){var e;return!!(t&&t.child&&t.child.next&&t.child.child&&t.child.next.child)&&!(!pr((e=t.child.child).backingStore,e.dataIdx,e.dataLen)||2!=t.nChildren||2!=t.child.nChildren||2!=t.child.next.child.nChildren)}function br(t){var e;return!!(t&&t.child&&t.child.next&&t.child.next.child&&t.child.next.next&&t.child.next.next.child)&&!(!pr((e=t.child.next.child).backingStore,e.dataIdx,e.dataLen)||3!=t.nChildren||2!=t.child.next.nChildren||9!=t.child.next.next.child.nChildren)}function mr(t){var e=Pi.createSequenceNode(),i=new Ri(e);return i.addChild(Pi.createSequenceNode()),i.addChild(Pi.createOidNode(ji)),i.addSibling(Pi.createNullNode()),i.addToParent(e,Pi.createBitStringNode(null)),i.addChild(Pi.createSequenceNode()),i.addChild(Pi.createIntegerNode(t.n)),i.addSibling(Pi.createIntegerNode(t.e)),e}function gr(t){var e=(t=t.child.next.child.child).data;return t=t.next,new Ci(e,t.data,null,null)}function vr(t){var e=Pi.createSequenceNode(),i=new Ri(e);return i.addChild(Pi.createIntegerNode(new Uint8Array([0]))),i.addSibling(Pi.createSequenceNode()),i.addChild(Pi.createOidNode(ji)),i.addSibling(Pi.createNullNode()),i.addToParent(e,Pi.createOctetStringNode(null)),i.addChild(Pi.createSequenceNode()),i.addChild(Pi.createIntegerNode(new Uint8Array([0]))),i.addSibling(Pi.createIntegerNode(t.n)),i.addSibling(Pi.createIntegerNode(t.e)),i.addSibling(Pi.createIntegerNode(t.d)),i.addSibling(Pi.createIntegerNode(t.p)),i.addSibling(Pi.createIntegerNode(t.q)),i.addSibling(Pi.createIntegerNode(t.dp)),i.addSibling(Pi.createIntegerNode(t.dq)),i.addSibling(Pi.createIntegerNode(t.qi)),e}function yr(t){var e=[];t=t.child.next.next.child.child.next;for(var i=0;i<8;i++)e.push(t.data),t=t.next;return new Li(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}function wr(t,e,i,n){if(!(t instanceof Ci||t instanceof Li))return A;if(i)for(var r=0;r<i.length;++r)if(-1==Mi.indexOf(i[r]))return A;return e={kty:"RSA",alg:e,key_ops:i||[],ext:n!=A&&n,n:g(t.n,!0),e:g(t.e,!0)},t instanceof Li&&(e.d=g(t.d,!0),e.p=g(t.p,!0),e.q=g(t.q,!0),e.dp=g(t.dp,!0),e.dq=g(t.dq,!0),e.qi=g(t.qi,!0)),e}function _r(t){var e,i,n,r,a,o,s,u,c,h;return t.kty&&"RSA"==t.kty&&t.n&&t.e?(e="RSA1_5 RSA-OAEP RSA-OAEP-256 RSA-OAEP-384 RSA-OAEP-512 RS256 RS384 RS512".split(" "),t.alg&&-1==e.indexOf(t.alg)?A:(e=[],t.use?"enc"==t.use?e=["encrypt","decrypt","wrap","unwrap"]:"sig"==t.use&&(e=["sign","verify"]):e=t.key_ops,i=t.ext,n=O(t.n,!0),r=O(t.e,!0),t.d?(a=O(t.d,!0),o=O(t.p,!0),s=O(t.q,!0),u=O(t.dp,!0),c=O(t.dq,!0),h=O(t.qi,!0),new Li(n,r,a,o,s,u,c,h,t.alg,e,i)):new Ci(n,r,i,e))):A}function Er(t,e,i,n){this.der=t,this.type=e,this.keyOps=i,this.extractable=n}function kr(t,e,i){var n,r,a,o=!!(i=i||qi).extendAll;for(n in e)r=e.__lookupGetter__(n),a=e.__lookupSetter__(n),r||a?(r&&t.__defineGetter__(n,r),a&&t.__defineSetter__(n,a)):(r=e[n],a=t[n],"function"==typeof r&&"function"==typeof a&&r!==a?(r.base!==Function.prototype.base&&(r=function(i,n){return function(){var t,e=i.base;return i.base=n,t=i.apply(this,arguments),i.base=e,t}}(r,a)),r.base=a):(o||i[n])&&u.isObjectLiteral(r)&&u.isObjectLiteral(a)&&(r=u.extendDeep({},a,r)),t[n]=r)}function Sr(){var i=Array.prototype.slice,n=i.call(arguments,1);return this.extend({init:function t(){var e=i.call(arguments,0);t.base.apply(this,n.concat(e))}})}function Tr(t,e){var i=new this(Fi);return kr(i,t,e),Or(i)}function Ar(t,e){return kr(this.prototype,t,e),this}function Or(t){function e(){var t=this.init;t&&arguments[0]!==Fi&&t.apply(this,arguments)}return t&&(e.prototype=t),(e.prototype.constructor=e).extend=Tr,e.bind=Sr,e.mixin=Ar,e}function Ir(t,e,i){var n,r,a,o=!!(i=i||Ki).extendAll;for(n in e)r=e.__lookupGetter__(n),a=e.__lookupSetter__(n),r||a?(r&&t.__defineGetter__(n,r),a&&t.__defineSetter__(n,a)):(r=e[n],a=t[n],"function"==typeof r&&"function"==typeof a&&r!==a?(r.base!==Vi&&(r=function(i,n){return function(){var t,e=i.base;return i.base=n,t=i.apply(this,arguments),i.base=e,t}}(r,a)),r.base=a):(o||i[n])&&u.isObjectLiteral(r)&&u.isObjectLiteral(a)&&(r=u.extendDeep({},a,r)),t[n]=r)}function xr(){var i=Array.prototype.slice,n=i.call(arguments,1);return this.extend({init:function t(){var e=i.call(arguments,0);t.base.apply(this,n.concat(e))}})}function Pr(t,e){var i=new this(Hi);return Ir(i,t,e),Nr(i)}function Rr(t,e){return Ir(this.prototype,t,e),this}function Nr(t){function e(){var t=this.init;t&&arguments[0]!==Hi&&t.apply(this,arguments)}return t&&(e.prototype=t),(e.prototype.constructor=e).extend=Pr,e.bind=xr,e.mixin=Rr,e}function jr(t){return t==x?1:t+1}function Cr(t){if(0===Object.keys(t._waiters).length)return 0;for(var e=jr(t._nextWaiter);!t._waiters[e];)e=jr(e);return e}function Lr(t){return t==x?1:t+1}function Mr(t){if(0===Object.keys(t._waitingReaders).length)return 0;for(var e=Lr(t._nextReader);!t._waitingReaders[e];)e=Lr(e);return e}function Dr(t){if(0===Object.keys(t._waitingWriters).length)return 0;for(var e=Lr(t._nextWriter);!t._waitingWriters[e];)e=Lr(e);return e}function Ur(t){return void 0!==t&&t}function Br(t){return t&&t.length?(M===Ji.V2014_02&&(t=t.map(function(t){return"wrap"==t?"wrapKey":"unwrap"==t?"unwrapKey":t})),t):(M===Ji.V2014_02?"encrypt decrypt sign verify deriveKey wrapKey unwrapKey":"encrypt decrypt sign verify deriveKey wrap unwrap").split(" ")}function Fr(t,e,i,n,r){switch(i){case hn.JWE_RSA:case hn.JWEJS_RSA:return new ht(t,ft.RSA_OAEP,w,n,r);case hn.JWK_RSA:return new dt(t,e,n,r,bt.WRAP_UNWRAP_OAEP);case hn.JWK_RSAES:return new dt(t,e,n,r,bt.WRAP_UNWRAP_PKCS1);default:throw new R(er.UNSUPPORTED_KEYX_MECHANISM,i)}}function qr(t,e){this.errordata=t,this.signature=e}function Hr(t,e,i,n,r){this.customer=t,this.sender=e,this.messageCryptoContext=i,this.headerdata=n,this.signature=r}function Kr(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y){return{cryptoContext:{value:e,writable:!1,configurable:!1},customer:{value:i,writable:!1,configurable:!1},entityAuthenticationData:{value:n,writable:!1,configurable:!1},masterToken:{value:r,writable:!1,configurable:!1},sender:{value:a,writable:!1,configurable:!1},messageId:{value:o,writable:!1,configurable:!1},nonReplayableId:{value:b,writable:!1,configurable:!1},keyRequestData:{value:s,writable:!1,configurable:!1},keyResponseData:{value:u,writable:!1,configurable:!1},userAuthenticationData:{value:c,writable:!1,configurable:!1},userIdToken:{value:h,writable:!1,configurable:!1},serviceTokens:{value:f,writable:!1,configurable:!1},peerMasterToken:{value:l,writable:!1,configurable:!1},peerUserIdToken:{value:p,writable:!1,configurable:!1},peerServiceTokens:{value:d,writable:!1,configurable:!1},messageCapabilities:{value:g,writable:!1,configurable:!1},renewable:{value:m,writable:!1,enumerable:!1,configurable:!1},headerdata:{value:v,writable:!1,enumerable:!1,configurable:!1},signature:{value:y,writable:!1,enumerable:!1,configurable:!1}}}function Vr(t,e,i){var n;if(i){if(e=t.getMslStore().getCryptoContext(i))return e;if(!i.isVerified()||!i.isDecrypted())throw new S(er.MASTERTOKEN_UNTRUSTED,i);return new gt(t,i)}if(i=e.scheme,!(n=t.getEntityAuthenticationFactory(i)))throw new o(er.ENTITYAUTH_FACTORY_NOT_FOUND,i);return n.getCryptoContext(t,e)}function Gr(o,t,s,u,c,h,e){var f;f={},$n(e,function(){if(!t)return[];if(!(t instanceof Array))throw new N(er.JSON_PARSE_ERROR,"headerdata "+h);!function e(i,n,r){var t,a;if(n>=i.length){for(a in t=[],f)t.push(f[a]);r.result(t)}else{if("object"!=typeof(t=i[n]))throw new N(er.JSON_PARSE_ERROR,"headerdata "+h);He(o,t,s,u,c,{result:function(t){$n(r,function(){f[t.uniqueKey()]=t,e(i,n+1,r)})},error:function(t){r.error(t)}})}}(t,0,e)})}function Jr(t,s,u,c,h,f){$n(f,function(){return t.isPeerToPeer()?(e=t,i=s,n={result:function(o){$n(f,function(){var e,i,n,r,a=u?u.masterToken:o;e=t,i=s,n=a,r={result:function(e){$n(f,function(){Gr(t,s.peerservicetokens,a,e,c,h,{result:function(t){$n(f,function(){return{peerMasterToken:o,peerUserIdToken:e,peerServiceTokens:t}})},error:function(t){$n(f,function(){throw t instanceof P&&(t.setEntity(a),t.setUser(e)),t})}})})},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(a),t})}},$n(r,function(){var t=i.peeruseridtoken;if(t&&"object"!=typeof t)throw new N(er.JSON_PARSE_ERROR,"headerdata "+h);if(!t)return null;Be(e,t,n,r)})})},error:f.error},void $n(n,function(){var t=i.peermastertoken;if(t&&"object"!=typeof t)throw new N(er.JSON_PARSE_ERROR,"headerdata "+h);if(!t)return null;De(e,t,n)})):{peerMasterToken:null,peerUserIdToken:null,peerServiceTokens:[]};var e,i,n})}function zr(r,e,i,a){var o;o=[],$n(a,function(){var t=e.keyrequestdata;if(!t)return o;if(!(t instanceof Array))throw new N(er.JSON_PARSE_ERROR,"headerdata "+i);!function e(i,n){$n(a,function(){return n>=i.length?o:void Kt(r,i[n],{result:function(t){$n(a,function(){o.push(t),e(i,n+1)})},error:function(t){a.error(t)}})})}(t,0)})}function Yr(t,e){this.payload=t,this.signature=e}function Wr(n,r,t,e,a){var o,s,u,c,h;s=o=0,u=n.getKeyExchangeFactories(),h=t||e,function i(){$n(a,function(){var t,e;if(s>=r.length&&(s=0,++o),o>=u.length){if(c)throw c;throw new k(er.KEYX_FACTORY_NOT_FOUND,JSON.stringify(r))}t=u[o],e=r[s],t.scheme!=e.keyExchangeScheme?(++s,i()):t.generateResponse(n,e,h,{result:function(t){a.result(t)},error:function(t){$n(a,function(){if(!(t instanceof P))throw t;c=t,++s,i()})}})})}()}function Xr(t,e){return e[t]||e[""]}function Qr(t){var e=t.builder.getKeyExchangeData();return e&&!t.ctx.isPeerToPeer()?e.keyResponseData.masterToken:t.builder.getMasterToken()}function Zr(u,t,c,h){$n(h,function(){var i,n,r,a,o,s;if(i=t.masterToken,!(n=t.keyResponseData))return null;if(r=n.keyExchangeScheme,!(a=u.getKeyExchangeFactory(r)))throw new k(er.KEYX_FACTORY_NOT_FOUND,r);s=0,function e(){$n(h,function(){var t;if(s>=c.length){if(o)throw o;throw new k(er.KEYX_RESPONSE_REQUEST_MISMATCH,JSON.stringify(c))}t=c[s],r!=t.keyExchangeScheme?(++s,e()):a.getCryptoContext(u,t,n,i,{result:h.result,error:function(t){$n(h,function(){if(!(t instanceof P))throw t;o=t,++s,e()})}})})}()})}function $r(t){return function(){t.abort()}}function ta(t,e){Object.defineProperties(this,{masterToken:{value:t,writable:!1,configurable:!1},ticket:{value:e,writable:!1,configurable:!1}})}function ea(t,e){Object.defineProperties(this,{builder:{value:t,writable:!1,configurable:!1},msgCtx:{value:e,writable:!1,configurable:!1}})}function ia(t,e,i){Object.defineProperties(this,{requestHeader:{value:t,writable:!1,configurable:!1},payloads:{value:e,writable:!1,configurable:!1},handshake:{value:i,writable:!1,configurable:!1}})}function na(t,e){Object.defineProperties(this,{requestHeader:{value:e.requestHeader,writable:!1,configurable:!1},payloads:{value:e.payloads,writable:!1,configurable:!1},handshake:{value:e.handshake,writable:!1,configurable:!1},response:{value:t,writable:!1,configurable:!1}})}function ra(t){for(;t;){if(t instanceof E)return 1;t=t instanceof P?t.cause:A}}function aa(e,i,n,t,r,a,o,s,u){Ae(i,t,r,a,{result:function(t){n&&n.sentHeader(t),Re(i,o,I,t,null,null,s,{result:function(t){e.setAbort(function(){t.abort()}),t.close(s,{result:function(t){tr(u,function(){if(!t)throw new E("sendError aborted.");return t})},timeout:function(){u.timeout()},error:function(t){u.error(t)}})},timeout:function(){},error:function(t){u.error(t)}})},error:function(t){u.error(t)}})}function oa(t,e,i,n){this.sessiondata=t,this.tokendata=e,this.signature=i,this.verified=n}function sa(t,e,i){this.tokendata=t,this.signature=e,this.verified=i}function ua(t,e,i){this.tokendata=t,this.signature=e,this.verified=i}function ca(t,e){return"<"+t+">"+e+"</"+t+">"}function ha(t){return t.replace(/[<>&"']/g,function(t){return Cn[t]})}function fa(t){return encodeURIComponent(t).replace("%20","+").replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}i=pt.nfCrypto||pt.msCrypto||pt.webkitCrypto||pt.crypto,l=i&&(i.webkitSubtle||i.subtle),r=pt.nfCryptokeys||pt.msCryptokeys||pt.webkitCryptokeys||pt.cryptokeys,Ti=pt,fr.prototype={readByte:function(){return this.abv[this.position++]},writeByte:function(t){this.abv[this.position++]=t},peekByte:function(t){return this.abv[t]},copyBytes:function(t,e,i){var n=new Uint8Array(this.abv.buffer,this.position,i);t=new Uint8Array(t.buffer,e,i),n.set(t),this.position+=i},seek:function(t){this.position=t},skip:function(t){this.position+=t},getPosition:function(){return this.position},setPosition:function(t){this.position=t},getRemaining:function(){return this.abv.length-this.position},getLength:function(){return this.abv.length},isEndOfStream:function(){return this.position>=this.abv.length},show:function(){return"AbvStream: pos "+this.getPosition().toString()+" of "+this.getLength().toString()}},Ai=fr,Oi={},Ii={BER:0,BOOLEAN:1,INTEGER:2,BIT_STRING:3,OCTET_STRING:4,NULL:5,OBJECT_IDENTIFIER:6,OBJECT_DESCRIPTOR:7,INSTANCE_OF_EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED_PPV:11,UTF8_STRING:12,RELATIVE_OID:13,SEQUENCE:16,SET:17,NUMERIC_STRING:18,PRINTABLE_STRING:19,TELETEX_STRING:20,T61_STRING:20,VIDEOTEX_STRING:21,IA5_STRING:22,UTC_TIME:23,GENERALIZED_TIME:24,GRAPHIC_STRING:25,VISIBLE_STRING:26,ISO64_STRING:26,GENERAL_STRING:27,UNIVERSAL_STRING:28,CHARACTER_STRING:29,BMP_STRING:30},(xi=function(t,e,i,n,r,a){this._data=t,this._parent=e||A,this._constructed=i||!1,this._tagClass=0,this._tag=n||0,this._dataIdx=r||0,this._dataLen=a||0}).prototype={_child:A,_next:A,get data(){return new Uint8Array(this._data.buffer.slice(this._dataIdx,this._dataIdx+this._dataLen))},get backingStore(){return this._data},get constructed(){return this._constructed},set constructed(t){this._constructed=0!=t},get tagClass(){return this._tagClass},set tagClass(t){this._tagClass=t},get tag(){return this._tag},set tag(t){this._tag=t},get dataIdx(){return this._dataIdx},set dataIdx(t){this._dataIdx=t},get dataLen(){return this._dataLen},set dataLen(t){this._dataLen=t},get child(){return this._child},set child(t){this._child=t,this._child.parent=this},get next(){return this._next},set next(t){this._next=t},get parent(){return this._parent},set parent(t){this._parent=t},get payloadLen(){var t=0;if(this._child){for(var e=this._child;e;)t+=e.length,e=e.next;this._tag==Ii.BIT_STRING&&t++}else switch(this._tag){case Ii.INTEGER:t=this._dataLen,this._data[this._dataIdx]>>7&&t++;break;case Ii.BIT_STRING:t=this._dataLen+1;break;case Ii.OCTET_STRING:t=this._dataLen;break;case Ii.NULL:t=0;break;case Ii.OBJECT_IDENTIFIER:pr(this._data,this._dataIdx,this._dataLen)&&(t=9)}return t},get length(){var t,e=this.payloadLen;if(127<e)for(t=e;t;)t>>=8,++e;return e+2},get der(){var t=this.length;return t?(t=new Uint8Array(t),function t(e,i){var n;if(i.writeByte(e.tagClass<<6|e.constructed<<5|e.tag),(n=e.payloadLen)<128)i.writeByte(n);else{for(var r=n,a=0;r;)++a,r>>=8;for(i.writeByte(128|a),r=0;r<a;++r)i.writeByte(n>>8*(a-r-1)&255)}if(e.child)for(e.tag==Ii.BIT_STRING&&i.writeByte(0),e=e._child;e;){if(!t(e,i))return;e=e.next}else switch(e.tag){case Ii.INTEGER:e.backingStore[e.dataIdx]>>7&&i.writeByte(0),i.copyBytes(e.backingStore,e.dataIdx,e.dataLen);break;case Ii.BIT_STRING:i.writeByte(0),i.copyBytes(e.backingStore,e.dataIdx,e.dataLen);break;case Ii.OCTET_STRING:i.copyBytes(e.backingStore,e.dataIdx,e.dataLen);break;case Ii.OBJECT_IDENTIFIER:i.copyBytes(e.backingStore,e.dataIdx,e.dataLen)}return 1}(this,new Ai(t))?t:A):A},get nChildren(){for(var t=0,e=this._child;e;)t++,e=e.next;return t}},Pi={createSequenceNode:function(){return new xi(null,null,!0,Ii.SEQUENCE,null,null)},createOidNode:function(t){return new xi(t,null,!1,Ii.OBJECT_IDENTIFIER,0,t?t.length:0)},createNullNode:function(){return new xi(null,null,!1,Ii.NULL,null,null)},createBitStringNode:function(t){return new xi(t,null,!1,Ii.BIT_STRING,0,t?t.length:0)},createIntegerNode:function(t){return new xi(t,null,!1,Ii.INTEGER,0,t?t.length:0)},createOctetStringNode:function(t){return new xi(t,null,!1,Ii.OCTET_STRING,0,t?t.length:0)}},(Ri=function(t){this._currentNode=this._rootNode=t}).prototype={addChild:function(t){this.addTo(this._currentNode,t)},addSibling:function(t){this.addTo(this._currentNode.parent,t)},addTo:function(t,e){if(this._currentNode=e,(this._currentNode.parent=t).child){for(t=t.child;t.next;)t=t.next;t.next=e}else t.child=e},addToParent:function(t,e){this.findNode(t)&&this.addTo(t,e)},findNode:function(t){for(var e=this._currentNode;e;){if(t==e)return!0;e=e.parent}return!1}},Ni=0,ji=new Uint8Array([42,134,72,134,247,13,1,1,1]),Ci=function(t,e,i,n){this.n=t,this.e=e,this.ext=i,this.keyOps=n},Li=function(t,e,i,n,r,a,o,s,u,c,h){this.n=t,this.e=e,this.d=i,this.p=n,this.q=r,this.dp=a,this.dq=o,this.qi=s,this.alg=u,this.keyOps=c,this.ext=h},Mi="sign verify encrypt decrypt wrapKey unwrapKey deriveKey deriveBits".split(" "),Er.prototype.getDer=function(){return this.der},Er.prototype.getType=function(){return this.type},Er.prototype.getKeyOps=function(){return this.keyOps},Er.prototype.getExtractable=function(){return this.extractable},Oi.parse=function(t){return Ni=0,function t(e,i,n){var r,a,o,s,u,c=e.backingStore,h=new Ai(c,i);if(i+=n,n=e,8<Ni++)return A;for(;h.getPosition()<i;){if(h.getPosition(),31==(31&(a=h.readByte()))){for(r=0;128&a;)r<<=8,r|=127&a;a=r}if((r=31&(o=a))<0||30<r)return A;if((a=lr(h))<0||a>h.getRemaining())return A;n.constructed=32&o,n.tagClass=(192&o)>>6,n.tag=r,n.dataLen=a,n.dataIdx=h.getPosition(),r=h,s=o,o=a,(r=!(!(32&s)&&(s<Ii.BIT_STRING||s>Ii.OCTET_STRING||(u=new Ai(r),s==Ii.BIT_STRING&&u.skip(1),u.readByte()>>6&1||(s=lr(u),u.getPosition()-r.getPosition()+s!=o)))))&&(r=h.getPosition(),o=a,n.tag==Ii.BIT_STRING&&(n.dataIdx++,n.dataLen--,r++,o--),n.child=new xi(c,n),t(n.child,r,o)),n.tag==Ii.INTEGER&&(r=h.getPosition(),0==h.peekByte(r)&&h.peekByte(r+1)>>7&&(n.dataIdx++,n.dataLen--)),h.skip(a),h.getPosition()<i&&(n.next=new xi(c,n.parent),n=n.next)}return Ni--,e}(new xi(t),0,t.length)},Oi.show=function(t,e){},Oi.isRsaSpki=dr,Oi.isRsaPkcs8=br,Oi.NodeFactory=Pi,Oi.Builder=Ri,Oi.tagVal=Ii,Oi.RsaPublicKey=Ci,Oi.RsaPrivateKey=Li,Oi.buildRsaSpki=mr,Oi.parseRsaSpki=function(t){return gr(t=Oi.parse(t))},Oi.buildRsaPkcs8=vr,Oi.parseRsaPkcs8=function(t){return br(t=Oi.parse(t))?yr(t):A},Oi.buildRsaJwk=wr,Oi.parseRsaJwk=_r,Oi.RsaDer=Er,Oi.rsaDerToJwk=function(t,e,i,n){if(!(t=Oi.parse(t)))return A;if(dr(t))t=gr(t);else{if(!br(t))return A;t=yr(t)}return wr(t,e,i,n)},Oi.jwkToRsaDer=function(t){var e,i;if(!(t=_r(t)))return A;if(t instanceof Ci)e="spki",i=mr(t).der;else{if(!(t instanceof Li))return A;e="pkcs8",i=vr(t).der}return new Er(i,e,t.keyOps,t.ext)},Oi.webCryptoAlgorithmToJwkAlg=function(t){return"RSAES-PKCS1-v1_5"==t.name?"RSA1_5":"RSASSA-PKCS1-v1_5"==t.name?"SHA-256"==t.hash.name?"RS256":"SHA-384"==t.hash.name?"RS384":"SHA-512"==t.hash.name?"RS512":A:A},Oi.webCryptoUsageToJwkKeyOps=function(t){return t.map(function(t){return"wrapKey"==t?"wrap":"unwrapKey"==t?"unwrap":t})},Ti.ASN1=Oi,function(){for(var s={},u={},c={"=":0,".":0},h={"=":0,".":0},f=/\s+/g,l=/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/_-]*[=]{0,2}$/,t=64;t--;)s["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]]=262144*t,u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]]=4096*t,c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]]=64*t,h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]]=t;for(t=64;t--&&"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]!="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t];)s["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]]=262144*t,u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]]=4096*t,c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]]=64*t,h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"[t]]=t;g=function(t,e){for(var i="",n=0,r=t.length,a=r-2,o=e?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=e?"":"=";n<a;)i+=o[(e=65536*t[n++]+256*t[n++]+t[n++])>>>18]+o[e>>>12&63]+o[e>>>6&63]+o[63&e];return n==a?i+=o[(e=65536*t[n++]+256*t[n++])>>>18]+o[e>>>12&63]+o[e>>>6&63]+s:n==r-1&&(i+=o[(e=65536*t[n++])>>>18]+o[e>>>12&63]+s+s),i},O=function(t,e){if(t=t.replace(f,""),e=e&&t.length%4){e=4-e;for(var i=0;i<e;++i)t+="="}if(0!=(e=t.length)%4||!l.test(t))throw Error("bad base64: "+t);for(var n=e/4*3-("="==t[e-1]?1:0)-("="==t[e-2]?1:0),r=new Uint8Array(n),a=0,o=0;a<e;)i=s[t[a++]]+u[t[a++]]+c[t[a++]]+h[t[a++]],r[o++]=i>>>16,o<n&&(r[o++]=i>>>8&255,o<n&&(r[o++]=255&i));return r}}(),p={},function(){var n,o,s,u,t;function r(t){if(!(this instanceof r))return new r(t);for(var e=0,i=o.length;e<i;e++)this[o[e]]="";this.bufferCheckPosition=p.MAX_BUFFER_LENGTH,this.q=this.c=this.p="",this.opt=t||{},this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.state=s.BEGIN,this.stack=new n,this.index=this.position=this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,c(this,"onready")}function c(t,e,i){t[e]&&t[e](i)}function h(t,e){var i=t.opt,n=t.textNode;i.trim&&(n=n.trim()),i.normalize&&(n=n.replace(/\s+/g," ")),t.textNode=n,t.textNode&&c(t,e||"onvalue",t.textNode),t.textNode=""}function f(t,e){return h(t),e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c,e=Error(e),t.error=e,c(t,"onerror",e),t}function l(t){return t.state!==s.VALUE&&f(t,"Unexpected end"),h(t),t.c="",t.closed=!0,c(t,"onend"),r.call(t,t.opt),t}for(t in n=Array,p.parser=function(t){return new r(t)},p.CParser=r,p.MAX_BUFFER_LENGTH=65536,p.DEBUG=!1,p.INFO=!1,p.EVENTS="value string key openobject closeobject openarray closearray error end ready".split(" "),o=["textNode","numberNode"],p.EVENTS.filter(function(t){return"error"!==t&&"end"!==t}),s=0,p.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++},p.STATE)p.STATE[p.STATE[t]]=t;s=p.STATE,Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),u=/[\\"\n]/g,r.prototype={end:function(){l(this)},write:function(t){var e,i,n;if(this.error)throw this.error;if(this.closed)return f(this,"Cannot write after close. Assign an onready handler.");if(null===t)return l(this);for(var r,a=t[0];a&&(r=a,this.c=a=t.charAt(this.index++),r!==a?this.p=r:r=this.p,a);)switch(this.position++,"\n"===a?(this.line++,this.column=0):this.column++,this.state){case s.BEGIN:"{"===a?this.state=s.OPEN_OBJECT:"["===a?this.state=s.OPEN_ARRAY:"\r"!==a&&"\n"!==a&&" "!==a&&"\t"!==a&&f(this,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;if(this.state===s.OPEN_KEY)this.stack.push(s.CLOSE_KEY);else{if("}"===a){c(this,"onopenobject"),c(this,"oncloseobject"),this.state=this.stack.pop()||s.VALUE;continue}this.stack.push(s.CLOSE_OBJECT)}'"'===a?this.state=s.STRING:f(this,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;":"===a?(this.state===s.CLOSE_OBJECT?(this.stack.push(s.CLOSE_OBJECT),h(this,"onopenobject")):h(this,"onkey"),this.state=s.VALUE):"}"===a?(h(this),c(this,"oncloseobject",void 0),this.state=this.stack.pop()||s.VALUE):","===a?(this.state===s.CLOSE_OBJECT&&this.stack.push(s.CLOSE_OBJECT),h(this),this.state=s.OPEN_KEY):f(this,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;if(this.state===s.OPEN_ARRAY){if(c(this,"onopenarray"),this.state=s.VALUE,"]"===a){c(this,"onclosearray"),this.state=this.stack.pop()||s.VALUE;continue}this.stack.push(s.CLOSE_ARRAY)}'"'===a?this.state=s.STRING:"{"===a?this.state=s.OPEN_OBJECT:"["===a?this.state=s.OPEN_ARRAY:"t"===a?this.state=s.TRUE:"f"===a?this.state=s.FALSE:"n"===a?this.state=s.NULL:"-"===a?this.numberNode+=a:"0"===a||-1!=="123456789".indexOf(a)?(this.numberNode+=a,this.state=s.NUMBER_DIGIT):f(this,"Bad value");continue;case s.CLOSE_ARRAY:if(","===a)this.stack.push(s.CLOSE_ARRAY),h(this,"onvalue"),this.state=s.VALUE;else if("]"===a)h(this),c(this,"onclosearray",void 0),this.state=this.stack.pop()||s.VALUE;else{if("\r"===a||"\n"===a||" "===a||"\t"===a)continue;f(this,"Bad array")}continue;case s.STRING:r=this.index-1,e=this.slashed,i=this.unicodeI;t:for(;;){if(p.DEBUG)for(;0<i;)if(this.unicodeS+=a,a=t.charAt(this.index++),4===i?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),i=0,r=this.index-1):i++,!a)break t;if('"'===a&&!e){this.state=this.stack.pop()||s.VALUE,(this.textNode+=t.substring(r,this.index-1))||c(this,"onvalue","");break}if("\\"===a&&!e&&(e=!0,this.textNode+=t.substring(r,this.index-1),!(a=t.charAt(this.index++))))break;if(e){if(e=!1,"n"===a?this.textNode+="\n":"r"===a?this.textNode+="\r":"t"===a?this.textNode+="\t":"f"===a?this.textNode+="\f":"b"===a?this.textNode+="\b":"u"===a?(i=1,this.unicodeS=""):this.textNode+=a,a=t.charAt(this.index++),r=this.index-1,a)continue;break}if(u.lastIndex=this.index,null===(n=u.exec(t))){this.index=t.length+1,this.textNode+=t.substring(r,this.index-1);break}if(this.index=n.index+1,!(a=t.charAt(n.index))){this.textNode+=t.substring(r,this.index-1);break}}this.slashed=e,this.unicodeI=i;continue;case s.TRUE:if(""===a)continue;"r"===a?this.state=s.TRUE2:f(this,"Invalid true started with t"+a);continue;case s.TRUE2:if(""===a)continue;"u"===a?this.state=s.TRUE3:f(this,"Invalid true started with tr"+a);continue;case s.TRUE3:if(""===a)continue;"e"===a?(c(this,"onvalue",!0),this.state=this.stack.pop()||s.VALUE):f(this,"Invalid true started with tru"+a);continue;case s.FALSE:if(""===a)continue;"a"===a?this.state=s.FALSE2:f(this,"Invalid false started with f"+a);continue;case s.FALSE2:if(""===a)continue;"l"===a?this.state=s.FALSE3:f(this,"Invalid false started with fa"+a);continue;case s.FALSE3:if(""===a)continue;"s"===a?this.state=s.FALSE4:f(this,"Invalid false started with fal"+a);continue;case s.FALSE4:if(""===a)continue;"e"===a?(c(this,"onvalue",!1),this.state=this.stack.pop()||s.VALUE):f(this,"Invalid false started with fals"+a);continue;case s.NULL:if(""===a)continue;"u"===a?this.state=s.NULL2:f(this,"Invalid null started with n"+a);continue;case s.NULL2:if(""===a)continue;"l"===a?this.state=s.NULL3:f(this,"Invalid null started with nu"+a);continue;case s.NULL3:if(""===a)continue;"l"===a?(c(this,"onvalue",null),this.state=this.stack.pop()||s.VALUE):f(this,"Invalid null started with nul"+a);continue;case s.NUMBER_DECIMAL_POINT:"."===a?(this.numberNode+=a,this.state=s.NUMBER_DIGIT):f(this,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:-1!=="0123456789".indexOf(a)?this.numberNode+=a:"."===a?(-1!==this.numberNode.indexOf(".")&&f(this,"Invalid number has two dots"),this.numberNode+=a):"e"===a||"E"===a?(-1===this.numberNode.indexOf("e")&&-1===this.numberNode.indexOf("E")||f(this,"Invalid number has two exponential"),this.numberNode+=a):"+"===a||"-"===a?("e"!==r&&"E"!==r&&f(this,"Invalid symbol in number"),this.numberNode+=a):(this.numberNode&&c(this,"onvalue",parseFloat(this.numberNode)),this.numberNode="",this.index--,this.state=this.stack.pop()||s.VALUE);continue;default:f(this,"Unknown state: "+this.state)}if(this.position>=this.bufferCheckPosition){for(t=Math.max(p.MAX_BUFFER_LENGTH,10),r=a=0,e=o.length;r<e;r++)t<(i=this[o[r]].length)&&("text"===o[r]||f(this,"Max buffer length exceeded: "+o[r])),a=Math.max(a,i);this.bufferCheckPosition=p.MAX_BUFFER_LENGTH-a+this.position}return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)}}}(),function(){var t,l,p;function d(t,n){return n=n||t.length,t.reduce(function(t,e,i){return i<n?t+String.fromCharCode(e):t},"")}for(var b={},e=0;e<256;++e)t=d([e]),b[t]=e;for(l=Object.keys(b).length,p=[],e=0;e<256;++e)p[e]=[e];n=function(t,e){var i,n;function r(t,e){for(var i;0<e;){if(c>=u.length)return;h<e?(i=t,i>>>=e-h,u[c]|=255&i,e-=h,h=8,++c):e<=h&&(i=t,i<<=h-e,i&=255,i>>>=8-h,u[c]|=255&i,h-=e,(e=0)==h&&(h=8,++c))}return 1}for(n in b)e[n]=b[n];for(var a=l,o=[],s=8,u=new Uint8Array(t.length),c=0,h=8,f=0;f<t.length;++f)if(i=t[f],o.push(i),!e[n=d(o)]){if(!r(e[o=d(o,o.length-1)],s))return null;0!=a>>s&&++s,e[n]=a++,o=[i]}return 0<o.length&&!r(e[n=d(o)],s)?null:u.subarray(0,h<8?c+1:c)},a=function(t){for(var e,i,n,r=p.slice(),a=0,o=0,s=8,u=new Uint8Array(Math.ceil(1.5*t.length)),c=0,h=[];a<t.length&&!(8*(t.length-a)-o<s);){for(var f=n=0;f<s;)e=Math.min(s-f,8-o),i=t[a],i<<=o,i&=255,8==(o+=e)&&(o=0,++a),n|=(255&(i>>>=8-e))<<s-(f+=e);f=r[n],0==h.length?++s:(f?h.push(f[0]):h.push(h[0]),r[r.length]=h,h=[],r.length==1<<s&&++s,f=f||r[n]),(n=c+f.length)>=u.length&&((e=new Uint8Array(Math.ceil(1.5*n))).set(u),u=e),u.set(f,c),c=n,h=h.concat(f)}return u.subarray(0,c)}}(),I="utf-8",x=9007199254740992,Di=y={GZIP:"GZIP",LZW:"LZW"},Object.freeze(y),f=function(t){for(var e=[Di.GZIP,Di.LZW],i=0;i<e.length&&0<t.length;++i)for(var n=e[i],r=0;r<t.length;++r)if(t[r]==n)return n;return null},Ui=s={AES_CBC_PKCS5Padding:"AES/CBC/PKCS5Padding",AESWrap:"AESWrap",RSA_ECB_PKCS1Padding:"RSA/ECB/PKCS1Padding"},Object.freeze(s),h=function(t){return Ui.AES_CBC_PKCS5Padding==t?Ui.AES_CBC_PKCS5Padding:Ui.RSA_ECB_PKCS1Padding==t?Ui.RSA_ECB_PKCS1Padding:Ui[t]},Bi=Rn={HmacSHA256:"HmacSHA256",SHA256withRSA:"SHA256withRSA"},Object.freeze(Rn),c=function(t){return Bi[t]},v={FAIL:1,TRANSIENT_FAILURE:2,ENTITY_REAUTH:3,USER_REAUTH:4,KEYX_REQUIRED:5,ENTITYDATA_REAUTH:6,USERDATA_REAUTH:7,EXPIRED:8,REPLAYED:9,SSOTOKEN_REJECTED:10},Object.freeze(v),u={isObjectLiteral:function(t){return null!==t&&"object"==typeof t&&t.constructor===Object},extendDeep:function(){var t,e,i,n,r=arguments[0],a=1,o=arguments.length,s=!1;for("boolean"==typeof r&&(s=r,r=arguments[1],a=2);a<o;a++)if(null!=(t=arguments[a]))for(e in t)s&&e in r||r!==(i=t[e])&&i!==A&&(n=r[e],r[e]=null!==n&&null!==i&&"object"==typeof n&&"object"==typeof i?u.extendDeep(s,{},n,i):i);return r}},Fi={},qi={actions:!0},Function.prototype.base=function(){},u.Class={create:Or,mixin:kr,extend:function(t,e){var i=Or();return i.prototype=new t,i.extend(e)}},u.mixin=function(){u.log&&u.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()"),kr.apply(null,arguments)},Hi={},Ki={actions:!0},Vi=function(){},Function.prototype.base=Vi,u.Class={create:Nr,mixin:Ir,extend:function(t,e){var i=Nr();return i.prototype=new t,i.extend(e)}},u.mixin=function(){u.log&&u.log.warn("util.mixin is deprecated.  Please change your code to use util.Class.mixin()"),Ir.apply(null,arguments)},d=u.Class.create({init:function(){Object.defineProperties(this,{_queue:{value:[],writable:!1,enumerable:!1,configurable:!1},_waiters:{value:{},writable:!1,enumerable:!1,configurable:!1},_nextWaiter:{value:0,writable:!0,enumerable:!1,configurable:!1},_lastWaiter:{value:0,writable:!0,enumerable:!1,configurable:!1}})},cancel:function(t){var e;this._waiters[t]&&(e=this._waiters[t],delete this._waiters[t],t==this._nextWaiter&&(this._nextWaiter=Cr(this)),e.call(this,A))},cancelAll:function(){for(;0!==this._nextWaiter;)this.cancel(this._nextWaiter)},poll:function(i,n){var r=this,a=jr(this._lastWaiter);return this._lastWaiter=a,tr(n,function(){var t,e;0<this._queue.length?(t=this._queue.shift(),setTimeout(function(){n.result(t)},0)):(-1!=i&&(e=setTimeout(function(){delete r._waiters[a],a==r._nextWaiter&&(r._nextWaiter=Cr(r)),n.timeout()},i)),this._waiters[a]=function(t){clearTimeout(e),setTimeout(function(){n.result(t)},0)},this._nextWaiter||(this._nextWaiter=a))},r),a},add:function(t){var e;this._nextWaiter?(e=this._waiters[this._nextWaiter],delete this._waiters[this._nextWaiter],this._nextWaiter=Cr(this),e.call(this,t)):this._queue.push(t)}}),Gi=0-x,t=u.Class.create({nextBoolean:function(){var t=new Uint8Array(1);return i.getRandomValues(t),!!(1&t[0])},nextInt:function(t){var e;if(null===t||t===A)return t=new Uint8Array(4),i.getRandomValues(t),e=(127&t[3])<<24|t[2]<<16|t[1]<<8|t[0],128&t[3]?-e:e;if("number"!=typeof t)throw new TypeError("n must be of type number");if(t<1)throw new RangeError("n must be greater than zero");return--t,e=new Uint8Array(4),i.getRandomValues(e),Math.floor(((127&e[3])<<24|e[2]<<16|e[1]<<8|e[0])/2147483648*(+t+1))},nextLong:function(){for(var t,e=Gi;e==Gi;)e=new Uint8Array(7),i.getRandomValues(e),t=16777216*((31&e[6])<<24|e[5]<<16|e[4]<<8|e[3])+(e[2]<<16|e[1]<<8|e[0]),e=128&e[6]?-t-1:t;return e},nextBytes:function(t){i.getRandomValues(t)}}),b=u.Class.create({init:function(){Object.defineProperties(this,{_readers:{value:{},writable:!1,enumerable:!1,configurable:!1},_waitingReaders:{value:{},writable:!1,enumerable:!1,configurable:!1},_writer:{value:null,writable:!0,enumerable:!1,configurable:!1},_waitingWriters:{value:{},writable:!1,enumerable:!1,configurable:!1},_nextReader:{value:0,writable:!0,enumerable:!1,configurable:!1},_nextWriter:{value:0,writable:!0,enumerable:!1,configurable:!1},_lastNumber:{value:0,writable:!0,enumerable:!1,configurable:!1}})},cancel:function(t){var e;this._waitingReaders[t]&&(e=this._waitingReaders[t],delete this._waitingReaders[t],t==this._nextReader&&(this._nextReader=Mr(this)),e.call(this,!0)),this._waitingWriters[t]&&(e=this._waitingWriters[t],delete this._waitingWriters[t],t==this._nextWriter&&(this._nextWriter=Dr(this)),e.call(this,!0))},cancelAll:function(){for(;0!==this._nextWriter;)this.cancel(this._nextWriter);for(;0!==this._nextReader;)this.cancel(this._nextReader)},readLock:function(t,i){var n=this,r=Lr(this._lastNumber);return this._lastNumber=r,tr(i,function(){var e;return this._writer||0!==Object.keys(this._waitingWriters).length?(-1!=t&&(e=setTimeout(function(){delete n._waitingReaders[r],r==n._nextReader&&(n._nextReader=Mr(n)),i.timeout()},t)),this._waitingReaders[r]=function(t){clearTimeout(e),t?setTimeout(function(){i.result(A)},0):(n._readers[r]=!0,setTimeout(function(){i.result(r)},0))},void(this._nextReader||(this._nextReader=r))):(this._readers[r]=!0,r)},n),r},writeLock:function(t,i){var n=this,r=Lr(this._lastNumber);return this._lastNumber=r,tr(i,function(){var e;return 0!==Object.keys(this._readers).length||0!==Object.keys(this._waitingReaders).length||this._writer?(-1!=t&&(e=setTimeout(function(){delete n._waitingWriters[r],r==n._nextWriter&&(n._nextWriter=Dr(n)),i.timeout()},t)),this._waitingWriters[r]=function(t){clearTimeout(e),t?setTimeout(function(){i.result(A)},0):(n._writer=r,setTimeout(function(){i.result(r)},0))},void(this._nextWriter||(this._nextWriter=r))):this._writer=r},n),r},unlock:function(t){if(t==this._writer)this._writer=null;else{if(!this._readers[t])throw new j("There is no reader or writer with ticket number "+t+".");delete this._readers[t]}if(this._nextWriter)0<Object.keys(this._readers).length||(t=this._waitingWriters[this._nextWriter],delete this._waitingWriters[this._nextWriter],this._nextWriter=Dr(this),t.call(this,!1));else{for(var e=this._nextReader;0<Object.keys(this._waitingReaders).length;e=Lr(e))this._waitingReaders[e]&&(t=this._waitingReaders[e],delete this._waitingReaders[e],t.call(this,!1));this._nextReader=0}}}),u.Class.mixin(er,{JSON_PARSE_ERROR:new er(0,v.FAIL,"Error parsing JSON."),JSON_ENCODE_ERROR:new er(1,v.FAIL,"Error encoding JSON."),ENVELOPE_HASH_MISMATCH:new er(2,v.FAIL,"Computed hash does not match envelope hash."),INVALID_PUBLIC_KEY:new er(3,v.FAIL,"Invalid public key provided."),INVALID_PRIVATE_KEY:new er(4,v.FAIL,"Invalid private key provided."),PLAINTEXT_ILLEGAL_BLOCK_SIZE:new er(5,v.FAIL,"Plaintext is not a multiple of the block size."),PLAINTEXT_BAD_PADDING:new er(6,v.FAIL,"Plaintext contains incorrect padding."),CIPHERTEXT_ILLEGAL_BLOCK_SIZE:new er(7,v.FAIL,"Ciphertext is not a multiple of the block size."),CIPHERTEXT_BAD_PADDING:new er(8,v.FAIL,"Ciphertext contains incorrect padding."),ENCRYPT_NOT_SUPPORTED:new er(9,v.FAIL,"Encryption not supported."),DECRYPT_NOT_SUPPORTED:new er(10,v.FAIL,"Decryption not supported."),ENVELOPE_KEY_ID_MISMATCH:new er(11,v.FAIL,"Encryption envelope key ID does not match crypto context key ID."),CIPHERTEXT_ENVELOPE_PARSE_ERROR:new er(12,v.FAIL,"Error parsing ciphertext envelope."),CIPHERTEXT_ENVELOPE_ENCODE_ERROR:new er(13,v.FAIL,"Error encoding ciphertext envelope."),SIGN_NOT_SUPPORTED:new er(14,v.FAIL,"Sign not supported."),VERIFY_NOT_SUPPORTED:new er(15,v.FAIL,"Verify not suppoprted."),SIGNATURE_ERROR:new er(16,v.FAIL,"Signature not initialized or unable to process data/signature."),HMAC_ERROR:new er(17,v.FAIL,"Error computing HMAC."),ENCRYPT_ERROR:new er(18,v.FAIL,"Error encrypting plaintext."),DECRYPT_ERROR:new er(19,v.FAIL,"Error decrypting ciphertext."),INSUFFICIENT_CIPHERTEXT:new er(20,v.FAIL,"Insufficient ciphertext for decryption."),SESSION_KEY_CREATION_FAILURE:new er(21,v.FAIL,"Error when creating session keys."),ASN1_PARSE_ERROR:new er(22,v.FAIL,"Error parsing ASN.1."),ASN1_ENCODE_ERROR:new er(23,v.FAIL,"Error encoding ASN.1."),INVALID_SYMMETRIC_KEY:new er(24,v.FAIL,"Invalid symmetric key provided."),INVALID_ENCRYPTION_KEY:new er(25,v.FAIL,"Invalid encryption key."),INVALID_HMAC_KEY:new er(26,v.FAIL,"Invalid HMAC key."),WRAP_NOT_SUPPORTED:new er(27,v.FAIL,"Wrap not supported."),UNWRAP_NOT_SUPPORTED:new er(28,v.FAIL,"Unwrap not supported."),UNIDENTIFIED_JWK_TYPE:new er(29,v.FAIL,"Unidentified JSON web key type."),UNIDENTIFIED_JWK_USAGE:new er(30,v.FAIL,"Unidentified JSON web key usage."),UNIDENTIFIED_JWK_ALGORITHM:new er(31,v.FAIL,"Unidentified JSON web key algorithm."),WRAP_ERROR:new er(32,v.FAIL,"Error wrapping plaintext."),UNWRAP_ERROR:new er(33,v.FAIL,"Error unwrapping ciphertext."),INVALID_JWK:new er(34,v.FAIL,"Invalid JSON web key."),INVALID_JWK_KEYDATA:new er(35,v.FAIL,"Invalid JSON web key keydata."),UNSUPPORTED_JWK_ALGORITHM:new er(36,v.FAIL,"Unsupported JSON web key algorithm."),WRAP_KEY_CREATION_FAILURE:new er(37,v.FAIL,"Error when creating wrapping key."),INVALID_WRAP_CIPHERTEXT:new er(38,v.FAIL,"Invalid wrap ciphertext."),UNSUPPORTED_JWE_ALGORITHM:new er(39,v.FAIL,"Unsupported JSON web encryption algorithm."),JWE_ENCODE_ERROR:new er(40,v.FAIL,"Error encoding JSON web encryption header."),JWE_PARSE_ERROR:new er(41,v.FAIL,"Error parsing JSON web encryption header."),INVALID_ALGORITHM_PARAMS:new er(42,v.FAIL,"Invalid algorithm parameters."),JWE_ALGORITHM_MISMATCH:new er(43,v.FAIL,"JSON web encryption header algorithms mismatch."),KEY_IMPORT_ERROR:new er(44,v.FAIL,"Error importing key."),KEY_EXPORT_ERROR:new er(45,v.FAIL,"Error exporting key."),DIGEST_ERROR:new er(46,v.FAIL,"Error in digest."),UNSUPPORTED_KEY:new er(47,v.FAIL,"Unsupported key type or algorithm."),UNSUPPORTED_JWE_SERIALIZATION:new er(48,v.FAIL,"Unsupported JSON web encryption serialization."),XML_PARSE_ERROR:new er(49,v.FAIL,"Error parsing XML."),XML_ENCODE_ERROR:new er(50,v.FAIL,"Error encoding XML."),INVALID_WRAPPING_KEY:new er(51,v.FAIL,"Invalid wrapping key."),UNIDENTIFIED_CIPHERTEXT_ENVELOPE:new er(52,v.FAIL,"Unidentified ciphertext envelope version."),UNIDENTIFIED_SIGNATURE_ENVELOPE:new er(53,v.FAIL,"Unidentified signature envelope version."),UNSUPPORTED_CIPHERTEXT_ENVELOPE:new er(54,v.FAIL,"Unsupported ciphertext envelope version."),UNSUPPORTED_SIGNATURE_ENVELOPE:new er(55,v.FAIL,"Unsupported signature envelope version."),UNIDENTIFIED_CIPHERSPEC:new er(56,v.FAIL,"Unidentified cipher specification."),UNIDENTIFIED_ALGORITHM:new er(57,v.FAIL,"Unidentified algorithm."),SIGNATURE_ENVELOPE_PARSE_ERROR:new er(58,v.FAIL,"Error parsing signature envelope."),SIGNATURE_ENVELOPE_ENCODE_ERROR:new er(59,v.FAIL,"Error encoding signature envelope."),INVALID_SIGNATURE:new er(60,v.FAIL,"Invalid signature."),WRAPKEY_FINGERPRINT_NOTSUPPORTED:new er(61,v.FAIL,"Wrap key fingerprint not supported"),UNIDENTIFIED_JWK_KEYOP:new er(62,v.FAIL,"Unidentified JSON web key key operation."),MASTERTOKEN_UNTRUSTED:new er(1e3,v.ENTITY_REAUTH,"Master token is not trusted."),MASTERTOKEN_KEY_CREATION_ERROR:new er(1001,v.ENTITY_REAUTH,"Unable to construct symmetric keys from master token."),MASTERTOKEN_EXPIRES_BEFORE_RENEWAL:new er(1002,v.ENTITY_REAUTH,"Master token expiration timestamp is before the renewal window opens."),MASTERTOKEN_SESSIONDATA_MISSING:new er(1003,v.ENTITY_REAUTH,"No master token session data found."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE:new er(1004,v.ENTITY_REAUTH,"Master token sequence number is out of range."),MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new er(1005,v.ENTITY_REAUTH,"Master token serial number is out of range."),MASTERTOKEN_TOKENDATA_INVALID:new er(1006,v.ENTITY_REAUTH,"Invalid master token data."),MASTERTOKEN_SIGNATURE_INVALID:new er(1007,v.ENTITY_REAUTH,"Invalid master token signature."),MASTERTOKEN_SESSIONDATA_INVALID:new er(1008,v.ENTITY_REAUTH,"Invalid master token session data."),MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_SYNC:new er(1009,v.ENTITY_REAUTH,"Master token sequence number does not have the expected value."),MASTERTOKEN_TOKENDATA_MISSING:new er(1010,v.ENTITY_REAUTH,"No master token data found."),MASTERTOKEN_TOKENDATA_PARSE_ERROR:new er(1011,v.ENTITY_REAUTH,"Error parsing master token data."),MASTERTOKEN_SESSIONDATA_PARSE_ERROR:new er(1012,v.ENTITY_REAUTH,"Error parsing master token session data."),MASTERTOKEN_IDENTITY_REVOKED:new er(1013,v.ENTITY_REAUTH,"Master token entity identity is revoked."),MASTERTOKEN_REJECTED_BY_APP:new er(1014,v.ENTITY_REAUTH,"Master token is rejected by the application."),USERIDTOKEN_MASTERTOKEN_MISMATCH:new er(2e3,v.USER_REAUTH,"User ID token master token serial number does not match master token serial number."),USERIDTOKEN_NOT_DECRYPTED:new er(2001,v.USER_REAUTH,"User ID token is not decrypted or verified."),USERIDTOKEN_MASTERTOKEN_NULL:new er(2002,v.USER_REAUTH,"User ID token requires a master token."),USERIDTOKEN_EXPIRES_BEFORE_RENEWAL:new er(2003,v.USER_REAUTH,"User ID token expiration timestamp is before the renewal window opens."),USERIDTOKEN_USERDATA_MISSING:new er(2004,v.USER_REAUTH,"No user ID token user data found."),USERIDTOKEN_MASTERTOKEN_NOT_FOUND:new er(2005,v.USER_REAUTH,"User ID token is bound to an unknown master token."),USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new er(2006,v.USER_REAUTH,"User ID token master token serial number is out of range."),USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new er(2007,v.USER_REAUTH,"User ID token serial number is out of range."),USERIDTOKEN_TOKENDATA_INVALID:new er(2008,v.USER_REAUTH,"Invalid user ID token data."),USERIDTOKEN_SIGNATURE_INVALID:new er(2009,v.USER_REAUTH,"Invalid user ID token signature."),USERIDTOKEN_USERDATA_INVALID:new er(2010,v.USER_REAUTH,"Invalid user ID token user data."),USERIDTOKEN_IDENTITY_INVALID:new er(2011,v.USER_REAUTH,"Invalid user ID token user identity."),RESERVED_2012:new er(2012,v.USER_REAUTH,"The entity is not associated with the user."),USERIDTOKEN_IDENTITY_NOT_FOUND:new er(2013,v.USER_REAUTH,"The user identity was not found."),USERIDTOKEN_PASSWORD_VERSION_CHANGED:new er(2014,v.USER_REAUTH,"The user identity must be reauthenticated because the password version changed."),USERIDTOKEN_USERAUTH_DATA_MISMATCH:new er(2015,v.USER_REAUTH,"The user ID token and user authentication data user identities do not match."),USERIDTOKEN_TOKENDATA_MISSING:new er(2016,v.USER_REAUTH,"No user ID token data found."),USERIDTOKEN_TOKENDATA_PARSE_ERROR:new er(2017,v.USER_REAUTH,"Error parsing user ID token data."),USERIDTOKEN_USERDATA_PARSE_ERROR:new er(2018,v.USER_REAUTH,"Error parsing user ID token user data."),USERIDTOKEN_REVOKED:new er(2019,v.USER_REAUTH,"User ID token is revoked."),USERIDTOKEN_REJECTED_BY_APP:new er(2020,v.USER_REAUTH,"User ID token is rejected by the application."),SERVICETOKEN_MASTERTOKEN_MISMATCH:new er(3e3,v.FAIL,"Service token master token serial number does not match master token serial number."),SERVICETOKEN_USERIDTOKEN_MISMATCH:new er(3001,v.FAIL,"Service token user ID token serial number does not match user ID token serial number."),SERVICETOKEN_SERVICEDATA_INVALID:new er(3002,v.FAIL,"Service token data invalid."),SERVICETOKEN_MASTERTOKEN_NOT_FOUND:new er(3003,v.FAIL,"Service token is bound to an unknown master token."),SERVICETOKEN_USERIDTOKEN_NOT_FOUND:new er(3004,v.FAIL,"Service token is bound to an unknown user ID token."),SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new er(3005,v.FAIL,"Service token master token serial number is out of range."),SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE:new er(3006,v.FAIL,"Service token user ID token serial number is out of range."),SERVICETOKEN_TOKENDATA_INVALID:new er(3007,v.FAIL,"Invalid service token data."),SERVICETOKEN_SIGNATURE_INVALID:new er(3008,v.FAIL,"Invalid service token signature."),SERVICETOKEN_TOKENDATA_MISSING:new er(3009,v.FAIL,"No service token data found."),UNIDENTIFIED_ENTITYAUTH_SCHEME:new er(4e3,v.FAIL,"Unable to identify entity authentication scheme."),ENTITYAUTH_FACTORY_NOT_FOUND:new er(4001,v.FAIL,"No factory registered for entity authentication scheme."),X509CERT_PARSE_ERROR:new er(4002,v.ENTITYDATA_REAUTH,"Error parsing X.509 certificate data."),X509CERT_ENCODE_ERROR:new er(4003,v.ENTITYDATA_REAUTH,"Error encoding X.509 certificate data."),X509CERT_VERIFICATION_FAILED:new er(4004,v.ENTITYDATA_REAUTH,"X.509 certificate verification failed."),ENTITY_NOT_FOUND:new er(4005,v.FAIL,"Entity not recognized."),INCORRECT_ENTITYAUTH_DATA:new er(4006,v.FAIL,"Entity used incorrect entity authentication data type."),RSA_PUBLICKEY_NOT_FOUND:new er(4007,v.ENTITYDATA_REAUTH,"RSA public key not found."),NPTICKET_GRACE_PERIOD_EXCEEDED:new er(4008,v.ENTITYDATA_REAUTH,"Fake NP-Tickets cannot be used after the grace period when the Playstation Network is up."),NPTICKET_SERVICE_ID_MISSING:new er(4009,v.ENTITYDATA_REAUTH,"NP-Ticket service ID is missing."),NPTICKET_SERVICE_ID_DISALLOWED:new er(4010,v.ENTITYDATA_REAUTH,"NP-Ticket service ID is not allowed."),NPTICKET_NOT_YET_VALID:new er(4011,v.ENTITYDATA_REAUTH,"NP-Ticket issuance date is in the future."),NPTICKET_EXPIRED:new er(4012,v.ENTITYDATA_REAUTH,"NP-Ticket has expired."),NPTICKET_PRIVATE_KEY_NOT_FOUND:new er(4013,v.ENTITYDATA_REAUTH,"No private key found for NP-Ticket GUID."),NPTICKET_COOKIE_VERIFICATION_FAILED:new er(4014,v.ENTITYDATA_REAUTH,"NP-Ticket cookie signature verification failed."),NPTICKET_INCORRECT_COOKIE_VERSION:new er(4015,v.ENTITYDATA_REAUTH,"Incorrect NP-Ticket cookie version."),NPTICKET_BROKEN:new er(4016,v.ENTITYDATA_REAUTH,"NP-Ticket broken."),NPTICKET_VERIFICATION_FAILED:new er(4017,v.ENTITYDATA_REAUTH,"NP-Ticket signature verification failed."),NPTICKET_ERROR:new er(4018,v.ENTITYDATA_REAUTH,"Unknown NP-Ticket TCM error."),NPTICKET_CIPHER_INFO_NOT_FOUND:new er(4019,v.ENTITYDATA_REAUTH,"No cipher information found for NP-Ticket."),NPTICKET_INVALID_CIPHER_INFO:new er(4020,v.ENTITYDATA_REAUTH,"Cipher information for NP-Ticket is invalid."),NPTICKET_UNSUPPORTED_VERSION:new er(4021,v.ENTITYDATA_REAUTH,"Unsupported NP-Ticket version."),NPTICKET_INCORRECT_KEY_LENGTH:new er(4022,v.ENTITYDATA_REAUTH,"Incorrect NP-Ticket public key length."),UNSUPPORTED_ENTITYAUTH_DATA:new er(4023,v.FAIL,"Unsupported entity authentication data."),CRYPTEX_RSA_KEY_SET_NOT_FOUND:new er(4024,v.FAIL,"Cryptex RSA key set not found."),ENTITY_REVOKED:new er(4025,v.FAIL,"Entity is revoked."),ENTITY_REJECTED_BY_APP:new er(4026,v.ENTITYDATA_REAUTH,"Entity is rejected by the application."),FORCE_LOGIN:new er(5e3,v.USERDATA_REAUTH,"User must login again."),NETFLIXID_COOKIES_EXPIRED:new er(5001,v.USERDATA_REAUTH,"Netflix ID cookie identity has expired."),NETFLIXID_COOKIES_BLANK:new er(5002,v.USERDATA_REAUTH,"Netflix ID or Secure Netflix ID cookie is blank."),UNIDENTIFIED_USERAUTH_SCHEME:new er(5003,v.FAIL,"Unable to identify user authentication scheme."),USERAUTH_FACTORY_NOT_FOUND:new er(5004,v.FAIL,"No factory registered for user authentication scheme."),EMAILPASSWORD_BLANK:new er(5005,v.USERDATA_REAUTH,"Email or password is blank."),AUTHMGR_COMMS_FAILURE:new er(5006,v.TRANSIENT_FAILURE,"Error communicating with authentication manager."),EMAILPASSWORD_INCORRECT:new er(5007,v.USERDATA_REAUTH,"Email or password is incorrect."),UNSUPPORTED_USERAUTH_DATA:new er(5008,v.FAIL,"Unsupported user authentication data."),SSOTOKEN_BLANK:new er(5009,v.SSOTOKEN_REJECTED,"SSO token is blank."),SSOTOKEN_NOT_ASSOCIATED:new er(5010,v.USERDATA_REAUTH,"SSO token is not associated with a Netflix user."),USERAUTH_USERIDTOKEN_INVALID:new er(5011,v.USERDATA_REAUTH,"User authentication data user ID token is invalid."),PROFILEID_BLANK:new er(5012,v.USERDATA_REAUTH,"Profile ID is blank."),UNIDENTIFIED_USERAUTH_MECHANISM:new er(5013,v.FAIL,"Unable to identify user authentication mechanism."),UNSUPPORTED_USERAUTH_MECHANISM:new er(5014,v.FAIL,"Unsupported user authentication mechanism."),SSOTOKEN_INVALID:new er(5015,v.SSOTOKEN_REJECTED,"SSO token invalid."),USERAUTH_MASTERTOKEN_MISSING:new er(5016,v.USERDATA_REAUTH,"User authentication required master token is missing."),ACCTMGR_COMMS_FAILURE:new er(5017,v.TRANSIENT_FAILURE,"Error communicating with the account manager."),SSO_ASSOCIATION_FAILURE:new er(5018,v.TRANSIENT_FAILURE,"SSO user association failed."),SSO_DISASSOCIATION_FAILURE:new er(5019,v.TRANSIENT_FAILURE,"SSO user disassociation failed."),MDX_USERAUTH_VERIFICATION_FAILED:new er(5020,v.USERDATA_REAUTH,"MDX user authentication data verification failed."),USERAUTH_USERIDTOKEN_NOT_DECRYPTED:new er(5021,v.USERDATA_REAUTH,"User authentication data user ID token is not decrypted or verified."),MDX_USERAUTH_ACTION_INVALID:new er(5022,v.USERDATA_REAUTH,"MDX user authentication data action is invalid."),CTICKET_DECRYPT_ERROR:new er(5023,v.USERDATA_REAUTH,"CTicket decryption failed."),USERAUTH_MASTERTOKEN_INVALID:new er(5024,v.USERDATA_REAUTH,"User authentication data master token is invalid."),USERAUTH_MASTERTOKEN_NOT_DECRYPTED:new er(5025,v.USERDATA_REAUTH,"User authentication data master token is not decrypted or verified."),CTICKET_CRYPTOCONTEXT_ERROR:new er(5026,v.USERDATA_REAUTH,"Error creating CTicket crypto context."),MDX_PIN_BLANK:new er(5027,v.USERDATA_REAUTH,"MDX controller or target PIN is blank."),MDX_PIN_MISMATCH:new er(5028,v.USERDATA_REAUTH,"MDX controller and target PIN mismatch."),MDX_USER_UNKNOWN:new er(5029,v.USERDATA_REAUTH,"MDX controller user ID token or CTicket is not decrypted or verified."),USERAUTH_USERIDTOKEN_MISSING:new er(5030,v.USERDATA_REAUTH,"User authentication required user ID token is missing."),MDX_CONTROLLERDATA_INVALID:new er(5031,v.USERDATA_REAUTH,"MDX controller authentication data is invalid."),USERAUTH_ENTITY_MISMATCH:new er(5032,v.USERDATA_REAUTH,"User authentication data does not match entity identity."),USERAUTH_INCORRECT_DATA:new er(5033,v.FAIL,"Entity used incorrect key request data type"),SSO_ASSOCIATION_WITH_NONMEMBER:new er(5034,v.USERDATA_REAUTH,"SSO user association failed because the customer is not a member."),SSO_ASSOCIATION_WITH_FORMERMEMBER:new er(5035,v.USERDATA_REAUTH,"SSO user association failed because the customer is a former member."),SSO_ASSOCIATION_CONFLICT:new er(5036,v.USERDATA_REAUTH,"SSO user association failed because the token identifies a different member."),USER_REJECTED_BY_APP:new er(5037,v.USERDATA_REAUTH,"User is rejected by the application."),PROFILE_SWITCH_DISALLOWED:new er(5038,v.TRANSIENT_FAILURE,"Unable to switch user profile."),MEMBERSHIPCLIENT_COMMS_FAILURE:new er(5039,v.TRANSIENT_FAILURE,"Error communicating with the membership manager."),USERIDTOKEN_IDENTITY_NOT_ASSOCIATED_WITH_ENTITY:new er(5040,v.USER_REAUTH,"The entity is not associated with the user."),UNSUPPORTED_COMPRESSION:new er(6e3,v.FAIL,"Unsupported compression algorithm."),COMPRESSION_ERROR:new er(6001,v.FAIL,"Error compressing data."),UNCOMPRESSION_ERROR:new er(6002,v.FAIL,"Error uncompressing data."),MESSAGE_ENTITY_NOT_FOUND:new er(6003,v.FAIL,"Message header entity authentication data or master token not found."),PAYLOAD_MESSAGE_ID_MISMATCH:new er(6004,v.FAIL,"Payload chunk message ID does not match header message ID ."),PAYLOAD_SEQUENCE_NUMBER_MISMATCH:new er(6005,v.FAIL,"Payload chunk sequence number does not match expected sequence number."),PAYLOAD_VERIFICATION_FAILED:new er(6006,v.FAIL,"Payload chunk payload signature verification failed."),MESSAGE_DATA_MISSING:new er(6007,v.FAIL,"No message data found."),MESSAGE_FORMAT_ERROR:new er(6008,v.FAIL,"Malformed message data."),MESSAGE_VERIFICATION_FAILED:new er(6009,v.FAIL,"Message header/error data signature verification failed."),HEADER_DATA_MISSING:new er(6010,v.FAIL,"No header data found."),PAYLOAD_DATA_MISSING:new er(6011,v.FAIL,"No payload data found in non-EOM payload chunk."),PAYLOAD_DATA_CORRUPT:new er(6012,v.FAIL,"Corrupt payload data found in non-EOM payload chunk."),UNIDENTIFIED_COMPRESSION:new er(6013,v.FAIL,"Unidentified compression algorithm."),MESSAGE_EXPIRED:new er(6014,v.EXPIRED,"Message expired and not renewable. Rejected."),MESSAGE_ID_OUT_OF_RANGE:new er(6015,v.FAIL,"Message ID is out of range."),INTERNAL_CODE_NEGATIVE:new er(6016,v.FAIL,"Error header internal code is negative."),UNEXPECTED_RESPONSE_MESSAGE_ID:new er(6017,v.FAIL,"Unexpected response message ID. Possible replay."),RESPONSE_REQUIRES_ENCRYPTION:new er(6018,v.KEYX_REQUIRED,"Message response requires encryption."),PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE:new er(6019,v.FAIL,"Payload chunk sequence number is out of range."),PAYLOAD_MESSAGE_ID_OUT_OF_RANGE:new er(6020,v.FAIL,"Payload chunk message ID is out of range."),MESSAGE_REPLAYED:new er(6021,v.REPLAYED,"Non-replayable message replayed."),INCOMPLETE_NONREPLAYABLE_MESSAGE:new er(6022,v.FAIL,"Non-replayable message sent non-renewable or without key request data or without a master token."),HEADER_SIGNATURE_INVALID:new er(6023,v.FAIL,"Invalid Header signature."),HEADER_DATA_INVALID:new er(6024,v.FAIL,"Invalid header data."),PAYLOAD_INVALID:new er(6025,v.FAIL,"Invalid payload."),PAYLOAD_SIGNATURE_INVALID:new er(6026,v.FAIL,"Invalid payload signature."),RESPONSE_REQUIRES_MASTERTOKEN:new er(6027,v.KEYX_REQUIRED,"Message response requires a master token."),RESPONSE_REQUIRES_USERIDTOKEN:new er(6028,v.USER_REAUTH,"Message response requires a user ID token."),REQUEST_REQUIRES_USERAUTHDATA:new er(6029,v.FAIL,"User-associated message requires user authentication data."),UNEXPECTED_MESSAGE_SENDER:new er(6030,v.FAIL,"Message sender is equal to the local entity or not the master token entity."),NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN:new er(6031,v.FAIL,"Non-replayable message requires a master token."),NONREPLAYABLE_ID_OUT_OF_RANGE:new er(6032,v.FAIL,"Non-replayable message non-replayable ID is out of range."),MESSAGE_SERVICETOKEN_MISMATCH:new er(6033,v.FAIL,"Service token master token or user ID token serial number does not match the message token serial numbers."),MESSAGE_PEER_SERVICETOKEN_MISMATCH:new er(6034,v.FAIL,"Peer service token master token or user ID token serial number does not match the message peer token serial numbers."),RESPONSE_REQUIRES_INTEGRITY_PROTECTION:new er(6035,v.KEYX_REQUIRED,"Message response requires integrity protection."),HANDSHAKE_DATA_MISSING:new er(6036,v.FAIL,"Handshake message is not renewable or does not contain key request data."),MESSAGE_RECIPIENT_MISMATCH:new er(6037,v.FAIL,"Message recipient does not match local identity."),UNIDENTIFIED_KEYX_SCHEME:new er(7e3,v.FAIL,"Unable to identify key exchange scheme."),KEYX_FACTORY_NOT_FOUND:new er(7001,v.FAIL,"No factory registered for key exchange scheme."),KEYX_REQUEST_NOT_FOUND:new er(7002,v.FAIL,"No key request found matching header key response data."),UNIDENTIFIED_KEYX_KEY_ID:new er(7003,v.FAIL,"Unable to identify key exchange key ID."),UNSUPPORTED_KEYX_KEY_ID:new er(7004,v.FAIL,"Unsupported key exchange key ID."),UNIDENTIFIED_KEYX_MECHANISM:new er(7005,v.FAIL,"Unable to identify key exchange mechanism."),UNSUPPORTED_KEYX_MECHANISM:new er(7006,v.FAIL,"Unsupported key exchange mechanism."),KEYX_RESPONSE_REQUEST_MISMATCH:new er(7007,v.FAIL,"Key exchange response does not match request."),KEYX_PRIVATE_KEY_MISSING:new er(7008,v.FAIL,"Key exchange private key missing."),UNKNOWN_KEYX_PARAMETERS_ID:new er(7009,v.FAIL,"Key exchange parameters ID unknown or invalid."),KEYX_MASTER_TOKEN_MISSING:new er(7010,v.FAIL,"Master token required for key exchange is missing."),KEYX_INVALID_PUBLIC_KEY:new er(7011,v.FAIL,"Key exchange public key is invalid."),KEYX_PUBLIC_KEY_MISSING:new er(7012,v.FAIL,"Key exchange public key missing."),KEYX_WRAPPING_KEY_MISSING:new er(7013,v.FAIL,"Key exchange wrapping key missing."),KEYX_WRAPPING_KEY_ID_MISSING:new er(7014,v.FAIL,"Key exchange wrapping key ID missing."),KEYX_INVALID_WRAPPING_KEY:new er(7015,v.FAIL,"Key exchange wrapping key is invalid."),KEYX_INCORRECT_DATA:new er(7016,v.FAIL,"Entity used incorrect wrapping key data type"),CRYPTEX_ENCRYPTION_ERROR:new er(8e3,v.FAIL,"Error encrypting data with cryptex."),CRYPTEX_DECRYPTION_ERROR:new er(8001,v.FAIL,"Error decrypting data with cryptex."),CRYPTEX_MAC_ERROR:new er(8002,v.FAIL,"Error computing MAC with cryptex."),CRYPTEX_VERIFY_ERROR:new er(8003,v.FAIL,"Error verifying MAC with cryptex."),CRYPTEX_CONTEXT_CREATION_FAILURE:new er(8004,v.FAIL,"Error creating cryptex cipher or MAC context."),DATAMODEL_DEVICE_ACCESS_ERROR:new er(8005,v.TRANSIENT_FAILURE,"Error accessing data model device."),DATAMODEL_DEVICETYPE_NOT_FOUND:new er(8006,v.FAIL,"Data model device type not found."),CRYPTEX_KEYSET_UNSUPPORTED:new er(8007,v.FAIL,"Cryptex key set not supported."),CRYPTEX_PRIVILEGE_EXCEPTION:new er(8008,v.FAIL,"Insufficient privileges for cryptex operation."),CRYPTEX_WRAP_ERROR:new er(8009,v.FAIL,"Error wrapping data with cryptex."),CRYPTEX_UNWRAP_ERROR:new er(8010,v.FAIL,"Error unwrapping data with cryptex."),CRYPTEX_COMMS_FAILURE:new er(8011,v.TRANSIENT_FAILURE,"Error comunicating with cryptex."),CRYPTEX_SIGN_ERROR:new er(8012,v.FAIL,"Error computing signature with cryptex."),INTERNAL_EXCEPTION:new er(9e3,v.TRANSIENT_FAILURE,"Internal exception."),MSL_COMMS_FAILURE:new er(9001,v.FAIL,"Error communicating with MSL entity."),NONE:new er(9999,v.FAIL,"Special unit test error.")}),Object.freeze(er),(P=u.Class.create(Error())).mixin({init:function(t,e,i){var n,r,a;function o(){return r||(this.cause&&this.cause instanceof P?this.cause.messageId:A)}Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),n=t.message,e&&(n+=" ["+e+"]"),a=this.stack,Object.defineProperties(this,{message:{value:n,writable:!1,configurable:!0},error:{value:t,writable:!1,configurable:!0},cause:{value:i,writable:!1,configurable:!0},name:{value:"MslException",writable:!1,configurable:!0},masterToken:{value:null,writable:!0,configurable:!1},entityAuthenticationData:{value:null,writable:!0,configurable:!1},userIdToken:{value:null,writable:!0,configurable:!1},userAuthenticationData:{value:null,writable:!0,configurable:!1},messageId:{get:o,set:function(t){if(t<0||x<t)throw new RangeError("Message ID "+t+" is outside the valid range.");o()||(r=t)},configurable:!0},stack:{get:function(){var t=this.toString();return a&&(t+="\n"+a),i&&i.stack&&(t+="\nCaused by "+i.stack),t},configurable:!0}})},setEntity:function(t){return!t||this.masterToken||this.entityAuthenticationData||(t instanceof Me?this.masterToken=t:t instanceof wt&&(this.entityAuthenticationData=t)),this},setUser:function(t){return!t||this.userIdToken||this.userAuthenticationData||(t instanceof Ue?this.userIdToken=t:t instanceof Ve&&(this.userAuthenticationData=t)),this},setMessageId:function(t){return this.messageId=t,this},toString:function(){return this.name+": "+this.message}}),R=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslCryptoException",writable:!1,configurable:!0}})}}),N=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslEncodingException",writable:!1,configurable:!0}})}}),o=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslEntityAuthException",writable:!1,configurable:!0}})}}),(m=u.Class.create(Error())).mixin({init:function(t,e,i){var n;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),n=this.stack,Object.defineProperties(this,{message:{value:t,writable:!1,configurable:!1},cause:{value:e,writable:!1,configurable:!1},requestCause:{value:i,writable:!1,configurable:!1},name:{value:"MslErrorResponseException",writable:!1,configurable:!0},stack:{get:function(){var t=this.toString();return n&&(t+="\n"+n),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(_=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t,writable:!1,configurable:!1},cause:{value:e,writable:!1,configurable:!1},name:{value:"MslIoException",writable:!1,configurable:!0},stack:{get:function(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(j=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t,writable:!1,configurable:!1},cause:{value:e,writable:!1,configurable:!1},name:{value:"MslInternalException",writable:!1,configurable:!0},stack:{get:function(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),(E=u.Class.create(Error())).mixin({init:function(t,e){var i;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),i=this.stack,Object.defineProperties(this,{message:{value:t,writable:!1,configurable:!1},cause:{value:e,writable:!1,configurable:!1},name:{value:"MslInterruptedException",writable:!1,configurable:!0},stack:{get:function(){var t=this.toString();return i&&(t+="\n"+i),e&&e.stack&&(t+="\nCaused by "+e.stack),t},configurable:!0}})},toString:function(){return this.name+": "+this.message}}),k=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslKeyExchangeException",writable:!1,configurable:!0}})}}),S=P.extend({init:function t(e,i){t.base.call(this,e),Object.defineProperties(this,{masterToken:{value:i,writable:!1,configurable:!1},name:{value:"MslMasterTokenException",writable:!1,configurable:!0}})}}),C=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslMessageException",writable:!1,configurable:!0}})}}),L=P.extend({init:function t(e,i,n){t.base.call(this,e,i,n),Object.defineProperties(this,{name:{value:"MslUserAuthException",writable:!1,configurable:!0}})}}),Ji=D={LEGACY:1,V2014_01:2,V2014_02:3,LATEST:3},Object.freeze(D),M=Ji.LATEST,T={encrypt:function(n,r,a){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.encrypt(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.encrypt(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},decrypt:function(n,r,a){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.decrypt(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.decrypt(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},sign:function(n,r,a){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.sign(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.sign(n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},verify:function(n,r,a,o){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.verify(n,r,a,o);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.verify(n,r,a,o);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},digest:function(n,r){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.digest(n,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.digest(n,r).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},generateKey:function(n,t,e){var r=Ur(t),a=Br(e);switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.generateKey(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.generateKey(n,r,a);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},deriveKey:function(n,r,a,t,e){var o=Ur(t),s=Br(e);switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.deriveKey(n,r,a,o,s);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.deriveKey(n,r,a,o,s);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},importKey:function(n,r,a,t,e){var i,o,s,u,c,h=Ur(t),f=Br(e);switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.importKey(n,r,a,h,f);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return i=n,o=r,s=a,u=h,c=f,Promise.resolve().then(function(){return l.importKey(i,o,s,u,c)}).catch(function(t){var e;if("spki"!==i&&"pkcs8"!==i)throw t;if(t=ASN1.webCryptoAlgorithmToJwkAlg(s),e=ASN1.webCryptoUsageToJwkKeyOps(c),!(t=ASN1.rsaDerToJwk(o,t,e,u)))throw Error("Could not make valid JWK from DER input");return t=JSON.stringify(t),l.importKey("jwk",Yn(t),s,u,c)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},exportKey:function(n,r){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.exportKey(n,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return e=n,i=r,Promise.resolve().then(function(){return l.exportKey(e,i)}).catch(function(t){if("spki"!==e&&"pkcs8"!==e)throw t;return l.exportKey("jwk",i).then(function(t){if(t=JSON.parse(zn(new Uint8Array(t))),!(t=ASN1.jwkToRsaDer(t)))throw Error("Could not make valid DER from JWK input");return t.getDer().buffer})}).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}var e,i},wrapKey:function(t,n,r,a){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.wrapKey(n,r,a);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.wrapKey(t,n,r,a).then(function(t){return new Uint8Array(t)});default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}},unwrapKey:function(t,n,r,e,a,i,o){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=l.unwrapKey(n,a,r);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return l.unwrapKey(t,n,r,e,a,Ur(i),Br(o));default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}}},r&&r.getKeyByName&&(T.getKeyByName=function(n){switch(M){case Ji.LEGACY:return new Promise(function(e,i){var t=r.getKeyByName(n);t.oncomplete=function(t){e(t.target.result)},t.onerror=function(t){i(t)}});case Ji.V2014_01:case Ji.V2014_02:return r.getKeyByName(n);default:throw Error("Unsupported Web Crypto version "+WEB_CRYPTO_VERSION+".")}}),pt.netflix=pt.netflix||{},pt.netflix.crypto=T,U={name:"AES-KW"},B={name:"AES-CBC"},F={name:"HMAC",hash:{name:"SHA-256"}},q={name:"RSA-OAEP",hash:{name:"SHA-1"}},H={name:"RSAES-PKCS1-v1_5"},K={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},V=["encrypt","decrypt"],G=["wrap","unwrap"],J=["sign","verify"],z=u.Class.create({init:function(i,n,t){var r;function e(e){$n(n,function(){var t=e?g(e):A;return Object.defineProperties(r,{rawKey:{value:i,writable:!1,configurable:!1},keyData:{value:e,writable:!1,configurable:!1},keyDataB64:{value:t,writable:!1,configurable:!1}}),this},r)}$n(n,function(){if(!i||"object"!=typeof i)throw new R(er.INVALID_SYMMETRIC_KEY);!t&&i.extractable?T.exportKey("raw",i).then(function(t){e(new Uint8Array(t))},function(t){n.error(new R(er.KEY_EXPORT_ERROR,"raw"))}):e(t)},r=this)},size:function(){return this.keyData.length},toByteArray:function(){return this.keyData},toBase64:function(){return this.keyDataB64}}),Y=function(t,e){new z(t,e)},W=function(e,t,i,n){$n(n,function(){try{e="string"==typeof e?O(e):e}catch(t){throw new R(er.INVALID_SYMMETRIC_KEY,"keydata "+e,t)}T.importKey("raw",e,t,!0,i).then(function(t){new z(t,n,e)},function(t){n.error(new R(er.INVALID_SYMMETRIC_KEY))})})},X=u.Class.create({init:function(e,i,t){var n;function r(t){$n(i,function(){return Object.defineProperties(n,{rawKey:{value:e,writable:!1,configurable:!1},encoded:{value:t,writable:!1,configurable:!1}}),this},n)}n=this,$n(i,function(){if(!e||"object"!=typeof e||"public"!=e.type)throw new TypeError("Only original public crypto keys are supported.");!t&&e.extractable?T.exportKey("spki",e).then(function(t){r(new Uint8Array(t))},function(t){i.error(new R(er.KEY_EXPORT_ERROR,"spki"))}):r(t)})},getEncoded:function(){return this.encoded}}),Q=function(t,e){new X(t,e)},Z=function(e,t,i,n){$n(n,function(){try{e="string"==typeof e?O(e):e}catch(t){throw new R(er.INVALID_PUBLIC_KEY,"spki "+e,t)}T.importKey("spki",e,t,!0,i).then(function(t){new X(t,n,e)},function(t){n.error(new R(er.INVALID_PUBLIC_KEY))})})},$=u.Class.create({init:function(e,i,t){var n;function r(t){$n(i,function(){return Object.defineProperties(n,{rawKey:{value:e,writable:!1,configurable:!1},encoded:{value:t,writable:!1,configurable:!1}}),this},n)}n=this,$n(i,function(){if(!e||"object"!=typeof e||"private"!=e.type)throw new TypeError("Only original private crypto keys are supported.");!t&&e.extractable?T.exportKey("pkcs8",e).then(function(t){r(new Uint8Array(t))},function(t){i.error(new R(er.KEY_EXPORT_ERROR,"pkcs8"))}):r(t)})},getEncoded:function(){return this.encoded}}),tt=function(t,e){new $(t,e)},zi=rt={V1:1,V2:2},et=u.Class.create({init:function(r,a,o,t){$n(t,function(){var t,e=zi.V1,i=r,n=null;for(t in s)if(s[t]==r){e=zi.V2,i=null,n=r;break}return Object.defineProperties(this,{version:{value:e,writable:!1,enumerable:!1,configurable:!1},keyId:{value:i,writable:!1,configurable:!1},cipherSpec:{value:n,writable:!1,configurable:!1},iv:{value:a,writable:!1,configurable:!1},ciphertext:{value:o,writable:!1,configurable:!1}}),this},this)},toJSON:function(){var t={};switch(this.version){case zi.V1:t.keyid=this.keyId,this.iv&&(t.iv=g(this.iv)),t.ciphertext=g(this.ciphertext),t.sha256="AA==";break;case zi.V2:t.version=this.version,t.cipherspec=this.cipherSpec,this.iv&&(t.iv=g(this.iv)),t.ciphertext=g(this.ciphertext);break;default:throw new j("Ciphertext envelope version "+this.version+" encoding unsupported.")}return t}}),it=function(t,e,i,n){new et(t,e,i,n)},nt=function(s,u,c){$n(c,function(){var t,e,i=s.keyid,n=s.cipherspec,r=s.iv,a=s.ciphertext,o=s.sha256;if(!u)if((u=s.version)&&"number"==typeof u&&u==u){for(e in t=!1,zi)if(zi[e]==u){t=!0;break}if(!t)throw new R(er.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s))}else u=zi.V1;switch(u){case zi.V1:if("string"!=typeof i||r&&"string"!=typeof r||"string"!=typeof a||"string"!=typeof o)throw new N(er.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(s));break;case zi.V2:if((e=s.version)!=zi.V2)throw new R(er.UNIDENTIFIED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s));if("string"!=typeof n||r&&"string"!=typeof r||"string"!=typeof a)throw new N(er.JSON_PARSE_ERROR,"ciphertext envelope "+JSON.stringify(s));if(!(n=h(n)))throw new R(er.UNIDENTIFIED_CIPHERSPEC,"ciphertext envelope "+JSON.stringify(s));i=n;break;default:throw new R(er.UNSUPPORTED_CIPHERTEXT_ENVELOPE,"ciphertext envelope "+JSON.stringify(s))}try{r=r&&O(r),a=O(a)}catch(t){throw new R(er.CIPHERTEXT_ENVELOPE_PARSE_ERROR,"encryption envelope "+JSON.stringify(s),t)}new et(i,r,a,c)})},Yi=ut={V1:1,V2:2},at=u.Class.create({init:function(t,e,i){var n;switch(t){case Yi.V1:n=i;break;case Yi.V2:(n={}).version=t,n.algorithm=e,n.signature=g(i),n=Jn(JSON.stringify(n),I);break;default:throw new j("Signature envelope version "+t+" encoding unsupported.")}Object.defineProperties(this,{version:{value:t,writable:!1,enumerable:!1,configurable:!1},algorithm:{value:e,writable:!1,configurable:!1},signature:{value:i,writable:!1,configurable:!1},bytes:{value:n,writable:!1,configurable:!1}})}}),ot=function(){var t,e,i,n;2==arguments.length?(t=Yi.V1,e=arguments[0],i=null,n=arguments[1]):3==arguments.length&&(t=Yi.V2,i=arguments[0],e=arguments[1],n=arguments[2]),$n(n,function(){return new at(t,i,e)})},st=function(s,u,t){$n(t,function(){var t,e,i,n,r,a,o;if(u)switch(u){case Yi.V1:return new at(Yi.V1,null,s);case Yi.V2:try{if(t=Gn(s,I),e=JSON.parse(t),i=parseInt(e.version),n=e.algorithm,r=e.signature,!i||"number"!=typeof i||i!=i||"string"!=typeof n||"string"!=typeof r)throw new N(er.JSON_PARSE_ERROR,"signature envelope "+g(s));if(Yi.V2!=i)throw new R(er.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+g(s));if(!(a=c(n)))throw new R(er.UNIDENTIFIED_ALGORITHM,"signature envelope "+g(s));if(!(o=O(r)))throw new R(er.INVALID_SIGNATURE,"signature envelope "+Base64Util.encode(s));return new at(Yi.V2,a,o)}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"signature envelope "+g(s),t);throw t}default:throw new R(er.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+g(s))}try{t=Gn(s,I),e=JSON.parse(t)}catch(t){e=null}switch(e&&e.version&&"number"==typeof(t=e.version)&&t==t||(t=Yi.V1),t){case Yi.V1:return new at(t,null,s);case Yi.V2:if(a=e.algorithm,r=e.signature,"string"!=typeof a||"string"!=typeof r)return new at(Yi.V1,null,s);if(!(a=c(a)))return new at(Yi.V1,null,s);try{o=O(r)}catch(t){return new at(Yi.V1,null,s)}return new at(t,a,o);default:throw new R(er.UNSUPPORTED_SIGNATURE_ENVELOPE,"signature envelope "+s)}})},ct=u.Class.create({encrypt:function(t,e){},decrypt:function(t,e){},wrap:function(t,e){},unwrap:function(t,e,i,n){},sign:function(t,e){},verify:function(t,e,i){}}),Wi=ft={RSA_OAEP:q.name,A128KW:U.name},w="A128GCM",ht=u.Class.create({init:function(t,e,i,n,r){switch(e){case Wi.RSA_OAEP:r=r&&(r.rawKey||r),n=n&&(n.rawKey||n);break;case Wi.A128KW:r=n=n&&(n.rawKey||n);break;default:throw new j("Unsupported algorithm: "+e)}Object.defineProperties(this,{_ctx:{value:t,writable:!1,enumerable:!1,configurable:!1},_algo:{value:e,writable:!1,enumerable:!1,configurable:!1},_enc:{value:i,writable:!1,enumerable:!1,configurable:!1},_wrapKey:{value:r,writable:!1,enumerable:!1,configurable:!1},_unwrapKey:{value:n,writable:!1,enumerable:!1,configurable:!1}})},encrypt:function(t,e){e.error(new R(er.ENCRYPT_NOT_SUPPORTED))},decrypt:function(t,e){e.error(new R(er.DECRYPT_NOT_SUPPORTED))},wrap:function(t,e){$n(e,function(){T.wrapKey("jwe+jwk",t.rawKey,this._wrapKey,this._wrapKey.algorithm).then(function(t){e.result(t)},function(t){e.error(new R(er.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){$n(n,function(){T.unwrapKey("jwe+jwk",t,this._unwrapKey,this._unwrapKey.algorithm,e,!1,i).then(function(t){var e;e=t,$n(n,function(){switch(e.type){case"secret":Y(e,n);break;case"public":Q(e,n);break;case"private":tt(e,n);break;default:throw new R(er.UNSUPPORTED_KEY,"type: "+e.type)}})},function(){n.error(new R(er.UNWRAP_ERROR))})},this)},sign:function(t,e){e.error(new R(er.SIGN_NOT_SUPPORTED))},verify:function(t,e,i){i.error(new R(er.VERIFY_NOT_SUPPORTED))}}),lt=ct.extend({encrypt:function(t,e){e.result(t)},decrypt:function(t,e){e.result(t)},wrap:function(t,e){e.result(t)},unwrap:function(t,e,i,n){n.result(t)},sign:function(t,e){e.result(new Uint8Array(0))},verify:function(t,e,i){i.result(!0)}}),Xi=bt={ENCRYPT_DECRYPT_OAEP:1,ENCRYPT_DECRYPT_PKCS1:2,WRAP_UNWRAP_OAEP:3,WRAP_UNWRAP_PKCS1:4,SIGN_VERIFY:5},dt=ct.extend({init:function t(e,i,n,r,a){t.base.call(this),n=n&&n.rawKey,r=r&&r.rawKey,Object.defineProperties(this,{id:{value:i,writable:!1,enumerable:!1,configurable:!1},privateKey:{value:n,writable:!1,enumerable:!1,configurable:!1},publicKey:{value:r,writable:!1,enumerable:!1,configurable:!1},transform:{value:a==Xi.ENCRYPT_DECRYPT_PKCS1?H:a==Xi.ENCRYPT_DECRYPT_OAEP?q:"nullOp",writable:!1,enumerable:!1,configurable:!1},wrapTransform:{value:a==Xi.WRAP_UNWRAP_PKCS1?H:a==Xi.WRAP_UNWRAP_OAEP?q:"nullOp",writable:!1,enumerable:!1,configurable:!1},algo:{value:a==Xi.SIGN_VERIFY?K:"nullOp",writable:!1,enumerable:!1,configurable:!1}})},encrypt:function(t,i){var e=this;$n(i,function(){if("nullOp"==this.transform)return t;if(!this.publicKey)throw new R(er.ENCRYPT_NOT_SUPPORTED,"no public key");if(0==t.length)return t;T.encrypt(e.transform,e.publicKey,t).then(function(t){it(e.id,null,t,{result:function(t){var e;try{e=JSON.stringify(t),i.result(Jn(e,I))}catch(t){i.error(new R(er.ENCRYPT_ERROR,null,t))}},error:function(t){t instanceof P||(t=new R(er.ENCRYPT_ERROR,null,t)),i.error(t)}})},function(t){i.error(new R(er.ENCRYPT_ERROR))})},this)},decrypt:function(i,n){var r=this;$n(n,function(){var t,e;if("nullOp"==this.transform)return i;if(!this.privateKey)throw new R(er.DECRYPT_NOT_SUPPORTED,"no private key");if(0==i.length)return i;try{t=Gn(i,I),e=JSON.parse(t)}catch(t){if(t instanceof SyntaxError)throw new R(er.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,t);throw new R(er.DECRYPT_ERROR,null,t)}nt(e,rt.V1,{result:function(t){var e;try{if(t.keyId!=r.id)throw new R(er.ENVELOPE_KEY_ID_MISMATCH);e=n.result,T.decrypt(r.transform,r.privateKey,t.ciphertext).then(e,function(t){n.error(new R(er.DECRYPT_ERROR))})}catch(t){t instanceof P?n.error(t):n.error(new R(er.DECRYPT_ERROR,null,t))}},error:function(t){t instanceof N&&(t=new R(er.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,t)),t instanceof P||(t=new R(er.DECRYPT_ERROR,null,t)),n.error(t)}})},this)},wrap:function(e,i){$n(i,function(){var t;if("nullOp"==this.wrapTransform||!this.publicKey)throw new R(er.WRAP_NOT_SUPPORTED,"no public key");t=i.result,T.wrapKey("jwk",e.rawKey,this.publicKey,this.wrapTransform).then(t,function(t){i.error(new R(er.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){function r(t){$n(n,function(){switch(t.type){case"secret":Y(t,n);break;case"public":Q(t,n);break;case"private":tt(t,n);break;default:throw new R(er.UNSUPPORTED_KEY,"type: "+t.type)}})}$n(n,function(){if("nullOp"==this.wrapTransform||!this.privateKey)throw new R(er.UNWRAP_NOT_SUPPORTED,"no private key");T.unwrapKey("jwk",t,this.privateKey,{name:this.privateKey.algorithm.name,hash:{name:"SHA-1"}},e,!1,i).then(r,function(t){n.error(new R(er.UNWRAP_ERROR))})},this)},sign:function(t,e){$n(e,function(){if("nullOp"==this.algo)return new Uint8Array(0);if(!this.privateKey)throw new R(er.SIGN_NOT_SUPPORTED,"no private key");T.sign(this.algo,this.privateKey,t).then(function(t){ot(t,{result:function(t){e.result(t.bytes)},error:e.error})},function(t){e.error(new R(er.SIGNATURE_ERROR))})},this)},verify:function(i,t,n){var r=this;$n(n,function(){if("nullOp"==this.algo)return!0;if(!this.publicKey)throw new R(er.VERIFY_NOT_SUPPORTED,"no public key");st(t,ut.V1,{result:function(e){$n(n,function(){var t=n.result;T.verify(this.algo,this.publicKey,e.signature,i).then(t,function(t){n.error(new R(er.SIGNATURE_ERROR))})},r)},error:n.error})},this)}}),mt=ct.extend({init:function t(e,i,n,r,a){t.base.call(this),n=n&&n.rawKey,r=r&&r.rawKey,a=a&&a.rawKey,Object.defineProperties(this,{ctx:{value:e,writable:!1,enumerable:!1,configurable:!1},id:{value:i,writable:!1,enumerable:!1,configurable:!1},encryptionKey:{value:n,writable:!1,enumerable:!1,configurable:!1},hmacKey:{value:r,writable:!1,enumerable:!1,configurable:!1},wrapKey:{value:a,writable:!1,enumerable:!1,configurable:!1}})},encrypt:function(t,i){var n=this;$n(i,function(){var e;if(!this.encryptionKey)throw new R(er.ENCRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==t.length)return t;e=new Uint8Array(16),this.ctx.getRandom().nextBytes(e),T.encrypt({name:B.name,iv:e},n.encryptionKey,t).then(function(t){t=new Uint8Array(t),it(n.id,e,t,{result:function(t){var e;try{e=JSON.stringify(t),i.result(Jn(e,I))}catch(t){i.error(new R(er.ENCRYPT_ERROR,null,t))}},error:function(t){t instanceof P||(t=new R(er.ENCRYPT_ERROR,null,t)),i.error(t)}})},function(t){i.error(new R(er.ENCRYPT_ERROR))})},this)},decrypt:function(i,n){var r=this;$n(n,function(){var t,e;if(!this.encryptionKey)throw new R(er.DECRYPT_NOT_SUPPORTED,"no encryption/decryption key");if(0==i.length)return i;try{t=Gn(i,I),e=JSON.parse(t)}catch(t){if(t instanceof SyntaxError)throw new R(er.CIPHERTEXT_ENVELOPE_PARSE_ERROR,null,t);throw new R(er.DECRYPT_ERROR,null,t)}nt(e,rt.V1,{result:function(t){try{if(t.keyId!=r.id)throw new R(er.ENVELOPE_KEY_ID_MISMATCH);T.decrypt({name:B.name,iv:t.iv},r.encryptionKey,t.ciphertext).then(function(t){t=new Uint8Array(t),n.result(t)},function(){n.error(new R(er.DECRYPT_ERROR))})}catch(t){t instanceof P?n.error(t):n.error(new R(er.DECRYPT_ERROR,null,t))}},error:function(t){t instanceof N&&(t=new R(er.CIPHERTEXT_ENVELOPE_ENCODE_ERROR,null,t)),t instanceof P||(t=new R(er.DECRYPT_ERROR,null,t)),n.error(t)}})},this)},wrap:function(t,e){$n(e,function(){if(!this.wrapKey)throw new R(er.WRAP_NOT_SUPPORTED,"no wrap/unwrap key");T.wrapKey("raw",t.rawKey,this.wrapKey,this.wrapKey.algorithm).then(function(t){e.result(t)},function(t){e.error(new R(er.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){$n(n,function(){if(!this.wrapKey)throw new R(er.UNWRAP_NOT_SUPPORTED,"no wrap/unwrap key");T.unwrapKey("raw",t,this.wrapKey,this.wrapKey.algorithm,e,!1,i).then(function(t){var e;e=t,$n(n,function(){switch(e.type){case"secret":Y(e,n);break;case"public":Q(e,n);break;case"private":tt(e,n);break;default:throw new R(er.UNSUPPORTED_KEY,"type: "+e.type)}})},function(t){n.error(new R(er.UNWRAP_ERROR))})},this)},sign:function(t,i){var n=this;$n(i,function(){if(!this.hmacKey)throw new R(er.SIGN_NOT_SUPPORTED,"no HMAC key.");T.sign(F,this.hmacKey,t).then(function(e){$n(i,function(){var t=new Uint8Array(e);ot(t,{result:function(t){i.result(t.bytes)},error:i.error})},n)},function(){i.error(new R(er.HMAC_ERROR))})},this)},verify:function(e,t,i){var n=this;$n(i,function(){if(!this.hmacKey)throw new R(er.VERIFY_NOT_SUPPORTED,"no HMAC key.");st(t,ut.V1,{result:function(t){$n(i,function(){T.verify(F,this.hmacKey,t.signature,e).then(function(t){i.result(t)},function(t){i.error(new R(er.HMAC_ERROR))})},n)},error:i.error})},this)}}),gt=mt.extend({init:function t(e,i,n,r,a){if(n||r||a)t.base.call(this,e,n+"_"+i.sequenceNumber,r,a,null);else{if(!i.isDecrypted())throw new S(er.MASTERTOKEN_UNTRUSTED,i);t.base.call(this,e,i.identity+"_"+i.sequenceNumber,i.encryptionKey,i.hmacKey,null)}}}),vt=ct.extend({encrypt:function(t,e){e.result(t)},decrypt:function(t,e){e.result(t)},wrap:function(t,e){e.error(new j("Wrap is unsupported by the MSL token crypto context."))},unwrap:function(t,e,i,n){n.error(new j("Unwrap is unsupported by the MSL token crypto context."))},sign:function(t,e){e.result(new Uint8Array(0))},verify:function(t,e,i){i.result(!1)}}),yt={PSK:"PSK",MGK:"MGK",X509:"X509",RSA:"RSA",NPTICKET:"NPTICKET",ECC:"ECC",NONE:"NONE"},Object.freeze(yt),wt=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},getIdentity:function(){},getAuthData:function(){},equals:function(t){return this===t||t instanceof wt&&this.scheme==t.scheme},toJSON:function(){var t={};return t.scheme=this.scheme,t.authdata=this.getAuthData(),t}}),_t=function(t,e){var i=e.scheme,n=e.authdata;if(!i||!n)throw new N(er.JSON_PARSE_ERROR,"entityauthdata "+JSON.stringify(e));if(!yt[i])throw new o(er.UNIDENTIFIED_ENTITYAUTH_SCHEME,i);if(!(e=t.getEntityAuthenticationFactory(i)))throw new o(er.ENTITYAUTH_FACTORY_NOT_FOUND,i);return e.createData(t,n)},Ne=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},createData:function(t,e){},getCryptoContext:function(t,e){}}),Et=wt.extend({init:function t(e){t.base.call(this,yt.MGK),Object.defineProperties(this,{identity:{value:e,writable:!1,configurable:!1}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof Et&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),kt=function(t){var e=t.identity;if(!e)throw new N(er.JSON_PARSE_ERROR,"mgk authdata"+JSON.stringify(t));return new Et(e)},St=Ne.extend({init:function t(e){t.base.call(this,yt.MGK),Object.defineProperties(this,{localIdentity:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createData:function(t,e){return kt(e)},getCryptoContext:function(t,e){if(!(e instanceof Et))throw new j("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new o(er.ENTITY_NOT_FOUND,"mgk "+e.identity).setEntity(e);return new lt}}),Tt=wt.extend({init:function t(e){t.base.call(this,yt.PSK),Object.defineProperties(this,{identity:{value:e,writable:!1}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof Tt&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),At=function(t){var e=t.identity;if(!e)throw new N(er.JSON_PARSE_ERROR,"psk authdata"+JSON.stringify(t));return new Tt(e)},Ot=Ne.extend({init:function t(e){t.base.call(this,yt.PSK),Object.defineProperties(this,{localIdentity:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createData:function(t,e){return At(e)},getCryptoContext:function(t,e){if(!(e instanceof Tt))throw new j("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.getIdentity()!=this.localIdentity)throw new o(er.ENTITY_NOT_FOUND,"psk "+e.identity).setEntity(e);return new lt}}),It=wt.extend({init:function t(e,i){t.base.call(this,yt.RSA),Object.defineProperties(this,{identity:{value:e,writable:!1,configurable:!1},publicKeyId:{value:i,writable:!1,configurable:!1}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t.pubkeyid=this.publicKeyId,t},equals:function t(e){return this===e||e instanceof It&&(t.base.call(this,this,e)&&this.identity==e.identity&&this.publicKeyId==e.publicKeyId)}}),xt=function(t){var e=t.identity,i=t.pubkeyid;if(!e||"string"!=typeof e||!i||"string"!=typeof i)throw new N(er.JSON_PARSE_ERROR,"RSA authdata"+JSON.stringify(t));return new It(e,i)},Pt=Ne.extend({init:function t(e){t.base.call(this,yt.RSA),Object.defineProperties(this,{store:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createData:function(t,e){return xt(e)},getCryptoContext:function(t,e){var i,n,r;if(!(e instanceof It))throw new j("Incorrect authentication data type "+e+".");if(i=e.identity,n=e.publicKeyId,!(r=this.store.getPublicKey(n)))throw new o(er.RSA_PUBLICKEY_NOT_FOUND,n).setEntity(e);return new dt(t,i,null,r,bt.SIGN_VERIFY)}}),Rt=wt.extend({init:function t(e){t.base.call(this,yt.NONE),Object.defineProperties(this,{identity:{value:e,writable:!1}})},getIdentity:function(){return this.identity},getAuthData:function(){var t={};return t.identity=this.identity,t},equals:function t(e){return this===e||e instanceof Rt&&(t.base.call(this,this,e)&&this.identity==e.identity)}}),Nt=function(t){var e=t.identity;if(!e)throw new N(er.JSON_PARSE_ERROR,"Unauthenticated authdata"+JSON.stringify(t));return new Rt(e)},jt=Ne.extend({init:function t(){t.base.call(this,yt.NONE)},createData:function(t,e){return Nt(e)},getCryptoContext:function(t,e){if(!(e instanceof Rt))throw new j("Incorrect authentication data type "+JSON.stringify(e)+".");return new lt}}),Ct=u.Class.create({init:function(){Object.defineProperties(this,{rsaKeys:{value:{},writable:!1,enumerable:!1,configurable:!1}})},addPublicKey:function(t,e){if(!(e instanceof X))throw new j("Incorrect key data type "+e+".");this.rsaKeys[t]=e},getIdentities:function(){return Object.keys(this.rsaKeys)},removePublicKey:function(t){delete this.rsaKeys[t]},getPublicKey:function(t){return this.rsaKeys[t]}}),wn=u.Class.create({abort:function(){},close:function(){},mark:function(){},reset:function(){},markSupported:function(){},read:function(t,e,i){}}),pi=u.Class.create({abort:function(){},close:function(t,e){},write:function(t,e,i,n,r){},flush:function(t,e){}}),Lt=u.Class.create({init:function(t){Object.defineProperties(this,{_data:{value:t,writable:!1,enumerable:!1,configurable:!1},_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1},_currentPosition:{value:0,writable:!0,enumerable:!1,configurable:!1},_mark:{value:-1,writable:!0,enumerable:!1,configurable:!1}})},abort:function(){},close:function(){this._close=!0},mark:function(){this._mark=this._currentPosition},reset:function(){if(-1==this._mark)throw new _("Stream has not been marked.");this._currentPosition=this._mark},markSupported:function(){return!0},read:function(e,t,i){tr(i,function(){var t;if(this._closed)throw new _("Stream is already closed.");return this._currentPosition==this._data.length?null:(-1==e&&(e=this._data.length-this._currentPosition),t=this._data.subarray(this._currentPosition,this._currentPosition+e),this._currentPosition+=t.length,t)},this)}}),Mt=u.Class.create({init:function(){var t={_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1},_result:{value:new Uint8Array(0),writable:!0,enuemrable:!1,configurable:!1},_buffered:{value:[],writable:!1,enumerable:!1,configurable:!1}};Object.defineProperties(this,t)},abort:function(){},close:function(t,e){this._closed=!0,e.result(!0)},write:function(e,i,n,t,r){tr(r,function(){var t;if(this._closed)throw new _("Stream is already closed.");if(i<0)throw new RangeError("Offset cannot be negative.");if(n<0)throw new RangeError("Length cannot be negative.");if(i+n>e.length)throw new RangeError("Offset plus length cannot be greater than the array length.");return t=e.subarray(i,n),this._buffered.push(t),t.length},this)},flush:function(t,e){for(var i;0<this._buffered.length;)t=this._buffered.shift(),this._result?((i=new Uint8Array(this._result.length+t.length)).set(this._result),i.set(t,this._result.length),this._result=i):this._result=new Uint8Array(t);e.result(!0)},size:function(){return this.flush(1,{result:function(){}}),this._result.length},toByteArray:function(){return this.flush(1,{result:function(){}}),this._result}}),Ut=u.Class.create({getResponse:function(t,e,i){}}),Qi=pi.extend({init:function(t,e){t={_httpLocation:{value:t,writable:!1,enumerable:!1,configurable:!1},_timeout:{value:e,writable:!0,enumerable:!1,configurable:!1},_buffer:{value:new Mt,writable:!1,enumerable:!1,configurable:!1},_response:{value:A,writable:!0,enumerable:!1,configurable:!1},_abortToken:{value:A,writable:!0,enumerable:!1,configurable:!1},_responseQueue:{value:new d,writable:!0,enumerable:!1,configurable:!1}},Object.defineProperties(this,t)},setTimeout:function(t){this._timeout=t},getResponse:function(t,e){var i=this;this._responseQueue.poll(t,{result:function(t){tr(e,function(){return t&&this._responseQueue.add(t),t},i)},timeout:function(){tr(e,function(){this._response={isTimeout:!0},this._responseQueue.add(this._response),this.abort(),e.timeout()},i)},error:function(t){tr(e,function(){throw this._response={isError:!0},this._responseQueue.add(this._response),t},i)}})},abort:function(){this._abortToken&&this._abortToken.abort()},close:function(t,e){var i=this;tr(e,function(){var t;return this._response||0<(t=this._buffer.toByteArray()).length&&(this._abortToken=this._httpLocation.getResponse({body:t},this._timeout,{result:function(t){i._response={response:t},i._responseQueue.add(i._response)},timeout:function(){i._response={isTimeout:!0},i._responseQueue.add(i._response)},error:function(t){i._response={isError:!0,error:t},i._responseQueue.add(i._response)}})),!0},this)},write:function(t,e,i,n,r){tr(r,function(){if(this._response)throw new _("HttpOutputStream already closed.");this._buffer.write(t,e,i,n,r)},this)},flush:function(t,e){tr(e,function(){return!!this._response||void this._buffer.flush(t,e)},this)}}),Zi=wn.extend({init:function(t){Object.defineProperties(this,{_out:{value:t,writable:!1,enumerable:!1,configurable:!1},_buffer:{value:A,writable:!0,enumerable:!1,configurable:!1},_exception:{value:A,writable:!0,enumerable:!1,configurable:!1},_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_json:{value:A,writable:!0,enumerable:!1,configurable:!1}})},abort:function(){this._out.abort()},close:function(){this._buffer&&this._buffer.close()},mark:function(){this._buffer||this._buffer.mark()},reset:function(){this._buffer&&this._buffer.reset()},markSupported:function(){if(this._buffer)return this._buffer.markSupported()},read:function(i,n,r){var a;tr(r,function(){if(this._exception)throw this._exception;if(this._timedout)r.timeout();else{if(this._aborted)return new Uint8Array(0);this._buffer?this._buffer.read(i,n,r):this._out.close(n,{result:function(t){var e;e=t,tr(r,function(){return e?void this._out.getResponse(n,{result:function(e){tr(r,function(){var t;if(e.isTimeout)this._timedout=!0,r.timeout();else{if(e.isError)throw this._exception=e.error||new _("Unknown HTTP exception."),this._exception;if(!e.response)throw this._exception=new _("Missing HTTP response."),this._exception;e.response.json!==A&&(this._json=e.response.json,this.getJSON=function(){return a._json}),t=e.response.content||Yn("string"==typeof e.response.body?e.response.body:JSON.stringify(this._json)),this._buffer=new Lt(t),this._buffer.read(i,n,r)}},a)},timeout:function(){r.timeout()},error:function(t){r.error(t)}}):new Uint8Array(0)},a)},timeout:function(){r.timeout()},error:function(t){r.error(t)}})}},a=this)}}),Dt=u.Class.create({init:function(t,e){Object.defineProperties(this,{_httpLocation:{value:t,writable:!1,enumerable:!1,configurable:!1},_timeout:{value:e,writable:!0,enumerable:!1,configurable:!1}})},setTimeout:function(t){this._timeout=t},openConnection:function(){var t=new Qi(this._httpLocation,this._timeout);return{input:new Zi(t),output:t}}}),$i=pi.extend({init:function(){var t={_buffer:{value:new Uint8Array,writable:!0,enumerable:!1,configurable:!1}};Object.defineProperties(this,t)},setTimeout:function(){},getResponse:function(t,e){e.result({success:!1,content:null,errorHttpCode:A,errorSubCode:A})},abort:function(){},close:function(t,e){e.result(!0)},write:function(t,e,i,n,r){var a,o;try{if(e<0)throw new RangeError("Offset cannot be negative.");if(i<0)throw new RangeError("Length cannot be negative.");if(e+i>t.length)throw new RangeError("Offset plus length cannot be greater than the array length.");a=t.subarray(e,i),(o=new Uint8Array(this._buffer.length+a.length)).set(this._buffer),o.set(a,this._buffer.length),this._buffer=o,r.result(a.length)}catch(t){r.error(t)}},flush:function(t,e){e.result(!0)},request:function(){return this._buffer}}),tn=wn.extend({init:function(){},abort:function(){},close:function(){},mark:function(){},reset:function(){},markSupported:function(){},read:function(t,e,i){i.result(new Uint8Array(16))}}),Bt=u.Class.create({init:function(){var t={output:{value:new $i,writable:!1,enumerable:!1,configurable:!1},input:{value:new tn,writable:!0,enumerable:!1,configurable:!1}};Object.defineProperties(this,t)},setTimeout:function(){},openConnection:function(){return{input:this.input,output:this.output}},getRequest:function(){return zn(this.output.request())}}),Ft=function(r,t,a){var e;e=function(t,e){var i,n;if(t)a.error(t);else if(e)if(r.getJSON!==A&&"function"==typeof r.getJSON)a.result(r.getJSON());else{for(t=a.result,i=[],n=(e=new ne(Gn(e,"utf-8"))).nextValue();n!==A;)i.push(n),n=e.nextValue();t.call(a,i)}else a.result(null)},r.read(-1,t,{result:function(t){t&&t.length?e(null,t):e(null,null)},timeout:function(){a.timeout()},error:function(t){e(t,null)}})},qt={SYMMETRIC_WRAPPED:"SYMMETRIC_WRAPPED",ASYMMETRIC_WRAPPED:"ASYMMETRIC_WRAPPED",DIFFIE_HELLMAN:"DIFFIE_HELLMAN",JWE_LADDER:"JWE_LADDER",JWK_LADDER:"JWK_LADDER",AUTHENTICATED_DH:"AUTHENTICATED_DH"},Object.freeze(qt),Ht=u.Class.create({init:function(t){Object.defineProperties(this,{keyExchangeScheme:{value:t,writable:!1,configurable:!1}})},getKeydata:function(){},toJSON:function(){var t={};return t.scheme=this.keyExchangeScheme,t.keydata=this.getKeydata(),t},equals:function(t){return this===t||t instanceof Ht&&this.keyExchangeScheme==t.keyExchangeScheme},uniqueKey:function(){return this.keyExchangeScheme}}),Kt=function(n,r,a){$n(a,function(){var t,e=r.scheme,i=r.keydata;if(!e||!i||"object"!=typeof i)throw new N(er.JSON_PARSE_ERROR,"keyrequestdata "+JSON.stringify(r));if(!qt[e])throw new k(er.UNIDENTIFIED_KEYX_SCHEME,e);if(!(t=n.getKeyExchangeFactory(e)))throw new k(er.KEYX_FACTORY_NOT_FOUND,e);t.createRequestData(n,i,a)})},Vt=u.Class.create({init:function(t,e){Object.defineProperties(this,{masterToken:{value:t,writable:!1,configurable:!1},keyExchangeScheme:{value:e,wrtiable:!1,configurable:!1}})},getKeydata:function(){},toJSON:function(){var t={};return t.mastertoken=this.masterToken,t.scheme=this.keyExchangeScheme,t.keydata=this.getKeydata(),t},equals:function(t){return this===t||t instanceof Vt&&(this.masterToken.equals(t.masterToken)&&this.keyExchangeScheme==t.keyExchangeScheme)},uniqueKey:function(){return this.masterToken.uniqueKey()+":"+this.keyExchangeScheme}}),Gt=function(r,e,a){$n(a,function(){var t=e.mastertoken,i=e.scheme,n=e.keydata;if(!i||!t||"object"!=typeof t||!n||"object"!=typeof n)throw new N(er.JSON_PARSE_ERROR,"keyresponsedata "+JSON.stringify(e));if(!qt[i])throw new k(er.UNIDENTIFIED_KEYX_SCHEME,i);De(r,t,{result:function(e){$n(a,function(){var t=r.getKeyExchangeFactory(i);if(!t)throw new k(er.KEYX_FACTORY_NOT_FOUND,i);return t.createResponseData(r,e,n)})},error:function(t){a.error(t)}})})},en=u.Class.create({init:function(t,e){Object.defineProperties(this,{keyResponseData:{value:t,writable:!1,configurable:!1},cryptoContext:{value:e,writable:!1,configurable:!1}})}}),(Jt=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},createRequestData:function(t,e,i){},createResponseData:function(t,e,i){},generateResponse:function(t,e,i,n){},getCryptoContext:function(t,e,i,n,r){},generateSessionKeys:function(e,n){$n(n,function(){var t=new Uint8Array(16),i=new Uint8Array(32);e.getRandom().nextBytes(t),e.getRandom().nextBytes(i),W(t,B,V,{result:function(e){W(i,F,J,{result:function(t){n.result({encryptionKey:e,hmacKey:t})},error:function(t){n.error(new R(er.SESSION_KEY_CREATION_FAILURE,null,t))}})},error:function(t){n.error(new R(er.SESSION_KEY_CREATION_FAILURE,null,t))}})})},importSessionKeys:function(t,i,n){W(t,B,V,{result:function(e){W(i,F,J,{result:function(t){n.result({encryptionKey:e,hmacKey:t})},error:function(t){n.error(t)}})},error:function(t){n.error(t)}})}})).KeyExchangeData=en,nn={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"},rn=Yt=Ht.extend({init:function t(e,i){if(t.base.call(this,qt.JWE_LADDER),e===nn.WRAP){if(!i)throw new j("Previous wrapping key based key exchange requires the previous wrapping key data and ID.")}else i=null;Object.defineProperties(this,{mechanism:{value:e,writable:!1,configurable:!1},wrapdata:{value:i,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.mechanism=this.mechanism,this.wrapdata&&(t.wrapdata=g(this.wrapdata)),t},equals:function t(e){return e===this||e instanceof Yt&&(t.base.call(this,e)&&this.mechanism==e.mechanism&&Wn(this.wrapdata,e.wrapdata))},uniqueKey:function t(){var e=t.base.call(this)+":"+this.mechanism;return this.wrapdata&&(e+=":"+Xn(this.wrapdata)),e}}),an=Wt=Vt.extend({init:function t(e,i,n,r,a){t.base.call(this,e,qt.JWE_LADDER),Object.defineProperties(this,{wrapKey:{value:i,writable:!1,configurable:!1},wrapdata:{value:n,writable:!1,configurable:!1},encryptionKey:{value:r,writable:!1,configurable:!1},hmacKey:{value:a,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.wrapkey=g(this.wrapKey),t.wrapdata=g(this.wrapdata),t.encryptionkey=g(this.encryptionKey),t.hmackey=g(this.hmacKey),t},equals:function t(e){return this===e||e instanceof Wt&&(t.base.call(this,e)&&Wn(this.wrapKey,e.wrapKey)&&Wn(this.wrapdata,e.wrapdata)&&Wn(this.encryptionKey,e.encryptionKey)&&Wn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+Xn(this.wrapKey)+":"+Xn(this.wrapdata)+":"+Xn(this.encryptionKey)+":"+Xn(this.hmacKey)}}),zt=Jt.extend({init:function t(e){t.base.call(this,qt.JWE_LADDER),Object.defineProperties(this,{repository:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createRequestData:function(t,n,e){$n(e,function(){var t,e=n.mechanism,i=n.wrapdata;if(!e||e==nn.WRAP&&(!i||"string"!=typeof i))throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(n));if(!nn[e])throw new k(er.UNIDENTIFIED_KEYX_MECHANISM,e);if(e===nn.WRAP){try{t=O(i)}catch(t){throw new k(er.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}if(null==t||0==t.length)throw new k(er.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}else t=null;return new rn(e,t)})},createResponseData:function(t,e,i){var n,r,a,o,s,u,c;if(t=i.wrapkey,n=i.wrapdata,r=i.encryptionkey,a=i.hmackey,!(t&&"string"==typeof t&&n&&"string"==typeof n&&r&&"string"==typeof r&&a)||"string"!=typeof a)throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{o=O(t),s=O(n)}catch(t){throw new R(er.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(i),t)}try{u=O(r)}catch(t){throw new R(er.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{c=O(a)}catch(t){throw new R(er.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new an(e,o,s,u,c)},generateResponse:function(b,u,m,g){var v,y;function n(i,n,r){v.generateSessionKeys(b,{result:function(e){$n(g,function(){var t,s,l,p,d;t=i,s=n,l=r,p=e.encryptionKey,d=e.hmacKey,$n(g,function(){var i,n,r,a,o;i=b,n=u.mechanism,r=u.wrapdata,a=t,o={result:function(t){t.wrap(s,{result:function(t){var e,u,c,h,f;e=s,u=l,c=p,h=d,f=t,$n(g,function(){var t=new ht(b,ft.A128KW,w,e);t.wrap(c,{result:function(s){t.wrap(h,{result:function(t){var n,r,e,a,i,o;n=u,r=f,e=c,a=s,i=h,o=t,$n(g,function(){var t=b.getTokenFactory();y?t.renewMasterToken(b,y,e,i,{result:function(i){$n(g,function(){var t=new gt(b,i),e=new an(i,r,n,a,o);return new Jt.KeyExchangeData(e,t,g)},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}}):t.createMasterToken(b,m,e,i,{result:function(i){$n(g,function(){var t=new gt(b,i),e=new an(i,r,n,a,o);return new Jt.KeyExchangeData(e,t,g)},v)},error:g.error})},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}},$n(o,function(){var t,e;switch(n){case nn.PSK:if(t=new Tt(a),!(e=i.getEntityAuthenticationFactory(yt.PSK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n);return t=e.getCryptoContext(i,t),new ht(i,ft.A128KW,w,A);case nn.MGK:if(t=new Et(a),!(e=i.getEntityAuthenticationFactory(yt.MGK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n);return t=e.getCryptoContext(i,t),new ht(i,ft.A128KW,w,A);case nn.WRAP:(t=i.getMslCryptoContext()).unwrap(r,U,G,{result:function(t){$n(o,function(){return new ht(i,ft.A128KW,w,t)})},error:o.error});break;default:throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n)}})},v)},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})}$n(g,function(){var i,t;if(!(u instanceof rn))throw new j("Key request data "+JSON.stringify(u)+" was not created by this factory.");if((i=m)instanceof Me){if(!m.isVerified())throw new S(er.MASTERTOKEN_UNTRUSTED,m);i=(y=m).identity}t=new Uint8Array(16),b.getRandom().nextBytes(t),W(t,U,G,{result:function(e){$n(g,function(){b.getMslCryptoContext().wrap(e,{result:function(t){n(i,e,t)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t},v)}})},v)},error:function(t){$n(g,function(){throw new R(er.WRAP_KEY_CREATION_FAILURE,null,t).setEntity(y)},v)}})},v=this)},getCryptoContext:function(c,t,h,e,f){var l;$n(f,function(){var n,u;if(!(t instanceof rn))throw new j("Key request data "+JSON.stringify(t)+" was not created by this factory.");if(!(h instanceof an))throw new j("Key response data "+JSON.stringify(h)+" was not created by this factory.");n=t.mechanism,u=t.wrapdata,c.getEntityAuthenticationData(null,{result:function(s){$n(f,function(){var t,e,i=s.getIdentity();switch(n){case nn.PSK:if(t=new Tt(i),!(e=c.getEntityAuthenticationFactory(yt.PSK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new ht(c,ft.A128KW,w,A);break;case nn.MGK:if(t=new Et(i),!(e=c.getEntityAuthenticationFactory(yt.MGK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new ht(c,ft.A128KW,w,t.wrapKey);break;case nn.WRAP:if(!(t=this.repository.getCryptoContext(u)))throw new k(er.KEYX_WRAPPING_KEY_MISSING,g(u)).setEntity(s);break;default:throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s)}t.unwrap(h.wrapKey,U,G,{result:function(t){var n,r,a,o,e;n=s,r=h,a=u,o=i,e=t,$n(f,function(){var i=new ht(c,ft.A128KW,w,e);i.unwrap(r.encryptionKey,B,V,{result:function(e){i.unwrap(r.hmacKey,F,J,{result:function(t){$n(f,function(){return this.repository.addCryptoContext(r.wrapdata,i),this.repository.removeCryptoContext(a),new gt(c,r.masterToken,o,e,t)},l)},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},l)},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(s),t})}})},l)},error:f.error})},l=this)}}),on={PSK:"PSK",MGK:"MGK",WRAP:"WRAP"},sn=Qt=Ht.extend({init:function t(e,i){if(t.base.call(this,qt.JWK_LADDER),e===on.WRAP){if(!i)throw new j("Previous wrapping key based key exchange requires the previous wrapping key data and ID.")}else i=null;Object.defineProperties(this,{mechanism:{value:e,writable:!1,configurable:!1},wrapdata:{value:i,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.mechanism=this.mechanism,this.wrapdata&&(t.wrapdata=g(this.wrapdata)),t},equals:function t(e){return e===this||e instanceof Qt&&(t.base.call(this,e)&&this.mechanism==e.mechanism&&Wn(this.wrapdata,e.wrapdata))},uniqueKey:function t(){var e=t.base.call(this)+":"+this.mechanism;return this.wrapdata&&(e+=":"+Xn(this.wrapdata)),e}}),un=Zt=Vt.extend({init:function t(e,i,n,r,a){t.base.call(this,e,qt.JWK_LADDER),Object.defineProperties(this,{wrapKey:{value:i,writable:!1,configurable:!1},wrapdata:{value:n,writable:!1,configurable:!1},encryptionKey:{value:r,writable:!1,configurable:!1},hmacKey:{value:a,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.wrapkey=g(this.wrapKey),t.wrapdata=g(this.wrapdata),t.encryptionkey=g(this.encryptionKey),t.hmackey=g(this.hmacKey),t},equals:function t(e){return this===e||e instanceof Zt&&(t.base.call(this,e)&&Wn(this.wrapKey,e.wrapKey)&&Wn(this.wrapdata,e.wrapdata)&&Wn(this.encryptionKey,e.encryptionKey)&&Wn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+Xn(this.wrapKey)+":"+Xn(this.wrapdata)+":"+Xn(this.encryptionKey)+":"+Xn(this.hmacKey)}}),cn=ct.extend({init:function(t){t&&t.rawKey&&(t=t.rawKey),Object.defineProperties(this,{_wrapKey:{value:t,writable:!1,enumerable:!1,configurable:!1}})},encrypt:function(t,e){e.error(new R(er.ENCRYPT_NOT_SUPPORTED))},decrypt:function(t,e){e.error(new R(er.DECRYPT_NOT_SUPPORTED))},wrap:function(t,e){$n(e,function(){T.wrapKey("jwk",t.rawKey,this._wrapKey,U).then(function(t){e.result(t)},function(t){e.error(new R(er.WRAP_ERROR))})},this)},unwrap:function(t,e,i,n){$n(n,function(){T.unwrapKey("jwk",t,this._wrapKey,U,e,!1,i).then(function(t){var e;e=t,$n(n,function(){switch(e.type){case"secret":Y(e,n);break;case"public":Q(e,n);break;case"private":tt(e,n);break;default:throw new R(er.UNSUPPORTED_KEY,"type: "+e.type)}})},function(t){n.error(new R(er.UNWRAP_ERROR))})},this)},sign:function(t,e){e.error(new R(er.SIGN_NOT_SUPPORTED))},verify:function(t,e,i){i.error(new R(er.VERIFY_NOT_SUPPORTED))}}),Xt=Jt.extend({init:function t(e){t.base.call(this,qt.JWK_LADDER),Object.defineProperties(this,{repository:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createRequestData:function(t,n,e){$n(e,function(){var t,e=n.mechanism,i=n.wrapdata;if(!e||e==on.WRAP&&(!i||"string"!=typeof i))throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(n));if(!on[e])throw new k(er.UNIDENTIFIED_KEYX_MECHANISM,e);if(e===on.WRAP){try{t=O(i)}catch(t){throw new k(er.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}if(null==t||0==t.length)throw new k(er.KEYX_WRAPPING_KEY_MISSING,"keydata "+n.toString())}else t=null;return new sn(e,t)})},createResponseData:function(t,e,i){var n,r,a,o,s,u,c;if(t=i.wrapkey,n=i.wrapdata,r=i.encryptionkey,a=i.hmackey,!(t&&"string"==typeof t&&n&&"string"==typeof n&&r&&"string"==typeof r&&a)||"string"!=typeof a)throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{o=O(t),s=O(n)}catch(t){throw new R(er.INVALID_SYMMETRIC_KEY,"keydata "+JSON.stringify(i),t)}try{u=O(r)}catch(t){throw new R(er.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{c=O(a)}catch(t){throw new R(er.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new un(e,o,s,u,c)},generateResponse:function(b,u,m,g){var v,y;function n(i,n,r){v.generateSessionKeys(b,{result:function(e){$n(g,function(){var t,s,l,p,d;t=i,s=n,l=r,p=e.encryptionKey,d=e.hmacKey,$n(g,function(){var i,n,r,a,o;i=b,n=u.mechanism,r=u.wrapdata,a=t,o={result:function(t){t.wrap(s,{result:function(t){var e,u,c,h,f;e=s,u=l,c=p,h=d,f=t,$n(g,function(){var t=new cn(e);t.wrap(c,{result:function(s){t.wrap(h,{result:function(t){var n,r,e,a,i,o;n=u,r=f,e=c,a=s,i=h,o=t,$n(g,function(){var t=b.getTokenFactory();y?t.renewMasterToken(b,y,e,i,{result:function(i){$n(g,function(){var t=new gt(b,i),e=new un(i,r,n,a,o);return new Jt.KeyExchangeData(e,t,g)},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}}):t.createMasterToken(b,m,e,i,{result:function(i){$n(g,function(){var t=new gt(b,i),e=new un(i,r,n,a,o);return new Jt.KeyExchangeData(e,t,g)},v)},error:g.error})},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}},$n(o,function(){var t,e;switch(n){case on.PSK:if(t=new Tt(a),!(e=i.getEntityAuthenticationFactory(yt.PSK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n);return t=e.getCryptoContext(i,t),new cn(A);case on.MGK:if(t=new Et(a),!(e=i.getEntityAuthenticationFactory(yt.MGK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n);return t=e.getCryptoContext(i,t),new cn(A);case on.WRAP:(t=i.getMslCryptoContext()).unwrap(r,U,G,{result:function(t){$n(o,function(){return new cn(t)})},error:o.error});break;default:throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n)}})},v)},v)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t})}})}$n(g,function(){var i,t;if(!(u instanceof sn))throw new j("Key request data "+JSON.stringify(u)+" was not created by this factory.");if((i=m)instanceof Me){if(!m.isVerified())throw new S(er.MASTERTOKEN_UNTRUSTED,m);i=(y=m).identity}t=new Uint8Array(16),b.getRandom().nextBytes(t),W(t,U,G,{result:function(e){$n(g,function(){b.getMslCryptoContext().wrap(e,{result:function(t){n(i,e,t)},error:function(t){$n(g,function(){throw t instanceof P&&t.setEntity(y),t},v)}})},v)},error:function(t){$n(g,function(){throw new R(er.WRAP_KEY_CREATION_FAILURE,null,t).setEntity(y)},v)}})},v=this)},getCryptoContext:function(c,t,h,e,f){var l;$n(f,function(){var n,u;if(!(t instanceof sn))throw new j("Key request data "+JSON.stringify(t)+" was not created by this factory.");if(!(h instanceof un))throw new j("Key response data "+JSON.stringify(h)+" was not created by this factory.");n=t.mechanism,u=t.wrapdata,c.getEntityAuthenticationData(null,{result:function(s){$n(f,function(){var t,e,i=s.getIdentity();switch(n){case on.PSK:if(t=new Tt(i),!(e=c.getEntityAuthenticationFactory(yt.PSK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new cn(t.wrapKey);break;case on.MGK:if(t=new Et(i),!(e=c.getEntityAuthenticationFactory(yt.MGK)))throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s);t=e.getCryptoContext(c,t),t=new cn(t.wrapKey);break;case on.WRAP:if(!(t=this.repository.getCryptoContext(u)))throw new k(er.KEYX_WRAPPING_KEY_MISSING,g(u)).setEntity(s);break;default:throw new k(er.UNSUPPORTED_KEYX_MECHANISM,n).setEntity(s)}t.unwrap(h.wrapKey,U,G,{result:function(t){var n,r,a,o,e;n=s,r=h,a=u,o=i,e=t,$n(f,function(){var i=new cn(e);i.unwrap(r.encryptionKey,B,V,{result:function(e){i.unwrap(r.hmacKey,F,J,{result:function(t){$n(f,function(){return this.repository.addCryptoContext(r.wrapdata,i),this.repository.removeCryptoContext(a),new gt(c,r.masterToken,o,e,t)},l)},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(n),t})}})},l)},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(s),t})}})},l)},error:f.error})},l=this)}}),Ti=u.Class.create({addCryptoContext:function(t,e){},getCryptoContext:function(t){},removeCryptoContext:function(t){}}),hn=te={RSA:"RSA",ECC:"ECC",JWE_RSA:"JWE_RSA",JWEJS_RSA:"JWEJS_RSA",JWK_RSA:"JWK_RSA",JWK_RSAES:"JWK_RSAES"},fn=ee=Ht.extend({init:function t(e,i,n,r){t.base.call(this,qt.ASYMMETRIC_WRAPPED),Object.defineProperties(this,{keyPairId:{value:e,writable:!1,configurable:!1},mechanism:{value:i,writable:!1,configurable:!1},publicKey:{value:n,writable:!1,configurable:!1},privateKey:{value:r,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.keypairid=this.keyPairId,t.mechanism=this.mechanism,t.publickey=g(this.publicKey.getEncoded()),t},equals:function t(e){var i;return e===this||e instanceof ee&&(i=this.privateKey===e.privateKey||this.privateKey&&e.privateKey&&Wn(this.privateKey.getEncoded(),e.privateKey.getEncoded()),t.base.call(this,e)&&this.keyPairId==e.keyPairId&&this.mechanism==e.mechanism&&Wn(this.publicKey.getEncoded(),e.publicKey.getEncoded())&&i)},uniqueKey:function t(){var e=this.publicKey.getEncoded(),i=this.privateKey&&this.privateKey.getEncoded();return e=t.base.call(this)+":"+this.keyPairId+":"+this.mechanism+":"+Xn(e),i&&(e+=":"+Xn(i)),e}}),ln=function(r,a){$n(a,function(){var t,e=r.keypairid,i=r.mechanism,n=r.publickey;if(!e||"string"!=typeof e||!i||!n||"string"!=typeof n)throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(r));if(!hn[i])throw new k(er.UNIDENTIFIED_KEYX_MECHANISM,i);try{switch(t=O(n),i){case hn.JWE_RSA:case hn.JWEJS_RSA:case hn.JWK_RSA:Z(t,q,G,{result:function(t){a.result(new fn(e,i,t,null))},error:function(t){a.error(t)}});break;case hn.JWK_RSAES:Z(t,H,G,{result:function(t){a.result(new fn(e,i,t,null))},error:function(t){a.error(t)}});break;default:throw new R(er.UNSUPPORTED_KEYX_MECHANISM,i)}}catch(t){if(!(t instanceof P))throw new R(er.INVALID_PUBLIC_KEY,"keydata "+JSON.stringify(r),t);throw t}})},pn=ie=Vt.extend({init:function t(e,i,n,r){t.base.call(this,e,qt.ASYMMETRIC_WRAPPED),Object.defineProperties(this,{keyPairId:{value:i,writable:!1,configurable:!1},encryptionKey:{value:n,writable:!1,configurable:!1},hmacKey:{value:r,writable:!1,configurable:!1}})},getKeydata:function(){var t={};return t.keypairid=this.keyPairId,t.encryptionkey=g(this.encryptionKey),t.hmackey=g(this.hmacKey),t},equals:function t(e){return this===e||e instanceof ie&&(t.base.call(this,e)&&this.keyPairId==e.keyPairId&&Wn(this.encryptionKey,e.encryptionKey)&&Wn(this.hmacKey,e.hmacKey))},uniqueKey:function t(){return t.base.call(this)+":"+this.keyPairId+":"+Xn(this.encryptionKey)+":"+Xn(this.hmacKey)}}),$t=Jt.extend({init:function t(){t.base.call(this,qt.ASYMMETRIC_WRAPPED)},createRequestData:function(t,e,i){ln(e,i)},createResponseData:function(t,e,i){var n,r,a,o;if(t=i.keypairid,n=i.encryptionkey,r=i.hmackey,!t||"string"!=typeof t||!n||"string"!=typeof n||!r||"string"!=typeof r)throw new N(er.JSON_PARSE_ERROR,"keydata "+JSON.stringify(i));try{a=O(n)}catch(t){throw new R(er.INVALID_ENCRYPTION_KEY,"keydata "+JSON.stringify(i),t)}try{o=O(r)}catch(t){throw new R(er.INVALID_HMAC_KEY,"keydata "+JSON.stringify(i),t)}return new pn(e,t,a,o)},generateResponse:function(u,c,h,f){var l;function e(o,s){$n(f,function(){var t=Fr(u,c.keyPairId,c.mechanism,null,c.publicKey);t.wrap(o,{result:function(a){$n(f,function(){t.wrap(s,{result:function(t){var e,n,i,r;e=o,n=a,i=s,r=t,$n(f,function(){var t=u.getTokenFactory();h instanceof Me?t.renewMasterToken(u,h,e,i,{result:function(i){$n(f,function(){var t=new gt(u,i),e=new pn(i,c.keyPairId,n,r);return new Jt.KeyExchangeData(e,t,f)},l)},error:function(t){$n(f,function(){throw t instanceof P&&t.setEntity(h),t},l)}}):t.createMasterToken(u,h,e,i,{result:function(i){$n(f,function(){var t=new gt(u,i),e=new pn(i,c.keyPairId,n,r);return new Jt.KeyExchangeData(e,t,f)},l)},error:f.error})},l)},error:function(t){$n(f,function(){throw t instanceof P&&h instanceof Me&&t.setEntity(h),t},l)}})},l)},error:function(t){$n(f,function(){throw t instanceof P&&h instanceof Me&&t.setEntity(h),t},l)}})},l)}$n(f,function(){if(!(c instanceof fn))throw new j("Key request data "+JSON.stringify(c)+" was not created by this factory.");this.generateSessionKeys(u,{result:function(t){e(t.encryptionKey,t.hmacKey)},error:function(t){$n(f,function(){throw t instanceof P&&h instanceof Me&&t.setEntity(h),t},l)}})},l=this)},getCryptoContext:function(r,n,a,o,s){var u=this;$n(s,function(){var t,e,i;if(!(n instanceof fn))throw new j("Key request data "+JSON.stringify(n)+" was not created by this factory.");if(!(a instanceof pn))throw new j("Key response data "+JSON.stringify(a)+" was not created by this factory.");if((t=n.keyPairId)!=(e=a.keyPairId))throw new k(er.KEYX_RESPONSE_REQUEST_MISMATCH,"request "+t+"; response "+e).setEntity(o);if(!(e=n.privateKey))throw new k(er.KEYX_PRIVATE_KEY_MISSING,"request Asymmetric private key").setEntity(o);(i=Fr(r,t,n.mechanism,e,null)).unwrap(a.encryptionKey,B,V,{result:function(n){i.unwrap(a.hmacKey,F,J,{result:function(i){r.getEntityAuthenticationData(null,{result:function(e){$n(s,function(){var t=e.getIdentity();return new gt(r,a.masterToken,t,n,i)},u)},error:function(t){$n(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},error:function(t){$n(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},error:function(t){$n(s,function(){throw t instanceof P&&t.setEntity(o),t},u)}})},u)}}),ne=u.Class.create({init:function(t){var i,n,r,e=p.parser(),a=[],o=[],s=0,u=!1;e.onerror=function(t){u||(u=!0,e.end())},e.onopenobject=function(t){var e;i?(i[r]={},o.push(i),i=i[r]):n?(e={},o.push(n),n.push(e),i=e,n=A):i={},r=t},e.oncloseobject=function(){var t=o.pop();t?"object"==typeof t?i=t:(i=A,n=t):(a.push(i),s=e.index,i=A)},e.onopenarray=function(){var t;i?(i[r]=[],o.push(i),n=i[r],i=A):n=n?(t=[],o.push(n),n.push(t),t):[]},e.onclosearray=function(){var t=o.pop();n=t?"object"==typeof t?(i=t,A):t:(a.push(n),s=e.index,A)},e.onkey=function(t){r=t},e.onvalue=function(t){i?i[r]=t:n?n.push(t):(a.push(t),s=e.index)},e.write(t).close(),Object.defineProperties(this,{_values:{value:a,writable:!1,enumerable:!1,configurable:!1},_lastIndex:{value:s,writable:!0,enumerable:!1,configurable:!1}})},more:function(){return 0<this._values.length},nextValue:function(){return 0==this._values.length?A:this._values.shift()},lastIndex:function(){return this._lastIndex}}),ae="entityauthdata",oe="signature",re=function(o,s,u,c){$n(c,function(){var e,i,n,t=s.entityauthdata,r=s.mastertoken,a=s.signature;if(t&&"object"!=typeof t||r&&"object"!=typeof r||"string"!=typeof a)throw new N(er.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));try{e=O(a)}catch(t){throw new C(er.HEADER_SIGNATURE_INVALID,"header/errormsg "+JSON.stringify(s),t)}if(i=null,t&&(i=_t(o,t)),(n=s.headerdata)!=A&&null!=n){if("string"!=typeof n)throw new N(er.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));r?De(o,r,{result:function(t){be(o,n,i,t,e,u,c)},error:function(t){c.error(t)}}):be(o,n,i,null,e,u,c)}else{if((t=s.errordata)==A||null==t)throw new N(er.JSON_PARSE_ERROR,JSON.stringify(s));if("string"!=typeof t)throw new N(er.JSON_PARSE_ERROR,"header/errormsg "+JSON.stringify(s));ce(o,t,i,e,c)}})},se=u.Class.create({init:function(e,n,r,a,o,s,u,c,h,f){var l=this;$n(f,function(){var t,i;if(s<0&&(s=-1),a<0||x<a)throw new j("Message ID "+a+" is out of range.");if(!n)throw new C(er.MESSAGE_ENTITY_NOT_FOUND);if(h)return Object.defineProperties(this,{entityAuthenticationData:{value:n,writable:!1,configurable:!1},recipient:{value:r,writable:!1,configurable:!1},messageId:{value:a,writable:!1,configurable:!1},errorCode:{value:o,writable:!1,configurable:!1},internalCode:{value:s,writable:!1,configurable:!1},errorMessage:{value:u,writable:!1,configurable:!1},userMessage:{value:c,writable:!1,configurable:!1},errordata:{value:h.errordata,writable:!1,enumerable:!1,configurable:!1},signature:{value:h.signature,writable:!1,enumerable:!1,configurable:!1}}),this;t={},r&&(t.recipient=r),t.messageid=a,t.errorcode=o,0<s&&(t.internalcode=s),u&&(t.errormsg=u),c&&(t.usermsg=c);try{i=e.getEntityAuthenticationFactory(n.scheme).getCryptoContext(e,n)}catch(t){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t}t=Jn(JSON.stringify(t),I),i.encrypt(t,{result:function(e){$n(f,function(){i.sign(e,{result:function(t){$n(f,function(){return Object.defineProperties(this,{entityAuthenticationData:{value:n,writable:!1,configurable:!1},recipient:{value:r,writable:!1,configurable:!1},messageId:{value:a,writable:!1,configurable:!1},errorCode:{value:o,writable:!1,configurable:!1},internalCode:{value:s,writable:!1,configurable:!1},errorMessage:{value:u,writable:!1,configurable:!1},userMessage:{value:c,writable:!1,configurable:!1},errordata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},l)},error:function(t){$n(f,function(){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t},l)}})},l)},error:function(t){$n(f,function(){throw t instanceof P&&(t.setEntity(n),t.setMessageId(a)),t},l)}})},l)},toJSON:function(){var t={};return t[ae]=this.entityAuthenticationData,t.errordata=g(this.errordata),t[oe]=g(this.signature),t}}),ue=function(t,e,i,n,r,a,o,s,u){new se(t,e,i,n,r,a,o,s,null,u)},ce=function(h,f,l,p,d){$n(d,function(){var t,e,i;if(!l)throw new C(er.MESSAGE_ENTITY_NOT_FOUND);try{if(t=l.scheme,!(e=h.getEntityAuthenticationFactory(t)))throw new o(er.ENTITYAUTH_FACTORY_NOT_FOUND,t);i=e.getCryptoContext(h,l)}catch(t){throw t instanceof P&&t.setEntity(l),t}try{f=O(f)}catch(t){throw new C(er.HEADER_DATA_INVALID,f,t).setEntity(l)}if(!f||0==f.length)throw new C(er.HEADER_DATA_MISSING,f).setEntity(l);i.verify(f,p,{result:function(t){$n(d,function(){if(!t)throw new R(er.MESSAGE_VERIFICATION_FAILED).setEntity(l);i.decrypt(f,{result:function(c){$n(d,function(){var t,e,i,n,r,a,o,s,u=Gn(c,I);try{t=JSON.parse(u)}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"errordata "+u,t).setEntity(l);throw t}if(e=t.recipient!==A?t.recipient:null,i=parseInt(t.messageid),n=parseInt(t.errorcode),r=parseInt(t.internalcode),a=t.errormsg,o=t.usermsg,e&&"string"!=typeof e||!i||i!=i||!n||n!=n||t.internalcode&&r!=r||a&&"string"!=typeof a||o&&"string"!=typeof o)throw new N(er.JSON_PARSE_ERROR,"errordata "+u).setEntity(l);if(i<0||x<i)throw new C(er.MESSAGE_ID_OUT_OF_RANGE,"errordata "+u).setEntity(l);for(s in t=!1,v)if(v[s]==n){t=!0;break}if(t||(n=v.FAIL),r){if(r<0)throw new C(er.INTERNAL_CODE_NEGATIVE,"errordata "+u).setEntity(l).setMessageId(i)}else r=-1;u=new qr(f,p),new se(h,l,e,i,n,r,a,o,u,d)})},error:function(t){$n(d,function(){throw t instanceof P&&t.setEntity(l),t})}})})},error:function(t){$n(d,function(){throw t instanceof P&&t.setEntity(l),t})}})})},Rn=u.Class.create({getUserMessage:function(t,e){}}),le=function(t,i){var e;return t&&i?(e=t.compressionAlgorithms.filter(function(t){for(var e=0;e<i.compressionAlgorithms.length;++e)if(t==i.compressionAlgorithms[e])return!0;return!1}),t=t.languages.filter(function(t){for(var e=0;e<i.languages.length;++e)if(t==i.languages[e])return!0;return!1}),new he(e,t)):null},he=u.Class.create({init:function(t,e){e=e||[],(t=t||[]).sort(),Object.defineProperties(this,{compressionAlgorithms:{value:t,writable:!1,enumerable:!0,configurable:!1},languages:{value:e,writable:!1,enumerable:!0,configurable:!1}})},toJSON:function(){var t={};return t.compressionalgos=this.compressionAlgorithms,t.languages=this.languages,t},equals:function(t){return this===t||t instanceof he&&(Zn(this.compressionAlgorithms,t.compressionAlgorithms)&&Zn(this.languages,t.languages))},uniqueKey:function(){return this.compressionAlgorithms.join(":")+"|"+this.languages.join(":")}}),fe=function(t){var e,i=t.compressionalgos,n=t.languages;if(i&&!(i instanceof Array)||n&&!(n instanceof Array))throw new N(er.JSON_PARSE_ERROR,"capabilities "+JSON.stringify(t));t=[];for(var r=0;i&&r<i.length;++r)e=i[r],y[e]&&t.push(e);return new he(t,n)},dn=me=u.Class.create({init:function(t,e,i,n,r,a,o,s,u){Object.defineProperties(this,{messageId:{value:t,writable:!1,configurable:!1},nonReplayableId:{value:e,writable:!1,configurable:!1},renewable:{value:i,writable:!1,configurable:!1},capabilities:{value:n,writable:!1,configurable:!1},keyRequestData:{value:r,writable:!1,configurable:!1},keyResponseData:{value:a,writable:!1,configurable:!1},userAuthData:{value:o,writable:!1,configurable:!1},userIdToken:{value:s,writable:!1,configurable:!1},serviceTokens:{value:u,writable:!1,configurable:!1}})}}),bn=ge=u.Class.create({init:function(t,e,i){Object.defineProperties(this,{peerMasterToken:{value:t,writable:!1,configurable:!1},peerUserIdToken:{value:e,writable:!1,configurable:!1},peerServiceTokens:{value:i,writable:!1,configurable:!1}})}}),pe=u.Class.create({init:function(v,y,w,_,E,k,S){var T;function e(g){$n(S,function(){var n,r,a,o,s,u,c,h,f,l,p,d,e,i,b,t,m;if(y=w?null:y,n=_.nonReplayableId,r=_.renewable,a=_.capabilities,o=_.messageId,s=_.keyRequestData||[],u=_.keyResponseData,c=_.userAuthData,h=_.userIdToken,f=_.serviceTokens||[],d=v.isPeerToPeer()?(l=E.peerMasterToken,p=E.peerUserIdToken,E.peerServiceTokens||[]):(p=l=null,[]),o<0||x<o)throw new j("Message ID "+o+" is out of range.");if(!y&&!w)throw new j("Message entity authentication data or master token must be provided.");if(i=u?v.isPeerToPeer()?(e=w,u.masterToken):(e=u.masterToken,l):(e=w,l),h&&(!e||!h.isBoundTo(e)))throw new j("User ID token must be bound to a master token.");if(p&&(!i||!p.isBoundTo(i)))throw new j("Peer user ID token must be bound to a peer master token.");if(f.forEach(function(t){if(t.isMasterTokenBound()&&(!e||!t.isBoundTo(e)))throw new j("Master token bound service tokens must be bound to the provided master token.");if(t.isUserIdTokenBound()&&(!h||!t.isBoundTo(h)))throw new j("User ID token bound service tokens must be bound to the provided user ID token.")},this),d.forEach(function(t){if(t.isMasterTokenBound()&&(!i||!t.isBoundTo(i)))throw new j("Master token bound peer service tokens must be bound to the provided peer master token.");if(t.isUserIdTokenBound()&&(!p||!t.isBoundTo(p)))throw new j("User ID token bound peer service tokens must be bound to the provided peer user ID token.")},this),k)return m=k.customer,t=Kr(0,b=k.messageCryptoContext,m,y,w,g,o,s,u,c,h,f,l,p,d,n,r,a,k.headerdata,k.signature),Object.defineProperties(this,t),this;m=h?h.customer:null,t={},g&&(t.sender=g),t.messageid=o,"number"==typeof n&&(t.nonreplayableid=n),t.renewable=r,a&&(t.capabilities=a),0<s.length&&(t.keyrequestdata=s),u&&(t.keyresponsedata=u),c&&(t.userauthdata=c),h&&(t.useridtoken=h),0<f.length&&(t.servicetokens=f),l&&(t.peermastertoken=l),p&&(t.peeruseridtoken=p),0<d.length&&(t.peerservicetokens=d);try{b=Vr(v,y,w)}catch(t){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t}t=Jn(JSON.stringify(t),I),b.encrypt(t,{result:function(i){$n(S,function(){b.sign(i,{result:function(e){$n(S,function(){var t=Kr(0,b,m,y,w,g,o,s,u,c,h,f,l,p,d,n,r,a,i,e);return Object.defineProperties(this,t),this},T)},error:function(t){$n(S,function(){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t},T)}})},T)},error:function(t){$n(S,function(){throw t instanceof P&&(t.setEntity(w),t.setEntity(y),t.setUser(h),t.setUser(c),t.setMessageId(o)),t},T)}})},T)}$n(S,function(){k?e(k.sender):w?v.getEntityAuthenticationData(null,{result:function(t){e(t=t.getIdentity())},error:S.error}):e(null)},T=this)},isEncrypting:function(){return this.masterToken||ir(this.entityAuthenticationData.scheme)},isRenewable:function(){return this.renewable},toJSON:function(){var t={};return this.masterToken?t.mastertoken=this.masterToken:t[ae]=this.entityAuthenticationData,t.headerdata=g(this.headerdata),t[oe]=g(this.signature),t}}),de=function(t,e,i,n,r,a){new pe(t,e,i,n,r,null,a)},be=function(y,w,_,E,k,S,T){$n(T,function(){var e,v,i,n,t,r;if(!(_=E?null:_)&&!E)throw new C(er.MESSAGE_ENTITY_NOT_FOUND);e=w;try{w=O(e)}catch(t){throw new C(er.HEADER_DATA_INVALID,e,t)}if(!w||0==w.length)throw new C(er.HEADER_DATA_MISSING,e);try{v=Vr(y,_,E)}catch(t){throw t instanceof P&&(t.setEntity(E),t.setEntity(_)),t}i=v,n=w,t=k,r={result:function(g){$n(T,function(){var d,b,m,t,e,i,n,r;try{d=JSON.parse(g)}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g,t).setEntity(E).setEntity(_);throw t}if(!(b=parseInt(d.messageid))||b!=b)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g).setEntity(E).setEntity(_);if(b<0||x<b)throw new C(er.MESSAGE_ID_OUT_OF_RANGE,"headerdata "+g).setEntity(E).setEntity(_);if(m=E?d.sender:null,E&&(!m||"string"!=typeof m))throw new N(er.JSON_PARSE_ERROR,"headerdata "+g).setEntity(E).setEntity(_).setMessageId(b);if((t=d.keyresponsedata)&&"object"!=typeof t)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g).setEntity(E).setEntity(_).setMessageId(b);e=T,i=y,n=t,r={result:function(p){$n(T,function(){var t,e,i,n,a=!y.isPeerToPeer()&&p?p.masterToken:E,r=d.useridtoken;if(r&&"object"!=typeof r)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g);t=y,e=r,i=a,n={result:function(l){$n(T,function(){var t,e,i,n,r=d.userauthdata;if(r&&"object"!=typeof r)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g);t=y,e=a,i=r,n={result:function(f){$n(T,function(){var t,e,h;if(f){if(t=f.scheme,!(e=y.getUserAuthenticationFactory(t)))throw new L(er.USERAUTH_FACTORY_NOT_FOUND,t).setUser(l).setUser(f);t=E?E.identity:_.getIdentity(),h=e.authenticate(y,t,f,l)}else h=l?l.customer:null;Gr(y,d.servicetokens,a,l,S,g,{result:function(c){$n(T,function(){var o,t,s=d.nonreplayableid!==A?parseInt(d.nonreplayableid):null,u=d.renewable;if(s!=s||"boolean"!=typeof u)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g);if(s<0||x<s)throw new C(er.NONREPLAYABLE_ID_OUT_OF_RANGE,"headerdata "+g);if(o=null,t=d.capabilities){if("object"!=typeof t)throw new N(er.JSON_PARSE_ERROR,"headerdata "+g);o=fe(t)}zr(y,d,g,{result:function(a){Jr(y,d,p,S,g,{result:function(r){$n(T,function(){var t=r.peerMasterToken,e=r.peerUserIdToken,i=r.peerServiceTokens,n=new dn(b,s,u,o,a,p,f,l,c);t=new bn(t,e,i),e=new Hr(h,m,v,w,k),new pe(y,_,E,n,t,e,T)})},error:T.error})},error:function(t){$n(T,function(){throw t instanceof P&&(t.setUser(l),t.setUser(f)),t})}})})},error:function(t){$n(T,function(){throw t instanceof P&&(t.setEntity(a),t.setUser(l),t.setUser(f)),t})}})})},error:T.error},$n(n,function(){return i?void Ge(t,e,i,n):null})})},error:T.error},$n(n,function(){return e?void Be(t,e,i,n):null})})},error:(T={result:function(t){e.result(t)},error:function(t){t instanceof P&&(t.setEntity(E),t.setEntity(_),t.setMessageId(b)),e.error(t)}}).error},$n(r,function(){return n?void Gt(i,n,r):null})})},error:T.error},$n(r,function(){i.verify(n,t,{result:function(t){$n(r,function(){if(!t)throw new R(er.MESSAGE_VERIFICATION_FAILED);i.decrypt(n,{result:function(t){$n(r,function(){return Gn(t,I)})},error:function(t){r.error(t)}})})},error:function(t){r.error(t)}})})})},ve=u.Class.create({init:function(i,n,r,a,o,s,u,c){var h=this;$n(c,function(){var t,e;if(i<0||x<i)throw new j("Sequence number "+i+" is outside the valid range.");if(n<0||x<n)throw new j("Message ID "+n+" is outside the valid range.");if(u)return Object.defineProperties(this,{sequenceNumber:{value:i,writable:!1,configurable:!1},messageId:{value:n,writable:!1,configurable:!1},compressionAlgo:{value:a,writable:!1,configurable:!1},data:{value:o,writable:!1,configurable:!1},endofmsg:{value:r,writable:!1,enumerable:!1,configurable:!1},payload:{value:u.payload,writable:!1,enumerable:!1,configurable:!1},signature:{value:u.signature,writable:!1,enumerable:!1,configurable:!1}}),this;a&&(t=fi(a,o))||(a=null,t=o),(e={}).sequencenumber=i,e.messageid=n,r&&(e.endofmsg=r),a&&(e.compressionalgo=a),e.data=g(t),t=Jn(JSON.stringify(e),I),s.encrypt(t,{result:function(e){$n(c,function(){s.sign(e,{result:function(t){$n(c,function(){return Object.defineProperties(this,{sequenceNumber:{value:i,writable:!1,configurable:!1},messageId:{value:n,writable:!1,configurable:!1},compressionAlgo:{value:a,writable:!1,configurable:!1},data:{value:o,writable:!1,configurable:!1},endofmsg:{value:r,writable:!1,enumerable:!1,configurable:!1},payload:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},h)},error:function(t){c.error(t)}})},h)},error:function(t){c.error(t)}})},h)},isEndOfMessage:function(){return this.endofmsg},toJSON:function(){var t={};return t.payload=g(this.payload),t.signature=g(this.signature),t}}),ye=function(t,e,i,n,r,a,o){new ve(t,e,i,n,r,a,null,o)},we=function(i,h,f){$n(f,function(){var u,c,t=i.payload,e=i.signature;if(!t||"string"!=typeof t||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"payload chunk "+JSON.stringify(i));try{u=O(t)}catch(t){throw new C(er.PAYLOAD_INVALID,"payload chunk "+JSON.stringify(i),t)}try{c=O(e)}catch(t){throw new C(er.PAYLOAD_SIGNATURE_INVALID,"payload chunk "+JSON.stringify(i),t)}h.verify(u,c,{result:function(t){$n(f,function(){if(!t)throw new R(er.PAYLOAD_VERIFICATION_FAILED);h.decrypt(u,{result:function(s){$n(f,function(){var e,t,i,n,r,a,o=Gn(s,I);try{e=JSON.parse(o)}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"payload chunk payload "+o,t);throw t}if(t=parseInt(e.sequencenumber),i=parseInt(e.messageid),n=e.endofmsg,r=e.compressionalgo,e=e.data,!t||t!=t||!i||i!=i||n&&"boolean"!=typeof n||r&&"string"!=typeof r||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"payload chunk payload "+o);if(t<0||x<t)throw new P(er.PAYLOAD_SEQUENCE_NUMBER_OUT_OF_RANGE,"payload chunk payload "+o);if(i<0||x<i)throw new P(er.PAYLOAD_MESSAGE_ID_OUT_OF_RANGE,"payload chunk payload "+o);if(n=n||!1,r&&!y[r])throw new C(er.UNIDENTIFIED_COMPRESSION,r);try{a=O(e)}catch(t){throw new C(er.PAYLOAD_DATA_CORRUPT,e,t)}if(a&&0!=a.length)o=r?li(r,a):a;else{if(0<e.length)throw new C(er.PAYLOAD_DATA_CORRUPT,e);if(!n)throw new C(er.PAYLOAD_DATA_MISSING,e);o=new Uint8Array(0)}a=new Yr(u,c),new ve(t,i,n,r,o,h,a,f)})},error:function(t){f.error(t)}})})},error:function(t){f.error(t)}})})},mn=new Uint8Array(0),gn=Ee=function(t){if(t<0||x<t)throw new j("Message ID "+t+" is outside the valid range.");return t==x?0:t+1},ke=function(t){if(t<0||x<t)throw new j("Message ID "+t+" is outside the valid range.");return 0==t?x:t-1},Se=function(i,n,r,a,o){$n(o,function(){var t;if(a==A||null==a)for(t=i.getRandom();a=t.nextLong(),a<0||x<a;);else if(a<0||x<a)throw new j("Message ID "+a+" is outside the valid range.");i.getEntityAuthenticationData(null,{result:function(e){$n(o,function(){var t=i.getMessageCapabilities();return new _e(i,a,t,e,n,r,null,null,null,null,null)})},error:function(t){o.error(t)}})})},Te=function(d,b,m){$n(m,function(){var h,e,f,i,n,l,r,t,a,o,s;function p(t){$n(m,function(){throw t instanceof P&&(t.setEntity(h),t.setEntity(e),t.setUser(f),t.setUser(i),t.setMessageId(n)),t})}h=b.masterToken,e=b.entityAuthenticationData,f=b.userIdToken,i=b.userAuthenticationData,n=b.messageId,l=gn(n),r=d,t=b,a=e,o=h,s={result:function(c){$n(m,function(){var t=c?c.keyResponseData.masterToken:t=h;d.getEntityAuthenticationData(null,{result:function(u){$n(m,function(){var r,a,o,s;r=d,a=b,o=t,s={result:function(n){$n(m,function(){var t,e,i;return f=n,t=le(b.messageCapabilities,d.getMessageCapabilities()),e=b.keyResponseData,i=b.serviceTokens,d.isPeerToPeer()?new _e(d,l,t,u,e?e.masterToken:b.peerMasterToken,b.peerUserIdToken,b.peerServiceTokens,h,f,i,c):new _e(d,l,t,u,e?e.masterToken:h,f,i,null,null,null,c)})},error:p},$n(s,function(){var t,e=a.userIdToken,i=a.userAuthenticationData,n=a.messageId;if(e&&e.isVerified()){if(e.isRenewable()&&a.isRenewable()||e.isExpired()||!e.isBoundTo(o))return void(i=r.getTokenFactory()).renewUserIdToken(r,e,o,s)}else if(a.isRenewable()&&o&&i){if(!(e=a.customer)){if(e=i.scheme,!(t=r.getUserAuthenticationFactory(e)))throw new L(er.USERAUTH_FACTORY_NOT_FOUND,e).setEntity(o).setUser(i).setMessageId(n);e=t.authenticate(r,o.identity,i,null)}return void(i=r.getTokenFactory()).createUserIdToken(r,e,o,s)}return e})})},error:p})})},error:p},$n(s,function(){var e=t.keyRequestData;if(!(t.isRenewable()&&0<e.length))return null;o?o.isRenewable()||o.isExpired()?Wr(r,e,o,null,s):r.getTokenFactory().isNewestMasterToken(r,o,{result:function(t){$n(s,function(){return t?null:void Wr(r,e,o,null,s)})},error:s.error}):Wr(r,e,null,a.getIdentity(),s)})})},Ae=function(n,r,a,o,s){$n(s,function(){n.getEntityAuthenticationData(null,{result:function(i){$n(s,function(){var t,e;if(r!=A&&null!=r)t=gn(r);else for(e=n.getRandom();t=e.nextInt(),t<0||x<t;);ue(n,i,t,a.responseCode,a.internalCode,a.message,o,s)})},error:function(t){s.error(t)}})})},_e=u.Class.create({init:function(t,e,i,n,r,a,o,s,u,c,h){var f,l,p,d,b;if(!t.isPeerToPeer()&&(s||u))throw new j("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");f=h&&!t.isPeerToPeer()?h.keyResponseData.masterToken:r,l=[],f=t.getMslStore().getServiceTokens(f,a),l.push.apply(l,f),o&&o.forEach(function(t){l.push(t)},this),p=[],t.isPeerToPeer()&&(d=s,b=u,o=h?h.keyResponseData.masterToken:s,u=t.getMslStore().getServiceTokens(o,u),p.push.apply(p,u),c&&c.forEach(function(t){p.push(t)},this)),Object.defineProperties(this,{_ctx:{value:t,writable:!1,enumerable:!1,configurable:!1},_entityAuthData:{value:n,writable:!1,enumerable:!1,configurable:!1},_masterToken:{value:r,writable:!0,enumerable:!1,configurable:!1},_messageId:{value:e,writable:!1,enumerable:!1,configurable:!1},_capabilities:{value:i,writable:!1,enumerable:!1,configurable:!1},_keyExchangeData:{value:h,writable:!1,enumerable:!1,configurable:!1},_nonReplayable:{value:!1,writable:!0,enumerable:!1,configurable:!1},_renewable:{value:!1,writable:!0,enumerable:!1,configurable:!1},_keyRequestData:{value:{},writable:!1,enumerable:!1,configurable:!1},_userAuthData:{value:null,writable:!0,enumerable:!1,configurable:!1},_userIdToken:{value:a,writable:!0,enumerable:!1,configurable:!1},_serviceTokens:{value:l,writable:!1,enumerable:!1,configurable:!1},_peerMasterToken:{value:d,writable:!0,enumerable:!1,configurable:!1},_peerUserIdToken:{value:b,writable:!0,enumerable:!1,configurable:!1},_peerServiceTokens:{value:p,writable:!1,enumerable:!1,configurable:!1}})},getMessageId:function(){return this._messageId},getMasterToken:function(){return this._masterToken},getUserIdToken:function(){return this._userIdToken},getKeyExchangeData:function(){return this._keyExchangeData},willEncryptHeader:function(){return this._masterToken||ir(this._entityAuthData.scheme)},willEncryptPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||ir(this._entityAuthData.scheme)},willIntegrityProtectHeader:function(){return this._masterToken||nr(this._entityAuthData.scheme)},willIntegrityProtectPayloads:function(){return this._masterToken||!this._ctx.isPeerToPeer()&&this._keyExchangeData||nr(this._entityAuthData.scheme)},getHeader:function(n){$n(n,function(){var t,e=this._keyExchangeData?this._keyExchangeData.keyResponseData:null,i=[];for(t in this._keyRequestData)i.push(this._keyRequestData[t]);if(this._nonReplayable){if(!this._masterToken)throw new C(er.NONREPLAYABLE_MESSAGE_REQUIRES_MASTERTOKEN);t=this._ctx.getMslStore().getNonReplayableId(this._masterToken)}else t=null;e=new me(this._messageId,t,this._renewable,this._capabilities,i,e,this._userAuthData,this._userIdToken,this._serviceTokens),i=new ge(this._peerMasterToken,this._peerUserIdToken,this._peerServiceTokens),de(this._ctx,this._entityAuthData,this._masterToken,e,i,n)},this)},isNonReplayable:function(){return this._nonReplayable},setNonReplayable:function(t){return this._nonReplayable=t,this},isRenewable:function(){return this._renewable},setRenewable:function(t){return this._renewable=t,this},setAuthTokens:function(t,e){var i,n;if(e&&!e.isBoundTo(t))throw new j("User ID token must be bound to master token.");if(this._keyExchangeData&&!this._ctx.isPeerToPeer())throw new j("Attempt to set message builder master token when key exchange data exists as a trusted network server.");try{i=this._ctx.getMslStore().getServiceTokens(t,e)}catch(t){if(t instanceof P)throw new j("Invalid master token and user ID token combination despite checking above.",t);throw t}for(var r=this._serviceTokens.length-1;0<=r;--r)((n=this._serviceTokens[r]).isUserIdTokenBound()&&!n.isBoundTo(e)||n.isMasterTokenBound()&&!n.isBoundTo(t))&&this._serviceTokens.splice(r,1);i.forEach(function(t){this.excludeServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._serviceTokens.push(t)},this),this._masterToken=t,this._userIdToken=e},setUserAuthenticationData:function(t){return this._userAuthData=t,this},setCustomer:function(e,i){var n=this;$n(i,function(){var t;if(!this._ctx.isPeerToPeer()&&null!=this._userIdToken||this._ctx.isPeerToPeer()&&null!=this._peerUserIdToken)throw new j("User ID token or peer user ID token already exists for the remote user.");if(!(t=this._keyExchangeData?this._keyExchangeData.keyResponseData.masterToken:this._ctx.isPeerToPeer()?this._peerMasterToken:this._masterToken))throw new j("User ID token or peer user ID token cannot be created because no corresponding master token exists.");this._ctx.getTokenFactory().createUserIdToken(this._ctx,e,t,{result:function(t){$n(i,function(){return this._ctx.isPeerToPeer()?this._peerUserIdToken=t:(this._userIdToken=t,this._userAuthData=null),!0},n)},error:function(t){i.error(t)}})},n)},addKeyRequestData:function(t){return this._keyRequestData[t.uniqueKey()]=t,this},removeKeyRequestData:function(t){return delete this._keyRequestData[t.uniqueKey()],this},addServiceToken:function(t){var e=this._keyExchangeData&&!this._ctx.isPeerToPeer()?this._keyExchangeData.keyResponseData.masterToken:this._masterToken;if(t.isMasterTokenBound()&&!t.isBoundTo(e))throw new C(er.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; mt "+JSON.stringify(e)).setEntity(e);if(t.isUserIdTokenBound()&&!t.isBoundTo(this._userIdToken))throw new C(er.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; uit "+JSON.stringify(this._userIdToken)).setEntity(e).setUser(this._userIdToken);return this.excludeServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._serviceTokens.push(t),this},addServiceTokenIfAbsent:function(t){for(var e,i=this._serviceTokens.length-1;0<=i;--i)if((e=this._serviceTokens[i]).name==t.name&&e.isMasterTokenBound()==t.isMasterTokenBound()&&e.isUserIdTokenBound()==t.isUserIdTokenBound())return this;return this.addServiceToken(t),this},excludeServiceToken:function(){for(var t,e,i,n=1==arguments.length?(t=(n=arguments[0]).name,e=n.isMasterTokenBound(),n.isUserIdTokenBound()):(arguments.length=3,t=arguments[0],e=arguments[1],arguments[2]),r=this._serviceTokens.length-1;0<=r;--r)(i=this._serviceTokens[r]).name==t&&i.isMasterTokenBound()==e&&i.isUserIdTokenBound()==n&&this._serviceTokens.splice(r,1);return this},deleteServiceToken:function(){var t,i,n=2==arguments.length?(i=(t=arguments[0]).name,t.isMasterTokenBound(),t.isUserIdTokenBound(),arguments[1]):(arguments.length=4,i=arguments[0],arguments[3]),r=this;$n(n,function(){var t=originalToken.isMasterTokenBound()?this._masterToken:null,e=originalToken.isUserIdTokenBound()?this._userIdToken:null;qe(this._ctx,i,mn,t,e,!1,null,new lt,{result:function(t){$n(n,function(){return this.addServiceToken(t)},r)},error:function(t){t instanceof P&&(t=new j("Failed to create and add empty service token to message.",t)),n.error(t)}})},r)},getServiceTokens:function(){var t=[];return t.push.apply(t,this._serviceTokens),t},getPeerMasterToken:function(){return this._peerMasterToken},getPeerUserIdToken:function(){return this._peerUserIdToken},setPeerAuthTokens:function(t,e){var i,n;if(!this._ctx.isPeerToPeer())throw new j("Cannot set peer master token or peer user ID token when not in peer-to-peer mode.");if(e&&!t)throw new j("Peer master token cannot be null when setting peer user ID token.");if(e&&!e.isBoundTo(t))throw new C(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit "+e+"; mt "+t).setEntity(t).setUser(e);try{i=this._ctx.getMslStore().getServiceTokens(t,e)}catch(t){if(t instanceof P)throw new j("Invalid peer master token and user ID token combination despite proper check.",t);throw t}for(var r=this._peerServiceTokens.length-1;0<=r;--r)((n=this._peerServiceTokens[r]).isUserIdTokenBound()&&!n.isBoundTo(e)||n.isMasterTokenBound()&&!n.isBoundTo(t))&&this._peerServiceTokens.slice(r,1);return i.forEach(function(t){this.excludePeerServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._peerServiceTokens.push(t)},this),this._peerUserIdToken=e,this._peerMasterToken=t,this},addPeerServiceToken:function(t){if(!this._ctx.isPeerToPeer())throw new j("Cannot set peer service tokens when not in peer-to-peer mode.");if(t.isMasterTokenBound()&&!t.isBoundTo(this._peerMasterToken))throw new C(er.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; mt "+JSON.stringify(this._peerMasterToken)).setEntity(this._peerMasterToken);if(t.isUserIdTokenBound()&&!t.isBoundTo(this._peerUserIdToken))throw new C(er.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st "+JSON.stringify(t)+"; uit "+JSON.stringify(this._peerUserIdToken)).setEntity(this._peerMasterToken).setUser(this._peerUserIdToken);return this.excludePeerServiceToken(t.name,t.isMasterTokenBound(),t.isUserIdTokenBound()),this._peerServiceTokens.push(t),this},addPeerServiceTokenIfAbsent:function(t){for(var e,i=this._peerServiceTokens.length-1;0<=i;--i)if((e=this._peerServiceTokens[i]).name==t.name&&e.isMasterTokenBound()==t.isMasterTokenBound()&&e.isUserIdTokenBound()==t.isUserIdTokenBound())return this;return this.addPeerServiceToken(t),this},excludePeerServiceToken:function(){for(var t,e,i,n=1==arguments.length?(t=(n=arguments[0]).name,e=n.isMasterTokenBound(),n.isUserIdTokenBound()):(arguments.length=3,t=arguments[0],e=arguments[1],arguments[2]),r=this._peerServiceTokens.length-1;0<=r;--r)(i=this._peerServiceTokens[r]).name==t&&i.isMasterTokenBound()==e&&i.isUserIdTokenBound()==n&&this._peerServiceTokens.splice(r,1);return this},deletePeerServiceToken:function(){var t,e,i,n,r=2==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),n=t.isUserIdTokenBound(),arguments[1]):(arguments.length=4,e=arguments[0],i=arguments[1],n=arguments[2],arguments[3]),a=this;$n(r,function(){qe(this._ctx,e,mn,i?this._peerMasterToken:null,n?this._peerUserIdToken:null,!1,null,new lt,{result:function(t){$n(r,function(){return this.addPeerServiceToken(t)},a)},error:function(t){t instanceof P&&(t=new j("Failed to create and add empty peer service token to message.",t)),r.error(t)}})},a)},getPeerServiceTokens:function(){var t=[];return t.push.apply(t,this._peerServiceTokens),t}}),Oe=u.Class.create({init:function(t,e,i){t={ctx:{value:t,writable:!1,enumerable:!1,configurable:!1},cryptoContexts:{value:e.getCryptoContexts(),writable:!1,enumerable:!1,configurable:!1},builder:{value:i,writable:!1,enumerable:!1,configurable:!1}},Object.defineProperties(this,t)},isPrimaryMasterTokenAvailable:function(){return!!Qr(this)},isPrimaryUserIdTokenAvailable:function(){return!!this.builder.getUserIdToken()},isPeerMasterTokenAvailable:function(){return!!this.builder.getPeerMasterToken()},isPeerUserIdTokenAvailable:function(){return!!this.builder.getPeerUserIdToken()},getPrimaryServiceTokens:function(){return this.builder.getServiceTokens()},getPeerServiceTokens:function(){return this.builder.getPeerServiceTokens()},addPrimaryServiceToken:function(t){try{return this.builder.addServiceToken(t),!0}catch(t){if(t instanceof C)return!1;throw t}},addPeerServiceToken:function(t){try{return this.builder.addPeerServiceToken(t),!0}catch(t){if(t instanceof C)return!1;throw t}},addUnboundPrimaryServiceToken:function(e,i,n,r,a){var o=this;$n(a,function(){var t=Xr(e,this.cryptoContexts);if(!t)return!1;qe(this.ctx,e,i,null,null,n,r,t,{result:function(t){$n(a,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite being unbound.",t);throw t}return!0},o)},error:function(t){a.error(t)}})},o)},addUnboundPeerServiceToken:function(e,i,n,r,a){var o=this;$n(a,function(){var t=Xr(e,this.cryptoContexts);if(!t)return!1;qe(this.ctx,e,i,null,null,n,r,t,{result:function(t){$n(a,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite being unbound.",t);throw t}return!0},o)},error:function(t){a.error(t)}})},o)},addMasterBoundPrimaryServiceToken:function(i,n,r,a,o){var s=this;$n(o,function(){var t,e=Qr(this);return!!e&&(!!(t=Xr(i,this.cryptoContexts))&&void qe(this.ctx,i,n,e,null,r,a,t,{result:function(t){$n(o,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite setting correct master token.",t);throw t}return!0},s)},error:function(t){o.error(t)}}))},s)},addMasterBoundPeerServiceToken:function(i,n,r,a,o){var s=this;$n(o,function(){var t,e=this.builder.getPeerMasterToken();return!!e&&(!!(t=Xr(i,this.cryptoContexts))&&void qe(this.ctx,i,n,e,null,r,a,t,{result:function(t){$n(o,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite setting correct master token.",t);throw t}return!0},s)},error:function(t){o.error(t)}}))},s)},addUserBoundPrimaryServiceToken:function(n,r,a,o,s){var u=this;$n(s,function(){var t,e,i=Qr(this);return!!i&&(!!(t=this.builder.getUserIdToken())&&(!!(e=Xr(n,this.cryptoContexts))&&void qe(this.ctx,n,r,i,t,a,o,e,{result:function(t){$n(s,function(){try{this.builder.addServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",t);throw t}return!0},u)},error:function(t){s.error(t)}})))},u)},addUserBoundPeerServiceToken:function(n,r,a,o,s){var u=this;$n(s,function(){var t,e,i=this.builder.getPeerMasterToken();return!!i&&(!!(t=this.builder.getPeerUserIdToken())&&(!!(e=Xr(n,this.cryptoContexts))&&void qe(this.ctx,n,r,i,t,a,o,e,{result:function(t){$n(s,function(){try{this.builder.addPeerServiceToken(t)}catch(t){if(t instanceof C)throw new j("Service token bound to incorrect authentication tokens despite setting correct master token and user ID token.",t);throw t}return!0},u)},error:function(t){s.error(t)}})))},u)},excludePrimaryServiceToken:function(){for(var t,e,i,n=1==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),t.isUserIdTokenBound()):(arguments.length=3,e=arguments[0],i=arguments[1],arguments[2]),r=this.builder.getServiceTokens(),a=0;a<r.length;++a)if((t=r[a]).name==e&&t.isMasterTokenBound()==i&&t.isUserIdTokenBound()==n)return this.builder.excludeServiceToken(e,i,n),!0;return!1},excludePeerServiceToken:function(){for(var t,e,i,n=1==arguments.length?(e=(t=arguments[0]).name,i=t.isMasterTokenBound(),t.isUserIdTokenBound()):(arguments.length=3,e=arguments[0],i=arguments[1],arguments[2]),r=this.builder.getPeerServiceTokens(),a=0;a<r.length;++a)if((t=r[a]).name==e&&t.isMasterTokenBound()==i&&t.isUserIdTokenBound()==n)return this.builder.excludePeerServiceToken(e,i,n),!0;return!1},deletePrimaryServiceToken:function(){var t,n,r,a,o;2==arguments.length?(n=(t=arguments[0]).name,r=t.isMasterTokenBound(),a=t.isUserIdTokenBound(),o=arguments[1]):4==arguments.length&&(n=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3]),$n(o,function(){for(var t,e=this.builder.getServiceTokens(),i=0;i<e.length;++i)if((t=e[i]).name==n&&t.isMasterTokenBound()==r&&t.isUserIdTokenBound()==a)return void this.builder.deleteServiceToken(n,r,a,{result:function(){o.result(!0)},error:function(t){o.error(t)}});return!1},this)},deletePeerServiceToken:function(){var t,n,r,a,o;2==arguments.length?(n=(t=arguments[0]).name,r=t.isMasterTokenBound(),a=t.isUserIdTokenBound(),o=arguments[1]):4==arguments.length&&(n=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3]),$n(o,function(){for(var t,e=this.builder.getPeerServiceTokens(),i=0;i<e.length;++i)if((t=e[i]).name==n&&t.isMasterTokenBound()==r&&t.isUserIdTokenBound()==a)return void this.builder.deletePeerServiceToken(n,r,a,{result:function(){o.result(!0)},error:function(t){o.error(t)}});return!1},this)}}),Ie=wn.extend({init:function(s,e,i,u,c,h,t){var f=this;tr(t,function(){var t;function a(){f._ready=!0,f._readyQueue.add(!0)}function n(e,i){var n;try{n=i.masterToken,e.getTokenFactory().isMasterTokenRevoked(e,n,{result:function(t){t?(f._errored=new S(t,n).setUser(i.userIdToken).setUser(i.userAuthenticationData).setMessageId(i.messageId),a()):function(e,i){var n,r;try{n=i.masterToken,(r=i.userIdToken)?e.getTokenFactory().isUserIdTokenRevoked(e,n,r,{result:function(t){t?(f._errored=new MslUserIdTokenException(t,r).setEntity(n).setUser(r).setMessageId(i.messageId),a()):o(e,i)},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}):o(e,i)}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}(e,i)},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}})}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}function o(e,i){var n;try{(n=i.masterToken).isExpired()?i.isRenewable()&&0!=i.keyRequestData.length?e.getTokenFactory().isMasterTokenRenewable(e,n,{result:function(t){t?(f._errored=new C(t,"Master token is expired and not renewable.").setEntity(n).setUser(i.userIdToken).setUser(i.userAuthenticationData).setMessageId(i.messageId),a()):r(e,i)},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}):(f._errored=new C(er.MESSAGE_EXPIRED,JSON.stringify(i)).setEntity(n).setUser(i.userIdToken).setUser(i.userAuthenticationData).setMessageId(i.messageId),a()):r(e,i)}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}function r(t,e){var i,n;try{i=e.masterToken,"number"==typeof(n=e.nonReplayableId)?i?t.getTokenFactory().acceptNonReplayableId(t,i,n,{result:function(t){t||(f._errored=new C(er.MESSAGE_REPLAYED,JSON.stringify(e)).setEntity(i).setUser(e.userIdToken).setUser(e.userAuthenticationData).setMessageId(e.messageId)),a()},error:function(t){t instanceof P&&(t.setEntity(i),t.setUser(e.userIdToken),t.setUser(e.userAuthenticationData),t.setMessageId(e.messageId)),f._errored=t,a()}}):(f._errored=new C(er.INCOMPLETE_NONREPLAYABLE_MESSAGE,JSON.stringify(e)).setEntity(e.entityAuthenticationData).setUser(e.userIdToken).setUser(e.userAuthenticationData).setMessageId(e.messageId),a()):a()}catch(t){t instanceof P&&(t.setEntity(e.masterToken),t.setEntity(e.entityAuthenticationData),t.setUser(e.userIdToken),t.setUser(e.userAuthenticationData),t.setMessageId(e.messageId)),f._errored=t,a()}}return t={_source:{value:e,writable:!1,enumerable:!1,configurable:!1},_parser:{value:A,writable:!0,enumerable:!1,configurable:!1},_charset:{value:i,writable:!1,enumerable:!1,configurable:!1},_remainingData:{value:"",writable:!0,enumerable:!1,configurable:!1},_timeout:{value:h,writable:!1,enumerable:!1,configurable:!1},_header:{value:A,writable:!0,enumerable:!1,configurable:!1},_cryptoContext:{value:A,writable:!0,enumerable:!1,configurable:!1},_keyxCryptoContext:{value:A,writable:!0,enumerable:!1,configurable:!1},_payloadSequenceNumber:{value:1,writable:!0,enuemrable:!1,configurable:!1},_eom:{value:!1,writable:!0,enumerable:!1,configurable:!1},_closeSource:{value:!1,writable:!0,enumerable:!1,configurable:!1},_payloads:{value:[],writable:!0,enumerable:!1,configurable:!1},_payloadIndex:{value:-1,writable:!0,enumerable:!1,configurable:!1},_payloadOffset:{value:0,writable:!0,enuemrable:!1,configurable:!1},_markOffset:{value:0,writable:!0,enumerable:!1,configurable:!1},_currentPayload:{value:null,writable:!0,enumerable:!1,configurable:!1},_readException:{value:null,writable:!0,enumerable:!1,configurable:!1},_ready:{value:!1,writable:!0,enumerable:!1,configurable:!1},_readyQueue:{value:new d,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1},_errored:{value:null,writable:!0,enumerable:!1,configurable:!1}},Object.defineProperties(this,t),Ft(f._source,h,{result:function(t){f._json=t,f._jsonIndex=0,null===f._json?(f._errored=new N(er.MESSAGE_DATA_MISSING),a()):re(s,f._json[f._jsonIndex++],c,{result:function(t){var i;f._header=t,f._header instanceof se?(f._keyxCryptoContext=null,f._cryptoContext=null,a()):(i=f._header,Zr(s,i,u,{result:function(t){var e;try{f._keyxCryptoContext=t,s.isPeerToPeer()||!f._keyxCryptoContext?f._cryptoContext=i.cryptoContext:f._cryptoContext=f._keyxCryptoContext;try{((e=i.masterToken)&&(s.isPeerToPeer()||e.isVerified())?n:r)(s,i)}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}catch(t){t instanceof P&&(t.setEntity(i.masterToken),t.setEntity(i.entityAuthenticationData),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}},error:function(t){t instanceof P&&(t.setEntity(i.masterToken),t.setEntity(i.entityAuthenticationData),t.setUser(i.userIdToken),t.setUser(i.userAuthenticationData),t.setMessageId(i.messageId)),f._errored=t,a()}}))},error:function(t){f._errored=t,a()}})},timeout:function(){f._timedout=!0,a()},error:function(t){f._errored=t,a()}}),this},f)},nextData:function(t,e){var n=this;tr(e,function(){var a;if(!(a=this.getMessageHeader()))throw new j("Read attempted with error message.");return-1!=this._payloadIndex&&this._payloadIndex<this._payloads.length?this._payloads[this._payloadIndex++]:this._eom?null:void function e(i){tr(i,function(){return this._jsonIndex<this._json.length?this._json[this._jsonIndex++]:void Ft(this._source,this._timeout,{result:function(t){t&&t.length&&0<t.length?(t.forEach(function(t){this._json.push(t)}),e(i)):(this._eom=!0,i.result(null))},timeout:function(){i.timeout()},error:function(t){i.error(t)}})},n)}({result:function(t){tr(e,function(){if(!t)return null;if("object"!=typeof t)throw new N(er.MESSAGE_FORMAT_ERROR);we(t,this._cryptoContext,{result:function(r){tr(e,function(){var t=a.masterToken,e=a.entityAuthenticationData,i=a.userIdToken,n=a.getUserAuthenticationData;if(r.messageId!=a.messageId)throw new C(er.PAYLOAD_MESSAGE_ID_MISMATCH,"payload mid "+r.messageId+" header mid "+a.messageId).setEntity(t).setEntity(e).setUser(i).setUser(n);if(r.sequenceNumber!=this._payloadSequenceNumber)throw new C(er.PAYLOAD_SEQUENCE_NUMBER_MISMATCH,"payload seqno "+r.sequenceNumber+" expected seqno "+this._payloadSequenceNumber).setEntity(t).setEntity(e).setUser(i).setUser(n);return++this._payloadSequenceNumber,r.isEndOfMessage()&&(this._eom=!0),t=r.data,this._payloads.push(t),this._payloadIndex=-1,t},n)},error:function(t){t instanceof SyntaxError&&(t=new N(er.JSON_PARSE_ERROR,"payloadchunk",t)),e.error(t)}})},n)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})},n)},isReady:function(t,e){var i;function n(){tr(e,function(){if(this._aborted)return!1;if(!this._timedout){if(this._errored)throw this._errored;return!0}e.timeout()},i)}tr(e,function(){this._ready?n():this._readyQueue.poll(t,{result:function(t){tr(e,function(){return t!==A&&void n()},i)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})},i=this)},getMessageHeader:function(){return this._header instanceof pe?this._header:null},getErrorHeader:function(){return this._header instanceof se?this._header:null},getIdentity:function(){var t,e=this.getMessageHeader();return e?(t=e.masterToken)?t.identity:e.entityAuthenticationData.getIdentity():this.getErrorHeader().entityAuthenticationData.getIdentity()},getCustomer:function(){var t=this.getMessageHeader();return t?t.customer:null},getPayloadCryptoContext:function(){return this._cryptoContext},getKeyExchangeCryptoContext:function(){return this._keyxCryptoContext},closeSource:function(t){this._closeSource=t},abort:function(){this._aborted=!0,this._source.abort(),this._readyQueue.cancelAll()},close:function(){this._closeSource&&this._source.close()},mark:function(){if(this._currentPayload){for(;0<this._payloads.length&&this._payloads[0]!==this._currentPayload;)this._payloads.shift();this._payloadIndex=0,this._currentPayload=this._payloads[this._payloadIndex++],this._markOffset=this._payloadOffset}else this._payloadIndex=-1,this._payloads=[]},markSupported:function(){return!0},read:function(c,h,e){var f;function i(){tr(e,function(){var t,o,s,u;if(this._aborted)return new Uint8Array(0);if(this._timedout)e.timeout(new Uint8Array(0));else{if(this._errored)throw this._errored;if(null!=this._readException)throw t=this._readException,this._readException=null,t;o=-1!=c?new Uint8Array(c):A,u=s=0,function r(a){tr(a,function(){var t,e,i;if(o&&u>=o.length)return o.subarray(0,u);if(t=-1,this._currentPayload){if(e=this._currentPayload.length-this._payloadOffset,!o){if(i=e,-1!=this._payloadIndex)for(var n=this._payloadIndex;n<this._payloads.length;++n)i+=this._payloads[n].length;0<i&&(o=new Uint8Array(i))}0<(e=Math.min(e,o?o.length-u:0))&&(t=this._currentPayload.subarray(this._payloadOffset,this._payloadOffset+e),o.set(t,s),s+=t=e,this._payloadOffset+=e)}-1!=t?(u+=t,r(a)):this.nextData(h,{result:function(t){tr(a,function(){return this._aborted?o?o.subarray(0,u):new Uint8Array(0):(this._currentPayload=t,this._payloadOffset=0,this._currentPayload?void r(a):0==u&&0!=c?null:o?o.subarray(0,u):new Uint8Array(0))},f)},timeout:function(){a.timeout(o?o.subarray(0,u):new Uint8Array(0))},error:function(t){tr(a,function(){if(t instanceof P&&(t=new _("Error reading the payload chunk.",t)),0<u)return f._readException=t,o.subarray(0,u);throw t},f)}})},f)}(e)}},f)}tr(e,function(){if(c<-1)throw new RangeError("read requested with illegal length "+c);this._ready?i():this._readyQueue.poll(h,{result:function(t){t===A?e.result(!1):i()},timeout:function(){e.timeout(new Uint8Array(0))},error:function(t){e.error(t)}})},f=this)},reset:function(){(this._payloadIndex=0)<this._payloads.length?(this._currentPayload=this._payloads[this._payloadIndex++],this._payloadOffset=this._markOffset):this._currentPayload=null}}),xe=function(t,e,i,n,r,a,o){new Ie(t,e,i,n,r,a,o)},Pe=pi.extend({init:function(r,a,o,s,u,c,t){var h=this;tr(t,function(){var t,e,i;function n(){h._ready=!0,h._readyQueue.add(!0)}return e=null,(t=le(r.getMessageCapabilities(),s.messageCapabilities))&&(e=f(t.compressionAlgorithms)),t={_destination:{value:a,writable:!1,enumerable:!1,configurable:!1},_charset:{value:o,writable:!1,enumerable:!1,configurable:!1},_capabilities:{value:t,writable:!1,enumerable:!1,configurable:!1},_header:{value:s,writable:!1,enumerable:!1,configurable:!1},_compressionAlgo:{value:e,writable:!0,enumerable:!1,configurable:!1},_cryptoContext:{value:u,writable:!1,enumerable:!1,configurable:!1},_payloadSequenceNumber:{value:1,writable:!0,enumerable:!1,configurable:!1},_currentPayload:{value:[],writable:!0,enumerable:!1,configurable:!1},_closed:{value:!1,writable:!0,enumerable:!1,configurable:!1},_payloads:{value:[],writable:!1,enumerable:!1,configurable:!1},_ready:{value:!1,writable:!0,enumerable:!1,configurable:!1},_readyQueue:{value:new d,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_timedout:{value:!1,writable:!0,enumerable:!1,configurable:!1},_errored:{value:null,writable:!0,enumerable:!1,configurable:!1}},Object.defineProperties(this,t),i=Jn(JSON.stringify(s),o),a.write(i,0,i.length,c,{result:function(t){try{h._aborted?n():t<i.length?(h._timedout=!0,n()):a.flush(c,{result:function(t){h._aborted||(h._timedout=!t),n()},timeout:function(){h._timedout=!0,n()},error:function(t){h._errored=t,n()}})}catch(t){h._errored=t,n()}},timeout:function(){h._timedout=!0,n()},error:function(t){h._errored=t,n()}}),this},h)},setCompressionAlgorithm:function(i,t,e){var n;function r(){n.flush(t,{result:function(t){tr(e,function(){if(!t)throw new _("flush() aborted");return this._compressionAlgo=i,!0},n)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})}tr(e,function(){if(!this.getMessageHeader())throw new j("Cannot write payload data for an error message.");if(this._compressionAlgo==i)return!0;if(i){if(!this._capabilities)return!1;for(var t=this._capabilities.compressionAlgorithms,e=0;e<t.length;++e)if(t[e]==i)return void r();return!1}r()},n=this)},getMessageHeader:function(){return this._header instanceof pe?this._header:null},getErrorMessage:function(){return this._header instanceof se?this._header:null},getPayloads:function(){return this._payloads},abort:function(){this._aborted=!0,this._destination.abort(),this._readyQueue.cancelAll()},close:function(t,e){var i=this;tr(e,function(){if(this._aborted)return!1;if(this._timedout)e.timeout();else{if(this._errored)throw this._errored;if(this._closed)return!0;this._closed=!0,this.flush(t,{result:function(t){tr(e,function(){return t&&(this._currentPayload=null),t},i)},timeout:function(){e.timeout()},error:function(t){e.error(t)}})}},i)},flush:function(o,s){var u;function e(){tr(s,function(){var t,e,i;if(this._aborted)return!1;if(this._timedout)s.timeout();else{if(this._errored)throw this._errored;if(!this._currentPayload||!this._closed&&0==this._currentPayload.length)return!0;if(!(t=this.getMessageHeader()))return!0;e=0,this._currentPayload&&this._currentPayload.forEach(function(t){e+=t.length});for(var n=new Uint8Array(e),r=0,a=0;this._currentPayload&&a<this._currentPayload.length;++a)i=this._currentPayload[a],n.set(i,r),r+=i.length;ye(this._payloadSequenceNumber,t.messageId,this._closed,this._compressionAlgo,n,this._cryptoContext,{result:function(e){tr(s,function(){var t;this._payloads.push(e),t=Jn(JSON.stringify(e),this._charset),this._destination.write(t,0,t.length,o,{result:function(t){tr(s,function(){return!this._aborted&&void(t<e.length?s.timeout():this._destination.flush(o,{result:function(t){tr(s,function(){return!this._aborted&&(t?(++this._payloadSequenceNumber,this._currentPayload=this._closed?null:[],!0):void s.timeout())},u)},timeout:function(){s.timeout()},error:function(t){t instanceof P&&(t=new _("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}}))},u)},timeout:function(t){s.timeout()},error:function(t){t instanceof P&&(t=new _("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}})},u)},error:function(t){t instanceof P&&(t=new _("Error encoding payload chunk [sequence number "+u._payloadSequenceNumber+"].",t)),s.error(t)}})}},u)}tr(s,function(){this._ready?e():this._readyQueue.poll(o,{result:function(t){t===A?s.result(!1):e()},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u=this)},write:function(e,i,n,t,r){tr(r,function(){var t;if(this._aborted)return!1;if(!this._timedout){if(this._errored)throw this._errored;if(this._closed)throw new _("Message output stream already closed.");if(i<0)throw new RangeError("Offset cannot be negative.");if(n<0)throw new RangeError("Length cannot be negative.");if(i+n>e.length)throw new RangeError("Offset plus length cannot be greater than the array length.");if(!this.getMessageHeader())throw new j("Cannot write payload data for an error message.");return t=e.subarray(i,i+n),this._currentPayload.push(t),t.length}r.timeout()},this)}}),Re=function(t,e,i,n,r,a,o){new Pe(t,e,i,n,r,a,o)},Ne=u.Class.create({sentHeader:function(t){},receivedHeader:function(t){}}),Object.freeze({USERDATA_REAUTH:v.USERDATA_REAUTH,SSOTOKEN_REJECTED:v.SSOTOKEN_REJECTED}),en=u.Class.create({getCryptoContexts:function(){},getRecipient:function(){},isEncrypted:function(){},isIntegrityProtected:function(){},isNonReplayable:function(){},isRequestingTokens:function(){},getUserId:function(){},getUserAuthData:function(t,e,i,n){},getCustomer:function(){},getKeyRequestData:function(t){},updateServiceTokens:function(t,e,i){},write:function(t,e,i){},getDebugContext:function(){}}),u.Class.create({getInputStream:function(t){},getOutputStream:function(t){}}),vn=pi.extend({close:function(t,e){e.result(!0)},write:function(t,e,i,n,r){$n(r,function(){return Math.min(t.length-e,i)})},flush:function(t,e){e.result(!0)}}),yn=Rn.extend({getUserMessage:function(t,e){return null}}),wn=en.extend({init:function(t){Object.defineProperties(this,{_appCtx:{value:t,writable:!1,enumerable:!1,configurable:!1}})},getCryptoContexts:function(){return this._appCtx.getCryptoContexts()},isEncrypted:function(){return this._appCtx.isEncrypted()},isIntegrityProtected:function(){return this._appCtx.isIntegrityProtected()},isNonReplayable:function(){return this._appCtx.isNonReplayable()},isRequestingTokens:function(){return this._appCtx.isRequestingTokens()},getUserId:function(){return this._appCtx.getUserId()},getUserAuthData:function(t,e,i,n){this._appCtx.getUserAuthData(t,e,i,n)},getCustomer:function(){return this._appCtx.getCustomer()},getKeyRequestData:function(t){this._appCtx.getKeyRequestData(t)},updateServiceTokens:function(t,e,i){this._appCtx.updateServiceTokens(t,e,i)},write:function(t,e,i){this._appCtx.write(t,e,i)},getDebugContext:function(){return this._appCtx.getDebugContext()}}),_n=wn.extend({init:function t(e,i){t.base.call(this,i),Object.defineProperties(this,{_payloads:{value:e,writable:!1,enumerable:!1,configurable:!1}})},write:function(a,o,s){var u;u=this,function e(i,n){var r;i==u._payloads.length?s.result(!0):(r=u._payloads[i],a.setCompressionAlgorithm(r.compressionAlgo,o,{result:function(t){a.write(r.data,0,r.data.length,o,{result:function(t){tr(s,function(){r.isEndOfMessage()?e(i+1,n):a.flush(o,{result:function(t){s.result(t)},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u)},timeout:function(t){s.timeout(t)},error:function(t){s.error(t)}})},timeout:function(){},error:function(t){s.error(t)}}))}(0)}}),En=wn.extend({init:function t(e){t.base.call(this,e)},isEncrypted:function(){return!1},isNonReplayable:function(){return!1},write:function(t,e,i){i.result(!0)}}),kn={},Sn=u.Class.create({init:function(t){t=t||new yn,Object.defineProperties(this,{_filterFactory:{value:null,writable:!0,enumerable:!1,configurable:!1},_renewingContexts:{value:[],writable:!1,enumerable:!1,configurable:!1},_masterTokenLocks:{value:{},writable:!1,enumerable:!1,configurable:!1},_messageRegistry:{value:t,writable:!1,enumerable:!1,configurable:!1}})},setFilterFactory:function(t){this._filterFactory=t},getNewestMasterToken:function(o,s,u,c){var h=this;tr(c,function(){var i,n,t,r=s.getMslStore(),a=r.getMasterToken();if(!a)return null;i=a.uniqueKey(),(n=this._masterTokenLocks[i])||(n=new b,this._masterTokenLocks[i]=n),t=n.readLock(u,{result:function(e){tr(c,function(){var t;if(e===A)throw new E("getNewestMasterToken aborted.");if(t=r.getMasterToken(),a.equals(t))return new ta(a,e);n.unlock(e),n.writeLock(u,{result:function(t){tr(c,function(){if(t===A)throw new E("getNewestMasterToken aborted.");return delete this._masterTokenLocks[i],n.unlock(t),this.getNewestMasterToken(o,s,u,c)},h)},timeout:function(){c.timeout()},error:function(t){c.error(t)}})},h)},timeout:function(){c.timeout()},error:function(t){c.error(t)}}),o.setAbort(function(){t&&(n.cancel(t),t=A)})},h)},deleteMasterToken:function(n,r){var a;r&&(a=this,setTimeout(function(){var e=r.uniqueKey(),i=a._masterTokenLocks[e];i||(i=new b,a._masterTokenLocks[e]=i),i.writeLock(-1,{result:function(t){n.getMslStore().removeCryptoContext(r),delete a._masterTokenLocks[e],i.unlock(t)},timeout:function(){throw new j("Unexpected timeout received.")},error:function(t){throw t}})},0))},releaseMasterToken:function(t){var e;if(t&&t.masterToken){if(e=t.masterToken.uniqueKey(),!(e=this._masterTokenLocks[e]))throw new j("Master token read/write lock does not exist when it should.");e.unlock(t.ticket)}},updateOutgoingCryptoContexts:function(t,e,i){var n=t.getMslStore();!t.isPeerToPeer()&&i&&(n.setCryptoContext(i.keyResponseData.masterToken,i.cryptoContext),this.deleteMasterToken(t,e.masterToken))},updateIncomingCryptoContexts:function(t,e,i){var n,r=i.getMessageHeader();r&&(n=t.getMslStore(),(r=r.keyResponseData)&&(n.setCryptoContext(r.masterToken,i.getKeyExchangeCryptoContext()),this.deleteMasterToken(t,e.masterToken)))},storeServiceTokens:function(t,e,i,n){var r,a;t=t.getMslStore();for(var o=[],s=0;s<n.length;++s)(r=n[s]).isBoundTo(e)&&e.isVerified()||((a=r.data)&&0==a.length?t.removeServiceTokens(r.name,r.isMasterTokenBound()?e:null,r.isUserIdTokenBound()?i:null):o.push(r));0<o.length&&t.addServiceTokens(o)},buildRequest:function(t,r,a,e,o){var s=this;this.getNewestMasterToken(t,r,e,{result:function(n){$n(o,function(){var t,e=n&&n.masterToken,i=e?(i=a.getUserId(),t=r.getMslStore(),(i=i?t.getUserIdToken(i):null)&&i.isBoundTo(e)?i:null):null;Se(r,e,i,null,{result:function(t){$n(o,function(){return t.setNonReplayable(a.isNonReplayable()),{builder:t,tokenTicket:n}})},error:function(t){$n(o,function(){throw this.releaseMasterToken(n),t instanceof P&&(t=new j("User ID token not bound to master token despite internal check.",t)),t},s)}})},s)},timeout:function(){o.timeout()},error:function(t){o.error(t)}})},buildResponse:function(t,a,o,e,i,s){var u=this;Te(a,e,{result:function(r){tr(s,function(){return r.setNonReplayable(o.isNonReplayable()),a.isPeerToPeer()||e.keyResponseData?void this.getNewestMasterToken(t,a,i,{result:function(n){tr(s,function(){var t,e=n&&n.masterToken,i=e?(i=o.getUserId(),t=a.getMslStore(),(i=i?t.getUserIdToken(i):null)&&i.isBoundTo(e)?i:null):null;return r.setAuthTokens(e,i),{builder:r,tokenTicket:n}},u)},timeout:function(){s.timeout()},error:function(t){s.error(t)}}):{builder:r,tokenTicket:null}},u)},error:function(t){s.error(t)}})},buildErrorResponse:function(i,s,u,n,c,h,f){var l;function r(r,a){l.getNewestMasterToken(i,s,h,{result:function(n){tr(f,function(){var t=n&&n.masterToken,e=Ee(c.messageId),i=new _n(a,u);Se(s,t,null,e,{result:function(t){tr(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(r.peerMasterToken,r.peerUserIdToken),t.setNonReplayable(i.isNonReplayable()),{errorResult:new ea(t,i),tokenTicket:n}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}})}tr(f,function(){var e,a=n.requestHeader,o=n.payloads,t=c.errorCode;switch(t){case v.ENTITYDATA_REAUTH:case v.ENTITY_REAUTH:s.getEntityAuthenticationData(t,{result:function(t){tr(f,function(){return t?(i=a,n=o,void tr(f,function(){var t=Ee(c.messageId),e=new _n(n,u);Se(s,null,null,t,{result:function(t){tr(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(i.peerMasterToken,i.peerUserIdToken),t.setNonReplayable(e.isNonReplayable()),{errorResult:new ea(t,e),tokenTicket:null}},l)},error:function(t){f.error(t)}})},l)):null;var i,n},l)},error:function(t){f.error(t)}});break;case v.USERDATA_REAUTH:case v.SSOTOKEN_REJECTED:u.getUserAuthData(t,!1,!0,{result:function(t){tr(f,function(){return t?void r(a,o):null},l)},error:function(t){f.error(t)}});break;case v.USER_REAUTH:r(a,o);break;case v.KEYX_REQUIRED:t=Ee(c.messageId),e=new _n(o,u),Se(s,null,null,t,{result:function(t){tr(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),t.setRenewable(!0),t.setNonReplayable(e.isNonReplayable()),{errorResult:new ea(t,e),tokenTicket:null}},l)},error:function(t){f.error(t)}});break;case v.EXPIRED:this.getNewestMasterToken(i,s,h,{result:function(r){tr(f,function(){var e=r&&r.masterToken,t=a.userIdToken,i=Ee(c.messageId),n=new _n(o,u);Se(s,e,t,i,{result:function(t){tr(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),a.masterToken.equals(e)&&t.setRenewable(!0),t.setNonReplayable(n.isNonReplayable()),{errorResult:new ea(t,n),tokenTicket:r}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}});break;case v.REPLAYED:this.getNewestMasterToken(i,s,h,{result:function(r){tr(f,function(){var e=r&&r.masterToken,t=a.userIdToken,i=Ee(c.messageId),n=new _n(o,u);Se(s,e,t,i,{result:function(t){tr(f,function(){return s.isPeerToPeer()&&t.setPeerAuthTokens(a.peerMasterToken,a.peerUserIdToken),a.masterToken.equals(e)?(t.setRenewable(!0),t.setNonReplayable(!1)):t.setNonReplayable(n.isNonReplayable()),{errorResult:new ea(t,n),tokenTicket:r}},l)},error:function(t){f.error(t)}})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}});break;default:return null}},l=this)},cleanupContext:function(t,e,i){switch(i.errorCode){case v.ENTITY_REAUTH:this.deleteMasterToken(t,e.masterToken);break;case v.USER_REAUTH:i=e.userIdToken,e.masterToken&&i&&t.getMslStore().removeUserIdToken(i)}},send:function(u,c,h,r,f,l,p){var d;function a(e,i,n){tr(p,function(){var t=f.getPeerUserIdToken();(!c.isPeerToPeer()&&!i||c.isPeerToPeer()&&!t)&&(t=h.getCustomer())?f.setCustomer(t,{result:function(t){tr(p,function(){i=f.getUserIdToken(),o(e,i,n)},d)},error:function(t){p.error(t)}}):o(e,i,n)},d)}function o(a,o,t){tr(p,function(){var n,r=!t&&(!h.isEncrypted()||f.willEncryptPayloads())&&(!h.isIntegrityProtected()||f.willIntegrityProtectPayloads())&&(!h.isNonReplayable()||f.isNonReplayable()&&a);r||f.setNonReplayable(!1),n=[],f.isRenewable()&&(!a||a.isRenewable()||h.isNonReplayable())?h.getKeyRequestData({result:function(i){tr(p,function(){for(var t,e=0;e<i.length;++e)t=i[e],n.push(t),f.addKeyRequestData(t);s(a,o,r)},d)},error:function(t){p.error(t)}}):s(a,o,r)},d)}function s(i,n,s){tr(p,function(){var t=new Oe(c,h,f);h.updateServiceTokens(t,!s,{result:function(t){f.getHeader({result:function(o){tr(p,function(){var t,e=h.getDebugContext();if(e&&e.sentHeader(o),e=f.getKeyExchangeData(),this.updateOutgoingCryptoContexts(c,o,e),this.storeServiceTokens(c,i,n,o.serviceTokens),e=(!c.isPeerToPeer()&&e?e:o).cryptoContext,u.isAborted())throw new E("send aborted.");t=null!=this._filterFactory?this._filterFactory.getOutputStream(r):r,Re(c,t,I,o,e,l,{result:function(t){var n,r,a,e,i;u.setAbort(function(){t.abort()}),n=t,r=o,(a=s)?h.write(n,l,{result:function(t){tr(p,function(){if(u.isAborted())throw new E("MessageOutputStream write aborted.");b(n,r,a)},d)},timeout:function(){p.timeout()},error:function(t){p.error(t)}}):(e=new vn,i=new lt,Re(c,e,I,r,i,l,{result:function(i){h.write(i,l,{result:function(t){tr(p,function(){if(u.isAborted())throw new E("MessageOutputStream proxy write aborted.");i.close(l,{result:function(e){tr(p,function(){var t;if(!e)throw new E("MessageOutputStream proxy close aborted.");t=i.getPayloads(),b(n,r,a,t)},d)},timeout:function(){p.timeout()},error:function(t){p.error(t)}})},d)},timeout:function(){p.timeout()},error:function(t){p.error(t)}})},timeout:function(){p.timeout()},error:function(t){p.error(t)}}))},timeout:function(){p.timeout()},error:function(t){p.error(t)}})},d)},timeout:function(){p.timeout()},error:function(t){p.error(t)}})},error:function(t){p.error(t)}})},d)}function b(e,i,n,r){e.close(l,{result:function(t){tr(p,function(){if(!t)throw new E("MessageOutputStream close aborted.");return r=r||e.getPayloads(),new ia(i,r,!n)},d)},timeout:function(){p.timeout()},error:function(t){p.error(t)}})}tr(p,function(){var t,e=f.getMasterToken(),i=f.getUserIdToken(),n=!1;h.getUserId()?(t=!i,h.getUserAuthData(null,f.isRenewable(),t,{result:function(t){tr(p,function(){t&&(f.willEncryptHeader()&&f.willIntegrityProtectHeader()?f.setUserAuthenticationData(t):n=!0),a(e,i,n)},d)},error:function(t){p.error(t)}})):a(e,i,n)},d=this)},receive:function(n,u,c,r,h,a,f){var l=this;tr(f,function(){var t,e,i;if(n.isAborted())throw new E("receive aborted.");t=[],h&&(t=h.keyRequestData.filter(function(){return!0})),e=c.getCryptoContexts(),i=this._filterFactory?this._filterFactory.getInputStream(r):r,xe(u,i,I,t,e,a,{result:function(s){n.setAbort(function(){s.abort()}),s.isReady(a,{result:function(i){tr(f,function(){var a,o,t,e;if(!i)throw new E("MessageInputStream aborted.");if(a=s.getMessageHeader(),o=s.getErrorHeader(),t=c.getDebugContext(),t&&t.receivedHeader(a||o),h&&(t=o?o.errorCode:null,a||t!=v.FAIL&&t!=v.TRANSIENT_FAILURE&&t!=v.ENTITY_REAUTH&&t!=v.ENTITYDATA_REAUTH)&&(t=(a||o).messageId)!=(e=Ee(h.messageId)))throw new C(er.UNEXPECTED_RESPONSE_MESSAGE_ID,"expected "+e+"; received "+t);u.getEntityAuthenticationData(null,{result:function(r){tr(f,function(){var t,e,i,n=r.getIdentity();if(a){if(t=a.entityAuthenticationData,t=(e=a.masterToken)?a.sender:t.getIdentity(),e&&e.isDecrypted()&&e.identity!=t||n==t)throw new C(er.UNEXPECTED_MESSAGE_SENDER,t);h&&this.updateIncomingCryptoContexts(u,h,s),n=a.keyResponseData,t=u.isPeerToPeer()?(n=n?n.masterToken:a.peerMasterToken,e=a.peerUserIdToken,a.peerServiceTokens):(n=(n||a).masterToken,e=a.userIdToken,a.serviceTokens),(i=c.getUserId())&&e&&!e.isVerified()&&u.getMslStore().addUserIdToken(i,e),this.storeServiceTokens(u,n,e,t)}else if(n==(t=o.entityAuthenticationData.getIdentity()))throw new C(er.UNEXPECTED_MESSAGE_SENDER,t);return s},l)},error:f.error})},l)},timeout:function(){f.timeout()},error:function(t){f.error(t)}})},timeout:function(){f.timeout()},error:function(t){f.error(t)}})},l)},sendReceive:function(r,a,o,s,u,c,h,f,l){var p;tr(l,function(){var e=new d;this.acquireRenewalLock(r,a,o,e,c,h,{result:function(t){var i,n;i=e,n=t,tr(l,function(){c.setRenewable(n),this.send(r,a,o,u,c,h,{result:function(e){tr(l,function(){var t=e.requestHeader.keyRequestData;f||e.handshake||!t.isEmpty()?this.receive(r,a,o,s,e.requestHeader,h,{result:function(t){tr(l,function(){return n&&this.releaseRenewalLock(a,i,t),new na(t,e)},p)},timeout:function(){tr(l,function(){n&&this.releaseRenewalLock(a,i,null),l.timeout()},p)},error:function(t){tr(l,function(){throw n&&this.releaseRenewalLock(a,i,null),t},p)}}):tr(l,function(){return n&&this.releaseRenewalLock(a,i,null),new na(null,e)},p)},p)},timeout:function(){tr(l,function(){n&&this.releaseRenewalLock(a,i,null),l.timeout()},p)},error:function(t){tr(l,function(){throw n&&this.releaseRenewalLock(a,i,null),t},p)}})},p)},timeout:function(){l.timeout()},error:function(t){t instanceof E?l.result(null):l.error(t)}})},p=this)},acquireRenewalLock:function(u,c,h,f,l,p,d){var b;function m(n,r){tr(d,function(){var t;if(u.isAborted())throw new E("acquireRenewalLock aborted.");if(!n||n.isRenewable()||!r&&h.getUserId()||r&&r.isRenewable()){for(var e=null,i=0;i<this._renewingContexts.length;++i)if((t=this._renewingContexts[i]).ctx===c){e=t.queue;break}if(!e)return this._renewingContexts.push({ctx:c,queue:f}),!0}return!1},b)}tr(d,function(){var t=l.getMasterToken(),e=l.getUserIdToken(),i=h.getUserId();h.isEncrypted()&&!l.willEncryptPayloads()||h.isIntegrityProtected()&&!l.willIntegrityProtectPayloads()||l.isRenewable()||!t&&h.isNonReplayable()||t&&t.isExpired()||!(e||!i||l.willEncryptHeader()&&l.willIntegrityProtectHeader())||h.isRequestingTokens()&&(!t||i&&!e)?function r(a,o,s){tr(d,function(){var t,e;if(u.isAborted())throw new E("acquireRenewalLock aborted.");for(var i=null,n=0;n<this._renewingContexts.length;++n)if((t=this._renewingContexts[n]).ctx===c){i=t.queue;break}if(!i)return this._renewingContexts.push({ctx:c,queue:f}),!0;e=i.poll(p,{result:function(e){tr(d,function(){var t;if(e===A)throw new E("acquireRenewalLock aborted.");i.add(e),e===kn||e.isExpired()?r(e,o,s):((s&&!o||o&&!o.isBoundTo(e))&&(t=c.getMslStore().getUserIdToken(s),o=t&&t.isBoundTo(e)?t:null),l.setAuthTokens(e,o),l.isRenewable()&&e.equals(a)||h.isRequestingTokens()&&!o?r(e,o,s):m(e,o))},b)},timeout:function(){},error:function(t){}}),u.setAbort(function(){e&&(i.cancel(e),e=A)})},b)}(t,e,i):m(t,e)},b=this)},releaseRenewalLock:function(t,e,i){for(var n,r,a,o=0;o<this._renewingContexts.length;++o)if((n=this._renewingContexts[o]).ctx===t){r=o,a=n.queue;break}if(a!==e)throw new j("Attempt to release renewal lock that is not owned by this queue.");(i=i&&i.messageHeader)?(a=i.keyResponseData)?e.add(a.masterToken):(t=t.isPeerToPeer()?i.peerMasterToken:i.masterToken)?e.add(t):e.add(kn):e.add(kn),this._renewingContexts.splice(r,1)}}),je=u.Class.create({init:function(){var t={_impl:{value:new Sn,writable:!1,enumerable:!1,configurable:!1},_shutdown:{value:!1,writable:!1,enumerable:!1,configurable:!1}};Object.defineProperties(this,t)},setFilterFactory:function(t){this._impl.setFilterFactory(t)},shutdown:function(){this._shutdown=!0},receive:function(t,e,i,n,r,a){var o;if(this._shutdown)throw new P("MslControl is shutdown.");return o=new Tn(this._impl,t,e,i,n,r),setTimeout(function(){o.call(a)},0),$r(o)},respond:function(t,e,i,n,r,a,o){var s;if(this._shutdown)throw new P("MslControl is shutdown.");return s=new An(this._impl,t,e,i,n,r,a),setTimeout(function(){s.call(o)},0),$r(s)},error:function(t,e,i,n,r,a,o){var s;if(this._shutdown)throw new P("MslControl is shutdown.");return s=new On(this._impl,t,e,i,n,r,a),setTimeout(function(){s.call(o)},0),$r(s)},request:function(t,e){var i,n,r,a,o,s;if(this._shutdown)throw new P("MslControl is shutdown.");if(5==arguments.length){if(n=arguments[2],r=i=null,a=arguments[3],o=arguments[4],t.isPeerToPeer())return void o.error(new j("This method cannot be used in peer-to-peer mode."))}else if(6==arguments.length&&(n=null,i=arguments[2],r=arguments[3],a=arguments[4],o=arguments[5],!t.isPeerToPeer()))return void o.error(new j("This method cannot be used in trusted network mode."));return s=new xn(this._impl,t,e,n,i,r,null,0,a),setTimeout(function(){s.call(o)},0),$r(s)}}),Tn=u.Class.create({init:function(t,e,i,n,r,a){Object.defineProperties(this,{_ctrl:{value:t,writable:!1,enumerable:!1,configurable:!1},_ctx:{value:e,writable:!1,enumerable:!1,configurable:!1},_msgCtx:{value:i,writable:!1,enumerable:!1,configurable:!1},_input:{value:n,writable:!1,enumerable:!1,configurable:!1},_output:{value:r,writable:!1,enumerable:!1,configurable:!1},_timeout:{value:a,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_abortFunc:{value:A,writable:!0,enumerable:!1,configurable:!1}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},call:function(f){var l;function e(e){tr(f,function(){var r=e.messageHeader;if(!r)return e;this.setAbort(function(){e.abort()}),e.mark(Number.MAX_VALUE),e.read(1,l._timeout,{result:function(t){tr(f,function(){return t&&0==t.length?null:t?(e.reset(),e):(h=e,void tr(f,function(){h.close(),this._ctrl.buildResponse(this,this._ctx,this._msgCtx,h.messageHeader,this._timeout,{result:function(c){tr(f,function(){var t,a,e,i,o,n=c.builder,r=c.tokenTicket,s=h.messageHeader,u=new En(this._msgCtx);!this._ctx.isPeerToPeer()||s.isEncrypting()||s.keyResponseData?(a=s,e=n,i=u,o=r,tr(f,function(){e.setRenewable(!1),this._ctrl.send(this._ctx,i,this._output,e,this._timeout,{result:function(t){tr(f,function(){return this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),null},l)},timeout:function(){tr(f,function(){this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),f.timeout()},l)},error:function(r){tr(f,function(){var t,e,i,n;return this._ctx.isPeerToPeer()&&this._ctrl.releaseMasterToken(o),ra(r)?null:(n=r instanceof P?(t=r.messageId,e=r.error,i=a?a.messageCapabilities:null,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof _?(t=a?a.messageId:null,e=er.MSL_COMMS_FAILURE,i=null,r):(t=a?a.messageId:null,e=er.INTERNAL_EXCEPTION,i=null,new j("Error sending an automatic handshake response.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){tr(f,function(){if(ra(t))return null;throw new m("Error sending an automatic handshake response.",t,r)},l)}}))},l)}})},l)):(t=new xn(this._ctrl,this._ctx,u,null,this._input,this._output,c,1,this._timeout),this.setAbort(function(){t.abort()}),t.call(f))},l)},timeout:function(){f.timeout()},error:function(r){tr(f,function(){var t,e,i,n;return ra(r)?null:(n=r instanceof P?(t=r.messageId,e=r.error,i=h.messageHeader.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):(t=requestHeader?requestHeader.messageId:null,e=er.INTERNAL_EXCEPTION,i=null,new j("Error creating an automatic handshake response.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){tr(f,function(){if(ra(t))return null;throw new m("Error creating an automatic handshake response.",t,r)},l)}}))},l)}})},l));var h},l)},timeout:function(){f.timeout()},error:function(n){tr(f,function(){var t,e,i;return ra(n)?null:(t=r?r.messageId:null,i=n instanceof _?(e=er.MSL_COMMS_FAILURE,n):(e=er.INTERNAL_EXCEPTION,new j("Error peeking into the message payloads.")),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,null,this._output,this._timeout,{result:function(t){f.error(i)},timeout:function(){f.timeout()},error:function(t){tr(f,function(){if(ra(t))return null;throw new m("Error peeking into the message payloads.",t,n)},l)}}))},l)}})},l)}tr(f,function(){this._ctrl.receive(this,this._ctx,this._msgCtx,this._input,null,this._timeout,{result:function(t){e(t)},timeout:function(){f.timeout()},error:function(r){tr(f,function(){var t,e,i,n;return ra(r)?null:(n=r instanceof P?(t=r.messageId,e=r.error,i=this._ctrl.messageRegistry.getUserMessage(e,null),r):(e=er.INTERNAL_EXCEPTION,i=t=null,new j("Error receiving the message header.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){f.error(n)},timeout:function(){f.timeout()},error:function(t){tr(f,function(){if(ra(t))return null;throw new m("Error receiving the message header.",t,r)},l)}}))},l)}})},l=this)}}),An=u.Class.create({init:function(t,e,i,n,r,a,o){Object.defineProperties(this,{_ctrl:{value:t,writable:!1,enumerable:!1,configurable:!1},_ctx:{value:e,writable:!1,enumerable:!1,configurable:!1},_msgCtx:{value:i,writable:!1,enumerable:!1,configurable:!1},_input:{value:n,writable:!1,enumerable:!1,configurable:!1},_output:{value:r,writable:!1,enumerable:!1,configurable:!1},_request:{value:a,writable:!1,enumerable:!1,configurable:!1},_timeout:{value:o,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_abortFunc:{value:A,writable:!0,enumerable:!1,configurable:!1}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},trustedNetworkExecute:function(i,n,r){var a=this;tr(r,function(){var e,t;return!(12<n+1)&&void((e=this._msgCtx.isIntegrityProtected()&&!i.willIntegrityProtectHeader()?er.RESPONSE_REQUIRES_INTEGRITY_PROTECTION:this._msgCtx.isEncrypted()&&!i.willEncryptPayloads()?er.RESPONSE_REQUIRES_ENCRYPTION:null)?(t=ke(i.getMessageId()),aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,null,this._output,this._timeout,{result:function(t){r.result(!1)},timeout:function(){r.timeout()},error:function(t){tr(r,function(){if(ra(t))return!1;throw new m("Response requires encryption or integrity protection but cannot be protected: "+e,t,null)},a)}})):!this._msgCtx.getCustomer()||i.getMasterToken()||i.getKeyExchangeData()?(i.setRenewable(!1),this._ctrl.send(this._ctx,this._msgCtx,this._output,i,this._timeout,{result:function(t){r.result(!0)},timeout:function(){r.timeout()},error:function(t){r.error(t)}})):(t=ke(i.getMessageId()),aa(this,this._ctx,this._msgCtx.getDebugContext(),t,er.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(t){r.result(!1)},timeout:function(){r.timeout()},error:function(t){tr(r,function(){if(ra(t))return!1;throw new m("Response wishes to attach a user ID token but there is no master token.",t,null)},a)}})))},a)},peerToPeerExecute:function(a,e,o,s){var u;tr(s,function(){var t;return!(12<o+2)&&void(null!=a.getCustomer()&&null==e.getPeerMasterToken()&&null==e.getKeyExchangeData()?(t=ke(e.getMessageId()),aa(this,this._ctx,a.getDebugContext(),t,er.RESPONSE_REQUIRES_MASTERTOKEN,null,this._output,this._timeout,{result:function(t){s.result(!1)},timeout:function(){s.timeout()},error:function(t){tr(s,function(){if(ra(t))return!1;throw new m("Response wishes to attach a user ID token but there is no master token.",t,null)},u)}})):this._ctrl.sendReceive(this._ctx,a,this._input,this._output,e,this._timeout,!1,{result:function(r){tr(s,function(){var t,n,e,i;if(t=r.response,o+=2,!t)return!0;if(n=t.getMessageHeader()){if(e=0<(e=r.payloads).length&&0<e[0].data.length,!r.handshake||!e)return!0;!function e(){t.read(32768,u._timeout,{result:function(t){tr(s,function(){t?e():tr(s,function(){var i=new _n(r.payloads,a);this._ctrl.buildResponse(this,this._ctx,i,n,this._timeout,{result:function(t){tr(s,function(){var e=t.tokenTicket;this.peerToPeerExecute(i,t.builder,o,{result:function(t){tr(s,function(){return this._ctrl.releaseMasterToken(e),t},u)},timeout:function(){tr(s,function(){this._ctrl.releaseMasterToken(e),s.timeout()},u)},error:function(t){tr(s,function(){throw this._ctrl.releaseMasterToken(e),t},u)}})},u)},timeout:function(){s.timeout()},error:function(t){s.error(t)}})},u)},u)},timeout:function(){s.timeout()},error:function(t){s.error(t)}})}()}else i=r,tr(s,function(){var t=i.response;t.close(),t=t.getErrorHeader(),this._ctrl.cleanupContext(this._ctx,i.requestHeader,t),this._ctrl.buildErrorResponse(this,this._ctx,a,i,t,{result:function(i){tr(s,function(){var t,e;return!!i&&(t=i.errorResult,e=i.tokenTicket,void this.peerToPeerExecute(t.msgCtx,t.builder,o,{result:function(t){tr(s,function(){return this._ctrl.releaseMasterToken(e),t},u)},timeout:function(){tr(s,function(){this._ctrl.releaseMasterToken(e),s.timeout()},u)},error:function(t){tr(s,function(){throw this._ctrl.releaseMasterToken(e),t},u)}}))},u)}})},u)},u)},timeout:function(){s.timeout()},error:function(t){s.error(t)}}))},u=this)},call:function(s){var u=this;this._ctrl.buildResponse(this,this._ctx,this._msgCtx,this._request,this._timeout,{result:function(t){tr(s,function(){var a=t.builder,o=t.tokenTicket;this._ctx.isPeerToPeer()?this.peerToPeerExecute(this._msgCtx,a,3,{result:function(t){tr(s,function(){return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),t},u)},timeout:function(){tr(s,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),s.timeout()},u)},error:function(r){tr(s,function(){var t,e,i,n;return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),!ra(r)&&(t=ke(a.getMessageId()),n=r instanceof P?(e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof _?(e=er.MSL_COMMS_FAILURE,i=null,r):(e=er.INTERNAL_EXCEPTION,i=null,new j("Error sending the response.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){tr(s,function(){if(ra(t))return!1;throw new m("Error sending the response.",t,null)},u)}}))},u)}}):this.trustedNetworkExecute(a,3,{result:function(t){tr(s,function(){return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),t},u)},timeout:function(){tr(s,function(){this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),s.timeout()},u)},error:function(r){tr(s,function(){var t,e,i,n;return this._ctx.isPeerToPeer()&&this.releaseMasterToken(o),!ra(r)&&(t=ke(a.getMessageId()),n=r instanceof P?(e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):r instanceof _?(e=er.MSL_COMMS_FAILURE,i=null,r):(e=er.INTERNAL_EXCEPTION,i=null,new j("Error sending the response.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){tr(s,function(){if(ra(t))return!1;throw new m("Error sending the response.",t,null)},u)}}))},u)}})},u)},timeout:function(){s.timeout()},error:function(r){tr(s,function(){var t,e,i,n;return!ra(r)&&(n=r instanceof P?(t=r.messageId,e=r.error,i=this._request.messageCapabilities,i=this._ctrl.messageRegistry.getUserMessage(e,i?i.languages:null),r):(e=er.INTERNAL_EXCEPTION,i=t=null,new j("Error building the response.",r)),void aa(this,this._ctx,this._msgCtx.getDebugContext(),t,e,i,this._output,this._timeout,{result:function(t){s.error(n)},timeout:function(){s.timeout()},error:function(t){tr(s,function(){if(ra(t))return null;throw new m("Error building the response.",t,r)},u)}}))},u)}})}}),On=u.Class.create({init:function(t,e,i,n,r,a,o){Object.defineProperties(this,{_ctrl:{value:t,writable:!1,enumerable:!1,configurable:!1},_ctx:{value:e,writable:!1,enumerable:!1,configurable:!1},_msgCtx:{value:i,writable:!1,enumerable:!1,configurable:!1},_appError:{value:n,writable:!1,enumerable:!1,configurable:!1},_output:{value:output,writable:!1,enumerable:!1,configurable:!1},_request:{value:a,writable:!1,enumerable:!1,configurable:!1},_timeout:{value:o,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_abortFunc:{value:A,writable:!0,enumerable:!1,configurable:!1}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},call:function(i){var n=this;tr(i,function(){var t,e;if(this._appError==ENTITY_REJECTED)t=this._request.masterToken?er.MASTERTOKEN_REJECTED_BY_APP:er.ENTITY_REJECTED_BY_APP;else{if(this._appError!=USER_REJECTED)throw new j("Unhandled application error "+this._appError+".");t=this._request.userIdToken?er.USERIDTOKEN_REJECTED_BY_APP:er.USER_REJECTED_BY_APP}e=this._request.messageCapabilities,e=this._ctrl.messageRegistry.getUserMessage(t,e?e.languages:null),aa(this,this._ctx,this._msgCtx.getDebugContext(),this._request.messageId,t,e,this._output,this._timeout,{result:function(t){i.result(t)},timeout:i.timeout,error:function(t){tr(i,function(){if(ra(t))return!1;if(t instanceof P)throw t;throw new j("Error building the error response.",t)},n)}})},n)}}),In={result:function(){},timeout:function(){},error:function(){}},xn=u.Class.create({init:function(t,e,i,n,r,a,o,s,u){var c;o=o?(c=o.builder,o.tokenTicket):c=null,Object.defineProperties(this,{_ctrl:{value:t,writable:!1,enumerable:!1,configurable:!1},_ctx:{value:e,writable:!1,enumerable:!1,configurable:!1},_msgCtx:{value:i,writable:!1,enumerable:!1,configurable:!1},_remoteEntity:{value:n,writable:!1,enumerable:!1,configurable:!1},_input:{value:r,writable:!0,enumerable:!1,configurable:!1},_output:{value:a,writable:!0,enumerable:!1,configurable:!1},_openedStreams:{value:!1,writable:!0,enumerable:!1,configurable:!1},_builder:{value:c,writable:!0,enumerable:!1,configurable:!1},_tokenTicket:{value:o,writable:!0,enumerable:!1,configurable:!1},_timeout:{value:u,writable:!1,enumerable:!1,configurable:!1},_msgCount:{value:s,writable:!1,enumerable:!1,configurable:!1},_aborted:{value:!1,writable:!0,enumerable:!1,configurable:!1},_abortFunc:{value:A,writable:!0,enumerable:!1,configurable:!1}})},isAborted:function(){return this._aborted},abort:function(){this._aborted=!0,this._abortFunc&&this._abortFunc.call(this)},setAbort:function(t){this._abortFunc=t},execute:function(s,t,u,c,h){var f;function n(o){tr(h,function(){var r,n,t,i,a;if(r=o.response,n=r.getMessageHeader(),t=0<(t=o.payloads).length&&0<t[0].data.length,this._ctx.isPeerToPeer())o.handshake&&t?function e(){r.read(32768,f._timeout,{result:function(t){t?e():tr(h,function(){var i=new _n(o.payloads,s);this._ctrl.buildResponse(this,this._ctx,s,n,u,{result:function(t){tr(h,function(){var e=t.tokenTicket;this.execute(i,t.builder,this._timeout,c,{result:function(t){tr(h,function(){return this._ctrl.releaseMasterToken(e),t},f)},timeout:function(){tr(h,function(){this._ctrl.releaseMasterToken(e),h.timeout()},f)},error:function(t){tr(h,function(){throw this._ctrl.releaseMasterToken(e),t},f)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}():0<n.keyRequestData.length&&(a=new En(s),this._ctrl.buildResponse(this,this._ctx,a,n,u,{result:function(t){tr(h,function(){var i=t.builder,n=t.tokenTicket;r.mark(),r.read(1,this._timeout,{result:function(t){tr(h,function(){if(t){if(r.reset(),!(c+1<=12))return this.releaseMasterToken(n),r;i.setRenewable(!1),this._ctrl.send(this,this._ctx,a,this._output,i,this._timeout,{result:function(t){tr(h,function(){return this.releaseMasterToken(n),r},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}else!function e(){r.read(32768,f._timeout,{result:function(t){t?e():f.execute(a,i,f._timeout,c,{result:function(t){tr(h,function(){return this._ctrl.releaseMasterToken(n),t},f)},timeout:function(){tr(h,function(){this._ctrl.releaseMasterToken(n),h.timeout()},f)},error:function(t){tr(h,function(){throw this._ctrl.releaseMasterToken(n),t},f)}})},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}()},f)},timeout:function(){tr(h,function(){this.releaseMasterToken(n),h.timeout()},f)},error:function(t){tr(h,function(){throw this.releaseMasterToken(n),t},f)}})},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}}));else{if(!o.handshake||!t)return r;this._openedStreams&&(this._input.close(),this._output.close(u,In)),i=new _n(o.payloads,s),this._ctrl.buildResponse(this,this._ctx,s,n,u,{result:function(e){tr(h,function(){var t=new xn(this._ctrl,this._ctx,i,this._remoteEntity,null,null,e,c,this._timeout);this.setAbort(function(){t.abort()}),t.call(h)},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})}},f)}tr(h,function(){return 12<c+2?null:void this._ctrl.sendReceive(this,this._ctx,s,this._input,this._output,t,u,!0,{result:function(e){tr(h,function(){var t,i;return e?(t=e.response,c+=2,void(t.getMessageHeader()?n(e):(i=e,tr(h,function(){var t,a=i.response;a.close(),t=a.getErrorHeader(),this._ctrl.cleanupContext(this._ctx,i.requestHeader,t),this._ctrl.buildErrorResponse(this,this._ctx,s,i,t,u,{result:function(r){tr(h,function(){var t,e,i,n;return r?(t=r.errorResult,e=r.tokenTicket,i=t.builder,t=t.msgCtx,void(this._ctx.isPeerToPeer()?this.execute(t,i,this._timeout,c,{result:function(t){tr(h,function(){this._ctrl.releaseMasterToken(e),o(t)},f)},timeout:function(){tr(h,function(){this._ctrl.releaseMasterToken(e),h.timeout()},f)},error:function(t){tr(h,function(){this._ctrl.releaseMasterToken(e),h.error(t)},f)}}):(this._openedStreams&&(this._input.close(),this._output.close(u,In)),n=new xn(this._ctrl,this._ctx,t,this._remoteEntity,null,null,{builder:i,tokenTicket:e},c,this._timeout),this.setAbort(function(){n.abort()}),n.call({result:function(t){o(t)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})))):a},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f)))):null;function o(e){tr(h,function(){var t=i.response;return e||t},f)}},f)},timeout:function(){h.timeout()},error:function(t){h.error(t)}})},f=this)},call:function(n){var r;function a(t,e,i){tr(n,function(){this.execute(this._msgCtx,t,i,this._msgCount,{result:function(t){tr(n,function(){return this._ctrl.releaseMasterToken(e),this._openedStreams&&this._output.close(i,In),t&&t.closeSource(this._openedStreams),t},r)},timeout:function(){tr(n,function(){this._ctrl.releaseMasterToken(e),this._openedStreams&&(this._output.close(i,In),this._input.close()),n.timeout()},r)},error:function(t){tr(n,function(){if(this._ctrl.releaseMasterToken(e),this._openedStreams&&(this._output.close(i,In),this._input.close()),ra(t))return null;throw t},r)}})},r)}tr(n,function(){var t,e,i=this._timeout;if(!this._input||!this._output)try{this._remoteEntity.setTimeout(this._timeout),t=Date.now(),e=this._remoteEntity.openConnection(),this._output=e.output,this._input=e.input,-1!=i&&(i=this._timeout-(Date.now()-t)),this._openedStreams=!0}catch(t){if(this._builder&&this._ctrl.releaseMasterToken(this._tokenTicket),this._output&&this._output.close(this._timeout,In),this._input&&this._input.close(),ra(t))return null;throw t}this._builder?a(this._builder,this._tokenTicket,i):this._ctrl.buildRequest(this,this._ctx,this._msgCtx,this._timeout,{result:function(t){tr(n,function(){a(t.builder,t.tokenTicket,i)},r)},timeout:function(){tr(n,function(){this._openedStreams&&(this._output.close(this._timeout,In),this._input.close()),n.timeout()},r)},error:function(t){tr(n,function(){if(this._openedStreams&&(this._output.close(this._timeout,In),this._input.close()),ra(t))return null;throw t},r)}})},r=this)}}),Ce=u.Class.create({init:function(t){Object.defineProperties(this,{id:{value:t,writable:!1,configurable:!1}})},toJSON:function(){var t={};return t.id=this.id,t},equals:function(t){return this===t||t instanceof Ce&&this.id==t.id},uniqueKey:function(){return this.id}}),Le=function(t){var e=t.id;if(!e)throw new N(er.JSON_PARSE_ERROR,JSON.stringify(t));return new Ce(e)},u.Class.create({isNewestMasterToken:function(t,e,i){},isMasterTokenRevoked:function(t,e){},acceptNonReplayableId:function(t,e,i,n){},createMasterToken:function(t,e,i,n,r){},isMasterTokenRenewable:function(t,e,i){},renewMasterToken:function(t,e,i,n,r){},isUserIdTokenRevoked:function(t,e,i,n){},createUserIdToken:function(t,e,i,n){},renewUserIdToken:function(t,e,i,n){}}),Me=u.Class.create({init:function(s,e,i,u,c,h,f,l,p,d,b){var m=this;$n(b,function(){var n,r,a,t,o;if(i.getTime()<e.getTime())throw new j("Cannot construct a master token that expires before its renewal window opens.");if(u<0||x<u)throw new j("Sequence number "+u+" is outside the valid range.");if(c<0||x<c)throw new j("Serial number "+c+" is outside the valid range.");if(n=Math.floor(e.getTime()/1e3),r=Math.floor(i.getTime()/1e3),a=d?d.sessiondata:(t={},h&&(t.issuerdata=h),t.identity=f,t.encryptionkey=g(l.toByteArray()),t.hmackey=g(p.toByteArray()),Jn(JSON.stringify(t),I)),d)return Object.defineProperties(this,{ctx:{value:s,writable:!1,enumerable:!1,configurable:!1},renewalWindowSeconds:{value:n,writable:!1,enumerable:!1,configurable:!1},expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1},sequenceNumber:{value:u,writable:!1,configurable:!1},serialNumber:{value:c,writable:!1,configurable:!1},issuerData:{value:h,writable:!1,configurable:!1},identity:{value:f,writable:!1,configurable:!1},encryptionKey:{value:l,writable:!1,configurable:!1},hmacKey:{value:p,writable:!1,configurable:!1},sessiondata:{value:a,writable:!1,enumerable:!1,configurable:!1},verified:{value:d.verified,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:d.tokendata,writable:!1,enumerable:!1,configurable:!1},signature:{value:d.signature,writable:!1,enumerable:!1,configurable:!1}}),this;(o=s.getMslCryptoContext()).encrypt(a,{result:function(i){$n(b,function(){var e,t={};t.renewalwindow=n,t.expiration=r,t.sequencenumber=u,t.serialnumber=c,t.sessiondata=g(i),e=Jn(JSON.stringify(t),I),o.sign(e,{result:function(t){$n(b,function(){return Object.defineProperties(this,{ctx:{value:s,writable:!1,enumerable:!1,configurable:!1},renewalWindowSeconds:{value:n,writable:!1,enumerable:!1,configurable:!1},expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1},sequenceNumber:{value:u,writable:!1,enumerable:!1,configurable:!1},serialNumber:{value:c,writable:!1,enumerable:!1,configurable:!1},issuerData:{value:h,writable:!1,configurable:!1},identity:{value:f,writable:!1,configurable:!1},encryptionKey:{value:l,writable:!1,configurable:!1},hmacKey:{value:p,writable:!1,configurable:!1},sessiondata:{value:a,writable:!1,enumerable:!1,configurable:!1},verified:{value:!0,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},m)},error:function(t){b.error(t)}})},m)},error:function(t){b.error(t)}})},this)},get renewalWindow(){return new Date(1e3*this.renewalWindowSeconds)},get expiration(){return new Date(1e3*this.expirationSeconds)},isDecrypted:function(){return!!this.sessiondata},isVerified:function(){return this.verified},isRenewable:function(t){return!this.isVerified()||this.renewalWindow.getTime()<=this.ctx.getTime()},isExpired:function(t){return!!this.isVerified()&&this.expiration.getTime()<=this.ctx.getTime()},isNewerThan:function(t){var e;return this.sequenceNumber==t.sequenceNumber?this.expiration>t.expiration:this.sequenceNumber>t.sequenceNumber?(e=this.sequenceNumber-x+127,t.sequenceNumber>=e):(e=t.sequenceNumber-x+127,this.sequenceNumber<e)},toJSON:function(){var t={};return t.tokendata=g(this.tokendata),t.signature=g(this.signature),t},equals:function(t){return this===t||t instanceof Me&&(this.serialNumber==t.serialNumber&&this.sequenceNumber==t.sequenceNumber&&this.expiration.getTime()==t.expiration.getTime())},uniqueKey:function(){return this.serialNumber+":"+this.sequenceNumber+this.expiration.getTime()}}),De=function(d,i,b){$n(b,function(){var l,p,o=d.getMslCryptoContext(),t=i.tokendata,e=i.signature;if("string"!=typeof t||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"mastertoken "+JSON.stringify(i));try{l=O(t)}catch(t){throw new P(er.MASTERTOKEN_TOKENDATA_INVALID,"mastertoken "+JSON.stringify(i),t)}if(!l||0==l.length)throw new N(er.MASTERTOKEN_TOKENDATA_MISSING,"mastertoken "+JSON.stringify(i));try{p=O(e)}catch(t){throw new P(er.MASTERTOKEN_SIGNATURE_INVALID,"mastertoken "+JSON.stringify(i),t)}o.verify(l,p,{result:function(f){$n(b,function(){var t,e,i,s,u,n,c,h,r,a=Gn(l,I);try{t=JSON.parse(a),e=parseInt(t.renewalwindow),i=parseInt(t.expiration),s=parseInt(t.sequencenumber),u=parseInt(t.serialnumber),n=t.sessiondata}catch(t){if(t instanceof SyntaxError)throw new N(er.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+a,t);throw t}if(!e||e!=e||!i||i!=i||"number"!=typeof s||s!=s||"number"!=typeof u||u!=u||"string"!=typeof n)throw new N(er.MASTERTOKEN_TOKENDATA_PARSE_ERROR,"mastertokendata "+a);if(i<e)throw new P(er.MASTERTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+a);if(s<0||x<s)throw new P(er.MASTERTOKEN_SEQUENCE_NUMBER_OUT_OF_RANGE,"mastertokendata "+a);if(u<0||x<u)throw new P(er.MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"mastertokendata "+a);c=new Date(1e3*e),h=new Date(1e3*i);try{r=O(n)}catch(t){throw new P(er.MASTERTOKEN_SESSIONDATA_INVALID,n,t)}if(!r||0==r.length)throw new P(er.MASTERTOKEN_SESSIONDATA_MISSING,n);f?o.decrypt(r,{result:function(o){$n(b,function(){var t,n,r,e,a,i=Gn(o,I);try{t=JSON.parse(i),n=t.issuerdata,r=t.identity,e=t.encryptionkey,a=t.hmackey}catch(t){if(t instanceof SyntaxError)throw new N(er.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+i,t);throw t}if(n&&"object"!=typeof n||!r||"string"!=typeof e||"string"!=typeof a)throw new N(er.MASTERTOKEN_SESSIONDATA_PARSE_ERROR,"sessiondata "+i);W(e,B,V,{result:function(i){W(a,F,J,{result:function(e){$n(b,function(){var t=new oa(o,l,p,f);new Me(d,c,h,s,u,n,r,i,e,t,b)})},error:function(t){b.error(new R(er.MASTERTOKEN_KEY_CREATION_ERROR,t))}})},error:function(t){b.error(new R(er.MASTERTOKEN_KEY_CREATION_ERROR,t))}})})},error:function(t){b.error(t)}}):(e=new oa(null,l,p,f),new Me(d,c,h,s,u,null,null,null,null,e,b))})},error:function(t){b.error(t)}})})},Ue=u.Class.create({init:function(s,u,c,h,f,l,p,d,b){var m=this;$n(b,function(){var n,r,a,t,e,i,o;if(c.getTime()<u.getTime())throw new j("Cannot construct a user ID token that expires before its renewal window opens.");if(!h)throw new j("Cannot construct a user ID token without a master token.");if(f<0||x<f)throw new j("Serial number "+f+" is outside the valid range.");if(n=Math.floor(u.getTime()/1e3),r=Math.floor(c.getTime()/1e3),a=h.serialNumber,d)return t=d.tokendata,e=d.signature,i=d.verified,a=h.serialNumber,Object.defineProperties(this,{ctx:{value:s,writable:!1,enumerable:!1,configurable:!1},renewalWindowSeconds:{value:n,writable:!1,enumerable:!1,configurable:!1},expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1},mtSerialNumber:{value:a,writable:!1,configurable:!1},serialNumber:{value:f,writable:!1,configurable:!1},issuerData:{value:l,writable:!1,configurable:!1},customer:{value:p,writable:!1,configurable:!1},verified:{value:i,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:t,writable:!1,enumerable:!1,configurable:!1},signature:{value:e,writable:!1,enumerable:!1,configurable:!1}}),this;t={},l&&(t.issuerdata=l),t.identity=p,t=Jn(JSON.stringify(t),I),(o=s.getMslCryptoContext()).encrypt(t,{result:function(i){$n(b,function(){var e,t={};t.renewalwindow=n,t.expiration=r,t.mtserialnumber=a,t.serialnumber=f,t.userdata=g(i),e=Jn(JSON.stringify(t),I),o.sign(e,{result:function(t){$n(b,function(){return Object.defineProperties(this,{ctx:{value:s,writable:!1,enumerable:!1,configurable:!1},renewalWindowSeconds:{value:n,writable:!1,enumerable:!1,configurable:!1},expirationSeconds:{value:r,writable:!1,enumerable:!1,configurable:!1},mtSerialNumber:{value:h.serialNumber,writable:!1,configurable:!1},serialNumber:{value:f,writable:!1,configurable:!1},issuerData:{value:l,writable:!1,configurable:!1},customer:{value:p,writable:!1,configurable:!1},verified:{value:!0,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},m)},error:function(t){$n(b,function(){throw t instanceof P&&t.setEntity(h),t},m)}})},m)},error:function(t){$n(b,function(){throw t instanceof P&&t.setEntity(h),t},m)}})},this)},get renewalWindow(){return new Date(1e3*this.renewalWindowSeconds)},get expiration(){return new Date(1e3*this.expirationSeconds)},isVerified:function(){return this.verified},isDecrypted:function(){return!!this.customer},isRenewable:function(){return this.renewalWindow.getTime()<=this.ctx.getTime()},isExpired:function(){return this.expiration.getTime()<=this.ctx.getTime()},isBoundTo:function(t){return t&&t.serialNumber==this.mtSerialNumber},toJSON:function(){var t={};return t.tokendata=g(this.tokendata),t.signature=g(this.signature),t},equals:function(t){return this===t||t instanceof Ue&&(this.serialNumber==t.serialNumber&&this.mtSerialNumber==t.mtSerialNumber)},uniqueKey:function(){return this.serialNumber+":"+this.mtSerialNumber}}),Be=function(d,i,b,m){$n(m,function(){var f,l,p=d.getMslCryptoContext(),t=i.tokendata,e=i.signature;if("string"!=typeof t||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"useridtoken "+JSON.stringify(i)).setEntity(b);try{f=O(t)}catch(t){throw new P(er.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(i),t).setEntity(b)}if(!f||0==f.length)throw new N(er.USERIDTOKEN_TOKENDATA_MISSING,"useridtoken "+JSON.stringify(i)).setEntity(b);try{l=O(e)}catch(t){throw new P(er.USERIDTOKEN_TOKENDATA_INVALID,"useridtoken "+JSON.stringify(i),t).setEntity(b)}p.verify(f,l,{result:function(h){$n(m,function(){var t,e,i,n,o,r,s,u,a,c=Gn(f,I);try{t=JSON.parse(c),e=parseInt(t.renewalwindow),i=parseInt(t.expiration),n=parseInt(t.mtserialnumber),o=parseInt(t.serialnumber),r=t.userdata}catch(t){if(t instanceof SyntaxError)throw new N(er.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+c,t).setEntity(b);throw t}if(!e||e!=e||!i||i!=i||"number"!=typeof n||n!=n||"number"!=typeof o||o!=o||"string"!=typeof r)throw new N(er.USERIDTOKEN_TOKENDATA_PARSE_ERROR,"usertokendata "+c).setEntity(b);if(i<e)throw new P(er.USERIDTOKEN_EXPIRES_BEFORE_RENEWAL,"mastertokendata "+c).setEntity(b);if(n<0||x<n)throw new P(er.USERIDTOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+c).setEntity(b);if(o<0||x<o)throw new P(er.USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"usertokendata "+c).setEntity(b);if(s=new Date(1e3*e),u=new Date(1e3*i),!b||n!=b.serialNumber)throw new P(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+n+"; mt "+JSON.stringify(b)).setEntity(b);try{a=O(r)}catch(t){throw new P(er.USERIDTOKEN_USERDATA_INVALID,r,t).setEntity(b)}if(!a||0==a.length)throw new P(er.USERIDTOKEN_USERDATA_MISSING,r).setEntity(b);h?p.decrypt(a,{result:function(a){$n(m,function(){var t,e,i,n,r=Gn(a,I);try{e=(t=JSON.parse(r)).issuerdata,i=t.identity}catch(t){if(t instanceof SyntaxError)throw new N(er.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+r).setEntity(b);throw t}if(e&&"object"!=typeof e||"object"!=typeof i)throw new N(er.USERIDTOKEN_USERDATA_PARSE_ERROR,"userdata "+r).setEntity(b);try{n=Le(i)}catch(t){throw new P(er.USERIDTOKEN_IDENTITY_INVALID,"userdata "+r,t).setEntity(b)}i=new sa(f,l,h),new Ue(d,s,u,b,o,e,n,i,m)})},error:function(t){$n(m,function(){throw t instanceof P&&t.setEntity(b),t})}}):(e=new sa(f,l,h),new Ue(d,s,u,b,o,null,null,e,m))})},error:function(t){$n(m,function(){throw t instanceof P&&t.setEntity(b),t})}})})},Fe=u.Class.create({init:function(a,o,s,u,c,h,f,l,p,d){var b=this;$n(d,function(){var i,n,t,r,e;if(u&&c&&!c.isBoundTo(u))throw new j("Cannot construct a service token bound to a master token and user ID token where the user ID token is not bound to the same master token.");if(i=u?u.serialNumber:-1,n=c?c.serialNumber:-1,p)return e=p.tokendata,Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1},name:{value:o,writable:!1,configurable:!1},mtSerialNumber:{value:i,writable:!1,configurable:!1},uitSerialNumber:{value:n,writable:!1,configurable:!1},data:{value:s,writable:!1,configurable:!1},encrypted:{value:h,writable:!1,enumerable:!1,configurable:!1},compressionAlgo:{value:f,writable:!1,configurable:!1},verified:{value:p.verified,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:p.signature,writable:!1,enumerable:!1,configurable:!1}}),this;f&&(t=fi(f,s)).length<s.length||(f=null,t=s),(r={}).name=o,-1!=i&&(r.mtserialnumber=i),-1!=n&&(r.uitserialnumber=n),r.encrypted=h,f&&(r.compressionalgo=f),h&&0<t.length?l.encrypt(t,{result:function(t){$n(d,function(){var e;r.servicedata=g(t),e=Jn(JSON.stringify(r),I),l.sign(e,{result:function(t){$n(d,function(){return Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1},name:{value:o,writable:!1,configurable:!1},mtSerialNumber:{value:i,writable:!1,configurable:!1},uitSerialNumber:{value:n,writable:!1,configurable:!1},data:{value:s,writable:!1,configurable:!1},encrypted:{value:h,writable:!1,enumerable:!1,configurable:!1},compressionAlgo:{value:f,writable:!1,configurable:!1},verified:{value:!0,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},b)},error:function(t){$n(d,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}})},b)},error:function(t){$n(d,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}}):(r.servicedata=g(t),e=Jn(JSON.stringify(r),I),l.sign(e,{result:function(t){$n(d,function(){return Object.defineProperties(this,{ctx:{value:a,writable:!1,enumerable:!1,configurable:!1},name:{value:o,writable:!1,configurable:!1},mtSerialNumber:{value:i,writable:!1,configurable:!1},uitSerialNumber:{value:n,writable:!1,configurable:!1},data:{value:s,writable:!1,configurable:!1},encrypted:{value:h,writable:!1,enumerable:!1,configurable:!1},compressionAlgo:{value:f,writable:!1,configurable:!1},verified:{value:!0,writable:!1,enumerable:!1,configurable:!1},tokendata:{value:e,writable:!1,enumerable:!1,configurable:!1},signature:{value:t,writable:!1,enumerable:!1,configurable:!1}}),this},b)},error:function(t){$n(d,function(){throw t instanceof P&&(t.setEntity(u),t.setUser(c)),t})}}))},this)},isEncrypted:function(){return this.encrypted},isVerified:function(){return this.verified},isDecrypted:function(){return!!this.data},isDeleted:function(){return this.data&&0==this.data.length},isMasterTokenBound:function(){return-1!=this.mtSerialNumber},isBoundTo:function(t){return!!t&&(t instanceof Me?t.serialNumber==this.mtSerialNumber:t instanceof Ue&&t.serialNumber==this.uitSerialNumber)},isUserIdTokenBound:function(){return-1!=this.uitSerialNumber},isUnbound:function(){return-1==this.mtSerialNumber&&-1==this.uitSerialNumber},toJSON:function(){var t={};return t.tokendata=g(this.tokendata),t.signature=g(this.signature),t},equals:function(t){return this===t||t instanceof Fe&&(this.name==t.name&&this.mtSerialNumber==t.mtSerialNumber&&this.uitSerialNumber==t.uitSerialNumber)},uniqueKey:function(){return this.name+":"+this.mtSerialNumber+":"+this.uitSerialNumber}}),qe=function(t,e,i,n,r,a,o,s,u){new Fe(t,e,i,n,r,a,o,s,null,u)},He=function(p,d,b,m,g,v){$n(v,function(){var t,e,r,a,i,n,o,s,u,c,h,f,l;if(!g||g instanceof ct||(g=function(e,t){var i,n,r=e.tokendata;if("string"!=typeof r)throw new N(er.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e));try{i=O(r)}catch(t){throw new P(er.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(e),t)}if(!i||0==i.length)throw new N(er.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(e));try{n=JSON.parse(Gn(i,I)).name}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e),t);throw t}if(!n)throw new N(er.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(e));return t[n]||t[""]}(d,g)),t=d.tokendata,e=d.signature,"string"!=typeof t||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"servicetoken "+JSON.stringify(d)).setEntity(b).setEntity(m);try{r=O(t)}catch(t){throw new P(er.SERVICETOKEN_TOKENDATA_INVALID,"servicetoken "+JSON.stringify(d),t).setEntity(b).setEntity(m)}if(!r||0==r.length)throw new N(er.SERVICETOKEN_TOKENDATA_MISSING,"servicetoken "+JSON.stringify(d)).setEntity(b).setEntity(m);try{a=O(e)}catch(t){throw new P(er.SERVICETOKEN_SIGNATURE_INVALID,"servicetoken "+JSON.stringify(d),t).setEntity(b).setEntity(m)}i=Gn(r,I);try{n=JSON.parse(i),o=n.name,s=n.mtserialnumber?parseInt(n.mtserialnumber):-1,u=n.uitserialnumber?parseInt(n.uitserialnumber):-1,c=n.encrypted,h=n.compressionalgo,f=n.servicedata}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"servicetokendata "+i,t).setEntity(b).setEntity(m);throw t}if(!o||"number"!=typeof s||s!=s||"number"!=typeof u||u!=u||"boolean"!=typeof c||h&&"string"!=typeof h||"string"!=typeof f)throw new N(er.JSON_PARSE_ERROR,"servicetokendata "+i).setEntity(b).setEntity(m);if(n.mtserialnumber&&s<0||x<s)throw new P(er.SERVICETOKEN_MASTERTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+i).setEntity(b).setEntity(m);if(n.uitserialnumber&&u<0||x<u)throw new P(er.SERVICETOKEN_USERIDTOKEN_SERIAL_NUMBER_OUT_OF_RANGE,"servicetokendata "+i).setEntity(b).setEntity(m);if(-1!=s&&(!b||s!=b.serialNumber))throw new P(er.SERVICETOKEN_MASTERTOKEN_MISMATCH,"st mtserialnumber "+s+"; mt "+b).setEntity(b).setEntity(m);if(-1!=u&&(!m||u!=m.serialNumber))throw new P(er.SERVICETOKEN_USERIDTOKEN_MISMATCH,"st uitserialnumber "+u+"; uit "+m).setEntity(b).setEntity(m);if(c=!0===c,h){if(!y[h])throw new P(er.UNIDENTIFIED_COMPRESSION,h);l=h}else l=null;g?g.verify(r,a,{result:function(n){$n(v,function(){var t,e;if(n){try{t=O(f)}catch(t){throw new P(er.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+i,t).setEntity(b).setEntity(m)}if(!t||0!=f.length&&0==t.length)throw new P(er.SERVICETOKEN_SERVICEDATA_INVALID,"servicetokendata "+i).setEntity(b).setEntity(m);c&&0<t.length?g.decrypt(t,{result:function(i){$n(v,function(){var t=l?li(l,i):i,e=new ua(r,a,n);new Fe(p,o,t,-1!=s?b:null,-1!=u?m:null,c,l,g,e,v)})},error:function(t){$n(v,function(){throw t instanceof P&&(t.setEntity(b),t.setUser(m)),t})}}):(t=l?li(l,t):t,e=new ua(r,a,n),new Fe(p,o,t,-1!=s?b:null,-1!=u?m:null,c,l,g,e,v))}else t=""==f?new Uint8Array(0):null,e=new ua(r,a,n),new Fe(p,o,t,-1!=s?b:null,-1!=u?m:null,c,l,g,e,v)})},error:function(t){$n(v,function(){throw t instanceof P&&(t.setEntity(b),t.setUser(m)),t})}}):(t=""==f?new Uint8Array(0):null,e=new ua(r,a,!1),new Fe(p,o,t,-1!=s?b:null,-1!=u?m:null,c,l,g,e,v))})},Ke={EMAIL_PASSWORD:"EMAIL_PASSWORD",NETFLIXID:"NETFLIXID",SSO:"SSO",SWITCH_PROFILE:"SWITCH_PROFILE",MDX:"MDX"},Object.freeze(Ke),Ve=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},getAuthData:function(){},equals:function(t){return this===t||t instanceof Ve&&this.scheme==t.scheme},toJSON:function(){var t={};return t.scheme=this.scheme,t.authdata=this.getAuthData(),t}}),Ge=function(n,r,a,o){$n(o,function(){var t,e=a.scheme,i=a.authdata;if(!e||!i)throw new N(er.JSON_PARSE_ERROR,"userauthdata "+JSON.stringify(a));if(!Ke[e])throw new L(er.UNIDENTIFIED_USERAUTH_SCHEME,e);if(!(t=n.getUserAuthenticationFactory(e)))throw new L(er.USERAUTH_FACTORY_NOT_FOUND,e);t.createData(n,r,i,o)})},pi=u.Class.create({init:function(t){Object.defineProperties(this,{scheme:{value:t,writable:!1,configurable:!1}})},createData:function(t,e,i,n){},authenticate:function(t,e,i,n){}}),Je=Ve.extend({init:function t(e,i){t.base.call(this,Ke.NETFLIXID),Object.defineProperties(this,{netflixId:{value:e,writable:!1,configurable:!1},secureNetflixId:{value:i,writable:!1,configurable:!1}})},getAuthData:function(){var t={};return t.netflixid=this.netflixId,this.secureNetflixId&&(t.securenetflixid=this.secureNetflixId),t},equals:function t(e){return this===e||e instanceof Je&&(t.base.call(this,e)&&this.netflixId==e.netflixId&&this.secureNetflixId==e.secureNetflixId)}}),ze=function(t){var e=t.netflixid,i=t.securenetflixid;if(!e)throw new N(er.JSON_PARSE_ERROR,"NetflixId authdata "+JSON.stringify(t));return new Je(e,i)},Ye=pi.extend({init:function t(){t.base.call(this,Ke.NETFLIXID)},createData:function(t,e,i,n){$n(n,function(){return ze(i)})},authenticate:function(t,e,i,n){if(!(i instanceof Je))throw new j("Incorrect authentication data type "+i+".");if(t=i.secureNetflixId,!i.netflixId||!t)throw new L(er.NETFLIXID_COOKIES_BLANK).setUser(i);throw new L(er.UNSUPPORTED_USERAUTH_DATA,this.scheme).setUser(i)}}),We=Ve.extend({init:function t(e,i){t.base.call(this,Ke.EMAIL_PASSWORD),Object.defineProperties(this,{email:{value:e,writable:!1,configurable:!1},password:{value:i,writable:!1,configurable:!1}})},getAuthData:function(){var t={};return t.email=this.email,t.password=this.password,t},equals:function t(e){return this===e||e instanceof We&&(t.base.call(this,this,e)&&this.email==e.email&&this.password==e.password)}}),Xe=function(t){var e=t.email,i=t.password;if(!e||!i)throw new N(er.JSON_PARSE_ERROR,"email/password authdata "+JSON.stringify(t));return new We(e,i)},Qe=pi.extend({init:function t(){t.base.call(this,Ke.EMAIL_PASSWORD)},createData:function(t,e,i,n){$n(n,function(){return Xe(i)})},authenticate:function(t,e,i,n){if(!(i instanceof We))throw new j("Incorrect authentication data type "+i+".");if(t=i.password,!i.email||!t)throw new L(er.EMAILPASSWORD_BLANK).setUser(i);throw new L(er.UNSUPPORTED_USERAUTH_DATA,this.scheme).setUser(i)}}),Pn=ti={MSL:"MSL",NTBA:"NTBA",MSL_LEGACY:"MSL_LEGACY"},Rn=u.Class.create({getAction:function(){},getNonce:function(){},getPin:function(){},getSignature:function(){},getEncoding:function(){},equals:function(){}}),Nn=wn=Rn.extend({init:function(n,r,a,i,o,t,s){var u;function c(t,e){$n(s,function(){return Object.defineProperties(this,{_userIdToken:{value:n,writable:!1,enumerable:!1,configurable:!1},_action:{value:r,writable:!1,enumerable:!1,configurable:!1},_nonce:{value:a,writable:!1,enumerable:!1,configurable:!1},_pin:{value:i,writable:!1,enumerable:!1,configurable:!1},_encoding:{value:t,writable:!1,enumerable:!1,configurable:!1},_signature:{value:e,writable:!1,enumerable:!1,configurable:!1}}),this},u)}$n(s,function(){t?c(t.encoding,t.signature):o.encrypt(Jn(i,I),{result:function(t){var i;i=t,$n(s,function(){var t,e;try{(t={}).useridtoken=n,t.action=r,t.nonce=a,t.pin=g(i),e=Jn(JSON.stringify(t),I)}catch(t){throw new N(er.JSON_ENCODE_ERROR,"MSL-based MDX authdata",t)}o.sign(e,{result:function(t){c(e,t)},error:s.error})},u)},error:s.error})},u=this)},getUserIdToken:function(){return this._userIdToken},getAction:function(){return this._action},getNonce:function(){return this._nonce},getPin:function(){return this._pin},getSignature:function(){return this._signature},getEncoding:function(){return this._encoding},equals:function(t){return this===t||t instanceof Nn&&(this._action==t._action&&this._nonce==t._nonce&&this._pin==t._pin&&this._userIdToken.equals(t._userIdToken))}}),wn.ACTION="userauth",jn=function(i,n,f,l,p){function r(h){$n(p,function(){var t,e,o,s,u,c=Gn(f,I);try{e=(t=JSON.parse(c)).useridtoken,o=t.action,s=t.nonce,u=t.pin}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+c,t);throw t}if(!(e&&"object"==typeof e&&o&&"string"==typeof o&&s&&"number"==typeof s&&u)||"string"!=typeof u)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+c);Be(i,e,n,{result:function(t){$n(p,function(){if(!t.isDecrypted())throw new L(er.USERAUTH_USERIDTOKEN_NOT_DECRYPTED,"MDX authdata "+c);var e,i,n,r,a;e=h,i=t,n=o,r=s,a=u,$n(p,function(){var t=O(a);e.decrypt(t,{result:function(e){$n(p,function(){var t=Gn(e,I);new Nn(i,n,r,t,null,{encoding:f,signature:l},p)})},error:p.error})})})},error:function(t){$n(p,function(){if(t instanceof P)throw new L(er.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+c,t);throw t})}})})}$n(p,function(){var t,e;try{t=i.getMslStore().getCryptoContext(n),e=t||new gt(i,n)}catch(t){if(t instanceof S)throw new L(er.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+g(f));throw t}e.verify(f,l,{result:function(t){$n(p,function(){if(!t)throw new R(er.MDX_USERAUTH_VERIFICATION_FAILED,"MDX authdata "+g(f));r(e)})},error:p.error})})},Cn={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},Ln=ei=Rn.extend({init:function(t,e,i,n){var r=ca("action",ha(t)),a=ca("nonce",e.toString());i=ca("pin",i),r=Jn(ca("registerdata",r+a+i),"utf-8"),Object.defineProperties(this,{_action:{value:t,writable:!1,enumerable:!1,configurable:!1},_nonce:{value:e,writable:!1,enumerable:!1,configurable:!1},_pin:{value:null,writable:!1,enumerable:!1,configurable:!1},_encoding:{value:r,writable:!1,enumerable:!1,configurable:!1},_signature:{value:n,writable:!1,enumerable:!1,configurable:!1}})},getAction:function(){return this._action},getNonce:function(){return this._nonce},getPin:function(){return this._pin},getSignature:function(){return this._signature},getEncoding:function(){return this._encoding},equals:function(t){return this===t||t instanceof Ln&&(this._action==t._action&&this._nonce==t._nonce&&this._pin==t._pin)}}),ei.ACTION="regpairrequest",Mn=Rn=Rn.extend({init:function(o,s,i,u,t,c){var n;function h(t,e){$n(c,function(){return Object.defineProperties(this,{_action:{value:o,writable:!1,enumerable:!1,configurable:!1},_nonce:{value:s,writable:!1,enumerable:!1,configurable:!1},_pin:{value:i,writable:!1,enumerable:!1,configurable:!1},_encoding:{value:t,writable:!1,enumerable:!1,configurable:!1},_signature:{value:e,writable:!1,enumerable:!1,configurable:!1}}),this},n)}$n(c,function(){t?h(t.encoding,t.signature):u.encrypt(Jn(i,"utf-8"),{result:function(t){var a;a=t,$n(c,function(){var e,t=g(a),i=ca("action",ha(o)),n=ca("nonce",s.toString()),r=ca("pin",t);i=ca("registerdata",i+n+r),e=Jn(i,"utf-8"),t="action="+fa(o)+"&nonce="+fa(s.toString())+"&pin="+fa(t),u.sign(Jn(t,"utf-8"),{result:function(t){h(e,t)},error:c.error})},n)},error:c.error})},n=this)},getAction:function(){return this._action},getNonce:function(){return this._nonce},getPin:function(){return this._pin},getSignature:function(){return this._signature},getEncoding:function(){return this._encoding},equals:function(t){return this===t||t instanceof Mn&&(this._action==t._action&&this._nonce==t._nonce&&this._pin==t._pin)}}),Rn.ACTION=ei.ACTION,Dn=function(s,u,c,h,f){$n(f,function(){var t,e,i,n,r,a=s.getMslStore().getCryptoContext(u),o=a||new gt(s,u);if(a=Gn(c,"utf-8"),a=(t=(new DOMParser).parseFromString(a,"application/xml")).getElementsByTagName("action"),e=t.getElementsByTagName("nonce"),t=t.getElementsByTagName("pin"),i=a&&1==a.length&&a[0].firstChild?a[0].firstChild.nodeValue:null,n=e&&1==e.length&&e[0].firstChild?parseInt(e[0].firstChild.nodeValue):null,r=t&&1==t.length&&t[0].firstChild?t[0].firstChild.nodeValue:null,!i||!n||!r)throw new N(er.XML_PARSE_ERROR,"MDX authdata "+g(c));a="action="+fa(i)+"&nonce="+fa(n.toString())+"&pin="+fa(r),o.verify(Jn(a,"utf-8"),h,{result:function(e){$n(f,function(){var t;if(!e)throw new R(er.MDX_USERAUTH_VERIFICATION_FAILED,"MDX authdata "+g(c));t=O(r),o.decrypt(t,{result:function(e){$n(f,function(){var t=Gn(e,"utf-8");new Mn(i,n,t,null,{encoding:c,signature:h},f)})},error:f.error})})},error:f.error})})},Ze=Ve.extend({init:function t(e,i,n,r,a,o){var s,u,c,h,f,l;if(t.base.call(this,Ke.MDX),c=u=s=null,"string"==typeof n)e=Pn.MSL_LEGACY,c=n;else if(n instanceof Uint8Array)e=Pn.NTBA,u=n;else{if(!(n instanceof Me))throw new TypeError("Controller token "+n+" is not a master token, encrypted CTicket, or MSL token construct.");e=Pn.MSL,s=n}f=h=n=null,o&&(n=(l=o.controllerAuthData).getAction(),h=l.getPin(),o=o.userIdToken,l instanceof Nn?f=l.getUserIdToken().customer:o&&(f=o.customer)),Object.defineProperties(this,{mechanism:{value:e,writable:!1,configurable:!1},action:{value:n,writable:!1,configurable:!1},targetPin:{value:i,writable:!1,configurable:!1},controllerPin:{value:h,writable:!1,configurable:!1},customer:{value:f,writable:!1,configurable:!1},_masterToken:{value:s,writable:!1,enumerable:!1,configurable:!1},_encryptedCTicket:{value:u,writable:!1,enumerable:!1,configurable:!1},_mslTokens:{value:c,writable:!1,enumerable:!1,configurable:!1},_controllerEncoding:{value:r,writable:!1,enumerable:!1,configurable:!1},_signature:{value:a,writable:!1,enumerable:!1,configurable:!1}})},getAuthData:function(){var t,e={};switch(this.mechanism){case Pn.MSL:t=JSON.parse(JSON.stringify(this._masterToken)),e.mastertoken=t;break;case Pn.NTBA:t=Gn(this._encryptedCTicket,"utf-8"),e.cticket=t;break;case Pn.MSL_LEGACY:e.cticket=this._mslTokens;break;default:throw new j("Unsupported MDX mechanism.")}return e.pin=this.targetPin,e.mdxauthdata=g(this._controllerEncoding),e.signature=g(this._signature),e},equals:function t(e){return this===e||e instanceof Ze&&(t.base.call(this,e)&&(this._masterToken==e._masterToken||this._masterToken&&this._masterToken.equals(e._masterToken))&&(this._encryptedCTicket==e._encryptedCTicket||this._encryptedCTicket&&Wn(this._encryptedCTicket,e._encryptedCTicket))&&this._mslTokens==e._mslTokens&&Wn(this._controllerEncoding,e._controllerEncoding)&&Wn(this._signature,e._signature))}}),$e=function(c,h,f){function u(a,o,s,u){$n(f,function(){var i,n,e=o.split(",");if(3!=e.length||"1"!=e[0])throw new L(er.UNIDENTIFIED_USERAUTH_MECHANISM,"MDX authdata "+JSON.stringify(h));i=e[1],n={result:function(t){var i,n,r;i=e[2],n=t,r={result:function(e){Dn(c,t,s,u,{result:function(t){$n(f,function(){return new Ze(c,a,o,s,u,{controllerAuthData:t,userIdToken:e})})},error:function(t){$n(f,function(){if(t instanceof S)throw new L(er.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+JSON.stringify(h),t);throw t})}})},error:f.error},$n(r,function(){var t,e;try{t=O(i)}catch(t){throw new L(er.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+JSON.stringify(h),t)}if(!t||0==t.length)throw new L(er.USERAUTH_USERIDTOKEN_MISSING,"MDX authdata "+JSON.stringify(h));try{e=JSON.parse(Gn(t,"utf-8")),Be(c,e,n,{result:function(t){$n(r,function(){if(!t.isDecrypted())throw new L(er.USERAUTH_USERIDTOKEN_NOT_DECRYPTED,"MDX authdata "+JSON.stringify(h));return t})},error:function(t){$n(r,function(){if(t instanceof P)throw new L(er.USERAUTH_USERIDTOKEN_INVALID,"MDX authdata "+JSON.stringify(h),t);throw t})}})}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(h),t);throw t}})},error:f.error},$n(n,function(){var t,e;try{t=O(i)}catch(t){throw new L(er.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(h),t)}if(!t||0==t.length)throw new L(er.USERAUTH_MASTERTOKEN_MISSING,"MDX authdata "+JSON.stringify(h));try{e=JSON.parse(Gn(t,"utf-8")),De(c,e,{result:function(t){$n(n,function(){if(!t.isDecrypted())throw new L(er.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+h.toString());return t})},error:function(t){$n(n,function(){if(t instanceof P)throw new L(er.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(h),t);throw t})}})}catch(t){if(t instanceof SyntaxError)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(h),t);throw t}})})}$n(f,function(){var t,e,r,i,a,n=h.pin,o=h.mdxauthdata,s=h.signature;if(!n||"string"!=typeof n||!o||"string"!=typeof o||!s||"string"!=typeof s)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(h));try{t=O(o),e=O(s)}catch(t){throw new L(er.MDX_CONTROLLERDATA_INVALID,"MDX authdata "+JSON.stringify(h),t)}if(h.mastertoken){if(!(o=h.mastertoken)||"object"!=typeof o)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(h));r=n,i=t,a=e,De(c,o,{result:function(n){$n(f,function(){if(!n.isDecrypted())throw new L(er.USERAUTH_MASTERTOKEN_NOT_DECRYPTED,"MDX authdata "+h.toString());jn(c,n,i,a,{result:function(i){$n(f,function(){var t=i.getEncoding(),e=i.getSignature();return new Ze(c,r,n,t,e,{controllerAuthData:i,userIdToken:null})})},error:f.error})})},error:function(t){$n(f,function(){if(t instanceof P)throw new L(er.USERAUTH_MASTERTOKEN_INVALID,"MDX authdata "+JSON.stringify(h),t);throw t})}})}else{if(!h.cticket)throw new L(er.UNIDENTIFIED_USERAUTH_MECHANISM,"MDX authdata "+JSON.stringify(h));if(!(o=h.cticket)||"string"!=typeof o)throw new N(er.JSON_PARSE_ERROR,"MDX authdata "+JSON.stringify(h));-1==o.indexOf(",")?$n(f,function(){throw new L(er.UNSUPPORTED_USERAUTH_MECHANISM,"NtbaControllerData$parse")}):u(n,o,t,e)}})},Un=wn.ACTION,Bn=ei.ACTION,Fn=Rn.ACTION,ii=pi.extend({init:function t(){t.base.call(this,Ke.MDX)},createData:function(t,e,i,n){$e(t,i,n)},authenticate:function(t,e,i,n){if(!(i instanceof Ze))throw new j("Incorrect authentication data type "+i.getClass().getName()+".");switch(t=i.action,i.mechanism){case ti.MSL:if(Un!=t)throw new L(er.MDX_USERAUTH_ACTION_INVALID).setUser(i);break;case ti.NTBA:if(Bn!=t)throw new L(er.MDX_USERAUTH_ACTION_INVALID).setUser(i);break;case ti.MSL_LEGACY:if(Fn!=t)throw new L(er.MDX_USERAUTH_ACTION_INVALID).setUser(i)}if(t=i.controllerPin,e=i.targetPin,!t||!e)throw new L(er.MDX_PIN_BLANK).setUser(i);if(t!=e)throw new L(er.MDX_PIN_MISMATCH).setUser(i);if(!(t=i.customer))throw new L(er.MDX_USER_UNKNOWN).setUser(i);if(n&&(n=n.customer,!t.equals(n)))throw new L(er.USERIDTOKEN_USERAUTH_DATA_MISMATCH,"uad customer "+t+"; uit customer "+n).setUser(i);return t}}),qn={MICROSOFT_SAML:"MICROSOFT_SAML",SAMSUNG:"SAMSUNG",MICROSOFT_JWT:"MICROSOFT_JWT",GOOGLE_JWT:"GOOGLE_JWT"},Hn=ai=u.Class.create({init:function(t,e){Object.defineProperties(this,{email:{value:t,writable:!1,enumerable:!0,configurable:!1},password:{value:e,writable:!1,enumerable:!0,configurable:!1}})}}),Kn=oi=u.Class.create({init:function(t,e){Object.defineProperties(this,{netflixId:{value:t,writable:!1,enumerable:!0,configurable:!1},secureNetflixId:{value:e,writable:!1,enumerable:!0,configurable:!1}})}}),ni=Ve.extend({init:function t(e,i,n,r){var a,o,s,u;t.base.call(this,Ke.SSO),u=s=o=a=null,n instanceof Hn?(a=n.email,o=n.password):n instanceof Kn&&(s=n.netflixId,u=n.secureNetflixId),Object.defineProperties(this,{mechanism:{value:e,writable:!1,configurable:!1},token:{value:i,writable:!1,configurable:!1},email:{value:a,writable:!1,configurable:!1},password:{value:o,writable:!1,configurable:!1},netflixId:{value:s,writable:!1,configurable:!1},secureNetflixId:{value:u,writable:!1,configurable:!1},profileGuid:{value:void 0===r?null:r,writable:!1,configurable:!1}})},getAuthData:function(){var t={};return t.mechanism=this.mechanism,t.token=g(this.token),this.email&&this.password?(t.email=this.email,t.password=this.password):this.netflixId&&this.secureNetflixId&&(t.netflixid=this.netflixId,t.securenetflixid=this.secureNetflixId),this.profileGuid&&(t.profileguid=this.profileGuid),t},equals:function t(e){return this===e||e instanceof ni&&(t.base.call(this,e)&&this.mechanism==e.mechanism&&Wn(this.token,e.token)&&this.email==e.email&&this.password==e.password&&this.netflixId==e.netflixId&&this.secureNetflixId==e.secureNetflixId&&this.profileGuid==e.profileGuid)}}),ri=function(e){var t,i,n,r,a,o,s,u=e.mechanism,c=e.token;if(!u||!c||"string"!=typeof c)throw new N(er.JSON_PARSE_ERROR,"SSO authdata "+JSON.stringify(e));if(!qn[u])throw new L(er.UNIDENTIFIED_USERAUTH_MECHANISM,"SSO authdata "+JSON.stringify(e));if(t=e.email,i=e.password,n=e.netflixid,r=e.securenetflixid,a=e.profileguid,t&&!i||!t&&i||n&&!r||!n&&r||t&&n)throw new N(er.JSON_PARSE_ERROR,"SSO authdata "+JSON.stringify(e));try{o=O(c)}catch(t){throw new L(er.SSOTOKEN_INVALID,"SSO authdata "+JSON.stringify(e),t)}return t&&i?s=new Hn(t,i):n&&r&&(s=new Kn(n,r)),new ni(u,o,s,a)},si=pi.extend({init:function t(){t.base.call(this,Ke.SSO)},createData:function(t,e,i,n){$n(n,function(){return ri(i)})},authenticate:function(t,e,i,n){var r,a;if(!(i instanceof ni))throw new j("Incorrect authentication data type "+i+".");if(t=i.token,e=i.email,n=i.password,r=i.netflixId,a=i.secureNetflixId,!t||0==t.length)throw new L(er.SSOTOKEN_BLANK);if(!(null===e&&null===n||e&&n))throw new L(er.EMAILPASSWORD_BLANK);if(!(null===r&&null===a||r&&a))throw new L(er.NETFLIXID_COOKIES_BLANK).setUser(i);throw new L(er.UNSUPPORTED_USERAUTH_DATA,this.scheme).setUser(i)}}),ui=Ve.extend({init:function t(e,i){t.base.call(this,Ke.SWITCH_PROFILE),Object.defineProperties(this,{userIdToken:{value:e,writable:!1,configurable:!1},profileGuid:{value:i,writable:!1,configurable:!1}})},getAuthData:function(){var t={};return t.useridtoken=JSON.parse(JSON.stringify(this.userIdToken)),t.profileguid=this.profileGuid,t},equals:function t(e){return this==e||e instanceof ui&&(t.base.call(this,e)&&this.userIdToken.equals(e.userIdToken)&&this.profileGuid==e.profileGuid)}}),ci=function(i,n,r,a){$n(a,function(){var t,e;if(!n)throw new L(er.USERAUTH_MASTERTOKEN_MISSING);if(t=r.useridtoken,e=r.profileguid,"object"!=typeof t||"string"!=typeof e)throw new N(er.JSON_PARSE_ERROR,"switch profile authdata "+JSON.stringify(r));Be(i,t,n,{result:function(t){$n(a,function(){if(!t.isDecrypted())throw new L(er.USERAUTH_USERIDTOKEN_NOT_DECRYPTED,"switch profile authdata "+JSON.stringify(r));return new ui(t,e)})},error:function(t){a.error(new L(er.USERAUTH_USERIDTOKEN_INVALID,"switch profile authdata "+JSON.stringify(r),t))}})})},hi=pi.extend({init:function t(e){t.base.call(this,Ke.SWITCH_PROFILE),Object.defineProperties(this,{_store:{value:e,writable:!1,enumerable:!1,configurable:!1}})},createData:function(t,e,i,n){ci(t,e,i,n)},authenticate:function(t,e,i,n){if(!(i instanceof ui))throw new j("Incorrect authentication data type "+i+".");if(e=i.userIdToken,!(t=i.profileGuid))throw new L(NetflixMslError.PROFILEGUID_BLANK).setUserAuthenticationData(i);if(!(e=e.user))throw new L(er.USERAUTH_USERIDTOKEN_NOT_DECRYPTED).setUserAuthenticationData(i);if(!(t=this._store.switchUsers(e,t)))throw new L(NetflixMslError.PROFILE_SWITCH_DISALLOWED).setUserAuthenticationData(i);if(n&&(n=n.user,!t.equals(n)))throw new L(er.USERIDTOKEN_USERAUTH_DATA_MISMATCH,"uad user "+t+"; uit user "+n).setUserAuthenticationData(i);return t}}),Object.freeze({ENTITY_REAUTH:v.ENTITY_REAUTH,ENTITYDATA_REAUTH:v.ENTITYDATA_REAUTH}),Rn=u.Class.create({getTime:function(){},getRandom:function(){},isPeerToPeer:function(){},getMessageCapabilities:function(){},getEntityAuthenticationData:function(t,e){},getMslCryptoContext:function(){},getEntityAuthenticationFactory:function(t){},getUserAuthenticationFactory:function(t){},getTokenFactory:function(){},getKeyExchangeFactory:function(t){},getKeyExchangeFactories:function(){},getMslStore:function(){}}),pi=u.Class.create({setCryptoContext:function(t,e){},getMasterToken:function(){},getNonReplayableId:function(t){},getCryptoContext:function(t){},removeCryptoContext:function(t){},clearCryptoContexts:function(){},addUserIdToken:function(t,e){},getUserIdToken:function(t){},removeUserIdToken:function(t){},clearUserIdTokens:function(){},addServiceTokens:function(t){},getServiceTokens:function(t,e){},removeServiceTokens:function(t,e,i){},clearServiceTokens:function(){}}),Vn=y,fi=function(t,e){switch(t){case Vn.LZW:return n(e,{});case Vn.GZIP:return gzip$compress(e);default:throw new P(er.UNSUPPORTED_COMPRESSION,t)}},li=function(t,e,i){switch(t){case Vn.LZW:return a(e);case Vn.GZIP:return gzip$uncompress(e);default:throw new P(er.UNSUPPORTED_COMPRESSION,t.name())}},pi.extend({setCryptoContext:function(t,e){},getMasterToken:function(){return null},getNonReplayableId:function(t){return 1},getCryptoContext:function(t){return null},removeCryptoContext:function(t){},clearCryptoContexts:function(){},addUserIdToken:function(t,e){},getUserIdToken:function(t){return null},removeUserIdToken:function(t){},clearUserIdTokens:function(){},addServiceTokens:function(t){},getServiceTokens:function(t,e){if(e){if(!t)throw new P(er.USERIDTOKEN_MASTERTOKEN_NULL);if(!e.isBoundTo(t))throw new P(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber)}return[]},removeServiceTokens:function(t,e,i){if(i&&e&&!i.isBoundTo(e))throw new P(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+i.masterTokenSerialNumber+"; mt "+e.serialNumber)},clearServiceTokens:function(){}}),pi=pi.extend({init:function t(){t.base.call(this),Object.defineProperties(this,{masterTokens:{value:{},writable:!1,enumerable:!1,configurable:!1},cryptoContexts:{value:{},writable:!1,enumerable:!1,configurable:!1},userIdTokens:{value:{},writable:!1,enumerable:!1,configurable:!1},nonReplayableIds:{value:{},writable:!1,enumerable:!1,configurable:!1},unboundServiceTokens:{value:{},writable:!1,enumerable:!1,configurable:!1},mtServiceTokens:{value:{},writable:!1,enumerable:!1,configurable:!1},uitServiceTokens:{value:{},writable:!1,enumerable:!1,configurable:!1}})},setCryptoContext:function(t,e){var i;e?(i=t.uniqueKey(),this.masterTokens[i]=t,this.cryptoContexts[i]=e):this.removeCryptoContext(t)},getMasterToken:function(){var t,e,i=null;for(t in this.masterTokens)e=this.masterTokens[t],i&&!e.isNewerThan(i)||(i=e);return i},getNonReplayableId:function(t){var e;if(t=t.serialNumber,(e=this.nonReplayableIds[t]!==A?this.nonReplayableIds[t]:0)<0||x<e)throw new j("Non-replayable ID "+e+" is outside the valid range.");return e=e==x?0:e+1,this.nonReplayableIds[t]=e},getCryptoContext:function(t){return this.cryptoContexts[t.uniqueKey()]},removeCryptoContext:function(e){var t,i,n,r=e.uniqueKey();if(this.masterTokens[r]){for(i in t=e.serialNumber,this.masterTokens)if(!(n=this.masterTokens[i]).equals(e)&&n.serialNumber==t)return delete this.masterTokens[r],void delete this.cryptoContexts[r];Object.keys(this.userIdTokens).forEach(function(t){(t=this.userIdTokens[t]).isBoundTo(e)&&this.removeUserIdToken(t)},this);try{this.removeServiceTokens(null,e,null)}catch(t){if(t instanceof P)throw new j("Unexpected exception while removing master token bound service tokens.",t);throw t}delete this.nonReplayableIds[t],delete this.masterTokens[r],delete this.cryptoContexts[r]}},clearCryptoContexts:function(){[this.masterTokens,this.cryptoContexts,this.nonReplayableIds,this.userIdTokens,this.uitServiceTokens,this.mtServiceTokens].forEach(function(t){for(var e in t)delete t[e]},this)},addUserIdToken:function(t,e){var i,n=!1;for(i in this.masterTokens)if(e.isBoundTo(this.masterTokens[i])){n=!0;break}if(!n)throw new P(er.USERIDTOKEN_MASTERTOKEN_NOT_FOUND,"uit mtserialnumber "+e.mtSerialNumber);this.userIdTokens[t]=e},getUserIdToken:function(t){return this.userIdTokens[t]},removeUserIdToken:function(e){var t,i,n=null;for(t in this.masterTokens)if(i=this.masterTokens[t],e.isBoundTo(i)){n=i;break}Object.keys(this.userIdTokens).forEach(function(t){if(this.userIdTokens[t].equals(e)){try{this.removeServiceTokens(null,n,e)}catch(t){if(t instanceof P)throw new j("Unexpected exception while removing user ID token bound service tokens.",t);throw t}delete this.userIdTokens[t]}},this)},clearUserIdTokens:function(){for(var t in this.userIdTokens)this.removeUserIdToken(this.userIdTokens[t])},addServiceTokens:function(t){t.forEach(function(t){var e,i;if(t.isMasterTokenBound()){for(i in e=!1,this.masterTokens)if(t.isBoundTo(this.masterTokens[i])){e=!0;break}if(!e)throw new P(er.SERVICETOKEN_MASTERTOKEN_NOT_FOUND,"st mtserialnumber "+t.mtSerialNumber)}if(t.isUserIdTokenBound()){for(var n in e=!1,this.userIdTokens)if(t.isBoundTo(this.userIdTokens[n])){e=!0;break}if(!e)throw new P(er.SERVICETOKEN_USERIDTOKEN_NOT_FOUND,"st uitserialnumber "+t.uitSerialNumber)}},this),t.forEach(function(t){var e;t.isUnbound()?this.unboundServiceTokens[t.uniqueKey()]=t:(t.isMasterTokenBound()&&((e=(e=this.mtServiceTokens[t.mtSerialNumber])||{})[t.uniqueKey()]=t,this.mtServiceTokens[t.mtSerialNumber]=e),t.isUserIdTokenBound()&&((e=this.uitServiceTokens[t.uitSerialNumber])||(e={}),e[t.uniqueKey()]=t,this.uitServiceTokens[t.uitSerialNumber]=e))},this)},getServiceTokens:function(t,e){var i,n,r,a;if(e){if(!t)throw new P(er.USERIDTOKEN_MASTERTOKEN_NULL);if(!e.isBoundTo(t))throw new P(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber)}for(n in i={},this.unboundServiceTokens)i[(r=this.unboundServiceTokens[n]).uniqueKey()]=r;if(t&&(n=this.mtServiceTokens[t.serialNumber]))for(var o in n)(r=n[o]).isUserIdTokenBound()||(i[o]=r);if(e=e&&this.uitServiceTokens[e.serialNumber])for(var s in e)(o=e[s]).isBoundTo(t)&&(i[s]=o);for(a in t=[],i)t.push(i[a]);return t},removeServiceTokens:function(i,t,e){var n,r;if(e&&t&&!e.isBoundTo(t))throw new P(er.USERIDTOKEN_MASTERTOKEN_MISMATCH,"uit mtserialnumber "+e.mtSerialNumber+"; mt "+t.serialNumber);!i||t||e||Object.keys(this.unboundServiceTokens).forEach(function(t){this.unboundServiceTokens[t].name==i&&delete this.unboundServiceTokens[t]},this),t&&!e&&(n=this.mtServiceTokens[t.serialNumber])&&(Object.keys(n).forEach(function(t){var e=n[t];i&&e.name!=i||delete n[t]},this),this.mtServiceTokens[t.serialNumber]=n),e&&(r=this.uitServiceTokens[e.serialNumber])&&((t=Object.keys(r)).forEach(function(t){var e=r[t];i&&e.name!=i||delete r[t]},this),this.uitServiceTokens[e.serialNumber]=r)},clearServiceTokens:function(){[this.unboundServiceTokens,this.mtServiceTokens,this.uitServiceTokens].forEach(function(t){for(var e in t)delete t[e]},this)}}),di=Ti.extend({init:function t(){t.base.call(this),Object.defineProperties(this,{_contextMap:{value:{},writable:!1,enumerable:!1,configurable:!1}})},addCryptoContext:function(t,e){e&&t&&t.length&&(t=g(t),this._contextMap[t]=e)},getCryptoContext:function(t){return t&&t.length?(t=g(t),this._contextMap[t]||null):null},removeCryptoContext:function(t){t&&t.length&&(t=g(t),delete this._contextMap[t])}}),bi=St.extend({init:function t(e,i,n,r){t.base.call(this,e),Object.defineProperties(this,{_kde:{value:i,writable:!1,enumerable:!1,configurable:!1},_kdh:{value:n,writable:!1,enumerable:!1,configurable:!1},_kdw:{value:r,writable:!1,enumerable:!1,configurable:!1}})},getCryptoContext:function(t,e){if(!(e instanceof Et))throw new j("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new o(er.ENTITY_NOT_FOUND,"mgk "+e.identity);return new mt(t,this.localIdentity,this._kde,this._kdh,this._kdw)}}),mi=Ot.extend({init:function t(e,i,n,r){t.base.call(this,e),Object.defineProperties(this,{_kpe:{value:i,writable:!1,enumerable:!1,configurable:!1},_kph:{value:n,writable:!1,enumerable:!1,configurable:!1},_kpw:{value:r,writable:!1,enumerable:!1,configurable:!1}})},getCryptoContext:function(t,e){if(!(e instanceof Tt))throw new j("Incorrect authentication data type "+JSON.stringify(e)+".");if(e.identity!=this.localIdentity)throw new o(er.ENTITY_NOT_FOUND,"psk "+e.identity);return new mt(t,this.localIdentity,this._kpe,this._kph,this._kpw)}}),gi=pi.extend({init:function t(e,i,n,r,a,o){t.base.call(this),this._log=e,this._esn=i,this._keyRequestData=n,this._createKeyRequestData=r,this._systemKeyName=a,this._systemKeyWrapFormat=o},setCryptoContext:function t(e,i,n){var r=this;r._log.trace("Adding MasterToken",{SequenceNumber:e.sequenceNumber,SerialNumber:e.serialNumber,Expiration:e.expiration.getTime()}),t.base.call(this,e,i),!n&&(e=r._createKeyRequestData)&&(r._log.trace("Generating new keyx request data"),e().then(function(t){r._keyRequestData=t},function(t){r._log.error("Unable to generate new keyx request data",""+t)}))},addUserIdToken:function t(e,i){this._log.trace("Adding UserIdToken",{UserId:e,SerialNumber:i.serialNumber,MTSerialNumber:i.mtSerialNumber,Expiration:i.expiration.getTime()}),t.base.call(this,e,i)},addServiceTokens:function t(e){t.base.call(this,e.filter(function(t){return!vi[t.name]}))},getUserIdTokenKeys:function(){var t,e=[];for(t in this.userIdTokens)e.push(t);return e},rekeyUserIdToken:function(t,e){this.userIdTokens[t]&&(this.userIdTokens[e]=this.userIdTokens[t],delete this.userIdTokens[t])},getKeyRequestData:function(){return this._keyRequestData},getStoreState:function(t){var a=this;$n(t,function(){var r=a.getMasterToken();r?a.getKeysForStore(r,{result:function(n){$n(t,function(){var e,i=a.userIdTokens,t=Object.keys(i).map(function(t){var e=i[t];return{userId:t,userIdTokenJSON:i[t].toJSON(),serviceTokenJSONList:a.getServiceTokens(r,e).map(rr)}});return n.esn=a._esn,n.masterTokenJSON=r.toJSON(),n.userList=t,(e=a._keyRequestData.storeData)&&Object.keys(e).forEach(function(t){n[t]=e[t]}),n})},timeout:t.timeout,error:t.error}):t.result(null)})},getKeysForStore:function(e,i){var n=this;$n(i,function(){var t=n.getCryptoContext(e);if(!(t={encryptionKey:t.encryptionKey,hmacKey:t.hmacKey}).encryptionKey||!t.hmacKey)throw new P(er.INTERNAL_EXCEPTION,"Unable to get CryptoContext keys");if(!n._systemKeyWrapFormat)return t;n.wrapKeysWithSystemKey(t,i)})},wrapKeysWithSystemKey:function(a,o){var s=this;ar(this._systemKeyName,{result:function(t){$n(o,function(){var e=a.encryptionKey,i=a.hmacKey,n=e[yi],r=i[yi];if(n&&r)return{wrappedEncryptionKey:n,wrappedHmacKey:r};Promise.resolve().then(function(){return Promise.all([T.wrapKey(s._systemKeyWrapFormat,e,t,t.algorithm),T.wrapKey(s._systemKeyWrapFormat,i,t,t.algorithm)])}).then(function(t){n=g(t[0]),e[yi]=n,r=g(t[1]),i[yi]=r,o.result({wrappedEncryptionKey:n,wrappedHmacKey:r})}).catch(function(t){o.error(new P(er.INTERNAL_EXCEPTION,"Error wrapping key with SYSTEM key",t))})})},timeout:o.timeout,error:o.error})},unwrapKeysWithSystemKey:function(n,r){var a=this;ar(this._systemKeyName,{result:function(i){$n(r,function(){var t=O(n.wrappedEncryptionKey),e=O(n.wrappedHmacKey);Promise.resolve().then(function(){return Promise.all([T.unwrapKey(a._systemKeyWrapFormat,t,i,i.algorithm,B,!1,V),T.unwrapKey(a._systemKeyWrapFormat,e,i,i.algorithm,F,!1,J)])}).then(function(t){var e=t[0];t=t[1],e[yi]=n.wrappedEncryptionKey,t[yi]=n.wrappedHmacKey,r.result({encryptionKey:e,hmacKey:t})}).catch(function(t){r.error(new P(er.INTERNAL_EXCEPTION,"Error unwrapping with SYSTEM key",t))})})},timeout:r.timeout,error:r.error})},loadStoreState:function(e,s,i,n){var u,r,a,o,c,h,f;function l(n,t){var r;try{r=i.userList.slice()}catch(t){}r?function e(){var i=r.shift();i?Be(s,i.userIdTokenJSON,n,{result:function(t){try{u.addUserIdToken(i.userId,t),function(i,n,t,r){var a,o;try{a=t.slice()}catch(t){}a?(o=u.getCryptoContext(i),function e(){var t=a.shift();t?He(s,t,i,n,o,{result:function(t){u.addServiceTokens([t]),e()},timeout:function(){e()},error:function(){e()}}):r.result()}()):r.result()}(n,t,i.serviceTokenJSONList,{result:e,timeout:e,error:e})}catch(t){e()}},timeout:e,error:e}):t.result()}():t.result()}function p(){var t;!o&&c&&h&&f&&(o=!0,t=new gt(s,c,e.esn,{rawKey:h},{rawKey:f}),u.setCryptoContext(c,t,!0),a.result(c))}function d(t,e){r.error(t,e&&""+e),o||(o=!0,a.error())}r=(u=this)._log,i.esn!=u._esn?(r.error("Esn mismatch, starting fresh"),n.error()):(a={result:function(t){l(t,n)},timeout:n.timeout,error:n.error},i.masterTokenJSON?(De(s,i.masterTokenJSON,{result:function(t){c=t,p()},timeout:function(){d("Timeout parsing MasterToken")},error:function(t){d("Error parsing MasterToken",t)}}),u._systemKeyWrapFormat?u.unwrapKeysWithSystemKey(i,{result:function(t){h=t.encryptionKey,f=t.hmacKey,p()},timeout:function(){d("Timeout unwrapping keys")},error:function(t){d("Error unwrapping keys",t)}}):Promise.resolve().then(function(){return T.encrypt({name:B.name,iv:new Uint8Array(16)},i.encryptionKey,new Uint8Array(1))}).then(function(t){h=i.encryptionKey}).catch(function(t){d("Error loading encryptionKey")}).then(function(){return T.sign(F,i.hmacKey,new Uint8Array(1))}).then(function(t){f=i.hmacKey,p()}).catch(function(t){d("Error loading hmacKey")})):d("Persisted store is corrupt"))}}),vi={"streaming.servicetokens.movie":!0,"streaming.servicetokens.license":!0},yi="$netflix$msl$wrapsys",_i=Rn.extend({init:function(t,e,i,n,r,a){var o=new he([y.LZW]),s=new Ct;s.addPublicKey(e,i),n[yt.RSA]=new Pt(s),(e={})[Ke.EMAIL_PASSWORD]=new Qe,e[Ke.NETFLIXID]=new Ye,e[Ke.MDX]=new ii,e[Ke.SSO]=new si,e[Ke.SWITCH_PROFILE]=new hi,t={_mslCryptoContext:{value:new vt,writable:!0,enumerable:!1,configurable:!1},_capabilities:{value:o,writable:!1,enumerable:!1,configurable:!1},_entityAuthData:{value:r,writable:!0,enumerable:!1,configurable:!1},_entityAuthFactories:{value:n,writable:!1,enumerable:!1,configurable:!1},_userAuthFactories:{value:e,writable:!1,enumerable:!1,configurable:!1},_keyExchangeFactories:{value:a,writable:!1,enumerable:!1,configurable:!1},_store:{value:t,writable:!1,enumerable:!1,configurable:!1}},Object.defineProperties(this,t)},getTime:function(){return Date.now()},getRandom:function(){return new t},isPeerToPeer:function(){return!1},getMessageCapabilities:function(){return this._capabilities},getEntityAuthenticationData:function(t,e){e.result(this._entityAuthData)},getMslCryptoContext:function(){return this._mslCryptoContext},getEntityAuthenticationFactory:function(t){return this._entityAuthFactories[t]},getUserAuthenticationFactory:function(t){return this._userAuthFactories[t]},getTokenFactory:function(){return null},getKeyExchangeFactory:function(e){return this._keyExchangeFactories.filter(function(t){return t.scheme==e})[0]},getKeyExchangeFactories:function(){return this._keyExchangeFactories},getMslStore:function(){return this._store}}),Ei=en.extend({init:function(t,e,i,n){this._log=t,this._mslContext=e,this._mslRequest=i,this._keyRequestData=n},getCryptoContexts:function(){return{}},isEncrypted:function(){return!!this._mslRequest.encrypted},isNonReplayable:function(){return!!this._mslRequest.nonReplayable},isRequestingTokens:function(){return!0},getUserId:function(){return this._mslRequest.profileGuid||this._mslRequest.userId||null},getUserAuthData:function(i,t,n,e){var r=this._mslRequest,a=this._mslContext;$n(e,function(){var t,e;return i||!r.shouldSendUserAuthData?null:r.token?(r.email?t=new ai(r.email,r.password):r.netflixId&&(t=new oi(r.netflixId,r.secureNetflixId)),e=void 0===r.profileGuid?null:r.profileGuid,new ni(r.mechanism,Jn(r.token),t,e)):r.email?new We(r.email,r.password):r.netflixId?new Je(r.netflixId,r.secureNetflixId):r.mdxControllerToken?(t=new ei("regpairrequest",r.mdxNonce,r.mdxEncryptedPinB64,r.mdxSignature).getEncoding(),new Ze(a,r.mdxPin,r.mdxControllerToken,t,r.mdxSignature)):r.useNetflixUserAuthData?new Je:r.profileGuid?(t=r.userId,t=a.getMslStore().userIdTokens[t],new ui(t,r.profileGuid)):n&&r.sendUserAuthIfRequired?new Je:null})},getCustomer:function(){return null},getKeyRequestData:function(t){t.result(this._mslRequest.allowTokenRefresh?[this._keyRequestData]:[])},updateServiceTokens:function(i,t,n){var r,e,a,o=this._log,s=(this._mslRequest.serviceTokens||[]).slice(),u=this._mslContext;t=u.getMslStore(),r=i.builder.getMasterToken(),e=this.getUserId(),a=t.getUserIdToken(e),function e(){var t=s.shift();if(t)try{t instanceof Fe?(i.addPrimaryServiceToken(t),e()):He(u,t,r,a,null,{result:function(t){try{i.addPrimaryServiceToken(t)}catch(t){o.warn("Exception adding service token",""+t)}e()},timeout:function(){o.warn("Timeout parsing service token"),e()},error:function(t){o.warn("Error parsing service token",""+t),e()}})}catch(t){o.warn("Exception processing service token",""+t),e()}else n.result(!0)}()},write:function(e,i,n){var r=Jn(this._mslRequest.body);e.write(r,0,r.length,i,{result:function(t){t!=r.length?n.error(new _("Not all data was written to output.")):e.flush(i,{result:function(){n.result(!0)},timeout:function(){n.timeout()},error:function(t){n.error(t)}})},timeout:function(){n.timeout()},error:function(t){n.error(t)}})},getDebugContext:function(){return this._dc||(this._dc=new ki(this._log,this._mslRequest)),this._dc}}),ki=Ne.extend({init:function(t,e){this._log=t,this._mslRequest=e},sentHeader:function(t){this._log.trace("Sent MSL header",or(this._mslRequest,t),t.serviceTokens&&t.serviceTokens.map(sr).join("\n"))},receivedHeader:function(t){var e=or(this._mslRequest,t),i=t.errorCode;i?this._log.warn("Received MSL error header",e,{errorCode:i,errorMessage:t.errorMessage,internalCode:t.internalCode}):this._log.trace("Received MSL header",e)}}),Si={PSK:function(t){return cr(t,yt.PSK,mi,Tt,Xt,Qt)},MGK:function(t){return cr(t,yt.MGK,bi,Et,Xt,Qt)},MGK_WITH_FALLBACK:function(t){var e,i;switch(t.esnPrefix){case"GOOGEUR001":case"GOOGLEXX01":case"GOOGEST001":case"GOOGNEW001":e="PSK";break;default:e="MGK"}if(!(i=Si[e]))throw new P(er.INTERNAL_EXCEPTION,"Invalid fallback authenticationType: "+e);return i(t)},MGK_JWE:function(t){return cr(t,yt.MGK,bi,Et,zt,Yt)},JWK_RSA:function(t){return hr(t,{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},te.JWK_RSA)},JWK_RSAES:function(t){return hr(t,{name:"RSAES-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])},te.JWK_RSAES)},JWEJS_RSA:function(t){return hr(t,{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])},te.JWEJS_RSA)}},pt.netflix=pt.netflix||{},pt.netflix.msl={createMslClient:function(n,e){var r,a,o,s=n.log,u=n.notifyMilestone||function(){};Promise.resolve().then(function(){if(!(l&&l.generateKey&&l.importKey&&l.unwrapKey))throw new P(er.INTERNAL_EXCEPTION,"No WebCrypto");return M=l.generateKey({name:"AES-CBC",length:128},!0,V).then?D.V2014_02:D.LEGACY,u("mslisik"),T.importKey("spki",n.serverIdentityKeyData,K,!1,["verify"])}).then(function(i){return new Promise(function(t,e){Q(i,{result:t,error:function(){e(new P(er.KEY_IMPORT_ERROR,"Unable to create server identity verification key"))}})})}).then(function(t){if(r=t,t=Si[n.authenticationType])return u("mslcc"),t(n);throw new P(er.INTERNAL_EXCEPTION,"Invalid authenticationType: "+n.authenticationType)}).then(function(t){var i;return a=new gi(s,n.esn,t.keyRequestData,t.createKeyRequestData,n.authenticationKeyNames.s,n.systemKeyWrapFormat),o=new _i(a,n.serverIdentityId,r,t.entityAuthFactories,t.entityAuthData,t.keyExchangeFactories),(i=n.storeState)?(u("mslss"),s.info("Loading store state"),new Promise(function(t,e){a.loadStoreState(n,o,i,{result:t,timeout:t,error:t})})):void s.info("No store state, starting fresh")}).then(function(){var t=new je;u("msldone"),e.result(new ur(s,t,o,a,n.ErrorSubCodes))}).catch(function(t){e.error(t)})},IHttpLocation:Ut,MslIoException:_},function(){var u,it,r,t,e,i,n,a,o,s,c,h;function f(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function l(t,e){var i,n;if(e)t:{i=it,t=t.split(".");for(var r=0;r<t.length-1;r++){if(!((n=t[r])in i))break t;i=i[n]}(e=e(r=i[t=t[t.length-1]]))!=r&&null!=e&&u(i,t,{configurable:!0,writable:!0,value:e})}}function p(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function nt(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:f(t)}}function G(t){if(!(t instanceof Array)){t=nt(t);for(var e,i=[];!(e=t.next()).done;)i.push(e.value);t=i}return t}function T(t,e){var i;if(t.prototype=r(e.prototype),t.prototype.constructor=t,a)a(t,e);else for(var n in e)"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(e,n))&&Object.defineProperty(t,n,i):t[n]=e[n]);t.Ccc=e.prototype}function d(){this.mW=!1,this.vE=null,this.wya=void 0,this.SH=1,this.cWa=this.bub=0,this.sT=null}function b(t){if(t.mW)throw new TypeError("Generator is already running");t.mW=!0}function m(t){this.Ff=new d,this.aUb=t}function g(e,t,i,n){var r,a;try{if(!((r=t.call(e.Ff.vE,i))instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.Ff.mW=!1,r;a=r.value}catch(t){return e.Ff.vE=null,e.Ff.qZ(t),v(e)}return e.Ff.vE=null,n.call(e.Ff,a),v(e)}function v(e){for(var t;e.Ff.SH;)try{if(t=e.aUb(e.Ff))return e.Ff.mW=!1,{value:t.value,done:!1}}catch(t){e.Ff.wya=void 0,e.Ff.qZ(t)}if(e.Ff.mW=!1,e.Ff.sT){if(t=e.Ff.sT,e.Ff.sT=null,t.GKb)throw t.FM;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(n){this.next=function(t){return n.fX(t)},this.throw=function(t){return n.qZ(t)},this.return=function(t){return i=t,b((e=n).Ff),(t=e.Ff.vE)?g(e,"return"in t?t.return:function(t){return{value:t,done:!0}},i,e.Ff.return):(e.Ff.return(i),v(e));var e,i},this[Symbol.iterator]=function(){return this}}function A(t,e){return e=new y(new m(e)),a&&t.prototype&&a(e,t.prototype),e}function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(e,i){var n,r,t;return e instanceof String&&(e+=""),n=0,r=!1,(t={next:function(){var t;return!r&&n<e.length?(t=n++,{value:i(t,e[t]),done:!1}):{done:r=!0,value:void 0}}})[Symbol.iterator]=function(){return t},t}function E(t,e,i){var n;t instanceof String&&(t=String(t));for(var r=t.length,a=0;a<r;a++)if(n=t[a],e.call(i,n,a,t))return{Toa:a,qE:n};return{Toa:-1,qE:void 0}}function k(t,e,i){if(null==t)throw new TypeError("The 'this' value for String.prototype."+i+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+i+" must not be a regular expression");return t+""}function S(){}if(u="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t},it=function(t){var e;t=["object"==typeof globalThis&&globalThis,t,"object"==typeof pt&&pt,"object"==typeof self&&self,"object"==typeof global&&global];for(var i=0;i<t.length;++i)if((e=t[i])&&e.Math==Math)return e;throw Error("Cannot find global object")}(this),l("Symbol",function(t){var i;function n(t,e){this.icb=t,u(this,"description",{configurable:!0,writable:!0,value:e})}return t||(n.prototype.toString=function(){return this.icb},i=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n("jscomp_symbol_"+(e||"")+"_"+i++,e)})}),l("Symbol.iterator",function(t){var e;if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<i.length;n++)"function"==typeof(e=it[i[n]])&&"function"!=typeof e.prototype[t]&&u(e.prototype,t,{configurable:!0,writable:!0,value:function(){return p(f(this))}});return t}),r="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e},t="undefined"!=typeof Reflect&&Reflect.construct?(Reflect.construct(S,[],function(){}),new S instanceof S?Reflect.construct:(s=Reflect.construct,function(t,e,i){return t=s(t,e),i&&Reflect.setPrototypeOf(t,i.prototype),t})):function(t,e,i){return void 0===i&&(i=t),i=r(i.prototype||Object.prototype),Function.prototype.apply.call(t,i,e)||i},"function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{t:{i={a:!0},n={};try{n.__proto__=i,e=n.a;break t}catch(t){}e=!1}e=e?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}function O(t){var e;return h[t]?h[t].exports:(e=h[t]={Toa:t,NLb:!1,exports:{}},c[t].call(e.exports,e,e.exports,O),e.NLb=!0,e.exports)}a=e,d.prototype.fX=function(t){this.wya=t},d.prototype.qZ=function(t){this.sT={FM:t,GKb:!0},this.SH=this.bub||this.cWa},d.prototype.return=function(t){this.sT={return:t},this.SH=this.cWa},m.prototype.fX=function(t){return b(this.Ff),this.Ff.vE?g(this,this.Ff.vE.next,t,this.Ff.fX):(this.Ff.fX(t),v(this))},m.prototype.qZ=function(t){return b(this.Ff),this.Ff.vE?g(this,this.Ff.vE.throw,t,this.Ff.fX):(this.Ff.qZ(t),v(this))},l("Reflect",function(t){return t||{}}),l("Reflect.construct",function(){return t}),l("Reflect.setPrototypeOf",function(t){return t||(a?function(t,e){try{return a(t,e),!0}catch(t){return!1}}:null)}),l("Object.setPrototypeOf",function(t){return t||a}),o="function"==typeof Object.assign?Object.assign:function(t,e){for(var i,n=1;n<arguments.length;n++)if(i=arguments[n])for(var r in i)w(i,r)&&(t[r]=i[r]);return t},l("Object.assign",function(t){return t||o}),l("Promise",function(t){var i,r;function o(t){var e;this.AP=0,this.xY=void 0,this.mO=[],this.s0a=!1,e=this.rka();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.qC=null}function s(e){return e instanceof o?e:new o(function(t){t(e)})}return t||(e.prototype.IQa=function(t){var e;null==this.qC&&(this.qC=[],(e=this).JQa(function(){e.nCb()})),this.qC.push(t)},i=it.setTimeout,e.prototype.JQa=function(t){i(t,0)},e.prototype.nCb=function(){for(var t,e;this.qC&&this.qC.length;){t=this.qC,this.qC=[];for(var i=0;i<t.length;++i){e=t[i],t[i]=null;try{e()}catch(t){this.Rrb(t)}}}this.qC=null},e.prototype.Rrb=function(t){this.JQa(function(){throw t})},o.prototype.rka=function(){var i,n;function t(e){return function(t){n||(n=!0,e.call(i,t))}}return n=!1,{resolve:t((i=this).iWb),reject:t(this.Gua)}},o.prototype.iWb=function(t){var e;if(t===this)this.Gua(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof o)this.iYb(t);else{t:switch(typeof t){case"object":e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.hWb(t):this.LWa(t)}},o.prototype.hWb=function(t){var e=void 0;try{e=t.then}catch(t){return void this.Gua(t)}"function"==typeof e?this.jYb(e,t):this.LWa(t)},o.prototype.Gua=function(t){this.i9a(2,t)},o.prototype.LWa=function(t){this.i9a(1,t)},o.prototype.i9a=function(t,e){if(0!=this.AP)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.AP);this.AP=t,this.xY=e,2===this.AP&&this.MWb(),this.oCb()},o.prototype.MWb=function(){var e=this;i(function(){var t;e.WPb()&&void 0!==(t=it.console)&&t.error(e.xY)},1)},o.prototype.WPb=function(){var t,e,i;return!this.s0a&&(t=it.CustomEvent,e=it.Event,void 0===(i=it.dispatchEvent)||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=it.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.xY,i(t)))},o.prototype.oCb=function(){if(null!=this.mO){for(var t=0;t<this.mO.length;++t)r.IQa(this.mO[t]);this.mO=null}},r=new e,o.prototype.iYb=function(t){var e=this.rka();t.P3(e.resolve,e.reject)},o.prototype.jYb=function(t,e){var i=this.rka();try{t.call(e,i.resolve,i.reject)}catch(t){i.reject(t)}},o.prototype.then=function(t,e){var i,n,r;function a(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){n(t)}}:t}return r=new o(function(t,e){i=t,n=e}),this.P3(a(t,i),a(e,n)),r},o.prototype.catch=function(t){return this.then(void 0,t)},o.prototype.P3=function(t,e){var i;function n(){switch(i.AP){case 1:t(i.xY);break;case 2:e(i.xY);break;default:throw Error("Unexpected state: "+i.AP)}}null==(i=this).mO?r.IQa(n):this.mO.push(n),this.s0a=!0},o.resolve=s,o.reject=function(i){return new o(function(t,e){e(i)})},o.race=function(r){return new o(function(t,e){for(var i=nt(r),n=i.next();!n.done;n=i.next())s(n.value).P3(t,e)})},o.all=function(t){var e=nt(t),a=e.next();return a.done?s([]):new o(function(i,t){var n,r;for(n=[],r=0;n.push(void 0),r++,s(a.value).P3(function(e){return function(t){n[e]=t,0==--r&&i(n)}}(n.length-1),t),a=e.next(),!a.done;);})},o)}),l("Object.entries",function(t){return t||function(t){var e,i=[];for(e in t)w(t,e)&&i.push([e,t[e]]);return i}}),l("Array.prototype.keys",function(t){return t||function(){return _(this,function(t){return t})}}),l("Array.prototype.find",function(t){return t||function(t,e){return E(this,t,e).qE}}),l("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}}),l("Array.prototype.includes",function(t){return t||function(t,e){var i,n,r=this;for(r instanceof String&&(r=String(r)),i=r.length,(e=e||0)<0&&(e=Math.max(e+i,0));e<i;e++)if((n=r[e])===t||Object.is(n,t))return!0;return!1}}),l("String.prototype.includes",function(t){return t||function(t,e){return-1!==k(this,t,"includes").indexOf(t,e||0)}}),l("Number.isNaN",function(t){return t||function(t){return"number"==typeof t&&isNaN(t)}}),l("Math.tanh",function(t){return t||function(t){var e;return 0===(t=Number(t))?t:(e=(1-(e=Math.exp(-2*Math.abs(t))))/(1+e),t<0?-e:e)}}),l("Array.prototype.entries",function(t){return t||function(){return _(this,function(t,e){return[t,e]})}}),l("WeakMap",function(n){var i,r;function t(t){if(this.ZV=(r+=Math.random()+1).toString(),t){t=nt(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}function a(){}function o(t){var e=typeof t;return"object"==e&&null!==t||"function"==e}function s(t){var e;w(t,i)||(e=new a,u(t,i,{value:e}))}function e(t){var e=Object[t];e&&(Object[t]=function(t){return t instanceof a?t:(Object.isExtensible(t)&&s(t),e(t))})}return function(){var t,e,i;if(n&&Object.seal)try{return(t=Object.seal({}),e=Object.seal({}),2!=(i=new n([[t,2],[e,3]])).get(t)||3!=i.get(e))?void 0:(i.delete(t),i.set(e,4),!i.has(t)&&4==i.get(e))}catch(t){return}}()?n:(i="$jscomp_hidden_"+Math.random(),e("freeze"),e("preventExtensions"),e("seal"),r=0,t.prototype.set=function(t,e){if(!o(t))throw Error("Invalid WeakMap key");if(s(t),!w(t,i))throw Error("WeakMap key fail: "+t);return t[i][this.ZV]=e,this},t.prototype.get=function(t){return o(t)&&w(t,i)?t[i][this.ZV]:void 0},t.prototype.has=function(t){return o(t)&&w(t,i)&&w(t[i],this.ZV)},t.prototype.delete=function(t){return!!(o(t)&&w(t,i)&&w(t[i],this.ZV))&&delete t[i][this.ZV]},t)}),l("Map",function(n){var a,o;function i(){var t={};return t.xA=t.next=t.head=t}function t(t,e){var i=t.Fz;return p(function(){if(i){for(;i.head!=t.Fz;)i=i.xA;if(i.next!=i.head)return i=i.next,{done:!1,value:e(i)};i=null}return{done:!0,value:void 0}})}function r(t,e){var i,n,r=e&&typeof e;if("object"==r||"function"==r?a.has(e)?r=a.get(e):(r=""+ ++o,a.set(e,r)):r="p_"+e,(i=t.Yy[r])&&w(t.Yy,r))for(t=0;t<i.length;t++)if(n=i[t],e!=e&&n.key!=n.key||e===n.key)return{id:r,list:i,index:t,entry:n};return{id:r,list:i,index:-1,entry:void 0}}function e(t){if(this.Yy={},this.Fz=i(),this.size=0,t){t=nt(t);for(var e;!(e=t.next()).done;)e=e.value,this.set(e[0],e[1])}}return function(){var t,e,i;if(n&&"function"==typeof n&&n.prototype.entries&&"function"==typeof Object.seal)try{return(t=Object.seal({x:4}),"s"!=(i=new n(nt([[t,"s"]]))).get(t)||1!=i.size||i.get({x:4})||i.set({x:4},"t")!=i||2!=i.size)?void 0:!(i=(e=i.entries()).next()).done&&i.value[0]==t&&"s"==i.value[1]&&!((i=e.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!e.next().done)}catch(t){return}}()?n:(a=new WeakMap,e.prototype.set=function(t,e){var i;return(i=r(this,t=0===t?0:t)).list||(i.list=this.Yy[i.id]=[]),i.entry?i.entry.value=e:(i.entry={next:this.Fz,xA:this.Fz.xA,head:this.Fz,key:t,value:e},i.list.push(i.entry),this.Fz.xA.next=i.entry,this.Fz.xA=i.entry,this.size++),this},e.prototype.delete=function(t){return!(!(t=r(this,t)).entry||!t.list)&&(t.list.splice(t.index,1),t.list.length||delete this.Yy[t.id],t.entry.xA.next=t.entry.next,t.entry.next.xA=t.entry.xA,t.entry.head=null,this.size--,!0)},e.prototype.clear=function(){this.Yy={},this.Fz=this.Fz.xA=i(),this.size=0},e.prototype.has=function(t){return!!r(this,t).entry},e.prototype.get=function(t){return(t=r(this,t).entry)&&t.value},e.prototype.entries=function(){return t(this,function(t){return[t.key,t.value]})},e.prototype.keys=function(){return t(this,function(t){return t.key})},e.prototype.values=function(){return t(this,function(t){return t.value})},e.prototype.forEach=function(t,e){for(var i,n=this.entries();!(i=n.next()).done;)i=i.value,t.call(e,i[1],i[0],this)},e.prototype[Symbol.iterator]=e.prototype.entries,o=0,e)}),l("Set",function(n){function t(t){if(this.Ew=new Map,t){t=nt(t);for(var e;!(e=t.next()).done;)this.add(e.value)}this.size=this.Ew.size}return function(){var t,e,i;if(n&&"function"==typeof n&&n.prototype.entries&&"function"==typeof Object.seal)try{return(t=Object.seal({x:4}),(i=new n(nt([t]))).has(t)&&1==i.size&&i.add(t)==i&&1==i.size&&i.add({x:4})==i&&2==i.size)?!(i=(e=i.entries()).next()).done&&i.value[0]==t&&i.value[1]==t&&(!(i=e.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&e.next().done):void 0}catch(t){return}}()?n:(t.prototype.add=function(t){return t=0===t?0:t,this.Ew.set(t,t),this.size=this.Ew.size,this},t.prototype.delete=function(t){return t=this.Ew.delete(t),this.size=this.Ew.size,t},t.prototype.clear=function(){this.Ew.clear(),this.size=0},t.prototype.has=function(t){return this.Ew.has(t)},t.prototype.entries=function(){return this.Ew.entries()},t.prototype.keys=t.prototype.values=function(){return this.Ew.values()},t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,i){var n=this;this.Ew.forEach(function(t){return e.call(i,t,t,n)})},t)}),l("String.prototype.endsWith",function(t){return t||function(t,e){var i=k(this,t,"endsWith");t+="",void 0===e&&(e=i.length),e=Math.max(0,Math.min(0|e,i.length));for(var n=t.length;0<n&&0<e;)if(i[--e]!=t[--n])return!1;return n<=0}}),l("String.prototype.repeat",function(t){return t||function(t){var e=k(this,null,"repeat");if(t<0||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)1&t&&(i+=e),(t>>>=1)&&(e+=e);return i}}),l("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),l("Array.prototype.values",function(t){return t||function(){return _(this,function(t,e){return e})}}),l("Object.values",function(t){return t||function(t){var e,i=[];for(e in t)w(t,e)&&i.push(t[e]);return i}}),l("String.prototype.startsWith",function(t){return t||function(t,e){var i,n,r=k(this,t,"startsWith");t+="",i=r.length,n=t.length,e=Math.max(0,Math.min(0|e,r.length));for(var a=0;a<n&&e<i;)if(r[e++]!=t[a++])return!1;return n<=a}}),l("Array.prototype.findIndex",function(t){return t||function(t,e){return E(this,t,e).Toa}}),l("Array.from",function(t){return t||function(t,e,i){var n,r;if(e=null!=e?e:function(t){return t},n=[],"function"==typeof(r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator])){t=r.call(t);for(var a=0;!(r=t.next()).done;)n.push(e.call(i,r.value,a++))}else for(r=t.length,a=0;a<r;a++)n.push(e.call(i,t[a],a));return n}}),l("String.fromCodePoint",function(t){return t||function(t){for(var e,i="",n=0;n<arguments.length;n++){if((e=Number(arguments[n]))<0||1114111<e||e!==Math.floor(e))throw new RangeError("invalid_code_point "+e);e<=65535?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(e>>>10&1023|55296),i+=String.fromCharCode(1023&e|56320))}return i}}),l("Number.parseInt",function(t){return t||parseInt}),l("Number.isFinite",function(t){return t||function(t){return"number"==typeof t&&(!isNaN(t)&&1/0!==t&&-1/0!==t)}}),h={},O.rac=c=[function(t,e,i){_esm(e),t=i(43),e.S5b=t,t=i(561),e.G_=t.G_,t=i(76),e.Ps=t.Ps,e.Kj=t.Kj,e.Vx=t.Vx,t=i(577),e.hza=t.hza,e.rd=t.rd,t=i(578),e.R=t.R,t=i(579),e.y$a=t.y$a,t=i(580),e.z3a=t.z3a,t=i(310),e.l=t.l,e.Sca=t.Sca,t=i(581),e.optional=t.optional,t=i(582),e.nl=t.nl,t=i(583),e.OH=t.OH,t=i(584),e.nZ=t.nZ,t=i(585),e.T5a=t.T5a,t=i(308),e.pda=t.pda,t=i(107),e.id=t.id,t=i(93),e.Fr=t.Fr,t=i(313),e.rab=t.rab,e.z$a=t.z$a,e.A3a=t.A3a,e.yab=t.yab,t=i(135),e.gN=t.gN,i=i(586),e.v3a=i.v3a},function(t,e,i){var n,r;function a(){return(a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function o(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)}function s(t,e){function i(){this.constructor=t}if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function u(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function c(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.Fr)o=Reflect.Fr(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function h(i,n){return function(t,e){n(t,e,i)}}function f(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Gc)return Reflect.Gc(t,e)}function l(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function p(i,n){var r,a,o,s,t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,o=e[1],e=[0];continue;case 7:e=r.On.pop(),r.Yn.pop();continue;default:if(!(s=0<(s=r.Yn).length&&s[s.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))r.label=e[1];else if(6===e[0]&&r.label<s[1])r.label=s[1],s=e;else{if(!(s&&r.label<s[2])){s[2]&&r.On.pop(),r.Yn.pop();continue}r.label=s[2],r.On.push(e)}}e=n.call(i,r)}catch(t){e=[6,t],o=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}return r={label:0,bd:function(){if(1&s[0])throw s[1];return s[1]},Yn:[],On:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function d(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)}function b(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function v(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function y(t,e,i){if(i||2===arguments.length)for(var n,r=0,a=e.length;r<a;r++)!n&&r in e||((n=n||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(n||e)}function w(t){return this instanceof w?(this.qE=t,this):new w(t)}function _(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof w?Promise.resolve(i.value.qE).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a}function E(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:w(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function k(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return(t=o[Symbol.asyncIterator])?t.call(o):(o=b(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e)}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function T(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e}function A(t){return t&&t.__esModule?t:{default:t}}function O(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)}function I(t,e,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(t,i):r?r.value=i:e.set(t,i),i}i.r(e),i.d(e,"__extends",function(){return s}),i.d(e,"__assign",function(){return a}),i.d(e,"__rest",function(){return u}),i.d(e,"__decorate",function(){return c}),i.d(e,"__param",function(){return h}),i.d(e,"__metadata",function(){return f}),i.d(e,"__awaiter",function(){return l}),i.d(e,"__generator",function(){return p}),i.d(e,"__createBinding",function(){return n}),i.d(e,"__exportStar",function(){return d}),i.d(e,"__values",function(){return b}),i.d(e,"__read",function(){return m}),i.d(e,"__spread",function(){return g}),i.d(e,"__spreadArrays",function(){return v}),i.d(e,"__spreadArray",function(){return y}),i.d(e,"__await",function(){return w}),i.d(e,"__asyncGenerator",function(){return _}),i.d(e,"__asyncDelegator",function(){return E}),i.d(e,"__asyncValues",function(){return k}),i.d(e,"__makeTemplateObject",function(){return S}),i.d(e,"__importStar",function(){return T}),i.d(e,"__importDefault",function(){return A}),i.d(e,"__classPrivateFieldGet",function(){return O}),i.d(e,"__classPrivateFieldSet",function(){return I}),n=Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]},r=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}},function(t,e,i){function n(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function r(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}function a(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function s(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.Fr)o=Reflect.Fr(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function u(i,n){return function(t,e){n(t,e,i)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Gc)return Reflect.Gc(t,e)}function h(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function f(i,n){var r,a,o,s,t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,o=e[1],e=[0];continue;case 7:e=r.On.pop(),r.Yn.pop();continue;default:if(!(s=0<(s=r.Yn).length&&s[s.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))r.label=e[1];else if(6===e[0]&&r.label<s[1])r.label=s[1],s=e;else{if(!(s&&r.label<s[2])){s[2]&&r.On.pop(),r.Yn.pop();continue}r.label=s[2],r.On.push(e)}}e=n.call(i,r)}catch(t){e=[6,t],o=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}return r={label:0,bd:function(){if(1&s[0])throw s[1];return s[1]},Yn:[],On:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function l(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}function p(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||(e[i]=t[i])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function g(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function v(t){return this instanceof v?(this.qE=t,this):new v(t)}function y(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.qE).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a}function w(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:v(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function _(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return(t=o[Symbol.asyncIterator])?t.call(o):(o=d(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e)}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function A(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i}i.r(e),i.d(e,"__extends",function(){return a}),i.d(e,"__assign",function(){return n}),i.d(e,"__rest",function(){return o}),i.d(e,"__decorate",function(){return s}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return c}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return f}),i.d(e,"__createBinding",function(){return l}),i.d(e,"__exportStar",function(){return p}),i.d(e,"__values",function(){return d}),i.d(e,"__read",function(){return b}),i.d(e,"__spread",function(){return m}),i.d(e,"__spreadArrays",function(){return g}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return w}),i.d(e,"__asyncValues",function(){return _}),i.d(e,"__makeTemplateObject",function(){return E}),i.d(e,"__importStar",function(){return k}),i.d(e,"__importDefault",function(){return S}),i.d(e,"__classPrivateFieldGet",function(){return T}),i.d(e,"__classPrivateFieldSet",function(){return A})},function(t,e){var i,r,n;_esm(e),e.Ts=e.rCa=e.qCa=e.lca=e.Afb=e.Bfb=e.pCa=e.kca=e.zfb=e.PFa=e.D0=e.t0=e.oCa=e.L=e.M=void 0,(n=i=e.M||(e.M={}))[n.Vl=7001]="UNKNOWN",n[n.KLa=7002]="UNHANDLED_EXCEPTION",n[n.vgb=7003]="INIT_COMPONENT_LOG_TO_REMOTE",n[n.Vfb=7004]="HLS_NOT_SUPPORTED",n[n.Gca=7010]="INIT_ASYNCCOMPONENT",n[n.$Da=7011]="INIT_HTTP",n[n.rgb=7014]="INIT_BADMOVIEID",n[n.Jgb=7016]="INIT_NETFLIXID_MISSING",n[n.Igb=7017]="INIT_NETFLIXID_INVALID",n[n.Lgb=7018]="INIT_SECURENETFLIXID_MISSING",n[n.aEa=7020]="INIT_PLAYBACK_LOCK",n[n.bEa=7022]="INIT_SESSION_LOCK",n[n.Kgb=7029]="INIT_POSTAUTHORIZE",n[n.ZDa=7031]="INIT_HEADER_MEDIA",n[n.s5b=7032]="HEADER_MISSING",n[n.r5b=7033]="HEADER_FRAGMENTS_MISSING",n[n.Mgb=7034]="INIT_TIMEDTEXT_TRACK",n[n.G5b=7035]="INIT_LOAD_DOWNLOADED_MEDIA",n[n.H5b=7036]="INIT_STREAMS_NOT_AVAILABLE",n[n.qcb=7037]="ASE_SESSION_ERROR",n[n.pcb=7038]="ASE_SEEK_THREW",n[n.rcb=7039]="ASE_SKIPPED_THREW",n[n.Fgb=7041]="INIT_CORE_OBJECTS1",n[n.Ggb=7042]="INIT_CORE_OBJECTS2",n[n.Hgb=7043]="INIT_CORE_OBJECTS3",n[n.D5b=7051]="INIT_COMPONENT_REQUESTQUOTA",n[n.x5b=7052]="INIT_COMPONENT_FILESYSTEM",n[n.SDa=7053]="INIT_COMPONENT_STORAGE",n[n.TDa=7054]="INIT_COMPONENT_STORAGELOCK",n[n.y5b=7055]="INIT_COMPONENT_LOGPERSIST",n[n.z5b=7056]="INIT_COMPONENT_NRDDPI",n[n.B5b=7057]="INIT_COMPONENT_PEPPERCRYPTO",n[n.PDa=7058]="INIT_COMPONENT_MAINTHREADMONITOR",n[n.Hca=7059]="INIT_COMPONENT_DEVICE",n[n.A5b=7062]="INIT_COMPONENT_NTBA",n[n.QDa=7063]="INIT_COMPONENT_MSL",n[n.tgb=7065]="INIT_COMPONENT_CONTROL_PROTOCOL",n[n.ODa=7066]="INIT_COMPONENT_LOGBLOBBATCHER",n[n.rB=7067]="INIT_COMPONENT_PERSISTEDPLAYDATA",n[n.C5b=7068]="INIT_COMPONENT_PLAYBACKHEURISTICSRANDOM",n[n.sgb=7069]="INIT_COMPONENT_ACCOUNT",n[n.xgb=7070]="INIT_COMPONENT_NRDP_CONFIG_LOADER",n[n.zgb=7071]="INIT_COMPONENT_NRDP_ESN_PREFIX_LOADER",n[n.Agb=7072]="INIT_COMPONENT_NRDP_MEDIA",n[n.Bgb=7073]="INIT_COMPONENT_NRDP_PREPARE_LOADER",n[n.Cgb=7074]="INIT_COMPONENT_NRDP_REGISTRATION",n[n.wgb=7081]="INIT_COMPONENT_NRDP",n[n.ygb=7082]="INIT_COMPONENT_NRDP_DEVICE",n[n.YDa=7083]="INIT_COMPONENT_WEBCRYPTO",n[n.Egb=7084]="INIT_COMPONENT_VIDEO_PREPARER",n[n.F5b=7085]="INIT_CONGESTION_SERVICE",n[n.NDa=7086]="INIT_COMPONENT_IDB_VIEWER_TOOL",n[n.UDa=7087]="INIT_COMPONENT_TRACKING_LOG",n[n.LDa=7088]="INIT_COMPONENT_BATTERY_MANAGER",n[n.KDa=7089]="INIT_COMPONENT_ASE",n[n.E5b=7090]="INIT_COMPONENT_VIDEO_CACHE",n[n.UJ=7091]="INIT_COMPONENT_DRM_CACHE",n[n.ugb=7092]="INIT_COMPONENT_DRM",n[n.Dgb=7093]="INIT_COMPONENT_PREFETCH_EVENTS",n[n.MDa=7094]="INIT_COMPONENT_FTL",n[n.RDa=7095]="INIT_COMPONENT_PREPARE_MODEL",n[n.VDa=7096]="INIT_COMPONENT_VIDEO_SESSION_EDGE",n[n.WDa=7097]="INIT_COMPONENT_VIDEO_SESSION_MDX",n[n.XDa=7098]="INIT_COMPONENT_VIDEO_SESSION_TEST",n[n.sR=7111]="MANIFEST",n[n.Bcb=7112]="AUTHORIZE_UNKNOWN",n[n.lhb=7117]="MANIFEST_VERIFY",n[n.Tjb=7120]="START",n[n.XJ=7121]="LICENSE",n[n.tea=7122]="RELEASE",n[n.bKa=7123]="STOP",n[n.i5b=7124]="FPSAPPDATA",n[n.Pca=7125]="KEEPALIVE",n[n.f4b=7126]="DEACTIVATE",n[n.U7b=7127]="SYNC_DEACTIVATE_LINKS",n[n.e3b=7130]="ACTIVATE",n[n.Iib=7131]="PING",n[n.p6b=7133]="NETFLIXID",n[n.wfb=7134]="ENGAGE",n[n.jhb=7135]="LOGIN",n[n.$jb=7136]="SWITCH_PROFILES",n[n.ihb=7137]="LOGBLOB",n[n.rib=7138]="PAUSE",n[n.Bjb=7139]="RESUME",n[n.$Ja=7140]="SPLICE",n[n.r4b=7141]="DOWNLOAD_EVENT",n[n.Ocb=7142]="BIND",n[n.pib=7143]="PAIR",n[n.Pcb=7144]="BIND_DEVICE",n[n.Mfb=7145]="GENERATE_SCREENSHOTS",n[n.Mib=7202]="PLAY_INIT_EXCEPTION",n[n.R5b=7301]="MEDIA_DOWNLOAD",n[n.Y6b=7330]="PLAY_MSE_EME_CREATE_KEYSESSION_FAILED",n[n.Z6b=7331]="PLAY_MSE_EME_KEY_SESSION_UPDATE_EXCEPTION",n[n.eHa=7332]="PLAY_MSE_EME_KEY_STATUS_CHANGE_EXPIRED",n[n.Sib=7333]="PLAY_MSE_EME_KEY_STATUS_CHANGE_INTERNAL_ERROR",n[n.fHa=7334]="PLAY_MSE_EME_KEY_STATUS_CHANGE_OUTPUT_NOT_ALLOWED",n[n.Tib=7335]="PLAY_MSE_EME_KEY_STATUS_EXCEPTION",n[n.Gda=7336]="PLAY_MSE_EME_KEY_STATUS_CHANGE_OUTPUT_RESTRICTED",n[n.$6b=7337]="PLAY_MSE_EME_KEY_STATUS_CHANGE_RELEASED",n[n.Rib=7338]="PLAY_MSE_EME_KEY_MAPPING_EXCEPTION",n[n.jHa=7351]="PLAY_MSE_NOTSUPPORTED",n[n.dHa=7353]="PLAY_MSE_DECODER_TIMEOUT",n[n.Hda=7355]="PLAY_MSE_SOURCEADD",n[n.cHa=7356]="PLAY_MSE_CREATE_MEDIAKEYS",n[n.GR=7357]="PLAY_MSE_GENERATEKEYREQUEST",n[n.c7b=7358]="PLAY_MSE_PARSECHALLENGE",n[n.X6b=7359]="PLAY_MSE_ADDKEY",n[n.f7b=7360]="PLAY_MSE_UNEXPECTED_NEEDKEY",n[n.iHa=7361]="PLAY_MSE_EVENT_ERROR",n[n.fK=7362]="PLAY_MSE_SETMEDIAKEYS",n[n.fr=7363]="PLAY_MSE_EVENT_KEYERROR",n[n.Vib=7364]="PLAY_MSE_EME_SESSION_CLOSE",n[n.Wib=7365]="PLAY_MSE_GETCURRENTTIME",n[n.Xib=7367]="PLAY_MSE_SETCURRENTTIME",n[n.Yib=7371]="PLAY_MSE_SOURCEAPPEND",n[n.d7b=7373]="PLAY_MSE_SOURCEAPPEND_INIT",n[n.bjb=7375]="PLAY_MSE_UNEXPECTED_SEEKING",n[n.ajb=7376]="PLAY_MSE_UNEXPECTED_SEEKED",n[n.$ib=7377]="PLAY_MSE_UNEXPECTED_REWIND",n[n.e7b=7379]="PLAY_MSE_SOURCE_EOS",n[n.Zib=7381]="PLAY_MSE_SOURCEBUFFER_ERROR",n[n.kHa=7382]="PLAY_MSE_SOURCEBUFFER_CHANGETYPE",n[n.b7b=7385]="PLAY_MSE_KEYSESSION_UPDATE",n[n.Nib=7391]="PLAY_MSE_CREATE_MEDIASOURCE",n[n.Oib=7392]="PLAY_MSE_CREATE_MEDIASOURCE_OBJECTURL",n[n.Pib=7393]="PLAY_MSE_CREATE_MEDIASOURCE_OPEN",n[n.gHa=7394]="PLAY_MSE_EME_MISSING_DRMHEADER",n[n.Uib=7395]="PLAY_MSE_EME_MISSING_PSSH",n[n.a7b=7396]="PLAY_MSE_EME_MISSING_CERT",n[n.hHa=7397]="PLAY_MSE_EME_NO_PRK_SUPPORT",n[n.Qib=7398]="PLAY_MSE_DURATIONCHANGE_ERROR",n[n.R0=7399]="PLAY_MSE_SET_LICENSE_ERROR",n[n.$Ba=7400]="EXTERNAL",n[n.Q0=7500]="PAUSE_TIMEOUT",n[n.u0=7502]="INACTIVITY_TIMEOUT",n[n.Acb=7510]="AUTHORIZATION_EXPIRED",n[n.h4b=7520]="DECRYPT_AUDIO",n[n.qfb=7700]="EME_INVALID_KEYSYSTEM",n[n.NBa=7701]="EME_CREATE_MEDIAKEYS_SYSTEMACCESS_FAILED",n[n.GQ=7702]="EME_CREATE_MEDIAKEYS_FAILED",n[n.Z_=7703]="EME_GENERATEREQUEST_FAILED",n[n.UBa=7704]="EME_UPDATE_FAILED",n[n.SBa=7705]="EME_KEYSESSION_ERROR",n[n.RBa=7706]="EME_KEYMESSAGE_EMPTY",n[n.tfb=7707]="EME_REMOVE_FAILED",n[n.sfb=7708]="EME_LOAD_FAILED",n[n.nfb=7709]="EME_CREATE_SESSION_FAILED",n[n.ica=7710]="EME_LDL_RENEWAL_ERROR",n[n.PBa=7711]="EME_INVALID_INITDATA_DATA",n[n.QBa=7712]="EME_INVALID_LICENSE_DATA",n[n.rfb=7713]="EME_LDL_KEYSSION_ALREADY_CLOSED",n[n.B4b=7714]="EME_MEDIAKEYS_GENERIC_ERROR",n[n.MBa=7716]="EME_CLOSE_FAILED",n[n.ufb=7717]="EME_SESSION_CLOSED_UNEXPECTEDLY",n[n.Jib=7800]="PLAYDATA_STORE_FAILURE",n[n.W6b=7801]="PLAYDATA_SEND_FAILURE",n[n.mQ=7900]="BRANCH_PLAY_FAILURE",n[n.BJ=7901]="BRANCH_QUEUE_FAILURE",n[n.oza=7902]="BRANCH_UPDATE_NEXT_SEGMENT_WEIGHTS_FAILURE",n[n.u6b=8e3]="NRDP_REGISTRATION_ACTIVATE_FAILURE",n[n.v6b=8010]="NRDP_REGISTRATION_SSO_ACTIVATE_FAILURE",n[n.xib=8100]="PBO_EVENTLOOKUP_FAILURE",(n=r=e.L||(e.L={}))[n.Vl=1001]="UNKNOWN",n[n.Lj=1003]="EXCEPTION",n[n.Pgb=1004]="INVALID_DI",n[n.ucb=1011]="ASYNCLOAD_EXCEPTION",n[n.vcb=1013]="ASYNCLOAD_TIMEOUT",n[n.f3b=1015]="ASYNCLOAD_BADCONFIG",n[n.scb=1016]="ASYNCLOAD_COMPONENT_DUPLICATE",n[n.tcb=1017]="ASYNCLOAD_COMPONENT_MISSING",n[n.gR=1101]="HTTP_UNKNOWN",n[n.Bca=1102]="HTTP_XHR",n[n.dR=1103]="HTTP_PROTOCOL",n[n.cR=1104]="HTTP_OFFLINE",n[n.fR=1105]="HTTP_TIMEOUT",n[n.IE=1106]="HTTP_READTIMEOUT",n[n.qB=1107]="HTTP_ABORT",n[n.nDa=1108]="HTTP_PARSE",n[n.jDa=1110]="HTTP_BAD_URL",n[n.eR=1111]="HTTP_PROXY",n[n.hda=1203]="MSE_AUDIO",n[n.ida=1204]="MSE_VIDEO",n[n.xhb=1250]="MSE_MEDIA_ERR_BASE",n[n.U5b=1251]="MSE_MEDIA_ERR_ABORTED",n[n.X5b=1252]="MSE_MEDIA_ERR_NETWORK",n[n.V5b=1253]="MSE_MEDIA_ERR_DECODE",n[n.Y5b=1254]="MSE_MEDIA_ERR_SRC_NOT_SUPPORTED",n[n.W5b=1255]="MSE_MEDIA_ERR_ENCRYPTED",n[n.Ss=1260]="EME_MEDIA_KEYERR_BASE",n[n.H4b=1261]="EME_MEDIA_KEYERR_UNKNOWN",n[n.C4b=1262]="EME_MEDIA_KEYERR_CLIENT",n[n.G4b=1263]="EME_MEDIA_KEYERR_SERVICE",n[n.F4b=1264]="EME_MEDIA_KEYERR_OUTPUT",n[n.E4b=1265]="EME_MEDIA_KEYERR_HARDWARECHANGE",n[n.D4b=1266]="EME_MEDIA_KEYERR_DOMAIN",n[n.I4b=1269]="EME_MEDIA_UNAVAILABLE_CDM",n[n.pfb=1280]="EME_ERROR_NODRMSESSSION",n[n.ofb=1281]="EME_ERROR_NODRMREQUESTS",n[n.y4b=1282]="EME_ERROR_INDIV_FAILED",n[n.z4b=1283]="EME_ERROR_UNSUPPORTED_MESSAGETYPE",n[n.vfb=1284]="EME_TIMEOUT_MESSAGE",n[n.J4b=1285]="EME_TIMEOUT_KEYCHANGE",n[n.TBa=1286]="EME_UNDEFINED_DATA",n[n.MJ=1287]="EME_INVALID_STATE",n[n.A4b=1288]="EME_LDL_DOES_NOT_SUPPORT_PRK",n[n.OBa=1289]="EME_EMPTY_DATA",n[n.HQ=1290]="EME_TIMEOUT",n[n.j6b=1303]="NCCP_METHOD_NOT_SUPPORTED",n[n.m6b=1305]="NCCP_PARSEXML",n[n.ejb=1309]="PROCESS_EXCEPTION",n[n.l6b=1311]="NCCP_NETFLIXID_MISSING",n[n.n6b=1312]="NCCP_SECURENETFLIXID_MISSING",n[n.g6b=1313]="NCCP_HMAC_MISSING",n[n.f6b=1315]="NCCP_HMAC_MISMATCH",n[n.e6b=1317]="NCCP_HMAC_FAILED",n[n.d6b=1321]="NCCP_CLIENTTIME_MISSING",n[n.c6b=1323]="NCCP_CLIENTTIME_MISMATCH",n[n.MCa=1331]="GENERIC",n[n.Rhb=1333]="NCCP_PROTOCOL_INVALIDDEVICECREDENTIALS",n[n.Shb=1337]="NCCP_PROTOCOL_REDIRECT_LOOP",n[n.o6b=1341]="NCCP_TRANSACTION",n[n.h6b=1343]="NCCP_INVALID_DRMTYPE",n[n.i6b=1344]="NCCP_INVALID_LICENCE_RESPONSE",n[n.k6b=1345]="NCCP_MISSING_PAYLOAD",n[n.l7b=1346]="PROTOCOL_NOT_INITIALIZED",n[n.k7b=1347]="PROTOCOL_MISSING_FIELD",n[n.j7b=1348]="PROTOCOL_MISMATCHED_PROFILEGUID",n[n.EB=1402]="STORAGE_NODATA",n[n.E7b=1403]="STORAGE_EXCEPTION",n[n.M7b=1405]="STORAGE_QUOTA_NOT_GRANTED",n[n.N7b=1407]="STORAGE_QUOTA_TO_SMALL",n[n.dKa=1411]="STORAGE_LOAD_ERROR",n[n.Vjb=1412]="STORAGE_LOAD_TIMEOUT",n[n.eKa=1414]="STORAGE_SAVE_ERROR",n[n.Yjb=1415]="STORAGE_SAVE_TIMEOUT",n[n.Bea=1417]="STORAGE_DELETE_ERROR",n[n.cKa=1418]="STORAGE_DELETE_TIMEOUT",n[n.L7b=1421]="STORAGE_FS_REQUESTFILESYSTEM",n[n.I7b=1423]="STORAGE_FS_GETDIRECTORY",n[n.K7b=1425]="STORAGE_FS_READENTRIES",n[n.F7b=1427]="STORAGE_FS_FILEREAD",n[n.H7b=1429]="STORAGE_FS_FILEWRITE",n[n.G7b=1431]="STORAGE_FS_FILEREMOVE",n[n.J7b=1432]="STORAGE_FS_PARSEJSON",n[n.Xjb=1451]="STORAGE_NO_LOCALSTORAGE",n[n.Wjb=1453]="STORAGE_LOCALSTORAGE_ACCESS_EXCEPTION",n[n.B6b=1501]="NTBA_UNKNOWN",n[n.A6b=1502]="NTBA_EXCEPTION",n[n.w6b=1504]="NTBA_CRYPTO_KEY",n[n.y6b=1506]="NTBA_CRYPTO_OPERATION",n[n.x6b=1508]="NTBA_CRYPTO_KEYEXCHANGE",n[n.z6b=1515]="NTBA_DECRYPT_UNSUPPORTED",n[n.SAa=1553]="DEVICE_NO_ESN",n[n.RAa=1555]="DEVICE_ERROR_GETTING_ESN",n[n.Efb=1701]="FORMAT_UNKNOWN",n[n.zCa=1713]="FORMAT_XML",n[n.Ffb=1715]="FORMAT_XML_CONTENT",n[n.Dfb=1721]="FORMAT_BASE64",n[n.d0=1723]="FORMAT_DFXP",n[n.dgb=1801]="INDEXDB_OPEN_EXCEPTION",n[n.IDa=1802]="INDEXDB_NOT_SUPPORTED",n[n.cgb=1803]="INDEXDB_OPEN_ERROR",n[n.JDa=1804]="INDEXDB_OPEN_NULL",n[n.bgb=1805]="INDEXDB_OPEN_BLOCKED",n[n.egb=1807]="INDEXDB_OPEN_TIMEOUT",n[n.agb=1808]="INDEXDB_INVALID_STORE_STATE",n[n.v0=1809]="INDEXDB_ACCESS_EXCEPTION",n[n.Hhb=1901]="MSL_UNKNOWN",n[n.Ahb=1911]="MSL_INIT_NO_MSL",n[n.zFa=1913]="MSL_INIT_ERROR",n[n.Bhb=1915]="MSL_INIT_NO_WEBCRYPTO",n[n.yhb=1931]="MSL_ERROR",n[n.Ghb=1933]="MSL_REQUEST_TIMEOUT",n[n.Fhb=1934]="MSL_READ_TIMEOUT",n[n.zhb=1935]="MSL_ERROR_HEADER",n[n.Z5b=1936]="MSL_ERROR_ENVELOPE",n[n.$5b=1937]="MSL_ERROR_MISSING_PAYLOAD",n[n.yFa=1957]="MSL_ERROR_REAUTH",n[n.bfa=2103]="WEBCRYPTO_MISSING",n[n.zkb=2105]="WEBCRYPTOKEYS_MISSING",n[n.Akb=2107]="WEBCRYPTO_IFRAME_LOAD_ERROR",n[n.O3b=2200]="CACHEDDATA_PARSEJSON",n[n.Lza=2201]="CACHEDDATA_UNSUPPORTED_VERSION",n[n.P3b=2202]="CACHEDDATA_UPGRADE_FAILED",n[n.nB=2203]="CACHEDDATA_INVALID_FORMAT",n[n.c3b=3e3]="ACCOUNT_CHANGE_INFLIGHT",n[n.d3b=3001]="ACCOUNT_INVALID",n[n.q4b=3100]="DOWNLOADED_MANIFEST_UNAVAILABLE",n[n.p4b=3101]="DOWNLOADED_MANIFEST_PARSE_EXCEPTION",n[n.n4b=3200]="DOWNLOADED_LICENSE_UNAVAILABLE",n[n.o4b=3201]="DOWNLOADED_LICENSE_UNUSEABLE",n[n.m4b=3202]="DOWNLOADED_LICENSE_EXCEPTION",n[n.O7b=3300]="STORAGE_VA_LOAD_ERROR",n[n.P7b=3301]="STORAGE_VA_LOAD_TIMEOUT",n[n.S7b=3302]="STORAGE_VA_SAVE_ERROR",n[n.T7b=3303]="STORAGE_VA_SAVE_TIMEOUT",n[n.Q7b=3304]="STORAGE_VA_REMOVE_ERROR",n[n.R7b=3305]="STORAGE_VA_REMOVE_TIMEOUT",n[n.Cda=3077]="PBO_DEVICE_EOL_WARNING",n[n.YGa=3078]="PBO_DEVICE_EOL_FINAL",n[n.aHa=3100]="PBO_DEVICE_RESET",n[n.$Ga=3101]="PBO_DEVICE_RELOAD",n[n.ZGa=3102]="PBO_DEVICE_EXIT",n[n.Gib=5003]="PBO_VIEWABLE_OUT_OF_AVAILABILITY_WINDOW",n[n.sib=5005]="PBO_ACCOUNT_ON_HOLD",n[n.wib=5006]="PBO_CONCURRENT_STREAM_QUOTA_EXCEEDED",n[n.bHa=5007]="PBO_INCORRECT_PIN",n[n.Dib=5008]="PBO_MOBILE_ONLY",n[n.Hib=5009]="PBO_VIEWABLE_RESTRICTED_BY_PROFILE",n[n.zib=5033]="PBO_INSUFFICIENT_MATURITY_LEVEL",n[n.uib=5059]="PBO_BLACKLISTED_IP",n[n.tib=5070]="PBO_AGE_VERIFICATION_REQUIRED",n[n.vib=5080]="PBO_CHOICE_MAP_ERROR",n[n.Eib=5090]="PBO_RESTRICTED_TO_TESTERS",n[n.Bib=5091]="PBO_MALFORMED_REQUEST",n[n.Aib=5092]="PBO_INVALID_SERVICE_VERSION",n[n.Cib=5093]="PBO_MDX_INVALID_CTICKET",n[n.yib=5094]="PBO_FREE_PREVIEW_ENDED",n[n.Fib=5095]="PBO_STREAMING_LOCATION_DISALLOWED",n[n.heb=5100]="DECODER_TIMEOUT_BUFFERING",n[n.jeb=5101]="DECODER_TIMEOUT_PRESENTING",n[n.ieb=5102]="DECODER_TIMEOUT_PLAYING",n[n.Zeb=5200]="DOWNLOADER_IO_ERROR",n[n.nza=5300]="BRANCHING_SEGMENT_NOTFOUND",n[n.Tcb=5301]="BRANCHING_PRESENTER_UNINITIALIZED",n[n.s3b=5302]="BRANCHING_SEGMENT_STREAMING_NOT_STARTED",n[n.Eba=5303]="BRANCHING_ASE_UNINITIALIZED",n[n.Qcb=5304]="BRANCHING_ASE_FAILURE",n[n.p3b=5305]="BRANCHING_MOMENT_FAILURE",n[n.Rcb=5306]="BRANCHING_CURRENT_SEGMENT_UNINITIALIZED",n[n.r3b=5307]="BRANCHING_SEGMENT_LASTPTS_UNINIITALIZED",n[n.Ucb=5308]="BRANCHING_SEEK_THREW",n[n.q3b=5309]="BRANCHING_PLAY_NOTENOUGHNEXTSEGMENTS",n[n.Scb=5310]="BRANCHING_PLAY_TIMEDOUT",n[n.Vcb=5311]="BRANCHING_SEGMENT_ALREADYQUEUED",n[n.Wcb=5312]="BRANCHING_UPDATE_NEXT_SEGMENT_WEIGHTS_THREW",n[n.Zjb=5500]="STUDIO_MUXED_MANIFEST",n[n.cda=5600]="MANIFEST_HYDRATION_FAILURE",(n=e.oCa||(e.oCa={}))[n.D3b=5003]="BR_VIEWABLE_OUT_OF_AVAILABILITY_WINDOW",n[n.t3b=5005]="BR_ACCOUNT_ON_HOLD",n[n.x3b=5006]="BR_CONCURRENT_STREAM_QUOTA_EXCEEDED",n[n.A3b=5033]="BR_INSUFFICIENT_MATURITY_LEVEL",n[n.w3b=5059]="BR_BLACKLISTED_IP",n[n.u3b=5070]="BR_AGE_VERIFICATION_REQUIRED",n[n.B3b=2204]="BR_PLAYBACK_CONTEXT_CREATION",n[n.y3b=2205]="BR_DRM_LICENSE_AQUISITION",n[n.C3b=2206]="BR_PLAYBACK_SERVICE_ERROR",n[n.z3b=2207]="BR_ENDPOINT_ERROR",n[n.v3b=2208]="BR_AUTHORIZATION_ERROR",e.t0={cdb:"400",n8b:"401",pHa:"413"},e.D0={g5b:1,g8b:2,M4b:3,m8b:4,K5b:5,L4b:6,Wea:7,O4b:8,t7b:9,B7b:10},(n=e.PFa||(e.PFa={}))[n.U6b=21]="PAIRING_CONTROLLER_CTICKET_EXPIRED",n[n.V6b=98]="PAIRING_UNKNOWN_ERROR",e.zfb=function(t){return 7100<=t&&t<7200},e.kca=function(t){return t==i.Q0||t==i.u0},e.pCa=function(t){return 1100<=t&&t<=1199},e.Bfb=function(t){return 1300<=t&&t<=1399},e.Afb=function(t){return 1900<=t&&t<=1999},e.lca=function(t,e){return 1<=t&&t<=9?e+t:e},e.qCa=function(t){return e.lca(t,r.xhb)},e.rCa=function(t){return e.lca(t,r.Ss)},e.Ts=function(t){var e={},i=t.errorExternalCode||t.pf,n=t.errorDetails||t.ub;return e.ErrorSubCode=t.errorSubCode||t.na||r.Vl,i&&(e.ErrorExternalCode=i),n&&(e.ErrorDetails=n),e}},function(t,e,i){var n;function r(){return n.$R.apply(this,arguments)||this}function a(t){return new n.Us(t,e.ja)}_esm(e),e.Gb=e.zDa=e.rda=e.io=e.ja=e.VE=e.timestamp=e.aJb=e.H8=e.vh=e.Nc=e.W5a=e.yOb=e.nkb=void 0,T(r,(n=i(314)).$R),e.nkb=r,e.yOb=function(t){return new n.Us(t,e.VE)},e.W5a=function(t){return new n.Us(t*e.io.wg,e.VE)},e.Nc=a,e.vh=function(t){return new n.Us(t,e.io)},e.H8=function(t){return new n.Us(t,e.rda)},e.aJb=function(t){return new n.Us(t,e.zDa)},e.timestamp=a,e.VE=new r(1,"s"),e.ja=new r(1e3,"ms",e.VE),e.io=new r(1e3*e.ja.wg,"s",e.VE),e.rda=new r(60*e.io.wg,"min",e.VE),e.zDa=new r(60*e.rda.wg,"hr",e.VE),e.Gb=a(0)},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.assert=void 0,n=i(2),r=i(142),o=Error,n.__extends(s,o),a=s,e.assert=function(e,i){if(!e)try{throw new a(i||"Assertion failed")}catch(t){throw r.Qm.H.error("Assertion failed",{value:e,message:i,stack:t.stack}),t}}},function(t,e){_esm(e),e.default={bW:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},reset:function(){}}},function(t,e){_esm(e),e.FQ=e.qb=e.Xca=e.Nj=void 0,(t=e.Nj||(e.Nj={}))[t.Cfb=0]="FATAL",t[t.Mf=1]="ERROR",t[t.afa=2]="WARN",t[t.Fca=3]="INFO",t[t.aLa=4]="TRACE",t[t.ga=5]="DEBUG",e.Xca="LogFieldBuilderFactorySymbol",e.qb="LoggerFactorySymbol",e.FQ={}},function(t,r,e){var n,i,a,o,s,u,c,h;_esm(r),r.ka=r.LIa=r.oV=r.Ih=r.Oi=r.log=r.Wf=r.XM=r.aRa=r.Ar=r.pC=r.Uc=r.Hsb=r.Hia=r.Fsb=r.Gsb=r.kj=r.RP=r.OZ=r.Sh=r.Oc=r.za=void 0,n=e(196),t=e(7),i=e(26),a=e(78),o=e(77),s=e(36),u=e(30),c=e(141),h=e(38),e=e(48),r.za=n.cc.get(h.Uh),r.Oc=n.cc.get(e.Qj),r.Sh=n.cc.get(a.Bv),r.OZ=r.Sh.encode.bind(r.Sh),r.RP=r.Sh.decode.bind(r.Sh),r.kj=n.cc.get(o.tx),r.Gsb=r.kj.encode.bind(r.kj),r.Fsb=r.kj.decode.bind(r.kj),r.Hia=r.kj.UG.bind(r.kj),r.Hsb=r.kj.dab.bind(r.kj),r.Uc=n.cc.get(s.Ci),r.pC=function(t){return t=u.Se(t)?r.RP(t):t,r.Uc.encode(t)},r.Ar=r.Uc.decode.bind(r.Uc),r.aRa=function(t){return r.OZ(r.Ar(t))},r.XM=function(){return n.cc.get(i.yx)},r.Wf=n.cc.get(t.qb),r.log=r.Wf.ib("General"),r.Oi=function(t,e){return r.Wf.ib(t,void 0,e)},r.Ih=function(t,e,i){return r.Wf.ib(e,t,i)},r.oV=function(t,e,i,n){return r.Wf.ib(t,void 0,n,e,i)},r.LIa=function(t,e,i){return n.cc.get(c.LR)(t,e,i).xZ()},r.ka=n.cc},function(t,e,i){var n;_esm(e),e.JR=e.NCa=e.mMa=void 0,(t=i(2)).__exportStar(i(352),e),t.__exportStar(i(115),e),t.__exportStar(i(22),e),t.__exportStar(i(747),e),t.__exportStar(i(748),e),t.__exportStar(i(749),e),t.__exportStar(i(750),e),t.__exportStar(i(751),e),t.__exportStar(i(752),e),t.__exportStar(i(753),e),n=t.__importDefault(i(754)),e.mMa=n.default,n=t.__importDefault(i(755)),e.NCa=n.default,i=t.__importDefault(i(360)),e.JR=i.default},function(t){var a={Ba:function(t){return"number"==typeof t},Jh:function(t){return"object"==typeof t},Se:function(t){return"string"==typeof t},ia:function(t){return void 0===t},$$b:function(t){return"boolean"==typeof t},gd:function(t){return"function"==typeof t},Bb:function(t){return null===t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFinite:function(t){return isFinite(t)&&!isNaN(parseFloat(t))},has:function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)},GRb:function(t){var e,i=[];if(!a.Jh(t))throw new TypeError("Object.pairs called on non-object");for(e in t)t.hasOwnProperty(e)&&i.push([e,t[e]]);return i}};a.mf=a.forEach=function(t,e,i){if(null==t)return t;if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(n in t)a.has(t,n)&&e.call(i,t[n],n,t);return t},t.exports=a},function(t,e){_esm(e),e.xqa=e.localStorage=e.QJb=e.indexedDB=e.F0=e.Vp=e.wB=e.$E=e.URL=e.I0=e.G0=e.OFa=e.B0=e.SE=e.TE=e.np=e.fo=e.bj=e.lda=e.Kx=e.UKa=e.HJ=e.dF=e.pop=e.forEach=e.filter=e.reduce=e.every=e.slice=e.map=e.sort=e.Dy=e.Uhb=e.Be=e.xv=e.BGa=e.yv=e.H0=e.xB=void 0,t=pt,e.kf=t.navigator,e.xB=null===e.kf||void 0===e.kf?void 0:e.kf.userAgent,e.H0=t.location,e.yv=t.screen,e.BGa=t.devicePixelRatio,e.xv=t.performance,e.Be=t.document,e.Uhb=e.Be.documentElement,e.Dy=Array.prototype,e.sort=e.Dy.sort,e.map=e.Dy.map,e.slice=e.Dy.slice,e.every=e.Dy.every,e.reduce=e.Dy.reduce,e.filter=e.Dy.filter,e.forEach=e.Dy.forEach,e.pop=e.Dy.pop,e.dF=Object.create,e.HJ=Date.now,e.UKa=String.fromCharCode,e.Kx=Math.floor,e.lda=Math.ceil,e.bj=Math.round,e.fo=Math.max,e.np=Math.min,e.TE=Math.random,e.SE=Math.abs,e.B0=Math.pow,e.OFa=Math.sqrt,e.G0=t.escape,e.I0=t.unescape,e.URL=t.URL||t.webkitURL,e.$E=t.MediaSource||t.WebKitMediaSource,e.wB=t.webkitCrypto||t.msCrypto||t.crypto,e.Vp=e.wB&&(e.wB.webkitSubtle||e.wB.subtle),e.F0=t.webkitCryptokeys||t.msCryptokeys||t.cryptokeys;try{e.indexedDB=t.indexedDB}catch(t){e.QJb=t||"noex"}try{e.localStorage=t.localStorage}catch(t){e.xqa=t||"noex"}},function(t,e){_esm(e),e.aK=e.z0=e.odb=e.jdb=e.ldb=e.mdb=e.Bza=e.hdb=e.kdb=e.Aza=e.ndb=e.udb=e.sdb=e.tdb=e.rdb=e.jfb=e.ifb=e.hfb=e.ohb=e.phb=e.Jx=e.uFa=e.vFa=e.$J=e.FBa=e.lfb=e.gca=e.Y_=e.hib=e.Pjb=e.qFa=e.bdb=e.PAa=e.P0=e.cF=e.O0=e.pFa=e.tB=e.adb=e.mza=e.dhb=e.wkb=e.nhb=e.mhb=e.Jjb=e.Ijb=e.pl=e.Ye=e.BJa=e.ql=void 0,e.uea=void 0,e.ql=function(){},e.BJa=function(){return!0},e.Ye={$:!0},e.pl=1e3,e.Ijb=86400,e.Jjb=604800,e.mhb=1e4,e.nhb=1e7,e.wkb=1.5,e.dhb=.128,e.mza=7.8125,e.adb=128,e.tB=145152e5,e.pFa=1e5,e.O0="$netflix$player$order",e.cF=-1,e.P0=1,e.PAa=["en-US"],e.bdb=8,e.qFa=65535,e.Pjb=65536,e.hib=Number.MAX_VALUE,e.Y_="playready",e.gca="widevine",e.lfb="fps",e.FBa="clearkey",e.$J='audio/mp4; codecs="mp4a.40.5"',e.vFa='audio/mp4; codecs="mp4a.40.42"',e.uFa='audio/mp4; codecs="mp4a.a6"',e.Jx='video/mp4; codecs="avc1.640028"',e.phb='video/mp4; codecs="hev1.2.6.L153.B0"',e.ohb='video/mp4; codecs="dvhe.01000000"',e.hfb="9A04F079-9840-4286-AB92-E65BE0885F95",e.ifb="29701FE4-3CC7-4A34-8C5B-AE90C7439A47",e.jfb="EDEF8BA9-79D6-4ACE-A3C8-27DCD51D21ED",e.rdb=["4E657466-6C69-7850-6966-665374726D21","4E657466-6C69-7848-6165-6465722E7632"],e.tdb="A2394F52-5A9B-4F14-A244-6C427C648DF4",e.sdb="4E657466-6C69-7846-7261-6D6552617465",e.udb="8974DBCE-7BE7-4C51-84F9-7148F9882554",e.ndb="mp4a",e.Aza="enca",e.kdb="ec-3",e.hdb="avc1",e.Bza="encv",e.mdb="hvcC",e.ldb="hev1",e.jdb="dvhe",e.odb="vp09",e.z0=0,e.aK=1,e.uea="position:relative;width:100%;height:100%;overflow:hidden"},function(t,e){_esm(e),e.Sm={o9b:"casttv",Dja:"chrome",s9b:"chromecast",Ir:"edge",VUa:"edgeoss",pWa:"firefox",T$b:"ie",opera:"opera",c8a:"safari",C$a:"tesla"},e.qp={i3:"android",V_a:"ios",dSa:"chromeos",lMb:"linux",S1a:"mac",rya:"windows"},e.s0={yvb:"computer",phone:"phone",n_b:"tablet"},e.Zc="ConfigSymbol"},function(t,A,n){var O,I,x,P,R,N,j,C,L,M,D,U,B,F,q,H,K,V;function i(t){return(t=A.config.Dxa[e(t)])?t:{}}function e(t){if(t)return 0<=t.indexOf("billboard")?"billboard":0<=t.toLowerCase().indexOf("preplay")?"preplay":0<=t.indexOf("embedded")?"embedded":0<=t.indexOf("content-sampling")?"content-sampling":0<=t.indexOf("video-merch-bob-horizontal")?"video-merch-bob-horizontal":0<=t.indexOf("mini-modal-horizontal")?"mini-modal-horizontal":0<=t.indexOf("standard")?"standard":0<=t.indexOf("branching")?"branching":t}_esm(A),A.Cvb=A.Dvb=A.KSa=A.Yja=A.Bvb=A.LSa=A.Avb=A.MSa=A.Xja=A.config=void 0,O=n(12),I=n(50),x=n(8),P=n(40),R=n(21),n(30),N=n(26),j=n(44),C=n(24),n(7),L=n(11),M=n(19),D=n(185),U=n(49),B=n(89),F=n(108),q=n(52),H=n(4),K=n(34),V=n(18),A.MSa=function(t,e){var i,n,s,r,a,o,u,c,h;function f(e,i,n,t){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];return function(t){return M.Xc(t)&&(n=t),R.hb(M.gd(e)),e.apply(void 0,[i,n].concat(G(r)))}}function l(t){return t=t.toLowerCase(),r.hasOwnProperty(t)&&(s[t]=r[t],a[t]=r[t]),t}function p(t,e,i){var n;if(t=t.toLowerCase(),s.hasOwnProperty(t)){n=s[t];try{n=i?i(n):n}catch(t){n=void 0}if(void 0!==n)return n;R.hb(!1),x.log.error("Invalid configuration value. Name: "+t)}return e}function d(t,e,i,n){return p(t,e,function(t){if(M.Se(t)&&(t=C.He(t)),M.g0a(t,i,n))return t})}function b(t,e,i,n){return p(t,e,function(t){if(M.Se(t)&&(t=C.He(t)),M.Rz(t,i,n))return t})}function m(t,e,i,n){return p(t,e,function(t){if(M.Se(t)&&(t=parseFloat(t)),M.Ba(t,i,n))return t})}function g(t,e,i){return p(t,e,function(t){if(i?i.test(t):M.Se(t))return t})}function v(t,e){return p(t,e,function(t){return"true"==t||!0===t||"false"!=t&&!1!==t&&void 0})}function y(t,e){return p(t,e,function(t){return M.Se(t)?JSON.parse(L.I0(t)):M.Jh(t)?t:void 0})}function w(t,e,i,n,r,a){var o;if(t=t.toLowerCase(),s.hasOwnProperty(t)&&(o=s[t]),!M.Xc(o))return e;if(M.Se(o))if(o[0]!==i)o=n(o);else try{o=JSON.parse(L.I0(o))}catch(t){o=void 0}if(void 0===o)return e;for(t=0;t<r.length;t++)if(!r[t](o))return e;return a?a(o):o}function _(t,e,i,n,r){return w(t,e,"[",function(t){for(var e=(t=t.split("|")).length;e--;)t[e]=C.He(t[e]);return t},[function(t){return M.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(!M.Rz(t[e],i,n))return!1;return!0},function(t){return void 0===r||t.length>=r}])}function E(t,e){return w(t,e,"[",function(e){for(var t=(e=M.isArray(e)?e:e.split("|")).length;t--;)try{e[t]=JSON.parse(L.I0(e[t]))}catch(t){e=void 0;break}return e},[function(t){return M.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(!M.Xc(t[e])||!M.Jh(t[e]))return!1;return!0}])}function k(t,e,i,n){return w(t,e,"[",function(t){return M.isArray(t)?t:t.split("|")},[function(t){return M.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--;)if(i?!i.test(t[e]):!M.Sz(t[e]))return!1;return!0},function(t){return void 0===n||t.length>=n}])}function S(t,i,n){return w(t,i,"{",function(t){for(var e,i,n={},r=(t=t.split(";")).length;r--;){if((i=(e=t[r]).indexOf(":"))<=0)return;n[e.substring(0,i)]=e.substring(i+1)}return n},[function(t){return M.Jh(t)&&0<Object.keys(t).length},function(t){if(n)for(var e in t)if(!n.test(t[e]))return!1;return!0}],function(t){var e={};return C.Zb(e,i),C.Zb(e,t),e})}function T(t){t.split(",").forEach(function(t){var e=t.indexOf("=");0<e&&(s[t.substring(0,e).toLowerCase()]=t.substring(e+1))})}i=/^[0-9]+[%]?$/,n=/^[0-9]*$/,a={},o=x.ka.get(P.Tm),u=x.ka.get(F.fF),e=e,s={},C.Zb(s,e),t&&t.length&&L.forEach.call(t,function(t){M.Se(t)?T(t):M.Jh(t)&&C.Zb(s,t,{ON:!0})}),r=C.Zb({},I.l6(),{ON:!0}),(e=I.D6a().cadmiumconfig)&&(x.log.info("Config cookie loaded",e),T(e)),(x.ka.get(K.Hk).g3||s.istestaccount)&&(C.Zb(s,r),a=r),A.config={},c={SBb:f(v,l("enableXHEAAC"),!1),eVa:f(v,l("enableDDPlus20"),!0),dVa:f(v,l("enableDDPlus"),!0),PU:f(v,l("enableDDPlusAtmos"),!1),zBb:f(v,l("enableLSSDH"),!0),tBb:f(v,l("enableHEVC"),!1),O4a:f(v,l("overrideEnableHEVC"),!1),zla:f(v,l("enableHDR"),!1),N4a:f(v,l("overrideEnableHDR"),!1),M4a:f(v,l("overrideEnableDV"),!1),xM:f(v,l("enableAVCHigh"),u.xM),aI:f(v,l("overrideEnableAVCHigh"),u.aI),QBb:f(v,l("enableVP9"),!1),P4a:f(v,l("overrideEnableVP9"),!1),nBb:f(v,l("enableAV1"),!1),L4a:f(v,l("overrideEnableAV1"),!1),DRb:f(v,l("overrideEnableXHEAAC"),!1),GBb:f(v,l("enablePRK"),!1),rBb:f(v,l("enableDV"),!1),uBb:f(v,l("enableHWDRM"),!1),xBb:f(v,l("enableImageSubs"),!0),N1b:f(v,l("useLegacySubs"),!1),oC:f(k,l("audioProfiles"),u.oC),J9b:f(v,l("disableHD"),!1),OBb:f(v,l("enableUHD"),!0),Paa:f(b,"videoCapabilityDetectorType",N.gj.qv),qia:f(b,"audioCapabilityDetectorType",N.nv.qv),gv:f(k,l("videoProfiles"),u.gv),Gpb:f(k,l("timedTextProfiles"),u.dv),dv:function(){return c.Gpb().filter(function(t){return t===j.Zm.Uba?c.zBb():t!==j.Zm.cK||c.xBb()})},endpoint:f(v,l("endpoint"),!1),version:f(g,"version","unknown"),S8a:f(v,l("setMediaKeysEarly"),!1),nbc:f(v,l("nrdpPersistCookiesToIndexDB"),!1),nbb:f(v,l("useHdcpLevelOnCast"),!1),vBb:f(v,l("enableHdcp"),!1),Sw:f(v,l("prepareCadmium"),!1),eqb:f(v,l("acceptManifestOnPrepareItemParams"),!0),bTb:f(y,"ppmconfig",{maxNumberTitlesScheduled:1}),JSb:f(v,l("playerPredictionModelV2"),!0),RU:f(v,l("enableLdlPrefetch"),!1),kVa:f(v,l("enableMediaPrefetch"),!1),BBb:f(v,l("enableManifestCache"),!0),Jzb:f(v,l("deleteCachedManifestOnPlayback"),!1),Izb:f(v,l("deleteCachedManifestOnCreate"),!1),Nzb:f(v,l("deleteOtherManifestCacheOnCreate"),!1),Mzb:f(v,l("deleteOtherLdlCacheOnCreate"),!1),Fbc:f(b,l("periodicPrepareLogsIntervalMilliseconds"),36e5),xTb:f(b,l("prepareManifestCacheMaxCount"),50),vTb:f(b,l("prepareLdlCacheMaxCount"),30),$5a:f(b,l("prepareManifestExpiryMilliseconds"),12e5),wTb:f(b,l("prepareLdlExpiryMilliseconds"),78e4),pTb:f(b,l("prefetcherMaxWishlistSize"),1),oTb:f(b,l("prefetcherBudgetInBytes"),1/0),qTb:f(v,l("prefetcherOverrideItemPriority"),!0),uTb:f(g,l("prepareInsertStrategyPersistentTasks"),"append",/^(prepend|append|ignore)$/),$cc:f(y,"videoApp"),iE:f(y,"storageRules"),C5:f(v,"ftlEnabled",u.C5),Voa:f(b,l("imageSubsResolution"),0),zJb:f(b,l("imageSubsMaxBuffer"),u.ONb.da(q.ov),0),$T:f(v,l("captureBatteryStatus"),!1),DEb:f(b,l("getBatteryApiTimeoutMilliseconds"),5e3),xm:f(g,l("keySystemId"),u.xm),W0a:f(k,l("keySystemList"),void 0,void 0),COb:f(b,l("hdcpGlobalTimeout1"),1e4),DOb:f(b,l("hdcpGlobalTimeout2"),1e4),Sac:f(b,l("hdcpQueryTimeout1"),1e3),Tac:f(b,l("hdcpQueryTimeout2"),1e3),Y2a:f(b,l("hdcpQueryTimeout2"),100),EOb:f(v,l("microsoftHwdrmRequiresHevc"),!1),Fra:f(v,l("microsoftClearLeadRequiresSwdrm"),!1),zOb:f(v,l("microsoftEnableDeviceInfo"),!1),AOb:f(v,l("microsoftEnableHardwareInfo"),!1),BOb:f(v,l("microsoftEnableHardwareReset"),!1),K1b:f(v,l("useHevcCodecForDolbyVision"),!1),DBb:f(v,l("enableMediaCapabilities"),!1),aTb:f(v,l("powerEfficientForVideo"),!1),VMb:f(v,"logMediaPipelineStatus",!1),nY:f(v,l("renderDomDiagnostics"),!0),F1a:function(){return-1},MN:f(d,l("logDisplayMaxEntryCount"),u.MN,-1),aNb:f(d,l("logToConsoleLevel"),-1),f9b:f(d,l("bladerunnerCmdHistorySize"),10),nw:function(){return o.nw},A1b:f(v,"upgradeNetflixId",!0),Cqa:f(v,"logErrorIfEsnNotProvided",!0),Gla:f(v,"enforceSinglePlayback",u.Gla),V4:f(v,"enforceSingleSession",u.V4),Mja:f(v,"closeOtherPlaybacks",!0),Qrb:f(b,"asyncLoadTimeout",15e3,1),iNb:f(b,"mainThreadMonitorPollRate",0),mbc:f(v,"nrdpAlwaysShowUIOverlay",!1),obc:f(v,"nrdpValidateSSOTokens",!0),lcc:f(v,"showNrdpDebugBadging",!1),Taa:function(){return o.Taa},Cz:function(){return o.Cz},SL:function(){return o.SL},mJ:function(){return o.mJ},Bbb:f(b,l("verbosePlaybackInfoDenominator"),0),f$:f(v,"renderTimedText",!0),cTb:f(v,"preBufferTimedText",!0),JCb:f(v,"fatalOnTimedTextLoadError",!0),kxa:f(S,"timedTextStyleDefaults",{}),kaa:f(S,"timedTextStyleOverrides",{}),jxa:f(S,"timedTextFontFamilyMapping",u.jxa||{default:"font-family:Arial,Helvetica;font-weight:bolder"}),JP:f(b,"timedTextSimpleFallbackThreshold",u.JP.da(q.ov)),Dka:f(g,l("customDfxpUrl")),NBb:f(v,l("enableSubtitleTrackerLogging"),!1),kXb:f(v,l("sendSubtitleQoeLogblobOnMidplay"),!1),pja:f(_,"cdnIdWhiteList",[]),oja:f(_,"cdnIdBlackList",[]),yma:f(g,l("forceAudioTrack")),mPb:f(v,"muteVolumeOnPlaybackClose",!0),pbc:f(g,"nrdpVolumeControlType","VOLUME_STREAM"),Cma:f(g,l("forceTimedTextTrack")),VNb:f(b,l("maxRetriesTimedTextDownload"),0),L_b:f(b,l("timedTextRetryInterval"),8e3),sZb:f(g,"storageType","idb",/^(none|fs|idb|ls)$/),B1a:f(b,"lockExpiration",1e4),TMb:f(b,"lockRefresh",3e3),aub:f(v,"captureUnhandledExceptions",!0),yJb:f(v,"ignoreUnhandledExceptionDuringPlayback",!0),M0b:f(v,"unhandledExceptionsArePlaybackErrors",!1),Dab:f(g,"unhandledExceptionSource",""),GTb:f(v,"preserveLastFrame",!1),LOb:f(b,"minBufferingTimeInMilliseconds",4e3),bUb:f(b,"progressBackwardsGraceTimeMilliseconds",4e3),cUb:f(b,"progressBackwardsMinPercent",10),Ssb:f(g,l("bookmarkIgnoreBeginning"),"0",i),Tsb:f(g,l("bookmarkIgnoreEnd"),"5%",i),Usb:f(g,l("bookmarkIgnoreEndForBranching"),"60000",i),RN:f(b,"maxParallelConnections",3),Uua:f(v,"reportThroughputInLogblobs",!0),Kw:f(b,"minAudioMediaRequestDuration",16e3),JOb:f(b,"minAudioMediaRequestDurationBranching",0),lA:f(b,"minVideoMediaRequestDuration",4e3),POb:f(b,"minVideoMediaRequestDurationAL1",0),QOb:f(b,"minVideoMediaRequestDurationBranching",0),x8:f(b,"minAudioMediaRequestSizeBytes",0),F8:f(b,"minVideoMediaRequestSizeBytes",0),VAb:f(v,"droppedFrameRateFilterEnabled",!1),WAb:f(b,"droppedFrameRateFilterMaxObservation",60,10,1e3),YAb:f(function(t,e,n,r,i,a){return w(t,e,"[",function(t){for(var e=(t=t.split(";")).length;e--;){t[e]=t[e].split("|");for(var i=t[e].length;i--;)t[e][i]=C.He(t[e][i])}return t},[function(t){return M.isArray(t)&&0<t.length},function(t){for(var e=t.length;e--&&void 0!==t;){if(!M.isArray(t[e]))return!1;for(var i=t[e].length;i--;)if(!M.Rz(t[e][i],n,r))return!1}return!0},function(t){if(void 0!==i)for(var e=t.length;e--;)if(i!==t[e].length)return!1;return!0},function(t){return void 0===a||t.length>=a}])},"droppedFrameRateFilterPolicy",[[3,15],[6,9],[9,2],[15,1]],void 0,void 0,2,0),U9b:f(v,"droppedFrameRateFilterWithoutRebufferEnabled",!0),XAb:f(b,"droppedFrameRateFilterMinHeight",384),ZAb:f(_,"droppedFramesPercentilesList",[]),FOb:f(v,"microsoftScreenSizeFilterEnabled",!1),GLb:f(v,"keyStatusFilterEnabled",!1),NZa:f(b,"hdcpEngagementWaitTime",0),J0b:f(v,"uiLabelFilterEnabled",!0),I0b:f(y,"uiLabelFilter",{}),Ezb:f(b,l("defaultVolume"),100,0,100),lra:f(b,l("maxPlaybackRate"),2,0,16),sUa:f(v,"disableVideoRightClickMenu",!1),A8:f(b,"minDecoderBufferMilliseconds",1e3,0,O.tB),$H:f(b,"optimalDecoderBufferMilliseconds",5e3,0,O.tB),A4a:f(b,"optimalDecoderBufferMillisecondsBranching",3e3,0,O.tB),BD:f(b,"minimumTimeBeforeBranchDecision",3e3,0,O.tB),dA:f(b,"maxDecoderBufferMilliseconds",u.dA.da(H.ja),0,O.tB),VTa:f(b,"decoderTimeoutMilliseconds",1e4,1),M3a:f(b,"noRenderTimeoutMilliseconds",0),qAb:f(v,"disgardMediaOnAppend",!1),vrb:f(v,"appendMediaBeforeInit",!1),YRb:f(b,"pauseTimeoutLimitMilliseconds",18e5),Xoa:f(b,"inactivityMonitorInterval",3e4,0),dqb:f(_,"abrdelLogPointsSeconds",[15,30,60,120],0,void 0,4),zM:f(v,"enableTrickPlay",!1),Wqb:f(_,"additionalDownloadSimulationParams",[2e3,2e3,100],0,void 0,3),u0b:f(b,"trickPlayHighResolutionBitrateThreshold",1e3),v0b:f(b,"trickPlayHighResolutionThresholdMilliseconds",1e4),y0b:f(m,"trickplayBufferFactor",.5),t0b:f(b,"trickPlayDownloadRetryCount",1),cra:f(g,"marginPredictor","simple",/^(simple|scale|iqr|percentile)$/),Zra:f(g,"networkMeasurementGranularity","video_location",/^(location|video_location)$/),xDa:f(y,"HistoricalTDigestConfig",{maxc:25,rc:"ewma",c:.5,hl:7200}),v2a:f(d,"maxIQRSamples",1/0),g3a:f(d,"minIQRSamples",5),ubb:f(v,"useResourceTimingAPI",!1),uJb:f(v,"ignoreFirstByte",!0),yra:f(v,"mediaRequestAsyncLoadStart",u.yra),V1b:f(v,"useXHROnLoadStart",!1),Xla:f(_,"failedDownloadRetryWaitsASE",[10,200,500,1e3,2e3,4e3]),d4:f(b,"connectTimeoutMilliseconds",8e3,500),esa:f(b,"noProgressTimeoutMilliseconds",8e3,500),O1b:f(v,"useOnLineApi",!1),V$a:f(b,"timedTextDownloadRetryCountBeforeCdnSwitch",3),ebc:f(b,"netflixRequestExpiryTimeout",0),L2b:f(v,"webkitDecodedFrameCountIncorrectlyReported",!1),RWb:f(b,"seekBackOnAudioTrackChangeMilliseconds",8e3),WRb:f(v,"pausePlaybackOnAudioSwitch",!0),baa:f(k,l("supportedAudioTrackTypes"),[],void 0,1),b7:f(b,"initialLogFlushTimeout",5e3),J5a:f(g,"playdataPersistKey",o.nw?"unsentplaydatatest":"unsentplaydata"),Kva:f(v,"sendPersistedPlaydata",!0),FSb:f(b,"playdataPersistIntervalMilliseconds",4e3),Gbc:f(b,"playdataSendDelayMilliseconds",1e4),D$:f(v,"sendPlaydataBackupOnInit",!0),YMb:f(k,"logPerformanceTiming","navigationStart redirectStart fetchStart secureConnectionStart requestStart domLoading".split(" ")),Z2a:f(v,"midplayEnabled",!0),v8:f(b,"midplayIntervalMilliseconds",3e5),$2a:f(_,"midplayKeyPoints",[15e3,3e4,6e4,12e4]),M4:f(b,"downloadReportDenominator",0),KAb:f(b,"downloadReportInterval",3e5),E1a:f(b,"logConfigApplyDenominator",0),jRa:f(S,l("bookmarkByMovieId"),{}),iV:f(v,l("forceLimitedDurationLicense"),!1),rD:f(b,l("licenseRenewalRequestDelay"),0),kta:f(b,l("persistedReleaseDelay"),1e4),kac:f(v,l("limitedDurationFlagOverride"),void 0),d8a:f(b,"safariPlayPauseWorkaroundDelay",100),W2b:f(b,"workaroundValueForSeekIssue",1200),kja:f(v,l("callEndOfStream"),u.kja),iSb:f(v,"performRewindCheck",!0),LCb:f(v,"fatalOnUnexpectedSeeking",!0),KCb:f(v,"fatalOnUnexpectedSeeked",!0),fYb:f(v,l("setVideoElementSize")),$ub:f(v,l("clearVideoSrc"),!0),fUa:f(b,l("delayPlayPause"),0),hp:f(v,l("useTypescriptEme"),!1),lbb:f(v,l("useEncryptedEvent"),!0),JU:f(g,l("drmPersistKey"),"unsentDrmData"),m6a:f(v,l("promiseBasedEme"),!1),$tb:f(v,"captureKeyStatusData",!1),T6:f(v,"includeCapabilitiesInRequestMediaKeySystemAccess",!0),ZPb:f(v,l("nudgeSourceBuffer"),!1),Ava:f(d,l("seekDelta"),1),NX:f(v,l("preciseSeeking"),!1),fTb:f(v,l("preciseSeekingOnTwoCoreDevice"),!1),eUa:f(S,l("delayErrorHandling")),jab:f(v,"trackingLogEnabled",!1),kab:f(function(t,e){var i=S(t,e,void 0);return i&&Object.entries(i).forEach(function(t){var e=nt(t);t=e.next().value,"true"===(e=e.next().value)?i[t]=!0:"false"===e&&(i[t]=!1)}),i},"trackingLogEvents",{sso:!1,startup:!1,playback:!1,regpair:!1}),pxa:f(g,"trackingLogPath","/customerevents/track/debug"),k0b:f(_,"trackingLogStallKeyPoints",[1e4,3e4,6e4,12e4]),Vk:f(g,"esn",""),XVa:f(g,"fesn",""),IBb:f(v,l("enablePerformanceLogging"),!1),gVa:f(v,l("enableEmeVerboseLogging"),!1),ABb:f(v,"enableLastChunkLogging",!1),appId:f(g,"appId","",n),sessionId:f(g,"sessionId","",n),qja:f(g,"cdnProxyUrl"),S1b:f(v,"usePlayReadyHeaderObject",!1),zWa:f(b,"forceXhrErrorResponseCode",void 0),Ir:{bbc:f(g,"mslApiPath","/msl/"),Lbc:f(g,"proxyPath",""),YA:f(g,"uiVersion"),Aaa:f(g,"uiPlatform"),p9b:function(){return"0"},Kta:f(k,"preferredLanguages",O.PAa,/^[a-zA-Z-]{2,5}$/,1),EDb:f(g,l("forceDebugLogLevel"),void 0,/^(ERROR|WARN|INFO|TRACE)$/),ZZb:f(v,"supportPreviewContentPin",!0),$Zb:f(v,"supportWatermarking",!0),IYb:f(v,"showAllSubDubTracks",!1),g$b:f(v,l("failOnGuidMismatch"),!1)},W9:{enabled:f(v,"qcEnabled",!1),Vo:f(g,"qcPackageId","")},Js:f(v,"useRangeHeader",!1),SU:f(v,"enableMilestoneEventList",!0),JL:f(g,"authenticationType",o.nw?u.UQa:u.JL),TQa:f(S,"authenticationKeyNames",C.Zb({e:"DKE",h:"DKH",w:"DKW",s:"DKS"})),k_b:f(g,"systemKeyWrapFormat"),GJb:f(v,"includeNetflixIdUserAuthData",!0),BYb:f(v,"shouldSendUserAuthData",!0),Nva:f(v,"sendUserAuthIfRequired",u.Nva),xYb:f(v,"shouldClearUserData",!1),rJ:f(v,"usesMsl",!0),hPb:f(v,"mslDeleteStore",!1),jPb:f(v,"mslPersistStore",!0),awb:f(v,"correctNetworkForShortTitles",!0),$Sb:f(v,"postplayHighInitBitrate",!1),zDb:f(v,"flushHeaderCacheOnAudioTrackChange",!0),e_b:f(v,"supportsUnequalizedDownloadables",!0),QTa:f(b,l("debugAseDenominator"),100),AT:f(b,"aseAudioBufferSizeBytes",u.AT.da(q.ov)),BT:f(b,"aseVideoBufferSizeBytes",u.BT.da(q.ov)),Lw:f(b,"minInitVideoBitrate",560),Kra:f(b,"minHCInitVideoBitrate",560),fA:f(b,"maxInitVideoBitrate",1/0),WW:f(b,"minInitAudioBitrate",0),VW:f(b,"minHCInitAudioBitrate",0),HW:f(b,"maxInitAudioBitrate",65535),w8:f(b,"minAcceptableVideoBitrate",235),XW:f(b,"minRequiredBuffer",3e4),tj:f(b,"minPrebufSize",7800),z8:f(b,"minCheckBufferingCompleteInterval",999999),vua:f(m,"rebufferingFactor",1),$r:f(b,"maxBufferingTime",2600),Zxa:f(v,"useMaxPrebufSize",!0),wD:f(b,"maxPrebufSize",45e3),nra:f(b,"maxRebufSize",1/0),Y6:f(E,"initialBitrateSelectionCurve",null),D_a:f(b,"initSelectionLowerBound",560),E_a:f(b,"initSelectionUpperBound",1050),haa:f(b,"throughputPercentForAudio",15),Eia:f(b,"bandwidthMargin",10),Fia:f(v,"bandwidthMarginContinuous",!1),Gia:f(E,"bandwidthMarginCurve",[{m:65,b:8e3},{m:65,b:3e4},{m:50,b:6e4},{m:45,b:9e4},{m:40,b:12e4},{m:20,b:18e4},{m:5,b:24e4}]),$ja:f(b,"conservBandwidthMargin",20),$wa:f(v,"switchConfigBasedOnInSessionTput",!1),hU:f(b,"conservBandwidthMarginTputThreshold",0),aka:f(E,"conservBandwidthMarginCurve",[{m:80,b:8e3},{m:80,b:3e4},{m:70,b:6e4},{m:60,b:9e4},{m:50,b:12e4},{m:30,b:18e4},{m:10,b:24e4}]),w$a:f(v,"switchAlgoBasedOnHistIQR",!1),kE:f(g,"switchConfigBasedOnThroughputHistory","none",/^(none|iqr|avg)$/),mra:f(d,"maxPlayerStateToSwitchConfig",-1),Mqa:f(g,"lowEndMarkingCriteria","none",/^(none|iqr|avg)$/),Ica:f(m,"IQRThreshold",.5),Moa:f(g,"histIQRCalcToUse","simple"),ru:f(b,"maxTotalBufferLevelPerSession",0),wla:f(v,"enableCombinedPlaygraphs",!1),R4:f(v,"enableDiscontiguousBuffering",!1),Ama:f(_,"forceImmediateTransitionTypeForTitles",[]),zma:f(b,"forceImmediateTransitionExitZone",0),Wxa:f(v,"useBufferSizeLimiter",!1),VZa:f(b,"highWatermarkLevel",3e4),cab:f(b,"toStableThreshold",3e4),naa:f(b,"toUnstableThreshold",u.naa.da(H.ja)),swa:f(v,"skipBitrateInUpswitch",!0),qya:f(b,"watermarkLevelForSkipStart",8e3),Goa:f(b,"highStreamRetentionWindow",9e4),Nqa:f(b,"lowStreamTransitionWindow",51e4),Ioa:f(b,"highStreamRetentionWindowUp",3e5),Pqa:f(b,"lowStreamTransitionWindowUp",3e5),Hoa:f(b,"highStreamRetentionWindowDown",6e5),Oqa:f(b,"lowStreamTransitionWindowDown",0),Foa:f(m,"highStreamInfeasibleBitrateFactor",.5),Zz:f(b,"lowestBufForUpswitch",15e3),V7:f(b,"lockPeriodAfterDownswitch",15e3),Rqa:f(b,"lowWatermarkLevel",25e3),$z:f(b,"lowestWaterMarkLevel",2e4),Sqa:f(v,"lowestWaterMarkLevelBufferRelaxed",!1),xra:f(m,"mediaRate",1),i8:f(b,"maxTrailingBufferLen",1e4),ET:f(b,"audioBufferTargetAvailableSize",262144),RZ:f(b,"videoBufferTargetAvailableSize",1048576),I2a:f(b,"maxVideoTrailingBufferSize",8388608),p2a:f(b,"maxAudioTrailingBufferSize",393216),l5:f(m,"fastUpswitchFactor",3),Yla:f(m,"fastDownswitchFactor",1),gA:f(b,"maxMediaBufferAllowed",24e4),qwa:f(v,"simulatePartialBlocks",!0),u9a:f(v,"simulateBufferFull",!0),bka:f(v,"considerConnectTime",!1),Zja:f(m,"connectTimeMultiplier",1),M1a:f(b,"lowGradeModeEnterThreshold",12e4),N1a:f(b,"lowGradeModeExitThreshold",9e4),s2a:f(b,"maxDomainFailureWaitDuration",3e4),o2a:f(b,"maxAttemptsOnFailure",18),LVa:f(v,"exhaustAllLocationsForFailure",!0),y2a:f(b,"maxNetworkErrorsDuringBuffering",20),c8:f(b,"maxBufferingTimeAllowedWithNetworkError",12e4),TVa:f(b,"fastDomainSelectionBwThreshold",2e3),I$a:f(b,"throughputProbingEnterThreshold",4e4),J$a:f(b,"throughputProbingExitThreshold",34e3),z1a:f(b,"locationProbingTimeout",1e4),aWa:f(b,"finalLocationSelectionBwThreshold",1e4),G$a:f(m,"throughputHighConfidenceLevel",.75),H$a:f(m,"throughputLowConfidenceLevel",.4),mVa:f(v,"enablePerfBasedLocationSwitch",!1),Ju:f(v,"probeServerWhenError",!0),Sta:f(b,"probeRequestTimeoutMilliseconds",8e3),Ay:f(v,"allowSwitchback",!0),mI:f(b,"probeDetailDenominator",100),d8:f(b,"maxDelayToReportFailure",300),zqa:f(b,"locationStatisticsUpdateInterval",6e4),cTa:f(v,"countGapInBuffer",!1),$Pa:f(v,"allowCallToStreamSelector",!0),rRa:f(b,"bufferThresholdForAbort",1e4),ora:f(b,"maxResponsesInitialTput",6),S4:f(v,"enableInitialTputLogging",!1),nta:f(b,"pipelineScheduleTimeoutMs",2),hA:f(b,"maxPartialBuffersAtBufferingStart",2),pra:f(b,"maxStreamingSkew",4e3),kra:f(b,"maxPendingBufferPercentage",10),G6:f(b,"headerRequestSize",4096),Ola:f(v,"estimateHeaderSize",!0),TW:f(b,"minBufferLenForHeaderDownloading",1e4),XO:f(b,"reserveForSkipbackBufferMs",1e4),psa:f(b,"numExtraFragmentsAllowed",2),zq:f(v,"pipelineEnabled",!1),D9a:f(b,"socketReceiveBufferSize",0),s3:f(b,"audioSocketReceiveBufferSize",32768),UP:f(b,"videoSocketReceiveBufferSize",65536),Doa:f(b,"headersSocketReceiveBufferSize",32768),Faa:f(b,"updatePtsIntervalMs",1e3),Ria:f(b,"bufferTraceDenominator",100),ML:f(b,"bufferLevelNotifyIntervalMs",2e3),GL:f(b,"aseReportDenominator",0),n3:f(b,"aseReportIntervalMs",3e5),oBb:f(v,"enableAbortTesting",!1),bqb:f(b,"abortRequestFrequency",8),Rwa:f(b,"streamingStatusIntervalMs",2e3),vA:f(b,"prebufferTimeLimit",24e4),y8:f(b,"minBufferLevelForTrackSwitch",2e3),fta:f(b,"penaltyFactorForLongConnectTime",2),Kqa:f(b,"longConnectTimeThreshold",200),Qha:f(b,"additionalBufferingLongConnectTime",2e3),Rha:f(b,"additionalBufferingPerFailure",8e3),eY:f(b,"rebufferCheckDuration",6e4),jVa:f(v,"enableLookaheadHints",!1),J1a:f(b,"lookaheadFragments",2),jz:f(v,"enableOCSideChannel",!0),M0:f(y,"OCSCBufferQuantizationConfig",{lv:5,mx:240}),Pab:f(v,"updateDrmRequestOnNetworkFailure",!1),dUa:f(v,"deferAseScheduling",!1),r2a:f(b,"maxDiffAudioVideoEndPtsMs",16e3),y4:f(b,"defaultHeaderCacheSize",4),x4:f(b,"defaultHeaderCacheDataPrefetchMs",8e3),RH:f(v,"neverWipeHeaderCache",!0),Yra:f(b,"networkFailureResetWaitMs",2e3),Xra:f(b,"networkFailureAbandonMs",6e4),h8:f(b,"maxThrottledNetworkFailures",3),gaa:f(b,"throttledNetworkFailureThresholdMs",200),Qqa:f(d,"lowThroughputThreshold",400),Sla:f(v,"excludeSessionWithoutHistoryFromLowThroughputThreshold",!1),s3a:f(v,"mp4ParsingInNative",!1),F9a:f(v,"sourceBufferInOrderAppend",!0),WD:f(v,"requireAudioStreamToEncompassVideo",!0),ZPa:f(v,"allowAudioToStreamPastVideo",!0),ji:f(v,"enableManagerDebugTraces",!1),$1a:f(b,"managerDebugMessageInterval",1e3),Z1a:f(b,"managerDebugMessageCount",20),X3a:f(v,"notifyManifestCacheEom",!1),Qia:f(b,"bufferThresholdToSwitchToSingleConnMs",18e4),Pia:f(b,"bufferThresholdToSwitchToParallelConnMs",12e4),B9:f(b,"periodicHistoryPersistMs",3e5),t$:f(b,"saveVideoBitrateMs",18e4),pQa:f(v,"appendMediaRequestOnComplete",!0),Vaa:f(v,"waitForDrmToAppendMedia",!1),u5:f(v,l("forceAppendHeadersAfterDrm"),!1),BUb:f(v,l("reappendRequestsOnSkip"),!1),oPb:f(b,"netIntrStoreWindow",36e3),MOb:f(b,"minNetIntrDuration",8e3),GCb:f(b,"fastHistoricBandwidthExpirationTime",10368e3),ysb:f(b,"bandwidthExpirationTime",5184e3),DCb:f(b,"failureExpirationTime",86400),VIb:f(b,"historyTimeOfDayGranularity",4),qCb:f(v,"expandDownloadTime",!1),YOb:f(b,"minimumMeasurementTime",500),XOb:f(b,"minimumMeasurementBytes",131072),C_b:f(b,"throughputMeasurementTimeout",2e3),VJb:f(b,"initThroughputMeasureDataSize",262144),D_b:f(g,"throughputPredictor","ewma"),B_b:f(b,"throughputMeasureWindow",5e3),G_b:f(b,"throughputWarmupTime",5e3),A_b:f(b,"throughputIQRMeasureWindow",5e3),ahb:f(b,"IQRBucketizerWindow",15e3),Fvb:f(b,"connectTimeHalflife",10),jWb:f(b,"responseTimeHalflife",10),UIb:f(b,"historicBandwidthUpdateInterval",2e3),WOb:f(b,"minimumBufferToStopProbing",1e4),zva:f(g,"secondThroughputEstimator","none"),k8a:f(d,"secondThroughputMeasureWindowInMs",1/0),sBb:f(k,"enableFilters","throughput-ewma throughput-sw throughput-iqr throughput-tdigest avtp entropy".split(" ")),XCb:f(y,"filterDefinitionOverrides",{}),vzb:f(g,"defaultFilter","throughput-ewma"),PWb:f(g,"secondaryFilter","none"),wzb:f(y,"defaultFilterDefinitions",{"throughput-ewma":{type:"discontiguous-ewma",mw:5e3,wt:5e3},"throughput-sw":{type:"slidingwindow",mw:5e3},"throughput-iqr":{type:"iqr",mx:1/0,mn:5,bw:15e3,iv:1e3},"throughput-iqr-history":{type:"iqr-history"},"throughput-location-history":{type:"discrete-ewma",hl:14400,in:3600},"respconn-location-history":{type:"discrete-ewma",hl:100,in:25},"throughput-tdigest":{type:"tdigest",maxc:25,c:.5,b:1e3,w:15e3,mn:6},"throughput-tdigest-history":{type:"tdigest-history",maxc:25,rc:"ewma",c:.5,hl:7200},"respconn-ewma":{type:"discrete-ewma",hl:10,in:10},avtp:{type:"avtp"},entropy:{type:"entropy",mw:2e3,sw:6e4,in:"none",mins:1,hdl:[150,230,352,539,825,1264,1936,2966,4543,6958],uhdl:[150,230,352,539,825,1264,1936,2966,4543,6958,10657,16322,25e3]}}),bX:f(v,"needMinimumNetworkConfidence",!0),Jia:f(v,"biasTowardHistoricalThroughput",!0),Jha:f(v,"addHeaderDataToNetworkMonitor",!1),Bwa:f(v,"startMonitorOnLoadStart",!1),Tua:f(v,"reportFailedRequestsToNetworkMonitor",!1),ira:f(d,"maxFastPlayBufferInMs",1/0),hra:f(d,"maxFastPlayBitThreshold",1/0),$ha:f(v,"appendFirstHeaderOnComplete",!0),Erb:f(g,"ase_stream_selector","optimized"),gpa:f(g,"initBitrateSelectorAlgorithm","default"),Wia:f(g,"bufferingSelectorAlgorithm","default"),RTa:f(g,"ase_ls_failure_simulation",""),Gka:f(v,"ase_dump_fragments",!1),Ika:f(b,"ase_location_history",0),Jka:f(b,"ase_throughput",0),TTa:f(v,"ase_simulate_verbose",!1),WSb:f(b,"pollingPeriod",150),MMb:f(b,"loadTimeMs",18e4),yNb:f(b,"marginTimeMs",1e4),ena:f(v,"getDeviceIdFromBindDevice",!1),Iha:f(v,"addFailedLogBlobsToQueue",!0),Dxa:{"content-sampling":{$r:f(b,"contentSamplingMaxBufferingTime",3e3),cP:f(g,"contentSamplingSelectStartingVMAFMethod","fallback"),uT:f(v,"contentSamplingActivateSelectStartingVMAF",!0),uu:f(b,"contentSamplingMinStartingVideoVMAF",80),SW:f(b,"contentSamplingMinAcceptableVMAF",70),KH:f(b,"contentSamplingMinAllowedVmaf",60)},billboard:{Lw:f(b,"billboardMinInitVideoBitrate",1050),fA:f(b,"billboardMaxInitVideoBitrate",null),tj:f(b,"billboardMinPrebufSize",null),wD:f(b,"billboardMaxPrebufSize",null),$r:f(b,"billboardMaxBufferingTime",null),hA:f(b,"billboardMaxPartialBuffersAtBufferingStart",null),$z:f(b,"billboardLowestWaterMarkLevel",6e3),Zz:f(b,"billboardLowestBufForUpswitch",25e3),kE:f(g,"billboardSwitchConfigBasedOnThroughputHistory","none",/^(none|iqr|avg)$/)},preplay:{Lw:f(b,"preplayMinInitVideoBitrate",1050),fA:f(b,"preplayMaxInitVideoBitrate",null),tj:f(b,"preplayMinPrebufSize",null),wD:f(b,"preplayMaxPrebufSize",null),$r:f(b,"preplayMaxBufferingTime",null),hA:f(b,"preplayMaxPartialBuffersAtBufferingStart",null),$z:f(b,"preplayLowestWaterMarkLevel",6e3),Zz:f(b,"preplayLowestBufForUpswitch",25e3)},embedded:{Lw:f(b,"embeddedMinInitVideoBitrate",1050),fA:f(b,"embeddedMaxInitVideoBitrate",null),tj:f(b,"embeddedMinPrebufSize",null),wD:f(b,"embeddedMaxPrebufSize",null),$r:f(b,"embeddedMaxBufferingTime",null),hA:f(b,"embeddedMaxPartialBuffersAtBufferingStart",null),$z:f(b,"embeddedLowestWaterMarkLevel",6e3),Zz:f(b,"embeddedLowestBufForUpswitch",25e3)},"video-merch-bob-horizontal":{Lw:f(b,"videoMerchBobHorizontalMinInitVideoBitrate",null),fA:f(b,"videoMerchBobHorizontalMaxInitVideoBitrate",null),tj:f(b,"videoMerchBobHorizontalMinPrebufSize",null),wD:f(b,"videoMerchBobHorizontalMaxPrebufSize",null),$r:f(b,"videoMerchBobHorizontalMaxBufferingTime",null),hA:f(b,"videoMerchBobHorizontalMaxPartialBuffersAtBufferingStart",null),$z:f(b,"videoMerchBobHorizontalLowestWaterMarkLevel",null),Zz:f(b,"videoMerchBobHorizontalLowestBufForUpswitch",null),gv:f(k,"videoMerchVideoProfiles",void 0)},"mini-modal-horizontal":{Lw:f(b,"miniModalHorizontalMinInitVideoBitrate",null),fA:f(b,"miniModalHorizontalMaxInitVideoBitrate",null),tj:f(b,"miniModalHorizontalMinPrebufSize",null),wD:f(b,"miniModalHorizontalMaxPrebufSize",null),$r:f(b,"miniModalHorizontalMaxBufferingTime",500),hA:f(b,"miniModalHorizontalMaxPartialBuffersAtBufferingStart",null),$z:f(b,"miniModalHorizontalLowestWaterMarkLevel",null),Zz:f(b,"miniModalHorizontalLowestBufForUpswitch",null),gv:f(k,"miniModalHorizontalVideoProfiles",void 0)}},RBb:f(v,"enableVerbosePlaydelayLogging",!1),LBb:f(v,"enableSeamless",!1),Loa:f(b,"hindsightDenominator",0),Koa:f(b,"hindsightDebugDenominator",0),K6:f(y,"hindsightParam",{numB:1/0,bSizeMs:1e3,fillS:"last",fillHl:1e3}),UU:f(v,"enableSessionHistoryReport",!1),ula:f(b,"earlyStageEstimatePeriod",1e4),i1a:f(b,"lateStageEstimatePeriod",3e4),f8:f(b,"maxNumSessionHistoryStored",30),E8:f(b,"minSessionHistoryDuration",3e4),Fw:f(b,"maxActiveRequestsPerSession",3),a8:f(b,"maxActiveRequestsSABCell100",2),uqa:f(v,"limitAudioDiscountByMaxAudioBitrate",!0),he:f(y,"browserInfo",{}),ntb:f(b,l("busyGracePeriod"),199),lXb:f(v,l("sendTransitionLogblob"),!0),eBb:f(v,l("editVideoFragments"),!0),P4:f(v,l("earlyAppendSingleChildBranch"),!0),HJb:f(v,l("includeSegmentInfoOnLogblobs"),!0),vCb:f(v,"exposeTestData",!1),Kka:f(v,"declareBufferingCompleteAtSegmentEnd",!0),fG:f(v,"applyProfileTimestampOffset",!1),fm:f(v,"applyProfileStreamingOffset",!1),mrb:f(v,l("allowSmallSeekDelta"),!1),VYb:f(b,l("smallSeekDeltaThresholdMilliseconds"),D.e1),qBb:f(v,"enableCDMAttestedDescriptors",!1),j$:f(v,"requireDownloadDataAtBuffering",!1),k$:f(v,"requireSetupConnectionDuringBuffering",!1),yua:f(v,"recordFirstFragmentOnSubBranchCreate",!1),$sb:f(v,"branchingAudioTrackFrameDropSmallSeekFix",!0),xWa:f(v,"forceL3WidevineCdm",!1),pbb:f(v,"useMobileVMAF",!1),lUa:f(g,"desiredVMAFTypeMobile","phone_plus_lts"),mUa:f(g,"desiredVMAFTypeNonMobile","plus_lts"),uT:f(v,"activateSelectStartingVMAF",!1),uu:f(b,"minStartingVideoVMAF",1),SW:f(b,"minAcceptableVMAF",1),KH:f(b,"minAllowedVmaf",1),qrb:f(v,"alwaysNotifyEOSForPlaygraph",!0),TU:f(v,"enableNewAse",!0),Iaa:f(v,"useNewApi",!0),wBb:f(v,"enableHudsonFieldTest",!1),jJb:f(k,"hudsonTitles",["81127954","70125931","80158148"]),SNb:f(b,"maxPartialBuffersAtHudson",1),dQb:f(b,"numberOfChunksPerSegment",4),o_b:f(b,"targetContentLatency",1e4),p_b:f(b,"targetLongContentLatency",3e4),ZOb:f(b,"minimumTimeDelay",1),Bla:f(v,"enableWsslEstimate",!1),b8:f(b,"maxAllowedOutstandingRequests",4),BL:f(v,"alwaysRunUnderflowTimer",!0),Lra:f(b,"minStreamableConcurrencyWindow",3e3),Nwa:f(m,"streamableConcurrencyFactor",.3),VT:f(b,"bufferingConcurrencyWindow",7800),QYb:f(v,"singleStreamablePerBranch",!0),U4:f(v,"enableResolutionVMAFStreamFilter",!1),o$:f(y,"resolutionVMAFCappingRuleList",{}),hta:f(d,"percentCapTitlesForResolutionVMAFStreamFilter",100),mAb:f(v,"disableSkipping",!1),Haa:f(v,"useHLSPlayer",u.Haa),Xxa:f(v,l("useExitZones"),!0),VVb:f(v,"requestSegmentVmaf",!1),tA:f(y,"perFragmentVMAFConfig",{enabled:!1})},h=!0,A.Xja=function(t){var e,i,n,r=x.ka.get(V.jd).id;if(0<A.config.E1a&&0==r%A.config.E1a)try{e=x.ka.get(U.Um),i=x.ka.get(B.Ix).Gt("config","info",{params:t}),e.Hc(i)}catch(t){x.log.error("Failed to log config$apply",t)}pt._cad_global.config=A.config,R.hb(t),t&&(s=C.Zb({},t,{ON:!0}),C.Zb(s,a,{ON:!0}),function i(t,n){C.te(t,function(t,e){M.gd(e)?n[t]=e.call(void 0,n[t]):M.Jh(e)&&(n[t]=n[t]||{},i(e,n[t]))})}(c,A.config),s.istestaccount&&x.log.trace("Config applied for",(r=h?s:t,n=[],C.te(r,function(t,e){var i;try{i="videoapp"===t.toLowerCase()?"[object object]":JSON.stringify(e)}catch(t){i="cantparse"}n.push(t+"="+i)}),n.join("\n"))),h=!1)},A.Xja(s)},A.Avb=function(t,e){return M.Se(t)&&"%"==t[t.length-1]?L.bj(parseFloat(t)*e/100):0|t},A.LSa=function(t){return t?(t=C.Zb({},A.config),C.Zb(t,{$H:A.config.A4a},{pA:!0})):A.config},A.Bvb=function(t){var e=C.Zb({},A.config);return t=i(t),C.Zb(e,t,{pA:!0})},A.Yja=function(t){return t=i(t),C.Zb({},n(186)(t),{pA:!0})},A.KSa=function(t,e,i){return i=!!i&&(0<=i.indexOf("h264hpl")||0<=i.indexOf("vp9")),t={Kw:t?A.config.JOb:A.config.Kw,lA:t?A.config.QOb:i?A.config.POb:A.config.lA,P4:!e},C.Zb({},n(186)(t),{pA:!0})},A.Dvb=i,A.Cvb=e},function(t,e){function i(){}var n;_esm(e),e.Ce=e.cb=e.yf=e.Rb=e.ca=e.Lca=e.iF=e.Da=void 0,(n=e.Da||(e.Da={})).x1a="loadedtracks",n.w1a="loadedmetadata",n.loaded="loaded",n.error="error",n.closed="closed",n.Wp="currenttimechanged",n.Gab="unthrottledcurrenttimechanged",n.Uia="bufferedtimechanged",n.SUa="durationchanged",n.Hbb="videosizechanged",n.l5a="pausedchanged",n.Bta="playingchanged",n.wVa="endedchanged",n.OL="busychanged",n.u3="audiotracklistchanged",n.gm="audiotrackchanged",n.ev="timedtexttracklistchanged",n.Rl="timedtexttrackchanged",n.DZ="trickplayframeschanged",n.x3a="mutedchanged",n.Mbb="volumechanged",n.lwa="showsubtitle",n.Lua="removesubtitle",n.K2b="watermark",n.Opa="isReadyToTransition",n.rN="inactivated",n.T_a="internalPlaybackError",n.XWb="segmentmaploaded",n.YWb="segmentpresenting",n.WQa="autoplaywasallowed",n.x3="autoplaywasblocked",(e.iF||(e.iF={})).CY="playgraphsegmenttransition",(e.Lca=i).z8a="serverTimeChanged",(n=e.ca||(e.ca={})).FL="aseReport",n.zia="autoplayWasAllowed",n.ei="autoplayWasBlocked",n.Jy="bufferUnderrun",n.closed="closed",n.kg="closing",n.Wp="currentTimeChanged",n.GG="downloadComplete",n.rN="inactivated",n.k1a="licenseAdded",n.KN="licensed",n.Xz="locationSelected",n.Yqa="manifestClosing",n.CH="manifestPresenting",n.n8="mediaBufferChanged",n.V8="nextBranchingSegmentChosen",n.Cq="playbackStart",n.Bq="playbackReady",n.wk="repositioned",n.tI="repositioning",n.e8a="safePlayRequested",n.DI="segmentPresenting",n.GY="serverSwitch",n.q9a="shouldUpdateVideoDiagInfo",n.DP="subtitleError",n.fxa="throttledMediaTimeChanged",n.Hab="unthrottledMediaTimeChanged",n.IP="timedTextRebuffer",n.ev="timedTextTrackListChanged",n.DZ="trickPlayFramesChanged",n.Pxa="updateNextBranchingSegmentWeights",n.Z1b="userInitiatedPause",n.ybb="userInitiatedResume",n.lab="tracksHydrated",(n=e.Rb||(e.Rb={}))[n.dK=0]="NOTLOADED",n[n.LOADING=1]="LOADING",n[n.re=2]="NORMAL",n[n.CLOSING=3]="CLOSING",n[n.CLOSED=4]="CLOSED",(n=e.yf||(e.yf={}))[n.re=1]="NORMAL",n[n.xd=2]="BUFFERING",n[n.aKa=3]="STALLED",(n=e.cb||(e.cb={}))[n.Pf=1]="WAITING",n[n.Kc=2]="PLAYING",n[n.hh=3]="PAUSED",n[n.Wq=4]="ENDED",(e=e.Ce||(e.Ce={}))[e.Fx=0]="INITIAL",e[e.CB=1]="SEEK",e[e.UR=2]="TRACK_CHANGED",e[e.lK=3]="SEGMENT_CHANGED",e[e.c0=4]="FORCE_REBUFFER"},function(t,e,i){_esm(e),i(2).__exportStar(i(348),e)},function(t,e,i){(e=i(114)).xzb=0,t.exports={EventEmitter:e,Wh:i(743)}},function(t,e){_esm(e),e.jd="ApplicationSymbol"},function(t,n,e){_esm(n),n.gd=n.rpa=n.Sz=n.Se=n.Vpa=n.KKb=n.yKb=n.Lpa=n.Rz=n.g0a=n.Ba=n.Tpa=n.isArray=n.D0a=n.Jh=n.Xc=n.is=void 0,t=e(195),n.is=t.KE,n.Xc=function(t){return n.is.Gg(t)},n.Jh=function(t){return n.is.CL(t)},n.D0a=function(t){return n.is.xha(t)},n.isArray=function(t){return n.is.By(t)},n.Tpa=function(t){return n.is.fQa(t)},n.Ba=function(t,e,i){return n.is.Ii(t,e,i)},n.g0a=function(t,e,i){return n.is.Yha(t,e,i)},n.Rz=function(t,e,i){return n.is.yT(t,e,i)},n.Lpa=function(t){return n.is.qT(t)},n.yKb=function(t){return n.is.$pb(t)},n.KKb=function(t){return n.is.aqb(t)},n.Vpa=function(t){return n.is.gQa(t)},n.Se=function(t){return n.is.Ip(t)},n.Sz=function(t){return n.is.kn(t)},n.rpa=function(t){return n.is.pT(t)},n.gd=function(t){return n.is.Y2(t)}},function(t,e){_esm(e),e.ga=!1},function(t,i,e){function n(t,e){return i.zo.assert(t,e)}_esm(i),i.ezb=i.Fka=i.Yyb=i.bzb=i.kM=i.tU=i.azb=i.czb=i.lM=i.PTa=i.$yb=i.Zyb=i.hb=i.zo=i.dzb=i.Lcb=void 0,t=e(8),e=e(96),i.Lcb=function(){n(!1)},i.dzb=!0,i.zo=t.ka.get(e.pv),i.hb=n,i.Zyb=function(t,e){return i.zo.Hrb(t,e)},i.$yb=function(t,e){return i.zo.Irb(t,e)},i.PTa=function(t,e){return i.zo.p3(t,e)},i.lM=function(t,e){return i.zo.Orb(t,e)},i.czb=function(t,e){return i.zo.Mrb(t,e)},i.azb=function(t,e){return i.zo.kia(t,e)},i.tU=function(t,e){return i.zo.Krb(t,e)},i.kM=function(t,e){return i.zo.Nrb(t,e)},i.bzb=function(t,e){return i.zo.Lrb(t,e)},i.Yyb=function(t,e){return i.zo.Grb(t,e)},i.Fka=function(t,e){return i.zo.Jrb(t,e)},i.ezb=function(){return i.zo.oKb()}},function(t,e){function n(t,e){var i,n,r,a,o;if(t&&e){for(n=(i=Math).abs,a=Math.abs(t),r=Math.abs(e);r;)r=a%(o=r),a=o;t=n.call(i,t*e/a)}else t=0;return t}function i(t,e){"object"==typeof t?(this.xc=t.vc,this.nb=t.S):(this.xc=t,this.nb=e)}_esm(e),e.T=void 0,i.compare=function(t,e){return t.Al(e)},i.abs=function(t){return new i(Math.abs(t.xc),t.nb)},i.Eb=function(t){return 0===t?i.Gb:new i(t,1e3)},i.vZ=function(t,e){return Math.floor(1e3*t/e)},i.Tra=function(t,e){return Math.floor(t*e/1e3)},i.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.greaterThan(e)?t:e})},i.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.lessThan(e)?t:e})},Object.defineProperties(i.prototype,{vc:{get:function(){return this.xc},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{S:{get:function(){return this.nb},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{Y:{get:function(){return i.vZ(this.xc,this.nb)},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{hI:{get:function(){return 1e3*this.xc/this.nb},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{yI:{get:function(){var t=this.hI;return t<0?Math.ceil(t):Math.floor(t)},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{vh:{get:function(){return this.xc/this.nb},enumerable:!1,configurable:!0}}),i.prototype.Zf=function(t){return t/=this.nb,new i(Math.floor(this.xc*t),Math.floor(this.nb*t))},i.prototype.add=function(t){var e;return this.nb===t.nb?new i(this.xc+t.xc,this.nb):(e=n(this.nb,t.nb),new i(this.xc*e/this.nb+t.xc*e/t.nb,e))},i.prototype.Qa=function(t){var e;return this.nb===t.nb?new i(this.xc-t.xc,this.nb):(e=n(this.nb,t.nb),new i(this.xc*e/this.nb-t.xc*e/t.nb,e))},i.prototype.PH=function(t){return new i(this.xc*t,this.nb)},i.prototype.qm=function(t){var e;return"number"==typeof t?(e=n(this.xc,t))!==this.xc?this.Zf(e/this.xc*this.nb).qm(t):new i(this.xc/t,this.nb):this.nb===t.nb?this.xc/t.xc:(e=n(this.nb,t.nb),this.xc*e/this.nb/(t.xc*e/t.nb))},i.prototype.rUa=function(t){var e;return this.nb===t.nb?new i(Math.abs(this.xc-t.xc),this.nb):(e=n(this.nb,t.nb),new i(Math.abs(this.xc*e/this.nb-t.xc*e/t.nb),e))},i.prototype.xua=function(){return new i(this.nb,this.xc)},i.prototype.compare=function(t,e){var i;return this.nb===e.nb?t(this.xc,e.xc):(i=n(this.nb,e.nb),t(this.xc*i/this.nb,e.xc*i/e.nb))},i.prototype.Al=function(t){var e;return this.nb===t.nb?this.xc-t.xc:(e=n(this.nb,t.nb),this.xc*e/this.nb-t.xc*e/t.nb)},i.prototype.equal=function(t){return this.compare(function(t,e){return t===e},t)},i.prototype.a9=function(t){return this.compare(function(t,e){return t!==e},t)},i.prototype.lessThan=function(t){return this.compare(function(t,e){return t<e},t)},i.prototype.greaterThan=function(t){return this.compare(function(t,e){return e<t},t)},i.prototype.HN=function(t){return this.compare(function(t,e){return t<=e},t)},i.prototype.Or=function(t){return this.compare(function(t,e){return e<=t},t)},i.prototype.isFinite=function(){return!!this.nb&&isFinite(this.xc)},i.prototype.p6=function(t){return n(this.S,t)},i.prototype.toJSON=function(){return{ticks:this.xc,timescale:this.nb}},i.prototype.toString=function(){return this.xc+"/"+this.nb},i.prototype.Zd=function(){return this.xc+"/"+this.nb+" ("+this.Y+"ms)"},i.Gb=new i(0,1e3),i.Ow=new i(1,1e3),i.fD=new i(1/0,1),e.T=i},function(t,e,i){function n(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)}function r(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)}function a(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,r={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function s(t,e,i,n){var r,a=arguments.length,o=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.Fr)o=Reflect.Fr(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(o=(a<3?r(o):3<a?r(e,i,o):r(e,i))||o);return 3<a&&o&&Object.defineProperty(e,i,o),o}function u(i,n){return function(t,e){n(t,e,i)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.Gc)return Reflect.Gc(t,e)}function h(t,o,s,u){return new(s=s||Promise)(function(i,e){function n(t){try{a(u.next(t))}catch(t){e(t)}}function r(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(n,r)}a((u=u.apply(t,o||[])).next())})}function f(i,n){var r,a,o,s,t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,o=e[1],e=[0];continue;case 7:e=r.On.pop(),r.Yn.pop();continue;default:if(!(s=0<(s=r.Yn).length&&s[s.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))r.label=e[1];else if(6===e[0]&&r.label<s[1])r.label=s[1],s=e;else{if(!(s&&r.label<s[2])){s[2]&&r.On.pop(),r.Yn.pop();continue}r.label=s[2],r.On.push(e)}}e=n.call(i,r)}catch(t){e=[6,t],o=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}return r={label:0,bd:function(){if(1&s[0])throw s[1];return s[1]},Yn:[],On:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t}function l(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}function p(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||(e[i]=t[i])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var i,n,r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;t=r.call(t),n=[];try{for(;(void 0===e||0<e--)&&!(i=t.next()).done;)n.push(i.value)}catch(t){var a={error:t}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(a)throw a.error}}return n}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function g(){for(var t,e=0,i=0,n=arguments.length;i<n;i++)e+=arguments[i].length;for(e=Array(e),i=t=0;i<n;i++)for(var r=arguments[i],a=0,o=r.length;a<o;a++,t++)e[t]=r[a];return e}function v(t){return this instanceof v?(this.qE=t,this):new v(t)}function y(t,e,i){var r,a,o;function n(n){r[n]&&(a[n]=function(i){return new Promise(function(t,e){1<o.push([n,i,t,e])||s(n,i)})})}function s(t,e){var i;try{(i=r[t](e)).value instanceof v?Promise.resolve(i.value.qE).then(u,c):h(o[0][2],i)}catch(t){h(o[0][3],t)}}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return r=i.apply(t,e||[]),o=[],a={},n("next"),n("throw"),n("return"),a[Symbol.asyncIterator]=function(){return this},a}function w(n){var t,r;function e(e,i){t[e]=n[e]?function(t){return(r=!r)?{value:v(n[e](t)),done:"return"===e}:i?i(t):t}:i}return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t}function _(o){var t,e;function i(a){e[a]=o[a]&&function(r){return new Promise(function(t,e){var i,n;r=o[a](r),i=t,t=e,n=r.done,e=r.value,Promise.resolve(e).then(function(t){i({value:t,done:n})},t)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");return(t=o[Symbol.asyncIterator])?t.call(o):(o=d(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e)}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function k(t){var e;if(t&&t.__esModule)return t;if(e={},null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function A(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i}i.r(e),i.d(e,"__extends",function(){return a}),i.d(e,"__assign",function(){return n}),i.d(e,"__rest",function(){return o}),i.d(e,"__decorate",function(){return s}),i.d(e,"__param",function(){return u}),i.d(e,"__metadata",function(){return c}),i.d(e,"__awaiter",function(){return h}),i.d(e,"__generator",function(){return f}),i.d(e,"__createBinding",function(){return l}),i.d(e,"__exportStar",function(){return p}),i.d(e,"__values",function(){return d}),i.d(e,"__read",function(){return b}),i.d(e,"__spread",function(){return m}),i.d(e,"__spreadArrays",function(){return g}),i.d(e,"__await",function(){return v}),i.d(e,"__asyncGenerator",function(){return y}),i.d(e,"__asyncDelegator",function(){return w}),i.d(e,"__asyncValues",function(){return _}),i.d(e,"__makeTemplateObject",function(){return E}),i.d(e,"__importStar",function(){return k}),i.d(e,"__importDefault",function(){return S}),i.d(e,"__classPrivateFieldGet",function(){return T}),i.d(e,"__classPrivateFieldSet",function(){return A})},function(t,o,e){var i,s,a,u,n,r,c;function h(t){return i.hb(void 0!==n[t]),n[t]}_esm(o),o.bTa=o.AWa=o.Go=o.Sf=o.wd=o.Bw=o.trim=o.XV=o.j$a=o.iua=o.IRb=o.He=o.BQa=o.ORa=o.Zb=o.te=void 0,i=e(21),s=e(30),a=e(11),u=e(19),o.te=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])},o.Zb=o.Zb||function(i,t,e){var n,r,a;return t&&(e?(n=e.ON,r=e.prefix,a=e.pA,o.te(t,function(t,e){a&&!s.Xc(e)||(i[(r||"")+(n?t.toLowerCase():t)]=e)})):o.te(t,function(t,e){i[t]=e})),i},o.ORa=function(t,e,i,n){var r;return t&&(r=t[e],u.gd(r)&&(i=r.apply(t,a.slice.call(arguments,3)))),i},o.BQa=function(t){for(var e={},i=t.length;i--;)e[t[i]]=!0;return e},o.He=o.He||function(t){return parseInt(t,10)},o.IRb=function(t){return/^true$/i.test(t)},o.iua=function(t,e){return a.bj(t+a.TE()*(e-t))},o.j$a=function(t){return JSON.stringify(t,null,"  ")},o.XV=(n={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"},r=/[&'"<>]/g,function(t){return t.replace(r,h)}),o.trim=(c=/^\s+|\s+$/gm,function(t){return t.replace(c,"")}),o.Bw=function(t){return Array.isArray(t)?t:[t]},o.wd=o.wd||function(t){var e,i,n;if(t)return e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!=(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t},o.Sf=function(t){return u.Ba(t)?t.toFixed(0):""},o.Go=function(t){return u.Ba(t)?(t/1e3).toFixed(0):""},o.AWa=function(t){return u.Ba(t)?t.toFixed():""},o.bTa=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e}},function(t,e,i){var n;function r(i){return i.filter(function(t,e){return i.indexOf(t)===e})}_esm(e),e.Z8=e.YHb=e.bwb=e.flatten=e.e3a=e.nvb=e.m3=e.vt=e.zQa=e.wQa=e.xQa=e.Mp=e.yQa=e.ig=void 0,n=i(2),e.ig=function(t,e){for(var i=0;i<t.length;i++)if(e(t[i],i,t))return t[i]},e.yQa=function(t,e){for(var i=t.length-1;0<=i;--i)if(e(t[i],i,t))return t[i]},e.Mp=function(t,n){var r=-1;return t.some(function(t,e,i){return n(t,r=e,i)})?r:-1},e.xQa=function(t,e){for(var i=t.length-1;0<=i;i--)if(e(t[i],i,t))return i;return-1},e.wQa=r,e.zQa=function(t,e){return-1!==(e=t.indexOf(e))&&(t.splice(e,1),!0)},e.vt=function(t,i,n){return n?t.filter(function(e){return!i.some(function(t){return n(e,t)})}):t.filter(function(t){return-1===i.indexOf(t)})},e.m3=function(t,e){return r(t.concat(e))},e.nvb=function(i){return function(t,e){return i(t)-i(e)}},e.e3a=function(i){return function(t,e){return i(t)<i(e)?t:e}},e.flatten=function(t){var e;return(e=[]).concat.apply(e,n.__spread(t))},e.bwb=function(t,i){return void 0===i&&(i=function(t){return t}),t.reduce(function(t,e){return void 0===t[e=i(e)]?t[e]=1:++t[e],t},{})},e.YHb=function(t,n){return t.reduce(function(t,e){var i=n(e);return void 0===t[i]?t[i]=[e]:t[i].push(e),t},{})},e.Z8=function(t){return null!=t}},function(t,e){var i;_esm(e),e.yx=e.bMa=e.xkb=e.Mj=e.se=e.gj=e.nv=e.Pj=void 0,(i=e.Pj||(e.Pj={}))[i.Audio=0]="Audio",i[i.VLa=1]="Video",(i=e.nv||(e.nv={}))[i.qv=0]="Default",i[i.Lx=1]="Microsoft",(i=e.gj||(e.gj={}))[i.qv=0]="Default",i[i.Oba=1]="Cast",i[i.FJ=2]="Chrome",i[i.Lx=3]="Microsoft",(i=e.se||(e.se={}))[i.RR=0]="SD",i[i.g0=1]="HD",i[i.pK=2]="UHD",i[i.Qs=3]="DV",i[i.Ex=4]="HDR10",i[i.iB=5]="AVCHigh",i[i.Xx=6]="VP9",i[i.Hj=7]="AV1",(i=e.Mj||(e.Mj={}))[i.NE=0]="Level_1_4",i[i.uv=1]="Level_2_2",e.xkb=function(){},(i=e.bMa||(e.bMa={}))[i.q7b=0]="Platform",i[i.e4b=1]="CurrentTitle",e.yx="DeviceCapabilitiesSymbol"},function(t,e){_esm(e),e.bg="IsTypeSymbol"},function(t,e){_esm(e),e.default={E3b:{Ux:0,D7b:1,name:["STARTUP","STEADY"]},h0:{zh:0,C7b:1,tkb:2,name:["STARTING","STABLE","UNSTABLE"]},Ta:{Wb:0,Mb:1,name:["AUDIO","VIDEO"]},ol:{Wb:0,Mb:1,name:["AUDIO","VIDEO"]},yh:{URL:0,lF:1,LOCATION:2,Ox:3,name:["URL","SERVER","LOCATION","NETWORK"]},Nf:{HAVE_NOTHING:0,pB:1,Dx:2,RJ:3,name:["HAVE_NOTHING","HAVE_SOMETHING","HAVE_MINIMUM","HAVE_ENOUGH"]},kF:{l3b:0,h5b:1,h7b:2,q6b:3,Q6b:4,e8b:5,j5b:6,Q5b:7,Ux:8,Mf:9,Ida:10,djb:11,Dba:12,hhb:13,ghb:14,Mjb:15,Ljb:16,name:"maxweightedbw fastselection reuseprevious nextdomain onlychoice tolowgrade fromlowgrade mcqueen startup error probeswitchback probeswitchaway bitrate locswitchback locswitchaway serverswitchback serverswitchaway".split(" ")},K4b:{Ox:0,g4b:1,name:["NETWORK","DECODE"]},A7b:{i4b:"delayedSeamless",t5b:"hideLongTransition"}}},function(t,e){_esm(e),e.cg="UtilitiesSymbol"},function(t,r,e){var a,o,i,n;function s(t){return null!=t}function u(t){return typeof t==r.cLa}function c(i,t,e){var n,r,a;return t&&(e?(n=e.ON,r=e.prefix,a=e.pA,o.te(t,function(t,e){a&&!s(e)||(i[(r||"")+(n?t.toLowerCase():t)]=e)})):o.te(t,function(t,e){i[t]=e})),i}function h(t){return i[t]}_esm(r),r.L=r.wd=r.XV=r.LM=r.yG=r.createElement=r.Bt=r.AQa=r.X3=r.pP=r.Zb=r.op=r.He=r.Sz=r.Se=r.Jh=r.Xc=r.bLa=r.kkb=r.lkb=r.cLa=r.uE=r.Zaa=r.Ms=r.cQ=r.bQ=r.Fk=r.B0=r.SE=r.TE=r.np=r.fo=r.bj=r.lda=r.Kx=r.HJ=r.mib=r.dF=r.pl=r.ql=void 0,a=e(11),o=e(24),r.ql=function(){},r.pl=1e3,r.dF=Object.create,r.mib=Object.keys,r.HJ=Date.now,r.Kx=Math.floor,r.lda=Math.ceil,r.bj=Math.round,r.fo=Math.max,r.np=Math.min,r.TE=Math.random,r.SE=Math.abs,r.B0=Math.pow,r.Fk="$attributes",r.bQ="$children",r.cQ="$name",r.Ms="$text",r.Zaa="$parent",r.uE="$sibling",r.cLa="string",r.lkb="number",r.kkb="function",r.bLa="object",r.Xc=s,r.Jh=function(t){return typeof t==r.bLa},r.Se=u,r.Sz=function(t){return u(t)&&t},r.He=function(t){return parseInt(t,10)},r.op=function(t,e,i){return e<=t?t<=i?t:i:e},r.Zb=c,r.pP=function(t){return c({},t)},r.X3=function(t){for(var e,i=0;i<arguments.length;++i);i=0;for(var n=arguments.length;i<n;)if(s(e=arguments[i++]))return e},r.AQa=function(t,e){for(var i,n,r=!0;r;)for(r=!1,i=t.length;--i;)(n=t[i])[e]<t[i-1][e]&&(t[i]=t[i-1],t[i-1]=n,r=!0)},r.Bt=function(t,e){if(t.length!=e.length)return!1;for(var i=t.length;i--;)if(t[i]!=e[i])return!1;return!0},r.createElement=function(t,e,i,n){var r=a.Be.createElement(t);return e&&(r.style.cssText=e),i&&(r.innerHTML=i),n&&o.te(n,function(t,e){r.setAttribute(t,e)}),r},r.yG=function(t){var i="";return o.te(t,function(t,e){i+=(i?";":"")+t+":"+e}),i},r.LM=function(t,e,i){var n;return t=i<t/e?(n=r.bj(e*i),e):(n=t,r.bj(t/i)),{width:n,height:t}},r.XV=(i={"&":"&amp;","'":"&#39;",'"':"&quot;","<":"&lt;",">":"&gt;"},n=/[&'"<>]/g,function(t){return t.replace(n,h)}),r.wd=function(t){var e,i;if(t)return e=t.stack,i=t.number,t=""+t,e?0!=(e=""+e).indexOf(t)&&(e=t+"\n"+e):e=t,i&&(e+="\nnumber:"+i),e},r.L={Vl:1001,Lj:1003,Efb:1701,zCa:1713,Ffb:1715,Dfb:1721,d0:1723}},function(t,e){_esm(e),e.fh="AsyncComponentLoaderSymbol"},function(t,e,i){var n;function r(t,e,i,n,r){this.la=t,this.type=e,this.byteOffset=i,this.byteLength=n,this.parent=r,this.Ua={},this.Qn=n}_esm(e),n=i(145),e.ga=!1,r.xn=function(t,e){var i,n;function r(t){t&&t.xn&&((t=t.xn(e)).length&&(i=i.concat(t)))}if(i=[],t.type===e&&i.push(t),t.Ua)for(var a in t.Ua)n=t.Ua[a],Array.isArray(n)&&n.forEach(r);return i},r.tt=function(t,e){void 0===t.Ua[e.type]&&(t.Ua[e.type]=[]),t.Ua[e.type].push(e)},r.Cl=function(t,e){return r.xn(t,e)[0]},Object.defineProperties(r.prototype,{startOffset:{get:function(){return this.byteOffset},enumerable:!0,configurable:!0}}),Object.defineProperties(r.prototype,{length:{get:function(){return this.byteLength},enumerable:!0,configurable:!0}}),Object.defineProperties(r.prototype,{u:{get:function(){return this.la},enumerable:!0,configurable:!0}}),r.prototype.Ac=function(){var t=this.la.ya();this.version=t>>24,this.flags=16777215&t},r.prototype.tt=function(t){r.tt(this,t)},r.prototype.xn=function(t){return r.xn(this,t)},r.prototype.Cl=function(t){return r.Cl(this,t)},r.prototype.parse=function(){return!0},r.prototype.Qt=function(){return!0},r.prototype.Rh=function(t){if((t=this.Ua[t])&&Array.isArray(t)&&1===t.length)return t[0]},r.prototype.Ie=function(t,e){e=void 0===e?this.la.offset:e,n.assert(e>=this.startOffset+8&&e+t<=this.startOffset+this.Qn,"Removal range [0x"+e.toString(16)+"-0x"+(e+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.Qn).toString(16)+")"),this.la.Ie(t,e,this)},r.prototype.Ru=function(t,e,i){i=void 0===i?this.la.offset:i,n.assert(i>=this.startOffset+8&&i+t<=this.startOffset+this.Qn,"Removal range [0x"+i.toString(16)+"-0x"+(i+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.Qn).toString(16)+")"),this.la.Ru(t,e,i,this)},r.prototype.dY=function(t,e,i){if(1<i){for(var n=[];0<i--;)n.push(this.bT(t,e));return n}return this.bT(t,e)},r.prototype.Wi=function(t){var n,r=this;return void 0===n&&(n={}),t.forEach(function(t){var e,i;if("offset"===t.type){if(0<(e=t.offset)%8)throw Error("Requested offset "+t.offset+"is not an even byte multiple");r.la.offset+=e/8}else for(e in t)i=t[e],n[e]="string"==typeof i?r.dY(i):r.dY(i.type,i.length,i.gia)}),n},r.prototype.bT=function(t,e){var i=this.byteLength-this.la.offset+this.startOffset;switch(void 0===e&&(e=i),t){case"int8":t=this.la.mb();break;case"int64":t=this.la.Td();break;case"int32":t=this.la.ya();break;case"int16":t=this.la.Yc();break;case"string":t=this.la.mua(Math.min(e,i));break;default:throw Error("Invalid type: "+t)}return t},r.Na=!1,e.Dc=r},function(t,e,i){var n;function r(t,e,i,n,r){this.la=t,this.type=e,this.byteOffset=i,this.byteLength=n,this.parent=r,this.Ua={},this.Qn=n}_esm(e),n=i(150),e.ga=!1,r.xn=function(t,e){var i,n;function r(t){t&&t.xn&&((t=t.xn(e)).length&&(i=i.concat(t)))}if(i=[],t.type===e&&i.push(t),t.Ua)for(var a in t.Ua)n=t.Ua[a],Array.isArray(n)&&n.forEach(r);return i},r.tt=function(t,e){void 0===t.Ua[e.type]&&(t.Ua[e.type]=[]),t.Ua[e.type].push(e)},r.Cl=function(t,e){return r.xn(t,e)[0]},Object.defineProperties(r.prototype,{startOffset:{get:function(){return this.byteOffset},enumerable:!0,configurable:!0}}),Object.defineProperties(r.prototype,{length:{get:function(){return this.byteLength},enumerable:!0,configurable:!0}}),Object.defineProperties(r.prototype,{u:{get:function(){return this.la},enumerable:!0,configurable:!0}}),r.prototype.Ac=function(){var t=this.la.ya();this.version=t>>24,this.flags=16777215&t},r.prototype.tt=function(t){r.tt(this,t)},r.prototype.xn=function(t){return r.xn(this,t)},r.prototype.Cl=function(t){return r.Cl(this,t)},r.prototype.parse=function(){return!0},r.prototype.Qt=function(){return!0},r.prototype.Rh=function(t){if((t=this.Ua[t])&&Array.isArray(t)&&1===t.length)return t[0]},r.prototype.Ie=function(t,e){e=void 0===e?this.la.offset:e,n.assert(e>=this.startOffset+8&&e+t<=this.startOffset+this.Qn,"Removal range [0x"+e.toString(16)+"-0x"+(e+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.Qn).toString(16)+")"),this.la.Ie(t,e,this)},r.prototype.Ru=function(t,e,i){i=void 0===i?this.la.offset:i,n.assert(i>=this.startOffset+8&&i+t<=this.startOffset+this.Qn,"Removal range [0x"+i.toString(16)+"-0x"+(i+t).toString(16)+") must be in box [0x"+this.startOffset.toString(16)+"-0x"+(this.startOffset+this.Qn).toString(16)+")"),this.la.Ru(t,e,i,this)},r.prototype.dY=function(t,e,i){if(1<i){for(var n=[];0<i--;)n.push(this.bT(t,e));return n}return this.bT(t,e)},r.prototype.Wi=function(t){var n,r=this;return void 0===n&&(n={}),t.forEach(function(t){var e,i;if("offset"===t.type){if(0<(e=t.offset)%8)throw Error("Requested offset "+t.offset+"is not an even byte multiple");r.la.offset+=e/8}else for(e in t)i=t[e],n[e]="string"==typeof i?r.dY(i):r.dY(i.type,i.length,i.gia)}),n},r.prototype.bT=function(t,e){var i=this.byteLength-this.la.offset+this.startOffset;switch(void 0===e&&(e=i),t){case"int8":t=this.la.mb();break;case"int64":t=this.la.Td();break;case"int32":t=this.la.ya();break;case"int16":t=this.la.Yc();break;case"string":t=this.la.mua(Math.min(e,i));break;default:throw Error("Invalid type: "+t)}return t},r.Na=!1,e.Dc=r},function(t,e){_esm(e),e.Hk="PlatformSymbol",e.yB="PlatformMutableSymbol"},function(t,e,i){var u,n;function r(t,e){return t&&t.lu&&(e||!1!==t.St)}function c(t,e,i){return!u.Ba(t)||t<e?e:i<t?i:t}u=i(10),n=new(i(6).default.Console)("ASEJS_STREAM_SELECTOR","media|asejs"),t.exports={console:n,debug:!1,assert:function(t,e){if(!t)throw t=e?" : "+e:"",n.error("Assertion failed"+t),Error("ASEJS_STREAM_SELECTOR assertion failed"+t)},tH:r,mma:function(i,t,n){var e,r,a,o;function s(t){var e=i[t];return e.lu&&(!n||n(e,t))&&(o=t,1)}for(r=0,a=e=i.length,u.isArray(t)&&(r=c(t[0],0,e),a=c(t[1],0,e),t=t[2]),e=(t=c(t,r-1,a))-1;r<=e;--e)if(s(e))return o;for(e=t+1;e<a;++e)if(s(e))return o;return-1},fPb:function(t,e){return Math.floor(t/(125*e)*1e3)},ptb:function(t,e){return Math.ceil(t/1e3*e*125)},aac:function(t,e){return!t.slice(e+1).some(r)},up:function t(e){if(!(this instanceof t))return new t(e);this.Je=u.Ba(e)?e:void 0},ig:function(t,n){var r;return t.some(function(t,e,i){return n(r=t,e,i)})?r:void 0},Mp:function(t,n){var r;return t.some(function(t,e,i){return n(t,r=e,i)})?r:-1},T3:c}},function(t,e){_esm(e),e.Ci="Base64EncoderSymbol"},function(t,e){_esm(e),e.Qba="ConfigurableInputsSymbol",e.Wl="ValidatingConfigurableInputsSymbol",e.F_="ConfigNameSymbol",e.iR="InitParamsSymbol"},function(t,e){_esm(e),e.Uh="ClockSymbol"},function(t,e){_esm(e),e.iMa="WindowTimersSymbol",e.LE="JSONSymbol",e.NLa="UserAgentSymbol",e.eK="NavigatorSymbol",e.Lhb="MediaSourceSymbol",e.UEa="LocationSymbol",e.ZAa="DateSymbol",e.Rda="PerformanceSymbol",e.KR="PlatformExtraInfoSymbol"},function(t,e){var i;_esm(e),e.Tm=e.wv=e.Cx=void 0,(i=e.Cx||(e.Cx={}))[i.fLa=0]="Test",i[i.pEa=1]="Int",i[i.akb=2]="Staging",i[i.tjb=3]="Prod",(i=e.wv||(e.wv={}))[i.MR=0]="PreferMsl",i[i.kJa=1]="PreferNoMsl",i[i.gib=2]="NoMsl",e.Tm="GeneralConfigSymbol"},function(t,e,i){var l;function n(t,e,i,n,r,a,o,s,u,c,h,f){this.code=void 0===t?l.M.Vl:t,this.Cc=e,this.Kd=i,this.un=n,this.mA=r,this.message=a,this.details=o,this.data=s,this.hk=u,this.DSb=c,this.alert=h,this.Uha=f,this.$=!1}_esm(e),e.qd=void 0,l=i(3),n.wd=function(t){var e,i,n;return t?(e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!==(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t):""},n.prototype.AU=function(t){this.details=n.wd(t),this.data=t},n.prototype.toString=function(){return JSON.stringify(this.toJSON)},n.prototype.toJSON=function(){return{code:this.code,subCode:this.Cc,extCode:this.Kd,edgeCode:this.un,mslCode:this.mA,message:this.message,details:this.details,data:this.data,errorDisplayMessage:this.hk,playbackServiceError:this.DSb}},n.Hma=function(t,e){return new n(t,l.L.Lj,void 0,void 0,void 0,void 0,e.message,e.stack)},n.Wbb=function(t,e){return new n(t,e,void 0,void 0,void 0,void 0,void 0,void 0)},n.T2b=function(t,e,i){return new n(t,e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,i)},e.qd=n},function(t,e,i){var s,r,a;function o(e,i,n,r,a){var o;Object.getOwnPropertyNames(e).filter(function(t){return a(t)&&(n||!Object.prototype.hasOwnProperty.call(i,t))&&(r||!(t in i))}).forEach(function(t){void 0!==(o=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,o)})}function u(t,e,i,n){var r,a=[];i||(a=Object.getOwnPropertyNames(e)),n||(a=function(t){var e,i,n,r=Object.getOwnPropertyNames(t);for(t=Object.getPrototypeOf(t);t!==Object.prototype;){try{for(var a=(e=void 0,s.__values(Object.getOwnPropertyNames(t))),o=a.next();!o.done;o=a.next())n=o.value,-1===r.indexOf(n)&&r.push(n)}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}t=Object.getPrototypeOf(t)}return r}(e)),null!==(r=Object.getPrototypeOf(t))&&r!==Object.prototype&&u(r,e,i,n),o(t,e,!0,!0,function(t){return"constructor"!==t&&-1===a.indexOf(t)})}_esm(e),e.xf=e.$vb=void 0,s=i(2),r=i(5),e.$vb=u,a=Object.getOwnPropertyNames(Function),e.xf=function(t,e,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),n||r.assert(!i),t.prototype?(u(t.prototype,e.prototype,i,n),o(t,e,i,n,function(t){return-1===a.indexOf(t)})):o(t,e.prototype,i,n,function(t){return-1===a.indexOf(t)}),e}},function(t,e){_esm(e),e.vB="named",e.E0="name",e.ZR="unmanaged",e.RGa="optional",e.hR="inject",e.QE="multi_inject",e.YKa="inversify:tagged",e.ZKa="inversify:tagged_props",e.Bda="inversify:paramtypes",e.yeb="design:paramtypes",e.HR="post_construct"},function(t,e){function i(){}function n(){}function r(){}_esm(e),e.Zm=e.ze=e.N=void 0,(e.N=r).QJ="playready-h264mpl30-dash",r.FE="playready-h264mpl31-dash",r.tca="playready-h264mpl40-dash",r.TCa="playready-h264hpl22-dash",r.LQ="playready-h264hpl30-dash",r.MQ="playready-h264hpl31-dash",r.sca="playready-h264hpl40-dash",r.s1="vp9-profile0-L21-dash-cenc",r.qK="vp9-profile0-L30-dash-cenc",r.rK="vp9-profile0-L31-dash-cenc",r.bS="vp9-profile0-L40-dash-cenc",r.Rfb="hevc-main10-L30-dash-cenc",r.Sfb="hevc-main10-L31-dash-cenc",r.Tfb="hevc-main10-L40-dash-cenc",r.Ufb="hevc-main10-L41-dash-cenc",r.ZQ="hevc-main10-L50-dash-cenc",r.aR="hevc-main10-L51-dash-cenc",r.i0="hevc-main10-L30-dash-cenc-prk",r.k0="hevc-main10-L31-dash-cenc-prk",r.m0="hevc-main10-L40-dash-cenc-prk",r.o0="hevc-main10-L41-dash-cenc-prk",r.j0="hevc-main10-L30-dash-cenc-prk-do",r.l0="hevc-main10-L31-dash-cenc-prk-do",r.n0="hevc-main10-L40-dash-cenc-prk-do",r.p0="hevc-main10-L41-dash-cenc-prk-do",r.$Q="hevc-main10-L50-dash-cenc-prk-do",r.bR="hevc-main10-L51-dash-cenc-prk-do",r.J_="hevc-dv5-main10-L30-dash-cenc-prk",r.L_="hevc-dv5-main10-L31-dash-cenc-prk",r.AQ="hevc-dv5-main10-L40-dash-cenc-prk",r.O_="hevc-dv5-main10-L41-dash-cenc-prk",r.Q_="hevc-dv5-main10-L50-dash-cenc-prk",r.S_="hevc-dv5-main10-L51-dash-cenc-prk",r.K_="hevc-dv5-main10-L30-dash-cenc-prk-do",r.M_="hevc-dv5-main10-L31-dash-cenc-prk-do",r.N_="hevc-dv5-main10-L40-dash-cenc-prk-do",r.P_="hevc-dv5-main10-L41-dash-cenc-prk-do",r.R_="hevc-dv5-main10-L50-dash-cenc-prk-do",r.T_="hevc-dv5-main10-L51-dash-cenc-prk-do",r.VCa="hevc-hdr-main10-L30-dash-cenc",r.WCa="hevc-hdr-main10-L31-dash-cenc",r.XCa="hevc-hdr-main10-L40-dash-cenc",r.YCa="hevc-hdr-main10-L41-dash-cenc",r.ZCa="hevc-hdr-main10-L50-dash-cenc",r.$Ca="hevc-hdr-main10-L51-dash-cenc",r.OQ="hevc-hdr-main10-L30-dash-cenc-prk",r.QQ="hevc-hdr-main10-L31-dash-cenc-prk",r.SJ="hevc-hdr-main10-L40-dash-cenc-prk",r.TQ="hevc-hdr-main10-L41-dash-cenc-prk",r.VQ="hevc-hdr-main10-L50-dash-cenc-prk",r.XQ="hevc-hdr-main10-L51-dash-cenc-prk",r.PQ="hevc-hdr-main10-L30-dash-cenc-prk-do",r.RQ="hevc-hdr-main10-L31-dash-cenc-prk-do",r.SQ="hevc-hdr-main10-L40-dash-cenc-prk-do",r.UQ="hevc-hdr-main10-L41-dash-cenc-prk-do",r.WQ="hevc-hdr-main10-L50-dash-cenc-prk-do",r.YQ="hevc-hdr-main10-L51-dash-cenc-prk-do",r.Aya="av1-main-L20-dash-cbcs-prk",r.Bya="av1-main-L21-dash-cbcs-prk",r.l_="av1-main-L30-dash-cbcs-prk",r.m_="av1-main-L31-dash-cbcs-prk",r.n_="av1-main-L40-dash-cbcs-prk",r.o_="av1-main-L41-dash-cbcs-prk",r.p_="av1-main-L50-dash-cbcs-prk",r.q_="av1-main-L51-dash-cbcs-prk",r.Hjb=[r.QJ],r.Ofb=[r.FE,r.tca],r.Tea=[r.i0,r.k0,r.m0,r.o0,r.ZQ,r.aR],r.Uea=[r.j0,r.l0,r.n0,r.p0,r.$Q,r.bR],r.vca=[r.OQ,r.QQ,r.SJ,r.TQ,r.VQ,r.XQ],r.uca=[r.PQ,r.RQ,r.SQ,r.UQ,r.WQ,r.YQ],r.YAa=[r.J_,r.AQ,r.Q_,r.L_,r.O_,r.S_],r.XAa=[r.K_,r.N_,r.R_,r.M_,r.P_,r.T_],r.pba=[r.LQ,r.MQ,r.sca],r.SLa=[r.qK,r.rK,r.bS],r.Xx=[r.s1,r.qK,r.rK,r.bS],r.Hj=[r.l_,r.m_,r.n_,r.o_,r.p_,r.q_],r.rca=r.Hjb.concat(r.Ofb),(e.ze=n).GE="heaac-2-dash",n.aDa="heaac-5.1-dash",n.HE="heaac-2hq-dash",n.tF="xheaac-dash",n.xQ="ddplus-2.0-dash",n.Rba="ddplus-5.1-dash",n.yQ="ddplus-atmos-dash",(e.Zm=i).Ojb="simplesdh",i.Uba="dfxp-ls-sdh",i.u1="webvtt-lssdh-ios8",i.cK="nflx-cmisc"},function(t,i,e){var n,r,u;function a(i){return function(t,e){return t.sua(e,i)}}function c(t,e){switch(typeof(t=t.Iz.data[e])){case"undefined":break;case"string":case"number":case"boolean":return t.toString();default:return JSON.stringify(t)}}_esm(i),i.Cy=i.Bua=i.object=i.gCb=i.url=i.fa=i.$k=i.Exa=i.nKb=i.cZ=i.string=i.ZA=i.dd=i.hD=i.config=void 0,n=e(52),r=e(4),u=e(139),i.config=function(a,o,s){return s=void 0!==s&&s,function(t,e,i){var n=void 0!==o?o:e,r=i.get;return void 0!==r&&(i.get=function(){var t;if(!this.bLb(e))return this.bHb(e);t:{if(void 0!==(t=(this.krb||s?function(t,e){return t.X9.nUb[e]||c(t,e)}:c)(this,n.toString()))){if(!((t=a(this.jX,t))instanceof u.pp))break t;this.DWa(n,t)}t=r.bind(this)()}return this.Q7a(e,t),t}),i}},i.hD=function(t,e){return t.G6a(e)},i.dd=function(t,e){return t.lua(e)},i.ZA=function(t,e){return t.Gq(e)},i.string=function(t,e){return t.sua(e)},i.cZ=function(t,e){return t.Mh(e,i.string)},i.nKb=function(t,e){return t.Mh(e,i.hD)},i.Exa=function(t,e){return t.Mh(e,i.ZA)},i.$k=function(t,e){return(t=t.Gq(e))instanceof u.pp?t:r.Nc(t)},i.fa=function(t,e){return(t=t.Gq(e))instanceof u.pp?t:n.fa(t)},i.url=a(/^\S+$/),i.gCb=function(i){return function(t,e){return t.F6a(e,i)}},i.object=function(){return function(t,e){return t.H6a(e)}},i.Bua=a,i.Cy=function(i,n){return function(t,e){return t.Mh(e,i,n)}}},function(t,i,e){var n,r,a,o;function s(t,e){var i=o.call(this,t,e)||this;return i.NSa=e,i.debug=t.debug,i.ta=t.Wf.ib(i.NSa),i}function u(t,e){this.NSa=e,this.$ta={},this.Iz=t.Iz,this.jX=t.jX,this.X9=t.X9}_esm(i),i.Ze=i.nQ=i.$Ka=void 0,t=e(1),n=e(606),r=e(0),a=e(139),i.$Ka="isTestAccount",u.prototype.DWa=function(){},u.prototype.Q7a=function(t,e){this.$ta[t]=[e,this.Iz.q$]},u.prototype.bLb=function(t){return n.Ada.of(this.$ta[t]).map(function(t){return t[1]}).or(-1)<this.Iz.q$},u.prototype.bHb=function(t){return n.Ada.of(this.$ta[t]).map(function(t){return t[0]}).or(function(){throw Error("Invalid State Error")})},it.Object.defineProperties(u.prototype,{krb:{configurable:!0,enumerable:!0,get:function(){var t,e=!!(this&&this.Iz&&this.Iz.data)&&(void 0!==(e=this.Iz.data[i.$Ka])&&(t=e.toString()),!((e=this.jX.lua(t))instanceof a.pp)&&e);return e}}}),o=u,o=t.__decorate([r.R(),t.__param(0,r.nl()),t.__param(1,r.nl())],o),T(s,i.nQ=o),s.prototype.DWa=function(t,e){this.ta.error("Invalid configuration value.",{name:t},e),this.debug.assert(!1)},e=s,e=t.__decorate([t.__param(0,r.nl()),t.__param(1,r.nl())],e),i.Ze=e},function(t,i,n){var r,e,a,o,s,u;_esm(i),i.ePb=i.platform=i.oj=i.Tb=i.cGb=i.EV=i.bH=i.V1a=i.pF=i.de=i.Jj=i.rF=void 0,(r=n(2)).__exportStar(n(168),i),r.__exportStar(n(348),i),r.__exportStar(n(715),i),r.__exportStar(n(716),i),r.__exportStar(n(717),i),e=n(99),Object.defineProperties(i,{rF:{enumerable:!0,get:function(){return e.rF}}}),r.__exportStar(n(728),i),r.__exportStar(n(352),i),r.__exportStar(n(215),i),r.__exportStar(n(22),i),a=n(353),Object.defineProperties(i,{Jj:{enumerable:!0,get:function(){return a.Jj}}}),o=n(54),Object.defineProperties(i,{de:{enumerable:!0,get:function(){return o.de}}}),s=n(217),Object.defineProperties(i,{pF:{enumerable:!0,get:function(){return s.pF}}}),r.__exportStar(n(356),i),i.V1a=function(t){return i.platform.bW(t),n(742).BFa},i.bH=function(t){return i.platform.bW(t),Promise.resolve().then(function(){return r.__importStar(n(251))}).then(function(t){return t.bH()})},i.EV=function(t,e){return i.platform.bW(t),Promise.resolve().then(function(){return r.__importStar(n(415))}).then(function(t){return t.EV(e)})},i.cGb=function(){return n(220)},t=r.__importDefault(n(28)),i.Tb=t.default,t=n(960),i.oj=t.oj,t=r.__importDefault(n(6)),i.platform=t.default,u=n(961),i.ePb=function(){return{dr:u.dr}}},function(t,e){_esm(e),e.Qj="SchedulerSymbol"},function(t,e){_esm(e),e.Vca="LogBatcherConfigSymbol",e.Um="LogBatcherSymbol",e.XEa="LogBatcherProviderSymbol"},function(t,i,e){var n,r,a,o,c,s,h,u;function f(){var t,e;return(t=i.l6.BOa)?t:(0<=(e=(t=s.H0.search.substr(1)).indexOf("#"))&&(t=t.substr(0,e)),t=l(t),i.l6.BOa=t)}function l(t){for(var e,i=/[+]/g,n=(t||"").split("&"),r={},a=0;a<n.length;a++)0<=(e=(t=o.trim(n[a])).indexOf("="))?r[decodeURIComponent(t.substr(0,e).replace(i,"%20")).toLowerCase()]=decodeURIComponent(t.substr(e+1).replace(i,"%20")):r[t.toLowerCase()]=null;return r}function p(t){return(t=/function (.{1,})\(/.exec(t.toString()))&&1<t.length?t[1]:""}function d(t){return p(t.constructor)}function b(t){return s.sort.call(t,function(t,e){return t-e})}function m(t){for(var e=0,i=t.length;i--;)e+=t[i];return e}_esm(i),i.YSb=i.dH=i.LXa=i.z7=i.VSb=i.q0a=i.pdb=i.qdb=i.yDb=i.At=i.xvb=i.LM=i.UCb=i.ZH=i.Ecb=i.iQ=i.Fcb=i.r_=i.Dcb=i.jKb=i.yG=i.ATb=i.tsa=i.$ma=i.getFunctionName=i.kO=i.zX=i.l6=i.UGb=i.D6a=i.OPa=i.SSa=i.uUb=i.Bt=i.ASa=void 0,n=e(12),r=e(21),a=e(8),o=e(24),c=e(30),s=e(11),h=e(19),u=e(63),i.ASa=function(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var i in t)if(t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||t[i]!==e[i]))return!1;return!0},i.Bt=i.Bt||function(t,e){if(t.length!=e.length)return!1;for(var i=t.length;i--;)if(t[i]!=e[i])return!1;return!0},i.uUb=function(t){var e;if(t&&(e=t.length))return t[o.iua(0,e-1)]},i.SSa=function(t,e){if(t.length!=e.length)return!1;t.sort(),e.sort();for(var i=t.length;i--;)if(t[i]!==e[i])return!1;return!0},i.OPa=function(e,i,n){e.addEventListener(i,function t(){e.removeEventListener(i,t),n.apply(this,arguments)})},i.D6a=function(){for(var t,e,i=s.Be.cookie.split("; "),n=i.length,r={},a=0;a<n;a++)(t=o.trim(i[a]))&&0<(e=t.indexOf("="))&&(r[t.substr(0,e)]=t.substr(e+1));return r},i.UGb=f,i.l6=Object.assign(f,{BOa:void 0}),i.zX=l,i.kO=function(t){var i="";return o.te(t,function(t,e){i&&(i+="&"),r.hb(c.Se(e)||h.Ba(e)||h.rpa(e)),i+=encodeURIComponent(t)+"="+encodeURIComponent(e)}),i},i.getFunctionName=p,i.$ma=d,i.tsa=function(t){var i="";return h.isArray(t)||h.Tpa(t)?i=s.reduce.call(t,function(t,e){return t+(32<=e&&e<128?s.UKa(e):".")},""):c.Se(t)?i=t:o.te(t,function(t,e){i+=(i?", ":"")+"{"+t+": "+(h.gd(e)?p(e)||"function":e)+"}"}),"["+d(t)+" "+i+"]"},i.ATb=function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},i.yG=i.yG||function(t){var i="";return o.te(t,function(t,e){i+=(i?";":"")+t+":"+e}),i},i.jKb=function(t,e){var i=t[0];if(e<=i[0])return i.slice(1);for(var n,r=1;n=t[r++];){if(e<=n[0]){for(t=(e-i[0])/(n[0]-i[0]),e=[],r=1;r<i.length;r++)e.push((i[r]||0)+t*((n[r]||0)-(i[r]||0)));return e}i=n}return i.slice(1)},i.Dcb=function(t,e){for(var i,n={},r=0;r<e.length;r++){if("string"!=typeof(i=e[r])&&"number"!=typeof i)return!1;n[e[r]]=1}for(r=0;r<t.length;r++)if(!n[i=t[r]])return!1;return!0},i.r_=b,i.Fcb=m,i.iQ=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(i=t[r])&&i<=i);)i=void 0;for(;++r<a;)null!=(n=t[r])&&i<n&&(i=n)}else{for(;++r<a&&!(null!=(i=e.call(t,t[r],r))&&i<=i);)i=void 0;for(;++r<a;)null!=(n=e.call(t,t[r],r))&&i<n&&(i=n)}return i},i.Ecb=function(t,e){var i,n,r=-1,a=t.length;if(1===arguments.length){for(;++r<a&&!(null!=(i=t[r])&&i<=i);)i=void 0;for(;++r<a;)null!=(n=t[r])&&n<i&&(i=n)}else{for(;++r<a&&!(null!=(i=e.call(t,t[r],r))&&i<=i);)i=void 0;for(;++r<a;)null!=(n=e.call(t,t[r],r))&&n<i&&(i=n)}return i},i.ZH=function(i){return h.gd(i.then)?i:new Promise(function(t,e){i.oncomplete=function(){t(i.result)},i.onerror=function(){e(i.error)}})},i.UCb=function(t,e){var i,n,r,a,o,s;function u(t){i.indexOf(t)<0&&h.Ba(t)&&i.push(t)}if(b(t=t.slice()),i=[],!e||!e.length)return t;if(!t.length)return[];n=e.length;try{for(;n--;)switch(a=""+e[n],o=c.He(a),a[a.length-1]){case"-":for(r=t.length;r--;)if((s=t[r])<o){u(s);break}break;case"+":for(r=0;r<t.length;r++)if(o<(s=t[r])){u(s);break}break;default:0<=t.indexOf(o)&&u(o)}}catch(t){}return i.length||i.push(t[0]),b(i),i},i.LM=i.LM||function(t,e,i){var n;return t=i<t/e?(n=s.bj(e*i),e):(n=t,s.bj(t/i)),{width:n,height:t}},i.xvb=function(t,e,i){for(var n=[],r=0;r<e;r++)n.push(s.B0(t[r]-i,2));return s.OFa(m(n)/n.length)},i.At=function(t,e){var i=t.length;return 1===(e=(i-1)*e+1)?t[0]:e==i?t[i-1]:t[(i=s.Kx(e))-1]+(e-i)*(t[i]-t[i-1])},i.yDb=function(t,e){if(!h.isArray(t))throw Error("boxes is not an array");if(t.length<=0)throw Error("There are no boxes in boxes");e=h.isArray(e)?e:[e];for(var i=t.length,n=0;n<i;n++)for(var r=0;r<e.length;r++)if(t[n].type==e[r])return t[n];throw Error("Box not found "+e)},i.qdb=function(t){return t.eFb("trak/mdia/minf/stbl/stsd/"+n.Aza+"|"+n.Bza).children.filter(function(t){return"sinf"==t.type&&t.h$b.schm.acc==u.wx})[0].eFb("schi/tenc").pj},i.pdb=function(t){var n;function e(t,e){var i=n[t];n[t]=n[e],n[e]=i}return n=new Uint8Array(t),e(0,3),e(1,2),e(4,5),e(6,7),n},i.q0a=function(){return h.gd(s.kf.requestMediaKeySystemAccess)},i.VSb=function(e){return function(t){return t&&t[e]}},h.gd(ArrayBuffer.prototype.slice)||(ArrayBuffer.prototype.slice=function(t,e){var i,n;return void 0===t&&(t=0),void 0===e&&(e=this.byteLength),t=Math.floor(t),e=Math.floor(e),t<0&&(t+=this.byteLength),e<0&&(e+=this.byteLength),t=Math.min(Math.max(0,t),this.byteLength),(e=Math.min(Math.max(0,e),this.byteLength))-t<=0?new ArrayBuffer(0):(i=new ArrayBuffer(e-t),n=new Uint8Array(i),t=new Uint8Array(this,t,e-t),n.set(t),i)}),i.z7=function(t){return t&&0==t.toLowerCase().indexOf("https")},i.LXa=function(){var t=new ArrayBuffer(4),e=new Uint8Array(t);return t=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041==t[0]?"LE":2712847316==t[0]?"BE":"undefined"},i.dH=function(){var e,t;try{if(e=/playercore.*js/,(t=s.xv.getEntries("resource").filter(function(t){return null!==e.exec(t.name)}))&&0<t.length)return t=s.bj(t[0].duration),JSON.stringify(t)}catch(t){}},i.YSb=function(t,n,r){if(t&&t.length)if(r&&r.Jub)try{t.forEach(function(t,e){var i=(e=r.Jub[e])&&e.media;i&&c.Se(i)?(i=a.Ar(i).buffer,t.media={arrayBuffer:i,length:i.byteLength,stream:n,qc:e.cdn}):a.log.warn("chunk not in cache",t.Ri)})}catch(t){a.log.error("error reading cached chunks",t)}else a.log.warn("chunks not available in cached stream",r.type);else a.log.warn("chunks not available in mediabuffer",r.type)}},function(t,e,i){var n,r,a,o,s;function u(){return n.cc.get(a.jd).Vz.da(s.ja)}_esm(e),e.evb=e.W3=e.pSa=e.cvb=e.dvb=e.V3=e.lj=void 0,n=i(196),r=i(38),a=i(18),o=i(81),s=i(4),e.lj=function(){return n.cc.get(a.jd).Yb().da(s.ja)},e.V3=function(){return n.cc.get(r.Uh).ff.da(s.io)},e.dvb=function(){return n.cc.get(a.jd).Vz.da(s.io)},e.cvb=function(){return n.cc.get(o.Gx).Wy()},e.pSa=u,e.W3=function(){return n.cc.get(r.Uh).ff.da(s.ja)},e.evb=u},function(t,e,i){var n;function r(){return n.$R.apply(this,arguments)||this}function a(t){return new n.Us(t,e.yE)}_esm(e),e.Gb=e.lGa=e.Qca=e.ov=e.yE=e.pOb=e.MLb=e.fa=e.Hy=e.Cdb=void 0,T(r,(n=i(314)).$R),e.Cdb=r,e.Hy=a,e.fa=function(t){return new n.Us(t,e.ov)},e.MLb=function(t){return new n.Us(t,e.Qca)},e.pOb=function(t){return new n.Us(t,e.lGa)},e.yE=new r(1,"b"),e.ov=new r(8*e.yE.wg,"B",e.yE),e.Qca=new r(1024*e.ov.wg,"KB",e.yE),e.lGa=new r(1024*e.Qca.wg,"MB",e.yE),e.Gb=a(0)},function(t,e){_esm(e),e.Wm="PboCommandContextSymbol"},function(t,e,i){var c,h;function n(t){this.config=t,this.OO=[]}_esm(e),e.wea=e.de=void 0,c=i(2),h=i(735),(i=e.de||(e.de={}))[i.ap=0]="startPlayback",i[i.$p=1]="endPlayback",i[i.Zn=2]="underflow",n.prototype.Ji=function(e){var t=c.__read(this.config.E4.filter(function(t){return t.mj===e.mj}),1)[0];(null!==(t=null==t?void 0:t.enabled)&&void 0!==t?t:e.enabled)?this.OO.push(e):e.Nb&&e.Nb()},n.prototype.Ho=function(t){var e,i,n,r={},a=[];try{for(var o=c.__values(this.OO),s=o.next();!s.done;s=o.next()){i=s.value;try{(n=i.Ho({Qi:t}))&&(i.ED?r[i.ED]=n:r=c.__assign(c.__assign({},r),n))}catch(t){a.push(t)}}}catch(t){var u={error:t}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(u)throw u.error}}return a.length&&(r["rpt-error"]=new h.Fya("Reporting error",a)),r},e.wea=n},function(t,e){_esm(e),e.$eb="Cannot apply @injectable decorator multiple times.",e.afb="Metadata key was used more than once in a parameter:",e.BR="NULL argument",e.vEa="Key Not Found",e.kcb="Ambiguous match found for serviceIdentifier:",e.Ddb="Could not unbind serviceIdentifier:",e.Xhb="No matching bindings found for serviceIdentifier:",e.uhb="Missing required @injectable annotation in:",e.vhb="Missing required @inject or @multiInject annotation in:",e.skb=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.Fdb="Circular dependency found:",e.s6b="Sorry, this feature is not fully implemented yet.",e.Ngb="Invalid binding type:",e.Zhb="No snapshot available to restore.",e.Rgb="Invalid return type in middleware. Middleware must return!",e.Qgb="Value provided to function binding must be a function!",e.Tgb="The toSelf function can only be applied when a constructor is used as service identifier",e.Ogb="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.mcb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.Udb="Invalid Container constructor argument. Container options must be an object.",e.Sdb="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.Rdb="Invalid Container option. Auto bind injectable must be a boolean",e.Tdb="Invalid Container option. Skip base check must be a boolean",e.Ihb="Cannot apply @postConstruct decorator multiple times in the same class",e.cjb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.Gdb=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.Sjb="Maximum call stack size exceeded"},function(t,e){_esm(e),e.Qo=e.EZb=e.h4a=void 0,e.h4a=function(t,e){return t-e},e.EZb=function(t,e){return t.localeCompare(e)},e.Qo=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);i&&Object.defineProperty(t,e,{configurable:i.configurable,enumerable:!1,value:i.value,writable:i.writable})}},function(t,e){var i;_esm(e),e.tqa=e.Xh=void 0,(i=e.Xh||(e.Xh={}))[i.rp=0]="STANDARD",i[i.eo=1]="LIMITED",e.tqa=function(t){return["STANDARD","LIMITED"][t]}},function(t,r,e){var a,i;_esm(r),r.vIa=r.uIa=r.Xda=r.Yda=r.zB=r.$da=r.Zda=r.cea=r.bea=r.ho=r.dea=r.aea=void 0,a=e(12),i=e(21),r.aea=function t(e,i){var n=r.ho[0];n==i&&(n=r.ho[1]),n?n.close(function(){t(e,i)}):e&&e(a.Ye)},r.dea=function(t,e){switch(t){case r.Zda:return void r.bea.push(e);case r.$da:return void r.cea.push(e)}i.hb(!1)},r.ho=[],r.bea=[],r.cea=[],r.Zda=1,r.$da=3,r.zB={index:0,r3a:void 0,rma:void 0},r.Yda="network",r.Xda="media",r.uIa="timedtext",r.vIa="playback"},function(t,e,i){var r=i(130),a=i(178);t.exports=function(n){return function t(e,i){switch(arguments.length){case 0:return t;case 1:return a(e)?t:r(function(t){return n(e,t)});default:return a(e)&&a(i)?t:a(e)?r(function(t){return n(t,i)}):a(i)?r(function(t){return n(e,t)}):n(e,i)}}}},function(t,r,e){var i,a;_esm(r),r.w6=r.Nr=r.x6=r.YC=r.El=r.ve=void 0,t=e(73),i=e(61),a=e(11),r.ve=new t.Gk,r.El=1,r.YC=2,r.x6=3,r.Nr=4,r.w6=5,i.Rf(function(){var t,i,e;function n(t,e){i?i.on(t,e):pt.addEventListener(t,e)}t=pt.jQuery,i=t&&t(pt),t=(t=pt.netflix)&&t.cadmium&&t.cadmium.addBeforeUnloadHandler,e=a.Be.hidden,t?t(function(t){r.ve.Fc(r.El,t)}):n("beforeunload",function(t){r.ve.Fc(r.El,t)}),n("keydown",function(t){r.ve.Fc(r.YC,t)}),n("resize",function(){r.ve.Fc(r.x6)}),a.Be.addEventListener("visibilitychange",function(){e!==a.Be.hidden&&(e=a.Be.hidden,r.ve.Fc(r.Nr))})}),pt.addEventListener("error",function(t){return r.ve.Fc(r.w6,t),!0})},function(t,e){_esm(e),e.Rf=void 0,e.Rf=function(t){return setTimeout(t,0)}},function(t,e){var i,n,r;function a(){}_esm(e),e.co=e.Ia=e.Rj=void 0,(r=i=i||{})[r.rp=0]="STANDARD",r[r.eo=1]="LIMITED",r[r.g7b=2]="PREVIEW",(r=n=n||{})[r.HAVE_NOTHING=0]="HAVE_NOTHING",r[r.HAVE_METADATA=1]="HAVE_METADATA",r[r.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",r[r.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",r[r.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA",(r=t=e.Rj||(e.Rj={})).ycb="asl_start",r.wcb="asl_comp",r.g3b="asl_exc",r.xcb="asl_fail",r.Ujb="stf_creat",r.igb="idb_open",r.fgb="idb_block",r.pgb="idb_upgr",r.ogb="idb_succ",r.ggb="idb_error",r.hgb="idb_invalid_state",r.kgb="idb_open_timeout",r.mgb="idb_open_wrkarnd",r.ngb="idb_storelen_exc",r.jgb="idb_open_exc",r.lgb="idb_timeout_invalid_storelen",r.Chb="msl_load_data",r.Ehb="msl_load_no_data",r.Dhb="msl_load_failed",(r=e.Ia||(e.Ia={})).Eda="PlaybackRequestStart",r.Dda="PlaybackRequestEnd",r.a1="RequestPrefetchManifestStart",r.$0="RequestPrefetchManifestEnd",r.Z0="RequestManifestStart",r.Y0="RequestManifestEnd",r.X0="RequestLicenseStart",r.W0="RequestLicenseEnd",r.sQ="RequestTimedTextUrlStart",r.rQ="RequestTimedTextUrlEnd",r.qQ="RequestAudioUrlStart",r.pQ="RequestAudioUrlEnd",r.uQ="RequestVideoUrlStart",r.tQ="RequestVideoUrlEnd",r.eba="AppendBufferStart",r.dba="AppendBufferEnd",r.yea="SetMediaKeysStart",r.xea="SetMediaKeysEnd",r.f0="GenerateChallengeStart",r.e0="GenerateChallengeEnd",r.j_="ApplyLicenseStart",r.i_="ApplyLicenseEnd",(e.co=a).Rca=i,a.$Sa=function(t){return["STANDARD","LIMITED","PREVIEW"][t]},a.Rj=t,a.q0=n},function(t,e){_esm(e),e.d6=e.TJ=e.Cea=e.h1=e.eMa=e.fMa=e.Fda=e.b0=e.wx=void 0,e.wx="cenc",e.b0="MIIE2jCCA8KgAwIBAgIIBRGnbPd8z1YwDQYJKoZIhvcNAQEFBQAwfzELMAkGA1UEBhMCVVMxEzARBgNVBAoMCkFwcGxlIEluYy4xJjAkBgNVBAsMHUFwcGxlIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MTMwMQYDVQQDDCpBcHBsZSBLZXkgU2VydmljZXMgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNMTMwMzI3MjEyNjU2WhcNMTUwMzI4MjEyNjU2WjBjMQswCQYDVQQGEwJVUzEUMBIGA1UECgwLTmV0ZmxpeC5jb20xDDAKBgNVBAsMA0VEUzEwMC4GA1UEAwwnRlBTIEFwcGxpY2F0aW9uIENlcnRpZmljYXRlICgyMDEzIHYxLjApMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDfaIdDptThILsQcAbDMvT5FpK4JNn/BnHAY++rS9OFfhg5R4pV7CI+UMZeC64TFJJZciq6dX4/Vh7JDDULooAeZxlOLqJB4v+KDMpFS6VsRPweeMRSCE5rQffF5HoRKx682Kw4Ltv2PTxE3M16ktYCOxq+/7fxevMt3uII+2V0tQIDAQABo4IB+DCCAfQwHQYDVR0OBBYEFDuQUJCSl+l2UeybrEfNbUR1JcwSMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUY+RHVMuFcVlGLIOszEQxZGcDLL4wgeIGA1UdIASB2jCB1zCB1AYJKoZIhvdjZAUBMIHGMIHDBggrBgEFBQcCAjCBtgyBs1JlbGlhbmNlIG9uIHRoaXMgY2VydGlmaWNhdGUgYnkgYW55IHBhcnR5IGFzc3VtZXMgYWNjZXB0YW5jZSBvZiB0aGUgdGhlbiBhcHBsaWNhYmxlIHN0YW5kYXJkIHRlcm1zIGFuZCBjb25kaXRpb25zIG9mIHVzZSwgY2VydGlmaWNhdGUgcG9saWN5IGFuZCBjZXJ0aWZpY2F0aW9uIHByYWN0aWNlIHN0YXRlbWVudHMuMDUGA1UdHwQuMCwwKqAooCaGJGh0dHA6Ly9jcmwuYXBwbGUuY29tL2tleXNlcnZpY2VzLmNybDAOBgNVHQ8BAf8EBAMCBSAwLQYLKoZIhvdjZAYNAQMBAf8EGwGcLBpLUU8iNtuBsGfgldUUE/I42u6RKyl8uzBJBgsqhkiG92NkBg0BBAEB/wQ3AV+LX+Xo3O4lI5WzFXfxVrna5jJD1GHioNsMHMKUv97Kx9dCozZVRhmiGdTREdjOptDoUjj2ODANBgkqhkiG9w0BAQUFAAOCAQEAmkGc6tT450ENeFTTmvhyTHfntjWyEpEvsvoubGpqPnbPXhYsaz6U1RuoLkf5q4BkaXVE0yekfKiPa5lOSIYOebyWgDkWBuJDPrQFw8QYreq5T/rteSNQnJS1lAbg5vyLzexLMH7kq47OlCAnUlrI20mvGM71RuU6HlKJIlWIVlId5JZQF2ae0/A6BVZWh35+bQu+iPI1PXjrTVYqtmrV6N+vV8UaHRdKV6rCD648iJebynWZj4Gbgzqw7AX4RE6UwiX0Rgz9ZMM5Vzfgrgk8KxOmsuaP8Kgqf5KWeH/LDa+ocftU7zGz1jO5L999JptFIatsdPyZXnA3xM+QjzBW8w==",e.Fda="Q0hBSQAAAAEAAAUMAAAAAAAAAAJDRVJUAAAAAQAAAfwAAAFsAAEAAQAAAFhr+y4Ydms5rTmj6bCCteW2AAAAAAAAAAAAAAAJzZtwNxHterM9CAoJYOM3CF9Tj0d9KND413a+UtNzRTb/////AAAAAAAAAAAAAAAAAAAAAAABAAoAAABU8vU0ozkqocBJMVIX2K4dugAAADZodHRwOi8vbnJkcC5uY2NwLm5ldGZsaXguY29tL3Jtc2RrL3JpZ2h0c21hbmFnZXIuYXNteAAAAAABAAUAAAAMAAAAAAABAAYAAABcAAAAAQABAgAAAAAAglDQ2GehCoNSsOaaB8zstNK0cCnf1+9gX8wM+2xwLlqJ1kyokCjt3F8P2NqXHM4mEU/G1T0HBBSI3j6XpKqzgAAAAAEAAAACAAAABwAAAEgAAAAAAAAACE5ldGZsaXgAAAAAH1BsYXlSZWFkeSBNZXRlcmluZyBDZXJ0aWZpY2F0ZQAAAAAABjIwMjQ4AAAAAAEACAAAAJAAAQBAU73up7T8eJYVK4UHuKYgMQIRbo0yf27Y5EPZRPmzkx1ZDMor7Prs77CAOU9S9k0RxpxPnqUwAKRPIVCe0aX2+AAAAgBb65FSx1oKG2r8AxQjio+UrYGLhvA7KMlxJBbPXosAV/CJufnIdUMSA0DhxD2W3eRLh2vHukIL4VH9guUcEBXsQ0VSVAAAAAEAAAL8AAACbAABAAEAAABYyTlnSi+jZfRvYL0rk9sVfwAAAAAAAAAAAAAABFNh3USSkWi88BlSM6PZ2gMuceJFJ9hzz0WzuCiwF9qv/////wAAAAAAAAAAAAAAAAAAAAAAAQAFAAAADAAAAAAAAQAGAAAAYAAAAAEAAQIAAAAAAFvrkVLHWgobavwDFCOKj5StgYuG8DsoyXEkFs9eiwBX8Im5+ch1QxIDQOHEPZbd5EuHa8e6QgvhUf2C5RwQFewAAAACAAAAAQAAAAwAAAAHAAABmAAAAAAAAACATWljcm9zb2Z0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAUGxheVJlYWR5IFNMMCBNZXRlcmluZyBSb290IENBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAMS4wLjAuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAIAAAAkAABAECsAomwQgNY0bm6U6Au9JRvwjbNnRzmVkZi+kg7npnRQ2T+4LgyrePBdBRQ3qb/jxXkn++4sOFa7vjRpFBzV0MMAAACAIZNYc/yJW5CLFaLPCgAHPs+FSdlhYS6BSG3mxgo2TbeHYJqj8Pm5/p6kNXKKUbx9kou+59dz/5+Q060QpP6xas=",e.fMa="Cr0CCAMSEOVEukALwQ8307Y2+LVP+0MYh/HPkwUijgIwggEKAoIBAQDm875btoWUbGqQD8eAGuBlGY+Pxo8YF1LQR+Ex0pDONMet8EHslcZRBKNQ/09RZFTP0vrYimyYiBmk9GG+S0wB3CRITgweNE15cD33MQYyS3zpBd4z+sCJam2+jj1ZA4uijE2dxGC+gRBRnw9WoPyw7D8RuhGSJ95OEtzg3Ho+mEsxuE5xg9LM4+Zuro/9msz2bFgJUjQUVHo5j+k4qLWu4ObugFmc9DLIAohL58UR5k0XnvizulOHbMMxdzna9lwTw/4SALadEV/CZXBmswUtBgATDKNqjXwokohncpdsWSauH6vfS6FXwizQoZJ9TdjSGC60rUB2t+aYDm74cIuxAgMBAAE6EHRlc3QubmV0ZmxpeC5jb20SgAOE0y8yWw2Win6M2/bw7+aqVuQPwzS/YG5ySYvwCGQd0Dltr3hpik98WijUODUr6PxMn1ZYXOLo3eED6xYGM7Riza8XskRdCfF8xjj7L7/THPbixyn4mULsttSmWFhexzXnSeKqQHuoKmerqu0nu39iW3pcxDV/K7E6aaSr5ID0SCi7KRcL9BCUCz1g9c43sNj46BhMCWJSm0mx1XFDcoKZWhpj5FAgU4Q4e6f+S8eX39nf6D6SJRb4ap7Znzn7preIvmS93xWjm75I6UBVQGo6pn4qWNCgLYlGGCQCUm5tg566j+/g5jvYZkTJvbiZFwtjMW5njbSRwB3W4CrKoyxw4qsJNSaZRTKAvSjTKdqVDXV/U5HK7SaBA6iJ981/aforXbd2vZlRXO/2S+Maa2mHULzsD+S5l4/YGpSt7PnkCe25F+nAovtl/ogZgjMeEdFyd/9YMYjOS4krYmwp3yJ7m9ZzYCQ6I8RQN4x/yLlHG5RH/+WNLNUs6JAZ0fFdCmw=",e.eMa="CAUSwwUKvQIIAxIQ5US6QAvBDzfTtjb4tU/7QxiH8c+TBSKOAjCCAQoCggEBAObzvlu2hZRsapAPx4Aa4GUZj4/GjxgXUtBH4THSkM40x63wQeyVxlEEo1D/T1FkVM/S+tiKbJiIGaT0Yb5LTAHcJEhODB40TXlwPfcxBjJLfOkF3jP6wIlqbb6OPVkDi6KMTZ3EYL6BEFGfD1ag/LDsPxG6EZIn3k4S3ODcej6YSzG4TnGD0szj5m6uj/2azPZsWAlSNBRUejmP6Tiota7g5u6AWZz0MsgCiEvnxRHmTRee+LO6U4dswzF3Odr2XBPD/hIAtp0RX8JlcGazBS0GABMMo2qNfCiSiGdyl2xZJq4fq99LoVfCLNChkn1N2NIYLrStQHa35pgObvhwi7ECAwEAAToQdGVzdC5uZXRmbGl4LmNvbRKAA4TTLzJbDZaKfozb9vDv5qpW5A/DNL9gbnJJi/AIZB3QOW2veGmKT3xaKNQ4NSvo/EyfVlhc4ujd4QPrFgYztGLNrxeyRF0J8XzGOPsvv9Mc9uLHKfiZQuy21KZYWF7HNedJ4qpAe6gqZ6uq7Se7f2JbelzENX8rsTpppKvkgPRIKLspFwv0EJQLPWD1zjew2PjoGEwJYlKbSbHVcUNygplaGmPkUCBThDh7p/5Lx5ff2d/oPpIlFvhqntmfOfumt4i+ZL3fFaObvkjpQFVAajqmfipY0KAtiUYYJAJSbm2DnrqP7+DmO9hmRMm9uJkXC2MxbmeNtJHAHdbgKsqjLHDiqwk1JplFMoC9KNMp2pUNdX9TkcrtJoEDqIn3zX9p+itdt3a9mVFc7/ZL4xpraYdQvOwP5LmXj9galK3s+eQJ7bkX6cCi+2X+iBmCMx4R0XJ3/1gxiM5LiStibCnfInub1nNgJDojxFA3jH/IuUcblEf/5Y0s1SzokBnR8V0KbA==",e.h1="SW_SECURE_CRYPTO",e.Cea="SW_SECURE_DECODE",e.TJ="HW_SECURE_DECODE",e.d6=function(t){var i=t.getConfiguration();return[e.TJ,e.Cea,e.h1].find(function(e){var t;return null===(t=i.videoCapabilities)||void 0===t?void 0:t.some(function(t){return t.robustness===e})})}},function(t,e){function i(t){var e=Error.call(this,"TimeoutError");this.message=e.message,"stack"in e&&(this.stack=e.stack),this.interval=t}_esm(e),e.Rx=e.hr=void 0,T(i,Error),e.hr=i,e.Rx="PromiseTimerSymbol"},function(t,e,i){var n;function r(t,e){this.key=t,this.value=e}_esm(e),n=i(43),r.prototype.toString=function(){return this.key===n.vB?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e.Metadata=r},function(t,e){_esm(e),e.Xs="PboConfigSymbol"},function(t,e,i){_esm(e),(t=i(1)).__exportStar(i(736),e),t.__exportStar(i(169),e),t.__exportStar(i(737),e),t.__exportStar(i(738),e),t.__exportStar(i(739),e),t.__exportStar(i(740),e),t.__exportStar(i(358),e),t.__exportStar(i(741),e)},function(t,e){_esm(e),e.fj={G1a:"logblob",oa:"manifest",Hg:"license",events:"events",bind:"bind",S4a:"pair",ping:"ping",config:"config"},e.BB={}},function(t,e){_esm(e),e.sv="EmeConfigSymbol"},function(t,e){_esm(e),e.Vs="MediaKeySystemAccessServicesSymbol"},function(t,e){_esm(e),e.oF="TimingApiSymbol",e.xR="MilestoneTimingApiSymbol"},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(148),e),t.__exportStar(i(815),e),t.__exportStar(i(174),e)},function(t,e,i){var a,o;function n(){var r,n=this;this.et={},this.on=function(t,e,i){n.addListener(t,e,i)},this.addListener=function(t,e,i){n.et&&(n.et[t]=n.et[t]||new o.nea(!0)).add(e,i)},this.removeListener=function(t,e){n.et&&n.et[t]&&n.et[t].removeAll(e)},this.kna=function(t){return n.et&&n.et[t]?n.et[t].flatten():[]},(r=this).Fc=function(t,i,e){var n;if(r.et)for(n=r.kna(t),t={wJ:0};t.wJ<n.length;(t={wJ:t.wJ}).wJ++)e?function(e){return function(){var t=n[e.wJ];a.Rf(function(){t(i)})}}(t)():n[t.wJ].call(this,i)}}_esm(e),e.Gk=void 0,a=i(61),o=i(333),n.prototype.Fh=function(){this.et=void 0},e.Gk=n},function(t,S,e){var i,T,n,a,A,O,I,x,P,o,s,R,N,r,j,C,L,M,D;function u(t){var e=t.url.split("?"),i=e[0],n="sc="+t.NWb,r=t.CRa?"random="+(1e17*s.TE()).toFixed(0):"";return i=e[1]?i+("?"+e[1])+"&"+n:i+"?"+n,i+=r?"&"+r:"",t.qc&&!a.z7(i)&&(t=T.config&&T.config.qja)&&(i=t.replace("{URL}",i).replace("{EURL}",encodeURIComponent(i))),i}function c(t){var e=t.url.split("?"),i=e[0],n="bb_reason="+t.reason,r=t.CRa?"random="+(1e17*s.TE()).toFixed(0):"";return i=e[1]?i+("?"+e[1])+"&"+n:i+"?"+n,i+=r?"&"+r:"",t.qc&&!a.z7(i)&&(t=T.config&&T.config.qja)&&(i=t.replace("{URL}",i).replace("{EURL}",encodeURIComponent(i))),i}function U(t,e){var i=t.url.split("?"),n=i[0],r=h(t);r&&(e.ls=r,(void 0===t.Js?T.config:t).Js?(t.headers=t.headers||{},t.headers.Range="bytes="+r):(e.ls=r,n="/"==n[n.length-1]?n+"range/":n+"/range/",n+=r)),r=t.CRa?"random="+(1e17*s.TE()).toFixed(0):"",T.config.jz&&t.Q$&&(r="sc="+t.Q$+(r?"&"+r:"")),n=i[1]?n+("?"+i[1])+(r?"&"+r:""):n+(r?"?"+r:""),t.qc&&!a.z7(n)&&(t=T.config&&T.config.qja)&&(n=t.replace("{URL}",n).replace("{EURL}",encodeURIComponent(n))),e.url=n}function h(t){var e=t.offset;if(void 0!==e)return P.tU(e),void 0!==t.length?(t=t.offset+t.length-1,P.tU(t),e+"-"+t):e+"-"}function f(){return!1!==s.kf.onLine}function B(i,t,e,n){var r=n.Fta,a=n.headers;switch(i.open(r?"POST":"GET",t,!e),n.responseType){case S.YV:i.responseType="arraybuffer";break;case S.Poa:o.ORa(i,"overrideMimeType",void 0,"text/xml")}r&&(t={"Content-Type":O.Se(r)?"text/plain":"application/x-octet-stream"},a=a?O.Zb(t,a):t),a&&o.te(a,function(t,e){i.setRequestHeader(t,e)}),n.withCredentials&&(i.withCredentials=!0),void 0!==i.msCaching&&(i.msCaching="disabled"),r?i.send(r):i.send()}function F(t,e){switch(e.type){case S.YV:return t.response||new ArrayBuffer(0);case S.Poa:return t.responseXML;default:return t.responseText}}function l(){L.Fc(S.a_a),L.Fc(S.Qoa)}function p(){L.Fc(S.N6),L.Fc(S.Qoa)}_esm(S),S.YV=S.Poa=S.Ooa=S.Qoa=S.N6=S.a_a=S.$Za=S.L6=S.Dkb=S.Ekb=S.fJb=S.M6=S.cJb=S.dJb=S.bJb=S.eJb=S.hf=void 0,i=e(73),T=e(14),n=e(12),a=e(50),A=e(51),O=e(30),I=e(3),x=e(8),P=e(21),o=e(24),s=e(11),R=e(61),N=e(19),r=e(31),e={Xm:1,t8b:2,Ncb:3},S.hf=(C=x.Oi("Http"),L=new i.Gk,D={ssl:M=0,"non-ssl":0,invalid:0},x.ka.get(r.fh).register(I.M.$Da,function(t){T.config.O1b&&(pt.addEventListener("online",l),pt.addEventListener("offline",p),S.M6=f),t(n.Ye)}),{addEventListener:L.addListener,removeEventListener:L.removeListener,download:function(o,t){var n,r,a,s,i,e,u,c,h,f,l,p,d,b;function m(){var e;m=O.ql,l&&(clearTimeout(l),l=null),L.removeListener(S.N6,w),h&&(h.onloadstart=null,h.onreadystatechange=null,h.onprogress=null,h.onerror=null,h.onload=null,h=h.onabort=null),c.$||(c.na!=I.L.qB?n.warn("Download failed",r,I.Ts(c)):n.trace("Download aborted",r)),e=a,a=void 0;for(var i=e.length;i--;)!function(){var t=e[i];R.Rf(function(){t(c)})}();L.Fc(S.$Za,c,!0)}function g(){l&&(clearTimeout(l),l=null),l=setTimeout(_,f?u:e)}function v(t,e,i,n){var r,a;c.$=!1,c.na=t,r=A.lj(),(a=c.zm).vi=a.vi||r,a.Zo=a.Zo||r,0<e&&(c.ik=c.pf=e),i&&(c.ub=i),n&&(c.XD=n),t!==I.L.cR&&t!==I.L.IE&&t!==I.L.fR||!h||(h.onabort=null,E()),m()}function y(t){var e,i;try{(i=t.getResponseHeader("X-Netflix.Retry.Server.Policy"))&&(e=JSON.parse(i))}catch(t){}return e}function w(){S.M6()||v(I.L.cR)}function _(){v(f?I.L.IE:I.L.fR)}function E(){try{h&&h.abort()}catch(t){}}function k(){v(I.L.qB)}return P.hb(t),n=o.j&&o.j.log&&x.Ih(o.j,"Http")||C,r={Num:M++},a=[t],s={},e=o.d4||T.config.d4,u=o.esa||T.config.esa,function(t){var e;try{e=t.url,N.Vpa(e)?0===e.indexOf("https")?D.ssl++:0===e.indexOf("http")?D["non-ssl"]++:D.invalid++:D.invalid++}catch(t){}}(o),p=O.ql,d=O.ql,b=O.ql,c={request:o,type:o.responseType,zm:s,abort:E,timeout:_,Eha:function(t){m!==O.ql&&(P.hb(a,"Callback should be added before download starts."),a&&a.unshift(t))},k9:function(t){b(t)},m9:function(t){p(t)},Mn:function(t){d(t)},MXb:function(t){b=t},SXb:function(t){p=t},DXb:function(t){d=t}},R.Rf(function(){var t,e;if(N.Vpa(o.url))try{U(o,c),i=c.url,P.lM(i),r.Url=i,S.M6()?(h=new XMLHttpRequest,(t=T.config.V1b&&void 0!==h.onloadstart)&&(h.onloadstart=function(){var t=A.lj();s.Iq=t,c.k9({mediaRequest:o,timestamp:t})}),h.onreadystatechange=function(){if(2==h.readyState){f=!0,s.vi=A.lj(),h.onreadystatechange=null,g();for(var t,e,i=c,n=h.getAllResponseHeaders().split("\n"),r=n.length,a={};r--;)(t=n[r])&&1<=(e=t.indexOf(": "))&&e<t.length-1&&(a[t.substr(0,e)]=t.substr(e+2));i.headers=a,c.m9({timestamp:s.vi,connect:!0,mediaRequest:o,start:s.Iq,rt:[s.vi-s.Iq]})}},h.onprogress=function(t){f=!0,s.eka=t.loaded,g(),t={mediaRequest:o,bytes:t.loaded,timestamp:A.lj(),bytesLoaded:t.loaded},c.m9(t)},h.onload=function(){var t;m!==O.ql&&(P.hb(void 0===s.Zo),s.Zo=A.lj(),s.vi=s.vi||s.Zo,200<=h.status&&h.status<=299?(t=F(h,c),c.parsed=!1,c.content=t,c.$=!0):h.status==j?v(I.L.eR,h.status):v(I.L.dR,h.status,h.response,y(h)),m())},h.onabort=k,h.onerror=function(){var t,e=h.status;if(void 0!==T.config.zWa&&(e=T.config.zWa),0<e)if(e==j)v(I.L.eR,e);else{try{t=h.responseText}catch(t){}v(I.L.dR,e,t,y(h))}else v(I.L.gR)},e=A.lj(),B(h,i,!1,o),L.Fc(S.L6,c,!0),t||(s.Iq=e,c.k9({mediaRequest:o,timestamp:e})),g(),L.addListener(S.N6,w)):R.Rf(v.bind(void 0,I.L.cR))}catch(t){n.error("Exception starting download",t,r),v(I.L.Bca,void 0,O.wd(t))}else v(I.L.jDa)}),c},ec:D,lbc:function(t){var e=new XMLHttpRequest;t=c(t),e.open("HEAD",t),e.onreadystatechange=function(){e.readyState},e.send()},KYb:function(t){var e=new XMLHttpRequest;t=u(t),e.open("HEAD",t),e.onreadystatechange=function(){e.readyState},e.send()},PTb:function(t){var e=new XMLHttpRequest,i=t.url,n=t.MTb;e.open("HEAD",i),e.timeout=Math.max(2*n.QMb,T.config.Sta),e.onreadystatechange=function(){2==e.readyState&&n&&n.gO({url:i})},e.ontimeout=e.onerror=function(){n&&n.msa({url:i})},e.send()},Ajb:e}),S.eJb=u,S.bJb=c,S.dJb=U,S.cJb=h,S.M6=n.BJa,S.fJb=f,S.Ekb=B,S.Dkb=F,S.L6=1,S.$Za=2,S.a_a=3,S.N6=4,S.Qoa=5,S.Ooa=1,S.Poa=2,S.YV=3,j=420,pt._cad_global.http=S.hf},function(t,e,i){var n,r,a,o,s;function u(t,e,i,n,r){this.context=t,this.errorCode=e,this.pWb=i,this.x2=r,this.name=n}_esm(e),e.Di=void 0,t=i(1),n=i(0),r=i(517),a=i(4),o=i(41),s=i(40),u.prototype.send=function(t,e,i,n,r,a){var o=this;return a=void 0===a?s.wv.MR:a,this.jFb(t,e,i,a,n,r).then(function(t){return o.context.tAb.send(t.context,t.request)})},u.prototype.jFb=function(t,e,i,n,r,a){var o,s;try{return o=this.context.QVb.create(this.context.Gz.Wy(),e,i,r,n),s=this.itb(t,n,a),Promise.resolve({context:s,request:o})}catch(t){return Promise.reject(t)}},u.prototype.itb=function(t,e,i){return{hf:this.context.hf,log:t,zl:this.name,url:this.context.G1b(r.BRa(this.context.Ch,this.context.Yg,this.name,e)),jva:this.pWb,timeout:a.vh(59),headers:r.ARa(this.context.Yg,this.context.FG),Vua:this.Vua,Nsb:i}},u.prototype.Bn=function(t){return t instanceof o.qd?t:r.Bn(this.errorCode,t)},it.Object.defineProperties(u.prototype,{Vua:{configurable:!0,enumerable:!0,get:function(){return this.x2}}}),i=u,i=t.__decorate([n.R(),t.__param(0,n.nl()),t.__param(1,n.nl()),t.__param(2,n.nl()),t.__param(3,n.nl()),t.__param(4,n.nl())],i),e.Di=i},function(t,e){_esm(e),e.Ps={Request:"Request",Gea:"Singleton",q1:"Transient"},e.Kj={AAa:"ConstantValue",BAa:"Constructor",LBa:"DynamicValue",pca:"Factory",Function:"Function",Instance:"Instance",chb:"Invalid",yJa:"Provider"},e.Vx={tAa:"ClassProperty",CAa:"ConstructorArgument",Xea:"Variable"}},function(t,e){_esm(e),e.tx="Base16EncoderSymbol"},function(t,e){_esm(e),e.Bv="Utf8EncoderSymbol"},function(t,e){_esm(e),e.OKa="StorageValidatorSymbol",e.jB="AppStorageFactorySymbol"},function(t,e,i){var n,r,a;function o(t,e){this.Jv=e?[e]:[],this.fga="$op$"+a++,this.G=t}_esm(e),e.dc=void 0,n=i(12),r=i(21),a=0,o.prototype.addListener=function(t,e){var i=this;r.Fka(t),r.hb(this.Jv.indexOf(t)<0),t[n.O0+this.fga]=e,this.Jv=this.Jv.slice(),this.Jv.push(t),this.Jv.sort(function(t,e){return i.XYb(t,e)})},o.prototype.removeListener=function(t){r.Fka(t),this.Jv=this.Jv.slice(),0<=(t=this.Jv.indexOf(t))&&this.Jv.splice(t,1)},o.prototype.set=function(t,e){if(this.G!==t){e={oldValue:this.G,newValue:t,om:e},this.G=t;for(var i=(t=this.Jv).length,n=0;n<i;n++)t[n](e)}},o.prototype.when=function(n){var r=this;return new Promise(function(i){if(n(r.G))return i(r.G);r.addListener(function t(e){if(n(e.newValue))return r.removeListener(t),i(e.newValue)})})},o.prototype.XYb=function(t,e){return(t[n.O0+this.fga]||0)-(e[n.O0+this.fga]||0)},it.Object.defineProperties(o.prototype,{value:{configurable:!0,enumerable:!0,get:function(){return this.G}}}),e.dc=o},function(t,e){_esm(e),e.Gx="IdProviderSymbol"},function(t,e){_esm(e),e.mp={start:"start",stop:"stop",pW:"keepAlive",AM:"engage",splice:"splice"},e.mca="EventPboCommandFactorySymbol",e.JKa="StartEventPboCommandSymbol",e.NKa="StopEventPboCommandSymbol",e.xEa="KeepAliveEventPboCommandSymbol",e.EKa="SpliceEventPboCommandSymbol",e.jCa="EngageEventPboCommandSymbol"},function(t,e){function i(t){this.af=t}_esm(e),e.kv=void 0,i.prototype.$va=function(t){this.af=t},i.prototype.jSa=function(){this.af=void 0},i.prototype.jV=function(t){return this.af&&this.af.p9&&this.af.p9(t)},i.prototype.NM=function(t){this.af&&this.af.qA&&this.af.qA(t)},i.prototype.MC=function(t){this.af&&this.af.XH&&this.af.XH(t)},i.prototype.TG=function(t){this.af&&this.af.YH&&this.af.YH(t)},i.prototype.BWa=function(t){this.af&&this.af.Qsa&&this.af.Qsa(t)},i.prototype.Ut=function(t){this.af&&this.af.tk&&this.af.tk(t)},i.prototype.y5=function(t){this.af&&this.af.uX&&this.af.uX(t)},i.prototype.MM=function(t,e,i){this.af&&this.af.tX&&this.af.tX(t,e,i)},t=i,(e.kv=t).prototype.p9=t.prototype.jV,t.prototype.qA=t.prototype.NM,t.prototype.XH=t.prototype.MC,t.prototype.YH=t.prototype.TG,t.prototype.tk=t.prototype.Ut,t.prototype.uX=t.prototype.y5,t.prototype.tX=t.prototype.MM,t.prototype.Qsa=t.prototype.BWa},function(t,e,i){var n;_esm(e),n=i(145),e.ko=function(t){return n.assert("number"==typeof t),String.fromCharCode(t>>>24&255)+String.fromCharCode(t>>>16&255)+String.fromCharCode(t>>>8&255)+String.fromCharCode(255&t)},e.pS=function(t){return t.charCodeAt(3)+(t.charCodeAt(2)<<8)+(t.charCodeAt(1)<<16)+(t.charCodeAt(0)<<24)},e.ylb=function(t,e){return Math.floor(1e3*t/e)}},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(){return null!==r&&r.apply(this,arguments)||this}function p(){return null!==a&&a.apply(this,arguments)||this}function d(){return null!==o&&o.apply(this,arguments)||this}function b(){return null!==s&&s.apply(this,arguments)||this}function m(){return null!==u&&u.apply(this,arguments)||this}function g(){return null!==c&&c.apply(this,arguments)||this}function v(){return null!==h&&h.apply(this,arguments)||this}function y(){return null!==f&&f.apply(this,arguments)||this}_esm(e),n=i(2),r=i(225).default,n.__extends(l,r),l.prototype.parse=function(t){return r.prototype.parse.call(this,t),this.ic=this.Wi([{offset:16,type:"offset"},{offset:16,type:"offset"},{offset:96,type:"offset"},{width:"int16"},{height:"int16"},{ZIb:"int32"},{n2b:"int32"},{offset:32,type:"offset"},{ODb:"int16"},{vvb:{type:"int8",gia:32}},{depth:"int16"},{offset:16,type:"offset"}]),!0},l.Na=!0,t=l,e.default=t,a=t,n.__extends(p,a),p.Xb="avc1",i=p,e.lba=i,o=t,n.__extends(d,o),d.Xb="avc2",i=d,e.mba=i,s=t,n.__extends(b,s),b.Xb="avc3",i=b,e.nba=i,u=t,n.__extends(m,u),m.Xb="avc4",i=m,e.oba=i,c=t,n.__extends(g,c),g.Xb="hvc1",i=g,e.Cca=i,h=t,n.__extends(v,h),v.Xb="hev1",i=v,e.wca=i,f=t,n.__extends(y,f),y.Xb="av01",t=y,e.Ccb=t},function(t){t.exports=function(t,e){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}},function(t,e){_esm(e),e.Hx=e.ResponseType=void 0,e.ResponseType={Text:1,u8b:2,ddb:3},e.Hx="LegacyHttpSymbol"},function(t,e,i){var n;_esm(e),n=i(150),e.ko=function(t){return n.assert("number"==typeof t),String.fromCharCode(t>>>24&255)+String.fromCharCode(t>>>16&255)+String.fromCharCode(t>>>8&255)+String.fromCharCode(255&t)},e.pS=function(t){return t.charCodeAt(3)+(t.charCodeAt(2)<<8)+(t.charCodeAt(1)<<16)+(t.charCodeAt(0)<<24)},e.ylb=function(t,e){return Math.floor(1e3*t/e)}},function(t,e){_esm(e),e.Ix="LogMessageFactorySymbol"},function(t,e){_esm(e),e.Ei={audio:"audio",video:"video",laa:"timedtext",vxa:"trickplay"}},function(t,e){_esm(e),e.zx="DeviceFactorySymbol"},function(t,e,i){var n;_esm(e),e.cj=e.iib=e.op=void 0,n=i(19),e.op=e.op||function(t,e,i){return e<=t?t<=i?t:i:e},e.iib=function(t,e,i,n,r){return(t-e)*(r-n)/(i-e)+n},e.cj=function(t){if(n.Ba(t))return(t/1e3).toFixed(3)}},function(t,e,i){var c,r;function a(t,e,i,n,r){var a,o={},s="number"==typeof r;if(r=void 0!==r&&s?r.toString():i,s&&void 0!==i)throw Error(c.Ogb);if(Reflect.zoa(t,e)&&(o=Reflect.getMetadata(t,e)),i=o[r],Array.isArray(i)){s=0;for(var u=i;s<u.length;s++)if((a=u[s]).key===n.key)throw Error(c.afb+" "+a.key.toString())}else i=[];i.push(n),o[r]=i,Reflect.B4(t,o,e)}_esm(e),c=i(55),r=i(43),e.ZI=function(t,e,i,n){a(r.YKa,t,e,n,i)},e.mZ=function(t,e,i){a(r.ZKa,t.constructor,e,i)},e.Fr=function(t,e,i){var n,r;"number"==typeof i?(t=[(n=i,r=t,function(t,e){r(t,e,n)})],Reflect.Fr(t,e)):"string"==typeof i?Reflect.Fr([t],e,i):Reflect.Fr([t],e)}},function(t,e){_esm(e),e.nEa="Injector",e.tB=145152e5,e.OR="ProfileSymbol"},function(t,e,i){var a,o;function n(t,e,i,n,r){return t=void 0===t?a.M.Vl:t,o.qd.call(this,t,e,i,void 0,void 0,n,o.qd.wd(r),r)||this}_esm(e),e.Ng=void 0,a=i(3),T(n,(o=i(41)).qd),e.Ng=n},function(t,e){_esm(e),e.cBa="DebugConfigSymbol",e.pv="DebugSymbol"},function(t,e){_esm(e),e.nca="EventSourceSymbol",e.qca="GlobalEventSourceSymbol",e.U_="DebugEventSourceSymbol",e.oBa="DiagnosticsEventSourceSymbol"},function(t,e){var i;_esm(e),e.jQ=e.Hcb=e.tba=e.uba=void 0,(i=e.uba||(e.uba={}))[i.NUa=0]="downloading",i[i.QAb=1]="downloaded",i[i.ef=2]="appended",i[i.buffered=3]="buffered",i[i.MO=4]="removed",i[i.Scc=5]="unused",(i=e.tba||(e.tba={}))[i.waiting=1]="waiting",i[i.tbc=2]="ondeck",i[i.NUa=4]="downloading",i[i.QAb=8]="downloaded",i[i.fW=6]="inprogress",e.Hcb="AseBufferViewSymbol",e.jQ="AseBufferAccountingSymbol"},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(718),e),t.__exportStar(i(719),e),t.__exportStar(i(720),e),t.__exportStar(i(721),e),t.__exportStar(i(722),e),t.__exportStar(i(723),e),t.__exportStar(i(724),e),t.__exportStar(i(725),e),t.__exportStar(i(350),e),t.__exportStar(i(351),e),t.__exportStar(i(726),e),t.__exportStar(i(727),e)},function(t,e){_esm(e),e.YE="6674654e-696c-5078-6966-665374726d21",e.ZE="6674654e-696c-4878-6165-6465722e7632",e.zR="6674654e-696c-5078-6966-66496e646578",e.Nx="6674654e-696c-4d78-6f6f-6653697a6573",e.Mx="6674654e-696c-5378-6565-6b506f696e74",e.ER="cedb7489-e77b-514c-84f9-7148f9882554",e.DR="524f39a2-9b5a-144f-a244-6c427c648df4",e.XE="6674654e-696c-4678-7261-6d6552617465"},function(t,e,i){var n,r,a,c,o,s,u,h,f;function l(t,e){var i=f.call(this,t,e)||this;return l.xb(i,t,e),i}_esm(e),e.Rm=void 0,h=i(2),n=i(5),r=h.__importDefault(i(28)),a=h.__importDefault(i(124)),c=i(377),o=i(22),t=i(42),s=i(173),u=i(232),i=i(102),f=s.mv,h.__extends(l,f),l.xb=function(t,e,i,n){s.mv.xb(t,e,i),t.Me=i.index,t.JK=i.Wa,t.Ev=i.ob,t.Wpb=i.sb||e.sb,t.FI=i.FI,t.Dna=n,t.JNa=!!i.uq,t.FOa=null!==(n=i.region)&&void 0!==n?n:0,t.gNa=!!i.sma,t.INa=!!i.zw,t.Ld=void 0===i.z5||void 0===i.Dma||i.z5===i.Wa&&i.Dma===i.ob?t:new u.lB(t,{Wa:i.z5,ob:i.Dma}),t.snb=i.Sra,t.Pkb=i.di,t.Fmb=e.CIb,t.Ap=i.wa?t.Q3a(i.wa):void 0,t.bPa=i.av,t.ef=!1},l.xTa=function(t){for(var e,i,n=new Uint32Array(t.length),r=new Uint32Array(t.length),a=new Uint8Array(t.length),o=new Uint8Array(t.length),s=0,u=0;u<t.length;++u)i=(e=t[u]).Qc,n[u]=e.Ev-e.JK,r[u]=i,a[u]=e.stream.Lf,void 0!==e.sb&&null!==e.sb&&(o[u]=e.sb),s+=i;return new c.Fea(n,r,a,o,t.length?t[0].S:1e3,s)},Object.defineProperties(l.prototype,{kD:{get:function(){return!0},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{index:{get:function(){return this.Me},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{sb:{get:function(){return this.Wpb},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{gRa:{get:function(){return 8*this.fa/this.duration},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Wa:{get:function(){return this.JK},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{ob:{get:function(){return this.Ev},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{zj:{get:function(){var t;return null!==(t=null===(t=this.Dna)||void 0===t?void 0:t.call(this))&&void 0!==t?t:0},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{uq:{get:function(){return this.JNa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{region:{get:function(){return this.FOa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{sma:{get:function(){return this.gNa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{zw:{get:function(){return this.INa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Sra:{get:function(){return this.snb},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{di:{get:function(){return this.Pkb},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{wa:{get:function(){return this.Ap},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{av:{get:function(){return this.bPa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{z5:{get:function(){return this.Ld.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Dma:{get:function(){return this.Ld.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{NDb:{get:function(){return this.Ld.Lt},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{OM:{get:function(){return this.Ld.zd},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{B5:{get:function(){return this.Ld.me},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{A5:{get:function(){return this.Ld.duration},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Ema:{get:function(){return this.Ld.fd},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{MDb:{get:function(){return this.Ld.Lc},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{NC:{get:function(){var t=this.NDb;return n.assert(t),t/this.stream.sa.vc},enumerable:!1,configurable:!0}}),l.prototype.j2a=function(){this.JNa=!0},l.prototype.WXb=function(t){this.FI={ae:t.vXa(),x7:t.bv}},l.prototype.nP=function(t){this.bPa=t},l.prototype.UXb=function(t,e,i){this.FOa=t,this.gNa=e,this.INa=i},l.prototype.Bk=function(t){var e,i;void 0===t&&(t={}),e=this.stream.sa.vc,i=this.Ap||{start:0,end:this.NC},t=this.Q3a(t),this.Ld&&this.Ld!==this||(this.Ld=new u.lB(this,this)),t.start>i.start&&(this.JK=this.Ld.Wa+t.start*e),t.end<i.end&&(this.Ev=this.Ld.Wa+t.end*e),this.Ap=t},l.prototype.qla=function(t){void 0===t&&(t=1),this.Ap?this.Bk({start:this.Ap.start+t,end:this.Ap.end}):this.Bk({start:t})},l.prototype.rla=function(t){this.Ap?this.Bk({start:this.Ap.start,end:(this.Ap.end||0)-t}):this.Bk({start:0,end:-t})},l.prototype.pla=function(){this.Bk({start:0,end:0})},l.prototype.XXb=function(t){this.Ap||this.Bk(),this.Ap.nwa=t},l.prototype.jWa=function(t){var e;if(!(t<this.Z||t>=this.Ha)&&this.di&&this.di.length){t=new o.T(t+1-this.Z,1e3).qm(this.stream.sa);for(var i=this.di.length-1;0<=i;--i)if((e=this.di[i]).il<=t)return e;return{il:0,Ed:this.Ema}}},l.prototype.mDb=function(t){var e;if(!(t<this.Z||t>=this.Ha)&&this.di&&this.di.length){t=new o.T(t+1-this.Z,1e3).qm(this.stream.sa);for(var i=this.di.length-1;0<=i;--i)if((e=this.di[i]).il<=t)return e;return{il:0,Ed:this.Ema}}},l.prototype.dWa=function(t,e){var i,n,r;if(!(t<this.Z||t>=this.Ha))return!e&&this.Fmb?{il:0,Ed:this.Z}:(i=this.sa.vc,n=this.sa.S,r=Math.floor(this.Lt/i),t=Math.min((e?Math.ceil:Math.floor)((o.T.Tra(t,n)-this.Wa+(e?-1:1)*(n/1e3-1))/i),r),i=o.T.vZ(this.Wa+t*i,n),t===r?void 0:{il:t,Ed:i})},l.prototype.jma=function(t){return this.mediaType===r.default.Ta.Mb?this.jWa(t):this.dWa(t,!1)},l.prototype.ima=function(t){return this.mediaType===r.default.Ta.Mb?this.mDb(t):this.dWa(t,!0)},l.prototype.f3=function(t){this.Qc+=t.fa,this.Ev=t.ob,this.Ap&&(this.Ld=new u.lB(this,{Wa:this.z5,ob:this.Ev}),this.Ap.end=this.NC)},l.prototype.toString=function(){return"["+this.Oa+", "+this.bitrate+"kbit/s, c:"+this.fd+"-"+this.Lc+",p:"+this.zd+"-"+this.me+",d:"+this.duration+"]"},l.prototype.toJSON=function(){var t=s.mv.prototype.toJSON.call(this);return a.default({index:this.index,startPts:this.Z,endPts:this.Ha,"contentStartTicks:":this.Wa,contentEndTicks:this.ob,contentStartPts:this.fd,contentEndPts:this.Lc,fragmentStartPts:this.OM!==this.Z?this.OM:void 0,fragmentEndPts:this.B5!==this.Ha?this.B5:void 0,edit:this.wa},t),t},l.prototype.iWa=function(t){var e;if(this.di)for(var i=0;i<this.di.length;++i)this.di[i].il===t&&(e=this.di[i].offset);return e},l.prototype.Q3a=function(t){var e=t.start||0;return{start:e,end:void 0===t.end?this.NC:Math.min(this.NC,Math.max(e,t.end<0?this.NC+t.end:t.end)),nwa:t.nwa,MYb:t.MYb}},h=l,e.Rm=h,t.xf(i.rx,h),t.xf(i.kB,h)},function(t,e,i){var n;function r(t,e){return void 0===t?void 0:0===t?n.T.Gb:new n.T(t,e)}function a(t,e){return t&&Math.floor(n.T.vZ(t,e))}function o(t,e){return void 0===t||void 0===e?void 0:t+e}function s(t,e){return void 0===t||void 0===e?void 0:t-e}function u(){}function c(){}_esm(e),e.kB=e.rx=void 0,n=i(22),Object.defineProperties(u.prototype,{Lt:{get:function(){return s(this.ob,this.Wa)||0},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{LSb:{get:function(){return o(this.Wa,this.zj)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{ISb:{get:function(){return o(this.ob,this.zj)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{LU:{get:function(){return r(this.Lt,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Vc:{get:function(){return r(this.Wa,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Pd:{get:function(){return r(this.ob,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{xj:{get:function(){return r(this.LSb,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{xe:{get:function(){return r(this.ISb,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{bua:{get:function(){return r(this.zj,this.S)},enumerable:!1,configurable:!0}}),t=u,e.rx=t,Object.defineProperties(c.prototype,{duration:{get:function(){return s(this.Ha,this.Z)||0},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Z:{get:function(){return a(o(this.Wa,this.zj),this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ha:{get:function(){return a(o(this.ob,this.zj),this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ou:{get:function(){return a(this.zj,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ek:{get:function(){return a(this.Wa,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{fd:{get:function(){return a(this.Wa,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Lc:{get:function(){return a(this.ob,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{zd:{get:function(){return a(o(this.Wa,this.zj),this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{me:{get:function(){return a(o(this.ob,this.zj),this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Hr:{get:function(){return this.duration},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{AA:{get:function(){return this.Z},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Vw:{get:function(){return this.Ha},enumerable:!1,configurable:!0}}),t=c,e.kB=t},function(t,e){_esm(e),e.Pda=e.Vm=void 0,(t=e.Vm||(e.Vm={})).eF="PRE_FETCH",t.ujb="QC",t.rp="STANDARD",t.g1="SUPPLEMENTAL",t.l4b="DOWNLOAD",e.Pda="PboManifestCommandSymbol"},function(t,e){_esm(e),e.YE="6674654e-696c-5078-6966-665374726d21",e.ZE="6674654e-696c-4878-6165-6465722e7632",e.zR="6674654e-696c-5078-6966-66496e646578",e.Nx="6674654e-696c-4d78-6f6f-6653697a6573",e.Mx="6674654e-696c-5378-6565-6b506f696e74",e.ER="cedb7489-e77b-514c-84f9-7148f9882554",e.DR="524f39a2-9b5a-144f-a244-6c427c648df4",e.XE="6674654e-696c-4678-7261-6d6552617465"},function(t,e,i){var n,r,a,o,s,u,c,h;function f(){return null!==r&&r.apply(this,arguments)||this}function l(){return null!==a&&a.apply(this,arguments)||this}function p(){return null!==o&&o.apply(this,arguments)||this}function d(){return null!==s&&s.apply(this,arguments)||this}function b(){return null!==u&&u.apply(this,arguments)||this}function m(){return null!==c&&c.apply(this,arguments)||this}function g(){return null!==h&&h.apply(this,arguments)||this}_esm(e),n=i(23),r=i(265).default,n.__extends(f,r),f.prototype.parse=function(t){return r.prototype.parse.call(this,t),this.ic=this.Wi([{offset:16,type:"offset"},{offset:16,type:"offset"},{offset:96,type:"offset"},{width:"int16"},{height:"int16"},{ZIb:"int32"},{n2b:"int32"},{offset:32,type:"offset"},{ODb:"int16"},{vvb:{type:"int8",gia:32}},{depth:"int16"},{offset:16,type:"offset"}]),!0},f.Na=!0,t=f,e.default=t,a=t,n.__extends(l,a),l.Xb="avc1",i=l,e.lba=i,o=t,n.__extends(p,o),p.Xb="avc2",i=p,e.mba=i,s=t,n.__extends(d,s),d.Xb="avc3",i=d,e.nba=i,u=t,n.__extends(b,u),b.Xb="avc4",i=b,e.oba=i,c=t,n.__extends(m,c),m.Xb="hvc1",i=m,e.Cca=i,h=t,n.__extends(g,h),g.Xb="hev1",t=g,e.wca=t},function(t,e){var r;function i(e,i){var n=this;this.Vfa=[],r.forEach(function(t){(t=t(e,i))&&n.Vfa.push(t)})}_esm(e),e.UE=e.kGa=void 0,r=[],i.prototype.Yu=function(t){for(var e,i=[],n=this.Vfa.length;n--;)(e=this.Vfa[n]).Yu(t)&&i.push(e.IM);if(i.length)return i},e.kGa=i,e.UE=function(t){r.push(t)}},function(t,e){var i;_esm(e),i=0,e.id=function(){return i++}},function(t,e){_esm(e),e.fF="PlatformConfigDefaultsSymbol"},function(t,e,i){var n,r,a;function o(){}_esm(e),e.KJ=e.Hb=void 0,n=i(137),r=i(41),a=i(3),o.ina=function(t){if(t){if(t.includes(e.KJ.RD))return n.bo.RD;if(t.includes("fps"))return n.bo.PG;if(t.includes(e.KJ.Xaa))return n.bo.Xaa}throw new r.qd(a.M.qfb,void 0,void 0,void 0,void 0,"Invalid KeySystem: "+t)},o.BXa=function(t){switch(t){case n.bo.RD:return e.KJ.RD;case n.bo.PG:return e.KJ.PG;default:return e.KJ.Xaa}},(e.Hb=o).Qx="com.microsoft.playready",o.Ud="com.microsoft.playready.hardware",o.gF="com.microsoft.playready.software",o.Ifb="com.apple.fps.2_0",o.hMa="com.widevine.alpha",o.njb="com.microsoft.playready.recommendation.3000",o.rIa="com.microsoft.playready.recommendation.2000",e.KJ={PG:"fairplay",Xaa:"widevine",RD:"playready"}},function(t,e,i){var n;function r(){}_esm(e),e.Gd=void 0,n=i(26),r.DTa=function(t){var e={};return e[n.se.RR]=r.KQ,e[n.se.g0]=r.KQ,e[n.se.pK]=r.NQ,e[n.se.Ex]=r.Ex,e[n.se.Qs]=t||r.Qs,e[n.se.iB]=r.KQ,e[n.se.Xx]=r.aS,e[n.se.Hj]=r.Hj,e},(e.Gd=r).Ira='video/mp4; codecs="avc1.4d0028"',r.KQ="avc1.4d0028",r.NQ="hev1.1.6.L93.B0",r.I_="dvhe.05.01",r.Wba="dvhe.05.04",r.Xba="dvhe.05.05",r.Yba="dvhe.05.06",r.Zba="dvhe.05.07",r.$ba="dvhe.05.09",r.Qs=r.I_,r.Ex=r.NQ,r.g_="mp4a.40.2",r.tF="mp4a.40.42",r.deb="ec-3",r.aS="vp09.00.11.08.02",r.Hj="av01.0.04M.08",r.Xdb=[r.$ba,r.Zba,r.Yba,r.Xba,r.Wba,r.I_]},function(t,e,i){function n(){}_esm(e),e.FB=void 0,t=i(1),i=i(0),n.prototype.format=function(t,e){for(var i,n=1;n<arguments.length;++n);return i=Array.prototype.slice.call(arguments,1),t.replace(/{(\d+)}/g,function(t,e){return void 0!==i[e]?i[e]:t})},n.prototype.g$a=function(t){for(var e=t.length,i=new Uint16Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i.buffer},n.prototype.j$a=function(t){return JSON.stringify(t,null,"  ")},i=t.__decorate([i.R()],n),e.FB=i},function(t,e){_esm(e),e.nK="ThrottleFactorySymbol"},function(t,e){_esm(e),e.ZJ="LoggerSinksSymbol"},function(t){var e,o,i,n;function s(){s.xb.call(this)}function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function r(t,e,i,n){var r,a;return u(i),void 0===(r=t.Zh)?(r=t.Zh=Object.create(null),t.AF=0):(void 0!==r.ibc&&(t.emit("newListener",e,i.listener||i),r=t.Zh),a=r[e]),void 0===a?(r[e]=i,++t.AF):("function"==typeof a?a=r[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),0<(i=void 0===t.QS?s.xzb:t.QS)&&a.length>i&&!a.H2b&&(a.H2b=!0,(i=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",i.Mt=t,i.type=e,i.count=a.length,console&&console.warn&&console.warn(i))),t}function a(t,e,i){return(e=function(){if(!this.nWa)return this.target.removeListener(this.type,this.Ybb),this.nWa=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(t={nWa:!1,Ybb:void 0,target:t,type:e,listener:i})).listener=i,t.Ybb=e}function c(t){var e=this.Zh;if(void 0!==e){if("function"==typeof(t=e[t]))return 1;if(void 0!==t)return t.length}return 0}function h(i,n,r,a){if("function"==typeof i.on)a.once?i.once(n,r):i.on(n,r);else{if("function"!=typeof i.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i);i.addEventListener(n,function t(e){a.once&&i.removeEventListener(n,t),r(e)})}}e="object"==typeof Reflect?Reflect:null,o=e&&"function"==typeof e.apply?e.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},i=Number.isNaN||function(t){return t!=t},t.exports=s,t.exports.once=function(s,u){return new Promise(function(t,e){function i(t){s.removeListener(u,n),e(t)}function n(){"function"==typeof s.removeListener&&s.removeListener("error",i),t([].slice.call(arguments))}var r,a,o;h(s,u,n,{once:!0}),"error"!==u&&(a=i,o={once:!0},"function"==typeof(r=s).on&&h(r,"error",a,o))})},(s.EventEmitter=s).prototype.Zh=void 0,s.prototype.AF=0,s.prototype.QS=void 0,n=10,Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");n=t}}),s.xb=function(){void 0!==this.Zh&&this.Zh!==Object.getPrototypeOf(this).Zh||(this.Zh=Object.create(null),this.AF=0),this.QS=this.QS||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.QS=t,this},s.prototype.emit=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);if(e="error"===t,void 0!==(r=this.Zh))e=e&&void 0===r.error;else if(!e)return!1;if(e){if(0<n.length&&(i=n[0]),i instanceof Error)throw i;throw(n=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,n}if(void 0===(r=r[t]))return!1;if("function"==typeof r)o(r,this,n);else{i=r.length,e=Array(i);for(var a=0;a<i;++a)e[a]=r[a];for(r=0;r<i;++r)o(e[r],this,n)}return!0},s.prototype.addListener=function(t,e){return r(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.OX=function(t,e){return r(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,a(this,t,e)),this},s.prototype.b6a=function(t,e){return u(e),this.OX(t,a(this,t,e)),this},s.prototype.removeListener=function(t,e){var i,n,r,a,o;if(u(e),void 0===(n=this.Zh))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this.AF?this.Zh=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(a=-1,i=r.length-1;0<=i;i--)if(r[i]===e||r[i].listener===e){o=r[i].listener,a=i;break}if(a<0)return this;if(0===a)r.shift();else{for(;a+1<r.length;a++)r[a]=r[a+1];r.pop()}1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.HD=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,i,n=this.Zh;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this.Zh=Object.create(null),this.AF=0):void 0!==n[t]&&(0==--this.AF?this.Zh=Object.create(null):delete n[t]),this;if(0===arguments.length){for(e=Object.keys(n),n=0;n<e.length;++n)"removeListener"!==(i=e[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this.Zh=Object.create(null),this.AF=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;0<=n;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){var e=this.Zh;if(void 0===e)t=[];else if(void 0===(t=e[t]))t=[];else if("function"==typeof t)t=[t.listener||t];else{e=Array(t.length);for(var i=0;i<e.length;++i)e[i]=t[i].listener||t[i];t=e}return t},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},s.prototype.listenerCount=c},function(t,e,i){var n;function r(t,e){if(t.length==e.length&&1<t.length){for(var i=t.length,n=0,r=u(t),a=u(e),o=0;o<i;o++)n+=t[o]*e[o];return(n-r*a/i)/i}return!1}function a(t){return!(!Array.isArray(t)||t.length<2)&&(t=o(t),Math.sqrt(t))}function o(t){var e;return!(!Array.isArray(t)||t.length<2)&&(e=s(t),u(t.map(function(t){return(t-e)*(t-e)}))/(t.length-1))}function s(t){return!(!Array.isArray(t)||!t.length)&&u(t)/t.length}function u(t){return!!Array.isArray(t)&&t.reduce(function(t,e){return t+e},0)}function c(t,e,i){return Math.max(Math.min(t,i),e)}function h(t,e){return"number"==typeof t?t:e}function f(t){return 1/(1+Math.exp(-t))}n=i(10),t.exports={Va:function(e,t,i){try{e.emit(t,i)}catch(t){e.Kk("JAVASCRIPT EXCEPTION: Caught in ASE client event listener. Exception:",t,"Event:",i)}},AC:function(){var t=Array.prototype.concat.apply([],arguments),e=t.reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e);return t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer},T3:c,Pub:function(t,e,i,n){return{min:c(h(t.min,e),i,n),max:c(h(t.max,e),i,n),Py:c(t.Py||6e4,0,6e5),SRa:c(t.SRa||0,-3e5,3e5),scale:c(t.scale||6e4,0,3e5),h8a:c(t.h8a||0,-3e5,3e5),gamma:c(t.gamma||1,.1,10)}},te:function(t,e){void 0!==t&&n.GRb(t).forEach(function(t){e(t[0],t[1])})},HVa:function(t,e,i){return t.min+(t.max-t.min)*(1-Math.pow(f(6*(e-(t.Py+(t.SRa||0)*(1-i)))/(t.scale+(t.h8a||0)*(1-i))),t.gamma))},jCb:function(t,e){return t.min+(t.max-t.min)*Math.pow(f(6*(e-t.Py)/t.scale),t.gamma)},C$b:u,yEb:s,MHb:o,A$b:a,u$b:r,t$b:function(t,e){var i;return t.length==e.length&&(i=r(t,e),t=a(t),e=a(e),0<t&&0<e)&&i/(t*e)},wq:function(t,e,i){return e.zTa?e.zTa(i):new t.Console("ASEJS","media|asejs",e.prefix?e.prefix+" "+i:i)},VWb:function(t){return t.length?"{"+t+"} ":""},IWb:function(t,e,i){return{min:t.min*i+(1-i)*e.min,max:t.max*i+(1-i)*e.max,Py:t.Py*i+(1-i)*e.Py,scale:t.scale*i+(1-i)*e.scale,gamma:t.gamma*i+(1-i)*e.gamma}},tanh:Math.tanh||function(t){var e=Math.exp(+t);return t=Math.exp(-t),1/0==e?1:1/0==t?-1:(e-t)/(e+t)},mwa:f,vq:function(t){var e=t.Pa.gb.O.id;return{Z:t.Z,duration:t.duration,offset:t.offset,fa:t.fa,bitrate:t.bitrate,profile:t.profile,ad:t.ad,xa:e,Oa:t.Oa,Md:t.Md,location:t.location,mi:t.mi,ek:t.ek,Rw:{gb:{O:{id:e}}}}}}},function(t,e,i){var n;_esm(e),t=i(223),n=i(146),e.bfb=n,n=i(370),e.YR=n,n=i(374),e.isb=n,e.j1=t.xq.Ua.sidx,t=i(794),e.dr=t.dr,t=i(231),e.ar=t.ar,t=i(798),e.cr=t.cr,e.bA=t.bA,t=i(799),e.WJ=t.WJ,t=i(84),e.ko=t.ko,i=i(800),e.Pj=i.Pj},function(t,e,i){var n,r,s,a,u,o,c,h,f,l,p,d,b;function m(t,e,i,n,r,a,o){return e=b.call(this,e,i)||this,f.AJ.xb(e,t,n,r,a,o),l.mv.xb(e,t,n),e.Ikb=t.url||n.url,e.efa=n.responseType,e.Hkb=n.Q$,void 0===e.efa&&(e.efa=u.pc&&!u.pc.wY.SR?0:1),e.Gi=new s,e.Gi.on(e,u.Le.OGa,e.Jga),e.Gi.on(e,u.Le.NGa,e.cob),e.Gi.on(e,u.Le.PGa,e.fob),e.Gi.on(e,u.Le.CR,e.Iga),e.Gi.on(e,u.Le.bF,e.RS),e.uK=!1,e.$e=!1,e.bm=!1,e.qo=!1,e.AS=!1,e.bpb=n.vI,e.ks=0,e}_esm(e),e.v_=e.Ij=void 0,t=(n=i(2)).__importDefault(i(17)),r=n.__importStar(i(10)),s=t.default.Wh,a=n.__importDefault(i(6)),u=a.default.$q,o=i(170),c=n.__importDefault(i(144)),h=i(9),t=i(42),f=i(234),l=i(173),(d=p=e.Ij||(e.Ij={}))[d.Vhb=0]="NOTHING_APPENDED",d[d.qib=1]="PARTIAL",d[d.xx=2]="COMPLETE",d[d.Mf=3]="ERROR",b=u,n.__extends(m,b),Object.defineProperties(m.prototype,{active:{get:function(){return this.$e},enumerable:!1,configurable:!0}}),Object.defineProperties(m.prototype,{wua:{get:function(){return this.bm},enumerable:!1,configurable:!0}}),Object.defineProperties(m.prototype,{complete:{get:function(){return!this.uK&&5===this.readyState},enumerable:!1,configurable:!0}}),Object.defineProperties(m.prototype,{aborted:{get:function(){return this.uK},enumerable:!1,configurable:!0}}),Object.defineProperties(m.prototype,{Hpa:{get:function(){return this.qo&&!this.AS},enumerable:!1,configurable:!0}}),m.prototype.xb=function(t){f.AJ.prototype.xb.call(this,t),this.fg||!this.Oe.Jha&&this.ad||(this.fg=c.default.instance(),this.active&&(this.fg.SO(a.default.time.ea(),this.sY),this.bm&&(a.default.time.ea(),this.connect&&0<this.ps.length&&this.fg.zy(this.ps[0]))))},m.prototype.iu=function(){return this.ef||1!==this.responseType?5===this.readyState:3<=this.readyState},m.prototype.eG=function(t,e,i,n){return this.ef=t.appendBuffer(this.response,n||h.vq(this)),{status:this.ef?p.xx:p.Mf}},m.prototype.oO=function(){return(this.qo=u.prototype.open.call(this,this.Ikb,{start:this.offset,end:this.offset+this.fa-1},this.efa,{},void 0,void 0,this.Hkb))&&this.jV(this),this.qo},m.prototype.abort=function(){var t;return this.aborted||(t=this.$e,this.fg&&t&&this.fg.rY(a.default.time.ea(),this.bm,{requestId:this.Z1(),ki:this.Md,type:this.mediaType}),this.uK=!0,this.bm=this.$e=!1,u.prototype.abort.call(this),this.MM(this,t,this.Hpa)),!0},m.prototype.ed=function(){7!==this.readyState&&5!==this.readyState&&(this.H.warn("AseMediaRequest: in-progress request should be aborted before cleanup",this.toString()),this.abort()),this.Gi&&this.Gi.clear(),b.prototype.ed.call(this)},m.prototype.Jga=function(){var t=this.rf||this.loadTime;o.ux.instance().push(a.default.time.ea()-t),this.$e||(this.$e=!0,this.ku=this.track.ku(),this.stream.I.l2a||this.fg&&this.fg.SO(t,{requestId:this.Z1(),ki:this.Md,type:this.mediaType}),this.NM(this),this.Hu=this.rf)},m.prototype.cob=function(){var t=this.rf||this.nma,e=this.connect,i=this.ps;o.ux.instance().push(a.default.time.ea()-t),this.$e||(this.$e=!0),this.bm||(this.bm=!0,this.stream.I.l2a&&this.fg&&this.fg.SO(t,{requestId:this.Z1(),ki:this.Md,type:this.mediaType}),e&&0<i.length&&this.fg&&this.fg.zy(i[0]),this.MC(this),this.Hu=t)},m.prototype.fob=function(){var e=this,t=this.rf,i=this.bytesReceived-this.ks;o.ux.instance().push(a.default.time.ea()-t),this.bm||(this.bm=!0),this.fg&&(void 0===this.Hu||this.fg.Wv(i,this.Hu,t,this.sY),this.ps&&this.ps.length&&this.ps.forEach(function(t){e.fg.xy(t)})),this.TG(this),this.Hu=t,this.ks=this.bytesReceived},m.prototype.Iga=function(){var e=this,t=this.rf,i=this.bytesReceived-this.ks;o.ux.instance().push(a.default.time.ea()-t),this.fg&&(0<i&&this.fg.Wv(i,this.Hu,t,this.sY),this.ps&&this.ps.length&&this.ps.forEach(function(t){e.fg.xy(t)}),this.fg.rY(t,this.bm,this.sY)),this.bm=this.$e=!1,this.AS=!0,this.Ut(this),this.Hu=t,this.ks=this.bytesReceived,this.ed()},m.prototype.Z1=function(){var t=(t=this.stream)?t.toString():this.url,e=this.J3;return e&&(t+=",range "+e.start+"-"+e.end),t},Object.defineProperties(m.prototype,{sY:{get:function(){return{requestId:this.Z1(),ki:this.Md,type:this.mediaType,vI:this.bpb}},enumerable:!1,configurable:!0}}),m.prototype.RS=function(){var t,e,i,n;this.H.warn("AseMediaRequest._onError:",this.toString()),t=this.rf,e=this.status,i=this.ph,n=this.uj,o.ux.instance().push(a.default.time.ea()-t),this.complete?this.H.warn("Error on a done request "+this.toString()+", failurecode: "+i):this.aborted?this.H.warn("Error on an aborted request "+this.toString()+", failurecode: "+i):r.Ba(i)?(this.fg&&this.Oe&&this.Oe.Tua&&this.loadTime&&void 0===e&&this.fg.Wv(this.ks?this.bytesReceived-this.ks:this.bytesReceived,this.Hu||this.loadTime,t,this.sY),this.y5(this)):this.H.warn("ignoring undefined request error (nativecode: "+n+")")},i=m,e.v_=i,t.xf(f.AJ,i,!1),t.xf(l.mv,i,!1)},function(t,h,e){var c,i,s,f;function l(t,e,i){var n,r,a;if(e=c.__assign({},null===(r=null==t?void 0:t.context)||void 0===r?void 0:r.call(t,{j4a:e,xr:i})),null!=t&&t.xr&&i)if(!0===t.xr)e.args=i;else{r={},e.args=r;try{for(var o=c.__values(t.xr),s=o.next();!s.done;s=o.next())r[a=s.value]=i[a]}catch(t){var u={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(u)throw u.error}}}return e}function n(t){this.tq=[],this.h2=!1,this.ega={},this.I=c.__assign({xD:10},t),Object.defineProperties(t.wu,{ffa:{enumerable:!1,value:this,configurable:!0}})}_esm(h),h.IB=h.ioa=h.bc=void 0,c=e(2),i=e(20),s=c.__importDefault(e(6)),f=e(9),h.bc=function(c){return function(t,s,e){var u=e.value;e.value=function(){var t,e,i,n,r,a=h.ioa(this);a&&(e=l(c,this,arguments),i=null!==(t=null==c?void 0:c.methodName)&&void 0!==t?t:String(s),n=a.xT(i,e,null==c?void 0:c.pm,null==c?void 0:c.O$b)),t=null==a?void 0:a.Bka,a&&(a.Bka=n);try{return r=null==u?void 0:u.apply(this,arguments)}catch(t){var o=t;throw t}finally{a&&(a.Bka=t),n&&(n.data||(n.data={}),o?n.data.error=""+o:f.p0a(r)?r.then(function(t){n&&null!=c&&c.return&&(n.data.resolve=t)},function(t){n&&(n.data.reject=""+t)}):null!=c&&c.return&&(n.data.lRet=r))}}}},h.ioa=function(t){if(null!=t&&t.ffa)return t.ffa},Object.defineProperties(n.prototype,{source:{get:function(){return this.I.source},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{enabled:{get:function(){return!this.h2},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{zLb:{get:function(){return c.__spread(this.tq)},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{WIb:{get:function(){return this.ega},enumerable:!1,configurable:!0}}),n.prototype.wy=function(t){var e;this.h2||(e=null===(e=h.ioa(this.I.wu))||void 0===e?void 0:e.Bka)&&(e.data=c.__assign(c.__assign({},e.data),t))},n.prototype.xT=function(t,e,i,n){var r,a,o;if(!this.h2)return a=!1,o=null===(o=(r=this.I).Sha)||void 0===o?void 0:o.call(r,this.I.wu),r=l({},this.I.wu),e=c.__assign(c.__assign(c.__assign({},o),r),e),e={methodName:t,data:(o=0<Object.keys(e).length)?e:void 0,time:s.default.time.ea()},n&&this.ega[t]++,i&&this.tq.length&&((i=this.tq[this.tq.length-1]).methodName===t&&(i.data=i.data||{},i.data.dedup=i.data.dedup||{hitCount:1},i.data.dedup.hitCount++,i.data.dedup.lJournal=e,a=!0)),this.Gvb(e),a||this.tq.push(e),this.tq.length>this.I.xD&&this.tq.shift(),e},n.prototype.Gvb=function(t){var e;i.ga&&null!==(e=this.I.console)&&void 0!==e&&e.trace(this.I.source+"::"+t.methodName,t.data),"object"==typeof __ASE_DEVTOOLS_EXTENSION__&&__ASE_DEVTOOLS_EXTENSION__.register(this.I,t)},n.prototype.Nb=function(){Object.defineProperties(this.I.wu,{ffa:{enumerable:!1,value:null,configurable:!0}}),this.h2=!0,this.clear()},n.prototype.clear=function(){this.tq=[],this.ega={}},h.IB=n},function(t,e){_esm(e),e.RE="ManifestFetcherSymbol"},function(t,e){_esm(e),e.sF="VideoPreparerSymbol"},function(t,e){_esm(e),e.hK=e.jF=void 0,(t=e.jF||(e.jF={})).v5b="ident",t.bda="main",t.Zza="credits",e.hK="PlaygraphHelperSymbol"},function(t,e){_esm(e),e.EBa="DrmServicesSymbol",e.X_="DrmServicesProviderSymbol"},function(t,e){_esm(e),e.zJ="ApiInfoSymbol"},function(t,e){_esm(e),e.default=function t(e,i){var n;e.__proto__&&e.__proto__!==Object.prototype&&t(e.__proto__,i),Object.getOwnPropertyNames(e).forEach(function(t){void 0!==(n=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,n)})}},function(t,e,i){var u,c,n,h;function r(t){this.tK=t,this.vg=[],this.console=new n.default.Console("ASEJS_DOWNLOAD_TRACK_POOL","media|asejs")}_esm(e),e.lp=void 0,u=i(2),c=u.__importDefault(i(28)),n=u.__importDefault(i(6)),h=i(805),Object.defineProperties(r,{instance:{get:function(){var t;return void 0===r.WK&&(t=i(6).default,r.WK=new r(t.JJ)),r.WK},enumerable:!1,configurable:!0}}),r.reset=function(){r.WK=void 0},r.prototype.Ht=function(t,e,i,n,r,a){var o,s,u=!1,c=a.pYb?this.gDb(i,e,t,a.qYb):-1;return-1===c?(o={track:this.Txb(i,n,t,r,a),yj:i,J:e,x6a:t,GO:[],Co:!1,pM:!1},this.vg.push(o),s=function(){o.Co=!0,o.track.removeListener("created",s)},o.track.on("created",s),u=!1):(u=!0,o=this.vg[c]),t=new h.UJa(this.console,o.track,o.Co,u),o.GO.push(t),t},r.prototype.oM=function(e){var t,i;e.Yp(),-1!==(t=this.p5(function(t){return t.track===e.track}))?1===(t=this.vg[t]).GO.length?(t.track.Yp(),t.pM=!0):0<=(i=t.GO.indexOf(e))&&t.GO.splice(i,1):e.track.Yp()},r.prototype.og=function(){this.tK.og()},r.prototype.Txb=function(t,e,i,n,r){var a,o=this,s=!1;return t=t?1===i?(t=!1,e=1,r.zq?(t=!0,e=r.RN):r.Fw&&2<r.Fw&&(t=!0,e=r.Fw),{type:this.tK.Mb,openRange:!t,pipeline:t,connections:e,socketBufferSize:r.UP,minRequestSize:r.YN}):0===i?(s=r.zq&&(r.Q1b||e&&r.R1b),{type:this.tK.Wb,openRange:!s,pipeline:s,connections:1,socketBufferSize:r.s3,minRequestSize:r.YN}):{type:r.kAb?this.tK.Mb:this.tK.Pfb,openRange:!1,pipeline:!0,connections:1,socketBufferSize:r.Doa,minRequestSize:r.YN}:{type:0===i?c.default.Ta.Wb:c.default.Ta.Mb,openRange:!1,pipeline:!1,connections:1,socketBufferSize:0===i?r.s3:r.UP,minRequestSize:r.YN},(a=new this.tK(t,n)).on("transportreport",function(t){var e=o.p5(function(t){return t.track===a});-1===e||(e=o.vg[e]).GO.length&&e.GO[0].emit("transportreport",t)}),a.on("destroyed",function(){var t=o.p5(function(t){return t.track===a});-1!==t&&o.vg.splice(t,1),a.removeAllListeners()}),(s&&r.P1b||r.tbb)&&a.on("pipelinedisabled",function(){r.tbb&&1===a.config.type?a.c$(u.__assign(u.__assign({},a.config),{socketBufferSize:r.SOb,pipeline:!1,openRange:!0,connections:1})):a.c$(u.__assign(u.__assign({},a.config),{pipeline:!1,openRange:!0}))}),a},r.prototype.gDb=function(e,i,n,r){return this.p5(function(t){return!t.pM&&(!r&&t.track.config.wbc||!e?!t.yj&&t.x6a===n:t.yj&&t.J===i&&t.x6a===n)})},r.prototype.p5=function(t){for(var e=0;e<this.vg.length;++e)if(t(this.vg[e]))return e;return-1},e.lp=r},function(t,e,i){(function(r,a){function o(t,e,i,n){this.console=new t("ASEJS_PROGRESS","media|asejs"),this.now=e,this.E8a=this.fZb=t=this.now(),this.Y4=t+i,this.jSb=i,this.OTa=t+n,this.debug=!1,this.counter=this.eA=0,this.gw=1e4,this.Q$a=i/100,this.S$a=t,this.R$a=+this.Q$a/4,this.iaa=0,this.uU="",this.Dg(t,"progress tracking start")}(o.prototype.constructor=o).prototype.Dg=function(t,e){var i,n=((t-this.E8a)/1e3).toFixed(3);n="     ".slice(n.length-4)+n,i=r.uOb(),this.console.info(n+(" "+((this.OTa-t)/1e3).toFixed(3))+" "+Math.round(this.gw)+" M:("+Math.floor(i.M$b/1024/1024)+" MB/"+Math.floor(i.SZa/1024/1024)+" MB) "+this.uU+e)},o.prototype.ppb=function(t){var e=this.now();this.uU=t&&t+": ",this.eA=0,this.E8a=e,this.Dg(e,"starting")},o.prototype.Npb=function(t){var e,i;if(this.counter++,!(this.counter<this.gw)){if(this.counter=0,i=(e=this.now())-(this.S$a+this.Q$a),this.S$a=e,this.iaa=.9*this.iaa+.1*i,this.iaa>this.R$a?(this.gw*=.875,this.gw=Math.max(1,this.gw)):this.iaa<-this.R$a&&(this.gw*=1.5,this.gw=Math.min(this.gw,1e5)),e>=this.OTa)throw this.Dg("Execution deadline exceeded after "+(e-this.fZb)+" ms"+this.uU),Error("Execution deadline exceeded"+this.uU);if(i=r.uOb(),this.eA=Math.max(this.eA,i.SZa),7516192768<i.SZa)throw Error("Heap total limit exceeded"+this.uU);if(!(e<=this.Y4)){for(;e>this.Y4;)this.Y4+=this.jSb;this.Dg(e,t)}}},o.xb=function(t,e,i,n){a.UD=new o(t,e,i||5e3,n||33e5)},o.Tva=function(t){a.UD&&a.UD.ppb(t)},o.update=function(t){a.UD&&a.UD.Npb(t)},o.nYa=function(){if(a.UD)return a.UD.eA},o.now=function(){return(a.UD||Date).now()},t.exports=o}).call(this,i(248),i(194))},function(t){var i={bW:function(t){for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e])}};t.exports=i},function(t,e,i){var n,r;function a(t){return t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t)}function o(t){return n.Se(t)}function s(t){return n.Ba(t)}function u(t){return!a(t)&&!o(t)&&!s(t)&&!Array.isArray(t)&&n.Jh(t)}n=i(10),r={BE:0,f1:1,$hb:2,L0:3,Vl:4},t.exports={joa:function(t){return a(t)?r.BE:o(t)?r.f1:s(t)?r.$hb:u(t)?r.L0:r.Vl},j7:a,Se:o,Ba:s,Jh:u,Zq:r}},function(t,i,e){_esm(i),i.yu=i.u8=i.U2a=void 0,t=e(962),e=e(965),i.U2a=t,i.u8=function(t,e){return i.U2a(function(t,e){return void 0!==e?e:t},t,e)},i.yu=e},function(t,e,i){var n=i(178);t.exports=function(i){return function t(e){return 0===arguments.length||n(e)?t:i.apply(this,arguments)}}},function(t,e){_esm(e),e.p1=void 0,e.vp={gK:"PRIMARY",fba:"ASSISTIVE",Sza:"COMMENTARY",NONE:"NONE"},e.p1={assistive:e.vp.fba,closedcaptions:e.vp.fba,directorscommentary:e.vp.Sza,commentary:e.vp.Sza,subtitles:e.vp.gK,primary:e.vp.gK,none:e.vp.NONE}},function(t,e){_esm(e),e.Ik=void 0,(t=e.Ik||(e.Ik={})).Co="created",t.ex="started",t.EP="succeeded",t.Pt="failed",t.Eh="cancelled",t.Ztb="cancelled_on_start",t.nja="cancelled_not_encrypted"},function(t,e){_esm(e),e.tv=void 0,(t=e.tv||(e.tv={}))[t.G3b=8]="Backspace",t[t.h8b=9]="Tab",t[t.R4b=13]="Enter",t[t.$7b=16]="Shift",t[t.d4b=17]="Ctrl",t[t.j3b=18]="Alt",t[t.o7b=19]="PauseBreak",t[t.X3b=20]="CapsLock",t[t.T4b=27]="Escape",t[t.b8b=32]="Space",t[t.n7b=33]="PageUp",t[t.m7b=34]="PageDown",t[t.Q4b=35]="End",t[t.u5b=36]="Home",t[t.L5b=37]="LeftArrow",t[t.o8b=38]="UpArrow",t[t.v7b=39]="RightArrow",t[t.x4b=40]="DownArrow",t[t.I5b=45]="Insert",t[t.u4b=46]="Delete",t[t.x8b=48]="Zero",t[t.R6b=49]="One",t[t.k8b=50]="Two",t[t.i8b=51]="Three",t[t.m5b=52]="Four",t[t.k5b=53]="Five",t[t.a8b=54]="Six",t[t.Z7b=55]="Seven",t[t.P4b=56]="Eight",t[t.C6b=57]="Nine",t[t.a3b=65]="A",t[t.k3b=66]="B",t[t.N3b=67]="C",t[t.ceb=68]="D",t[t.E=69]="E",t[t.U4b=70]="F",t[t.n5b=71]="G",t[t.q5b=72]="H",t[t.$fb=73]="I",t[t.J5b=74]="J",t[t.Oca=75]="K",t[t.ehb=76]="L",t[t.P5b=77]="M",t[t.Qhb=78]="N",t[t.P6b=79]="O",t[t.T6b=80]="P",t[t.Q=81]="Q",t[t.s7b=82]="R",t[t.S=83]="S",t[t.jkb=84]="T",t[t.l8b=85]="U",t[t.p8b=86]="V",t[t.r8b=87]="W",t[t.dfa=88]="X",t[t.v8b=89]="Y",t[t.w8b=90]="Z",t[t.M5b=91]="LeftWindowKey",t[t.w7b=92]="RightWindowKey",t[t.X7b=93]="SelectKey",t[t.F6b=96]="Numpad0",t[t.G6b=97]="Numpad1",t[t.H6b=98]="Numpad2",t[t.I6b=99]="Numpad3",t[t.J6b=100]="Numpad4",t[t.K6b=101]="Numpad5",t[t.L6b=102]="Numpad6",t[t.M6b=103]="Numpad7",t[t.N6b=104]="Numpad8",t[t.O6b=105]="Numpad9",t[t.b6b=106]="Multiply",t[t.i3b=107]="Add",t[t.c8b=109]="Subtract",t[t.t4b=110]="DecimalPoint",t[t.w4b=111]="Divide",t[t.V4b=112]="F1",t[t.Z4b=113]="F2",t[t.$4b=114]="F3",t[t.a5b=115]="F4",t[t.b5b=116]="F5",t[t.c5b=117]="F6",t[t.d5b=118]="F7",t[t.e5b=119]="F8",t[t.f5b=120]="F9",t[t.W4b=121]="F10",t[t.X4b=122]="F11",t[t.Y4b=123]="F12",t[t.E6b=144]="NumLock",t[t.V7b=145]="ScrollLock",t[t.Y7b=186]="SemiColon",t[t.S4b=187]="Equals",t[t.$3b=188]="Comma",t[t.s4b=189]="Dash",t[t.p7b=190]="Period",t[t.l5b=191]="ForwardSlash",t[t.j8b=192]="Tilde",t[t.S6b=219]="OpenBracket",t[t.F3b=220]="BackSlash",t[t.Z3b=221]="CloseBracket",t[t.r7b=222]="Quote"},function(t,e){function i(){}_esm(e),e.ln=e.Icb=void 0,e.Icb=i,e.ln=new i},function(t,e,i){var n;function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function a(t){return function t(e,i){var n;return void 0===i&&(i=[]),n=r(e.Lg),i.push(n),null!==e.rA?t(e.rA,i):i}(t).reverse().join(" --\x3e ")}function o(t){var e;return t.name||((e=(t=t.toString()).match(/^function\s*([^\s(]+)/))?e[1]:"Anonymous function: "+t)}_esm(e),n=i(55),e.gN=r,e.q1a=function(t,e,i){var n="";return 0!==(t=i(t,e)).length&&(n="\nRegistered bindings:",t.forEach(function(t){var e="Object";null!==t.wm&&(e=o(t.wm)),n=n+"\n "+e,t.uG.W2a&&(n=n+" - "+t.uG.W2a)})),n},e.Lub=function e(t){t.Bja.forEach(function(t){if(function t(e,i){return null!==e.rA&&(e.rA.Lg===i||t(e.rA,i))}(t,t.Lg))throw t=a(t),Error(n.Fdb+" "+t);e(t)})},e.mMb=function(t,e){var i,n;return e.Rpa()||e.Epa()?(i="",n=e.qGb(),e=e.bFb(),null!==n&&(i+=n.toString()+"\n"),null!==e&&e.forEach(function(t){i+=t.toString()+"\n"})," "+t+"\n "+t+" - "+i):" "+t},e.getFunctionName=o},function(t,e,i){var n,r,a;_esm(e),e.UM=e.TM=e.VM=e.E0a=e.kW=void 0,n=i(4),r=i(109),a=i(44),e.kW=function(t,e,i,n){var r=t.wRb,a=t.xRb;return t=t.yRb,e<r||r===e&&i<a||r===e&&a===i&&(void 0===n||n<=t)},e.E0a=function(t,e){return t.Pp>=e},e.VM=function(){return{version:"6.0033.414.911",L8:!0,PM:!0,bla:"browser",aUa:["en-US"],Hqa:"",BU:"cadmium",eya:!0,g3:!0,jY:!1}},e.TM=function(){return{oC:[a.ze.GE,a.ze.HE],gv:[a.N.QJ,a.N.FE,a.N.LQ,a.N.MQ,a.N.qK,a.N.rK],xm:r.Hb.hMa,dA:n.Nc(31e3)}},e.UM=function(t){return{a0:t.Fo}}},function(t,e){_esm(e),e.GBa=e.bo=void 0,(t=e.bo||(e.bo={}))[t.RD=0]="playready",t[t.Xaa=1]="widevine",t[t.PG=2]="fairplay",t[t.w9b=3]="clearkey",e.GBa="DrmTypeSymbol"},function(t,e){_esm(e),e.uR="MediaKeysStorageFactorySymbol"},function(t,e){_esm(e),e.m1=e.pp=void 0,e.pp=function(){},e.m1="StringObjectReaderSymbol"},function(t,e){_esm(e),e.XKa="SystemRandomSymbol",e.b1="RandomGeneratorSymbol"},function(t,e){_esm(e),e.LR="PlayerErrorFactorySymbol"},function(t,e,i){var n,r;function a(t){this.H=new n.default.Console("ASEJS","media|asejs","("+t+")"),this.Aga=[]}_esm(e),e.Qm=void 0,n=i(2).__importDefault(i(6)),r=i(115),a.prototype.kq=function(t){return this.Aga[t]||(this.Aga[t]=r.wq(n.default,this.H,"["+t+"]")),this.Aga[t]},e.Qm=new a(0)},function(t,e,i){function n(t,e){this.wL=t,this.bk=Math.floor((t+e-1)/e),this.Hd=e,this.reset()}i(5),n.prototype.shift=function(){this.Od.shift(),this.Uv.shift()},n.prototype.Pw=function(t){return this.GRa(this.Od[t],t)},n.prototype.update=function(t,e){this.Od[t]=(this.Od[t]||0)+e},n.prototype.push=function(){this.Od.push(0),this.Uv.push(0),this.tb+=this.Hd},n.prototype.add=function(t,e,i){var n,r,a;if(null===this.tb)for(n=Math.max(Math.floor((i-e+this.Hd-1)/this.Hd),1),this.tb=e;this.Od.length<n;)this.push();for(;this.tb<=i;)this.push(),this.Od.length>this.bk&&this.shift();if((null===this.jo||e<this.jo)&&(this.jo=e),e>this.tb-this.Hd)this.update(this.Od.length-1,t);else if(e==i)0<=(n=this.Od.length-Math.max(Math.ceil((this.tb-i)/this.Hd),1))&&this.update(n,t);else for(n=1;n<=this.Od.length;++n)if(a=(r=this.tb-n*this.Hd)+this.Hd,!(i<r)){if(a<e)break;this.update(this.Od.length-n,Math.round(t*(Math.min(a,i)-Math.max(r,e))/(i-e)))}for(;this.Od.length>this.bk;)this.shift()},n.prototype.start=function(t){null===this.jo&&(this.jo=t),null===this.tb&&(this.tb=t)},n.prototype.stop=function(t){var e,i;if(null!==this.tb)if(t-this.tb>10*this.wL)this.reset();else{for(;this.tb<=t;)this.push(),this.Od.length>this.bk&&this.shift();if(e=this.Od.length-Math.ceil((this.tb-this.jo)/this.Hd),0<=(i=this.Od.length-Math.ceil((this.tb-t)/this.Hd)))if(e<0&&(this.jo=this.tb-this.Hd*this.Od.length,e=0),e===i)this.Uv[e]+=t-this.jo;else if(e<i)for(this.Uv[e]+=(this.tb-this.jo)%this.Hd,this.Uv[i]+=this.Hd-(this.tb-t)%this.Hd,t=e+1;t<i;++t)this.Uv[t]=this.Hd;this.jo=null}},n.prototype.GRa=function(t,e){return 0===(e=this.Nma(e))?null:8*t/e},n.prototype.Nma=function(t){var e=this.Uv[t];return null!==this.jo&&((t=this.tb-(this.Od.length-t-1)*this.Hd)>this.jo&&(e=t-this.jo<=this.Hd?e+(t-this.jo):this.Hd)),e},n.prototype.get=function(t,e){var i,n=this.Od.map(this.GRa,this);if("last"===t)for(t=0;t<n.length;++t)null===n[t]&&(n[t]=0<t?n[t-1]:0);else if("average"===t)for(e=1-Math.pow(.5,1/((e||2e3)/this.Hd)),t=0;t<n.length;++t)null===n[t]?n[t]=Math.floor(i||0):i=void 0!==i?e*n[t]+(1-e)*i:n[t];return n},n.prototype.reset=function(){this.gga||(this.Od=[],this.Uv=[],this.jo=this.tb=null)},n.prototype.setInterval=function(t){this.bk=Math.floor((t+this.Hd-1)/this.Hd)},t.exports=n},function(t,e,i){var s,u,c,r,h,a,o,f,l,p;function d(t){var e;t.qha||(e=t.kZa(),t.no.cG(e.default.Ga,t.Sj),t.no.qJ(e.hu?e.hu.A9:void 0,e.hu?e.hu.sampleSize:void 0),s.Bb(t.Tc)||(t.qha=!0))}function n(t,e,i){var n;this.I=i,this.Hp={},this.OK=i.OK,this.aNa=new r(this.OK),this.yS=new a(!0),this.cS=new a(!1),this.nob=i.t9,this.Hmb=i.vJb,this.Imb=i.wJb,i.lVa&&(this.iL=new o(this.I)),i.S4&&(this.QB=new f(i.ora)),this.reset(),this.cOa=t,this.no=e,this.ENa=u.Uo.name(),this.no.K$(this.ENa),this.uF=0,this.dS=[],u.events.on("networkchange",function(t){this.ENa=t,this.no.K$(t)}.bind(this)),(n=i.Jka)&&(n={confidence:c.Nf.RJ,Ra:{Ga:parseInt(n,10),aj:0},Aj:{usb:0,aj:0},gu:{usb:0,aj:0}},this.get=function(){return n}),p=this}s=i(10),u=i(6).default,c=i(28).default,i(9),e=i(17).EventEmitter,r=i(361).ECa,h=new u.Console("ASEJS_NETWORK_MONITOR","media|asejs"),a=i(763).hCa,o=i(765).nHa,f=i(766).mEa,l=i(143),p=void 0,(n.prototype.constructor=n).prototype=Object.create(e.prototype),n.instance=function(){return p},n.reset=function(){p&&p.reset()},Object.defineProperties(n.prototype,{startTime:{get:function(){return this.Af}},confidence:{get:function(){return this.Sj}},Jp:{get:function(){return this.uF}},tPa:{get:function(){return this.dS}}}),n.prototype.Glb=function(){var t=this.I,e=t.Wlb.concat(t.emb),i=t.Ufa,n=this.aNa;return e.reduce(function(t,e){return t[e]=n.create(e,i),t},{})},n.prototype.reset=function(){var t,e=this.I.Ufa,i=this.aNa,n=this.I;this.location=null,this.Hp=this.Glb(),this.I.oVa&&(t=this.I.K$a,this.Hp.F_b=new l(t.numB*t.bSizeMs,t.bSizeMs)),this.yS.reset(),this.cS.reset(),this.qy=i.create("respconn-ewma",e),this.iy=i.create("respconn-ewma",e),this.iL&&this.iL.reset(),this.QB&&this.QB.reset(),this.Sj=c.Nf.HAVE_NOTHING,this.Opb=function(){d(this)}.bind(this),this.W2=void 0,this.RB=this.Qc=this.Tc=this.Af=null,this.KB=this.Q2=0,this.Aob=!1,n.G7a&&(this.uF=0,this.dS=[])},n.prototype.lP=function(t){var e=this.Hp;if(t!==this.location){if(s.ia(this.W2)||(clearInterval(this.W2),this.W2=void 0),s.Bb(this.location)&&(this.Q2=0,this.Af=null),!s.Bb(t)){for(var i in this.Sj=c.Nf.HAVE_NOTHING,e)e[i]&&e[i].reset&&e[i].reset();this.qy.reset(),this.iy.reset()}s.Bb(this.Af)||(this.Q2+=(s.Bb(this.Tc)?u.time.ea():this.Tc)-this.Af),this.Tc=this.Af=null,this.Qc=0,this.location=t,this.no.lP(t)}},n.prototype.K$=function(t){this.no.K$(t)},n.prototype.uqb=function(t){this.Hp.QoEEvaluator?h.warn("monitor (QoEEvaluator) already existed."):this.Hp.QoEEvaluator=t},n.prototype.tVb=function(){delete this.Hp.QoEEvaluator},n.prototype.Wv=function(t,e,i,n){var r,a;if(this.X0a=Math.max(this.X0a||0,i),r=this.I,a=this.Hp,!0===n.aQ)(n=a["throughput-wssl"])&&n.add(t,e,i,!0);else if(s.ia(e))h.warn("addDataReceived called with undefined start time");else{if(this.iL&&this.iL.Wv(t,e,i,n),n.vI)if(this.Hmb){if(n.vI.m2a(t,e,i,this.nob))return}else if(this.Imb&&n.vI.v7())return;for(var o in r.dmb&&i-e<10?e=i-10:0==i-e&&(e=i-1),this.QB&&this.QB.Wv(t,e,i),this.yS.Wv(t,e,i,n),this.cS.Wv(t,e,i,n),a)a[o]&&a[o].add&&a[o].add(t,e,i);this.Sj=Math.max(this.Sj,c.Nf.pB),s.Bb(this.Af)&&(this.Af=e,this.Tc=null,this.qha=!1,this.Qc=0),s.Bb(this.Tc)||(e>this.Tc&&(this.Af+=e-this.Tc),this.Tc=null,this.qha=!1),this.Qc+=t,this.Sj<c.Nf.Dx&&(i-this.Af>r.qnb||this.Qc>r.pnb)&&(this.Sj=c.Nf.Dx),this.Sj<c.Nf.RJ&&(i-this.Af>r.Dob||this.Qc>r.Cob)&&(!this.Aob||this.KB>r.onb)&&(this.Sj=c.Nf.RJ,d(this),this.W2=setInterval(this.Opb,r.$mb)),s.Bb(this.RB)||(e-this.RB>r.dOa?this.cOa.U_a(this.RB,e):i-e>r.dOa&&this.cOa.U_a(e,i)),this.RB=Math.max(i,this.RB)}},n.prototype.zy=function(t){this.qy.add(t),this.no.zy(t)},n.prototype.xy=function(t){this.iy.add(t),this.no.xy(t)},n.prototype.start=function(t){var e;if(s.Bb(this.RB)&&!s.Bb(this.Tc)&&(this.RB=t),e=this.Hp,this.I.Bwa)for(var i in e)e[i]&&e[i].start&&e[i].start(t)},n.prototype.stop=function(t){var e,i=this.Hp;for(e in i)i[e]&&i[e].stop&&i[e].stop(t);this.Tc=s.Bb(this.Tc)?t:Math.min(this.Tc,t),this.RB=null},n.prototype.flush=function(){var t,e=this.Hp;for(t in e)e[t]&&e[t].flush&&e[t].flush()},n.prototype.fail=function(){this.Af=null},n.prototype.MXa=function(){var t,e=this.Hp.entropy;return e&&(t=e.utb(),e.reset()),t},n.prototype.kZa=function(){var t,e=u.time.ea(),i={},n=this.Hp,r=this.I,a=r.Llb,o=r.kpb;for(t in n)n[t]&&n[t].get&&(i[t]=n[t].get(e),"iqr"===n[t].type&&(i.hu=i[t]),"tdigest"===n[t].type&&(i.Dk=i[t]),"wssl"===n[t].type&&(i.aQ=i[t]));return i.cdnavtp=this.yS.Zt(),i.activecdnavtp=this.cS.Zt(),i.default=a&&i[a]?i[a]:i["throughput-ewma"],"none"!==r.zva&&"none"!==o&&(i.l8a=o&&i[o]?i[o]:i["throughput-sw"]),i},n.prototype.i6=function(){return this.iL?this.iL.i6():void 0},n.prototype.Z5=function(){return this.QB?this.QB.Z5():void 0},n.prototype.get=function(){var t,e=this.kZa(),i=e.default,n=this.qy.get(),r=this.iy.get(),a=this.I;return e.l8a&&(t=e.l8a,i=s.Ba(i.Ga)&&s.Ba(t.Ga)&&i.Ga>t.Ga&&0<t.Ga?t:i),e.confidence=this.Sj,e.Ra=i,!a.Bla||!i||s.Bb(i.Ga)||isNaN(i.Ga)||!e.aQ||s.Bb(e.aQ.Ga)||isNaN(e.aQ.Ga)||("max"===a.acb?e.Ra.Ga=Math.max(e.aQ.Ga,i.Ga):"sum"===a.acb&&(e.Ra.Ga+=e.aQ.Ga)),e.Aj=n,e.gu=r,this.I.oVa&&(i=this.I.K$a,e.Ncc=this.Hp.F_b.get(i.fillS,i.fillHl)),i=this.Q2+!s.Bb(this.Af)?(s.Bb(this.Tc)?u.time.ea():this.Tc)-this.Af:0,e.time=i,e},n.prototype.DHb=function(){var t,e={},i=this.get(!0);return i.confidence&&i.Ra&&(e.aseavtp=Number(i.Ra.Ga).toFixed(2),e.asevartp=Number(i.Ra.aj).toFixed(2),i.hu&&(!(t=i.hu.A9)||isNaN(t.Kl)||isNaN(t.Jl)||isNaN(t.uk)||(e.aseniqr=0<t.uk?Number((t.Kl-t.Jl)/t.uk).toFixed(2):-1,e.aseiqr=Number(t.Kl-t.Jl).toFixed(2),e.asemedtp=Number(t.uk).toFixed(2)),e.iqrsamples=i.hu.sampleSize),i.Dk&&i.Dk.wz&&(e.tdigest=i.Dk.wz())),e},n.prototype.SO=function(t,e){var i=e.requestId;1==++this.uF&&(this.emit("active",t),this.start(t)),i&&this.dS.push(i),this.yS.SO(t,e),this.cS.SO(t,e)},n.prototype.rY=function(t,e,i){e=i.requestId,--this.uF,this.I.G7a&&(this.uF=Math.max(this.uF,0)),0===this.uF&&(this.stop(t),this.emit("inactive",t)),!e||0<=(e=this.dS.indexOf(e))&&this.dS.splice(e,1),this.yS.rY(t,i),this.cS.rY(t,i),this.QB&&this.QB.LJb(i.type)},t.exports=n},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),i=i(2),r=Error,i.__extends(a,r),n=a,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t){var e,i;function n(){var t;if(DataView.prototype&&DataView.prototype.$t&&!i){try{t=new ArrayBuffer(4),new DataView(t).nq(0,4,1)}catch(t){return}try{t=new ArrayBuffer(4),new DataView(t).nq(1,2,2)}catch(t){DataView.prototype.nq=r(DataView.prototype.nq,DataView.prototype.getUint8,Uint8Array),DataView.prototype.zz=r(DataView.prototype.zz,DataView.prototype.getUint16,Uint16Array),DataView.prototype.$t=r(DataView.prototype.$t,DataView.prototype.getUint32,Uint32Array),DataView.prototype.$G=r(DataView.prototype.$G,DataView.prototype.getInt8,Int8Array),DataView.prototype.YG=r(DataView.prototype.YG,DataView.prototype.getInt16,Int16Array),DataView.prototype.ZG=r(DataView.prototype.ZG,DataView.prototype.getInt32,Int32Array)}e.moa=function(t,e,i,n,r){return i?t.nq(e,i,n||1,r):new Uint8Array(0)},e.koa=function(t,e,i,n,r){return i?t.zz(e,i,n||2,r):new Uint16Array(0)},e.loa=function(t,e,i,n,r){return i?t.$t(e,i,n||4,r):new Uint32Array(0)},e.RFb=function(t,e,i,n,r){return i?t.$G(e,i,n||1,r):new Int8Array(0)},e.PFb=function(t,e,i,n,r){return i?t.YG(e,i,n||2,r):new Int16Array(0)},e.QFb=function(t,e,i,n,r){return i?t.ZG(e,i,n||4,r):new Int32Array(0)},i=!0}}function r(a,o,s){return function(t,e,i,n){var r;return t+e*(i=i||s.BYTES_PER_ELEMENT)>this.byteLength?((r=new s(e)).set(a.call(this,t,e-1,i,n)),r[e-1]=o.call(this,t+(e-+i),n),r):a.call(this,t,e,i,n)}}i=!(e={nq:function(t,e,i,n,r){var a=new Uint8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint8(e,r);return a},zz:function(t,e,i,n,r){var a=new Uint16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint16(e,r);return a},$t:function(t,e,i,n,r){var a=new Uint32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint32(e,r);return a},$G:function(t,e,i,n,r){var a=new Int8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt8(e,r);return a},YG:function(t,e,i,n,r){var a=new Int16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt16(e,r);return a},ZG:function(t,e,i,n,r){var a=new Int32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt32(e,r);return a},uCb:n}),e.fna=function(){return i},n(),t.exports=e},function(t,e,i){var n,r;function a(t,e,i){this.tag=t,this.view=e,this.u=i,this.startOffset=i.offset}_esm(e),n=i(2),r=i(226),a.bY=function(t,e){var i=t.mb(),n=t.pua();return(t=new(r.Xp[i]||a)(i,t.cna(n),t)).parse(e),t},Object.defineProperties(a.prototype,{length:{get:function(){return this.view.byteLength},enumerable:!0,configurable:!0}}),a.prototype.parse=function(){return this.u.offset=this.startOffset+this.length,!(this.u.Hn=0)},a.prototype.aV=function(t){var e=[];if(this.tag===t&&e.push(this),this.Xp)for(var i=0;i<this.Xp.length;i++)e=n.__spreadArrays(e,this.Xp[i].aV(t));return e},a.prototype.Cl=function(t){if(t=this.aV(t),0<t.length)return t[0]},a.prototype.aT=function(){for(this.Xp=[];this.u.offset<this.startOffset+this.length;)this.Xp.push(a.bY(this.u,this))},t=a,(e.CE=t).prototype.skip=t.prototype.parse},function(t,e,i){var n,r,a,o;function s(t,e){this.type=t,this.timestamp=e}function u(){}_esm(e),e.Jk=e.Dea=void 0,n=i(22),(i=r=e.Dea||(e.Dea={}))[i.absolute=0]="absolute",i[i.Z6a=1]="relative",s.prototype.toString=function(){return"timeStamp: "+this.timestamp+", type: "+r[this.type]},Object.defineProperties(s,{Gb:{get:function(){return a=a||new s(r.Z6a,n.T.Gb)},enumerable:!1,configurable:!0}}),o=s,u.XP=function(t){return new o(r.absolute,t)},Object.defineProperties(u,{F2b:{get:function(){return o.Gb},enumerable:!1,configurable:!0}}),u.tJ=function(t){return new o(r.Z6a,t)},u.mya=new o(r.absolute,n.T.fD),e.Jk=u},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function p(t){return!(!t||"function"!=typeof t.Fh)}function d(t){return!(!p(t)||"boolean"!==(t=typeof t.EKb)&&"undefined"!==t)}function b(t){var e=this;this.Emb=t,this.IS=!1,this.Gob=function(t){return e.TTb(t)},this.gTa()}function m(t){var e=h.call(this,function(){return e.sGb()})||this;return e.Cy=t,e.index=0,e}function g(t,e,i){var n=f.call(this,function(){return n.$ra()})||this;return n.console=e,n.tl=i,n.Xta=!1,Array.isArray(t)?n.SS=new s(t):n.SS=t,n}function v(t,e,i){var n=l.call(this,function(){return n.rmb()})||this;return n.source=t,n.bra=e,n.zvb=i,n}_esm(e),e.flatten=e.map=e.beb=e.wCb=e.DKb=e.Gcb=e.AsyncIterator=void 0,n=i(2),r=i(20),b.wLb=function(i,n){!function e(){var t=i.next();t.then(function(t){d(i)&&i.EKb||n(t)}),t.then(function(t){return!t.done&&e()})}()},Object.defineProperties(b.prototype,{Pz:{get:function(){return this.IS},enumerable:!1,configurable:!0}}),b.KXa=function(){return new s([])},b.boa=function(){return a=a||Promise.resolve({done:!0})},Object.defineProperties(b.prototype,{wN:{get:function(){return this.Xl||!1},enumerable:!1,configurable:!0}}),b.prototype.Fh=function(){this.cancel()},b.prototype.cancel=function(){return this.qOa(),this.Xl=!0,this.tfa},b.prototype.next=function(){return this.Xl?this.tfa:Promise.race([this.tfa,this.Emb()]).then(this.Gob)},b.prototype.TTb=function(t){return t.done&&(this.IS=!0,this.Fh()),this.wN||(this.qOa(),this.gTa()),t},b.prototype.gTa=function(){var e=this;this.tfa=new Promise(function(t){e.qOa=function(){t({done:!0})}})},o=b,e.AsyncIterator=o,h=o,n.__extends(m,h),m.prototype.Fh=function(){p(this.Cy)&&this.Cy.Fh(),h.prototype.Fh.call(this)},m.prototype.sGb=function(){return this.Cy.length>this.index?Promise.resolve({value:this.Cy[this.index++],done:!1}):Promise.resolve({done:!0})},s=m,e.Gcb=s,e.DKb=p,e.wCb=d,f=o,n.__extends(g,f),g.prototype.VTb=function(t){var e;return this.Xta=!1,e=this.console,r.ga&&e&&e.trace("CompoundIterator: processNextOuterIterator"),t.done?t:(t=t.value,this.YK?(p(t)&&t.Fh(),o.boa()):(Array.isArray(t)?this.tl=new s(t):this.tl=t,this.$ra()))},g.prototype.UTb=function(t){var e=this.console;return r.ga&&e&&e.trace("CompoundIterator: processNextInnerResult",this.YK,t.done),!t.done||this.YK?t:(this.tl=void 0,this.$ra())},g.prototype.Fh=function(){var t=this.console;r.ga&&t&&t.trace("CompoundIterator: dispose"),this.YK=!0,f.prototype.Fh.call(this),p(this.SS)&&this.SS.Fh(),p(this.tl)&&this.tl.Fh()},g.prototype.toString=function(){return"CompoundIterator "+this.YK+" "+this.SS+" "+this.tl},g.prototype.$ra=function(){var e=this,t=this.console;return r.ga&&t&&t.trace("CompoundIterator: nextImpl"),this.tl?(r.ga&&t&&t.trace("CompoundIterator: getNextInner"),this.tl.next().then(function(t){return e.UTb(t)})):(this.Xta=!0,r.ga&&t&&t.trace("CompoundIterator: getNextOuter"),this.SS.next().then(function(t){return e.VTb(t)}))},u=g,e.beb=u,e.map=function(t,e,i){return new c(t,e,i)},l=o,n.__extends(v,l),v.prototype.Fh=function(){p(this.source)&&this.source.Fh(),l.prototype.Fh.call(this)},v.prototype.rmb=function(){var t=this.zvb,e=this.bra,i=this.source;return r.ga&&t&&t.trace("MappedIterator: Requesting next"),i.next().then(function(t){return t.done?t:e(t.value)})},c=v,e.flatten=function(t,e,i){return new u(t,e,i)}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),i=i(23),r=Error,i.__extends(a,r),n=a,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t){var e,i;function n(){var t;if(DataView.prototype&&DataView.prototype.$t&&!i){try{t=new ArrayBuffer(4),new DataView(t).nq(0,4,1)}catch(t){return}try{t=new ArrayBuffer(4),new DataView(t).nq(1,2,2)}catch(t){DataView.prototype.nq=r(DataView.prototype.nq,DataView.prototype.getUint8,Uint8Array),DataView.prototype.zz=r(DataView.prototype.zz,DataView.prototype.getUint16,Uint16Array),DataView.prototype.$t=r(DataView.prototype.$t,DataView.prototype.getUint32,Uint32Array),DataView.prototype.$G=r(DataView.prototype.$G,DataView.prototype.getInt8,Int8Array),DataView.prototype.YG=r(DataView.prototype.YG,DataView.prototype.getInt16,Int16Array),DataView.prototype.ZG=r(DataView.prototype.ZG,DataView.prototype.getInt32,Int32Array)}e.moa=function(t,e,i,n,r){return i?t.nq(e,i,n||1,r):new Uint8Array(0)},e.koa=function(t,e,i,n,r){return i?t.zz(e,i,n||2,r):new Uint16Array(0)},e.loa=function(t,e,i,n,r){return i?t.$t(e,i,n||4,r):new Uint32Array(0)},e.RFb=function(t,e,i,n,r){return i?t.$G(e,i,n||1,r):new Int8Array(0)},e.PFb=function(t,e,i,n,r){return i?t.YG(e,i,n||2,r):new Int16Array(0)},e.QFb=function(t,e,i,n,r){return i?t.ZG(e,i,n||4,r):new Int32Array(0)},i=!0}}function r(a,o,s){return function(t,e,i,n){var r;return t+e*(i=i||s.BYTES_PER_ELEMENT)>this.byteLength?((r=new s(e)).set(a.call(this,t,e-1,i,n)),r[e-1]=o.call(this,t+(e-+i),n),r):a.call(this,t,e,i,n)}}i=!(e={nq:function(t,e,i,n,r){var a=new Uint8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint8(e,r);return a},zz:function(t,e,i,n,r){var a=new Uint16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint16(e,r);return a},$t:function(t,e,i,n,r){var a=new Uint32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getUint32(e,r);return a},$G:function(t,e,i,n,r){var a=new Int8Array(i);n=n||1;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt8(e,r);return a},YG:function(t,e,i,n,r){var a=new Int16Array(i);n=n||2;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt16(e,r);return a},ZG:function(t,e,i,n,r){var a=new Int32Array(i);n=n||4;for(var o=0;o<i;++o,e+=n)a[o]=t.getInt32(e,r);return a},uCb:n}),e.fna=function(){return i},n(),t.exports=e},function(t,e,i){var n,r;function a(t,e,i){this.tag=t,this.view=e,this.u=i,this.startOffset=i.offset}_esm(e),n=i(23),r=i(266),a.bY=function(t,e){var i=t.mb(),n=t.pua();return(t=new(r.Xp[i]||a)(i,t.cna(n),t)).parse(e),t},Object.defineProperties(a.prototype,{length:{get:function(){return this.view.byteLength},enumerable:!0,configurable:!0}}),a.prototype.parse=function(){return this.u.offset=this.startOffset+this.length,!(this.u.Hn=0)},a.prototype.aV=function(t){var e=[];if(this.tag===t&&e.push(this),this.Xp)for(var i=0;i<this.Xp.length;i++)e=n.__spreadArrays(e,this.Xp[i].aV(t));return e},a.prototype.Cl=function(t){if(t=this.aV(t),0<t.length)return t[0]},a.prototype.aT=function(){for(this.Xp=[];this.u.offset<this.startOffset+this.length;)this.Xp.push(a.bY(this.u,this))},t=a,(e.CE=t).prototype.skip=t.prototype.parse},function(t,e){_esm(e),e.$Ha="PboPlaydataServicesSymbol",e.IR="PboPlaydataServicesProviderSymbol"},function(t,e,i){var n;_esm(e),e.IJ=e.cfb=void 0,n=i(26),e.cfb=function(){this.oC=[],this.gv=[],this.qia=n.nv.qv,this.Paa=n.gj.qv},e.IJ="DeviceCapabilitiesConfigSymbol"},function(t,e){_esm(e),e.TR="SourceBufferTypeProviderSymbol"},function(t,e){_esm(e),e.yR="MslProviderSymbol"},function(t,e){_esm(e),e.tR="ManifestFactorySymbol"},function(t,n,e){var r,a;_esm(n),n.pNb=n.g5a=n.NRb=n.wXa=n.VRb=n.uE=n.Zaa=n.Ms=n.cQ=n.bQ=n.Fk=void 0,r=e(24),a=e(21),n.Fk="$attributes",n.bQ="$children",n.cQ="$name",n.Ms="$text",n.Zaa="$parent",n.uE="$sibling",n.VRb=/^\s*<\?xml.*\?>/i,n.wXa=function(t,e,i){for(var n=2;n<arguments.length;++n);for(n=1;(e=arguments[n++])&&(t=t[e]););return t},n.NRb=function(t,e){var i;return t?i=r.He(t[n.Ms]):void 0!==e&&(i=e),a.tU(i),i},n.g5a=function(t,e){var i;return t?i=t[n.Ms]:void 0!==e&&(i=e),a.PTa(i),i},n.pNb=function(t,e){var i={};return i[n.Fk]=t,i[n.Ms]=e,i}},function(t){function n(t,e){return t.some(function(t){return t.id===e})}function r(t,e){return t.filter(function(t,e){return t.id===e.id&&t.displayTime+t.duration===e.displayTime}.bind(null,e)).map(i).reduce(a,0)}function i(t){return t.duration}function a(t,e){return t+e}t.exports={ovb:function(t,e,i){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return i.error("indexId mismatch in sidx",{sIndexId:t,mIndexId:e}),!1;return!0},ska:function(t,e,i){var n={};return n.displayTime=t.displayTime,n.duration=t.duration,n.originX=t.nRb,n.originY=t.oRb,n.sizeX=t.RYb,n.sizeY=t.SYb,n.imageData=e,n.id=t.lH,n.rootContainerExtentX=i.rWb,n.rootContainerExtentY=i.sWb,n},hna:function(t,e){return"o_"+t+"s_"+e},g2b:function(t,e){e("P"===String.fromCharCode(t[1])),e("N"===String.fromCharCode(t[2])),e("G"===String.fromCharCode(t[3]))},Xc:function(t){return void 0!==t},ecc:n,V9b:r,wV:function(t,e){var i,n=Object.create({});for(i in t)n[i]=t[i];return t instanceof Error&&(n.message=t.message,n.stack=t.stack),n.errorString=e,n},assert:function(t,e){if(!t)throw e&&e.error(Error("Assertion Failed").stack),Error("Assertion Failed")},i_a:function(t){return t&&0<t.entries.length&&0===t.images.length},QZb:function(t,e){for(var i,n=e.entries.length,r=0;r<n;r++)if((i=e.entries[r]).displayTime<=t&&i.displayTime+i.duration>=t)return!0;return!1},RZb:function(t,e,i){for(var n,r,a=i.entries.length,o=0;o<a&&(n=(r=(n=i.entries[o]).displayTime)+n.duration,!(e<r));o++)if(r<=t&&t<=n||t<r&&r<=e)return!0;return!1},PSa:function(i){return i.map(function(t,e){return t.duration+=r(i.slice(e+1),t),t}).reduce(function(t,e){return n(t,e.id)||t.push(e),t},[])},Vna:function(t){return t.reduce(function(t,e){return t+e.entries.reduce(function(t,e){return e.Uoa+t},0)},0)},BAb:function(t,e){return t&&t.Xw<=e&&t.Eq>=e},zFb:function(t){if(t)return t.endTime},$Fb:function(t){try{return String.fromCharCode.apply(String,t)}catch(t){}return""}}},function(t,e,i){var n,r;function a(t){switch(t){case n.L.dR:return"http";case n.L.fR:return"connectiontimeout";case n.L.IE:return"readtimeout";case n.L.nDa:return"corruptcontent";case n.L.qB:return"abort";case n.L.gR:case n.L.Bca:return"unknown"}}_esm(e),e.Pna=e.Ena=e.Bna=void 0,n=i(3),r=i(11),e.Bna=a,e.Ena=function(t,e){return t={errorcode:t+(e.errorCode||n.M.Vl)},e.na&&(t.errorsubcode=e.na),e.pf&&(t.errorextcode=e.pf),e.Kla&&(t.erroredgecode=e.Kla),e.ub&&(t.errordetails=e.ub),e.ik&&(t.httperr=e.ik),e.O8&&(t.aseneterr=e.O8),e.DM&&(t.errordata=e.DM),e.OW&&(t.mediaerrormessage=e.OW),(e=a(Number(e.na)))&&(t.nwerr=e),t},e.Pna=function(){return{screensize:r.yv.width+"x"+r.yv.height,screenavailsize:r.yv.availWidth+"x"+r.yv.availHeight,clientsize:pt.innerWidth+"x"+pt.innerHeight,devicePixelRatio:r.BGa}}},function(t,e){_esm(e),e.hF="PlaygraphConfigSymbol"},function(t,e,i){var n,r,a;function o(t,e,i,n){return(e=a.Di.call(this,t,e,n,r.fj.events,r.fj.events+"/"+i)||this).context=t,e.kCb=i,e}_esm(e),e.Vq=void 0,t=i(1),n=i(0),r=i(68),a=i(75),i(187),T(o,a.Di),o.prototype.og=function(t,e){var i=this,n=this.G3(e);return this.send(t,e.href,n).then(function(){return e}).catch(function(t){throw i.Bn(t)})},o.prototype.gq=function(t,e,i){var n=this,r=this.G3(i);return this.send(t,e.zV("events").href,r).then(function(t){return e.EPa(t.result.links),i}).catch(function(t){throw n.Bn(t)})},o.prototype.G3=function(t){return{event:this.kCb,xid:t.ba,position:t.position||0,clientTime:t.aU,sessionStartTime:t.HY,videoTrackId:t.VP,audioTrackId:t.pn,timedTextTrackId:t.KP,mediaId:t.TN,trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,playTimes:this.ktb(t.GX),sessionParams:t.Jm,mdxControllerEsn:t.rra}},o.prototype.Zia=function(t){return{downloadableId:t.Bc,duration:t.duration}},o.prototype.ktb=function(t){var e={total:t.total,audio:t.audio.map(this.Zia),video:t.video.map(this.Zia),text:t.text.map(this.Zia)};return t.total!==t.gJ&&(e.totalContentTime=t.gJ),e},i=o,i=t.__decorate([n.R(),t.__param(0,n.nl()),t.__param(1,n.nl()),t.__param(2,n.nl()),t.__param(3,n.nl())],i),e.Vq=i},function(t,e,i){var n,a,o,s,u,c,r,h,f,l,p,d,b,m,g,v,y;function w(t){var e,r=this;this.F9=new y.fea,this.createPlaygraphPlayer=function(t,e,i){var n;return t=b.pjb.encode(t),n=s.ka.get(m.tR),i=i?n.create(i):void 0,(n=s.ka.get(l.iea).create(t)).uyb(t.Yd,r.F9.ara(r.SQa(e,n.Q5())),i)},this.closeAllPlayers=function(t){o.aea(void 0===t?function(){}:t)},this.init=function(e){e=void 0===e?function(){}:e,r.mC.LN(function(t){t.$?(a.config.D$?r.hXb().then(function(){n.oIa()}).catch(function(t){s.log.error("Unable to initialize the playdata services",t)}):Promise.resolve()).then(function(){Object.assign(r,w.CT),e(Object.assign({success:!0},w.CT))}):e({success:!1,error:s.LIa(t.errorCode||c.M.Gca,t)})})},this.applyConfig=function(t){r.Sab(t),a.Xja(t)},this.prepare=function(t,e){var i;if(t=r.Y5a.Uzb(t)||[],i=new Set,t=t.filter(function(t){var e=i.has(t.J);return i.add(t.J),!e}),a.config.Sw&&r.Fd)try{r.Fd.iI(t,e)}catch(t){s.log.warn("Prepare call failed",t)}},this.ppmUpdate=function(t){pt._cad_global.playerPredictionModel?(t=r.Y5a.Wzb(t))&&pt._cad_global.playerPredictionModel.update(t):s.log.error("ppmUpdate called but there is no ppmModel")},this.supportsHdr=function(e){s.XM().fZ().then(function(t){return e(t.result)}).catch(function(){return e(!1)})},this.supportsUltraHd=function(t){s.XM().gZ().then(t).catch(function(){return t(!1)})},this.supportsDolbyAtmos=function(t){s.XM().dZ().then(t).catch(function(){return t(!1)})},this.supportsDolbyVision=function(e){s.XM().caa().then(function(t){return e(t.result)}).catch(function(){return e(!1)})},this.close=function(){},this.deviceThroughput=function(){var t=s.ka.get(h.K0).mka();return t?Promise.resolve(t.Zt()):Promise.resolve(void 0)},this.deviceThroughputNiqr=function(){var t=s.ka.get(h.K0).mka();return t?Promise.resolve(t.wGb()):Promise.resolve(void 0)},this.isSeamlessEnabled=function(){return a.config.LBb},this.Sab(t),s.ka.get(v.Jya),this.Y5a=s.ka.get(u.qIa),this.mC=s.ka.get(d.fh),e=s.ka.get(g.lIa).apply(),a.MSa([t],e),this.Fd=s.ka.get(p.sF),s.XM().gZ()}_esm(e),e.sK=void 0,n=i(297),a=i(14),o=i(58),s=i(8),u=i(508),c=i(3),r=i(37),h=i(284),f=i(153),l=i(303),p=i(120),d=i(31),b=i(67),m=i(157),g=i(315),v=i(486),y=i(551),w.prototype.SQa=function(t,e){var i=null!==(i=null===(i=(t=void 0===t?{}:t).playbackState)||void 0===i?void 0:i.currentTime)&&void 0!==i?i:e.Jb;return Object.assign(Object.assign({startPts:i,uiPlayStartTime:Date.now()},t),{endPts:null!==(e=e.Ob)&&void 0!==e?e:void 0,isPlaygraph:!0})},w.prototype.Sab=function(t){s.ka.get(r.iR).vOb(t)},w.prototype.hXb=function(){return s.ka.get(f.IR)().catch(function(t){throw s.log.error("Unable to initialize the playdata services",t),t}).then(function(t){return t.send(1/0)}).catch(function(t){s.log.error("Unable to send deferred playdata",t)})},(e.sK=w).CT={}},function(t,e){_esm(e),e.mB="BrowserInfoSymbol"},function(t,e){function n(t){this.buffer=t,this.position=0}_esm(e),n.prototype.seek=function(t){this.position=t},n.prototype.skip=function(t){this.position+=t},n.prototype.Mna=function(){return this.buffer.length-this.position},n.prototype.DA=function(){return this.buffer[this.position++]},n.prototype.Mh=function(t){var e=this.position;return this.position+=t,this.oLb(this.buffer)?this.buffer.subarray(e,this.position):this.buffer.slice(e,this.position)},n.prototype.oLb=function(t){return void 0!==t.subarray},n.prototype.Fq=function(t){for(var e=0;t--;)e=256*e+this.buffer[this.position++];return e},n.prototype.nua=function(t){for(var e="";t--;)e+=String.fromCharCode(this.buffer[this.position++]);return e},n.prototype.uh=function(){return this.Fq(2)},n.prototype.Gq=function(){return this.Fq(4)},n.prototype.IO=function(){return this.Fq(8)},n.prototype.Yw=function(t){for(var e,i="";t--;)i+="0123456789ABCDEF"[(e=this.DA())>>>4]+"0123456789ABCDEF"[15&e];return i},n.prototype.qua=function(t){for(var e=0,i=0;i<t;i++)e+=this.DA()<<(i<<3);return e},n.prototype.HO=function(){return this.qua(4)},n.prototype.d_=function(t){this.$P(t,2)},n.prototype.hB=function(t){this.$P(t,4)},n.prototype.Yaa=function(t){this.buffer[this.position++]=t},n.prototype.$P=function(t,e){this.position+=e;for(var i=1;i<=e;i++)this.buffer[this.position-i]=255&t,t=Math.floor(t/256)},n.prototype.gB=function(t){for(var e=0;e<t.length;e++)this.buffer[this.position++]=t.charCodeAt(e)},n.prototype.c_=function(t){for(var e=t.length,i=0;i<e;i++)this.buffer[this.position++]=t[i]},n.prototype.ZP=function(t,e){this.c_(t.Mh(e))},n.prototype.$bb=function(t){t=new n(t);for(var e,i;;){if(!(i=(e=t.Mna())>>>14)){e<128?this.Yaa(e):this.$P(32768|e,2),this.ZP(t,e);break}i=Math.min(4,i),this.Yaa(192|i),this.ZP(t,16384*i)}},n.prototype.C6a=function(){for(var t,e=[],i=new n(e);;){if(128&(t=this.DA())){if(128!=(192&t)){if(0<(t&=63)&&t<=4){i.ZP(this,16384*t);continue}throw Error("bad asn1")}t=((t&=63)<<8)+this.DA(),i.ZP(this,t)}else i.ZP(this,t);break}return new Uint8Array(e)},e.BQ=n},function(t,e){_esm(e),e.C_="CannedChallengeProvider"},function(t,e){_esm(e),e.MJa="ReportSyncSymbol",e.KJa="ReportApiErrorSyncSymbol",e.ICa="FtlProbeConfigSymbol",e.KCa="FtlProbeSymbol"},function(t,e){function a(t){var e={profile:t.spoofedProfile||t.profile,Gma:t.max_framerate_value,Fma:t.max_framerate_scale,maxWidth:t.maxWidth,maxHeight:t.maxHeight,qSb:t.pixelAspectX,rSb:t.pixelAspectY,channels:t.channels,sampleRate:t.channels?48e3:void 0};return t.spoofedProfile&&(e.xbc=t.profile),e}_esm(e),e.qYa=e.pYa=void 0,e.pYa=function(e,n,t){var r=[{},{}];return(0===t?["audio_tracks"]:["audio_tracks","video_tracks"]).forEach(function(t,i){e[t].some(function(t,e){return e===n[i]&&(r[i]=a(t),!0)})}),r},e.qYa=a},function(t,e){function n(i){return i&&"object"==typeof i?Array.isArray(i)?i.map(n):Object.keys(i).reduce(function(t,e){return t[e]=n(i[e]),t},{}):i}function i(t){t&&(this.JI(t.Yd),this.hwa(t.ae),this.bwa(t.qa))}_esm(e),i.prototype.JI=function(t){return this.Yd=t,this},i.prototype.hwa=function(t){return this.ae=t,this},i.prototype.T8a=function(t){return this.Bd=t,this},i.prototype.Nk=function(t,e){return this.qa||(this.qa={}),this.qa[t]=n(e),this},i.prototype.bwa=function(t,e){void 0===e&&(e=function(){return!0}),this.qa={},this.NPa(t,e)},i.prototype.NPa=function(e,i){var n=this;void 0===i&&(i=function(){return!0}),Object.keys(e).filter(function(t){return i(e[t])}).forEach(function(t){return n.Nk(t,e[t])})},i.prototype.FIb=function(t){var e;return!(null===(e=this.qa)||void 0===e||!e[t])},i.prototype.gi=function(){var t;if(!this.qa)throw Error("Invalid playgraph - `segments` is not defined");if(!this.Yd)throw Error("Invalid playgraph - `initialSegment` is not defined");if(!this.qa[this.Yd])throw Error("Invalid playgraph - `initialSegment` is not part of `segments`");return t={Yd:this.Yd,qa:this.qa},this.ae&&(t.ae=this.ae),this.Bd&&(t.Bd=this.Bd),t},e.AB=i},function(t,e,i){var n,r;function a(t){this.config=t,this.reset()}_esm(e),e.ux=void 0,n=i(219),r=i(5),a.instance=function(){return r.assert(void 0!==a.WK),a.WK},a.Evb=function(t){a.WK=new a(t)},a.prototype.push=function(t){this.Dk&&this.Dk.push(t)},a.prototype.wb=function(){if(this.Dk)return this.Dk.Ty(),this.Dk.wj([.25,.5,.75,.9,.95,.99]).map(function(t){return t?parseFloat(t.toFixed(1)):0})},a.prototype.reset=function(){this.config.nVa&&this.config.Nca&&(this.Dk=new n.d8b(this.config.Nca.c,this.config.Nca.maxc))},e.ux=a},function(i){!function(){for(var t=2;8!==t;)switch(t){case 2:e.prototype.start=function(t){for(var e=2;1!==e;)2===e&&(this.Af?t<this.Af?(this.YB+=this.Af-t,this.Af=t):t>this.tb&&(this.tb=this.Af=t):this.tb=this.Af=t,e=1)},e.prototype.stop=function(t){for(var e=2;1!==e;)2===e&&(this.tb&&t>this.tb&&(this.YB+=t-this.tb,this.tb=t),e=1)},t=5;break;case 5:e.prototype.add=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.start(e),this.stop(i),this.Qc+=t,n=4)},e.prototype.get=function(){return{Ga:this.YB?Math.floor(8*this.Qc/this.YB):null,GC:this.YB||0}},i.exports=e,t=8}function e(){for(var t=2;5!==t;)switch(t){case 1:this.tb=this.Af=void 0,t=5;break;case 3:this.YB=this.Qc=2,t=3;break;case 2:this.YB=this.Qc=0,t=1}}}()},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32),a=i(225).default,n.__extends(o,a),o.prototype.parse=function(t){return t=a.prototype.parse.call(this,t),this.u.offset+=8,this.sja=this.u.Yc(),this.qva=this.u.Yc(),this.u.offset+=4,this.samplerate=this.u.Yc(),this.u.offset+=2,r.ga&&this.u.console.trace("MP4AudioSampleEntry: channelcount: "+this.sja+", samplesize: "+this.qva+", samplerate: "+this.samplerate),t},o.Na=!1,e.default=o},function(t,e,i){function n(t,e){n.xb(this,t,e)}_esm(e),e.mv=void 0,i(5),n.xb=function(t,e,i){t.kd=e,t.Qc=i.fa,t.Ne=i.offset},Object.defineProperties(n.prototype,{stream:{get:function(){return this.kd},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{fa:{get:function(){return this.Qc},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{offset:{get:function(){return this.Ne},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{P:{get:function(){return this.kd.P},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{J:{get:function(){return this.kd.J},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{mediaType:{get:function(){return this.kd.mediaType},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{Oa:{get:function(){return this.kd.Oa},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{bitrate:{get:function(){return this.kd.bitrate},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{profile:{get:function(){return this.kd.profile},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{S:{get:function(){return this.kd.S},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{$N:{get:function(){return this.kd.$N},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{sa:{get:function(){return this.kd.sa},enumerable:!1,configurable:!0}}),n.prototype.toJSON=function(){return{movieId:this.J,streamId:this.Oa,offset:this.offset,bytes:this.fa}},e.mv=n},function(t,e,i){var n,r;function a(t,e){void 0===e&&(e=0),this.name=t,this.priority=e,this.$c=r.pending}_esm(e),e.Qea=e.Ym=void 0,n=i(148),(i=r=e.Ym||(e.Ym={}))[i.pending=0]="pending",i[i.s$=1]="running",i[i.complete=2]="complete",i[i.pM=3]="destroyed",Object.defineProperties(a.prototype,{state:{get:function(){return this.$c},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{tKb:{get:function(){return this.$c===r.pending||this.$c===r.s$},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Yf:{get:function(){return this.Tv},enumerable:!1,configurable:!0}}),a.prototype.Prb=function(t){var e;null!==(e=this.Tv)&&void 0!==e&&e.Mua(this),this.Tv=t},a.prototype.ax=function(){this.$c=r.s$,this.og(),this.W8()===n.Jk.mya&&(this.$c=r.complete)},a.prototype.Nb=function(){var t;this.$c=r.pM,null!==(t=this.Tv)&&void 0!==t&&t.Mua(this)},e.Qea=a},function(t,e,i){var n;_esm(e),t=i(842),n=i(391),i=i(844),e.default={STARTING:i.o8a,BUFFERING:t.A$,REBUFFERING:t.A$,PLAYING:n.bx,PAUSED:n.bx}},function(t,e,i){var n,r,a;_esm(e),e.eN=e.CJ=void 0,n=i(854),r=i(855),a=i(245),Object.defineProperties(e,{CJ:{enumerable:!0,get:function(){return a.CJ}}}),e.eN=function(t,e){return new("manifold"!==t.cra?r.zKa:n.NFa)(t,e)}},function(t,e,i){var o=i(130),s=i(59),u=i(178);t.exports=function(a){return function t(i,n,r){switch(arguments.length){case 0:return t;case 1:return u(i)?t:s(function(t,e){return a(i,t,e)});case 2:return u(i)&&u(n)?t:u(i)?s(function(t,e){return a(t,n,e)}):u(n)?s(function(t,e){return a(i,t,e)}):o(function(t){return a(i,n,t)});default:return u(i)&&u(n)&&u(r)?t:u(i)&&u(n)?s(function(t,e){return a(t,e,r)}):u(i)&&u(r)?s(function(t,e){return a(t,n,e)}):u(n)&&u(r)?s(function(t,e){return a(i,t,e)}):u(i)?o(function(t){return a(t,n,r)}):u(n)?o(function(t){return a(i,t,r)}):u(r)?o(function(t){return a(i,n,t)}):a(i,n,r)}}}},function(t){t.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33),a=i(265).default,n.__extends(o,a),o.prototype.parse=function(t){return t=a.prototype.parse.call(this,t),this.u.offset+=8,this.sja=this.u.Yc(),this.qva=this.u.Yc(),this.u.offset+=4,this.samplerate=this.u.Yc(),this.u.offset+=2,r.ga&&this.u.console.trace("MP4AudioSampleEntry: channelcount: "+this.sja+", samplesize: "+this.qva+", samplerate: "+this.samplerate),t},o.Na=!1,e.default=o},function(t,e){_esm(e),e.nR="LogblobBuilderFactorySymbol",e.Yca="LogblobBuilderCommonSymbol"},function(t,e,i){var a,n,o,s,r;function u(t,e,i,n){var r=o.wQ.call(this,t,e,a.Pj.VLa,n)||this;return r.config=t,r.sj=e,r.is=i,r.m8=n,r.type=a.gj.qv,r.XZ=s.Gd.DTa(),r}_esm(e),e.ao=void 0,a=i(26),n=i(44),o=i(448),t=i(111),s=i(110),r=i(440),new t.FB,T(u,o.wQ),u.prototype.fx=function(){return Promise.resolve(!1)},u.prototype.Wt=function(){return Promise.resolve("")},u.prototype.T5=function(){return Promise.resolve("")},u.prototype.fZ=function(){return this.config().zla?this.m8.ypa()?this.m8.mz(n.N.SJ).then(function(t){return{result:t,reason:"media-capabilities"}}):Promise.resolve({result:!1,reason:"non-hdr-display"}):Promise.resolve({result:!1,reason:"disabled"})},u.prototype.caa=function(){return this.config().zla?this.m8.ypa()?this.m8.mz(n.N.AQ).then(function(t){return{result:t,reason:"media-capabilities"}}):Promise.resolve({result:!1,reason:"non-hdr-display"}):Promise.resolve({result:!1,reason:"disabled"})},u.prototype.gZ=function(){return Promise.resolve(!1)},u.prototype.dZ=function(){return Promise.resolve(!1)},u.prototype.SM=function(t){return this.XZ[t]},u.prototype.Hha=function(){},u.prototype.d2a=function(t){switch(t){case a.Mj.NE:return"1.4";case a.Mj.uv:return"2.2"}},u.prototype.Up=function(){return r.eca.Up()},u.prototype.OYa=function(t){return t||this.config().gv},u.prototype.cN=function(){return Promise.resolve(void 0)},u.prototype.j6=function(){return Promise.resolve(void 0)},u.prototype.lU=function(t){var e=[];return this.is.Gg(t)&&e.push(this.d2a(t)),[{type:"DigitalVideoOutputDescriptor",outputType:"unknown",supportedHdcpVersions:e,isHdcpEngaged:!!e.length}]},(e.ao=u).PP="video/mp4; codecs={0};"},function(t,e){function i(){}_esm(e),e.Xe=void 0,(e.Xe=i).bDa=/^hevc-main/,i.UCa=/^hevc-hdr-|hevc-dv/,i.Ex=/^hevc-hdr-/,i.Qs=/^hevc-dv/,i.KQ=/-h264mpl/,i.QJ=/-h264mpl30/,i.FE=/-h264mpl31/,i.iB=/-h264hpl/,i.Xx=/^vp9-/,i.Hj=/^av1-/,i.pK=/-L5[0-1]-/,i.g_=/^heaac-2-/,i.gDa=/^heaac-2hq-dash/,i.tF=/^xheaac-dash/,i.eeb=/ddplus-2/,i.feb=/ddplus-5/,i.geb=/ddplus-atmos/},function(t,e){_esm(e),e.aib="NativeLocalStorageSymbol",e.CGa="NativeLocalStorageFactorySymbol",e.HDa="IDBFactorySymbol"},function(t,e){_esm(e),e.GDa="IDBDatabaseFactorySymbol",e.jEa="IndexedDBFactorySymbol",e.Kca="IndexedDBStorageFactorySymbol"},function(t,e,i){var n,r;_esm(e),e.CJa=e.e1=e.V5=void 0,n=i(47),r=i(3),e.V5=function(t){return t===n.Tb.ol.Wb?r.L.hda:r.L.ida},e.e1=50,e.CJa=1e3},function(t,e){_esm(e),t.exports=function(t){return{minInitVideoBitrate:t.Lw,minHCInitVideoBitrate:t.Kra,maxInitVideoBitrate:t.fA,minInitAudioBitrate:t.WW,maxInitAudioBitrate:t.HW,minHCInitAudioBitrate:t.VW,minAcceptableVideoBitrate:t.w8,minRequiredBuffer:t.XW,minPrebufSize:t.tj,minCheckBufferingCompleteInterval:t.z8,rebufferingFactor:t.vua,useMaxPrebufSize:t.Zxa,maxPrebufSize:t.wD,maxRebufSize:t.nra,maxBufferingTime:t.$r,minAudioMediaRequestSizeBytes:t.x8,minVideoMediaRequestSizeBytes:t.F8,initialBitrateSelectionCurve:t.Y6,initSelectionLowerBound:t.D_a,initSelectionUpperBound:t.E_a,throughputPercentForAudio:t.haa,bandwidthMargin:t.Eia,bandwidthMarginContinuous:t.Fia,bandwidthMarginCurve:t.Gia,conservBandwidthMargin:t.$ja,switchConfigBasedOnInSessionTput:t.$wa,conservBandwidthMarginTputThreshold:t.hU,conservBandwidthMarginCurve:t.aka,switchAlgoBasedOnHistIQR:t.w$a,switchConfigBasedOnThroughputHistory:t.kE,maxPlayerStateToSwitchConfig:t.mra,lowEndMarkingCriteria:t.Mqa,IQRThreshold:t.Ica,histIQRCalcToUse:t.Moa,maxTotalBufferLevelPerSession:t.ru,highWatermarkLevel:t.VZa,toStableThreshold:t.cab,toUnstableThreshold:t.naa,skipBitrateInUpswitch:t.swa,watermarkLevelForSkipStart:t.qya,highStreamRetentionWindow:t.Goa,lowStreamTransitionWindow:t.Nqa,highStreamRetentionWindowUp:t.Ioa,lowStreamTransitionWindowUp:t.Pqa,highStreamRetentionWindowDown:t.Hoa,lowStreamTransitionWindowDown:t.Oqa,highStreamInfeasibleBitrateFactor:t.Foa,lowestBufForUpswitch:t.Zz,lockPeriodAfterDownswitch:t.V7,lowWatermarkLevel:t.Rqa,lowestWaterMarkLevel:t.$z,lowestWaterMarkLevelBufferRelaxed:t.Sqa,mediaRate:t.xra,maxTrailingBufferLen:t.i8,audioBufferTargetAvailableSize:t.ET,videoBufferTargetAvailableSize:t.RZ,maxVideoTrailingBufferSize:t.I2a,maxAudioTrailingBufferSize:t.p2a,fastUpswitchFactor:t.l5,fastDownswitchFactor:t.Yla,maxMediaBufferAllowed:t.gA,simulatePartialBlocks:t.qwa,simulateBufferFull:t.u9a,considerConnectTime:t.bka,connectTimeMultiplier:t.Zja,lowGradeModeEnterThreshold:t.M1a,lowGradeModeExitThreshold:t.N1a,maxDomainFailureWaitDuration:t.s2a,maxAttemptsOnFailure:t.o2a,exhaustAllLocationsForFailure:t.LVa,maxNetworkErrorsDuringBuffering:t.y2a,maxBufferingTimeAllowedWithNetworkError:t.c8,fastDomainSelectionBwThreshold:t.TVa,throughputProbingEnterThreshold:t.I$a,throughputProbingExitThreshold:t.J$a,locationProbingTimeout:t.z1a,finalLocationSelectionBwThreshold:t.aWa,throughputHighConfidenceLevel:t.G$a,throughputLowConfidenceLevel:t.H$a,locationStatisticsUpdateInterval:t.zqa,enablePerfBasedLocationSwitch:t.mVa,probeServerWhenError:t.Ju,probeRequestTimeoutMilliseconds:t.Sta,allowSwitchback:t.Ay,probeDetailDenominator:t.mI,maxDelayToReportFailure:t.d8,countGapInBuffer:t.cTa,bufferThresholdForAbort:t.rRa,allowCallToStreamSelector:t.$Pa,pipelineScheduleTimeoutMs:t.nta,maxPartialBuffersAtBufferingStart:t.hA,maxActiveRequestsSABCell100:t.a8,maxStreamingSkew:t.pra,maxPendingBufferPercentage:t.kra,headerRequestSize:t.G6,estimateHeaderSize:t.Ola,minBufferLenForHeaderDownloading:t.TW,reserveForSkipbackBufferMs:t.XO,numExtraFragmentsAllowed:t.psa,pipelineEnabled:t.zq,maxParallelConnections:t.RN,socketReceiveBufferSize:t.D9a,audioSocketReceiveBufferSize:t.s3,videoSocketReceiveBufferSize:t.UP,headersSocketReceiveBufferSize:t.Doa,updatePtsIntervalMs:t.Faa,bufferTraceDenominator:t.Ria,bufferLevelNotifyIntervalMs:t.ML,aseReportDenominator:t.GL,aseReportIntervalMs:t.n3,enableAbortTesting:t.oBb,abortRequestFrequency:t.bqb,streamingStatusIntervalMs:t.Rwa,prebufferTimeLimit:t.vA,minBufferLevelForTrackSwitch:t.y8,penaltyFactorForLongConnectTime:t.fta,longConnectTimeThreshold:t.Kqa,additionalBufferingLongConnectTime:t.Qha,additionalBufferingPerFailure:t.Rha,rebufferCheckDuration:t.eY,enableLookaheadHints:t.jVa,lookaheadFragments:t.J1a,enableOCSideChannel:t.jz,OCSCBufferQuantizationConfig:t.M0,updateDrmRequestOnNetworkFailure:t.Pab,deferAseScheduling:t.dUa,maxDiffAudioVideoEndPtsMs:t.r2a,defaultHeaderCacheSize:t.y4,defaultHeaderCacheDataPrefetchMs:t.x4,neverWipeHeaderCache:t.RH,networkFailureResetWaitMs:t.Yra,networkFailureAbandonMs:t.Xra,maxThrottledNetworkFailures:t.h8,throttledNetworkFailureThresholdMs:t.gaa,lowThroughputThreshold:t.Qqa,excludeSessionWithoutHistoryFromLowThroughputThreshold:t.Sla,mp4ParsingInNative:t.s3a,sourceBufferInOrderAppend:t.F9a,requireAudioStreamToEncompassVideo:t.WD,allowAudioToStreamPastVideo:t.ZPa,enableManagerDebugTraces:t.ji,managerDebugMessageInterval:t.$1a,managerDebugMessageCount:t.Z1a,bufferThresholdToSwitchToSingleConnMs:t.Qia,bufferThresholdToSwitchToParallelConnMs:t.Pia,netIntrStoreWindow:t.oPb,minNetIntrDuration:t.MOb,fastHistoricBandwidthExpirationTime:t.GCb,bandwidthExpirationTime:t.ysb,failureExpirationTime:t.DCb,historyTimeOfDayGranularity:t.VIb,expandDownloadTime:t.qCb,minimumMeasurementTime:t.YOb,minimumMeasurementBytes:t.XOb,throughputMeasurementTimeout:t.C_b,initThroughputMeasureDataSize:t.VJb,throughputMeasureWindow:t.B_b,throughputIQRMeasureWindow:t.A_b,IQRBucketizerWindow:t.ahb,connectTimeHalflife:t.Fvb,responseTimeHalflife:t.jWb,historicBandwidthUpdateInterval:t.UIb,throughputWarmupTime:t.G_b,minimumBufferToStopProbing:t.WOb,throughputPredictor:t.D_b,ase_stream_selector:t.Erb,enableFilters:t.sBb,filterDefinitionOverrides:t.XCb,defaultFilter:t.vzb,secondaryFilter:t.PWb,defaultFilterDefinitions:t.wzb,initBitrateSelectorAlgorithm:t.gpa,bufferingSelectorAlgorithm:t.Wia,ase_ls_failure_simulation:t.RTa,ase_dump_fragments:t.Gka,ase_location_history:t.Ika,ase_throughput:t.Jka,ase_simulate_verbose:t.TTa,secondThroughputEstimator:t.zva,secondThroughputMeasureWindowInMs:t.k8a,marginPredictor:t.cra,networkMeasurementGranularity:t.Zra,HistoricalTDigestConfig:t.xDa,maxIQRSamples:t.v2a,minIQRSamples:t.g3a,periodicHistoryPersistMs:t.B9,saveVideoBitrateMs:t.t$,needMinimumNetworkConfidence:t.bX,biasTowardHistoricalThroughput:t.Jia,maxFastPlayBufferInMs:t.ira,maxFastPlayBitThreshold:t.hra,minAudioMediaRequestDuration:t.Kw,minVideoMediaRequestDuration:t.lA,minAudioMediaRequestDurationCache:t.Kw,minVideoMediaRequestDurationCache:t.lA,addHeaderDataToNetworkMonitor:t.Jha,hindsightDenominator:t.Loa,hindsightDebugDenominator:t.Koa,hindsightParam:t.K6,minimumTimeBeforeBranchDecision:t.BD,enableSessionHistoryReport:t.UU,earlyStageEstimatePeriod:t.ula,lateStageEstimatePeriod:t.i1a,maxNumSessionHistoryStored:t.f8,minSessionHistoryDuration:t.E8,appendMediaRequestOnComplete:t.pQa,waitForDrmToAppendMedia:t.Vaa,forceAppendHeadersAfterDrm:t.u5,startMonitorOnLoadStart:t.Bwa,reportFailedRequestsToNetworkMonitor:t.Tua,reappendRequestsOnSkip:t.BUb,maxActiveRequestsPerSession:t.Fw,limitAudioDiscountByMaxAudioBitrate:t.uqa,appendFirstHeaderOnComplete:t.$ha,maxAudioFragmentOverlapMs:0,editVideoFragments:t.eBb,declareBufferingCompleteAtSegmentEnd:t.Kka,applyProfileTimestampOffset:t.fG,applyProfileStreamingOffset:t.fm,requireDownloadDataAtBuffering:t.j$,requireSetupConnectionDuringBuffering:t.k$,recordFirstFragmentOnSubBranchCreate:t.yua,earlyAppendSingleChildBranch:t.P4,selectStartingVMAFMethod:t.cP,activateSelectStartingVMAF:t.uT,minStartingVideoVMAF:t.uu,minAcceptableVMAF:t.SW,minAllowedVmaf:t.KH,alwaysNotifyEOSForPlaygraph:t.qrb,enableNewAse:t.TU,useNewApi:t.Iaa,enableCombinedPlaygraphs:t.wla,enableDiscontiguousBuffering:t.R4,forceImmediateTransitionTypeForTitles:t.Ama,forceImmediateTransitionExitZone:t.zma,useBufferSizeLimiter:t.Wxa,enableHudsonFieldTest:t.wBb,hudsonTitles:t.jJb,maxPartialBuffersAtHudson:t.SNb,numberOfChunksPerSegment:t.dQb,targetContentLatency:t.o_b,targetLongContentLatency:t.p_b,minimumTimeDelay:t.ZOb,enableWsslEstimate:t.Bla,maxAllowedOutstandingRequests:t.b8,alwaysRunUnderflowTimer:t.BL,minStreamableConcurrencyWindow:t.Lra,streamableConcurrencyFactor:t.Nwa,bufferingConcurrencyWindow:t.VT,singleStreamablePerBranch:t.QYb,enableResolutionVMAFStreamFilter:t.U4,resolutionVMAFCappingRuleList:t.o$,percentCapTitlesForResolutionVMAFStreamFilter:t.hta,useExitZones:t.Xxa,perFragmentVMAFConfig:t.tA,enableInitialTputLogging:t.S4,maxResponsesInitialTput:t.ora}}},function(t,e){_esm(e),e.aca=void 0,(e.aca||(e.aca={})).gjb="PboDebugEvent",e.dBa={Jhb:"Manifest",Event:"Event",N5b:"Logblob"}},function(t,e){_esm(e),e.lR="LicenseProviderSymbol"},function(t,e){_esm(e),e.PJ=void 0,e.PJ=function(){return""}},function(t,e){_esm(e),e.fca=e.wBa=void 0,e.wBa=function(){this.Wb=0,this.Mb=1,this.Pfb=2,this.og=function(){}},e.fca="DownloadTrackConstructorFactorySymbol"},function(t,e){function i(){}_esm(e),e.wc=void 0,(e.wc=i).Le={OGa:"mr1",NGa:"mr2",PGa:"mr3",CR:"mr4",jib:"mr5",bF:"mr6"},i.Sc={UNSENT:0,OPENED:1,Tx:2,Sx:3,DONE:5,OJ:6,hQ:7,name:"UNSENT OPENED SENT RECEIVING DONE FAILED ABORTED".split(" ")},i.$_={NO_ERROR:-1,Jeb:0,UAa:1,Veb:2,Neb:3,Mdb:4,Xza:5,Vza:6,Ndb:7,Odb:8,Pdb:9,Jdb:10,Ldb:11,Wza:12,Kdb:13,Idb:14,Xfb:15,lDa:16,kDa:17,yca:18,Aca:19,zca:20,oDa:21,Zfb:22,r0:23,mDa:24,Yfb:25,Qeb:26,Keb:27,Rjb:28,Aeb:29,Beb:30,Ceb:31,Deb:32,Eeb:33,Feb:34,Geb:35,Heb:36,Ieb:37,Leb:38,Meb:39,Oeb:40,Peb:41,Reb:42,Seb:43,Teb:44,Ueb:45,Web:46,Xeb:47,Qjb:48,TIMEOUT:49,hDa:50,iDa:51,Wfb:52,name:"DNS_ERROR DNS_TIMEOUT DNS_QUERY_REFUSED DNS_NOT_FOUND CONNECTION_REFUSED CONNECTION_TIMEOUT CONNECTION_CLOSED CONNECTION_RESET CONNECTION_RESET_ON_CONNECT CONNECTION_RESET_WHILE_RECEIVING CONNECTION_NET_UNREACHABLE CONNECTION_NO_ROUTE_TO_HOST CONNECTION_NETWORK_DOWN CONNECTION_NO_ADDRESS CONNECTION_ERROR HTTP_CONNECTION_ERROR HTTP_CONNECTION_TIMEOUT HTTP_CONNECTION_STALL HTTP_PROTOCOL_ERROR HTTP_RESPONSE_4XX HTTP_RESPONSE_420 HTTP_RESPONSE_5XX HTTP_TOO_MANY_REDIRECTS HTTP_TRANSACTION_TIMEOUT HTTP_MESSAGE_LENGTH_ERROR HTTP_HEADER_LENGTH_ERROR DNS_NOT_SUPPORTED DNS_EXPIRED SSL_ERROR DNS_BAD_FAMILY DNS_BAD_FLAGS DNS_BAD_HINTS DNS_BAD_NAME DNS_BAD_STRING DNS_CANCELLED DNS_CHANNEL_DESTROYED DNS_CONNECTION_REFUSED DNS_EOF DNS_FILE DNS_FORMAT_ERROR DNS_NOT_IMPLEMENTED DNS_NOT_INITIALIZED DNS_NO_DATA DNS_NO_MEMORY DNS_NO_NAME DNS_QUERY_MALFORMED DNS_RESPONSE_MALFORMED DNS_SERVER_FAILURE SOCKET_ERROR TIMEOUT HTTPS_CONNECTION_ERROR HTTPS_CONNECTION_TIMEOUT HTTPS_CONNECTION_REDIRECT_TO_HTTP".split(" ")},i.pc={wY:{ncb:!0,SR:!1,Whb:!0}}},function(t,e){_esm(e),e.U0="PboPublisherSymbol"},function(t,a,e){var o,s,u,c,h,f,i,l,p;_esm(a),a.gk=void 0,o=e(12),s=e(14),t=e(3),u=e(21),c=e(8),h=e(479),f=e(11),i=e(31),l=e(34),(p=c.ka.get(i.fh)).register(t.M.Hca,function(e){var t,i,n,r=c.ka.get(l.Hk);u.hb(s.config),u.hb(f.wB&&f.wB.getDeviceId||f.F0||r.PM),t=c.ka.get(h.nBa),i=c.Oi("Device"),p.Dd("devs"),n=c.ka.get(l.yB),t.create({deviceId:s.config.deviceId,PM:r.PM,nUa:"deviceid",Vk:s.config.Vk,Fo:n.a0,BU:r.BU,userAgent:f.xB,Cqa:s.config.Cqa,ena:s.config.ena,cAb:n.Tba||!1,nsb:s.config.TQa.e,dbc:s.config.nw?"mslstoretest":"mslstore",rJ:s.config.rJ}).then(function(t){a.gk=t,pt._cad_global.device=a.gk,i.info("Esn source: "+a.gk.b5),p.Dd("devdone"),e(o.Ye)}).catch(function(t){t.$=void 0,e(t)})})},function(t){var e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof pt&&(e=pt)}t.exports=e},function(t,e){var i;function n(){}_esm(e),e.KE=void 0,i=/^\S+$/,n.prototype.EG=function(t){return void 0!==t},n.prototype.Gg=function(t){return null!=t},n.prototype.CL=function(t){return n.eQa(t)},n.prototype.xha=function(t){return!(!t||!n.eQa(t))},n.prototype.By=function(t){return Array.isArray(t)},n.prototype.fQa=function(t){return!(!t||t.constructor!=Uint8Array)},n.prototype.Ii=function(t,e,i){return n.pPa(t,e,i)},n.prototype.wha=function(t){return n.wha(t)},n.prototype.Yha=function(t,e,i){return n.h3(t,e,i)&&0==t%1},n.prototype.yT=function(t,e,i){return n.h3(t,e||0,i)},n.prototype.qT=function(t){return n.h3(t,1)},n.prototype.$pb=function(t){return n.h3(t,0,255)},n.prototype.aqb=function(t){return t===+t&&(0===t||t!==(0|t))&&!0},n.prototype.gQa=function(t){return!(!t||!i.test(t))},n.prototype.Ip=function(t){return n.qPa(t)},n.prototype.kn=function(t){return!(!n.qPa(t)||!t)},n.prototype.pT=function(t){return!0===t||!1===t},n.prototype.Y2=function(t){return"function"==typeof t},n.qPa=function(t){return"string"==typeof t},n.pPa=function(t,e,i){return"number"==typeof t&&!isNaN(t)&&isFinite(t)&&(void 0===e||e<=t)&&(void 0===i||t<=i)},n.wha=function(t){return"number"==typeof t&&isNaN(t)},n.h3=function(t,e,i){return n.pPa(t,e,i)&&0==t%1},n.eQa=function(t){return"object"==typeof t},e.KE=new n},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.cc=void 0,t=i(0),n=i(94),r=i(587),a=i(202),o=i(603),s=i(610),u=i(621),i=i(1253),e.cc=new t.G_({OI:!0}),u.s1a(e.cc),e.cc.load(r.platform),e.cc.load(o.config),a.vM.load(s.YUa),e.cc.load(i.lQa),e.cc.load(i.profile),e.cc.bind(n.nEa).$i(e.cc)},function(t,e,i){var n;function r(t){this.Ec=t}_esm(e),n=i(198),r.prototype.Mw=function(t){return this.Ec.Mw=t,new n.Hba(this.Ec)},e.y_=r},function(t,e,i){var n;function r(t){this.Ec=t}_esm(e),n=i(197),i(313),r.prototype.when=function(t){return this.Ec.uG=t,new n.y_(this.Ec)},r.prototype.$Z=function(){return this.Ec.uG=function(t){return null!==t.target&&!t.target.Epa()&&!t.target.Rpa()},new n.y_(this.Ec)},e.Hba=r},function(t,e){function i(){}_esm(e),e.sx=void 0,(e.sx=i).fjb="PSK",i.shb="MGK",i.uEa="JWEJS_RSA",i.x0="JWK_RSA"},function(t,e){_esm(e),e.Wda="PlatformEmeSymbol"},function(t,e){_esm(e),e.Mea="StringUtilsSymbol"},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p;_esm(e),e.vM=e.eme=void 0,t=i(0),n=i(122),r=i(316),a=i(203),o=i(204),s=i(598),u=i(599),c=i(70),h=i(138),f=i(600),l=i(166),p=i(601),e.eme=new t.rd(function(t){t(r.ABa).to(a.zBa).aa(),t(o.Nba).to(s.eAa).aa(),t(n.X_).wZ(u.p6a),t(c.Vs).nE(function(t){return e.vM.parent=t.$a,e.vM.get(c.Vs)}),t(h.uR).wf(function(){return function(){return new f.cGa}}),t(l.C_).to(p.gAa).aa}),e.vM=new t.G_({OI:!0})},function(t,e,i){function n(){}function r(t){t?(this.active=!1,this.Jma(t)):this.active=!0}_esm(e),e.zBa=e.W_=void 0,t=i(1),i=i(0),r.prototype.Jma=function(t){this.we=t.keySessionData?t.keySessionData.map(function(t){return{id:t.id,BH:t.licenseContextId,zW:t.licenseId}}):[],this.ba=t.xid,this.J=t.movieId},r.prototype.gx=function(){return JSON.parse(JSON.stringify({keySessionData:this.we?this.we.map(function(t){return{id:t.id,licenseContextId:t.BH,licenseId:t.zW}}):[],xid:this.ba,movieId:this.J}))},e.W_=r,n.prototype.create=function(){return new r},n.prototype.load=function(t){return new r(t)},i=t.__decorate([i.R()],n),e.zBa=i},function(t,e){_esm(e),e.Nba="CachedDrmDataSymbol"},function(t,e){_esm(e),e.Jx='video/mp4; codecs="avc1.640028"',e.$J='audio/mp4; codecs="mp4a.40.5"',e.kfb="DrmTraitsSymbol"},function(t,e,i){var n,r,o,a,s,u,c,h,f,l,p;function d(t,e,i,n,r,a){this.aX=t,this.is=e,this.Uc=i,this.ce=n,this.Zp=r,this.Sh=a,o.Qo(this,"nav")}_esm(e),e.Av=void 0,t=i(1),r=i(0),o=i(56),a=i(3),s=i(39),u=i(27),c=i(95),h=i(29),f=i(36),l=i(69),i=i(78),d.prototype.vz=function(){if(this.rb)return this.rb.sessionId},d.prototype.PVb=function(t,e){return this.aX.requestMediaKeySystemAccess(t,e)},d.prototype.createMediaKeys=function(t){return t.createMediaKeys()},d.prototype.createSession=function(t,e){this.rb=t.createSession(e)},d.prototype.k4=function(){return Promise.reject(new c.Ng(a.M.Z_))},d.prototype.eLb=function(){return!!this.rb},d.prototype.setServerCertificate=function(t,e){return this.is.Y2(t.setServerCertificate)?t.setServerCertificate(e):Promise.resolve()},d.prototype.generateRequest=function(t,e){return this.rb?this.rb.generateRequest(t,e[0]):Promise.reject(new c.Ng(a.M.Z_,a.L.MJ,void 0,"Unable to generate a license request, key session is not valid"))},d.prototype.update=function(t){return this.rb?this.rb.update(t[0]):Promise.reject(new c.Ng(a.M.UBa,a.L.MJ,void 0,"Unable to update the EME with a response, key session is not valid"))},d.prototype.load=function(t){return this.rb?this.rb.load(t):Promise.reject(new c.Ng(a.M.sfb,a.L.MJ,void 0,"Unable to load a key session, key session is not valid"))},d.prototype.close=function(){var t;return this.Nja=void 0,this.rb?(t=Promise.resolve(),this.vz()&&(t=this.rb.close()),this.rb=void 0,t):Promise.reject(new c.Ng(a.M.MBa,a.L.MJ,void 0,"Unable to close a key session, key session is not valid"))},d.prototype.remove=function(){return this.rb?this.rb.remove():Promise.reject(new c.Ng(a.M.tfb,a.L.MJ,void 0,"Unable to remove a key session, key session is not valid"))},d.prototype.rI=function(){return Promise.reject(new c.Ng(a.M.ica,void 0,"Unable to renew a key session, not supported"))},d.prototype.GPa=function(t){if(!this.rb)throw ReferenceError("Unable to add message handler, key session is not valid");this.rb.addEventListener(n.YBa,t)},d.prototype.BPa=function(t){if(!this.rb)throw ReferenceError("Unable to add key status handler, key session is not valid");this.rb.addEventListener(n.XBa,t)},d.prototype.zPa=function(t){if(!this.rb)throw ReferenceError("Unable to add error handler, key session is not valid");this.rb.addEventListener(n.WBa,t)},d.prototype.pqb=function(t){var e=this;if(!this.rb)throw ReferenceError("Unable to add closed unexpectedly handler, key session is not valid");this.Nja=t,this.rb.closed.then(function(){var t;return null===(t=e.Nja)||void 0===t?void 0:t.call(e)})},d.prototype.f7a=function(t){if(!this.rb)throw ReferenceError("Unable to remove message handler, key session is not valid");this.rb.removeEventListener(n.YBa,t)},d.prototype.d7a=function(t){if(!this.rb)throw ReferenceError("Unable to remove key status handler, key session is not valid");this.rb.removeEventListener(n.XBa,t)},d.prototype.b7a=function(t){if(!this.rb)throw ReferenceError("Unable to remove error handler, key session is not valid");this.rb.removeEventListener(n.WBa,t)},(p=n=d).YBa="message",p.XBa="keystatuseschange",p.WBa="error",p=n=t.__decorate([r.R(),t.__param(0,r.l(s.eK)),t.__param(1,r.l(u.bg)),t.__param(2,r.l(f.Ci)),t.__param(3,r.l(h.cg)),t.__param(4,r.l(l.sv)),t.__param(5,r.l(i.Bv))],p),e.Av=p},function(t,e){var i;_esm(e),e.upa=e.rv=void 0,(i=e.rv||(e.rv={})).ibb="usable",i.Ot="expired",i.released="released",i.H4a="output-restricted",i.ARb="output-downscaled",i.nZb="status-pending",i.iKb="internal-error",e.upa=function(t){return!!t&&!!t.keyStatuses}},function(t,e){_esm(e),e.o1="TimeoutMonitorFactorySymbol"},function(t,e){_esm(e),e.$m="_ANY_",e.mCa="EnricherSymbol"},function(t,e,i){var r,n,a;function o(t,e,i,n){this.Aa=t,this.H3=e,this.Un=i,this.Ao=void 0===n?"General":n,this.Qja={}}_esm(e),e.YJ=void 0,r=i(7),n=i(340),a=i(650),o.prototype.wPa=function(t,e){this.Qja[t]=e},o.prototype.fatal=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.iC(r.Nj.Cfb,t,this.SP(t,i))},o.prototype.error=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.iC(r.Nj.Mf,t,this.SP(t,i))},o.prototype.warn=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.iC(r.Nj.afa,t,this.SP(t,i))},o.prototype.info=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.iC(r.Nj.Fca,t,this.SP(t,i))},o.prototype.trace=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.iC(r.Nj.aLa,t,this.SP(t,i))},o.prototype.debug=function(t,e){for(var i=1;i<arguments.length;++i);},o.prototype.log=function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];this.debug.apply(this,[t].concat(G(i)))},o.prototype.write=function(t,e,i){for(var n=[],r=2;r<arguments.length;++r)n[r-2]=arguments[r];this.iC(t,e,this.SP(e,n))},o.prototype.toString=function(){return JSON.stringify(this)},o.prototype.toJSON=function(){return{category:this.Ao}},o.prototype.oka=function(t){return new o(this.Aa,this.H3,this.Un,t)},o.prototype.iC=function(t,e,i){for(t=new n.Wca(t,this.Ao,this.Aa.Yb(),e,i),i=(e=nt(this.Un.Un)).next();!i.done;i=e.next())(i=i.value)(t)},o.prototype.VEb=function(t){return 0<Object.keys(this.Qja).length?[this.Qja].concat(G(t)):t},o.prototype.SP=function(t,e){return t&&"null"!==t&&"undefined"!==t||e.push({StackTrace:null!==(t=Error("Empty message").stack)&&void 0!==t?t:"nostack"}),a.yRa(this.H3,this.VEb(e))},e.YJ=o},function(t,e){_esm(e),e.Eea="SegmentManagerFactorySymbol"},function(t,e){_esm(e),e.Qda="PboPlaydataFactorySymbol"},function(t,e){function i(t){return"globalAudioMemoryLimit"===t||"globalVideoMemoryLimit"===t?"global":("staticAudioMemoryLimit"===t||"staticVideoMemoryLimit"===t)&&"static"}_esm(e),e.AZb=e.J6a=e.tua=void 0,e.tua=function(t){return"globalMemoryLimit"===t?"global":"staticMemoryLimit"===t?"static":i(t)},e.J6a=i,e.AZb=function(t){return"IStreamable: "+t.identifier+" ["+t.mediaType+"] "+t.groupId+" p:"+JSON.stringify(t.$g)+" sp:"+t.LA+" pssp:"+t.RX+" state:"+t.Cf+" path-complete:"+t.sA+" streaming:"+t.Cs+" current:"+t.Er}},function(t,e){_esm(e),e.T2a=e.s8=e.zf=void 0,e.zf=[0,1],e.s8=function(t,e){return t||e?e?[1]:[0]:[0,1]},e.T2a=function(t){return 0===t?"audio":1===t?"video":"unknown"}},function(t,e){function i(t,e,i,n){var r=this;this.properties=t,this.transform=e,this.YT=i,this.state=n,this.Jsa=function(){var t=r.state,e=r.properties.map(function(t){return t.value});r.state=r.transform(e),(r.a0a(r.state)&&r.a0a(t)?r.state.equal(t):t===r.state)||r.YT(r.state)},t.forEach(function(t){return t.addListener(r.Jsa)}),this.Jsa()}_esm(e),e.zda=void 0,i.prototype.clear=function(){var e=this;this.properties.forEach(function(t){return t.removeListener(e.Jsa)})},i.prototype.a0a=function(t){return void 0!==t.equal},e.zda=i},function(t,e){_esm(e),e.Jj=void 0,(t=e.Jj||(e.Jj={}))[t.CLOSED=0]="CLOSED",t[t.OPEN=1]="OPEN",t[t.ej=2]="STREAMING"},function(t,e){function i(t){this.NOa=t}_esm(e),e.pF=void 0,Object.defineProperties(i.prototype,{wN:{get:function(){return this.Mmb},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{result:{get:function(){return this.NOa},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{iva:{get:function(){var t=this;return this.NOa.then(function(){return t})},enumerable:!1,configurable:!0}}),i.prototype.cancel=function(){this.Mmb=!0},i.prototype.Esa=function(e,i){var n=this;return this.result.then(function(t){n.wN?i&&i(t):e(t)}),this},e.pF=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e){var i=this;this.Kh=new r.default(t,e),this.In=new a.default(t),this.Qb=new o.default(this.In,this.Kh,t),n.ux.Evb(t),t.B9&&setInterval(function(){i.Kh.save(),i.In.save()},t.B9)}_esm(e),e.GJ=void 0,t=i(2),n=i(170),r=t.__importDefault(i(220)),a=t.__importDefault(i(762)),o=t.__importDefault(i(144)),s=i(5),e.GJ=(c.DYa=function(t,e){return void 0===u?(c.config=t,c.mE=e,u=new c(t,e)):(s.assert(c.config===t),s.assert(c.mE===e)),u},c.reset=function(){c.config=void 0,u=c.mE=void 0},c)},function(t,e,i){var n;function r(t,e,i){this.qM=!1===t,this.mM=t||.01,this.Oca=void 0===e?25:e,this.cAa=void 0===i?1.1:i,this.Mi=new n(a),this.reset()}function a(t,e){return t.qg>e.qg?1:t.qg<e.qg?-1:0}function o(t,e){return t.Hw-e.Hw}function s(t){this.config=t||{},this.mode=this.config.mode||"auto",r.call(this,"cont"===this.mode&&t.mM),this.eAb=this.config.ratio||.9,this.fAb=this.config.Gcc||1e3,this.M8=0}n=i(744).xjb,r.prototype.reset=function(){this.Mi.clear(),this.rqa=this.n=0},r.prototype.size=function(){return this.Mi.size},r.prototype.fp=function(t){var e=[];return t?(this.N1(!0),this.Mi.mf(function(t){e.push(t)})):this.Mi.mf(function(t){e.push({qg:t.qg,n:t.n})}),e},r.prototype.summary=function(){return[(this.qM?"exact ":"approximating ")+this.n+" samples using "+this.size()+" centroids","min = "+this.wj(0),"Q1  = "+this.wj(.25),"Q2  = "+this.wj(.5),"Q3  = "+this.wj(.75),"max = "+this.wj(1)].join("\n")},r.prototype.push=function(t,e){e=e||1,t=Array.isArray(t)?t:[t];for(var i=0;i<t.length;i++)this.SMa(t[i],e)},r.prototype.fua=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++)this.SMa(t[e].qg,t[e].n)},r.prototype.N1=function(t){var e;this.n===this.rqa||!t&&this.cAa&&this.cAa>this.n/this.rqa||(e=0,this.Mi.mf(function(t){t.Hw=e+t.n/2,e=t.eM=e+t.n}),this.n=this.rqa=e)},r.prototype.nDb=function(t){var e,i;return 0===this.size()?null:(i=null===(e=this.Mi.lowerBound({qg:t})).data()?e.lI():e.data()).qg!==t&&!this.qM&&(e=e.lI())&&Math.abs(e.qg-t)<Math.abs(i.qg-t)?e:i},r.prototype.gL=function(t,e,i){this.Mi.qq({qg:t,n:e,eM:i}),this.n+=e},r.prototype.y1=function(t,e,i){e!==t.qg&&(t.qg+=i*(e-t.qg)/(t.n+i)),t.eM+=i,t.Hw+=i/2,t.n+=i,this.n+=i},r.prototype.SMa=function(t,e){var i=this.Mi.min(),n=this.Mi.max(),r=this.nDb(t);r&&r.qg===t?this.y1(r,t,e):r===i?this.gL(t,e,0):r===n?this.gL(t,e,this.n):this.qM?this.gL(t,e,r.eM):(i=r.Hw/this.n,Math.floor(4*this.n*this.mM*i*(1-i))-r.n>=e?this.y1(r,t,e):this.gL(t,e,r.eM)),this.N1(!1),!this.qM&&this.Oca&&this.size()>this.Oca/this.mM&&this.Ty()},r.prototype.Wsb=function(t){var e,i;return this.Mi.cn=o,e=this.Mi.upperBound({Hw:t}),this.Mi.cn=a,[i=e.lI(),t=i&&i.Hw===t?i:e.next()]},r.prototype.wj=function(t){var e=(Array.isArray(t)?t:[t]).map(this.uob,this);return Array.isArray(t)?e:e[0]},r.prototype.uob=function(t){var e,i;if(0!==this.size())return this.N1(!0),this.Mi.min(),this.Mi.max(),t*=this.n,i=(e=this.Wsb(t))[0],(e=e[1])===i||null===i||null===e?(i||e).qg:this.qM?(t<=i.eM?i:e).qg:i.qg+(t-i.Hw)*(e.qg-i.qg)/(e.Hw-i.Hw)},r.prototype.Ty=function(){var t;if(!this.ISa){for(t=this.fp(),this.reset(),this.ISa=!0;0<t.length;)this.fua(t.splice(Math.floor(Math.random()*t.length),1)[0]);this.N1(!0),this.ISa=!1}},((s.prototype=Object.create(r.prototype)).constructor=s).prototype.push=function(t){r.prototype.push.call(this,t),this.Fub()},s.prototype.gL=function(t,e,i){this.M8+=1,r.prototype.gL.call(this,t,e,i)},s.prototype.y1=function(t,e,i){1===t.n&&--this.M8,r.prototype.y1.call(this,t,e,i)},s.prototype.Fub=function(){!("auto"!==this.mode||this.size()<this.fAb)&&this.M8/this.size()>this.eAb&&(this.mode="cont",this.qM=!1,this.mM=this.config.mM||.01,this.Ty())},t.exports={TDigest:r,Digest:s}},function(t,e,i){var s,u,o,c,n,h;function a(t){var e=t.Ufa;this.I=t,this.Sj=u.Nf.HAVE_NOTHING,this.OK=t.OK,t=new n(this.OK),this.kT=t.create("throughput-location-history",e),this.qy=t.create("respconn-location-history",e),this.iy=t.create("respconn-location-history",e),this.O2=t.create("throughput-tdigest-history",e),this.f2=t.create("throughput-iqr-history",e),this.tb=null}function f(t,e,i,n,r){for(this.OB=new a(r),this.pt=[],this.mnb=o.time.ea()-Date.now()%864e5,this.fy=null,this.I=r,t=0;t<n;++t)this.pt.push(new a(r))}function l(t,e,i){return s.has(t,e)?t[e]:t[e]=i}function r(t,e){var i;this.I=t,this.cPa=e,this.hCb(),this.CS=new a(this.I),this.MS(),(i=t.Ika)&&(i={confidence:u.Nf.RJ,Ra:{Ga:parseInt(i,10),aj:0},Aj:{Ga:0,aj:0},gu:{Ga:0,aj:0}},this.get=function(){return i})}s=i(10),u=i(28).default,e=i(9),o=i(6).default,c=e.NCa,n=i(361).ECa,new o.Console("ASEJS_LOCATION_HISTORY","media|asejs"),h={confidence:u.Nf.HAVE_NOTHING},a.prototype.cG=function(t,e){this.Sj=e,this.kT.add(t),this.O2.add(t),this.tb=o.time.ea()},a.prototype.qJ=function(t,e){this.f2.set(t,e)},a.prototype.zy=function(t){this.qy.add(t)},a.prototype.xy=function(t){this.iy.add(t)},a.prototype.getState=function(){var t,e=this.kT.getState(),i=this.qy.getState(),n=this.iy.getState(),r=this.f2.getState(),a=this.O2.getState();return s.Bb(e)&&s.Bb(i)&&s.Bb(n)?null:(t={c:this.Sj,t:o.time.Rra(this.tb)},s.Bb(e)||(t.tp=e),s.Bb(i)||(t.rt=i),s.Bb(n)||(t.hrt=n),s.Bb(r)||(t.iqr=r),s.Bb(a)||(t.td=a),t)},a.prototype.Ve=function(t){var e=o.time.now();return!(t&&s.has(t,"c")&&s.has(t,"t")&&s.has(t,"tp")&&s.isFinite(t.c)&&s.isFinite(t.t))||t.c<0||t.c>u.Nf.RJ||t.t>e||!this.kT.Ve(t.tp)?(this.Sj=u.Nf.HAVE_NOTHING,this.fy=this.tb=null,this.kT.Ve(null),this.qy.Ve(null),this.iy.Ve(null),!1):(this.Sj=t.c,this.tb=o.time.osa(t.t),this.qy.Ve(s.has(t,"rt")?t.rt:null),this.iy.Ve(s.has(t,"hrt")?t.hrt:null),s.has(t,"iqr")&&this.f2.Ve(t.iqr),s.has(t,"td")&&this.O2.Ve(t.td),!0)},a.prototype.get=function(){var t,e,i,n,r,a=this.I;return s.Bb(this.tb)?h:((t=(o.time.ea()-this.tb)/1e3)>a.Gmb?this.Sj=u.Nf.HAVE_NOTHING:t>a.hmb&&(this.Sj=Math.min(this.Sj,u.Nf.pB)),a=this.kT.get(),e=this.qy.get(),i=this.iy.get(),n=this.f2.get(),r=this.O2.get(),t={em:t,confidence:this.Sj,Ra:a,Aj:e,gu:i,hu:n,Dk:r},a&&(t.Icc=c.prototype.Gta.bind(a)),e&&(t.Vbc=c.prototype.Gta.bind(e)),i&&(t.Q$b=c.prototype.Gta.bind(i)),t)},a.prototype.time=function(){return this.tb},f.prototype.Me=function(){return((o.time.ea()-this.mnb)/1e3/3600/(24/this.pt.length)|0)%this.pt.length},f.prototype.getState=function(){var t={g:this.OB.getState(),h:this.pt.map(function(t){return t.getState()})};return s.Bb(this.fy)||(t.f=o.time.Rra(this.fy)),t},f.prototype.Ve=function(i){var n,r;return!!this.OB.Ve(i.g)&&(n=this.pt.length,r=!1,this.pt.forEach(function(t,e){r=!t.Ve(i.h[e*i.h.length/n|0])||r}),this.fy=s.has(i,"f")?o.time.osa(i.f):null,r)},f.prototype.cG=function(t,e){this.OB.cG(t,e),this.pt[this.Me()].cG(t,e),this.fy=null},f.prototype.qJ=function(t,e){this.OB.qJ(t,e),this.pt[this.Me()].qJ(t,e)},f.prototype.zy=function(t){this.OB.zy(t),this.pt[this.Me()].zy(t)},f.prototype.xy=function(t){this.OB.xy(t),this.pt[this.Me()].xy(t)},f.prototype.fail=function(t){this.fy=t},f.prototype.get=function(){var t,e;if(!s.Bb(this.fy)){if((o.time.ea()-this.fy)/1e3<this.I.gmb)return{confidence:u.Nf.HAVE_NOTHING,Pt:!0};this.fy=null}return t=this.pt[this.Me()].get(),e=this.OB.get(),(t=t.confidence>=e.confidence?t:e).Pt=!1,t},f.prototype.time=function(){return this.OB.time()},r.prototype.mNa=function(t,e){var i=this.I;return t=l(this.GS,t,{}),l(t,e,new f(i.ANa||14400,i.zNa,i.yNa,i.rOa||4,i))},r.prototype.MS=function(){var t=o.storage.get("lh"),e=o.storage.get("gh");t&&this.eha(t),e&&this.qpb(e)},r.prototype.bga=function(){var n={};return s.mf(this.GS,function(t,i){s.mf(t,function(t,e){l(n,i,{})[e]=t.getState()},this)},this),n},r.prototype.qpb=function(t){this.CS.Ve(t)},r.prototype.eha=function(t){var r=null,a=this.I;return s.mf(t,function(t,n){s.mf(t,function(t,e){var i=new f(a.ANa||14400,a.zNa,a.yNa,a.rOa||4,a);i.Ve(t)?(l(this.GS,n,{})[e]=i,r=!0):s.Bb(r)&&(r=!1)},this)},this),!!s.Bb(r)||r},r.prototype.save=function(){var t=this.bga();o.storage.set("lh",t),o.storage.set("gh",this.CS.getState()),this.cPa&&this.cPa.Wva(this.CS.getState())},r.prototype.hCb=function(){this.GS={},this.LK=this.OMa="",this.no=null},r.prototype.lP=function(t){this.OMa=t,this.no=null},r.prototype.K$=function(t){this.LK=t,this.no=null},r.prototype.a2=function(){return s.Bb(this.no)&&(this.no=this.mNa(this.OMa,this.LK)),this.no},r.prototype.cG=function(t,e){this.a2().cG(t,e),this.CS.cG(t,e)},r.prototype.qJ=function(t,e){t&&t.Jl&&t.uk&&t.Kl&&(this.a2().qJ(t,e),this.CS.qJ(t,e))},r.prototype.zy=function(t){this.a2().zy(t)},r.prototype.xy=function(t){this.a2().xy(t)},r.prototype.fail=function(t,e){this.mNa(t,this.LK).fail(e)},r.prototype.get=function(t,e){var n,r,a,o;return t=(t=this.GS[t])?t[this.LK]:null,n=null,t&&(n=t.get()).confidence>u.Nf.HAVE_NOTHING?n:!1===e?h:(r=n=null,a=!1,o=null,s.mf(this.GS,function(t){s.mf(t,function(t,e){var i;a&&e!=this.LK||(i=t.get())&&(!r||r<=i.confidence)&&(!o||r<i.confidence||o<t.time())&&(r=i.confidence,a=e==this.LK,o=t.time(),n=i)},this)},this),n||h)},t.exports=r},function(t,e,i){var n;function r(t){this.vL=t,this.reset()}function a(t){this.bk=new r(t),this.Ne=0,this.Tc=null}function o(t,e){this.vL=t,this.WNa=e,this.reset()}n=i(10),r.prototype.zOa=function(t,e){this.tb+=t,this.Tj+=t,this.Qc+=e,this.so.push({d:t,b:e})},r.prototype.ZS=function(){for(var t;this.Tj>this.vL;)t=this.so.shift(),this.Qc-=t.b,this.Tj-=t.d},r.prototype.reset=function(){this.so=[],this.tb=null,this.Tj=this.Qc=0},r.prototype.setInterval=function(t){this.vL=t,this.ZS()},r.prototype.start=function(t){n.Bb(this.tb)&&(this.tb=t)},r.prototype.add=function(t,e,i){n.Bb(this.tb)&&(this.tb=e),e>this.tb&&this.zOa(e-this.tb,0),this.zOa(i>this.tb?i-this.tb:0,t),this.ZS()},r.prototype.get=function(){return{Ga:Math.floor(8*this.Qc/this.Tj),aj:0}},a.prototype.reset=function(){this.bk.reset(),this.Ne=0,this.Tc=null},a.prototype.add=function(t,e,i){!n.Bb(this.Tc)&&i>this.Tc&&(e>this.Tc&&(this.Ne+=e-this.Tc),this.Tc=null),this.bk.add(t,e-this.Ne,i-this.Ne)},a.prototype.start=function(t){!n.Bb(this.Tc)&&t>this.Tc&&(this.Ne+=t-this.Tc,this.Tc=null),this.bk.start(t-this.Ne)},a.prototype.stop=function(t){this.Tc=n.Bb(this.Tc)?t:Math.min(t,this.Tc)},a.prototype.get=function(){return this.bk.get()},a.prototype.setInterval=function(t){this.bk.setInterval(t)},o.prototype.reset=function(){this.so=[],this.Qc=this.Tj=0},o.prototype.add=function(t,e,i,n){void 0!==n&&!0===n&&(e=i-e,this.Tj+=e,this.Qc+=t,this.so.push({d:e,b:t}),this.ZS())},o.prototype.ZS=function(){for(var t;this.Tj>this.vL||this.so.length>this.WNa;)t=this.so.shift(),this.Qc-=t.b,this.Tj-=t.d},o.prototype.start=function(){},o.prototype.stop=function(){},o.prototype.get=function(){return{Ga:Math.floor(8*this.Qc/this.Tj),aj:0}},o.prototype.setInterval=function(t,e){this.vL=t,this.WNa=e,this.ZS()},t.exports={b4b:r,efb:a,Bkb:o}},function(t,e,i){var k,S,r,T,A,O,I,a,x,c,n,P,R;function o(t,e){var r,a,o,s,u,c,h,i=e.Pb,n=e.oa,f=e.Wo,l=e.Bd,p=e.L2a,d=e.ii,b=e.config,m=e.QZa,g=e.VO,v=e.F5,y=e.Qb,w=e.Kh,_=e.iX,E=e.EVa;return e=e.QI,(r=R.call(this)||this).W=t,r.H6=!1,r.CNa=[],r.UNa=[],r.Yh=[],r.DC=[],r.en=!1,r.Pb=i,r.PS=n,r.Wo=f,r.kc=function(t){return 0<=l.indexOf(t)},r.config=b,r.console=new x.default.Console("ASEJS","media|asejs","<"+String(r.W)+">"),m&&(t=m.SC,r.Tf=new O.sDa(r,r.console,r.config,m.Ln,m.IV,t,m.l7,m.Gf,m.Ol,m.qh,m.aD),r.SC=t),r.eu=new S.EventEmitter,r.F5=v,r.Qb=y,r.iX=_,r.ym=new I.Uca(r.oa,y,w,r.config,null==E?void 0:E.Ln),E&&(m=E.Pr,v=E.Fn,r.Ep=E.Nh,r.Fn=v,r.Pr=m,r.Ofa=new A.nCa(r.ym,r.config,r.cIb.bind(r),r.bIb.bind(r))),r.VO=g,r.QI=e,r.sf=new P(p),r.ii=d,a=[[],[]],o=[{},{}],u=!(s=[0,0]),c=r.kc(0),h=r.kc(1),["audio_tracks","video_tracks"].forEach(function(t,i){var n=0===i;n&&!c||1===i&&!h||r.oa[t].forEach(function(t,e){0===t.type&&!1===t.oi||(t=new T.yba({P:r,cA:t,mediaType:i,Vg:p.xpa,oE:e,jC:e+(n?r.oa.video_tracks.length:0)},r.config,r.console),a[i].push(t),o[i]=k.__assign(k.__assign({},o[i]),t.UC()),t.maxBitrate>s[t.mediaType]&&(s[t.mediaType]=t.maxBitrate),u=u||t.iH)})}),r.yK=a,r.Lwa=o,r.yga=s,r.iH=u,r}_esm(e),e.zba=void 0,k=i(2),S=i(17),r=i(774),t=i(83),T=i(775),A=i(801),O=i(804),I=i(235),a=i(16),x=k.__importDefault(i(6)),c=i(5),i(9),n=i(25),i(168),P=function(t){var e=t.t0a;t=t.xpa,this.LW=this.replace=e,this.Vg=t},R=t.kv,k.__extends(o,R),Object.defineProperties(o.prototype,{oa:{get:function(){return this.PS},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{KW:{get:function(){var t;return!(null===(t=this.yK[1][0])||void 0===t||!t.KW)},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Gw:{get:function(){return this.yga},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{sh:{get:function(){return this.CNa},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{NNb:{get:function(){return this.UNa},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{J:{get:function(){return this.oa.movieId},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Bo:{get:function(){return this.oa.choiceMap},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{duration:{get:function(){return this.oa.duration},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{jk:{get:function(){return this.en},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{aq:{get:function(){return c.assert(this.Ofa,"ErrorDirector is not available on old architecture prefetch viewables."),this.Ofa},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{EM:{get:function(){return this.aq.events},enumerable:!1,configurable:!0}}),o.prototype.Nb=function(){this.close(),this.ed()},o.prototype.close=function(){var t;this.DC=[],null!==(t=this.Ofa)&&void 0!==t&&t.Nb(),this.ym.Nb(),this.en=!0},o.prototype.ed=function(){this.Tf&&this.Tf.ed()},o.prototype.lx=function(t){var e,n,s=this,u=t.oa,i=t.Bd,r=void 0===i?a.zf:i;c.assert(t.ii===this.ii,"Updating Viewable clearplay not supported"),a.zf.forEach(function(t){c.assert(s.kc(t)===0<=r.indexOf(t),"Updating Viewable media types not supported")}),c.assert(u.movieId===this.oa.movieId,"Changing Viewable manifest movieId unsupported"),e=this.kc(0),n=this.kc(1),["audio_tracks","video_tracks"].forEach(function(t,r){var i,a,o=0===r;o&&!e||1===r&&!n||(i=u[t],a=s.yK[r],c.assert(a.every(function(t){var e=i[t.oE];return e&&e.NP===t.trackId&&(1===e.type||!1!==e.oi)}),"Existing tracks must still exist and be hydrated in updated manifest"),i.forEach(function(t,e){var i,n;0===t.type&&!1===t.oi||((i=s.getTrackById(t.NP))?(t=t.streams,n=Object.keys(i.UC()),c.assert(t.length===n.length,"Expected updated manifest track to have same number of streams"),t.forEach(function(t){c.assert(-1!==n.indexOf(t.downloadable_id),"Changing Viewable track streams unsupported")})):(i=new T.yba({P:s,cA:t,mediaType:r,Vg:!1,oE:e,jC:e+(o?s.oa.video_tracks.length:0)},s.config,s.console),a.push(i),s.Lwa[r]=k.__assign(k.__assign({},s.Lwa[r]),i.UC()),i.maxBitrate>s.yga[i.mediaType]&&(s.yga[i.mediaType]=i.maxBitrate),c.assert(s.iH||!i.iH,"Can not update clear viewable with drm track.")))}))}),this.PS=u,this.ym.AL(this.oa)},o.prototype.aE=function(t){var e=t.ds,i=t.ba,n=t.HC;t=t.Kn,e&&i?(this.P$=new r.wKa(e,{ba:String(i),HC:!!n,bOb:this.config.M0.mx,btb:this.config.M0.lv},t),this.aq.aE(this.P$)):t("SideChannel: pbcid/xid is missing.")},o.prototype.Oz=function(){return void 0!==this.Bo},o.prototype.getTracks=function(t){return this.yK[t]},o.prototype.getTrackById=function(e){var i;return this.yK.some(function(t){return t.some(function(t){if(t.trackId===e)return i=t,!0})}),i||this.console.warn("getTrackById not found:",e,"length:",this.yK.length),i},o.prototype.FHb=function(t,e){var i=this.yK[t];if(!(e<0||e>=i.length))return i[e];this.console.warn("getTrackByIndex out of range:",e,"length:",i.length,"mediaType:",t)},o.prototype.ww=function(t,e){return(t=this.UC(t))&&t[e]},o.prototype.UC=function(t){return this.Lwa[t]},o.prototype.$0b=function(t,e){(this.CNa[t]=e).stream.U&&this.Uab(t,e.stream.U)},o.prototype.pLb=function(e){var t,i;return void 0!==e.S9&&void 0!==e.Qta||(i=(t=this.ym.nA.filter(function(t){return void 0!==t.streams[e.Oa]})[0]).children.filter(function(t){return t.urls.some(function(t){return t.stream.id===e.Oa})})[0],e.S9=t.id,e.Qta=i.id),{Wpa:e.location===e.S9,qLb:e.Pc===e.Qta}},o.prototype.awa=function(t,e,i){void 0!==e&&void 0!==i&&(this.p7a(t.mediaType,e),t.awa(e,i))},o.prototype.p7a=function(t,e){var i=this.config.Zra;("location"===i||"video_location"===i&&1===t)&&this.Qb.lP(e),null!==(i=this.F5)&&void 0!==i&&i.call(this).IQb(t,e)},o.prototype.Nh=function(t,e,i,n,r,a){return c.assert(this.Ep,"Stream failure reporting can not be used on old architecture prefetch viewables."),this.Ep(t,e,i,n,r,a)},o.prototype.Om=function(){var t,e=this,i=[];return this.jk?(this.console.error("updateRequestUrls, closed Viewable:",this.W),!1):(a.zf.forEach(function(t){e.kc(t)&&e.r1b(t)&&(0<(t=e.g1b(t)).length&&i.push.apply(i,t))}),0<(t=this.a1b()).length&&i.push.apply(i,t),this.cWb(i))},o.prototype.yn=function(t,e){var i=this.getTracks(1)[0];if(c.assert(i),i.uN)return i.yn(t,e)},o.prototype.r1b=function(i){var e=this;return this.jk?(this.console.warn("updateStreamUrls ignored, viewable cleaned up"),!1):this.kc(i)?this.Yh.reduce(function(t,e){return n.m3(t,e.vg.filter(function(t){return t.mediaType===i}))},[]).map(function(t){return e.ym.LZ(e.W,t.$d)}).every(function(t){return t}):(this.console.warn("updateStreamUrls ignored, streaming for mediaType type not enabled",i),!1)},o.prototype.a1b=function(){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.Om()},o.prototype.g1b=function(t){var e,i,n=[];if(this.jk)return this.console.warn("updateStreamUrls ignored, viewable cleaned up"),n;if(!this.kc(t))return this.console.warn("updateStreamUrls ignored, streaming for mediaType type not enabled",t),n;try{for(var r=k.__values(this.Yh),a=r.next();!a.done;a=r.next())(i=a.value.Om(t)).length&&n.push.apply(n,i)}catch(t){var o={error:t}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return n},o.prototype.cWb=function(t){var i,n,r=this;return 0===t.length||(i=0,n=[],t.forEach(function(t){var e;t.ad&&(e=t.P).Pb>r.Pb&&(n.push({P:e,track:t.stream.track}),++i)}),n.forEach(function(t){var e=t.track;t.P.UO([0===e.mediaType?e:void 0,1===e.mediaType?e:void 0],void 0,e.mediaType)}),i===t.length)},o.prototype.sk=function(){var e=this;this.ym.sk(),this.aq.sk(),this.P$&&(c.assert(this.SC),a.zf.forEach(function(t){t=e.SC(t),e.P$.Hva("rebuffer",t.qqa)}))},o.prototype.Dsa=function(){this.aq.Dsa()},o.prototype.Sxa=function(t,e){c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.Sxa(t,e)},o.prototype.A6=function(){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables.."),this.Tf.A6()},o.prototype.Ija=function(){c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.Ija()},o.prototype.kP=function(t){c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.kP(t)},o.prototype.yxa=function(){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.yxa()},o.prototype.Xk=function(t,e){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.Xk(t,e)},o.prototype.lTa=function(t,e,i){c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.yaa(t,e,i,!0)},o.prototype.Z2=function(t,e,i){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.Z2(t,e,!!i)},o.prototype.BXb=function(t,e){this.DC.push({stream:t,vHb:e})},o.prototype.mVb=function(){this.DC=[]},o.prototype.sVb=function(e){this.DC=this.DC.filter(function(t){return t.stream!==e})},o.prototype.rVb=function(e){this.DC=this.DC.filter(function(t){return t!==e})},o.prototype.hN=function(){var n=this;return c.assert(this.Fn,"Streamables not available on old architecture prefetch viewables."),this.Fn()?[]:this.DC.map(function(t){var e=t.stream,i=t.vHb;return i=i(),{identifier:e.W+"-"+e.mediaType+"-"+e.bitrate,mediaType:e.mediaType,$g:i.$g,Cf:i.Cf,sA:i.sA,Cs:i.Cs,Er:i.Er,Ota:0,Nta:1/0,RX:1,LA:1,qWa:0,groupId:""+n.W,mD:!0,Ur:!1,F0a:function(){return{result:!0}},J0a:function(){return e.pE()?(n.sVb(e),{Gn:!0,reason:"success"}):(n.rVb(t),{Gn:!1,reason:"viewableTryIssueHeaderRequest"})}}})},o.prototype.pE=function(t,e){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.pE(t,e)},o.prototype.yL=function(t,e){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.yL(t,e)},o.prototype.hva=function(t){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.hva(t)},o.prototype.UO=function(t,e,i){return c.assert(this.Tf,"Headers not available on old architecture prefetch viewables."),this.Tf.UO(t,e,i)},o.prototype.eIb=function(t){var e,i=t.Oa,n=t.mediaType;this.Uab(n,t.stream.U),i=this.ww(n,i),e=this.Oz()?this.config.u2a:0,i.Nab(x.default.Io()[n],e),this.eu.emit("onHeaderFragments",t)},o.prototype.Cua=function(t){this.Yh.push(t)},o.prototype.Ixa=function(t){t=this.Yh.indexOf(t),c.assert(-1!==t,"Unexpected call to unregisterBranch, branch not registered with Viewable."),this.Yh.splice(t,1)},o.prototype.p9=function(t){var e;null!==(e=this.VO)&&void 0!==e&&e.yy(t)},o.prototype.qA=function(t){this.jk?this.console.warn("onloadstart ignored, viewable cleaned up, mediaRequest:",t):void 0!==t.location&&this.p7a(t.mediaType,t.location)},o.prototype.YH=function(t){this.jk?this.console.warn("onprogress ignored, viewable cleaned up, mediaRequest:",t):this.aq.Baa({timestamp:t.rf,url:t.url})},o.prototype.tk=function(t){var e;null!==(e=this.VO)&&void 0!==e&&e.qI(t),c.assert(this.Fn&&this.iX,"Requests cannot be handled on old architecture prefetch viewables."),this.jk?this.console.warn("oncomplete ignored, viewable cleanuped, mediaRequest:",t):this.Fn()||(this.aq.Baa({timestamp:t.rf,mediaRequest:t}),this.iX(t))},o.prototype.tX=function(t,e,i){var n;i&&null!==(n=this.VO)&&void 0!==n&&n.qI(t)},o.prototype.uX=function(t){this.jk?this.console.warn("onerror ignored, viewable cleaned up, mediaRequest:",t):(this.aq.ms({url:t.url},t.status,t.ph,t.uj),this.Om()||this.Nh(t.HM||"unknown","NFErr_MC_StreamingFailure",t.ph,t.status,t.uj))},o.prototype.Uab=function(t,e){this.UNa[t]=e.jra},o.prototype.cIb=function(t){var e,i,n;this.en||(e=t.YKb,i=t.rRb,n=t.sRb,t=t.tRb,this.console.warn("Streaming failure, is permanent: "+e+", last error code: "+i+", last http code: "+n+", last native code: "+t),(e=e?(this.console.warn(" > Permanent failure, done"),this.Nh("Permanent failure","NFErr_MC_StreamingFailure",i,n,t)):(this.console.warn(" > We are buffering, calling it!"),this.Nh("Temporary failure while buffering","NFErr_MC_StreamingFailure",t,n,t,!0)))||(this.console.warn(" > Resetting failures"),this.aq.l$()))},o.prototype.bIb=function(){c.assert(this.Pr,"Error handling not available on old architecture prefetch viewables."),this.en||(this.Om(),this.Pr())},i=o,e.zba=i},function(t,e,i){var s,a,u,o,n,r,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C;function L(t,e,i,n,r){o.call(this,t,e,i,n,r)}function M(t,e,i,n,r){o.call(this,t,e,i,n,r)}function D(t,e,i,n,r){o.call(this,t,e,i,n,r)}function U(t,e,i,n,r){o.call(this,t,e,i,n,r),this.MI=t.config.MI,this.vd=this.sizes=void 0}function B(t,e,i,n,r){o.call(this,t,e,i,n,r)}function F(){for(var t=new DataView(this),e="",i=0;i<this.byteLength;i++)e+=("00"+t.getUint8(i).toString(16)).slice(-2);return e}function q(t,e,i,n,r){o.call(this,t,e,i,n,r)}function H(t,e,i,n,r){o.call(this,t,e,i,n,r)}function K(t,e,i,n,r){o.call(this,t,e,i,n,r)}function V(t,e,i,n,r){o.call(this,t,e,i,n,r)}function G(t,e,i,n,r){o.call(this,t,e,i,n,r)}function J(a){function t(t,e,i,n,r){o.call(this,t,e,i,n,r),this.dX=a}return t.Na=!1,(t.prototype=new o).constructor=t,Object.defineProperties(t.prototype,{zQ:{get:function(){return this.dX}}}),t.prototype.parse=function(){return this.u.console.trace("renaming '"+this.type+"' to draft type '"+this.dX+"'"),this.u.offset=this.startOffset+4,this.la.b_(this.zQ),this.type=this.zQ,!0},t}function z(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Y(t,e,i,n,r){o.call(this,t,e,i,n,r)}function W(t,e,i,n,r){o.call(this,t,e,i,n,r)}function X(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Q(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Z(t,e,i,n,r){o.call(this,t,e,i,n,r)}function $(t,e,i,n,r){o.call(this,t,e,i,n,r)}function tt(t,e,i,n,r){o.call(this,t,e,i,n,r)}function et(t,e,i,n,r){o.call(this,t,e,i,n,r)}function it(t,e,i,n,r){o.call(this,t,e,i,n,r)}function nt(t,e){t.forEach(function(t){e[t.Xb]=t})}s=i(145).assert,e=i(100),a=i(224).T,u=i(370),i(146),i(84),i(84),i(84),o=i(32).Dc,n=i(777).default,r=i(778).default,c=i(779).default,h=i(780).default,f=i(781).default,l=i(782).default,p=i(783).default,d=i(784).default,b=i(785).default,i(225),i(172),m=i(371).cba,g=i(371).hca,v=i(786).default,y=i(787).default,w=i(85).default,_=i(85).lba,E=i(85).mba,k=i(85).nba,S=i(85).oba,T=i(788).default,A=i(789).default,O=i(85).Cca,I=i(85).wca,x=i(85).Ccb,P=i(790).default,R=i(791).default,N=i(792).default,j=i(372).default,C=i(373).default,i(147),i(228),i(229),i(227),i=i(793).default,L.Na=!0,(L.prototype=new o).constructor=L,M.Na=!0,(M.prototype=new o).constructor=M,D.Na=!1,D.prototype=new o,U.Na=!((D.prototype.constructor=D).prototype.parse=function(){var t;return this.Ac(),1===this.version?(this.u.Td(),this.u.Td(),this.S=this.u.ya(),this.duration=this.u.Td()):(this.u.ya(),this.u.ya(),this.S=this.u.ya(),this.duration=this.u.ya()),t=32767&this.u.Yc(),this.language=String.fromCharCode(96+(t>>>10),96+(t>>>5&31),96+(31&t)),!0}),((U.prototype=new o).constructor=U).prototype.Nga=function(){this.Ac(),this.u.ya(),this.S=this.u.ya(),0===this.version?(this.MU=this.u.ya(),this.eV=this.u.ya()):(this.MU=this.u.Td(),this.eV=this.u.Td()),this.F7a=this.u.Yc(),this.gY=this.u.Yc()},U.prototype.Cfa=function(t,e){var i,n,r=this.S;t=t&&t.S||r,i=t/r,r=this.u.BA(e,12,!1),n=1==i?this.u.BA(e,12,!1):u.from(Uint32Array,{length:e},function(){var t=Math.round(this.u.ya()*i);return this.u.offset+=8,t},this),this.pha(e,n,r,t)},U.prototype.pha=function(t,e,i,n){if(this.MI){n=this.MI*n/1e3;for(var r=0,a=1;a<t;a++)Math.abs(e[r]-n)>Math.abs(e[r]+e[a]-n)?(e[r]+=e[a],i[r]+=i[a]):++r!==a&&(e[r]=e[a],i[r]=i[a]);++r,e=new Uint32Array(e.buffer.slice(0,4*r)),i=new Uint32Array(i.buffer.slice(0,4*r))}this.sizes=i,this.vd=e},B.Na=!(U.prototype.parse=function(t){var e,i,n,r;return this.Nga(),this.sa=t.sa,e=this.S,i=this.sa&&this.sa.S||e,n=this.gY,r=this.startOffset+this.length+this.eV,e=new a(this.MU,e).Zf(i).vc,this.U={S:i,jl:e,offset:r},this.Cfa(this.sa,n),this.U.vd=this.vd,this.U.sizes=this.sizes,t.zs=this,!0}),B.prototype=new o,q.Na=!((B.prototype.constructor=B).prototype.parse=function(){var t;this.Th=[],this.mta=[],t=(this.length-11)/2,this.u.mb(),this.u.mb(),this.u.mb();for(var e=0;e<t;e++)this.Th.push(this.u.mb()),this.mta.push(this.u.mb());return!0}),q.prototype=new o,H.Na=!((q.prototype.constructor=q).prototype.parse=function(){return this.Ac(),this.u.offset+=4,this.vH=this.u.offset,this.pj=this.u.oua(16),this.pj.toString=F,!0}),H.prototype=new o,K.Na=!((H.prototype.constructor=H).prototype.parse=function(){return this.Ac(),this.ng=this.u.Yc(),this.qra=this.u.BA(this.ng,void 0,!0),!0}),((K.prototype=new o).constructor=K).prototype.parse=function(t){var e,i,n,r,a,o=t.zs;if(s(o),t=t.sa,e=o.S,o=o.gY,s(t),s(e),s(o),this.Ac(),s(this.version<2),this.ng=this.u.Yc(),this.Du=new Uint16Array(o+1),i=t.p6(e),n=i/e,r=t.Zf(i).vc,0===this.version){for(this.Tu=new Uint16Array,this.Sd=new Uint32Array,t=e=0;t<=o;++t)if(this.Du[t]=e,t<this.ng&&0!==(a=this.u.mb()))for(i=0;i<a;++i,++e)this.Tu[e]=Math.floor((this.u.ya()+1)*n)/r,this.Sd[e]=this.u.ya()}else if(1===this.version)for(i=this.u.kua(this.ng,10,!1),this.u.offset+=4,this.Sd=this.u.BA(this.ng,10,!1),this.u.offset-=8,this.Tu=u.from(Uint16Array,{length:this.ng},function(){var t=Math.floor((this.u.ya()+1)*n)/r;return this.u.offset+=6,t},this),e=t=0;t<=o;++t){for(;e<i.length&&i[e]<t;)++e;this.Du[t]=e}return this.di={Du:this.Du,Tu:this.Tu,Sd:this.Sd},!0},V.Na=!0,(V.prototype=Object.create(L.prototype)).constructor=V,G.Na=!0,G.prototype=Object.create(L.prototype),z.Na=!((G.prototype.constructor=G).prototype.Qt=function(){var t=this.Rh("tfhd");return t&&(this.ck=t.OT?t.ck:this.parent.startOffset),!0}),z.prototype=new o,Y.Na=!((z.prototype.constructor=z).prototype.parse=function(){var t,e=this.u.offset;if(this.Ac(),1===this.version){this.u.console.trace("translating vpcC box to draft equivalent"),this.u.offset+=2;for(var i=this.u.offset,n=this.u.mb(),r=this.u.mb(),a=this.u.mb(),o=this.u.mb(),s=this.u.Yc(),u=[],c=0;c<s;++c)u=this.u.mb();switch(c=(240&n)>>>4,t=(14&n)>>>1,n&=1,a=16===a?1:0,r!=o&&this.u.console.warn("VP9: Has the VP9 spec for vpcC changed? colourPrimaries "+r+" and matrixCoefficients "+o+" should be the same value!"),o=2,r){case 1:o=2;break;case 6:o=1;break;case 9:o=5;break;default:this.u.console.warn("VP9: Unknown colourPrimaries "+r+"! Falling back to default color space VP9_COLOR_SPACE_BT709_6 (2)")}this.version=0,this.la.fB(this.version,e),this.la.fB(c<<4|o,i++),this.la.fB(t<<4|a<<1|n,i++),s+=2,u.push(0,0),this.la.sya(s,!1),i+=2,u.forEach(function(t){this.la.fB(t,i++)})}return!0}),((Y.prototype=new o).constructor=Y).Xb="tfhd",Object.defineProperties(Y.prototype,{OT:{get:function(){return 1&this.flags}},ova:{get:function(){return 2&this.flags}},Qka:{get:function(){return 8&this.flags}},Tka:{get:function(){return 16&this.flags}},Rka:{get:function(){return 32&this.flags}}}),W.Na=!(Y.prototype.parse=function(){return this.Ac(),this.kJ=this.u.ya(),this.ck=this.OT?this.u.Td():void 0,this.ova&&this.u.ya(),this.$y=this.Qka?this.u.ya():void 0,this.bz=this.Tka?this.u.ya():void 0,this.az=this.Rka?this.u.ya():void 0,!0}),((W.prototype=new o).constructor=W).prototype.parse=function(){return this.Ac(),this.Gy=1===this.version?this.u.Td():this.u.ya(),!0},X.Na=!(W.prototype.wa=function(t){var e=this.startOffset+12;this.Gy+=t,1===this.version?this.la.tya(this.Gy,e):this.la.dh(this.Gy,e)}),(X.prototype=new o).constructor=X,Object.defineProperties(X.prototype,{rU:{get:function(){return 1&this.flags}},SG:{get:function(){return 4&this.flags}},JA:{get:function(){return 256&this.flags}},KA:{get:function(){return 512&this.flags}},yY:{get:function(){return 1024&this.flags}},BI:{get:function(){return 2048&this.flags}}}),X.prototype.parse=function(){return this.Ac(),this.ST=this.u.offset,this.Lb=this.u.ya(),this.fk=this.rU?this.u.pI():0,this.SG&&this.u.ya(),this.Su=(this.JA?4:0)+(this.KA?4:0)+(this.yY?4:0)+(this.BI?4:0),this.pz=this.u.offset,s(this.rU,"Expected data offset to be present in Track Run"),s(this.length-(this.u.offset-this.startOffset)==this.Lb*this.Su,"Expected remaining data in box to be sample information"),!0},X.prototype.ot=function(t,e,i){var n,r=this.JA?this.u.ya():t.$y,a=this.KA?this.u.ya():t.bz;return t=this.yY?this.u.ya():t.az,{nva:n=0===this.version?this.BI?this.u.ya():0:this.BI?this.u.pI():0,DWb:t,ETb:i+n-(void 0!==e?e:n),yk:a,Uu:r}},X.prototype.wa=function(t,e,i,n,r,a,o){var s,u,c=0,h=0;for(this.la.offset=this.pz,n=0;n<r;++n)s=this.ot(e,u,h),0==n&&(u=s.nva),c+=s.yk,h+=s.Uu;if(n=r,r=this.u.offset,s=this.ot(e,u,h),this.Nq=n,this.vwa=h,o){if(this.Hq=this.fk+c,this.Yi=0,n===this.Lb)return!0}else if(this.Hq=this.fk,this.Yi=c,0===n)return!0;if(0===n||n===this.Lb)return!1;if(this.hz=!0,o){for(this.Yi+=s.yk,o=n+1;o<this.Lb;++o)s=this.ot(e,u,h),this.Yi+=s.yk;this.la.offset=this.ST,this.Lb=n,this.la.dh(this.Lb),this.la.vJ(a),this.SG&&(this.u.offset+=4),this.Ie(this.length-(r-this.startOffset),r)}else e=r-this.pz,this.la.offset=this.ST,this.Lb-=n,this.la.dh(this.Lb),this.fk+=c,this.la.vJ(a,this.fk),this.SG&&(this.u.offset+=4),this.Ie(e,this.la.offset);return i.Ie(this.Yi,t.ck+this.Hq),!0},Q.Na=!(X.prototype.Qua=function(t,e,i,n,r,a){var o;if(n){n=this.Hq;for(var s=this.Lb-1;0<=s&&this.Lb-s<=r;--s){if(this.la.offset=this.pz+s*this.Su,(o=this.ot(e)).Uu!=a.duration){this.u.console.warn("Could not replace sample of duration "+o.Uu+" with silence of duration "+a.duration);break}if(this.KA)this.la.offset-=this.Su-(this.JA?4:0),this.la.dh(a.Ck.byteLength);else if(a.Ck.byteLength!==o.yk){this.u.console.warn("Cannot replace sample with default size with silence of different size");break}n-=o.yk,i.Ru(o.yk,a.Ck,t.ck+n)}}else for(n=this.Hq+this.Yi,s=0;s<this.Lb&&s<r;++s){if(this.la.offset=this.pz+(s+this.Nq)*this.Su,(o=this.ot(e)).Uu!=a.duration){this.u.console.warn("Could not replace sample of duration "+o.Uu+" with silence of duration "+a.duration);break}if(this.KA)this.la.offset-=this.Su-(this.JA?4:0),this.la.dh(a.Ck.byteLength);else if(a.Ck.byteLength!==o.yk){this.u.console.warn("Cannot replace sample with default size with silence of different size");break}i.Ru(o.yk,a.Ck,t.ck+n),n+=o.yk}}),(Q.prototype=Object.create(o.prototype)).constructor=Q,Object.defineProperties(Q.prototype,{qn:{get:function(){return 1&this.flags}}}),Q.prototype.parse=function(){return this.Ac(),this.qn&&this.u.Ml(),this.qn&&this.u.ya(),this.Ska=this.u.mb(),this.Lb=this.u.ya(),this.u.CA(this.Lb),!0},Z.Na=!(Q.prototype.wa=function(t,e){if(t&&0===this.Ska){if(t=e?this.Lb-t:t,this.la.offset=this.startOffset+13+(this.qn?8:0),this.Lb-=t,this.la.dh(this.Lb),this.zI=0,e)this.la.offset+=this.Lb;else{for(e=0;e<t;++e)this.zI+=this.la.mb();this.la.offset-=t}this.Ie(t,this.u.offset)}return!0}),(Z.prototype=Object.create(o.prototype)).constructor=Z,Object.defineProperties(Z.prototype,{qn:{get:function(){return 1&this.flags}}}),Z.prototype.parse=function(){return this.Ac(),this.qn&&this.u.Ml(),this.qn&&this.u.ya(),this.ng=this.u.ya(),s(1===this.ng,"Expected a single entry in Sample Auxiliary Information Offsets box"),this.fk=0===this.version?this.u.pI():this.u.rua(),!0},$.Na=!(Z.prototype.wa=function(t,e){return this.fk+=t,this.la.offset=this.startOffset+16+(this.qn?8:0)+(0===this.version?0:4),this.la.vJ(e,this.fk),!0}),($.prototype=Object.create(o.prototype)).constructor=$,Object.defineProperties($.prototype,{xX:{get:function(){return 1&this.flags}},dya:{get:function(){return 2&this.flags}}}),$.prototype.parse=function(){return this.Ac(),this.xX&&(this.u.ya(),this.u.CA(16)),this.Lb=this.u.ya(),!0},tt.Na=!($.prototype.wa=function(t,e){var i,n=e?this.Lb-t:t;if(this.la.offset=this.startOffset+28+(this.xX?20:0),this.Lb-=n,this.la.dh(this.Lb),t=this.la.offset,this.dya)for(n=e?this.Lb:n;0<n;--n)this.la.offset+=8,i=this.la.Yc(),this.la.offset+=6*i;else this.la.offset+=8*(e?this.Lb:n);e?this.Ie(this.length-(this.u.offset-this.startOffset),this.u.offset):this.Ie(this.u.offset-t,t)}),((tt.prototype=Object.create(o.prototype)).constructor=tt).prototype.parse=function(){return this.Ac(),!0},et.Na=!(tt.prototype.wa=function(t,e,i){return i?this.Ie(e-t,this.startOffset+12+t):this.Ie(t,this.startOffset+12),!0}),((et.prototype=Object.create(o.prototype)).constructor=et).prototype.parse=function(){this.Ac(),this.u.Ml(),1===this.version&&this.u.ya(),this.ng=this.u.ya(),this.Vu=[];for(var t=0;t<this.ng;++t)for(var e=this.u.ya(),i=this.u.ya(),n=0;n<e;++n)this.Vu.push(i);return!0},it.Na=!(et.prototype.wa=function(t,e){return this.Vu=e?this.Vu.slice(0,t):this.Vu.slice(t),t=this.Vu.reduce(function(t,e){return 0!==t.length&&t[t.length-1].group===e||t.push({group:e,count:0}),++t[t.length-1].count,t},[]),this.la.offset=this.startOffset+16+(1===this.version?4:0),this.la.dh(t.length),t.forEach(function(t){this.la.dh(t.count),this.la.dh(t.group)}.bind(this)),this.ng>t.length&&this.Ie(8*(this.ng-t.length)),this.ng=t.length,!0}),nt([A,l,p,d,O,I,x,n,h,j,C,f,b,r,c,i],(w={Ua:{moov:M,trak:L,mdia:L,mdhd:D,minf:L,encv:w,schi:L,sidx:U,sinf:L,stbl:L,tenc:q,mvex:L,moof:V,traf:G,tfhd:Y,trun:X,sbgp:et,sdtp:tt,saiz:Q,saio:Z,tfdt:W,mdat:(it.prototype=Object.create(o.prototype)).constructor=it,vmaf:B},sxa:{vpcC:z,SmDm:J("smdm"),CoLL:J("coll")},CZ:{schm:T},AI:{}}).Ua),nt([m,v,_,E,k,S,g,y,R,P],w.AI),nt([A,T],w.CZ),w.Ua[e.ER]=q,w.Ua[e.Nx]=H,w.Ua[e.Mx]=K,w.Ua[e.DR]=$,w.AI[e.XE]=N,w.Dc=o,t.exports={xq:w}},function(t,e){function n(t,e){var i,n,r,a,o;if("number"!=typeof t||"number"!=typeof e)t=!1;else if(t&&e){for(n=(i=Math).abs,a=Math.abs(t),r=Math.abs(e);r;)r=a%(o=r),a=o;t=n.call(i,t*e/a)}else t=0;return t}function i(t,e){"object"==typeof t?(this.xc=t.vc,this.nb=t.S):(this.xc=t,this.nb=e)}_esm(e),i.Eb=function(t){return new i(t,1e3)},i.vZ=function(t,e){return Math.floor(1e3*t/e)},i.Tra=function(t,e){return Math.floor(t*e/1e3)},i.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.greaterThan(e)?t:e})},i.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.lessThan(e)?t:e})},Object.defineProperties(i.prototype,{vc:{get:function(){return this.xc},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{S:{get:function(){return this.nb},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{Y:{get:function(){return 1e3*this.xc/this.nb},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{vh:{get:function(){return this.xc/this.nb},enumerable:!0,configurable:!0}}),i.prototype.Zf=function(t){return t/=this.S,new i(Math.floor(this.vc*t),Math.floor(this.S*t))},i.prototype.add=function(t){var e;return this.S===t.S?new i(this.vc+t.vc,this.S):(e=n(this.S,t.S),this.Zf(e).add(t.Zf(e)))},i.prototype.Qa=function(t){return this.add(new i(-t.vc,t.S))},i.prototype.PH=function(t){return new i(this.vc*t,this.S)},i.prototype.qm=function(t){var e;return this.S===t.S?this.vc/t.vc:(e=n(this.S,t.S),this.Zf(e).qm(t.Zf(e)))},i.prototype.p6=function(t){return n(this.S,t)},i.prototype.xua=function(){return new i(this.S,this.vc)},i.prototype.compare=function(t,e){var i;return this.S===e.S?t(this.vc,e.vc):(i=n(this.S,e.S),t(this.Zf(i).vc,e.Zf(i).vc))},i.prototype.equal=function(t){return this.compare(function(t,e){return t===e},t)},i.prototype.a9=function(t){return this.compare(function(t,e){return t!==e},t)},i.prototype.lessThan=function(t){return this.compare(function(t,e){return t<e},t)},i.prototype.greaterThan=function(t){return this.compare(function(t,e){return e<t},t)},i.prototype.HN=function(t){return this.compare(function(t,e){return t<=e},t)},i.prototype.Or=function(t){return this.compare(function(t,e){return e<=t},t)},i.prototype.toJSON=function(){return{ticks:this.vc,timescale:this.S}},i.prototype.toString=function(){return this.vc+"/"+this.S},i.Gb=new i(0,1),i.Ow=new i(1,1e3),e.T=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.u.offset+=6,this.u.Yc(),!0},e.default=a},function(t,e,i){var n;_esm(e),(t=i(2)).__exportStar(i(147),e),t.__exportStar(i(227),e),t.__exportStar(i(228),e),t.__exportStar(i(229),e),t=i(228),n=i(229),i=i(227),e.Xp={3:i.IQ,4:t.CQ,5:n.bca}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(147).CE,n.__extends(a,r),a.prototype.parse=function(){var t;return this.u.Yc(),t=this.u.mb(),this.Kwa=!!(128&t),this.Vea=!!(64&t),this.xda=!!(32&t),this.Kwa&&this.u.Yc(),this.Vea&&this.u.CA(this.u.mb()),this.xda&&this.u.Yc(),this.aT(),!0},a.tag=3,e.IQ=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(147).CE,n.__extends(a,r),a.prototype.parse=function(){return this.usa=this.u.mb(),this.u.mb(),this.u.Yc(),this.u.mb(),this.maxBitrate=this.u.ya(),this.Bia=this.u.ya(),this.aT(),!0},a.tag=4,e.CQ=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),t=i(147),r=i(226),a=t.CE,n.__extends(o,a),o.prototype.cY=function(){15!==this.u.zc(4)||this.u.zc(24)},o.prototype.parse=function(t){if(this.spa(t)&&64===t.usa)switch(this.nn=this.aY(),this.cY(),this.u.zc(4),this.Tla=5===this.nn||29===this.nn?5:-1,0<this.Tla&&(this.cY(),this.nn=this.aY(),22===this.nn&&this.u.zc(4)),this.nn){case 1:case 2:case 3:case 4:case 6:case 7:case 17:case 19:case 20:case 21:case 22:case 23:this.lV=this.u.zc(1),(this.Yka=this.u.zc(1))&&this.u.zc(14),this.u.zc(1),this.qz=3===this.nn?256:23===this.nn?this.lV?480:512:this.lV?960:1024}return this.skip(),!0},o.prototype.aY=function(){var t=this.u.zc(5);return 31===t&&(t=32+this.u.zc(6)),t},o.prototype.spa=function(t){return t.tag===r.CQ.tag},o.tag=5,i=o,e.bca=i},function(t,e){_esm(e),e.concat=function(){for(var i,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=Array.prototype.concat.apply([],t)).reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e),t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer}},function(t,e,i){var n,r,a;function o(t,e,i){this.console=t,this.stream=e,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length)}_esm(e),n=i(375),r=i(223),a=i(376),o.prototype.parse=function(t){var e=new a.DQ(this.view.byteLength);return this.tc=new n.zE(r.xq.Ua,e,this.view,this.console,{bI:!0}),t=this.tc.parse(t),this.Ua=this.tc.Ua,t},e.ar=o},function(t,e,i){var n;function r(t,e){this.r2=t,this.JK=e.Wa,this.Ev=e.ob}_esm(e),e.lB=void 0,t=i(42),i=i(102),Object.defineProperties(r.prototype,{Wa:{get:function(){return void 0!==this.JK?this.JK:this.r2.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{ob:{get:function(){return void 0!==this.Ev?this.Ev:this.r2.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{S:{get:function(){return this.r2.S},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{zj:{get:function(){return this.r2.zj},enumerable:!1,configurable:!0}}),r.prototype.KY=function(t){this.Ev=t},r.prototype.Hja=function(){this.Ev=void 0},n=r,e.lB=n,t.xf(i.rx,n),t.xf(i.kB,n)},function(t,e,i){var n,r,s,u;function a(t,e,i,n,r,a,o){return e=u.call(this,t,e,i,n,r,a,o)||this,s.mv.xb(e,t,n),e}_esm(e),e.kQ=void 0,t=(n=i(2)).__importDefault(i(124)),r=i(117),s=i(173),u=r.v_,n.__extends(a,u),i=a,e.kQ=i,t.default(s.mv.prototype,i.prototype)},function(t,e,i){var n,r,o,s;function u(t,e,i,n,r){var a=s.call(this,i)||this;return a.e3=!1,u.xb(a,t,e,i,n,r),a}_esm(e),e.AJ=void 0,n=i(2),r=n.__importDefault(i(28)),o=n.__importDefault(i(6)),s=i(83).kv,n.__extends(u,s),u.xb=function(t,e,i,n,r,a){t.af=n,t.Yua=e,t.Oe=r,t.ONa=e.location||i.location,t.gT=e.Pc||i.Md,t.Pva=e.Pva||i.Pva,t.jaa=o.default.time.ea(),t.H=a},Object.defineProperties(u.prototype,{console:{get:function(){return this.H},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{location:{get:function(){return this.ONa},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Md:{get:function(){return this.gT},enumerable:!1,configurable:!0}}),u.prototype.xb=function(t){this.Pa=t},u.prototype.awa=function(t,e){this.ONa=t,this.gT=e},u.prototype.Wga=function(t){var e={type:"logdata",target:"endplay",fields:{}},i=this.mediaType===r.default.Ta.Wb?"audioedit":"videoedit",n=[this.OM===this.Z?this.Lc:this.fd,this.OM===this.Z?-this.duration:this.duration];return t&&t.cE&&n.push(t.cE),e.fields[i]={type:"array",value:n},e},u.prototype.Txa=function(){var t,e;return this.complete?0:(e=(t=this.Yua).P,t.url?this.url===t.url||(e.awa(this,t.location,t.Pc),this.daa(t.url))?0:(this.H.warn("swapUrl failed: ",this.HM),2):(this.H.warn("updateurl, missing url for streamId:",t.Oa,"mediaRequest:",this,"stream:",t),1))},e.AJ=u},function(t,e,i){_esm(e),i(2).__exportStar(i(806),e)},function(t,e,i){var n,c,h,a,r,f,o,s,u,l;function p(t){return t.Qa(a.T.Eb(t.yI))}function d(t,e,i,n,r,a,o,s,u){var c=l.call(this)||this;return c.H=t,c.Sg=e,c.eg=i,c.sd=n,c.I=r,c.Qnb=a,c.V=o,c.Tv=s,c.qh=u,c.Kk=c.H.error.bind(c.H),c.Sb=c.H.warn.bind(c.H),c.jn=c.H.trace.bind(c.H),null!==(n=n.events)&&void 0!==n&&n.addListener("ready",function(){c.Cv()}),c.S2a=new f.jGa(c.I,c.Sg,c.eg.pc,c.H),c.reset(),c}_esm(e),e.Jba=e.vu=void 0,n=i(2),t=i(17),c=n.__importDefault(i(28)),h=n.__importDefault(i(6)),a=i(22),r=i(5),f=i(807),o=i(117),s=i(72),u=i(25),e.vu=p,l=t.EventEmitter,n.__extends(d,l),Object.defineProperties(d.prototype,{endOfStream:{get:function(){return this.wS},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{F3:{get:function(){return this.sd?this.sd.F3:-1},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{G2b:{get:function(){return this.dm.length},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{OLb:{get:function(){return this.Uj},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{q$a:{get:function(){return!!this.sd.YBb},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{TA:{get:function(){return!!this.sd.reset},enumerable:!1,configurable:!0}}),d.prototype.reset=function(t){var e;null!==(e=this.hOa)&&void 0!==e&&e.Nb(),this.Xj=!1,t||(this.dm=[]),this.Uj=this.Yfa=this.aL=void 0,this.Ifa=!1,this.bL=void 0,this.wS=!1,this.UOa(a.T.Gb),null!==(t=(e=this.sd).reset)&&void 0!==t&&t.call(e),this.S2a.reset()},d.prototype.wWa=function(){this.Yfa=!0},d.prototype.pause=function(){this.Xj=!0},d.prototype.resume=function(){this.Xj=!1,this.Cv()},d.prototype.gz=function(){this.Xj||this.Cv()},d.prototype.sna=function(){var t;return null===(t=this.Uj)||void 0===t?void 0:t.me},d.prototype.Urb=function(t){var e;this.I.fVa&&(r.assert(t.Pa),e=t.Pa.gb,r.assert(void 0!==t.fd),r.assert(void 0!==e.Lc),t.fd>=e.Lc)||(this.dm.push(t),this.Cv())},d.prototype.Is=function(){this.Cv()},d.prototype.h$=function(t){-1!==(t=this.dm.indexOf(t))&&this.dm.splice(t,1)},d.prototype.U3a=function(t,e){this.I.$ha&&e&&void 0===this.Uj&&this.xMa(t,0),this.Cv()},d.prototype.d9=function(t){var e,i,n=this;this.wS||(this.wS=!0,this.Cv(),this.q$a)||(t&&this.Tv&&this.I.Gzb?(i=a.T.Eb(this.I.O$a),t=t.Qa(i),t=(i=s.nya(this.Tv,t,!0)).Ds,i=i.promise,null!==(e=this.hOa)&&void 0!==e&&e.Nb(),this.hOa=t,i.then(function(){n.wS&&n.sd.endOfStream()})):this.sd.endOfStream())},d.prototype.G$=function(){return JSON.stringify(this.dm)},d.prototype.UOa=function(t){var e;null!==(e=this.ePa)&&void 0!==e&&e.equal(t)||(this.ePa=t,this.sd.dYb(t.vc,t.S))},d.prototype.Cv=function(){var t,e,i,n,r,a,o,s,u=this.I;if(this.dm.length||this.Uj&&!this.Uj.ef)if(this.sd&&!1!==this.sd.ready){if((!this.Uj||this.Uj.ef||this.Uj.iu())&&(this.Uj&&!this.Uj.ef||this.dm.length))if(this.Xj)e=this.Uj&&!this.Uj.ef?this.Uj:this.dm[0],this.kL("@"+h.default.time.ea()+", bufferManager _append ignored, paused, nextRequest: "+JSON.stringify(e));else if((!this.Uj||this.Uj.ef||(this.TMa(this.Uj),this.Uj.ef))&&this.dm.length)if((e=this.dm[0]).aborted)this.Sb("aborted MediaRequest should not appear in the toAppend list:",e.toString(),"complete:",e.complete),this.kL("@"+h.default.time.ea()+", append: removing aborted request from toAppend: "+e.toString()),this.dm.shift();else if(n=(i=e.stream).P,i.Wg)if(this.tYb(i,e.index))this.Yfa=!1,this.xMa(i,e.index);else if(r=this.V.Oo(n),a=this.BJb(i),r||a||!(this.Ifa&&i.track.KW||u.Vaa))if(i=this.QYa(e),this.Sg!==c.default.Ta.Wb||!e.uq&&!e.zw||!e.wa||u.WD||this.wS||1!==this.dm.length||!(i>u.YW)||null!==(t=e.FI)&&void 0!==t&&t.x7){if(!((u.fVa||u.yBb)&&(t=e.Pa.gb,(r=this.$zb())&&(o=t.Sk,s=e.Lc>=r,i=i>u.YW,r<t.Lc&&s&&i&&!o))))if(u.XRb&&this.qh&&(u=this.qh(n.Pb))&&!u.zT)this.pause();else{this.Ifa||(this.Ifa=a),this.dm.shift();try{this.Ukb(e)}catch(t){throw this.H.error(t),t}}}else this.LWb()}else this.kL("@"+h.default.time.ea()+", append: not appending, sourceBuffer not ready")},d.prototype.LWb=function(){var t=this;this.Tv&&(this.Xpa?this.Xpa.tKb||this.Xpa.Hm():this.Xpa=this.Tv.AG(function(){return t.DLb()},"JIT Appender"))},d.prototype.DLb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:return 1!==this.dm.length?[3,3]:!(e=this.dm[0]).uq&&!e.zw||null!==(i=e.FI)&&void 0!==i&&i.x7?[2]:(i=this.QYa(e),(e=this.I.YW)<i?[4,s.Jk.tJ(a.T.Eb(i-e))]:[3,2]);case 1:t.bd(),t.label=2;case 2:return this.Cv(),[3,0];case 3:return[2]}})},d.prototype.QYa=function(t){return t.zd-this.V.Re()},d.prototype.tYb=function(t,e){return!(!this.Yfa&&void 0!==this.aL&&t.Oa===this.aL.Oa)||(t=t.Wg,r.assert(t),1<t.length&&u.xQa(t,function(t){return t.Qd<=e})!==this.aL.f0a)},d.prototype.BJb=function(t){return 0===t.mediaType||!t.Qz||void 0!==this.aL&&(t=t.Wg,r.assert(t),!1===t[this.aL.f0a].Tk)},d.prototype.$zb=function(){throw Error("not supported")},d.prototype.xMa=function(t,n){var e=t.Wg.reduce(function(t,e,i){return e.Qd<=n?i:t},0);if(!this.sd.appendBuffer(t.Wg[e].data,{ad:!0,profile:t.profile,bitrate:t.bitrate,Oa:t.id}))throw this.Sb("appendHeader error: "+this.sd.error),this.kL("@"+h.default.time.ea()+", appendHeader error: "+this.sd.error),Error("appendHeaderError");this.kL("@"+h.default.time.ea()+", header appended, streamId: "+t.Oa),this.aL={Oa:t.Oa,f0a:e},this.Yob(t.P.Pb||0,t.Oa,e),this.Cv()},d.prototype.Ukb=function(t){var e,i,n=t.bua||a.T.Gb,r=t.Pa.gb.O;r.Ha&&1/0!==r.Ha&&(n=new a.T(r.Ha,1e3).add(n).vh,1/0===this.eg.duration||this.eg.duration<n)&&(this.eg.duration=n),n=void 0!==t.av?a.T.Eb(t.av).add(t.bua):void 0,r=null===(e=this.dm[0])||void 0===e?void 0:e.xj,e={endOfStream:this.endOfStream||!(null===(i=t.FI)||void 0===i||!i.x7),r8:n,eX:r},i=this.S2a.append(t,e),this.UOa(i),this.TMa(t)},d.prototype.TMa=function(t){var e=t.eG(this.sd,this.eg.pc,this.Uj),i=e.status;(e=e.mk)&&this.emit(e.type,e),i!==o.Ij.Mf?(this.Uj=t,i===o.Ij.xx&&(void 0===this.bL||this.Sg!==c.default.Ta.Wb||t.xj.equal(this.bL)||(this.Tob(t,this.bL),this.bL=void 0),this.kL("@"+h.default.time.ea()+", request appended, type: "+t.mediaType+", streamId: "+t.Oa+", pts: "+t.zd+"-"+t.me),t.uq||t.zw?(this.bL=t.xe,this.nlb(t,this.ePa||a.T.Gb),null!==(i=(e=this.sd).YBb)&&void 0!==i&&i.call(e,t.FI),null!==(e=t.FI)&&void 0!==e&&e.x7&&this.Qnb&&this.d9(t.xe)):this.bL=void 0,this.Zob(t),this.Cv())):this.Tkb(t)},d.prototype.Tkb=function(t){if(void 0===this.sd.error)throw t=Error("failure to append queued mediaRequest: "+(null==t?void 0:t.toString())+" err: "+this.sd.error),this.Kk(t.message),t;if("done"!==this.sd.error)throw this.Kk("failure to append queued mediaRequest:",null==t?void 0:t.toString(),"err:",JSON.stringify(this.sd.error)),this.sd.error},d.prototype.nlb=function(t,e){var i=t.stream.sa,n=t.Pd;this.I.fm&&t.stream.uf&&(n=n.Qa(t.stream.uf)),p(n.Qa(i)).add(p(i)).add(p(e))},d.prototype.Yob=function(t,e,i){t={type:"headerAppended",mediaType:this.Sg,manifestIndex:t,streamId:e,isIndex:i},this.emit(t.type,t)},d.prototype.Zob=function(t){t={type:"requestAppended",mediaType:this.Sg,request:t},this.emit(t.type,t)},d.prototype.kL=function(t){t={type:"managerdebugevent",message:t},this.emit(t.type,t)},d.prototype.Tob=function(t,e){var i={type:"logdata",target:"endplay",fields:{audiodisc:{type:"array",value:[i=t.fd,t=t.xj.Qa(e).Y]}}};this.emit(i.type,i)},i=d,e.Jba=i},function(t,e,i){var n;function r(t,e){return t<e?-1:e<t?1:0}function a(t,e){if(this.data=null!=t?t:[],this.compare=null!=e?e:r,!this.empty)for(t=(this.length>>1)-1;0<=t;t--)this.Kfa(t)}_esm(e),e.C0=void 0,n=i(2),Object.defineProperties(a.prototype,{length:{get:function(){return this.data.length},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{empty:{get:function(){return 0===this.data.length},enumerable:!1,configurable:!0}}),a.prototype.push=function(t){this.data.push(t),this.oha(this.length-1)},a.prototype.pop=function(){var t,e;if(!this.empty)return t=this.data[0],e=this.data.pop(),this.empty||(this.data[0]=e,this.Kfa(0)),t},a.prototype.Pw=function(){return this.data[0]},a.prototype.JTb=function(t){-1!==(t=this.data.indexOf(t))&&this.oha(t)},a.prototype.map=function(t){return this.data.map(t)},a.prototype.find=function(t){return n.__read(this.data.filter(t),1)[0]},a.prototype.clear=function(){this.data=[]},a.prototype.remove=function(t){var e,i,n=this.data;-1!==(t=n.indexOf(t))&&(e=n.pop(),t<n.length&&(n[t]=e,n=n[i=t-1>>1],0<=i&&this.compare(e,n)<0?this.oha(t):this.Kfa(t)))},a.prototype.lsb=function(){for(var t=this.data,e=1;e<t.length;e++)if(this.compare(t[e],t[e-1>>1])<0)throw Error("Audit failed at position "+e+" of "+t)},a.prototype.contains=function(t){return 0<=this.data.indexOf(t)},a.prototype.oha=function(t){for(var e,i,n=this.data,r=this.compare,a=n[t];0<t&&!(0<=r(a,i=n[e=t-1>>1]));)n[t]=i,t=e;n[t]=a},a.prototype.Kfa=function(t){for(var e,i,n,r=this.data,a=this.compare,o=this.length>>1,s=r[t];t<o&&(n=r[e=1+(t<<1)],(i=e+1)<this.length&&a(r[i],n)<0&&(n=r[e=i]),!(0<=a(n,s)));)r[t]=n,t=e;r[t]=s},e.C0=a},function(t,e,i){var n;_esm(e),e.K9=void 0,n=i(16),e.K9=function(t){switch(t){case n.ma.xd:t=n.Jc.xd;break;case n.ma.Of:t=n.Jc.Of;break;case n.ma.zh:case n.ma.dj:case n.ma.gr:t=n.Jc.dj;break;default:t=n.Jc.ej}return t}},function(t,e,i){var n,r;function a(t){var e=this;void 0===t&&(t=[]),(this.items=t).forEach(function(t){return e.Oxa(t)})}_esm(e),e.bK=void 0,n=i(5),r=i(25),Object.defineProperties(a.prototype,{length:{get:function(){return this.items.length},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{TX:{get:function(){var t;return null!==(t=this.video)&&void 0!==t?t:this.audio},enumerable:!1,configurable:!0}}),a.prototype.get=function(t){return 1===t?this.video:this.audio},a.prototype.every=function(t){return this.items.every(t)},a.prototype.some=function(t){return this.items.some(t)},a.prototype.forEach=function(t){this.items.forEach(t)},a.prototype.find=function(t){return r.ig(this.items,t)},a.prototype.reduce=function(t,e){return this.items.reduce(t,e)},a.prototype.filter=function(t){return new a(this.items.filter(t))},a.prototype.replace=function(t,e){var i=this.items.indexOf(t);n.assert(-1<i),n.assert(t.mediaType===e.mediaType),this.items[i]=e,this.Oxa(e)},a.prototype.wXb=function(t,e){(t=this.get(t))?this.replace(t,e):this.add(e)},a.prototype.add=function(t){this.items.push(t),this.Oxa(t)},a.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.items.splice(e,1),this.Vub(t.mediaType),!0)},a.prototype.clear=function(){this.items=[],this.audio=this.video=void 0},a.prototype.Oxa=function(t){1===t.mediaType?this.video=t:this.audio=t},a.prototype.Vub=function(t){1===t?this.video=void 0:this.audio=void 0},e.bK=a},function(t,e,i){var n,l,r,a,p,d,b,m,g;_esm(e),e.t_=void 0,n=i(2),i(5),t=i(42),l=n.__importDefault(i(28)),r=n.__importDefault(i(124)),a=n.__importDefault(i(6)),p=i(241),d=i(101),b=i(117),m=a.default.$q,g=i(830),i=n.__importDefault(i(831)),a=function(h){function f(t,e,i,n,r,a,o,s){for(var u=2;6!==u;)switch(u){case 3:void 0===i.responseType&&(i.responseType=i.wa||m.pc&&!m.pc.wY.SR?0:1),c=h.call(this,t,e,c,i,n,a,o)||this,d.Rm.xb(c,t,i,s),u=7;break;case 2:var c=this;c=(c=["cache","edit"].filter(function(t,e){return[r,i.wa][e]})).length?"("+c.join(",")+")":"",u=3;break;case 7:return c}}for(var t=2;9!==t;)switch(t){case 2:n.__extends(f,h),f.create=function(t,e,i,n,r,a,o,s){for(var u,c=2;11!==c;)switch(c){case 1:return new g.Nya(t,i,n,r,a,e,o,s);case 2:c=!e.ah&&n.wa&&t.mediaType===l.default.Ta.Mb&&m.pc&&m.pc.wY.SR?1:5;break;case 4:h=Math.ceil(n.fa/n.SN),a=n.offset,u=n.fa,r=new p.wE(t,n,r,e,o,s),c=7;break;case 7:s=Math.ceil(n.fa/h),c=6;break;case 6:c=0<u?14:13;break;case 5:c=n.SN&&n.fa>n.SN?4:12;break;case 13:return r;case 14:var h;a+=(h={offset:a,fa:Math.min(u,s),responseType:n.responseType}).fa,u-=h.fa,r.push(new b.v_(t,i,"subrequest",h,r,e,o)),c=6;break;case 12:return new f(t,i,n,r,a,e,o,s)}},t=5;break;case 5:return f.prototype.toString=function(){for(;;)return"ID: "+this.mi()+":"+d.Rm.prototype.toString.call(this)},f.prototype.toJSON=function(){return{ID:this.mi(),request:d.Rm.prototype.toJSON.call(this)}},f}}(b.v_),e.t_=a,r.default(i.default,a.prototype),t.xf(d.Rm,a,!1)},function(t,e,i){var n,a,o,r,s,u,c,h;function f(t,e,i,n,r,a){return i=h.call(this,t,e,i,n,r)||this,u.Rm.xb(i,t,e,a),i.Qc=0,i.wa||i.Bk(),i.ef=!1,i}_esm(e),e.wE=void 0,n=i(2),a=i(5),t=i(42),o=i(9),r=i(25),s=i(380),u=i(101),c=i(117),h=s.sba,n.__extends(f,h),Object.defineProperties(f.prototype,{ad:{get:function(){return!1},enumerable:!1,configurable:!0}}),f.prototype.push=function(t){this.Qc+=t.fa,h.prototype.push.call(this,t)},f.prototype.iu=function(){var t;return!this.ef&&!!this.Ea.length&&!(null===(t=r.ig(this.Ea,function(t){return!t.ef}))||void 0===t||!t.iu())},f.prototype.eG=function(e,i){var n,r;return a.assert(!this.ef),n=c.Ij.Vhb,r=o.vq(this),this.ef=this.Ea.every(function(t){return!!t.ef||!!t.iu()&&(n=t.eG(e,i,void 0,r).status)===c.Ij.xx}),n!==c.Ij.xx||this.ef||(n=c.Ij.qib),{status:n}},f.prototype.kVb=function(){this.Ea.forEach(function(t){t.iY()})},f.prototype.mi=function(){return this.Ea?this.Ea[0].mi()+"-"+this.Ea[this.Ea.length-1].mi():"empty"},f.prototype.toString=function(){return"ID: "+this.mi()+":"+u.Rm.prototype.toString.call(this)+"(aggregate)"},f.prototype.toJSON=function(){return{ID:this.mi(),request:h.prototype.toJSON.call(this)}},i=f,e.wE=i,t.xf(u.Rm,i)},function(t,e,i){var n,o,r,s,u,c,a,h,f;function l(t){return t.sPa(),{done:!1,value:t.value}}function p(t,e){this.console=t,this.$f=e,this.wnb=this.tS=0,this.zg=[],this.console=u.wq(s.default,this.console,"QueueIterator:")}function d(t,e,i){var n=f.call(this,function(){return r.ga&&n.console.trace("Next item requested",{index:n.index}),n.tWb(n.index++)})||this;return n.parent=t,n.tWb=e,n.console=i,n.YK=!1,n.index=0,n.hga=!1,n.s4a=function(t){var e=t.index;t=t.qsa,n.index>=e&&(n.index=Math.max(e,n.index-t)),e=n.console,r.ga&&e&&e.trace("QueueIteratorInstance: onRemoved modified",n.index)},n}_esm(e),e.osb=e.wjb=e.x_=void 0,n=i(2),t=i(17),o=i(149),r=i(20),s=n.__importDefault(i(6)),u=i(9),c=i(5),i=i(42),Object.defineProperties(p.prototype,{Ozb:{get:function(){return this.tS},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ESa:{get:function(){for(var t,e=0;e<this.zg.length&&((t=this.zg[e]).jW&&(null===(t=t.item)||void 0===t||!t.done));e++);return e},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{count:{get:function(){return this.$f},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Pz:{get:function(){return 0===this.$f},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Zua:{get:function(){for(var t=0;t<this.zg.length&&this.zg[t].Ppa;t++);return t},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{head:{get:function(){var t=n.__read(this.zg,1)[0];return(t=t&&t.item)&&!t.done&&t.value},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{bsa:{get:function(){for(var t=0;t<this.zg.length&&this.zg[t].jW;t++);return t},enumerable:!1,configurable:!0}}),p.prototype.X4=function(){var t;void 0===this.$f&&(t=this.console,r.ga&&t&&t.trace("QueueIterator: enqueueEnd"),this.Mxa(this.bsa-(this.$f||0)))},p.prototype.fp=function(){return this.zg.map(function(t){return t.item})},p.prototype.oaa=function(){return this.Bf||(this.Bf=this.zg.filter(function(t){return(null==t?void 0:t.item)&&!t.item.done}).map(function(t){return t.item.value})),this.Bf},p.prototype.Mxa=function(t){var e;r.ga&&this.console.trace("updateCount",{sbc:this.$f,mM:t}),void 0!==this.$f&&(e=this.zg[this.$f])&&this.mpa(e),this.$f=void 0===this.$f||void 0===t?t:this.$f+t,void 0!==this.$f&&(this.$f=Math.max(0,this.$f),(e=this.zg[this.$f])&&e.uH.resolve({done:!0}))},p.prototype.enqueue=function(t){var e;return r.ga&&this.console.trace("Enqueue called"),e=this.bsa,this.U3(),this.eUb(e,{value:t,done:!1}).iUa.promise},p.prototype.J7a=function(){r.ga&&this.console.trace("resetEnd"),this.Mxa(void 0)},p.prototype.clear=function(t){var e,i,n;for(r.ga&&this.console.trace("clear"),this.r6a(),e=this.Zua,0<(i=this.zg.length-e)&&(n={index:e,qsa:i},r.ga&&this.console.trace("Removing items",n),this.zg.splice(e,i),this.U3(),this.emit("onRemoved",n)),i=1;i<e;i++)this.mpa(this.zg[i]);this.$f=void 0,this.Mxa(t&&t+e),this.tS&&(this.tS=0)},p.prototype.getIterator=function(){var e=this,t=u.wq(s.default,this.console,"QueueIteratorInstance::");return new h(this,function(t){return e.wYa(t)},t)},p.prototype.nM=function(){var t;if(0<this.Zua&&(t=n.__read(this.zg,1)[0]).jW)return r.ga&&this.console.trace("dequeue",t.id),this.r6a(1),this.emit("onDequeue",t.uH.promise)},p.prototype.remove=function(t){for(var e,i,n=0;n<this.zg.length;n++)if((i=(e=this.zg[n]).item)&&!i.done&&i.value===t){this.zg.splice(n,1),this.$f&&this.$f>n&&this.$f--,this.U3(),r.ga&&this.console.trace("removed",{id:e.id}),this.emit("onRemoved",{index:n,qsa:1});break}},p.prototype.r6a=function(t){var e;0<(t=t||Math.min(this.Zua,this.bsa))&&(e=this.zg.splice(0,t),this.U3(),this.$f&&(this.$f-=t),r.ga&&this.console.trace("pruned",t),Promise.resolve().then(function(){e.forEach(function(t){t.iUa.resolve()})}),this.emit("onRemoved",{index:0,qsa:t}),this.tS+=t)},p.prototype.wYa=function(t){var e;return r.ga&&this.console.trace("getNextItemCalled",{offset:t}),void 0===this.count||0<this.count?(this.C_a(t),(e=this.zg[t]).XVb.resolve(),t=e.uH.promise,r.ga&&this.console.trace("getNextItem:return",{id:e.id})):(r.ga&&this.console.trace("getNextItem:returnDone"),t=Promise.resolve({done:!0})),t},p.prototype.eUb=function(t,e){var i=(i=!e.done&&e.value)&&i.toJSON?i.toJSON():i;return r.ga&&this.console.trace("Providing result",{Arb:t,item:i}),this.C_a(t),(i=(t=this.zg[t]).uH.resolve)(e),t},p.prototype.C_a=function(t){var e;void 0===this.zg[t]&&(e={},this.mpa(e),this.zg[t]=e,t===this.$f&&e.uH.resolve({done:!0}),r.ga&&this.console.trace("Item initialized",{Arb:t}))},p.prototype.qka=function(i){var n={};return n.promise=new Promise(function(e,t){n.resolve=function(t){e(t),i&&i(t)},n.reject=t}),n},p.prototype.mpa=function(e){var i=this;e.uH=this.qka(function(t){e.item=t,e.jW=!0,r.ga&&i.console.trace("Item resolved",{id:e.id})}),e.id&&e.Ppa&&!e.jW&&(e.uH.resolve({done:!0}),r.ga&&this.console.warn("Overwriting requested queue item",e.id)),e.iUa=this.qka(),e.XVb=this.qka(function(){e.Ppa=!0,r.ga&&i.console.trace("Item requested",{id:e.id})}),e.id=this.wnb++,e.Ppa=!1,e.jW=!1,e.item=void 0},p.prototype.U3=function(){this.Bf=void 0},p.prototype.xEb=function(){var r=this,t=u.wq(s.default,this.console,"QueueIteratorInstance::"),a=new h(this,function(t){var i,n;return 0===r.count?o.AsyncIterator.boa():(i=r.wYa(t),n=r.zg[0],i.then(function(t){return e=function(){a.wN||(n===r.zg[0]?r.nM():c.assert(!r.zg.filter(function(t){return t.uH.promise===i}).length,"Out of order acknowledgements are not supported"))},(t=t).done?t:{value:{value:t.value,sPa:e}};var e}))},t);return a},a=p,e.x_=a,i.xf(t.EventEmitter,a),f=o.AsyncIterator,n.__extends(d,f),d.prototype.Fh=function(){this.console.trace("disposed"),this.YK=!0,this.ed(),f.prototype.Fh.call(this)},d.prototype.next=function(){return this.wN||this.vN(),f.prototype.next.call(this)},d.prototype.cancel=function(){return this.ed(),f.prototype.cancel.call(this)},d.prototype.ed=function(){this.parent.HD("onRemoved",this.s4a),this.hga=!1},d.prototype.vN=function(){this.hga||(this.hga=!0,this.parent.on("onRemoved",this.s4a))},h=d,e.wjb=h,e.osb=function(t){return o.map(t,l)}},function(t,e){function i(t){this.parent=t}_esm(e),e.Kea=void 0,Object.defineProperties(i.prototype,{$0a:{get:function(){var t;return null!==(t=this.PIb)&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.$0a},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{sW:{get:function(){var t;return null!==(t=this.FPb)&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.sW},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{ou:{get:function(){var t;return null!==(t=this.Kg)&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.ou},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{d1a:{get:function(){var t,e;return null!==(t=this.Je)&&void 0!==t?t:null===(t=this.track)||void 0===t||!t.equals(null===(t=this.parent)||void 0===t?void 0:t.track)||null===(e=this.parent)||void 0===e?void 0:e.Je},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{g1a:{get:function(){var t;return null!==(t=this.tZb)&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.g1a},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{kqa:{get:function(){var t;return null!==(t=this.uZb)&&void 0!==t?t:null===(t=this.parent)||void 0===t?void 0:t.kqa},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{track:{get:function(){return this.bXb},enumerable:!1,configurable:!0}}),i.prototype.Nb=function(){this.parent=void 0},i.prototype.N8a=function(t){this.PIb=t},i.prototype.OXb=function(t){this.FPb=t},i.prototype.Z8a=function(t){this.Kg=t},i.prototype.NY=function(t){this.Je=t},i.prototype.ZXb=function(t){this.tZb=t},i.prototype.a9a=function(t){this.uZb=t},i.prototype.PY=function(t){this.bXb=t},e.Kea=i},function(t,e,i){_esm(e),i(2).__exportStar(i(837),e)},function(t,e,i){var n;function r(t,e){for(var i=2;3!==i;)switch(i){case 4:i=3;break;case 2:this.config=t,this.QN=e,this.sia=null,i=4}}_esm(e),e.CJ=void 0,n=i(246),r.prototype.tUa=function(t,e){var i=null===this.sia?t*(100-this.config.haa)/100:n.bia(t,this.sia);return e=null!=e?e:this.QN,t=this.config.uqa&&e?(t=n.bia(t,e),Math.max(t,i)):i},r.prototype.jP=function(t){for(var e=2;1!==e;)switch(e){case 4:this.sia=t,e=3;break;case 2:this.sia=t,e=1}},r.prototype.Kxa=function(t){for(var e=2;1!==e;)2===e&&(this.config=t,e=1)},e.CJ=r},function(t,e,i){var r;_esm(e),e.bia=e.SD=e.GVa=void 0,r=i(2).__importDefault(i(115)).default.HVa,e.GVa=function(t,i,e){var n,r,a=0;return e?t.some(function(t){var e=t.b;return t=t.m,i<=e?(a=r&&e!==n?r+(t-r)/(e-n)*(i-n):t,!0):(n=e,a=r=t,!1)}):t.some(function(t){return a=t.m,i<=t.b}),a},e.SD=function(t,e,i){var n;return e=(null===(n=e.Ra)||void 0===n?void 0:n.Ga)||0,t.Bsb?e*(1-(t=r(t.Asb,i.lm-i.Mc,1))):e*t.haa/100},e.bia=function(t,e){return t<2*e?t/2:t-e}},function(t,e,i){var n;function r(){}function a(t,e){this.im=t,void 0!==e?(n(e<=t.Im,"require remain_sec <= chunk.sec but has "+e+" and "+t.Im),this.gl=e):this.gl=t.Im}function o(t){for(var e in void 0===t&&(t=[]),this.Yo=[],this.xh=this.Sl=0,t)this.add(t[e],void 0)}n=i(5).assert,r.prototype=Error(),(a.prototype.constructor=a).prototype.Et=function(){return new a(this.im,this.gl)},(o.prototype.constructor=o).prototype.add=function(t,e){t=new a(t,e),this.Yo.push(t),this.xh+=t.gl,this.Sl+=t.im.Bz()*t.gl},o.prototype.Et=function(){var t,e=new o(void 0);for(t in this.Yo)e.add(this.Yo[t].im,this.Yo[t].gl);return e},o.prototype.bu=function(){try{return this.Yo[0]}catch(t){}},o.prototype.E5a=function(t){var e;for(n(0<=t,"unexpected play_for_x_sec: x="+t);0<t;){if(void 0===this.bu())throw new r;t<this.bu().gl?(e=this.bu().im.Bz()*t,this.bu().gl-=t,this.xh-=t,this.Sl-=e,t=0):(e=this.Yo.shift(),this.xh-=e.gl,this.Sl-=e.im.Bz()*e.gl,t-=e.gl)}},o.prototype.BSb=function(t){var e;n(0<=t,"unexpected play_y_kb: y="+t);for(var i=0;0<t;){if(void 0===this.bu())throw new r;t<this.bu().gl*this.bu().im.Bz()?(e=t/this.bu().im.Bz(),this.bu().gl-=e,this.xh-=e,this.Sl-=t,i+=e,t=0):(e=this.Yo.shift(),this.xh-=e.gl,this.Sl-=e.im.Bz()*e.gl,i+=e.gl,t-=e.im.Bz()*e.gl)}return i},t.exports={Jza:o,Bdb:r}},function(t){var i,n,r,a,o,s;function u(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function h(e){if(i===setTimeout)return setTimeout(e,0);if((i===u||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function f(){a&&o&&(a=!1,o.length?r=o.concat(r):s=-1,r.length&&l())}function l(){var t;if(!a){t=h(f),a=!0;for(var e=r.length;e;){for(o=r,r=[];++s<e;)o&&o[s].ax();s=-1,e=r.length}o=null,a=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function p(t,e){this.YDb=t,this.Cy=e}function e(){}t=t.exports={},i="function"==typeof setTimeout?setTimeout:u,n="function"==typeof clearTimeout?clearTimeout:c,a=!(r=[]),s=-1,t.kbc=function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.push(new p(t,e)),1!==r.length||a||h(l)},p.prototype.ax=function(){this.YDb.apply(null,this.Cy)},t.title="browser",t.h9b=!0,t.CVa={},t.U8b=[],t.version="",t.Zcc={},t.on=e,t.addListener=e,t.once=e,t.HD=e,t.removeListener=e,t.removeAllListeners=e,t.emit=e,t.OX=e,t.b6a=e,t.listeners=function(){return[]},t.d9b=function(){throw Error("process.binding is not supported")},t.C9b=function(){return"/"},t.r9b=function(){throw Error("process.chdir is not supported")},t.Rcc=function(){return 0}},function(t){t.exports={tFa:{code:-1,description:"MediaCache is not supported."},u7b:{code:100,description:"Resource was not found"},rhb:{code:101,description:"Resource Metadata was not found"},jK:{code:102,description:"Read failed",Uq:function(t,e){return{code:this.code,description:t,cause:e}}},w1:{code:200,description:"Daily write limit exceeded"},DJ:{code:201,description:"Capacity has been exceeded"},v1:{code:202,description:"Write failed, cause unknown",Uq:function(t,e){return{code:this.code,description:t,cause:e}}},s8b:{code:203,description:"Write failed, cause unknown"},xeb:{code:300,description:"Failed to delete resource",Uq:function(t,e){return{code:this.code,description:t,cause:e}}},sB:{code:900,description:"Invalid partition name"},Sgb:{code:700,description:"Invalid parition configuration, commitment exceeds capacity."},TAa:{code:701,description:"Failed to initialize underlying disk cache."},qhb:{code:800,description:'Metadata failed to pass validation. Metadata must be an object with a numeric "lifespan" property.'}}},function(t){t.exports={sZa:function(t){var n;if(t&&0!==t.length)return n=[],t.forEach(function(e){var i;void 0===e.error.code&&(e.error.code=0),void 0===e.error.description&&(e.error.description="Unknown"),n.forEach(function(t){e.error&&e.error.code==t.error.code&&e.error.description===t.error.description&&(i=t)}),i?i.resources.push(e.Kq):n.push({error:e.error,resources:[e.Kq]})}),n},oXa:function(t){var e={freeSize:t.An,dailyBytesRemaining:t.jM,bytesWritten:t.Ok,time:t.time,duration:t.duration};return t.items&&(e.items=t.items.map(function(t){return{key:t.key,operation:t.al,itemBytes:t.D7,error:t.error}})),e},Uw:function(t){return t.catch(function(t){setTimeout(function(){throw t},0)})}}},function(t,e,i){var n,r,a;_esm(e),e.bH=void 0,n=i(2).__importDefault(i(6)),r=i(890),e.bH=function(){var t;return a||(t=new n.default.Console("ASEJS","media|asejs"),a=new r.Dya(t)),a}},function(t,e,i){var n,r;function a(t){void 0===t&&(t={Zk:!1,currentTime:r.T.Gb,speed:1}),this.$c={Zk:function(){return"function"==typeof t.Zk?t.Zk():t.Zk},currentTime:function(){return"function"==typeof t.currentTime?t.currentTime():t.currentTime},speed:function(){return"function"==typeof t.speed?t.speed():t.speed}}}_esm(e),e.k1=void 0,t=i(17),n=i(42),r=i(22),Object.defineProperties(a.prototype,{Zk:{get:function(){return this.$c.Zk()},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{currentTime:{get:function(){return this.$c.currentTime()},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{speed:{get:function(){return this.$c.speed()},enumerable:!1,configurable:!0}}),i=a,e.k1=i,n.xf(t.EventEmitter,i)},function(t,e,i){var n,r,a,o;function s(t,e){this.zi=t,this.options=n.__assign({Yub:!0},e)}_esm(e),e.HB=void 0,n=i(2),r=i(20),a=i(9),o=i(54),Object.defineProperties(s.prototype,{ED:{get:function(){return"trace-"+this.zi.source},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{mj:{get:function(){return this.ED},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{enabled:{get:function(){return r.ga},enumerable:!1,configurable:!0}}),s.prototype.Ho=function(t){var e,i;if(t.Qi===o.de.$p||t.Qi===o.de.Zn)return e=a.XTa(this.zi.zLb),i=this.zi.WIb,t.Qi===o.de.$p&&this.options.Yub&&this.zi.clear(),t=e,Object.keys(i).length&&(t=n.__spread(e,[i])),t},s.prototype.Nb=function(){this.zi.Nb()},e.HB=s},function(t,e,i){var c;_esm(e),e.Z7a=e.jYa=e.map=void 0,c=i(2),i(927),e.map=function(u){return function(s){return function(t,e,i){var n=Reflect.EYa(u,t,e)||{Fb:{},Era:{}},r="number"==typeof i,a=r?null!==(o=n.Fb[i])&&void 0!==o?o:{}:n.Era,o=c.__assign(c.__assign(c.__assign({},a),s),{rules:c.__spread(null!==(a=a.rules)&&void 0!==a?a:[],null!==(a=s.rules)&&void 0!==a?a:[])});r?n.Fb[i]=o:n.Era=o,Reflect.B4(u,n,t,e)}}},e.jYa=function(i){return function(t,e){return Reflect.EYa(i,t.constructor.prototype,e)}},e.Z7a=function(){return function(){return function(t){return t}}}},function(t,n,e){var i;_esm(n),n.n6=n.oq=n.isEqual=n.nW=void 0,i=e(9),n.nW=function(t){return!!t.W},n.isEqual=function(t,e){var i=n.nW(t);return i===n.nW(e)&&(i?t.W===e.W:t.Ca===e.Ca)},n.oq=function(t){return(n.nW(t)?t:(t=t.Ca).qa[t.Yd]).W},n.n6=function(t,e){return t.z3?t.z3 instanceof i.T?{offset:t.z3,xa:e.Yd}:t.z3:{offset:i.T.Gb,xa:e.Yd}}},function(t){t.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},function(t,e,i){var a,o,r,s;function u(t,e,i){for(var n=i.next();!n.done;){if((e=t["@@transducer/step"](e,n.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=i.next()}return t["@@transducer/result"](e)}function c(t,e,i,n){return t["@@transducer/result"](i[n](r(t["@@transducer/step"],t),e))}a=i(968),o=i(970),r=i(971),s="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",t.exports=function(t,e,i){if("function"==typeof t&&(t=o(t)),a(i)){for(var n=0,r=i.length;n<r;){if((e=t["@@transducer/step"](e,i[n]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}if("function"==typeof i["fantasy-land/reduce"])return c(t,e,i,"fantasy-land/reduce");if(null!=i[s])return u(t,e,i[s]());if("function"==typeof i.next)return u(t,e,i);if("function"==typeof i.reduce)return c(t,e,i,"reduce");throw new TypeError("reduce: list must be array or iterable")}},function(t){t.exports=function(t,h){switch(t){case 0:return function(){return h.apply(this,arguments)};case 1:return function(t){return h.apply(this,arguments)};case 2:return function(t,e){return h.apply(this,arguments)};case 3:return function(t,e,i){return h.apply(this,arguments)};case 4:return function(t,e,i,n){return h.apply(this,arguments)};case 5:return function(t,e,i,n,r){return h.apply(this,arguments)};case 6:return function(t,e,i,n,r,a){return h.apply(this,arguments)};case 7:return function(t,e,i,n,r,a,o){return h.apply(this,arguments)};case 8:return function(t,e,i,n,r,a,o,s){return h.apply(this,arguments)};case 9:return function(t,e,i,n,r,a,o,s,u){return h.apply(this,arguments)};case 10:return function(t,e,i,n,r,a,o,s,u,c){return h.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(t,e){_esm(e),e.gea="PlaybackSegmentDataFactorySymbol"},function(t,e){_esm(e),e.kda="ManifestParserFactorySymbol"},function(t,e){_esm(e),e.xca="HLSConfigSymbol"},function(t,e,i){var n;_esm(e),t=i(263),n=i(151),e.bfb=n,n=i(431),e.YR=n,n=i(435),e.isb=n,e.j1=t.xq.Ua.sidx,t=i(1006),e.dr=t.dr,t=i(271),e.ar=t.ar,t=i(1010),e.cr=t.cr,e.bA=t.bA,t=i(1011),e.WJ=t.WJ,t=i(88),e.ko=t.ko,i=i(1012),e.Pj=i.Pj},function(t,e,i){var s,a,u,o,n,r,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j;function C(t,e,i,n,r){o.call(this,t,e,i,n,r)}function L(t,e,i,n,r){o.call(this,t,e,i,n,r)}function M(t,e,i,n,r){o.call(this,t,e,i,n,r)}function D(t,e,i,n,r){o.call(this,t,e,i,n,r),this.MI=t.config.MI,this.vd=this.sizes=void 0}function U(t,e,i,n,r){o.call(this,t,e,i,n,r)}function B(){for(var t=new DataView(this),e="",i=0;i<this.byteLength;i++)e+=("00"+t.getUint8(i).toString(16)).slice(-2);return e}function F(t,e,i,n,r){o.call(this,t,e,i,n,r)}function q(t,e,i,n,r){o.call(this,t,e,i,n,r)}function H(t,e,i,n,r){o.call(this,t,e,i,n,r)}function K(t,e,i,n,r){o.call(this,t,e,i,n,r)}function V(t,e,i,n,r){o.call(this,t,e,i,n,r)}function G(a){function t(t,e,i,n,r){o.call(this,t,e,i,n,r),this.dX=a}return t.Na=!1,(t.prototype=new o).constructor=t,Object.defineProperties(t.prototype,{zQ:{get:function(){return this.dX}}}),t.prototype.parse=function(){return this.u.console.trace("renaming '"+this.type+"' to draft type '"+this.dX+"'"),this.u.offset=this.startOffset+4,this.la.b_(this.zQ),this.type=this.zQ,!0},t}function J(t,e,i,n,r){o.call(this,t,e,i,n,r)}function z(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Y(t,e,i,n,r){o.call(this,t,e,i,n,r)}function W(t,e,i,n,r){o.call(this,t,e,i,n,r)}function X(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Q(t,e,i,n,r){o.call(this,t,e,i,n,r)}function Z(t,e,i,n,r){o.call(this,t,e,i,n,r)}function $(t,e,i,n,r){o.call(this,t,e,i,n,r)}function tt(t,e,i,n,r){o.call(this,t,e,i,n,r)}function et(t,e,i,n,r){o.call(this,t,e,i,n,r)}function it(t,e){t.forEach(function(t){e[t.Xb]=t})}s=i(150).assert,e=i(104),a=i(264).T,u=i(431),i(151),i(88),i(88),i(88),o=i(33).Dc,n=i(989).default,r=i(990).default,c=i(991).default,h=i(992).default,f=i(993).default,l=i(994).default,p=i(995).default,d=i(996).default,b=i(997).default,i(265),i(179),m=i(432).cba,g=i(432).hca,v=i(998).default,y=i(999).default,w=i(105).default,_=i(105).lba,E=i(105).mba,k=i(105).nba,S=i(105).oba,T=i(1e3).default,A=i(1001).default,O=i(105).Cca,I=i(105).wca,x=i(1002).default,P=i(1003).default,R=i(1004).default,N=i(433).default,j=i(434).default,i(152),i(268),i(269),i(267),i=i(1005).default,C.Na=!0,(C.prototype=new o).constructor=C,L.Na=!0,(L.prototype=new o).constructor=L,M.Na=!1,M.prototype=new o,D.Na=!((M.prototype.constructor=M).prototype.parse=function(){var t;return this.Ac(),1===this.version?(this.u.Td(),this.u.Td(),this.S=this.u.ya(),this.duration=this.u.Td()):(this.u.ya(),this.u.ya(),this.S=this.u.ya(),this.duration=this.u.ya()),t=32767&this.u.Yc(),this.language=String.fromCharCode(96+(t>>>10),96+(t>>>5&31),96+(31&t)),!0}),((D.prototype=new o).constructor=D).prototype.Nga=function(){this.Ac(),this.u.ya(),this.S=this.u.ya(),0===this.version?(this.MU=this.u.ya(),this.eV=this.u.ya()):(this.MU=this.u.Td(),this.eV=this.u.Td()),this.F7a=this.u.Yc(),this.gY=this.u.Yc()},D.prototype.Cfa=function(t,e){var i,n,r=this.S;t=t&&t.S||r,i=t/r,r=this.u.BA(e,12,!1),n=1==i?this.u.BA(e,12,!1):u.from(Uint32Array,{length:e},function(){var t=Math.round(this.u.ya()*i);return this.u.offset+=8,t},this),this.pha(e,n,r,t)},D.prototype.pha=function(t,e,i,n){if(this.MI){n=this.MI*n/1e3;for(var r=0,a=1;a<t;a++)Math.abs(e[r]-n)>Math.abs(e[r]+e[a]-n)?(e[r]+=e[a],i[r]+=i[a]):++r!==a&&(e[r]=e[a],i[r]=i[a]);++r,e=new Uint32Array(e.buffer.slice(0,4*r)),i=new Uint32Array(i.buffer.slice(0,4*r))}this.sizes=i,this.vd=e},U.Na=!(D.prototype.parse=function(t){var e,i,n,r;return this.Nga(),this.sa=t.sa,e=this.S,i=this.sa&&this.sa.S||e,n=this.gY,r=this.startOffset+this.length+this.eV,e=new a(this.MU,e).Zf(i).vc,this.U={S:i,jl:e,offset:r},this.Cfa(this.sa,n),this.U.vd=this.vd,this.U.sizes=this.sizes,t.zs=this,!0}),U.prototype=new o,F.Na=!((U.prototype.constructor=U).prototype.parse=function(){var t;this.Th=[],this.mta=[],t=(this.length-11)/2,this.u.mb(),this.u.mb(),this.u.mb();for(var e=0;e<t;e++)this.Th.push(this.u.mb()),this.mta.push(this.u.mb());return!0}),F.prototype=new o,q.Na=!((F.prototype.constructor=F).prototype.parse=function(){return this.Ac(),this.u.offset+=4,this.vH=this.u.offset,this.pj=this.u.oua(16),this.pj.toString=B,!0}),q.prototype=new o,H.Na=!((q.prototype.constructor=q).prototype.parse=function(){return this.Ac(),this.ng=this.u.Yc(),this.qra=this.u.BA(this.ng,void 0,!0),!0}),((H.prototype=new o).constructor=H).prototype.parse=function(t){var e,i,n,r,a,o=t.zs;if(s(o),t=t.sa,e=o.S,o=o.gY,s(t),s(e),s(o),this.Ac(),s(this.version<2),this.ng=this.u.Yc(),this.Du=new Uint16Array(o+1),i=t.p6(e),n=i/e,r=t.Zf(i).vc,0===this.version){for(this.Tu=new Uint16Array,this.Sd=new Uint32Array,t=e=0;t<=o;++t)if(this.Du[t]=e,t<this.ng&&0!==(a=this.u.mb()))for(i=0;i<a;++i,++e)this.Tu[e]=Math.floor((this.u.ya()+1)*n)/r,this.Sd[e]=this.u.ya()}else if(1===this.version)for(i=this.u.kua(this.ng,10,!1),this.u.offset+=4,this.Sd=this.u.BA(this.ng,10,!1),this.u.offset-=8,this.Tu=u.from(Uint16Array,{length:this.ng},function(){var t=Math.floor((this.u.ya()+1)*n)/r;return this.u.offset+=6,t},this),e=t=0;t<=o;++t){for(;e<i.length&&i[e]<t;)++e;this.Du[t]=e}return this.di={Du:this.Du,Tu:this.Tu,Sd:this.Sd},!0},K.Na=!0,(K.prototype=Object.create(C.prototype)).constructor=K,V.Na=!0,V.prototype=Object.create(C.prototype),J.Na=!((V.prototype.constructor=V).prototype.Qt=function(){var t=this.Rh("tfhd");return t&&(this.ck=t.OT?t.ck:this.parent.startOffset),!0}),J.prototype=new o,z.Na=!((J.prototype.constructor=J).prototype.parse=function(){var t,e=this.u.offset;if(this.Ac(),1===this.version){this.u.console.trace("translating vpcC box to draft equivalent"),this.u.offset+=2;for(var i=this.u.offset,n=this.u.mb(),r=this.u.mb(),a=this.u.mb(),o=this.u.mb(),s=this.u.Yc(),u=[],c=0;c<s;++c)u=this.u.mb();switch(c=(240&n)>>>4,t=(14&n)>>>1,n&=1,a=16===a?1:0,r!=o&&this.u.console.warn("VP9: Has the VP9 spec for vpcC changed? colourPrimaries "+r+" and matrixCoefficients "+o+" should be the same value!"),o=2,r){case 1:o=2;break;case 6:o=1;break;case 9:o=5;break;default:this.u.console.warn("VP9: Unknown colourPrimaries "+r+"! Falling back to default color space VP9_COLOR_SPACE_BT709_6 (2)")}this.version=0,this.la.fB(this.version,e),this.la.fB(c<<4|o,i++),this.la.fB(t<<4|a<<1|n,i++),s+=2,u.push(0,0),this.la.sya(s,!1),i+=2,u.forEach(function(t){this.la.fB(t,i++)})}return!0}),((z.prototype=new o).constructor=z).Xb="tfhd",Object.defineProperties(z.prototype,{OT:{get:function(){return 1&this.flags}},ova:{get:function(){return 2&this.flags}},Qka:{get:function(){return 8&this.flags}},Tka:{get:function(){return 16&this.flags}},Rka:{get:function(){return 32&this.flags}}}),Y.Na=!(z.prototype.parse=function(){return this.Ac(),this.kJ=this.u.ya(),this.ck=this.OT?this.u.Td():void 0,this.ova&&this.u.ya(),this.$y=this.Qka?this.u.ya():void 0,this.bz=this.Tka?this.u.ya():void 0,this.az=this.Rka?this.u.ya():void 0,!0}),((Y.prototype=new o).constructor=Y).prototype.parse=function(){return this.Ac(),this.Gy=1===this.version?this.u.Td():this.u.ya(),!0},W.Na=!(Y.prototype.wa=function(t){var e=this.startOffset+12;this.Gy+=t,1===this.version?this.la.tya(this.Gy,e):this.la.dh(this.Gy,e)}),(W.prototype=new o).constructor=W,Object.defineProperties(W.prototype,{rU:{get:function(){return 1&this.flags}},SG:{get:function(){return 4&this.flags}},JA:{get:function(){return 256&this.flags}},KA:{get:function(){return 512&this.flags}},yY:{get:function(){return 1024&this.flags}},BI:{get:function(){return 2048&this.flags}}}),W.prototype.parse=function(){return this.Ac(),this.ST=this.u.offset,this.Lb=this.u.ya(),this.fk=this.rU?this.u.pI():0,this.SG&&this.u.ya(),this.Su=(this.JA?4:0)+(this.KA?4:0)+(this.yY?4:0)+(this.BI?4:0),this.pz=this.u.offset,s(this.rU,"Expected data offset to be present in Track Run"),s(this.length-(this.u.offset-this.startOffset)==this.Lb*this.Su,"Expected remaining data in box to be sample information"),!0},W.prototype.ot=function(t,e,i){var n,r=this.JA?this.u.ya():t.$y,a=this.KA?this.u.ya():t.bz;return t=this.yY?this.u.ya():t.az,{nva:n=0===this.version?this.BI?this.u.ya():0:this.BI?this.u.pI():0,DWb:t,ETb:i+n-(void 0!==e?e:n),yk:a,Uu:r}},W.prototype.wa=function(t,e,i,n,r,a,o){var s,u,c=0,h=0;for(this.la.offset=this.pz,n=0;n<r;++n)s=this.ot(e,u,h),0==n&&(u=s.nva),c+=s.yk,h+=s.Uu;if(n=r,r=this.u.offset,s=this.ot(e,u,h),this.Nq=n,this.vwa=h,o){if(this.Hq=this.fk+c,this.Yi=0,n===this.Lb)return!0}else if(this.Hq=this.fk,this.Yi=c,0===n)return!0;if(0===n||n===this.Lb)return!1;if(this.hz=!0,o){for(this.Yi+=s.yk,o=n+1;o<this.Lb;++o)s=this.ot(e,u,h),this.Yi+=s.yk;this.la.offset=this.ST,this.Lb=n,this.la.dh(this.Lb),this.la.vJ(a),this.SG&&(this.u.offset+=4),this.Ie(this.length-(r-this.startOffset),r)}else e=r-this.pz,this.la.offset=this.ST,this.Lb-=n,this.la.dh(this.Lb),this.fk+=c,this.la.vJ(a,this.fk),this.SG&&(this.u.offset+=4),this.Ie(e,this.la.offset);return i.Ie(this.Yi,t.ck+this.Hq),!0},X.Na=!(W.prototype.Qua=function(t,e,i,n,r,a){var o;if(n){n=this.Hq;for(var s=this.Lb-1;0<=s&&this.Lb-s<=r;--s){if(this.la.offset=this.pz+s*this.Su,(o=this.ot(e)).Uu!=a.duration){this.u.console.warn("Could not replace sample of duration "+o.Uu+" with silence of duration "+a.duration);break}if(this.KA)this.la.offset-=this.Su-(this.JA?4:0),this.la.dh(a.Ck.byteLength);else if(a.Ck.byteLength!==o.yk){this.u.console.warn("Cannot replace sample with default size with silence of different size");break}n-=o.yk,i.Ru(o.yk,a.Ck,t.ck+n)}}else for(n=this.Hq+this.Yi,s=0;s<this.Lb&&s<r;++s){if(this.la.offset=this.pz+(s+this.Nq)*this.Su,(o=this.ot(e)).Uu!=a.duration){this.u.console.warn("Could not replace sample of duration "+o.Uu+" with silence of duration "+a.duration);break}if(this.KA)this.la.offset-=this.Su-(this.JA?4:0),this.la.dh(a.Ck.byteLength);else if(a.Ck.byteLength!==o.yk){this.u.console.warn("Cannot replace sample with default size with silence of different size");break}i.Ru(o.yk,a.Ck,t.ck+n),n+=o.yk}}),(X.prototype=Object.create(o.prototype)).constructor=X,Object.defineProperties(X.prototype,{qn:{get:function(){return 1&this.flags}}}),X.prototype.parse=function(){return this.Ac(),this.qn&&this.u.Ml(),this.qn&&this.u.ya(),this.Ska=this.u.mb(),this.Lb=this.u.ya(),this.u.CA(this.Lb),!0},Q.Na=!(X.prototype.wa=function(t,e){if(t&&0===this.Ska){if(t=e?this.Lb-t:t,this.la.offset=this.startOffset+13+(this.qn?8:0),this.Lb-=t,this.la.dh(this.Lb),this.zI=0,e)this.la.offset+=this.Lb;else{for(e=0;e<t;++e)this.zI+=this.la.mb();this.la.offset-=t}this.Ie(t,this.u.offset)}return!0}),(Q.prototype=Object.create(o.prototype)).constructor=Q,Object.defineProperties(Q.prototype,{qn:{get:function(){return 1&this.flags}}}),Q.prototype.parse=function(){return this.Ac(),this.qn&&this.u.Ml(),this.qn&&this.u.ya(),this.ng=this.u.ya(),s(1===this.ng,"Expected a single entry in Sample Auxiliary Information Offsets box"),this.fk=0===this.version?this.u.pI():this.u.rua(),!0},Z.Na=!(Q.prototype.wa=function(t,e){return this.fk+=t,this.la.offset=this.startOffset+16+(this.qn?8:0)+(0===this.version?0:4),this.la.vJ(e,this.fk),!0}),(Z.prototype=Object.create(o.prototype)).constructor=Z,Object.defineProperties(Z.prototype,{xX:{get:function(){return 1&this.flags}},dya:{get:function(){return 2&this.flags}}}),Z.prototype.parse=function(){return this.Ac(),this.xX&&(this.u.ya(),this.u.CA(16)),this.Lb=this.u.ya(),!0},$.Na=!(Z.prototype.wa=function(t,e){var i,n=e?this.Lb-t:t;if(this.la.offset=this.startOffset+28+(this.xX?20:0),this.Lb-=n,this.la.dh(this.Lb),t=this.la.offset,this.dya)for(n=e?this.Lb:n;0<n;--n)this.la.offset+=8,i=this.la.Yc(),this.la.offset+=6*i;else this.la.offset+=8*(e?this.Lb:n);e?this.Ie(this.length-(this.u.offset-this.startOffset),this.u.offset):this.Ie(this.u.offset-t,t)}),(($.prototype=Object.create(o.prototype)).constructor=$).prototype.parse=function(){return this.Ac(),!0},tt.Na=!($.prototype.wa=function(t,e,i){return i?this.Ie(e-t,this.startOffset+12+t):this.Ie(t,this.startOffset+12),!0}),((tt.prototype=Object.create(o.prototype)).constructor=tt).prototype.parse=function(){this.Ac(),this.u.Ml(),1===this.version&&this.u.ya(),this.ng=this.u.ya(),this.Vu=[];for(var t=0;t<this.ng;++t)for(var e=this.u.ya(),i=this.u.ya(),n=0;n<e;++n)this.Vu.push(i);return!0},et.Na=!(tt.prototype.wa=function(t,e){return this.Vu=e?this.Vu.slice(0,t):this.Vu.slice(t),t=this.Vu.reduce(function(t,e){return 0!==t.length&&t[t.length-1].group===e||t.push({group:e,count:0}),++t[t.length-1].count,t},[]),this.la.offset=this.startOffset+16+(1===this.version?4:0),this.la.dh(t.length),t.forEach(function(t){this.la.dh(t.count),this.la.dh(t.group)}.bind(this)),this.ng>t.length&&this.Ie(8*(this.ng-t.length)),this.ng=t.length,!0}),it([A,l,p,d,O,I,n,h,N,j,f,b,r,c,i],(w={Ua:{moov:L,trak:C,mdia:C,mdhd:M,minf:C,encv:w,schi:C,sidx:D,sinf:C,stbl:C,tenc:F,mvex:C,moof:K,traf:V,tfhd:z,trun:W,sbgp:tt,sdtp:$,saiz:X,saio:Q,tfdt:Y,mdat:(et.prototype=Object.create(o.prototype)).constructor=et,vmaf:U},sxa:{vpcC:J,SmDm:G("smdm"),CoLL:G("coll")},CZ:{schm:T},AI:{}}).Ua),it([m,v,_,E,k,S,g,y,P,x],w.AI),it([A,T],w.CZ),w.Ua[e.ER]=F,w.Ua[e.Nx]=q,w.Ua[e.Mx]=H,w.Ua[e.DR]=Z,w.AI[e.XE]=R,w.Dc=o,t.exports={xq:w}},function(t,e){function n(t,e){var i,n,r,a,o;if("number"!=typeof t||"number"!=typeof e)t=!1;else if(t&&e){for(n=(i=Math).abs,a=Math.abs(t),r=Math.abs(e);r;)r=a%(o=r),a=o;t=n.call(i,t*e/a)}else t=0;return t}function i(t,e){"object"==typeof t?(this.xc=t.vc,this.nb=t.S):(this.xc=t,this.nb=e)}_esm(e),i.Eb=function(t){return new i(t,1e3)},i.vZ=function(t,e){return Math.floor(1e3*t/e)},i.Tra=function(t,e){return Math.floor(t*e/1e3)},i.max=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.greaterThan(e)?t:e})},i.min=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(function(t,e){return t.lessThan(e)?t:e})},Object.defineProperties(i.prototype,{vc:{get:function(){return this.xc},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{S:{get:function(){return this.nb},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{Y:{get:function(){return 1e3*this.xc/this.nb},enumerable:!0,configurable:!0}}),Object.defineProperties(i.prototype,{vh:{get:function(){return this.xc/this.nb},enumerable:!0,configurable:!0}}),i.prototype.Zf=function(t){return t/=this.S,new i(Math.floor(this.vc*t),Math.floor(this.S*t))},i.prototype.add=function(t){var e;return this.S===t.S?new i(this.vc+t.vc,this.S):(e=n(this.S,t.S),this.Zf(e).add(t.Zf(e)))},i.prototype.Qa=function(t){return this.add(new i(-t.vc,t.S))},i.prototype.PH=function(t){return new i(this.vc*t,this.S)},i.prototype.qm=function(t){var e;return this.S===t.S?this.vc/t.vc:(e=n(this.S,t.S),this.Zf(e).qm(t.Zf(e)))},i.prototype.p6=function(t){return n(this.S,t)},i.prototype.xua=function(){return new i(this.S,this.vc)},i.prototype.compare=function(t,e){var i;return this.S===e.S?t(this.vc,e.vc):(i=n(this.S,e.S),t(this.Zf(i).vc,e.Zf(i).vc))},i.prototype.equal=function(t){return this.compare(function(t,e){return t===e},t)},i.prototype.a9=function(t){return this.compare(function(t,e){return t!==e},t)},i.prototype.lessThan=function(t){return this.compare(function(t,e){return t<e},t)},i.prototype.greaterThan=function(t){return this.compare(function(t,e){return e<t},t)},i.prototype.HN=function(t){return this.compare(function(t,e){return t<=e},t)},i.prototype.Or=function(t){return this.compare(function(t,e){return e<=t},t)},i.prototype.toJSON=function(){return{ticks:this.vc,timescale:this.S}},i.prototype.toString=function(){return this.vc+"/"+this.S},i.Gb=new i(0,1),i.Ow=new i(1,1e3),e.T=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.u.offset+=6,this.u.Yc(),!0},e.default=a},function(t,e,i){var n;_esm(e),(t=i(23)).__exportStar(i(152),e),t.__exportStar(i(267),e),t.__exportStar(i(268),e),t.__exportStar(i(269),e),t=i(268),n=i(269),i=i(267),e.Xp={3:i.IQ,4:t.CQ,5:n.bca}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(152).CE,n.__extends(a,r),a.prototype.parse=function(){var t;return this.u.Yc(),t=this.u.mb(),this.Kwa=!!(128&t),this.Vea=!!(64&t),this.xda=!!(32&t),this.Kwa&&this.u.Yc(),this.Vea&&this.u.CA(this.u.mb()),this.xda&&this.u.Yc(),this.aT(),!0},a.tag=3,e.IQ=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(152).CE,n.__extends(a,r),a.prototype.parse=function(){return this.usa=this.u.mb(),this.u.mb(),this.u.Yc(),this.u.mb(),this.maxBitrate=this.u.ya(),this.Bia=this.u.ya(),this.aT(),!0},a.tag=4,e.CQ=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),t=i(152),r=i(266),a=t.CE,n.__extends(o,a),o.prototype.cY=function(){15!==this.u.zc(4)||this.u.zc(24)},o.prototype.parse=function(t){if(this.spa(t)&&64===t.usa)switch(this.nn=this.aY(),this.cY(),this.u.zc(4),this.Tla=5===this.nn||29===this.nn?5:-1,0<this.Tla&&(this.cY(),this.nn=this.aY(),22===this.nn&&this.u.zc(4)),this.nn){case 1:case 2:case 3:case 4:case 6:case 7:case 17:case 19:case 20:case 21:case 22:case 23:this.lV=this.u.zc(1),(this.Yka=this.u.zc(1))&&this.u.zc(14),this.u.zc(1),this.qz=3===this.nn?256:23===this.nn?this.lV?480:512:this.lV?960:1024}return this.skip(),!0},o.prototype.aY=function(){var t=this.u.zc(5);return 31===t&&(t=32+this.u.zc(6)),t},o.prototype.spa=function(t){return t.tag===r.CQ.tag},o.tag=5,i=o,e.bca=i},function(t,e){_esm(e),e.concat=function(){for(var i,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=Array.prototype.concat.apply([],t)).reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e),t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer}},function(t,e,i){var n,r,a;function o(t,e,i){this.console=t,this.stream=e,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length)}_esm(e),n=i(436),r=i(263),a=i(437),o.prototype.parse=function(t){var e=new a.DQ(this.view.byteLength);return this.tc=new n.zE(r.xq.Ua,e,this.view,this.console,{bI:!0}),t=this.tc.parse(t),this.Ua=this.tc.Ua,t},e.ar=o},function(t,e){_esm(e),e.cd=void 0,(t=e.cd||(e.cd={})).Qsb="bitraterestriction",t.RRa="cdnsel",t.WL="chgstrm",t.debug="debug",t.wAb="dlreport",t.MG="endplay",t.ppa="intrplay",t.zD="midplay",t.H9="playbackaborted",t.k7a="renderstrmswitch",t.QO="repos",t.$O="resumeplay",t.pXb="serversel",t.gE="startplay",t.T9a="statechanged",t.transition="transition",t.Frb="asereport",t.PQa="audioswitch",t.iRa="blockedautoplay",t.config="config",t.hla="dlreq",t.q$b="ftlProbeError",t.SZb="subtitleerror",t.TZb="subtitleqoe",t.N_b="timedtextrebuffer",t.W$a="timedtextswitch",t.I9a="speedchanged"},function(t,e){_esm(e),e.sEa="IsTypeSupportedProviderFactorySymbol",e.mIa="PlatformIsTypeSupportedSymbol"},function(t,e,i){var n,o,s,u,r,c;function h(t,e,i,n,r){var a=o.ao.call(this,t,e,i,r)||this;return a.cast=n,a.type=s.gj.Oba,t=h.qkb,a.XZ[s.se.pK]=u.Gd.NQ+"; "+t,a.XZ[s.se.Ex]=u.Gd.Ex+"; "+t,t=u.Gd.Xdb.find(function(t){return a.Ny(c(h.PP,t))}),a.XZ[s.se.Qs]=t,a}_esm(e),e.jAa=e.D_=e.Pba=void 0,n=i(44),o=i(181),s=i(26),t=i(111),u=i(110),r=i(182),c=(new t.FB).format,T(h,o.ao),h.kka=function(t,e){return(e=h.O7a(e))?{isTypeSupported:e}:t},h.O7a=function(t){var e;if(void 0!==t)return t.framework&&t.framework.CastReceiverContext&&t.framework.CastReceiverContext.getInstance&&(e=t.framework.CastReceiverContext.getInstance())&&e.canDisplayType?e.canDisplayType.bind(e):t.framework&&t.framework.platform&&t.framework.platform.canDisplayType?t.framework.platform.canDisplayType:t.receiver&&t.receiver.platform&&t.receiver.platform.canDisplayType?t.receiver.platform.canDisplayType:t.__platform__&&t.__platform__.canDisplayType?t.__platform__.canDisplayType:void 0},h.prototype.fx=function(e){var i,t=this.cast.__platform__.display&&this.cast.__platform__.display.getHdcpVersion;return this.config().nbb?(i={},t?(i[s.Mj.NE]="1.4",i[s.Mj.uv]="2.2",t().then(function(t){return t===i[e]})):(t=this.d2a(e),t=c(h.PP,u.Gd.NQ)+" hdcp="+t,t=this.Ny.bind(this,t),Promise.resolve(t()))):Promise.resolve(!1)},h.prototype.SM=function(t){return this.XZ[t]},h.prototype.cN=function(){var e=this;return this.config().nbb?this.fx(s.Mj.uv).then(function(t){return t?Promise.resolve(s.Mj.uv):e.fx(s.Mj.NE).then(function(t){return t?Promise.resolve(s.Mj.NE):Promise.resolve(void 0)})}).then(function(t){return e.lU(t)}):Promise.resolve(void 0)},h.prototype.Up=function(){var t=o.ao.prototype.Up.call(this),e=h.IIb;return t[n.N.tca]=["avc1.4D4028","width=1920; height=1080; "],t[n.N.ZQ]=["hev1.2.6.L150.B0","width=3840; height=2160; "],t[n.N.aR]=["hev1.2.6.L153.B0","width=3840; height=2160; "],t[n.N.$Q]=["hev1.2.6.L150.B0","width=3840; height=2160; "],t[n.N.bR]=["hev1.2.6.L153.B0","width=3840; height=2160; "],t[n.N.VCa]=["hev1.2.6.L90.B0",e],t[n.N.WCa]=["hev1.2.6.L93.B0",e],t[n.N.XCa]=["hev1.2.6.L120.B0",e],t[n.N.YCa]=["hev1.2.6.L123.B0",e],t[n.N.ZCa]=["hev1.2.6.L150.B0","width=3840; height=2160; "+e],t[n.N.$Ca]=["hev1.2.6.L153.B0","width=3840; height=2160; "+e],t[n.N.OQ]=["hev1.2.6.L90.B0",e],t[n.N.QQ]=["hev1.2.6.L93.B0",e],t[n.N.SJ]=["hev1.2.6.L120.B0",e],t[n.N.TQ]=["hev1.2.6.L123.B0",e],t[n.N.VQ]=["hev1.2.6.L150.B0","width=3840; height=2160; "+e],t[n.N.XQ]=["hev1.2.6.L153.B0","width=3840; height=2160; "+e],t[n.N.PQ]=["hev1.2.6.L90.B0",e],t[n.N.RQ]=["hev1.2.6.L93.B0",e],t[n.N.SQ]=["hev1.2.6.L120.B0",e],t[n.N.UQ]=["hev1.2.6.L123.B0",e],t[n.N.WQ]=["hev1.2.6.L150.B0","width=3840; height=2160; "+e],t[n.N.YQ]=["hev1.2.6.L153.B0","width=3840; height=2160; "+e],t},h.prototype.uXa=function(){return[r.Xe.g_,r.Xe.gDa,r.Xe.QJ,r.Xe.FE]},h.prototype.lpa=function(){o.ao.prototype.lpa.call(this),h.O7a(this.cast)||this.Rn.push(r.Xe.Ex)},(e.Pba=h).IIb="eotf=smpte2084",h.qkb="width=3840; height=2160; ",e.D_="CastSDKSymbol",e.jAa="CastEmeSymbol"},function(t,e,i){var n,r,a;function o(){this.type=n.nv.Lx}_esm(e),e.uB=void 0,n=i(26),t=i(111),r=i(109),a=new t.FB,o.kka=function(){return{isTypeSupported:function(t){var e;try{return-1==t.toLowerCase().indexOf("codec")?pt.MSMediaKeys.isTypeSupported(t,"video/mp4"):1===(e=t.split("|")).length?pt.MSMediaKeys.isTypeSupported(r.Hb.Qx,t):"probably"===o.Ywa(e[0],e[1])}catch(t){return!1}}}},o.j4=function(t,e,i){return e=a.format(o.PP,e),0===i.length?e:(i=a.format('features="{0}"',i.join()),a.format("{0}|{1}{2}",t,e,i))},o.Ywa=function(t,e){var i;try{i=pt.MSMediaKeys.isTypeSupportedWithFeatures?pt.MSMediaKeys.isTypeSupportedWithFeatures(t,e):""}catch(t){i="exception"}return i},(e.uB=o).PP='video/mp4; codecs="{0},mp4a";'},function(t,e){_esm(e),e.oca=e.oB=void 0,(t=e.oB||(e.oB={})).vkb="unknown",t.Cya="absent",t.sJa="present",t.Error="error",e.oca="ExternalDisplayLogHelperSymbol"},function(t,e){_esm(e),e.r1="TransportConfigSymbol"},function(t,e){_esm(e),e.oNb=e.PN=e.mNb=void 0,e.mNb=function(t){return t},e.PN=function(t){return t},e.oNb=function(t){return Object.assign({},t)}},function(t,e,i){var n,o,h,_,E,k,s,f,r,a,u,c,l,S;function p(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w){this.j=t,this.trackId=e,this.Nz=i,this.uc=n,this.oi=r,this.Fg=a,this.Bc=o,this.jw=s,this.ila=u,this.Wd=c,this.displayName=h,this.ml=f,this.XI=l,this.variant=p,this.oI=d,this.profile=b,this.tu=m,this.fO=g,this.JDb=v,this.t7=y,this.du=w,this.type=_.Ei.laa,this.Js=void 0,this.kk=!(!b||b!=k.Zm.cK),this.Ri={bcp47:c,trackId:e,downloadableId:o,isImageBased:this.kk},this.log=E.Ih(t,"TimedTextTrack"),this.state=S.J0,this.request=this.request.bind(this)}_esm(e),e.nF=void 0,n=i(1),o=i(74),h=i(14),_=i(90),E=i(8),k=i(44),s=i(21),f=i(19),r=i(1067),a=i(15),u=i(3),c=i(1068),l=i(1071),(i=S=S||{})[i.J0=0]="NOT_LOADED",i[i.LOADING=1]="LOADING",i[i.ME=2]="LOADED",i[i.kR=3]="LOAD_FAILED",p.prototype.X6=function(){var e=this;return this.j.state.value===a.Rb.CLOSED||this.j.state.value===a.Rb.CLOSING?Promise.reject({$:!1}):this.kk?this.aKb():(this.JUa||(this.JUa=this.LUa()),this.JUa.then(function(t){return e.bKb(t)}))},p.prototype.getState=function(){return this.state},p.prototype.Vr=function(){return this.fO},p.prototype.rq=function(){return this.JDb},p.prototype.Mr=function(e,i){var t;try{return null===(t=this.Twa)||void 0===t?void 0:t.Mr(e,i)}catch(t){this.log.error("error in getSubtitlesCount",t,{start:e,end:i,isImageBased:this.kk})}},p.prototype.rHb=function(){var t;if(!f.Xc(this.Z))try{t=null===(t=null===(t=this.Twa)||void 0===t?void 0:t.WG(0))||void 0===t?void 0:t[0],this.Z=null==t?void 0:t.displayTime}catch(t){this.log.error("exception in getStartPts",t)}return this.Z},p.prototype.N$=function(t){return this.j.state.value===a.Rb.CLOSING||this.j.state.value===a.Rb.CLOSED?(this.log.info("playback is closing, abort timed text retry",t),!1):this.j.jc.value===this||(this.log.info("timed text track was changed, abort timed text retry",t),!1)},p.prototype.ATa=function(t){var e,i=this,n=E.Ih(this.j,"TimedTextTrack");return n.warn=n.trace.bind(n),n.info=n.debug.bind(n),n=r.BTa(this.j,n,this.request,this),(e=new(h.config.N1b&&!this.kk?c.LEa:l.default)(n,t)).on("ready",function(){i.Twa=e}),e},p.prototype.aKb=function(){var e,r,a,o,s,u,c=this;return this.K_a||(this.state=S.LOADING,e={profile:"nflx-cmisc",url:"",XQa:!1,Hra:this.tu.offset,a3a:this.tu.length,Ed:this.j.mediaTime.value||0,bufferSize:h.config.zJb,y$:{qa:this.j.qV()}},r=(this.ila||[]).filter(function(t){return t.id in c.jw}).sort(function(t,e){return t.uc-e.uc}).map(function(t){return t.id}),o={},s=!(a=0),u=function(i,n){var t;f.Xc(i)?s||c.N$(c.Xt(c.Jt,"","image"))?(s=!1,c.tu.url=c.jw[c.Jt],e.url=c.tu.url,o[i]=(o[i]||0)+1,(t=c.ATa(e)).on("ready",function(){n({$:!0,track:c})}),t.on("error",function(t){var e;t=Object.assign({$:!1},t),(e=c.Xt(c.Jt,c.tu.url,"image")).details={midxoffset:c.tu.offset,midxsize:c.tu.length},e.errorstring=t.errorString,o[i]<=h.config.V$a?(c.q5(e,!0,"retry with current cdn"),c.Cia(o[i]).then(function(t){c.log.trace("retry timed text download after "+t,c.Xt(c.Jt,"","image")),u(c.Jt,n)})):(c.Jt=r[a++],c.Jt?(c.q5(e,!0,"retry with next cdn"),c.Cia(o[i]).then(function(t){c.log.trace("retry timed text download after "+t,c.Xt(c.Jt,"","image")),u(c.Jt,n)})):(c.q5(e,!1,"all cdns tried"),n({$:!1,gPb:"all cdns failed for image subs",track:c})))}),t.start()):n({$:!1,aborted:!0}):(n({$:!1,gPb:"cdnId is not defined for image subs downloadUrl"}),c.q5(c.Xt(0,"","image"),!1,"cdnId is undefined"))},this.Jt=r[a++],this.K_a=new Promise(function(e,i){u(c.Jt,function(t){t.$?(c.log.info("Loaded image subtitle manager"),c.state=S.ME,e(t)):(c.log.error("Unable to load image subtitles manager",t),c.state=S.kR,i(t))})})),this.K_a},p.prototype.bKb=function(n){var r=this,a=this.j.cB;return s.hb(a),new Promise(function(t,e){var i=r.ATa({profile:r.profile,xml:n,oj:h.config.kxa,preferences:h.config.kaa,Ed:r.j.mediaTime.value||0,XQa:!1,videoSize:a});i.on("ready",function(){t(i)}).on("error",function(t){e({$:!1,error:t})}).start()}).then(function(){return r.state=S.ME,{$:!0,track:r}}).catch(function(t){throw r.log.error("Unable to parse timed text track",u.Ts(t),r.Ri,{url:t.url}),r.state=S.kR,t.reason="parseerror",t.track=r,t})},p.prototype.q5=function(t,e,i){t=Object.assign({},t,{bdc:e,status:i}),this.j.fireEvent(a.ca.DP,t),this.log.warn("subtitleerror event",t)},p.prototype.request=function(t,e){var i=this;this.log.trace("Downloading",t),t={url:t.url,offset:t.offset,length:t.size,Js:this.Js,responseType:o.YV,headers:{},qc:this.Xma(this.Jt)},this.j.O6.download(t,function(t){i.log.trace("imgsub: request status "+t.$),t.$?e(null,new Uint8Array(t.content)):e({na:t.na,pf:t.pf})})},p.prototype.Xt=function(t,e,i){return{currentCdnId:t,url:e,profile:this.profile,dlid:this.Bc,subtitletype:i,bcp47:this.Wd,trackId:this.trackId,cdnCount:Object.keys(this.jw).length,isImageBased:this.kk}},p.prototype.Xma=function(e){return(this.ila||[]).find(function(t){return t.id===e})},p.prototype.LUa=function(){var e,a;function r(r){return n.__awaiter(e,void 0,void 0,function t(){var e,i,n=this;return A(t,function(t){return e=s(),(i=n.Xt(r.qc.id,r.url,"text")).errorstring=r.reason,e&&n.N$(i)?t.return(n.Cia(a[e.id]).then(o)):t.return(Promise.reject({$:!1,aborted:!0}))})})}function o(){return n.__awaiter(e,void 0,void 0,function t(){var e,i,n=this;return A(t,function(t){return i=(e=s())&&n.jw[e.id],e&&i?(a[e.id]=(a[e.id]||0)+1,t.return(n.HAb(i,e).catch(r))):t.return(Promise.reject({}))})})}function s(){return(e.ila||[]).find(function(t){return!!((a[t.id]||0)<h.config.V$a&&e.jw[t.id])})}return(e=this).state=S.LOADING,a={},o()},p.prototype.Cia=function(i){return new Promise(function(t){var e=1e3*Math.min(Math.pow(2,i-1),8);setTimeout(function(){return t(e)},e)})},p.prototype.HAb=function(t,r){var a=this;return this.log.trace("Downloading",r&&{qc:r.id},this.Xt(r.id,t,"text")),new Promise(function(e,i){var n={responseType:o.Ooa,url:t,track:a,qc:r,EC:"tt-"+a.Wd};a.j.O6.download(n,function(t){t.$?e(t.content):(t.reason="downloadfailed",t.url=n.url,t.track=a,t.qc=r,i(t))})})},(e.nF=p).DB=S},function(t,e,i){var r,a,o,s,u;_esm(e),e.vya=void 0,r=i(8),a=i(3),o=i(472),s=i(473),u=i(61),e.vya=function(t,e){var i,n;try{n=o.bcb(t)}catch(t){r.log.error("xml2xmlDoc exception",t)}u.Rf(function(){if(n&&n.documentElement)try{i=s.ccb(n)}catch(t){r.log.error("xmlDoc2js exception",t)}u.Rf(function(){e(i?{$:!0,object:i}:{$:!1,na:a.L.zCa})})})}},function(t){function e(t){this.buffer=t,this.position=0}e.prototype={seek:function(t){this.position=t},skip:function(t){this.position+=t},Mna:function(){return this.buffer.length-this.position},DA:function(){return this.buffer[this.position++]},Mh:function(t){var e=this.position;return this.position+=t,(t=this.buffer).subarray?t.subarray(e,this.position):t.slice(e,this.position)},Fq:function(t){for(var e=0;t--;)e=256*e+this.buffer[this.position++];return e},nua:function(t){for(var e="";t--;)e+=String.fromCharCode(this.buffer[this.position++]);return e},uh:function(){return this.Fq(2)},Gq:function(){return this.Fq(4)},IO:function(){return this.Fq(8)},Yw:function(t){for(var e,i="";t--;)i+="0123456789ABCDEF"[(e=this.DA())>>>4]+"0123456789ABCDEF"[15&e];return i},qua:function(t){for(var e=0,i=0;i<t;i++)e+=this.DA()<<(i<<3);return e},HO:function(){return this.qua(4)},d_:function(t){this.$P(t,2)},hB:function(t){this.$P(t,4)},Yaa:function(t){this.buffer[this.position++]=t},$P:function(t,e){this.position+=e;for(var i=1;i<=e;i++)this.buffer[this.position-i]=255&t,t=Math.floor(t/256)},gB:function(t){for(var e=0;e<t.length;e++)this.buffer[this.position++]=t.charCodeAt(e)},c_:function(t){for(var e=t.length,i=0;i<e;i++)this.buffer[this.position++]=t[i]},ZP:function(t,e){this.c_(t.Mh(e))}},t.exports=e},function(t,e){_esm(e),e.eFa="LogMessageRulerConfigSymbol",e.gFa="LogMessageRulerSymbol"},function(t,e){_esm(e),e.qda="MilestonesEventBuilderSymbol"},function(t,e){_esm(e),e.K0="NetworkMonitorFactorySymbol"},function(t,e){_esm(e),e.Oda="PboLicenseResponseTransformerSymbol"},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.za=t,this.v6=e,this.Aa=i,this.profile=n}function h(){}function f(){}function l(){}_esm(e),e.WHa=e.T0=void 0,t=i(1),n=i(0),r=i(38),a=i(4),o=i(13),s=i(18),i=i(94),l.prototype.encode=function(t){return{downloadableId:t.Bc,duration:t.duration}},l.prototype.decode=function(t){return{Bc:t.downloadableId,duration:t.duration}},f.prototype.encode=function(t){return{total:t.total,totalContentTime:t.gJ,audio:t.audio.map((new l).encode),video:t.video.map((new l).encode),text:t.text.map((new l).encode)}},f.prototype.decode=function(t){var e;return{total:t.total,gJ:null!==(e=t.totalContentTime)&&void 0!==e?e:t.total,audio:t.audio.map((new l).decode),video:t.video.map((new l).decode),text:t.text.map((new l).decode)}},h.prototype.encode=function(t){return{type:t.type,href:t.href,xid:t.ba,movieId:t.J,position:t.position,clientTime:t.aU,sessionStartTime:t.HY,videoTrackId:t.VP,audioTrackId:t.pn,timedTextTrackId:t.KP,mediaId:t.TN,playTimes:(new f).encode(t.GX),trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,sessionParams:t.Jm,mdxControllerEsn:t.rra,profileId:t.profileId}},h.prototype.decode=function(t){return{type:t.type,href:t.href,ba:t.xid,J:t.movieId,position:t.position,aU:t.clientTime,HY:t.sessionStartTime,VP:t.videoTrackId,pn:t.audioTrackId,KP:t.timedTextTrackId,TN:t.mediaId,GX:(new f).decode(t.playTimes),trackId:t.trackId,sessionId:t.sessionId,appId:t.appId,Jm:t.sessionParams,rra:t.mdxControllerEsn,profileId:t.profileId}},e.T0=h,c.prototype.create=function(t){var e;return{href:t.oa&&t.oa.lk?t.oa.lk.zV("events").href:"",type:"online",ba:t.ba.toString(),J:t.J,position:Math.floor(t.zka||0),aU:this.za.FY.da(a.ja),HY:t.qH?t.qH.da(a.ja):-1,VP:null===(e=t.xg.value)||void 0===e?void 0:e.trackId,pn:null===(e=t.oc.value)||void 0===e?void 0:e.trackId,KP:null===(e=t.jc.value)||void 0===e?void 0:e.trackId,TN:void 0,GX:this.LGb(t),trackId:void 0!==t.Fj?t.Fj.toString():"",sessionId:this.v6().sessionId||this.Aa.id,appId:this.v6().appId||this.Aa.id,Jm:t.bb.Jm||{},profileId:this.profile}},c.prototype.Xxb=function(t,e){return Object.assign({},this.create(t),{rra:e&&e.f4})},c.prototype.load=function(t){return(new h).decode(t)},c.prototype.Hna=function(t){return t.map(function(t){return{Bc:t.downloadableId,duration:t.duration}})},c.prototype.LGb=function(t){return(t=t.Ll)?{total:(t=t.KGb()).total,gJ:t.totalContentTime,audio:this.Hna(t.audio),video:this.Hna(t.video),text:this.Hna(t.timedtext)}:{total:0,gJ:0,video:[],audio:[],text:[]}},u=c,u=t.__decorate([n.R(),t.__param(0,n.l(r.Uh)),t.__param(1,n.l(o.Zc)),t.__param(2,n.l(s.jd)),t.__param(3,n.l(i.OR))],u),e.WHa=u},function(t,e){_esm(e),e.bIa="PboPlaydataValidatorSymbol",e.THa="PboPlaydataArrayValidatorSymbol",e.VHa="PboPlaydataCollectionValidatorSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.E_=void 0,n=i(11),r.ika=function(t){var e;if(n.Be.queryCommandSupported&&n.Be.queryCommandSupported("copy")){(e=n.Be.createElement("textarea")).textContent=t,e.style.position="fixed",n.Be.body.appendChild(e),e.select();try{n.Be.execCommand("copy")}catch(t){console.warn("Copy to clipboard failed.",t)}finally{n.Be.body.removeChild(e)}}},e.E_=r},function(t,e){function i(){}_esm(e),e.Zca=void 0,(e.Zca=i).zeb="display",i.Qdb="console"},function(t,e){_esm(e),e.uW=void 0,e.uW=function(i,n,r){var a;if(r.set)throw Error("Property "+n+" has a setter and cannot be made into a lazy property.");a=r.get,r.get=function(){var t=a.apply(this,arguments),e={enumerable:r.enumerable,value:t};return Object.getPrototypeOf(i)===Function.prototype?Object.defineProperty(i,n,e):Object.defineProperty(this,n,e),t}}},function(t,e){_esm(e),e.lea=e.iK=void 0,(t=e.iK||(e.iK={})).t_b="taskstart",t.r_b="taskabort",t.s_b="taskfail",t.u_b="tasksuccess",e.lea="PreparerTaskSchedulerSymbol"},function(t,e){_esm(e),e.Mba="CacheManagerFactorySymbol"},function(t,e){_esm(e),e.Yya="AsePrefetcherAdapterSymbol",e.Zya="AsePrefetcherProviderSymbol"},function(t,e){_esm(e),e.wba=e.de=void 0,(t=e.de||(e.de={}))[t.ap=0]="startPlayback",t[t.$p=1]="endPlayback",t[t.Zn=2]="underflow",e.wba="AseIntegrationFactorySymbol"},function(t,i,e){var m,g,n,v,y,r,a,w,_,o,E;_esm(i),i.UI=void 0,m=e(12),g=e(14),n=e(60),v=e(51),y=e(3),r=e(21),a=e(8),w=e(24),_=e(11),o=e(296),E=e(19),t=e(31),a.ka.get(t.fh).register(y.M.TDa,function(e){var l,p,d;function b(){var e;b=m.ql,e=setInterval(t,g.config.TMb),n.ve.addListener(n.El,function(t){t&&t.isPopStateEvent?l.trace("popstate event, Lock timers can stay"):(w.te(p,function(t,e){localStorage.removeItem(e.Xr)}),clearInterval(e))},m.cF)}function t(){var i=v.V3();w.te(p,function(t,e){t=localStorage.getItem(e.Xr),(t=JSON.parse(t))?t.updated=i:t={updated:i,sessionId:d,count:1},localStorage.setItem(e.Xr,JSON.stringify(t))})}r.hb(o.storage),l=a.Oi("StorageLock"),p={},d=Date.now()+"-"+Math.floor(1e6*Math.random()),i.UI={vy:function(t,e,i){var n,r,a,o,s,u,c,h;function f(t){localStorage.setItem(a,JSON.stringify(t)),t={Xr:a},p[a]=t,l.trace("Lock acquired",{Name:t.Xr}),b(),e({$:!0,W7:t})}if(n=this,i=void 0!==i&&i,localStorage){r=v.V3(),a="lock-"+t,o={updated:r,sessionId:d,count:1};try{a in localStorage?(c=localStorage.getItem(a),s=0,u=JSON.parse(c),E.Rz(u.updated)&&(s=u.updated),h=_.SE(r-s)*m.pl,c=d===u.sessionId,h<g.config.B1a?c?(u.count+=1,l.debug("Incremented lock count for existing playbackSession",{id:d,count:u.count}),u.updated=r,f(u)):i?(h=g.config.B1a-h+m.pl,l.error("Waiting until current expiration to confirm whether lock is still active",{id:d,count:u.count,Epoch:r,LockEpoch:s,waitTimeoutMs:h}),pt.setTimeout(function(){return n.vy(t,e,!1)},h)):e({$:!1}):(l.error("Lock was expired or invalid, ignoring",{Epoch:r,LockEpoch:s}),f(o))):f(o)}catch(t){l.error("Error acquiring Lock",{errorSubCode:y.L.Lj,errorDetails:w.wd(t)}),e({$:!0})}}else _.xqa?l.error("Local storage access exception",{errorSubCode:y.L.Wjb,errorDetails:w.wd(_.xqa)}):l.error("No localstorage",{errorSubCode:y.L.Xjb}),e({$:!0})},release:function(e,t){var i;if(r.hb(p[e.Xr]==e),localStorage){try{i=localStorage.getItem(e.Xr),1<(i=JSON.parse(i)).count?(--i.count,localStorage.setItem(e.Xr,JSON.stringify(i)),l.trace("Lock count decremented",{Name:e.Xr,count:i.count})):(localStorage.removeItem(e.Xr),delete p[e.Xr],l.trace("Lock released",{Name:e.Xr}))}catch(t){l.error("Unable to release Lock",{Name:e.Xr},t)}t&&t(m.Ye)}}},g.config.V4?i.UI.vy("session",function(t){i.UI.D8a=t,e(m.Ye)}):e(m.Ye)})},function(t,i,e){var n,r,a,o,s,u;_esm(i),i.storage=void 0,n=e(14),r=e(12),a=e(525),t=e(3),o=e(526),s=e(528),u=e(8),e=e(31),i.storage=i.storage||void 0,u.ka.get(e.fh).register(t.M.SDa,function(e){var t;switch(n.config.sZb){case"idb":t=o.W9a;break;case"none":t=a.Y9a;break;case"ls":t=s.X9a}t(function(t){t.$?(i.storage=t.storage,e(r.Ye)):e(t)})})},function(t,e,i){var o,c,h,f,l,p,r,d,b,m,n,g;function v(r,i){var a;a=p.Oi("PlayDataManager"),i=i||c.ql,h.config.hp?i(c.Ye):y(a).then(function(n){var e=n.O4.filter(function(t){return!1===t.active}).map(function(t){return e=n,(i=t).we&&0!==i.we.length&&i.we[0].BH?o.FA(r,i).then(function(){return a.trace("Successfully released license for session",JSON.stringify(i)),e?e.lY(i):Promise.resolve()}).catch(function(t){throw a.error("Unable to send stop command for session",JSON.stringify({ac:i,error:t})),t}):(a.error("releaseDrmSession exception: missing valid keySessionData"),e?e.lY(i):Promise.resolve());var e,i});Promise.all(e).then(function(){a.info("release drm session completed for "+e.length+" entries"),i(c.Ye)}).catch(function(t){(t=t||{}).DrmCacheSize=e.length,a.error("Unable to release one or more DRM session data",t),i(c.Ye)})}).catch(function(t){a.error("Unable to load DRM session data",t),i(c.Ye)})}function y(i){var n;return e.mla||(n=p.ka.get(r.Nba),e.mla=new Promise(function(t,e){n.E6a().then(function(){t(n)}).catch(function(t){i.error("Unable to load DRM data for license release",t),e(t)})})),e.mla}_esm(e),e.oIa=e.nIa=e.mla=void 0,o=i(298),c=i(12),h=i(14),f=i(60),l=i(34),p=i(8),t=i(3),r=i(204),d=i(153),b=i(15),m=i(49),n=i(31),g=i(200),e.nIa=function(n){var r,t,e,i,a,o;function s(){return t||(n.Dd("pdsb"),t=p.ka.get(d.IR)().then(function(t){return i=t,n.Dd("pdsc"),t}).catch(function(t){throw r.error("Unable to initialize the playdata services",t),n.Dd("pdse"),t})),t}function u(){e=!0,i&&i.close(),f.ve.removeListener(f.El,u)}return r=p.Ih(n,"PlayDataManager"),e=!1,(a=p.ka.get(l.yB)).NJ&&a.LJ||(o=p.ka.get(g.Wda)(),a.NJ=o.ac,a.LJ=o.request),n.Dd("pdctor"),n.addEventListener(b.ca.kg,function(){f.ve.removeListener(f.El,u)}),n.addEventListener(b.ca.KN,function(){var e;!h.config.hp&&n.nf&&(e=n.e4.jTa(),y(r).then(function(t){return t.yPa(e)}).catch(function(){r.error("Unable to load/add cached DRM data")}))}),n.addEventListener(b.ca.kg,function(){var t;e||(n.E2b(),t=[h.config.hp||!n.nf?Promise.resolve():new Promise(function(e){var i;r.info("Sending the expedited playdata"),i=n.e4.jTa(),n.nf.MVa(i).then(function(){return r.info("Sent the expedited playdata"),y(r)}).then(function(t){return t?t.lY(i):Promise.resolve()}).then(function(){e(void 0)}).catch(function(t){r.error("Unable to send the expedited playdata",t),e()})}),s().then(function(t){return t.$Y(n.ha)}).then(function(){r.info("Sent the playdata")}).catch(function(t){r.error("Unable to send the playdata",t)}),new Promise(function(t){p.ka.get(m.Um).flush(!1).catch(function(){r.error("Unable to send logblob"),t(void 0)}).then(function(){t(void 0)})})],Promise.all(t).then(function(){n.c9()}).catch(function(){n.c9()}))}),f.ve.addListener(f.El,u),{gXb:function(t){n.Dd("pdpb"),h.config.D$||s().then(function(t){return t.send(n.J)}).then(function(){h.config.hp?(n.Dd("pdpc"),t(c.Ye)):v(n,function(){n.Dd("pdpc"),t(c.Ye)})}).catch(function(){n.Dd("pdpe"),t(c.Ye)})}}},e.oIa=function(){return new Promise(function(e){v({},function(t){e(t)})})},p.ka.get(n.fh).register(t.M.rB,function(t){t(c.Ye)})},function(t,e,i){var n,s,r,a,o,u,c,h,f,l,p,d;function b(t){var e=this;this.j=t,this.o1a=!1,this.log=s.Ih(this.j,"Playback"),this.JN=s.ka.get(h.lR),this.Yg=s.ka.get(l.Xs),this.ZRb=s.ka.get(p.Mda),this.j.addEventListener(f.ca.KN,function(){return e.B1b()}),r.hb(n.config),n.config.hp||(this.SAb=s.ka.get(a.ABa))}function m(t,e){var i;function n(t){return t&&0<t.length&&t[0].BH}return i=s.ka.get(h.lR),t.ba&&n(t.we)?i.release({ba:t.ba,we:t.we}).then(function(){}):e.ba&&n(e.we)?i.release(e).then(function(){}):Promise.resolve()}_esm(e),e.FA=e.GAa=void 0,n=i(14),s=i(8),r=i(21),a=i(316),o=i(3),u=i(62),c=i(19),h=i(188),f=i(15),l=i(66),p=i(299),d=i(34),b.prototype.aH=function(a){var o=this;return new Promise(function(e,t){var i=u.co.$Sa(a.Uf),n=a.dk.map(function(t){return{sessionId:t.sessionId,dataBase64:s.pC(t.data)}}),r=o.j.NGb(a.dk[0].sessionId);i={Ti:r.Ti,Uf:c.is.kn(a.Uf)?a.Uf:i,N4:[r.rm],dk:n,ba:r.ba,Eo:a.Eo,lk:r.oa.lk},o.j.aM&&o.j.aM.f4&&(i.MW=o.j.aM.f4),o.JN.vy(i).then(function(t){o.j.we=t.we,e(t),o.oDb(r)}).catch(t)})},b.prototype.release=function(t){return m(this.j,t)},b.prototype.jTa=function(){var t=this.SAb.create();return t.we=this.j.we,t.ba=this.j.ba,t.J=this.j.J,t},b.prototype.oDb=function(t){this.o1a||(this.o1a=!0,this.j.fireEvent(f.ca.KN,{J:t.J}))},b.prototype.B1b=function(){var e=this,t=s.ka.get(d.Hk);this.Yg.Gpa||b.hbb||(b.hbb=!0,t.eya&&n.config.A1b&&n.config.rJ&&this.ZRb.og(this.log,{}).then(function(){return e.log.trace("Updated NetflixId")}).catch(function(t){return e.log.error("NetflixId upgrade failed",o.Ts(t))}))},(e.GAa=b).hbb=!1,e.FA=m},function(t,e){_esm(e),e.Mda="PboBindCommandSymbol"},function(t,e,i){var s,u,c,h,f,n,l,p,r,d,a,o;function b(t){t=Error.call(this,t),this.message=t.message,"stack"in t&&(this.stack=t.stack),this.name="CodecSwitchingError"}function m(i,t,e,n,r){var a,o=this;this.j=i,this.type=t,this.yMa=n,this.log=r,this.g2=new h.dc(!1),this.xF={data:[],state:"",operation:""},this.mimeType=this.PVa((this.type===s.Tb.Ta.Mb?this.j.xg:this.j.oc).value.streams),this.ft=new f.Gk,this.wga={Type:this.type},c.config.rD&&(a=!0,this.pma=new h.dc(!1)),this.log.trace("Adding source buffer",this.wga,{TypeId:this.mimeType}),this.sd=e.addSourceBuffer(this.mimeType),this.sd.addEventListener("updatestart",function(){o.xF.state="updatestart"}),this.sd.addEventListener("update",function(){o.xF.state="update"}),this.sd.addEventListener("updateend",function(){var t;o.g2.set(!1),o.FMa&&o.FMa(),o.xF.state="updateend",t=0;try{t=o.sd.buffered.length}catch(t){}a&&t&&(a=!1,o.pma.set(!0))}),this.sd.addEventListener("error",function(t){var e;try{e=t.target.error&&t.target.error.message,(t.message||e)&&r.error("error event received on sourcebuffer",{mediaErrorMessage:t.message})}catch(t){}i.Xd(l.M.Zib,u.V5(o.type))}),this.sd.addEventListener("abort",function(){}),i.addEventListener(d.ca.closed,function(){o.sd=void 0})}_esm(e),e.aeb=e.nda=void 0,s=i(47),u=i(185),c=i(14),h=i(80),f=i(73),n=i(8),i(98),l=i(3),i(4),p=i(21),r=i(19),d=i(15),a=i(155),o=i(191),m.prototype.Hh=function(){return this.g2.value},m.prototype.updating=function(){return!!this.sd&&this.sd.updating},m.prototype.J$=function(t){this.FMa=t},m.prototype.Q5=function(){return this.xF},m.prototype.buffered=function(){return this.sd.buffered},m.prototype.toString=function(){return"SourceBuffer (type: "+this.type+")"},m.prototype.toJSON=function(){return{type:this.type}},m.prototype.K5=function(){var t,e,i,n,r,a,o;try{if(t=this.sd.buffered,e=0,t)for(i=[],n=0,r=t.length,n=0;n<r;n++)a=t.start(n),e+=(o=t.end(n))-a,p.hb(a<o),i.push(a+"-"+o);if(i)return{Buffered:e.toFixed(3),Ranges:i.join("|")}}catch(t){}},m.prototype.oQa=function(t,e){try{p.hb(this.sd.buffered&&this.sd.buffered.length<=1,"Gaps in media are not allowed: "+JSON.stringify(this.K5()))}catch(t){}p.hb(!this.Hh()),this.j9a("append",t),e=e&&e.Ou/1e3,r.Ba(e)&&this.sd.timestampOffset!==e&&(this.sd.timestampOffset=e),this.sd.appendBuffer(t),this.g2.set(!0)},m.prototype.remove=function(t,e){p.hb(!this.Hh());try{this.j9a("remove"),this.sd.remove(t,e),this.g2.set(!0)}catch(t){this.log.error("SourceBuffer remove exception",t,this.wga)}},m.prototype.j9a=function(t,e){this.xF.data=e||[],this.xF.state="init",this.xF.operation=t},m.prototype.dYb=function(t,e){this.$Lb=Math.floor(1e3*t/e)},m.prototype.lub=function(e){var i;if(this.sd&&!useDDplus){if((e=this.PVa([{type:this.Pvb,kh:e}]))!==this.mimeType){if(i=this.mimeType,this.log.info("Changing SourceBuffer mime-type from: "+this.mimeType+" to: "+e),!this.sd.changeType)throw new b("Platform doesnt support changing SourceBuffer mime-type");try{this.sd.changeType(e),this.mimeType=e}catch(t){throw this.log.error("Error changing SourceBuffer type",t,this.wga,{From:i,To:e}),new b(t.message)}}}else this.log.info("No SourceBuffer")},m.prototype.appendBuffer=function(t,e){return!e||e.ad?this.aia(t,e):this.j3(t,e),!0},m.prototype.aia=function(t,e){this.j.Xf.aia(this,t,e||{})},m.prototype.j3=function(t,e){t=this.Ivb(t,e),this.j.Xf.j3(t)},m.prototype.Ivb=function(t,e){var i=this.$Lb||0;return{fSa:function(){this.response=void 0},mi:function(){return this.requestId},constructor:{name:"MediaRequest"},mediaType:this.mediaType,readyState:o.wc.Sc.DONE,AA:e.Z,Vw:e.Z+e.duration,Hr:e.duration,Ou:i,ek:e.ek,xa:e.xa,Oa:e.Oa,Md:+e.Md,location:e.location,QL:e.offset,PL:e.offset+e.fa-1,bitrate:e.bitrate,response:t,CZa:t&&0<t.byteLength,kD:!0,get ad(){return!this.kD},n8a:this.Tj-i||1/0,toJSON:function(){var t={requestId:this.requestId,segmentId:this.xa,isHeader:this.ad,ptsStart:this.AA,ptsOffset:this.Ou,responseType:this.K8b,duration:this.Hr,readystate:this.Bh};return this.stream&&(t.bitrate=this.stream.bitrate),JSON.stringify(t)}}},m.prototype.endOfStream=function(){var t;this.j.bG("EndOfStream"),null!==(t=this.j.Xf)&&void 0!==t&&t.d9(this.mediaType)},m.prototype.addEventListener=function(t,e,i){this.ft.addListener(t,e,i)},m.prototype.removeEventListener=function(t,e){this.ft.removeListener(t,e)},m.prototype.PVa=function(t){var e=n.ka.get(a.TR);return this.type===s.Tb.Ta.Mb?e.l4(t):e.i4(t)},it.Object.defineProperties(m.prototype,{mediaType:{configurable:!0,enumerable:!0,get:function(){return this.type}},F3:{configurable:!0,enumerable:!0,get:function(){return this.yMa.F3}},TY:{configurable:!0,enumerable:!0,get:function(){return this.yMa.TY}},Pvb:{configurable:!0,enumerable:!0,get:function(){return 0===this.type?"audio":"video"}}}),e.nda=m,T(b,Error),e.aeb=b},function(t,e,i){var n,r,a,o,s,u;function c(t){return n.hb(void 0!==o[t]),o[t]}_esm(e),e.GTa=e.Uqa=void 0,n=i(21),r=i(24),a=i(19),o={'"':'""',"\r":"","\n":" "},s=/["\r\n]/g,u=/[", ]/,e.GTa=function(t){return a.Xc(t)?a.Ba(t)?t:a.Se(t)?t.replace(s,c):a.rpa(t)?t:isNaN(t)?"NaN":"":""},e.Uqa=function(t){var i=e.GTa,n="";return r.te(t,function(t,e){t=i(t)+"="+i(e),u.test(t)&&(t='"'+t+'"'),n=n?n+","+t:t}),n}},function(t,e){_esm(e),e.Oj=void 0,(t=e.Oj||(e.Oj={}))[t.H9a=1]="sourceopen",t[t.Wp=2]="currentTimeChanged",t[t.BY=3]="seeked",t[t.n1a=5]="licenseadded",t[t.G9a=6]="sourceBuffersAdded",t[t.l9=7]="onNeedKey"},function(t,e){_esm(e),e.iea="PlaygraphManagerFactorySymbol"},function(t,e){_esm(e),e.kea="PlaygraphVideoPlayerFactorySymbol"},function(t,e,i){var n;function r(t,e){var r=this;this.vk=t,this.Zg=e,this.addEventListener=function(t,e,i){return r.Zg.addListener(t,r.WTa(t,e),i)},this.removeEventListener=function(t,e){return r.Zg.removeListener(t,r.WTa(t,e))},this.getReady=function(){return r.Zg.isReady()},this.getXid=function(){return r.Ab().Az()},this.getMovieId=function(){return r.Ab().vYa()},this.getPlaygraphId=function(){return r.Zg.PGb()},this.getElement=function(){return r.Zg.Dn()},this.isPlaying=function(){return r.Ab().sq()},this.isPaused=function(){return r.Ab().lW()},this.isMuted=function(){return r.Ab().Dpa()},this.isReady=function(){return r.Ab().isReady()},this.isBackground=function(){return r.Ab().X_a()},this.setBackground=function(t){return r.Ab().Rva(t)},this.startInactivityMonitor=function(){return r.Ab().yP()},this.setTransitionTime=function(t){return r.Ab().gwa(t)},this.getDiagnostics=function(){return r.Ab().xXa()},this.getTextTrackList=function(t){return r.Ab().doa(t)},this.getMaxRecommendedTextIndex=function(t){return r.Ab().una(t)},this.getTextTrack=function(){return r.Ab().coa()},this.setTextTrack=function(t){return r.Ab().cwa(t)},this.getVolume=function(){return r.Ab().qZa()},this.isEnded=function(){return r.Ab().vpa()},this.getBusy=function(){return r.Ab().Hh()},this.getError=function(){return r.Ab().getError()},this.getCurrentTime=function(){return r.Ab().Yt()},this.getBufferedTime=function(){return r.Ab().dXa()},this.getSegmentTime=function(){return r.Ab().N5()},this.getDuration=function(){return r.Ab().ana()},this.getVideoSize=function(){return r.Ab().pZa()},this.getAudioTrackList=function(){return r.Ab().VWa()},this.getMaxRecommendedAudioIndex=function(){return r.Ab().oYa()},this.getAudioTrack=function(){return r.Ab().UWa()},this.getTimedTextTrackList=function(t){return r.Ab().doa(t)},this.getMaxRecommendedTimedTextIndex=function(t){return r.Ab().una(t)},this.getTimedTextTrack=function(){return r.Ab().coa()},this.shouldUseProjectSalsaUI=function(){return r.Ab().r9a()},this.getAdditionalLogInfo=function(){return r.Ab().RWa()},this.getTrickPlayFrame=function(t){return r.Ab().mZa(t)},this.getSessionSummary=function(){return r.Ab().Una()},this.getTimedTextSettings=function(){return r.Ab().LV()},this.setMuted=function(t){return r.Ab().U8a(t)},this.setVolume=function(t){return r.Ab().e9a(t)},this.getPlaybackRate=function(){return r.Ab().Jo()},this.setPlaybackRate=function(t){return r.Ab().V8a(t)},this.setAudioTrack=function(t){return r.Ab().G8a(t)},this.setTimedTextTrack=function(t){return r.Ab().cwa(t)},this.setTimedTextSettings=function(t){return r.Ab().oP(t)},this.prepare=function(){return r.Ab().iI()},this.load=function(){return r.Ab().load()},this.close=function(t){return r.qQa(r.Zg.close(),t)},this.play=function(){return r.Ab().play()},this.pause=function(){return r.Ab().pause()},this.seek=function(){throw Error("Seek by graph position has not been implemented")},this.transition=function(){throw Error("Transition segment has not been implemented")},this.engage=function(t,e){return r.qQa(r.Ab().AM(t),e)},this.induceError=function(t){return r.Ab().z_a(t)},this.loadCustomTimedTextTrack=function(t,e,i,n){return r.Ab().t1a(t,e,i,n)},this.tryRecoverFromStall=function(){},this.getCropAspectRatio=function(){return r.Ab().O5()},this.getCropAspectRatioXandY=function(){return r.Ab().rXa()},this.generateScreenshots=function(t){return r.Ab().MWa(t)},this.getCurrentSegmentId=function(){return r.Zg.tXa()},this.getPlaygraphMap=function(){return r.Zg.eH()},this.updatePlaygraphMap=function(t){return r.Zg.KZ(t)},this.Qla=new Map,this.log=n.Oi("VideoPlayer"),Object.defineProperty(this,"diagnostics",{get:this.getDiagnostics})}_esm(e),e.t1=void 0,n=i(8),i(98),r.prototype.Ab=function(){return this.Zg.Ab()},r.prototype.WTa=function(t,e){var i;return this.Qla.has(t)||this.Qla.set(t,new Map),(i=this.Qla.get(t)).has(e)||i.set(e,this.pzb(t,e)),i.get(e)},r.prototype.pzb=function(e,i){var n=this;return function(t){return i(Object.assign({},t,{type:e,target:n}))}},r.prototype.qQa=function(t,e){return e?t.then(e,e):t},e.t1=r},function(t,e,i){e=i(248),t.exports=void 0!==e&&"undefined"!=typeof nrdp?nrdp.ea:Date.now},function(t){t.exports={vx:{Pea:0,YJa:1,rl:2,name:["transient","semiTransient","permanent"]},qx:{yCa:0,XJa:1,d1:2,FR:3,Px:100,name:["firstLoad","scrollHorizontal","search","playFocus"]},q8b:{f8b:0,T5b:1,W3b:2,Px:100,name:["trailer","montage","content"]},vv:{AEa:0,DJa:1,ukb:2,Yeb:3,Px:100,name:["left","right","up","down"]},jR:{Vdb:0,d1:1,p5b:2,N4b:3,o3b:4,o5b:5,Mcb:6,Px:100,name:"continueWatching search grid episode billboard genre bigRow".split(" ")},VJ:{FR:0,QAa:1,Px:100,name:["playFocused","detailsOpened"]}}},function(t,e,i){var n;function r(){}_esm(e),n=i(43),r.prototype.pXa=function(t){return{BSa:Reflect.getMetadata(n.Bda,t),X1b:(t=Reflect.getMetadata(n.YKa,t))||{}}},r.prototype.SGb=function(t){return Reflect.getMetadata(n.ZKa,t)||[]},e.pda=r},function(t,e,i){var n;_esm(e),n=i(55),e.u0a=function(t){return t instanceof RangeError||t.message===n.Sjb}},function(t,e,i){var a,o,s,u;function n(t){this.plb=t}_esm(e),a=i(55),o=i(43),s=i(65),u=i(93),n.prototype.U0b=function(){return this.plb()},e.Sca=n,e.l=function(r){return function(t,e,i){var n;if(void 0===r)throw Error(a.skb(t.name));n=new s.Metadata(o.hR,r),"number"==typeof i?u.ZI(t,e,i,n):u.mZ(t,e,n)}}},function(t,e,i){var r,a,o,s;function n(t,e,i,n){this.id=a.id(),this.type=t,this.Lg=i,this.name=new s.vjb(e||""),this.Gc=[],t=null,"string"==typeof n?t=new o.Metadata(r.vB,n):n instanceof o.Metadata&&(t=n),null!==t&&this.Gc.push(t)}_esm(e),r=i(43),a=i(107),o=i(65),s=i(568),n.prototype.HZa=function(t){for(var e=0,i=this.Gc;e<i.length;e++)if(i[e].key===t)return!0;return!1},n.prototype.isArray=function(){return this.HZa(r.QE)},n.prototype.GNb=function(t){return this.fra(r.QE)(t)},n.prototype.Epa=function(){return this.HZa(r.vB)},n.prototype.Rpa=function(){return this.Gc.some(function(t){return t.key!==r.hR&&t.key!==r.QE&&t.key!==r.E0&&t.key!==r.ZR&&t.key!==r.vB})},n.prototype.m0a=function(){return this.fra(r.RGa)(!0)},n.prototype.qGb=function(){return this.Epa()?this.Gc.filter(function(t){return t.key===r.vB})[0]:null},n.prototype.bFb=function(){return this.Rpa()?this.Gc.filter(function(t){return t.key!==r.hR&&t.key!==r.QE&&t.key!==r.E0&&t.key!==r.ZR&&t.key!==r.vB}):null},n.prototype.fra=function(r){var a=this;return function(t){for(var e,i=0,n=a.Gc;i<n.length;i++)if((e=n[i]).key===r&&e.value===t)return!0;return!1}},e.n1=n},function(t,e,i){var n,r;function a(t){this.Ec=t,this.hS=new r.Hba(this.Ec),this.nfa=new n.y_(this.Ec)}_esm(e),n=i(197),r=i(198),a.prototype.when=function(t){return this.hS.when(t)},a.prototype.$Z=function(){return this.hS.$Z()},a.prototype.Mw=function(t){return this.nfa.Mw(t)},e.xE=a},function(t,e,i){var n;function r(i){return function(e){function t(t){return null!==t&&null!==t.target&&t.target.fra(i)(e)}return t.W2a=new n.Metadata(i,e),t}}_esm(e),t=i(43),n=i(65),e.rab=function t(e,i){return null!==(e=e.rA)&&(!!i(e)||t(e,i))},i=(e.z$a=r)(t.vB),e.A3a=i,e.yab=function(i){return function(t){var e;return null!==t&&(e=t.PT[0],"string"==typeof i?e.Lg===i:i===t.PT[0].wm)}}},function(t,e,i){var n;function r(t,e){this.wg=e,this.aA=Math.floor(t),this.display=this.aA+" "+this.wg.name}function a(t,e,i){this.wg=t,this.name=e,this.xl=i||this,n.Qo(this,"base")}_esm(e),e.Us=e.$R=void 0,n=i(56),a.prototype.WU=function(t){return this.wg==t.wg},a.prototype.toJSON=function(){return this.name},e.$R=a,r.prototype.da=function(t){return this.wg.WU(t)?this.aA:Math.floor(this.aA*this.wg.wg/t.wg)},r.prototype.V5a=function(t){return this.wg.WU(t)?this.aA:this.aA*this.wg.wg/t.wg},r.prototype.as=function(t){return new r(this.da(t),t)},r.prototype.to=function(t){return new r(this.da(t),t)},r.prototype.toString=function(){return this.display},r.prototype.toJSON=function(){return{magnitude:this.aA,units:this.wg.name}},r.prototype.add=function(t){return this.xSa(t)},r.prototype.Qa=function(t){return this.xSa(t,function(t){return-t})},r.prototype.scale=function(t){return new r(this.da(this.wg.xl)*t,this.wg.xl)},r.prototype.Al=function(t){return this.da(this.wg.xl)-t.da(this.wg.xl)},r.prototype.WU=function(t){return 0==this.Al(t)},r.prototype.G0a=function(){return 0==this.aA},r.prototype.Fpa=function(){return this.aA<0},r.prototype.ZKb=function(){return 0<this.aA},r.prototype.xSa=function(t,e){return e=void 0===e?function(t){return t}:e,new r(this.da(this.wg.xl)+e(t.da(this.wg.xl)),this.wg.xl)},e.Us=r},function(t,e){_esm(e),e.lIa="PlatformConfigOverridesSymbol"},function(t,e){_esm(e),e.ABa="DrmDataFactorySymbol"},function(t,e,i){var s,n;function r(t,e,i,n,r){this.version=t,this.sO=e,this.a$a=i,this.Wn=n,this.gx=r,this.cw=[]}_esm(e),e.Jca=void 0,s=i(3),n=i(41),r.prototype.load=function(t){return this.FMb(t)},r.prototype.add=function(t){return this.cw.push(t),this.ita()},r.prototype.remove=function(t,e){return 0<=(t=this.gXa(this.QM(t,e)))?(this.cw.splice(t,1),this.ita()):Promise.resolve()},r.prototype.update=function(t,e){return 0<=(e=this.gXa(this.QM(t,e)))?(this.cw[e]=t,this.ita()):Promise.resolve()},r.prototype.FMb=function(a){var o=this;return this.u1a||(this.u1a=new Promise(function(n,r){o.Wna().then(function(t){return o.storage=t,o.storage.load(o.sO)}).then(function(t){var e,i;t=t.value;try{e=a(t),o.version=e.version,o.cw=e.data,n()}catch(t){i=t,o.Hzb().then(function(){r(i)}).catch(function(){r(i)})}}).catch(function(t){t.na!==s.L.EB?r(t):n()})})),this.u1a},r.prototype.ita=function(){var i,n,t,e,r=this;return this.a$a?this.X$?(t=new Promise(function(t,e){i=t,n=e}),e=function(){r.X$=t,r.Z9a().then(function(){i()}).catch(function(t){n(t)})},this.X$.then(e).catch(e),t):this.X$=this.Z9a():Promise.resolve()},r.prototype.Z9a=function(){var i=this,n=this.gx();return new Promise(function(t,e){i.Wna().then(function(t){return t.save(i.sO,n,!1)}).then(function(){t()}).catch(function(t){e(r.U_b(s.M.Jib,t))})})},r.prototype.Hzb=function(){var i=this;return this.a$a?new Promise(function(t,e){i.Wna().then(function(t){return t.remove(i.sO)}).then(function(){t()}).catch(function(t){e(t)})}):Promise.resolve()},r.prototype.Wna=function(){return this.storage?Promise.resolve(this.storage):this.Wn.create()},r.prototype.QM=function(t,e){for(var i=0;i<this.cw.length;++i)if(e(this.cw[i],t))return this.cw[i]},r.prototype.gXa=function(t){return t?this.cw.indexOf(t):-1},r.U_b=function(t,e){var i;return e.na&&e.cause?new n.qd(t,e.na,void 0,void 0,void 0,void 0,void 0,e.cause):void 0!==e.Cc?(i=e.message?e.message+" ":"",e.code=t,e.message=i||void 0,e):e instanceof Error?new n.qd(t,s.L.Lj,void 0,void 0,void 0,void 0,e.stack,e):new n.qd(t,s.L.Vl,void 0,void 0,void 0,void 0,void 0,e)},e.Jca=r},function(t,e){_esm(e),e.qea="QueryStringDataProviderSymbol"},function(t,e){_esm(e),e.FGa="NetworkMonitorConfigSymbol"},function(t,e){_esm(e),e.CBa="DrmProviderSymbol"},function(t,e){_esm(e),e.eCa="EmeSessionFactorySymbol"},function(t,e){_esm(e),e.bCa=e.qF=void 0,(t=e.qF||(e.qF={}))[t.Request=0]="Request",t[t.IJa=1]="Renewal",e.bCa="EmeApiSymbol"},function(t,e){function i(){}_esm(e),e.i1=void 0,i.PJb=function(t){return"ID"+(t+1)},i.h$a=function(t){return Number(t.substr(2))-1},e.i1=i},function(t,u,e){var i,n,g,r,a,o,s,v,c,h,f,l,p,y,d,b,w,m,_,E,k,S;function T(t,e,i,n,r,a,o,s){var m=this;this.Aa=e,this.Fy=i,this.config=n,this.Ch=r,this.Tl=a,this.Eo=o,this.Xo=s,this.keyStatuses=new w.dc({}),this.Isa=function(t){var e,i,n,r;try{i=(e=m.Tl.hka(t)).HH,n=e.messageType,r=e.sessionId,m.yw=m.yw||e.yw,m.IY(r),m.log.trace("Received "+t.type+" event",{sessionId:r,messageType:n,keyIds:m.yw}),n===u.eda&&(m.log.trace("Received a renewal request"),m.Uf=v.Xh.rp,m.al=E.sI),m.al===E.Hg&&m.Kp(c.Rs.Q6a),m.al===E.sI&&m.Kp(c.Rs.R6a),r={dk:i,TRa:n,Uf:m.Uf},null!==(n=m.GQb)&&void 0!==n&&n.call(m,r),m.yW&&(m.yoa(i)?m.pD(new b.qd(g.M.RBa)):(m.yW.resolve(r),m.yW=void 0))}catch(t){m.pD(t)}},this.Gsa=function(t){var e,i,n,r,a,o,s,u,c,h=t.target,f=h.keyStatuses;m.IY(h.sessionId),m.log.trace("Received event: "+t.type);try{e=null===(o=null===(a=m.context)||void 0===a?void 0:a.Iu)||void 0===o?void 0:o.reduce(function(t,e){return t[e.pj]=e.xI.height,t},{}),t=[];for(var l=nt(f),p=l.next();!p.done;p=l.next())n=(i=nt(p.value)).next().value,i=i.next().value,n=m.Fy.encode(new Uint8Array(n)),t.push({pj:n,status:i,height:null==e?void 0:e[n]});t.sort(function(t,e){return(t.height||0)-(e.height||0)}),r=t.map(function(t){return t.pj}),a=t.map(function(t){return t.height}),o=t.map(function(t){return t.status}),m.log.trace("KeyStatus: "+r+", "+a+", "+o),e={};for(var d=nt(f),b=d.next();!b.done;b=d.next())s=(u=nt(b.value)).next().value,u=u.next().value,s=m.Fy.encode(new Uint8Array(s)),u=k[u],e[s]=u.status,m.p7(s,u.error)&&(c=new y.Ng(u.error),m.oW(c));m.keyStatuses.set(e)}catch(t){(c=new y.Ng(g.M.Tib)).AU(t)}c?m.B7(c):(m.Tl.a4()||m.I0a(),m.Uf!==v.Xh.eo||m.Tl.yia()||m.DVb())},this.Mn=function(t){var e=m.Tl.Vy(t);m.log.error("Received event: "+t.type,e),m.pD(e),m.B7(e),m.iq||m.pu||m.oW(e)},this.zQb=function(){m.log.error("MediaKeySession closed unexpectedly."),m.oW(new b.qd(g.M.ufb))},this.pD=function(e){var t;m.iq&&m.close().then(function(){var t;m.log.trace("Issuing a generate challenge error"),null!==(t=m.iq)&&void 0!==t&&t.reject(e),m.iq=void 0},function(t){m.log.error("EmeSession closed with an error.",m.Tl.Vy(t)),null!==(t=m.iq)&&void 0!==t&&t.reject(e),m.iq=void 0}),null!==(t=m.yW)&&void 0!==t&&t.reject(e)},this.uLb=function(){var t;null!==(t=m.iq)&&void 0!==t&&t.resolve(),m.iq=void 0},this.B7=function(e){return m.log.error("Failed to add license",e),m.close().then(function(){var t;m.log.trace("Issuing a license error"),m.iq=void 0,null!==(t=m.pu)&&void 0!==t&&t.reject(e),m.pu=void 0},function(t){m.log.error("EmeSession closed with an error.",m.Tl.Vy(t)),m.al===E.sI&&m.Kp(c.Rs.MPa),m.iq=void 0,null!==(t=m.pu)&&void 0!==t&&t.reject(e),m.pu=void 0}).then(function(){throw e})},this.I0a=function(){m.pu&&(m.log.info("Successfully added license"),m.al===E.Hg?m.Kp(c.Rs.DPa):m.al===E.sI&&m.Kp(c.Rs.LPa),m.pu.resolve(),m.pu=void 0)},this.oW=function(e){m.close().then(function(){var t;m.log.trace("Issuing a CDM error"),m.iq=void 0,m.pu=void 0,null!==(t=m.n4a)&&void 0!==t&&t.call(m,e)},function(t){m.log.error("EmeSession closed with an error.",m.Tl.Vy(t)),m.iq=void 0,m.pu=void 0,null!==(t=m.n4a)&&void 0!==t&&t.call(m,e)})},this.Kp=function(t){m.pd.push({time:m.Aa.Yb(),RW:t})},this.l7a=!1,this.log=t.ib("EmeSession"),this.al=E.N0b,this.pd=[]}_esm(u),u.fCa=u.eda=u.fda=void 0,t=e(1),i=e(0),n=e(4),g=e(3),r=e(18),a=e(7),o=e(36),s=e(69),v=e(57),c=e(325),h=e(207),f=e(137),l=e(205),p=e(322),y=e(95),d=e(64),b=e(41),w=e(80),m=e(619),_=e(63),(S=E=E||{})[S.N0b=0]="unknown",S[S.create=1]="create",S[S.load=2]="load",S[S.Hg=3]="license",S[S.sI=4]="renewal",S[S.stop=5]="stop",S[S.closed=6]="closed",u.fda="license-request",u.eda="license-renewal",k={usable:{status:h.rv.ibb},expired:{status:h.rv.Ot,error:g.M.eHa},released:{status:h.rv.released},"output-not-allowed":{status:h.rv.H4a,error:g.M.fHa},"output-restricted":{status:h.rv.H4a,error:g.M.Gda},"output-downscaled":{status:h.rv.ARb},"status-pending":{status:h.rv.nZb},"internal-error":{status:h.rv.iKb,error:g.M.Sib}},T.prototype.Wt=function(){var t,e;return this.ura?(e=null===(t=this.ura)||void 0===t?void 0:t.keySystem,(t=_.d6(this.ura))&&(e+="."+t),e):"n/a"},T.prototype.vz=function(){return this.sessionId},T.prototype.close=function(){var e=this;return this.al=E.closed,this.pd=[],this.Ch.eLb()?(this.log.trace("Closing the session"),this.Ch.f7a(this.Isa),this.Ch.d7a(this.Gsa),this.Ch.b7a(this.Mn),this.mediaKeys=void 0,this.Xo.Jq(this.config.iQa,this.Ch.close()).then(function(){e.log.info("Closed the session")}).catch(function(t){throw e.log.error("Close failed",t),e.Tl.Vy(t).code=g.M.Vib,t})):Promise.resolve(void 0)},T.prototype.Vt=function(){return this.Eo},T.prototype.D6=function(){return void 0!==this.qj},T.prototype.createSession=function(t,e,i,n){var r=this;return this.context=n,this.ura=t,this.Uf=i,this.al=E.create,this.Kp(c.Rs.m1a),(e.DZa()?Promise.resolve():this.Xo.Jq(this.config.jQa,this.Ch.createMediaKeys(t)).then(function(t){return r.log.trace("Created media keys"),e.setMediaKeys(t),r.zrb(t)})).then(function(){r.mediaKeys=e.mediaKeys;try{r.Ch.createSession(r.mediaKeys,"temporary"),r.Ch.GPa(r.Isa),r.Ch.BPa(r.Gsa),r.Ch.zPa(r.Mn),r.Ch.pqb(r.zQb),r.IY(r.Ch.vz())}catch(t){return Promise.reject(new y.Ng(g.M.nfb,g.L.Lj,void 0,"Unable to create a persisted key session",t))}}).catch(function(t){return t.code&&t.Cc?Promise.reject(t):Promise.reject(new y.Ng(g.M.GQ,t instanceof d.hr?g.L.HQ:g.L.Lj,void 0,"Unable to create MediaKeys. "+t.message,t))})},T.prototype.RXb=function(t){this.Si=t,this.log.wPa("xid",t.ba)},T.prototype.fEb=function(t){var e=this;return this.generateRequest(t).then(function(){return e.log.trace("Returning the challenge promise"),e.yW.promise})},T.prototype.gEb=function(t){return this.generateRequest(t),this.iq.promise},T.prototype.CPa=function(t){this.we=t.we,t=t.qj.map(function(t){return t.data}),this.yoa(t)?(this.log.error("The license buffer is empty"),this.pD(new y.Ng(g.M.QBa,g.L.OBa))):(this.al===E.Hg&&(this.Kp(c.Rs.P6a),this.qj=t,this.QUa=this.Tl.YM(this.yw,t),this.uLb()),this.al===E.sI&&(this.Kp(c.Rs.S6a),this.qj=t,this.QUa=this.Tl.YM(this.yw,t),this.dia()))},T.prototype.Aqb=function(t){this.al===E.sI?(this.Kp(c.Rs.T6a),this.oW(t)):this.pD(t)},T.prototype.dia=function(){var t,e=this;return this.qj?(this.pu=new m.V0,t=this.qj,this.qj=void 0,this.Xo.Jq(this.config.nQa,this.Ch.update(t,this.al===E.Hg?p.qF.Request:p.qF.IJa,this.yw)).then(function(){e.Tl.a4()&&e.I0a()}).catch(function(t){(t=e.Tl.Vy(t)).code=g.M.R0,t.message="Unable to update the EME",e.log.error(t.message,t),e.B7(t)}),this.pu.promise):this.B7(new y.Ng(g.M.QBa,g.L.TBa))},T.prototype.KXb=function(t){this.GQb=t},T.prototype.EXb=function(t){this.n4a=t},T.prototype.YM=function(){return this.QUa},T.prototype.generateRequest=function(t){var n=this;return this.al=E.Hg,this.log.trace("Generating a license challenge"),this.iq=new m.V0,this.yW=new m.V0,t?this.yoa(t)?(t=new y.Ng(g.M.PBa,g.L.OBa),this.pD(t),Promise.reject(t)):this.Xo.Jq(this.config.kQa,this.Ch.generateRequest(this.Tl.yV(),t)).then(function(){n.IY(n.Ch.vz())}).catch(function(t){var e,i=new y.Ng(g.M.Z_,t instanceof d.hr?g.L.HQ:g.L.Lj);try{e=n.Tl.Vy(t),i.Kd=e.Kd,i.message="Unable to generate request.",i.AU(t)}catch(t){}return n.log.error("Unable to generate a license request",i),n.pD(i),Promise.reject(i)}):(t=new y.Ng(g.M.PBa,g.L.TBa),this.pD(t),Promise.reject(t))},T.prototype.zrb=function(t){var e=this,i=this.Tl.Yma();return i?(i=this.Fy.decode(i),this.Xo.Jq(this.config.mQa,this.Ch.setServerCertificate(t,i)).then(function(t){e.log.trace("Set the server certificate",{result:t})})):Promise.resolve()},T.prototype.IY=function(t){t&&t!==this.sessionId&&(this.sessionId&&this.log.warn("sessionId changed from "+this.sessionId+" to "+t),this.sessionId=t,this.log.wPa("sessionId",t))},T.prototype.DVb=function(){var t=this;this.l7a||(this.l7a=!0,this.log.info("Kicking off license renewal",{timeout:this.config.rD}),setTimeout(function(){t.rI()},this.config.rD.da(n.ja)))},T.prototype.nLb=function(e){var t;return!(null===(t=null===(t=this.context)||void 0===t?void 0:t.Iu)||void 0===t||!t.some(function(t){return t.pj===e&&1080<t.xI.height}))},T.prototype.p7=function(t,e){return e===g.M.Gda?this.nLb(t)?this.config.J4a:this.config.I4a:!!e},T.prototype.rI=function(){this.log.trace("Initiating a renewal request"),this.Uf=v.Xh.rp,this.al=E.sI,this.Tl.lja()?this.Tl.npa(this.Ch):this.k4()},T.prototype.k4=function(){var t=this;this.Ch.k4(this.mediaKeys,"temporary",this.Isa,this.Gsa,this.Mn).then(function(){t.log.debug("Creating session to renew license"),t.IY(t.Ch.vz())}).catch(function(){t.oW(new y.Ng(g.M.Z_))})},T.prototype.yoa=function(t){return 0===t.length||t.reduce(function(t,e){return t||0===e.length},!1)},e=T,e=t.__decorate([i.R(),t.__param(0,i.l(a.qb)),t.__param(1,i.l(r.jd)),t.__param(2,i.l(o.Ci)),t.__param(3,i.l(s.sv)),t.__param(4,i.l(p.bCa)),t.__param(5,i.l(l.kfb)),t.__param(6,i.l(f.GBa)),t.__param(7,i.l(d.Rx))],e),u.fCa=e},function(t,e){var i,n;_esm(e),e.RUa=e.Rs=void 0,(n=i=e.Rs||(e.Rs={}))[n.m1a=0]="licenseStarted",n[n.Q6a=1]="receivedLicenseChallenge",n[n.P6a=2]="receivedLicense",n[n.R6a=3]="receivedRenewalChallengeComplete",n[n.S6a=4]="receivedRenewalLicenseComplete",n[n.T6a=5]="receivedRenewalLicenseFailed",n[n.EUb=6]="receivedIndivChallengeComplete",n[n.FUb=7]="receivedIndivLicenseComplete",n[n.DPa=8]="addLicenseComplete",n[n.LPa=9]="addRenewalLicenseComplete",n[n.MPa=10]="addRenewalLicenseFailed",e.RUa=function(t){switch(t){case i.m1a:return"lg";case i.Q6a:return"lc";case i.P6a:return"lr";case i.R6a:return"renew_lc";case i.S6a:return"renew_lr";case i.T6a:return"renew_lr_failed";case i.EUb:return"ilc";case i.FUb:return"ilr";case i.DPa:return"ld";case i.LPa:return"renew_ld";case i.MPa:return"renew_ld_failed";default:return"unknown"}}},function(t,e){_esm(e),e.vAa="ClockConfigSymbol"},function(t,e){_esm(e),e.TGa="OneWayCounterFactorySymbol"},function(t,e,i){var r;function n(){}_esm(e),e.Fba=void 0,t=i(1),i=i(0),r={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},n.prototype.decode=function(t){for(var e=new Uint8Array(t.length/2),i=0;i<e.length;i++)e[i]=this.dab(t.substr(2*i,2));return e},n.prototype.encode=function(t){for(var e,i="",n=t.length,r=0;r<n;r++)i+="0123456789ABCDEF"[(e=t[r])>>>4]+"0123456789ABCDEF"[15&e];return i},n.prototype.UG=function(t,e){var i="";for(e<<=1;e--;)i=("0123456789ABCDEF"[15&t]||"0")+i,t>>>=4;return i},n.prototype.dab=function(t){var e=t.length;if(7<e)throw Error("hex to long");for(var i=0,n=0;n<e;n++)i=16*i+r[t[n]];return i},i=t.__decorate([i.R()],n),e.Fba=i},function(t,e,i){var n,r;function a(){this.fq={},this.id="$es$"+n.counter++}_esm(e),e.Gk=void 0,t=i(1),i=i(0),a.prototype.addListener=function(t,e,i){var n,r="$netflix$player$order"+this.id+"$"+t;this.fq&&(n=this.fq[t]?this.fq[t].slice():[],i&&(e[r]=i),n.indexOf(e)<0&&(n.push(e),n.sort(function(t,e){return(t[r]||0)-(e[r]||0)})),this.fq[t]=n)},a.prototype.removeListener=function(t,e){if(this.fq&&this.fq[t]){for(var i,n=this.fq[t].slice();0<=(i=n.indexOf(e));)n.splice(i,1);this.fq[t]=n}},a.prototype.Fc=function(t,i,e){var n;if(this.fq)for(n=this.kna(t),t={xJ:0};t.xJ<n.length;(t={xJ:t.xJ}).xJ++)e?function(e){return function(){var t=n[e.xJ];setTimeout(function(){t(i)},0)}}(t)():n[t.xJ].call(this,i)},a.prototype.Fh=function(){this.fq=void 0},a.prototype.on=function(t,e,i){this.addListener(t,e,i)},a.prototype.kna=function(t){return null!==(t=this.fq&&(this.fq[t]||(this.fq[t]=[])))&&void 0!==t?t:[]},(r=n=a).counter=0,r=n=t.__decorate([i.R()],r),e.Gk=r},function(t,e){_esm(e),e.NAa="CsvEncoderSymbol"},function(t,e){_esm(e),e.cca="DecoderTimeoutPathologistSymbol"},function(t,e){_esm(e),e.sda=e.Phb=void 0,e.Phb=function(){},e.sda="MseConfigSymbol"},function(t,e,i){function n(t){this.Smb=void 0!==t&&t,this.cf={0:[]}}_esm(e),e.nea=void 0,t=i(1),i=i(0),n.prototype.add=function(t,e){var i;e=void 0===e?0:e,(i=this.cf[e])?this.Smb&&-1!==i.indexOf(t)||i.push(t):this.cf[e]=[t]},n.prototype.remove=function(t,e){this.oy(t,void 0===e?0:e)},n.prototype.removeAll=function(t){this.oy(t)},n.prototype.flatten=function(){var i=this;return Object.keys(this.cf).sort().reduce(function(t,e){return t.concat(i.cf[e])},[])},n.prototype.oy=function(i,n){Object.entries(this.cf).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,void 0!==n&&n!==parseInt(t)||-1<(t=e.indexOf(i))&&e.splice(t,1)})},i=t.__decorate([i.R()],n),e.nea=i},function(t,e){_esm(e),e.LLa="UrlFactorySymbol"},function(t,e,i){var n,s,r;function a(t,e,i,n,r,a,o){this.debug=t,this.config=e,this.platform=i,this.p8=n,this.debug.assert(r&&r!=s.M.Vl,"There should always be a specific error code"),this.errorCode=r||s.M.Vl,a&&"object"==typeof a?(this.na=a.na||a.Cc,this.pf=a.pf||a.Kd,this.Kla=a.Kla||a.un,this.ub=a.ub||a.details,this.FU=a.hk,this.Z4=a.Z4||a.cbc||a.mA,this.DM=a.DM||a.data,a.OW&&(this.OW=a.OW),this.ik=a.ik,this.method=a.method,this.O8=a.O8,this.alert=a.alert,this.Uha=a.Uha,this.kH=a.kH,!this.ub&&this.kH&&(this.ub=JSON.stringify(this.kH)),this.debug.assert(!this.ik||this.ik==this.pf)):(this.na=a,this.pf=o),this.stack=[this.errorCode],this.na?this.stack.push(this.na):this.pf&&this.stack.push(s.L.Vl),this.pf&&this.stack.push(this.pf),this.I4=this.platform.bq+this.stack.join("-")}_esm(e),e.MIa=void 0,n=i(12),s=i(3),r=i(19),i(24),a.prototype.toString=function(){var t="[PlayerError #"+this.I4+"]";return this.ub&&(t+=" "+this.ub),this.FU&&(t+=" (CustomMessage: "+this.FU+")"),t},a.prototype.xZ=function(){var t,e;if(this.FU&&(t=["streaming_error"]),t||this.p8.Vt()!==n.Y_||("80080017"==this.pf&&(t=["admin_mode_not_supported","platform_error"]),"8004CD12"===this.pf&&(t=["pause_timeout"])),t||this.p8.Vt()!==n.gca||this.errorCode!==s.M.NBa&&this.errorCode!==s.M.GQ||(t=["no_cdm","platform_error","plugin_error"]),this.gLb()&&(t=["received_soad"]),(e=this.PEb())&&(t=[e],this.FU=void 0),!t)switch(this.errorCode){case s.M.Q0:case s.M.u0:case s.M.Acb:case s.M.eHa:t=["pause_timeout"];break;case s.M.aEa:case s.M.bEa:t=this.na?["platform_error"]:["multiple_tabs"];break;case s.M.jhb:case s.M.$jb:case s.M.Jgb:case s.M.Igb:case s.M.Lgb:t=["should_signout_and_signin"];break;case s.M.Hca:case s.M.jHa:case s.M.Hda:case s.M.cHa:t=["platform_error","plugin_error"];break;case s.M.GR:t=["no_cdm","platform_error","plugin_error"];break;case s.M.UBa:case s.M.fr:case s.M.R0:switch(this.pf){case"FFFFD000":t=["device_needs_service","platform_error"];break;case"48444350":t=["unsupported_output","platform_error"];break;case"00000024":t=["private_mode"]}break;case s.M.fHa:case s.M.Gda:t=["unsupported_output"]}if(!t&&s.pCa(this.na)&&(t=this.na==s.L.eR?["geo"]:["internet_connection_problem"]),t||this.errorCode!==s.M.GQ||this.na!==s.L.Lj||"S"!==this.platform.bq||(t=["private_mode"]),!t)switch(this.k$a(this.na)){case s.L.bfa:t=["should_upgrade"];break;case s.L.aHa:t=["should_reset_device"];break;case s.L.$Ga:t=["should_reload_device"];break;case s.L.ZGa:t=["should_exit_device"];break;case s.L.Rhb:case s.L.yFa:t=["should_signout_and_signin"];break;case s.L.Shb:t=["internet_connection_problem"];break;case s.L.SAa:t=["platform_error","plugin_error"];break;case s.L.RAa:case s.L.IDa:case s.L.JDa:t=["private_mode"];break;case s.L.cda:t=["should_reload_with_preferred_locales"]}return(t=t||[]).push(this.platform.bq+this.errorCode),this.na&&(this.k$a(this.na)===s.L.bHa?t.push("incorrect_pin"):t.push(""+this.na)),{display:{code:this.I4,text:this.FU},messageIdList:t,alert:this.alert,alertTag:this.Uha,preferredAudioLocale:null===(e=this.kH)||void 0===e?void 0:e.d_a,preferredTextLocale:null===(e=this.kH)||void 0===e?void 0:e.e_a}},a.prototype.k$a=function(t){var e=parseInt(t,10);return isNaN(e)?t:e},a.prototype.gLb=function(){var t=r.Ba(this.pf)?this.pf.toString():r.Se(this.pf)?this.pf:"";return this.Z4===s.D0.Wea&&(t.endsWith("2018")||t.endsWith("2020"))},a.prototype.PEb=function(){if(this.errorCode===s.M.XJ&&(this.na===s.L.Cda||this.na===s.L.YGa))return this.QEb(this.na===s.L.Cda)},a.prototype.QEb=function(t){var e=this.config().browserInfo||{},i=null===(n=e.os)||void 0===n?void 0:n.name,n=((null===(r=e.os)||void 0===r?void 0:r.version)||"").split("."),r=parseInt(n&&n[0]);switch(n=parseInt(n&&n[1]),i){case"windows":return r<6||6===r&&n<1?t?"cdm_not_supported_warning_switch_windows":"cdm_not_supported_switch_windows":t?"cdm_not_supported_warning_update":"cdm_not_supported_update";case"mac":return r<10||10===r&&n<10?t?"cdm_not_supported_warning_switch_mac":"cdm_not_supported_switch_mac":t?"cdm_not_supported_warning_update":"cdm_not_supported_update";default:return t?"cdm_not_supported_warning_other":"cdm_not_supported_other"}},e.MIa=a},function(t,e){_esm(e),e.mda="MediaElementHelpersSymbol"},function(t,e){_esm(e),e.JQ="EventSourceFactorySymbol"},function(t,e,i){var n;function r(){}_esm(e),e.JQ=e.tCa=void 0,t=i(1),n=i(329),i=i(0),r.prototype.create=function(){return new n.Gk},i=t.__decorate([i.R()],r),e.tCa=i,e.JQ="EventSourceFactorySymbol"},function(t,e){_esm(e),e.$Aa="DebouncerFactorySymbol"},function(t,e,i){var r;function n(t,e,i,n,r,a){this.level=t,this.Ao=e,this.timestamp=i,this.message=n,this.ic=r,this.index=void 0===a?0:a,this.fhb={0:"F",1:"E",2:"W",3:"I",4:"T",5:"D"}}_esm(e),e.Wca=void 0,r=i(4),n.prototype.maa=function(e,i){var n=""+this.message;return this.ic.forEach(function(t){n+=t.fJ(e,i)}),(this.timestamp.da(r.ja)/1e3).toFixed(3)+"|"+this.index+"|"+(this.fhb[this.level]||this.level)+"|"+this.Ao+"| "+n},e.Wca=n},function(t,e){_esm(e),e.uGa="MomentObserverFactory"},function(t,e){_esm(e),e.nKa="SegmentConfigFactorySymbol"},function(t,e){_esm(e),e.yIa="PlaybackFactorySymbol"},function(t,e){_esm(e),e.YLa="VideoPlayerFactorySymbol"},function(t,e){_esm(e),e.wLa="TransitionLoggerSymbol"},function(t,e){_esm(e),e.pBa="DiagnosticsFactorySymbol"},function(t,e){_esm(e),e.EHa="PboGenerateScreenshotsCommandSymbol"},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(669),e),t.__exportStar(i(670),e),t.__exportStar(i(671),e),t.__exportStar(i(672),e),t.__exportStar(i(673),e),t.__exportStar(i(674),e),t.__exportStar(i(675),e),t.__exportStar(i(676),e),t.__exportStar(i(677),e),t.__exportStar(i(678),e),t.__exportStar(i(679),e),t.__exportStar(i(680),e),t.__exportStar(i(684),e),t.__exportStar(i(213),e),t.__exportStar(i(685),e),t.__exportStar(i(214),e),t.__exportStar(i(686),e),t.__exportStar(i(687),e),t.__exportStar(i(688),e),t.__exportStar(i(689),e),t.__exportStar(i(690),e),t.__exportStar(i(691),e),t.__exportStar(i(692),e),t.__exportStar(i(693),e),t.__exportStar(i(694),e),t.__exportStar(i(695),e),t.__exportStar(i(696),e),t.__exportStar(i(697),e),t.__exportStar(i(698),e),t.__exportStar(i(699),e),t.__exportStar(i(700),e),t.__exportStar(i(701),e),t.__exportStar(i(702),e),t.__exportStar(i(703),e),t.__exportStar(i(711),e),t.__exportStar(i(713),e),t.__exportStar(i(714),e)},function(t,e){_esm(e),e.cia=void 0,e.cia=function(i,n,t){var r,a=!0;return t.forEach(function(t){var e;a&&i===t.profile&&(e=t.ranges,!(a=void 0===e?n>=t.min&&n<=t.max:e.some(function(t){return n>=t.min&&n<=t.max}))&&t.disallowed&&t.disallowed.some(function(t){if(t.stream.bitrate===n)return r=t.disallowedBy,!0}))}),{inRange:a,H4:r}}},function(t,e){_esm(e),e.aF=void 0,e.aF={wn:function(t){return t}}},function(t,e,i){var n,a;function r(t,e){var i=this;void 0===e&&(e=!1),this.Utb=e,this.filters=((e={})[a.CO]=[],e[a.QG]=[],e),Array.isArray(t)?t.forEach(function(t){return i.and(t,a.CO)}):this.and(t)}_esm(e),e.mF=e.mK=void 0,n=i(350),(i=a=e.mK||(e.mK={}))[i.CO=0]="primary",i[i.QG=1]="fallback",r.prototype.and=function(t,e){return void 0===e&&(e=a.CO),t!==n.aF&&this.filters[e].push({filter:t,OSa:!0}),this},r.prototype.or=function(t,e){return void 0===e&&(e=a.CO),this.filters[e].push({filter:t,OSa:!1}),this},r.prototype.filter=function(i){var t=this;[a.CO,a.QG].forEach(function(e){t.filters[e]=t.filters[e].filter(function(t){return i(e,t.filter)})})},r.prototype.wn=function(i,n){var r=this;return[a.CO,a.QG].reduce(function(t,e){return r.filters[e].reduce(function(t,e){return e.OSa?t=e.filter.wn(t,n):0===t.length&&(t=e.filter.wn(i,n)),t},t)},i)},e.mF=r},function(t,e,i){var n,r,a;function o(t,e){this.G=t,this.Dz=e?[e]:[]}function s(t,e){return a.call(this,t,e)||this}_esm(e),e.er=e.Cjb=void 0,n=i(2),r=i(215),Object.defineProperties(o.prototype,{value:{get:function(){return this.G},enumerable:!1,configurable:!0}}),o.prototype.addListener=function(t){-1===this.Dz.indexOf(t)&&(this.Dz=this.Dz.slice(),this.Dz.push(t))},o.prototype.removeListener=function(t){-1!==(t=this.Dz.indexOf(t))&&(this.Dz=this.Dz.slice(),this.Dz.splice(t,1))},t=o,e.Cjb=t,a=t,n.__extends(s,a),s.oya=function(t,e,i){return new r.zda(t,e,i,!1)},Object.defineProperties(s.prototype,{value:{get:function(){return this.G},set:function(t){this.set(t)},enumerable:!1,configurable:!0}}),s.prototype.set=function(e){var i=this.G;i!==e&&(this.G=e,this.Dz.forEach(function(t){return t({oldValue:i,newValue:e})}))},t=s,e.er=t},function(t,e,i){var n;_esm(e),e.de=void 0,(t=i(2)).__exportStar(i(354),e),t.__exportStar(i(729),e),t.__exportStar(i(216),e),t.__exportStar(i(730),e),t.__exportStar(i(731),e),t.__exportStar(i(732),e),t.__exportStar(i(355),e),t.__exportStar(i(734),e),n=i(54),Object.defineProperties(e,{de:{enumerable:!0,get:function(){return n.de}}})},function(t,e){var i;_esm(e),e.Os=e.lQ=void 0,(i=e.lQ||(e.lQ={}))[i.default=0]="default",i[i.disabled=1]="disabled",i[i.gNb=2]="lowCpuPlaybackStarting",(e=e.Os||(e.Os={}))[e.CLOSED=0]="CLOSED",e[e.OPEN=1]="OPEN"},function(t,e){_esm(e)},function(t,e,i){var h,f,n;_esm(e),e.gka=e.ECb=e.xC=e.NI=void 0,h=i(2),f=i(22),n=i(67),Object.defineProperties(e,{NI:{enumerable:!0,get:function(){return n.NI}}}),Object.defineProperties(e,{xC:{enumerable:!0,get:function(){return n.xC}}}),e.ECb=function(t,e){var i,n,r;t=Math.max(t.duration-3e4,3e4);for(var a,o={},s=0,u=0;u<t;u+=3e4)n="s"+s++,r={W:e,Jb:u,Ob:u+3e4<t?u+3e4:null},void 0!==a&&(a.next=((i={})[n]={weight:1},i),a.Qe=n),a=o[n]=r;return{Yd:"s0",qa:o,ae:"lazy"}},e.gka=function(t,e,i){var n,r,a,o;try{for(var s=h.__values(Object.keys(t.qa)),u=s.next();!u.done;u=s.next())if(r=u.value,a=t.qa[r],a.W===e&&(o=f.T.Eb(a.Jb),i.Or(o)&&(null===a.Ob||void 0===a.Ob||i.lessThan(f.T.Eb(a.Ob)))))return{xa:r,offset:i.Qa(o)}}catch(t){var c={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}}},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),i=i(1),r=Error,i.__extends(a,r),n=a,e.AssertionError=n,e.assert=function(t,e){if(!t)throw new n(e||"Assertion failed")}},function(t,e){_esm(e),e.kDb=function(e,i){var n=void 0;return Object.keys(e.qa).some(function(t){return null===(t=(n=e.qa[t]).next)||void 0===t?void 0:t[i]})?n:void 0}},function(t){function e(){}function i(t){this.gPa=t,this.xp=[],this.Cg=null}e.prototype.clear=function(){this.cf=null,this.size=0},e.prototype.find=function(t){for(var e,i=this.cf;null!==i;){if(0===(e=this.cn(t,i.data)))return i.data;i=i.rh(0<e)}return null},e.prototype.lowerBound=function(t){for(var e,i=this.cf,n=this.iterator(),r=this.cn;null!==i;){if(0===(e=r(t,i.data)))return n.Cg=i,n;n.xp.push(i),i=i.rh(0<e)}for(e=n.xp.length-1;0<=e;--e)if(r(t,(i=n.xp[e]).data)<0)return n.Cg=i,n.xp.length=e,n;return n.xp.length=0,n},e.prototype.upperBound=function(t){for(var e=this.lowerBound(t),i=this.cn;null!==e.data()&&0===i(e.data(),t);)e.next();return e},e.prototype.min=function(){var t=this.cf;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},e.prototype.max=function(){var t=this.cf;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},e.prototype.iterator=function(){return new i(this)},e.prototype.mf=function(t){for(var e,i=this.iterator();null!==(e=i.next());)t(e)},i.prototype.data=function(){return null!==this.Cg?this.Cg.data:null},i.prototype.next=function(){var t;if(null===this.Cg)null!==(t=this.gPa.cf)&&this.aOa(t);else if(null===this.Cg.right){do{if(t=this.Cg,!this.xp.length){this.Cg=null;break}}while(this.Cg=this.xp.pop(),this.Cg.right===t)}else this.xp.push(this.Cg),this.aOa(this.Cg.right);return null!==this.Cg?this.Cg.data:null},i.prototype.lI=function(){var t;if(null===this.Cg)null!==(t=this.gPa.cf)&&this.XNa(t);else if(null===this.Cg.left){do{if(t=this.Cg,!this.xp.length){this.Cg=null;break}}while(this.Cg=this.xp.pop(),this.Cg.left===t)}else this.xp.push(this.Cg),this.XNa(this.Cg.left);return null!==this.Cg?this.Cg.data:null},i.prototype.aOa=function(t){for(;null!==t.left;)this.xp.push(t),t=t.left;this.Cg=t},i.prototype.XNa=function(t){for(;null!==t.right;)this.xp.push(t),t=t.right;this.Cg=t},t.exports=e},function(t){function e(t){this.zga=t,this.gg=[],this.ur=!1,this.SF=void 0,this.Yj={}}e.prototype.a3=function(t){this.gg.length===this.zga&&this.gg.shift(),Array.isArray(t)?this.gg=this.gg.concat(t):this.gg.push(t),this.ur=!0},e.prototype.fN=function(){return this.gg.length},e.prototype.fja=function(){var t=this.gg;return 0<t.length?t.reduce(function(t,e){return t+e},0)/this.gg.length:void 0},e.prototype.O3=function(){var t,e=this.gg;if(0<e.length)return t=this.fja(),e=e.reduce(function(t,e){return t+e*e},0)/e.length,Math.sqrt(e-t*t)},e.prototype.At=function(t){var e,i,n;return!this.ur&&void 0!==this.SF||(this.SF=this.gg.slice(0).sort(function(t,e){return t-e}),this.Yj={},this.ur=!1),void 0===this.Yj[t]&&(e=this.SF,i=Math.floor(t/100*(e.length-1)+1)-1,n=(t/100*(e.length-1)+1)%1,this.Yj[t]=i==e.length-1?e[i]:e[i]+n*(e[1+i]-e[i])),this.Yj[t]},t.exports=e},function(t,e,i){t.exports={e$b:i(362),pcc:i(221),K3b:i(756),J3b:i(363),L3b:i(364),ECa:i(759)}},function(t,e,i){var a;function n(t){this.reset(),this.QXb(t)}function r(t){this.setInterval(t),this.reset()}function o(t){this.MB=new r(t),this.Ne=0,this.Tc=null}a=i(10),n.prototype.QXb=function(t){this.xK=Math.pow(.5,1/t),this.DS=t},n.prototype.reset=function(t){t&&t.Ga&&a.Ba(t.Ga)?t.aj&&a.Ba(t.aj)?(this.Fv=this.Jmb,this.yp=t.Ga,this.JB=t.aj+t.Ga*t.Ga):(this.Fv=this.Jmb,this.yp=t.Ga,this.JB=t.Ga*t.Ga):this.JB=this.yp=this.Fv=0},n.prototype.add=function(t){var e;a.Ba(t)&&(this.Fv++,e=this.xK,this.yp=e*this.yp+(1-e)*t,this.JB=e*this.JB+(1-e)*t*t)},n.prototype.get=function(){var t,e,i;return 0===this.Fv?{Ga:0,aj:0}:(t=this.yp,e=this.JB,e/=i=1-Math.pow(this.xK,this.Fv),i=(t/=i)*t,{Ga:Math.floor(t),aj:Math.floor(i<e?e-i:0)})},n.prototype.getState=function(){return 0===this.Fv?null:{a:Number(this.yp.toPrecision(6)),s:Number(this.JB.toPrecision(6)),n:this.Fv}},n.prototype.Ve=function(t){return!a.Bb(t)&&a.has(t,"a")&&a.has(t,"s")&&a.isFinite(t.a)&&a.isFinite(t.s)?(this.yp=t.a,this.JB=t.s,a.has(t,"n")&&a.Ba(t.n)?this.Fv=t.n:this.Fv=16*this.DS,!0):(this.JB=this.yp=this.Fv=0,!1)},r.prototype.setInterval=function(t){this.DS=t,this.xK=-Math.log(.5)/t},r.prototype.reset=function(t){this.tb=this.Af=null,t&&a.isFinite(t.Ga)?this.yp=t.Ga:this.yp=0},r.prototype.start=function(t){a.Bb(this.Af)&&(this.tb=this.Af=t)},r.prototype.add=function(t,e,i){var n,r;a.Bb(this.Af)&&(this.tb=this.Af=e),this.Af=Math.min(this.Af,e),e=Math.max(i-e,1),n=this.xK,r=i>this.tb?i:this.tb,this.yp=this.yp*(r>this.tb?Math.exp(-n*(r-this.tb)):1)+8*t/e*(1-Math.exp(-n*e))*(r<i?Math.exp(-n*(r-i)):1),this.tb=r},r.prototype.get=function(t){var e;return t=Math.max(t,this.tb),e=this.yp*Math.exp(-this.xK*(t-this.tb)),0<(t=1-Math.exp(-this.xK*(t-this.Af)))&&(e/=t),{Ga:Math.floor(e)}},r.prototype.toString=function(){return"ewmav("+this.DS+")"},o.prototype.setInterval=function(t){this.MB.setInterval(t)},o.prototype.reset=function(t){this.MB.reset(t),this.Ne=0,this.Tc=null},o.prototype.start=function(t){!a.Bb(this.Tc)&&t>this.Tc&&(this.Ne+=t-this.Tc,this.Tc=null),this.MB.start(t-this.Ne)},o.prototype.add=function(t,e,i){!a.Bb(this.Tc)&&i>this.Tc&&(this.Ne+=e>this.Tc?e-this.Tc:0,this.Tc=null),this.MB.add(t,e-this.Ne,i-this.Ne)},o.prototype.stop=function(t){this.Tc=Math.max(a.Bb(this.MB.tb)?0:this.MB.tb+this.Ne,a.Bb(this.Tc)?t:Math.min(this.Tc,t))},o.prototype.get=function(t){return this.MB.get((a.Bb(this.Tc)?t:this.Tc)-this.Ne)},o.prototype.toString=function(){return this.MB.toString()},t.exports={ffb:n,c4b:r,dfb:o}},function(t,e,i){var r,a;function n(t,e,i,n){r.call(this,i,n),this.Mv=new a(t),this.nnb=e}r=i(143),a=i(360),(n.prototype=Object.create(r.prototype)).shift=function(){var t=this.Pw(0);return r.prototype.shift.call(this),null!==t&&this.Mv.a3(t),t},n.prototype.flush=function(){var t=this.get();return this.Mv.a3(t),r.prototype.reset.call(this),t},n.prototype.get=function(){var t=this.GV();return{sampleSize:this.fN(),A9:t,hX:t.uk?(t.Kl-t.Jl)/t.uk:void 0}},n.prototype.fN=function(){return this.Mv.fN()},n.prototype.GV=function(){return this.Mv.fN()<this.nnb?{Jl:void 0,uk:void 0,Kl:void 0,sampleSize:void 0,wj:void 0}:{Jl:this.Mv.At(25),uk:this.Mv.At(50),Kl:this.Mv.At(75),sampleSize:this.Mv.fN(),wj:this.Mv.At.bind(this.Mv)}},n.prototype.toString=function(){return"biqr("+this.wL+","+this.Hd+","+this.bk+")"},t.exports=n},function(t,e,i){var n,r;function a(t){this.I={JW:t.maxc||25,Wja:t.c||.5,N2b:t.w||15e3,Iy:t.b||5e3},n.call(this,this.I.N2b,this.I.Iy),this.eT()}n=i(143),r=i(219).TDigest,(a.prototype=Object.create(n.prototype)).shift=function(){var t=this.Pw(0);return n.prototype.shift.call(this),null!==t&&(this.df.push(t,1),this.ur=!0),t},a.prototype.flush=function(){var t=this.get();return this.df.push(t,1),this.ur=!0,n.prototype.reset.call(this),t},a.prototype.get=function(){return this.jZa()},a.prototype.wz=function(){var t=this.jZa();return{min:t.min,p10:t.r9,p25:t.Jl,p50:t.uk,p75:t.Kl,p90:t.s9,max:t.max,centroidSize:t.hub,sampleSize:t.sampleSize,centroids:t.Mi}},a.prototype.jZa=function(){var t;return 0===this.df.size()||(t=this.df.wj([0,.1,.25,.5,.75,.9,1]))[2]===t[4]?null:(!this.ur&&this.dg||(this.ur=!1,this.dg={min:t[0],r9:t[1],Jl:t[2],uk:t[3],Kl:t[4],s9:t[5],max:t[6],wj:this.df.wj.bind(this.df),hub:this.df.size(),sampleSize:this.df.n,Mi:this.SEb(),wz:this.wz.bind(this)}),this.dg)},a.prototype.SEb=function(){var t;return 0===this.df.size()?null:!this.ur&&this.dg?this.dg.centroids:(t=this.df.wj([.25,.75]))[0]===t[1]?null:(this.df.size()>this.I.JW&&this.df.Ty(),t=this.df.fp(!1).map(function(t){return{mean:t.qg,n:t.n}}),JSON.stringify(t))},a.prototype.fZa=function(){return this.df.summary()},a.prototype.size=function(){return this.df.size()},a.prototype.toString=function(){return"btdtput("+this.wL+","+this.Hd+","+this.bk+"): "+this.df.summary()},a.prototype.eT=function(){this.df=new r(this.I.Wja,this.I.JW)},t.exports=a},function(t,e,i){var n,r;function a(t){this.I={JW:t.maxc||25,Wja:t.c||.5,GUb:t.rc||"none",$Hb:t.hl||7200},this.eT(),this.Pob=this.I.GUb,this.DS=this.I.$Hb,this.mfa=Math.exp(Math.log(2)/this.DS),this.mfa=Math.max(this.mfa,1),this.M1=1}n=i(10),r=i(219).TDigest,new(i(6).default.Console)("ASEJS_NETWORK_HISTORY","media|asejs"),a.prototype.getState=function(){var t;return 0===this.df.size()||(t=this.df.wj([.25,.75]))[0]===t[1]?null:(this.df.size()>this.I.JW&&this.df.Ty(),t=this.df.fp(!1).reduce(function(t,e){return n.Ba(e.qg)&&n.Ba(e.n)&&t.push({mean:e.qg,n:e.n/this.M1}),t}.bind(this),[]),{tdigest:JSON.stringify(t)})},a.prototype.Ve=function(t){var e;if(n.Bb(t)||!n.has(t,"tdigest")||!n.Se(t.tdigest))return!1;try{e=JSON.parse(t.tdigest)}catch(t){return!1}e.forEach(function(t){n.isFinite(t.n)||(t.n=1)}),t=e.map(function(t){return{qg:t.mean,n:t.n}}),this.M1=1,this.df.fua(t),void 0===this.df.wj(0)&&this.eT()},a.prototype.get=function(){var t=this.df,e=t.wj([0,.1,.25,.5,.75,.9,1]);return{min:e[0],r9:e[1],Jl:e[2],uk:e[3],Kl:e[4],s9:e[5],max:e[6],Mi:t.fp(!1)}},a.HGb=function(t){var e=new a({});return n.Bb(t)||n.ia(t)||!n.isArray(t.Mi)||(e.df.fua(t.Mi),void 0===e.df.wj(0)&&e.eT()),(t=e.df.wj([.25,.75]))[0]===t[1]?null:function(t){return e.df.wj(t)}},a.prototype.add=function(t){var e=1;"ewma"===this.Pob&&(this.M1=e=this.M1*this.mfa),this.df.push(t,e)},a.prototype.toString=function(){return"TDigestHist("+this.df.summary()+")"},a.prototype.eT=function(){this.df=new r(this.I.Wja,this.I.JW)},t.exports={eLa:a}},function(t,e,i){var n,d,r,a,o,s,u;function c(t,e,i){var n,r,a;this.I=e,this.H=i,this.E2=t,n=this.mL=this.BK=this.AK=0,a=r=0,this.E2.length>=this.I.C8&&(this.E2.forEach(function(t){!(t=t.get().BDb)||d.ia(t.avtp)||d.ia(t.neuhd)||(n+=t.avtp,r+=+t.neuhd,a++)}),this.mL=a,this.AK=n/a,this.BK=r/a)}function h(t,e,i){return(t=u.call(this,t,e,i)||this).dfa=[],t.MCb={},t.F$a=[],t.Xy=new s,t.E2.length>=t.I.C8&&(t.lPa("avtp",t.Xy.y3),t.lPa("neuhd",t.Xy.S8)),t}_esm(e),e.wDa=e.Eca=void 0,n=i(2),d=n.__importStar(i(10)),r=n.__importDefault(i(6)),a=i(770),o=i(771),s=function(){this.y3=new o.JR(100),this.S8=new o.JR(100)},Object.defineProperties(c.prototype,{rsb:{get:function(){return this.AK},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{tsb:{get:function(){return this.BK},enumerable:!1,configurable:!0}}),c.prototype.r7=function(){return this.mL>=this.I.C8&&this.AK>=this.I.baselineHighAndStableThreshold.bwThreshold&&this.BK<this.I.baselineHighAndStableThreshold.nethreshold},t=c,e.Eca=t,u=t,n.__extends(h,u),h.prototype.r7=function(){var t;return this.GGb(),(t=new a.nFa(this.H,this.F$a,this.Ksb)).Ita(this.dfa),t=t.Rub(this.I.I6.Ibc),this.L1b&&1===t&&this.mL>=this.I.C8},h.prototype.tV=function(){var t={},e=r.default.time.now(),i=new Date(e),n=i.getHours();return t.currentMonoTime=e,t.currentTime=i.getTime(),t.currentHour=n,t},h.prototype.yXa=function(t,e,i){t="avtp"===t?this.AK:this.BK;for(var n=e.O3(),r=0,a="skew"===i?3:4,o=0;o<e.gg.length;o++)d.ia(t)||d.ia(n)||(r+=Math.pow(e.gg[o]-t,a));return r/=e.gg.length,!d.ia(n)&&0<n?r/Math.pow(n,a)-3*("skew"===i?0:1):NaN},h.prototype.SXa=function(t,i,e){var n=0;return"lte"===e?n=t.reduce(function(t,e){return e<=i?t+1:t},0)/+t.length:"gte"===e&&(n=t.reduce(function(t,e){return i<=e?t+1:t},0)/+t.length),n},h.prototype.oGb=function(t){var e=t.At(25),i=t.At(50);return t=t.At(75),!(d.ia(e)||d.ia(i)||d.ia(t))&&0<i?(t-e)/i:NaN},h.prototype.JEb=function(t,e){return t="avtp"===t?this.AK:this.BK,e=e.O3(),!d.ia(e)&&!d.ia(t)&&(0<e||0<t)&&0<t?(t-e)/(t+e):NaN},h.prototype.GV=function(t,e){return t=t.At(e),d.ia(t)?NaN:t},h.prototype.normalize=function(t,e,i){return!isNaN(t)&&0<i?(t-e)/i:NaN},h.prototype.GGb=function(){var i,n,r,a,o,s,u,c=this,h=this.I.I6.R1a.qac,f=this.I.I6.R1a.oac,l=this.I.I6.R1a.pac,p=0;this.L1b=!Object.keys(h).some(function(t){var e;if(s=NaN,!(h.hasOwnProperty(t)&&f.hasOwnProperty(t)&&l.hasOwnProperty(t)&&!d.ia(c.Xy)&&c.Xy.y3&&c.Xy.S8)||c.mL<1||"number"!=typeof h[t]||"number"!=typeof f[t]||"number"!=typeof l[t])return!0;switch(i=h[t],n=f[t],r=l[t],u=t.split("_",2),a=u[0],o=u[1],a){case"avtp":e=c.Xy.y3;break;case"neuhd":e=c.Xy.S8;break;default:e=void 0}if("avtp"===a||"neuhd"===a){if(e)switch(o){case"last":s=e.gg[c.mL-1];break;case"mean":s="avtp"===a?c.AK:c.BK;break;case"niqr":s=c.oGb(e);break;case"skew":s=c.yXa(a,e,"skew");break;case"kurtosis":s=c.yXa(a,e,"kurtosis");break;case"std":s=e.O3();break;case"b":s=c.JEb(a,e);break;default:-1!==t.search("[p][1-9]?[1-9]")&&(s=c.GV(e,Number(t.split("_p",2)[1])))}}else switch(t){case"fracAbove20Mbps":e=c.Xy.y3,s=d.ia(e)?NaN:c.SXa(e.gg,2e4,"gte");break;case"fracBelow20p":e=c.Xy.S8,s=d.ia(e)?NaN:c.SXa(e.gg,.15,"lte");break;case"hour_current":s=c.tV().currentHour;break;case"session_ct":s=c.mL;break;case"intercept":s=i,c.Ksb=s}if(s=c.normalize(s,n,r),isNaN(s))return!0;"intercept"!==t&&(c.dfa.push(s),c.F$a.push(i),c.MCb[t]=p,p+=1)})},h.prototype.lPa=function(e,i){this.E2.forEach(function(t){!(t=t.get().BDb)||"avtp"!==e&&"neuhd"!==e||d.ia(t[e])||i.a3(Number(t[e]))})},t=h,e.wDa=t},function(t,e,i){var n,r,a,o;function s(i){return function(){for(var t=Array(this.length),e=0;e<this.length;++e)t[e]=i.call(this,e);return t}}function u(t,e){this.md=t,this.Me=e}function c(t,e,i,n){if(this.mediaType=t,this.length=i.vd.length,this.nb=i.S,this.mr=i.vd,this.c3=n&&n.Du,this.UPa=n&&n.Tu,this.TK=e,this.Gxa=this.Hxa=this.TNa=void 0,this.I2=i.jl,this.fC=new Uint32Array(this.length+1),this.length){for(e=t=0;e<this.length;++e)this.fC[e]=t,t+=this.mr[e];this.fC[e]=t,this.lfa=Math.floor((this.Ha-this.Z)/this.length)}}_esm(e),e.Brb=e.Bw=e.Sea=e.tLa=void 0,t=i(2),n=i(5),t=t.__importDefault(i(6)),r=i(22),a=new t.default.Console("FRAGMENTS","media|asejs"),Object.defineProperties(u.prototype,{index:{get:function(){return this.Me},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Vc:{get:function(){return new r.T(this.Wa,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Pd:{get:function(){return new r.T(this.ob,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Wa:{get:function(){return this.md.I2+this.md.fC[this.Me]},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{ob:{get:function(){return this.Wa+this.md.mr[this.Me]},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Lt:{get:function(){return this.md.mr[this.Me]},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{sa:{get:function(){return this.md.sa},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{S:{get:function(){return this.md.S},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Z:{get:function(){return Math.floor(1e3*this.Wa/this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Ha:{get:function(){return Math.floor(1e3*(this.Wa+this.Lt)/this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{duration:{get:function(){return this.Ha-this.Z},enumerable:!1,configurable:!0}}),u.prototype.toJSON=function(){return{startPts:1e3*this.Wa/this.sa.S,endPts:1e3*this.ob/this.sa.S,duration:1e3*this.Lt/this.sa.S,index:this.index}},o=u,e.tLa=o,Object.defineProperties(c.prototype,{jl:{get:function(){return this.Q9a(0)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Fla:{get:function(){return this.Q9a(this.length)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Z:{get:function(){return this.Cj(0)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ha:{get:function(){return this.Cj(this.length)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Uk:{get:function(){return new r.T(this.Fla,this.S)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{jra:{get:function(){return this.TNa||this.mlb()},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{sa:{get:function(){return this.TK},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{S:{get:function(){return this.nb},enumerable:!1,configurable:!0}}),c.prototype.Q9a=function(t){return this.I2+this.fC[t]},c.prototype.Cj=function(t){return Math.floor(1e3*(this.I2+this.fC[t])/this.S)},c.prototype.VU=function(t){return this.Cj(t+1)},c.prototype.vd=function(t){return this.VU(t)-this.Cj(t)},c.prototype.get=function(t){return new o(this,t)},c.prototype.zn=function(t,e,i){if(0===this.length||t<this.Cj(0))return-1;t=Math.max(t,e||0);for(var n,r,a=0,o=this.length-1;a<=o;)if(n=a+(o-a>>1),t<(r=this.Cj(n)))o=n-1;else{if(!(t>=r+this.vd(n))){for(;e&&n<this.length&&this.Cj(n)<e;)++n;return n<this.length?n:i?this.length-1:-1}a=n+1}return i?this.length-1:-1},c.prototype.o5=function(t,e,i){return 0<=(t=this.zn(t,e,i))?this.get(t):void 0},c.prototype.jka=function(t,e){var i,n=Math.floor(e*this.S/1e3);if(e=Math.min(t+Math.ceil(e/this.lfa),this.length),n<(i=this.fC[e]-this.fC[t])){for(;n<=i;)--e,i-=this.mr[e];return e-t+1}for(;i<n&&e<=this.length;)i+=this.mr[e],++e;return e-t},c.prototype.subarray=function(t,e){return n.assert(void 0===t||0<=t&&t<this.length),n.assert(void 0===e||t<e&&e<=this.length),new c(this.mediaType,this.sa,{S:this.S,jl:this.I2+this.fC[t],vd:this.mr.subarray(t,e)},this.c3&&{Du:this.c3.subarray(t,e+1),Tu:this.UPa})},c.prototype.forEach=function(t){for(var e=0;e<this.length;++e)t(this.get(e),e,this)},c.prototype.map=function(t){for(var e=[],i=0;i<this.length;++i)e.push(t(this.get(i),i,this));return e},c.prototype.reduce=function(t,e){for(var i=0;i<this.length;++i)e=t(e,this.get(i),i,this);return e},c.prototype.toJSON=function(){return{length:this.length,averageFragmentDuration:this.lfa}},c.prototype.dump=function(){var t;a.trace("TrackFragments: "+this.length+", averageFragmentDuration: "+this.lfa+"ms");for(var e=0;e<this.length;++e)t=this.get(e),a.trace("TrackFragments: "+e+": ["+t.Z+"-"+t.Ha+"]")},c.prototype.mlb=function(){for(var t=0,e=0;e<this.length;e++)t=Math.max(this.mr[e],t);return this.TNa=t},i=c,e.Sea=i,e.Bw=s,i.prototype.P9a=s(i.prototype.Cj),s(i.prototype.VU),s(i.prototype.vd),e.Brb=function(i){return"["+Array(i.length).map(function(t,e){return i[e].toString()}).join(",")+"]"}},function(t,h,e){var f,l;_esm(h),h.uVa=h.nz=h.yn=h.W5=void 0,f=e(5),l=e(142),h.W5=function(t,e){return t.zn(e,void 0,!0)},h.yn=function(t,e,i,n,r,a){var o,s,u,c;return l.Qm.kq(t),f.assert(i.U,"findFirstFragment called without stream fragments"),o=i.U,n=Math.max(i.U.Cj(0),n),0===t&&!a&&e.fm&&!e.fG&&i.uf&&(n=Math.max(i.U.Cj(0),n+i.uf.Y)),s=h.W5(o,n),(u=i.Wk(s)).Ha<n||((c=u.jma(n))?(0<c.il&&u.Bk({start:c.il}),0!==t||e.zra||(c.Ed<0&&u.Bk({start:c.il}),c.Ed<(e.fm&&!e.fG&&i.uf?Math.floor(i.uf.Y):0)&&u.qla())):n>=u.Ha&&s<o.length-1&&(u=i.Wk(s+1)),1===t&&r&&u.Ha===r&&s<o.length-1&&(u=i.Wk(s+1)),0===t&&!u.wa&&(e.P_a||e.cBb)&&a&&u.Bk({}),u.nP(n)),u},h.nz=function(t,e,i,n,r,a){var o,s;return l.Qm.kq(t),o=i.U,void 0===n&&(n=o.Ha),(r=r&&r.eDb(i,n,t,e,a))||(r=o.sa,a=n?n+h.uVa(t,r,e.WD,e.v$):o.VU(o.length-1),o=o.zn(a,void 0,!0),r=i.Wk(o),0===o||r.Z!==n||1!==t&&e.WD||(--o,r=i.Wk(o)),(a=1===t?a:n)<r.Ha&&((s=r.ima(a))&&0!==s.il?r.Bk({end:s.il}):(0===t&&(s||a<r.Z)&&0!==o||1===t&&s&&0!==o)&&(r=i.Wk(o-1))),0===t&&!r.wa&&e.P_a&&r.Bk(),r.nP(n)),r},h.uVa=function(t,e,i,n){return 1===t||n?0:i?null!==(i=null==e?void 0:e.Y)&&void 0!==i?i:0:e?-e.Y:0}},function(t,e,i){var s,n,r;function a(t,e,i){this.I=e,this.H=i,this.ak=t.track,this.sL=t.Lf,this.Dw=t.Dw,this.Nmb=-1===this.profile.indexOf("none"),this.VK=this.Ma=void 0,e=t.ju,this.ju=void 0===e||e,this.H4=t.H4,this.SK=void 0,this.VNa=this.Ag=0,this.url=this.HI=this.Pc=this.ws=this.Aqa=this.location=this.Ra=this.wb=void 0,this.Ez=!1,this.Wpa=this.gf=void 0,"object"==typeof(e=(t=this.I)&&"object"==typeof t.l6a&&t.l6a[this.profile])&&(e=e[this.bitrate])&&(this.Job=new n.T(e.ticks,e.timescale)),this.ynb=0<=(null===(t=t.gsb)||void 0===t?void 0:t.indexOf(this.profile))}_esm(e),e.dza=void 0,s=i(776),n=i(22),i(5),r=i(101),Object.defineProperties(a.prototype,{je:{get:function(){return!!this.Ma},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{P:{get:function(){return this.ak.P},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{W:{get:function(){return this.P.W},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{J:{get:function(){return this.ak.J},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{mediaType:{get:function(){return this.ak.mediaType},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{sa:{get:function(){return this.ak.sa},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{S:{get:function(){return this.ak.S},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{$N:{get:function(){return this.ak.$N},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{trackId:{get:function(){return this.ak.trackId},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{track:{get:function(){return this.ak},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Lf:{get:function(){return this.sL},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Oa:{get:function(){return this.Dw.downloadable_id},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{id:{get:function(){return this.Oa},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Qz:{get:function(){return this.Nmb},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{bitrate:{get:function(){return this.Dw.bitrate},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{sb:{get:function(){return this.Dw.vmaf||void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{eWb:{get:function(){return this.Dw.res_w||void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{n$:{get:function(){return this.Dw.res_h||void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{profile:{get:function(){return this.Dw.content_profile},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{kh:{get:function(){return this.profile},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{zs:{get:function(){return this.Dw.sidx},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{uf:{get:function(){return this.Job},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{CIb:{get:function(){return this.ynb},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{U:{get:function(){return this.Ma},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{iA:{get:function(){return this.Ma&&this.Ma.iA},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Gma:{get:function(){return this.ak.Gma},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Fma:{get:function(){return this.ak.Fma},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Z:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{St:{get:function(){return void 0!==this.SK?this.SK:this.iLb()},set:function(t){this.SK=t},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{lu:{get:function(){return this.ju&&!this.Ez},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{Wg:{get:function(){return this.VK},enumerable:!1,configurable:!0}}),a.prototype.Xk=function(){return this.P.Xk(this.mediaType,this.Oa)},a.prototype.Y5=function(){var t=this.Xk();return t&&t.stream.U},a.prototype.pE=function(t){return this.P.pE(this,t)},a.prototype.j9=function(){this.track.j9()},a.prototype.i9=function(){this.track.i9()},a.prototype.h9=function(t,e,i,n,r,a,o){n&&void 0!==n.jl&&(this.track.je||void 0!==n.vd&&n.vd.length)&&void 0!==n.offset&&void 0!==n.sizes&&n.sizes.length?(this.I.fm&&this.uf&&0===n.jl&&(n.jl+=this.uf.Zf(n.S).vc),this.VK=t,this.je||(this.track.h9(this,e,i,n,a),this.Ma=new s.QKa(this.sL,this.track.gp,n,r,a,o,this.J),this.track.EQb(this))):n?this.H.error("AseStream.onHeaderReceived: fragmentsData was missing data:"+(void 0!==n.jl)+","+this.track.je+","+this.track.ola+","+(void 0!==n.vd)+","+!(!n.vd||!n.vd.length)+","+(void 0!==n.offset)+","+(void 0!==n.sizes)+","+!(!n.sizes||!n.sizes.length)):this.H.error("AseStream.onHeaderReceived: fragmentsData was undefined.")},a.prototype.h4=function(t){this.je||(this.track.Yvb(t.track),this.Ma=t.U,this.VK=t.Wg)},a.prototype.Wk=function(t){return new r.Rm(this,this.U.get(t))},a.prototype.NXa=function(t){var e=this.Wk(t.index);return t.wa&&(e.Bk(t.wa),e.nP(t.av)),e},a.prototype.Nab=function(t,e){this.Ag=t,this.VNa=e},a.prototype.Zub=function(){this.Ra=this.wb=this.Pc=this.location=this.url=void 0},a.prototype.toJSON=function(){return{movieId:this.J,mediaType:this.mediaType,streamId:this.Oa,bitrate:this.bitrate,streamIndex:this.Lf,isAvailable:this.ju,fittable:this.St,vmaf:this.sb,resolutionWidth:this.eWb,resolutionHeight:this.n$}},a.prototype.toString=function(){return(0===this.mediaType?"a":"v")+":"+this.Oa+":"+this.bitrate},a.prototype.iLb=function(){var t;return!this.je||(this.track.Joa>=this.bitrate?this.SK=!0:this.track.P1a<=this.bitrate?this.SK=!1:((t=this.Ma.ztb(this.I.XW,this.Ag,null!==(t=null===(t=this.P)||void 0===t?void 0:t.QI.Y)&&void 0!==t?t:0,null!==(t=null===(t=this.P)||void 0===t?void 0:t.QI.fa)&&void 0!==t?t:0,this.VNa))?this.track.ola&&!this.Qz||(this.track.Joa=this.bitrate):this.track.P1a=this.bitrate,this.SK=t))},e.dza=a},function(t){var e,e=((e=new Uint32Array([0,0])).set(new Uint32Array([16843009]),1),0!==e[0]?function(t,e,i){new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i*t.byteLength/t.length)}:function(t,e,i){t.set(e,i)});t.exports={from:function(t,e,i,n){t=new t(e.length);for(var r="function"==typeof i,a=0;a<e.length;++a)t[a]=r?i.call(n,e[a],a,e):e[a];return t},set:e}},function(t,e,i){var n,r,a,o;function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.qz=1536,t}function u(){return null!==a&&a.apply(this,arguments)||this}function c(){return null!==o&&o.apply(this,arguments)||this}_esm(e),n=i(2),r=i(172).default,n.__extends(s,r),s.Na=!0,t=s,e.default=t,a=t,n.__extends(u,a),u.Xb="ac-3",i=u,e.cba=i,o=t,n.__extends(c,o),c.Xb="ec-3",t=c,e.hca=t},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),r=i(100),t=i(32),i=r.YE,a=t.Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.fileSize=this.u.Td(),this.S=this.u.Td(),this.duration=this.u.Td(!1,!0),this.wsa=this.u.Td(),this.u.Td(),this.Asa=this.u.Td(),this.csa=this.u.ya(),this.xsa=this.u.Td(),this.vma=this.u.ya(),this.u.EA(),this.Te={moof:{offset:this.wsa},sidx:{offset:this.xsa,size:this.vma}},this.Te[r.zR]={offset:this.Asa,size:this.csa},this.u.offset-this.startOffset<=this.length-24&&(this.zsa=this.u.Td(),this.Wra=this.u.ya(),this.ysa=this.u.Td(),this.Ura=this.u.ya(),this.Te[r.Nx]={offset:this.zsa,size:this.Wra},this.Te[r.Mx]={offset:this.ysa,size:this.Ura}),!0},o.Xb=i,o.Na=!1,t=o,e.default=t},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),t=i(100),i=i(32),t=t.ZE,r=i.Dc,n.__extends(a,r),a.prototype.parse=function(){var t,e,i;this.Ac(),1<=this.version&&this.u.EA(),t=this.u.ya(),this.Te={};for(var n=this.startOffset+this.length,r=0;r<t;++r)"uuid"===(e=this.u.Ml())&&(e=this.u.EA()),i=this.u.Td(),this.Te[e]={offset:n,size:i},n+=i;return!0},a.Xb=t,a.Na=!1,i=a,e.default=i},function(t){var e={name:"heaac-2-dash reset sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Ck:new Uint8Array([33,17,69,0,20,80,1,70,157,188,0,0,8,28,0,0,0,14]).buffer},i={name:"heaac-2-dase standard sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Ck:new Uint8Array([33,17,69,0,20,80,1,70,240,77,251,1,60,8,64,0,0,0,0,0,0,0,0,0,7,14,0,14]).buffer},n={name:"ddplus-5.1-dash standard sample",profile:54,channels:6,sampleRate:48e3,duration:1536,Ck:new Uint8Array([11,119,1,127,63,134,255,225,6,32,0,32,0,66,10,65,0,135,216,68,3,254,202,2,88,163,1,16,177,64,146,32,160,75,20,80,37,136,35,227,36,160,152,156,165,37,38,41,37,73,74,9,201,146,130,114,82,116,160,152,152,150,136,58,125,89,245,39,207,159,63,116,150,147,242,73,95,165,171,175,253,215,126,82,21,55,188,8,165,126,249,242,100,175,255,249,73,42,255,253,215,124,246,156,23,239,108,36,134,249,211,228,181,255,246,253,205,119,176,179,86,126,166,27,231,175,225,58,255,222,170,110,127,249,215,41,232,146,73,183,0,88,211,192,0,0,31,7,178,116,62,122,114,245,8,233,196,71,223,196,18,59,202,113,248,103,242,80,250,118,15,1,60,79,251,46,14,8,9,37,4,14,183,67,131,195,103,241,250,32,124,81,61,76,9,40,161,2,1,16,64,114,219,225,217,172,140,44,12,64,147,49,210,195,206,12,52,186,196,0,107,134,202,4,9,216,72,67,11,127,185,13,125,124,124,194,90,203,69,1,209,8,129,183,36,196,101,7,248,73,181,38,181,30,232,124,27,18,222,207,92,251,85,227,78,0,70,196,59,0,207,194,0,252,226,209,111,144,239,111,148,54,39,28,176,248,160,58,88,113,9,76,65,57,180,96,82,224,115,52,208,161,184,86,120,211,212,168,13,52,217,124,121,189,237,163,53,72,52,157,245,160,110,16,182,219,180,152,180,136,47,23,151,198,192,20,62,220,249,107,82,0,0,0,234,22,24,202,252,104,154,198,95,7,98,110,113,104,187,197,110,105,201,123,18,61,45,233,135,20,0,151,155,45,131,75,174,9,228,53,214,32,19,131,131,87,146,156,22,16,160,0,0,5,169,31,241,155,119,242,21,168,176,225,35,130,186,60,97,189,244,57,5,158,124,200,224,156,74,33,48,12,75,235,252,25,83,61,12,178,134,75,92,124,56,71,63,232,35,142,23,11,179,154,25,17,254,160,55,0,28,144,253,91,117,102,221,190,135,231,10,70,30,23,176,0,0,1,176,4,8,133,150,0,255,79,159,83,83,77,46,180,197,95,161,141,13,44,47,253,61,176,86,148,52,201,148,194,126,246,155,165,78,181,18,73,32,28,45,70,221,101,80,78,20,6,206,130,30,219,0,30,251,237,127,232,113,255,107,248,25,147,2,185,140,224,224,189,152,101,89,28,152,47,182,88,216,198,90,3,213,0,64,150,89,96,5,18,73,32,18,105,56,170,112,129,132,77,233,15,190,8,58,109,254,217,232,164,181,91,34,227,8,27,140,83,141,186,71,175,110,91,83,37,82,15,247,58,112,134,42,42,18,3,0,8,18,196,44,5,18,73,32,25,234,135,27,145,161,76,95,163,44,124,140,151,13,189,174,93,108,80,63,112,61,88,28,46,219,213,65,40,74,243,69,108,141,37,80,21,72,191,2,50,88,122,3,0,0,10,36,146,64,54,170,52,196,80,163,79,142,148,81,36,46,131,66,255,221,26,128,73,23,103,49,192,55,30,59,219,161,166,249,122,141,88,62,36,228,107,116,158,14,252,92,103,226,0,0,20,73,36,128,113,105,27,109,199,165,26,100,240,30,8,113,124,175,175,166,144,115,74,138,80,24,32,117,28,206,194,21,85,40,218,254,177,100,37,127,63,131,208,68,250,76,169,40,0,0,0,0,0,0,0,95,208,40,5]).buffer},r={name:"ddplus-2.0-dash standard sample",profile:57,channels:2,sampleRate:48e3,duration:1536,Ck:new Uint8Array([11,119,0,191,52,134,255,224,4,32,24,132,33,46,136,15,236,128,165,150,32,161,69,16,65,66,33,0,160,224,136,32,48,40,56,176,233,159,62,203,176,139,218,213,221,58,124,249,83,239,245,26,179,232,106,97,174,75,74,149,104,85,223,38,74,253,242,95,253,47,117,10,116,228,206,145,61,126,153,83,169,201,146,214,124,251,202,125,62,3,184,113,105,44,145,91,107,58,206,87,7,170,74,27,187,48,217,65,241,1,161,157,113,91,21,163,111,51,104,115,118,123,44,77,110,247,112,43,8,73,76,172,73,150,207,95,153,3,182,105,124,66,2,0,118,237,94,135,88,83,124,41,205,76,76,109,131,40,166,169,150,166,233,51,26,43,143,131,162,201,227,35,146,30,46,75,41,1,28,21,124,91,11,74,112,106,170,137,88,102,81,122,90,108,154,41,64,72,81,74,40,176,29,246,45,81,141,178,47,68,210,113,129,217,48,217,176,77,157,147,211,28,106,174,210,66,110,190,228,106,249,236,107,188,90,91,41,31,191,71,149,201,40,136,209,138,100,91,53,25,18,245,27,148,208,18,20,81,70,24,7,147,116,48,233,47,145,81,32,242,74,51,50,138,85,186,6,202,227,8,169,201,206,77,68,201,80,186,57,179,90,232,234,208,230,109,96,154,4,249,38,86,153,185,81,45,38,146,243,73,117,105,140,5,34,48,227,11,10,32,130,14,49,4,40,131,127,229,199,232,95,78,126,229,243,175,254,117,124,233,83,154,239,93,63,195,190,120,247,107,232,10,68,177,11,22,24,32,66,4,99,231,207,159,7,124,241,174,215,192,0,0,0,0,0,0,0,0,0,0,84,40,187,227]).buffer};t.exports={standard:{"heaac-2-dash":i,"heaac-2hq-dash":i,"ddplus-5.1-dash":n,"ddplus-5.1hq-dash":n,"ddplus-2.0-dash":r},reset:{"heaac-2-dash":e,"heaac-2hq-dash":e},"heaac-2-dash":e,"heaac-2-dash-alt":i,"ddplus-5.1-dash":n,"ddplus-2.0-dash":r}},function(t,e,i){var n,r,s,a;function o(t,e,i,n,r){return(i=a.call(this,i,n,r)||this).Kia=t,i.Pq=e,i.Ua={},i}_esm(e),n=i(2),r=i(32),s=i(84),a=i(796).Yea,n.__extends(o,a),o.prototype.parse=function(t){var e,i,n,r,a,o;for(this.offset=0,e=[],t=t||{};this.offset<this.view.byteLength&&!(this.view.byteLength-this.offset<8);){if(i=this.offset,0===(n=this.ya()))return{done:!1,offset:this.offset,error:"Invalid zero-length box"};if(null===(r=s.ko(this.ya())))return{done:!1,offset:this.offset,error:"Invalid box type"};if("uuid"===r){if(this.view.byteLength-this.offset<16)break;r=this.EA()}if(0===e.length&&this.Pq.kV(r,i,n))break;if(i+n>this.view.byteLength)break;if(o=void 0,a=this.Kia[r]){if(o=new a(this,r,i,n,e[0]),(e[0]||this).tt(o),!o.parse(t))return{done:!1,offset:this.offset,error:"parse error in "+r+" box"};this.config.bI&&a.Na?e.unshift(o):this.offset=i+n}else this.offset=i+n;for(;e.length&&this.offset>e[0].byteOffset+e[0].Qn-8;){if(!(o=e.shift()).Qt(t))return{done:!1,offset:this.offset,error:"finalize error in "+o.type+" box"};this.offset=o.byteOffset+o.Qn}if(0===e.length&&this.Pq.GU(r,i,n,o))break}return!this.Pq.done&&0<(t=this.Pq.endOffset?this.Pq.endOffset-this.view.byteLength:4096)?{done:!1,offset:this.offset,cX:t}:{done:!0,offset:Math.min(this.Pq.endOffset||1/0,this.offset)}},o.prototype.tt=function(t){r.Dc.tt(this,t)},e.zE=o},function(t,e,i){var a;function o(t,e){-1!==(t=e.indexOf(t))&&e.splice(t,1)}function n(t){this.endOffset=t,this.done=!1}function r(t,e,i,n){void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===n&&(n=!1),this.Oh=t,this.dz=e,this.oZ=i,this.AX=n,this.done=!1,this.Te={}}_esm(e),a=i(100),n.prototype.kV=function(){return this.done},n.prototype.GU=function(t,e,i){return this.done=e+i>=this.endOffset},t=n,e.DQ=t,r.prototype.kV=function(t,e,i){if(-1!==r.Boa.indexOf(t)&&(this.Te[t]={offset:e,size:i}),-1!==this.oZ.indexOf(t)){if(this.Te[t]={offset:e,size:i},!this.AX)return this.endOffset=e,this.done=!0;this.endOffset=e+i}else this.Oh&&-1!==this.Oh.indexOf(t)?(t=1<this.Oh.length?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0)):-1!==this.dz.indexOf(t)&&(t=this.Oh?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0));return this.done},r.prototype.GU=function(t,e,i,n){var r=this;return-1!==this.oZ.indexOf(t)?this.done=!0:(t===a.YE&&this.MY(n.Te),t===a.ZE&&this.MY(n.Te),this.Oh&&o(t,this.Oh),o(t,this.dz),this.Oh&&0===this.Oh.length&&!this.dz.some(function(t){return r.Te[t]})?this.done=!0:this.done)},r.prototype.MY=function(t){var i=this;this.Te=t,this.endOffset=(this.Oh||[]).concat(this.dz).reduce(function(t,e){return i.Te[e]?(e=i.Te[e],Math.max(e.offset+(e.size||4096),t)):t},this.endOffset||0)},r.Boa=["moov","sidx"],t=r,e.Dca=t},function(t,e,i){var o,s;function u(t,e,i,n,r,a){this.vd=t,this.VI=i,this.S=r,this.MNa=!1,this.length=Math.min(t.length,e.length,i.length),this.$j=e,this.st=n,this.Qc=a}_esm(e),e.Fea=void 0,o=i(2),s=i(116),i(5),o.__importDefault(i(35)),Object.defineProperties(u.prototype,{fa:{get:function(){return void 0!==this.Qc?this.Qc:this.Qc=this.sfa()},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{sizes:{get:function(){return this.$j},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Th:{get:function(){return this.st},enumerable:!1,configurable:!0}}),u.prototype.subarray=function(t,e){return new u(this.vd.subarray(t,e),this.sizes.subarray(t,e),this.VI.subarray(t,e),this.Th.subarray(t,e),this.S)},u.prototype.concat=function(){for(var i,n,r,a,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return e=(t=(e=[this]).concat.apply(e,o.__spread(t))).reduce(function(t,e){return t+e.length},0),i=new Uint32Array(e),n=new Uint32Array(e),r=new Uint8Array(e),a=new Uint8Array(e),e=t.reduce(function(t,e){return t||e.S},void 0),t.reduce(function(t,e){return s.YR.set(i,e.vd,t),s.YR.set(n,e.sizes,t),s.YR.set(r,e.VI,t),s.YR.set(a,e.Th,t),t+e.length},0),new u(i,n,r,a,e)},u.prototype.sfa=function(){for(var t=this.sizes,e=this.length,i=0,n=0;n<e;++n)i+=t[n];return i},u.prototype.cOb=function(){this.MNa||(this.MNa=!0,this.$j=new Uint32Array(this.$j),this.st=new Uint8Array(this.st),this.uL=new Uint8Array(this.st.length))},u.prototype.dOb=function(){void 0===this.uL&&(this.uL=new Uint8Array(this.st.length))},u.prototype.upgrade=function(t,e){var i;this.cOb(),t.dOb(),i=t.sizes[e],void 0!==this.Qc&&(this.Qc+=i-this.sizes[e]),this.uL[e]=1,t.uL[e]=1,this.VI[e]=t.VI[e],this.Th[e]=t.Th[e],this.sizes[e]=i},u.prototype.c0a=function(t){return void 0!==this.uL&&0<this.uL[t]},e.Fea=u},function(t,e,i){var n,o,r,s,a,u,c,h,f,l;function p(t,e,i,n,r,a,o){return e=l.call(this,t,n,r,e,o)||this,h.u_.B_a(e,t,n,o),e.Yo=i,e.track=i.track,e.qw=!!n.qw,e.aO=!!n.aO,e.IC=!!n.IC,e.pRb=n.fa,e.uP=!!n.uP,e.qga=(a?"(cache)":"")+e.Oa+" header",i=n.offset,a=n.fa,e.dn&&(i+=e.dn.byteLength,a-=e.dn.byteLength),e.pL(t.url||n.url,i,a),e}_esm(e),e.vba=void 0,n=i(2),o=i(116),t=i(17),r=n.__importDefault(i(6)),s=i(9),a=i(42),u=i(5),c=i(233),h=i(379),i=i(380),f=r.default.MediaSource,l=i.sba,n.__extends(p,l),Object.defineProperties(p.prototype,{ad:{get:function(){return!0},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{BX:{get:function(){return this.rob},enumerable:!1,configurable:!0}}),p.prototype.ed=function(){var t;this.complete||(t={type:"headerRequestCancelled",request:this},this.emit(t.type,t)),l.prototype.ed.call(this)},p.prototype.jV=function(t){this.stream.j9(),l.prototype.jV.call(this,t)},p.prototype.MM=function(t,e,i){this.stream.i9(),l.prototype.MM.call(this,t,e,i)},p.prototype.tk=function(t){this.dn=this.dn?s.AC(this.dn,t.response):t.response,t.iY(),this.stream.i9(),this.pob()?l.prototype.tk.call(this,t):this.vMa?(this.pL(t.url,t.offset+t.fa,this.vMa),this.stream.j9(),l.prototype.tk.call(this,t)):this.y5(this)},p.prototype.pL=function(t,e,i){t=new c.kQ(this.stream,this.track,this.qga+" ("+this.Ea.length+")",{offset:e,fa:i,url:t,location:this.location,Md:this.Md,responseType:0},this,this.Oe,this.H),this.push(t),this.Qc=this.Ea.reduce(function(t,e){return t+e.fa},0)},p.prototype.pob=function(){var t,e,i,n=this.Oe,r=new o.dr(p.dPb,this.stream,this.dn,["sidx"],!0,{mcc:this.stream.track.ola,w9:void 0===this.sa,vaa:!f.pc||!f.pc.sSa,waa:n.waa,fm:n.fm,aB:this.Oe.aB,T7a:!0,eE:!f.pc||!f.pc.w3a}),a=r.parse({sa:this.sa});if(this.W1b=n.aB&&r.FZa,a.Cm){if(u.assert(a.Wg),this.VK=a.Wg,this.rob=a.BX,this.ZMa=!!a.sVa,void 0===this.sa&&void 0===a.sa&&this.H.error("No frame duration available for "+this.Oa),r=a.sa?new s.T(a.sa):this.sa,i=void 0,1===this.Yua.mediaType&&null!==(t=n.tA)&&void 0!==t&&t.enabled)if(null!=(t=this.Yua.Dw.GI)&&t.length)for(i=new Uint8Array(t.length),e=0;e<t.length;e++)i[e]=t[e].sb;else if(null!==(e=a.Th)&&void 0!==e&&e.length)for(i=new Uint8Array(a.Th.length),e=0;e<a.Th.length;e++)i[e]=a.Th[e];this.stream.h9(a.Wg,a.S,r,a.U,a.NH,a.di,i),this.dn=void 0}else this.vMa=a.SPa||0;return!!a.Cm},p.dPb=new r.default.Console("MP4","media|asejs"),i=p,e.vba=i,a.xf(h.u_,i,!1,!1),a.xf(t.EventEmitter,i)},function(t,e,i){var n,r,a,o;function s(t,e,i){var n=o.call(this,t,e)||this;return n.uP=!1,n.qw=!1,n.aO=!1,n.IC=!1,n.Yo=void 0,s.B_a(n,t,e,i),n}_esm(e),e.u_=void 0,n=i(2),r=i(5),a=i(173),o=a.mv,n.__extends(s,o),s.B_a=function(t,e,i,n){a.mv.xb(t,e,i),t.VK=i.Wg,t.dn=i.Xsa,t.ZMa=i.Tk,t.H=n},Object.defineProperties(s.prototype,{ad:{get:function(){return!0},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Wg:{get:function(){return this.VK},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Xsa:{get:function(){return this.dn},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Tk:{get:function(){return this.ZMa},enumerable:!1,configurable:!0}}),s.prototype.ed=function(){},s.prototype.Txa=function(){},s.prototype.drb=function(t){r.assert(this.kd.Oa===t.Oa),!t.je&&this.kd.je&&t.h4(this.kd),!t.location&&this.kd.location&&(t.location=this.kd.location,t.Pc=this.kd.Pc,t.HI=this.kd.HI,t.url=this.kd.url,t.wb=this.kd.wb),this.kd=t},s.prototype.toJSON=function(){return n.__assign(n.__assign({},o.prototype.toJSON.call(this)),{isHeader:!0,fragments:this.stream.U})},e.u_=s},function(t,e,i){var n,a;function r(t,e,i,n,r){return(t=a.call(this,t,e,i,n,r)||this).iNa=!1,t.hNa=!1,t.AS=!1,t.Ea=[],t.qo=!1,t.nOa=!1,t.DNa=!1,t.$e=!1,t.bm=!1,t.Fi=!1,t.uK=!1,t.$K=void 0,t.Iv=void 0,t}_esm(e),e.sba=void 0,(n=i(2)).__importDefault(i(6)),i(5),a=i(234).AJ,n.__extends(r,a),Object.defineProperties(r.prototype,{Hpa:{get:function(){return this.qo&&!this.AS},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{active:{get:function(){return this.$e},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{wua:{get:function(){return this.bm},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{complete:{get:function(){return this.Fi||(this.Fi=this.Ea.every(function(t){return t.complete}))},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{aborted:{get:function(){return this.uK},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{bh:{get:function(){return this.Ea.reduce(function(t,e){return t+e.bh},0)},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{bytesReceived:{get:function(){return this.Ea.reduce(function(t,e){return t+e.bytesReceived},0)},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{rf:{get:function(){return this.$K||0},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{url:{get:function(){return this.Ea[0]&&this.Ea[0].url},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{readyState:{get:function(){return this.Bh||this.Ea.reduce(function(t,e){return Math.min(t,e.readyState)},1/0)},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{status:{get:function(){return this.Iv&&this.Iv.status||0},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{ph:{get:function(){return this.Iv&&this.Iv.ph},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{HM:{get:function(){return this.Iv&&this.Iv.HM},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{uj:{get:function(){return this.Iv&&this.Iv.uj},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{ku:{get:function(){return!!this.Ea.length&&this.Ea[0].ku},enumerable:!1,configurable:!0}}),r.prototype.push=function(t){this.DNa&&t.xb(this.Pa),this.Ea.push(t),this.qo&&t.oO()},r.prototype.xb=function(e){a.prototype.xb.call(this,e),this.Ea.forEach(function(t){return t.xb(e)}),this.DNa=!0},r.prototype.oO=function(){return this.nOa=!0,(this.qo=this.Ea.every(function(t){return t.oO()}))&&this.jV(this),this.nOa=!1,this.qo},r.prototype.ed=function(){7!==this.readyState&&5!==this.readyState&&(this.H.warn("AseCompoundRequest: in-progress request should be aborted before cleanup",this),this.abort()),this.Ea.forEach(function(t){return t.ed()})},r.prototype.daa=function(e){return this.Bh=this.Iv=void 0,this.Ea.every(function(t){return 5===t.readyState||7===t.readyState||t.daa(e)})},r.prototype.abort=function(){var t,e=this.active,i=this.aborted;return this.Bh=7,this.uK=!0,this.bm=this.$e=!1,t=this.Ea.map(function(t){return t.abort()}).every(function(t){return t}),i||this.MM(this,e,this.Hpa),t},r.prototype.getResponseHeader=function(e){var i=null;return this.Ea.some(function(t){return!!(i=t.getResponseHeader(e))}),i},r.prototype.getAllResponseHeaders=function(){var e=null;return this.Ea.some(function(t){return!!(e=t.getAllResponseHeaders())}),e},r.prototype.p9=function(){},r.prototype.qA=function(t){this.$e||(this.$e=!0),this.iNa||(this.iNa=!0,this.ks=0,this.$K=this.Hu=t.rf,this.NM(this))},r.prototype.XH=function(t){this.bm||(this.bm=!0),this.hNa||(this.hNa=!0,this.$K=t.rf,this.MC(this))},r.prototype.YH=function(t){this.$K=t.rf,this.TG(this),this.ks=this.bytesReceived,this.Hu=t.rf},r.prototype.tk=function(t){this.$K=t.rf,this.complete?(this.Fi=!0,this.Bh=5,this.bm=this.$e=!1,this.AS=!0,this.Ut(this)):this.TG(this),this.ks=this.bytesReceived,this.Hu=t.rf},r.prototype.uX=function(t){this.$K=t.rf,this.Iv=t,this.Bh=6,this.y5(this)},r.prototype.tX=function(){},r.prototype.mi=function(){return this.Ea[0].mi()+"-"+this.Ea[this.Ea.length-1].mi()},r.prototype.toString=function(){return"Compound["+this.Ea.map(function(t){return t.toString()}).join(",")+"]"},r.prototype.toJSON=function(){return{requests:this.Ea}},e.sba=r},function(t,e){_esm(e),e.gma=void 0,e.gma=function(t,e){for(var i,n,r=t.length-1;0<=r;--r)if((n=t[r]).lu){if(n.bitrate<=e)return r;i=r}return i}},function(t,e){_esm(e),e.yna=e.lrb=void 0,e.lrb=function(t){return t.v$},e.yna=function(t,e){return void 0!==t.XN?t.XN:e&&void 0!==e.XN?e.XN:100}},function(t,e,i){var a;function n(t,e){this.tob=t.tA&&t.tA.enabled,this.VF=void 0,this.knb=e,this.aha=[],this.vha=[],this.q2=[],this.dg=[]}a=i(35).tH,n.prototype.reset=function(t){this.VF=void 0,this.aha=[],this.vha=[],this.q2=[],t&&(this.dg=[])},n.prototype.add=function(i,t){var e,n=t.filter(function(t,e){return a(t)||e===i.Je}),r=n.map(function(t){return t.bitrate});t=t[i.Je],n=n.indexOf(t),this.VF&&(this.VF.length!==r.length||this.VF.some(function(t,e){return t!==r[e]}))&&(e=this.sXa())&&(this.dg.push(e),this.reset(!1)),void 0===this.VF&&(this.VF=r),this.aha.push([n,i.Axa,i.Ic,i.Yia,i.xRa,i.gTb,i.iQb,i.tf,i.Jp,i.ek,i.v_b-i.Axa,i.NSb]),void 0!==i.xu&&this.q2.push([i.Axa,i.xu.sP,i.xu.$L,i.xu.KO]),!this.tob||void 0===t.U||-1!=(n=t.U.zn(i.ek))&&(e=(n=t.U.get(n)).duration,void 0!==(t=n.sb||t.sb)&&this.vha.push({Z:n.Z,duration:e,sb:t}))},n.prototype.qVa=function(t){for(var e=[],i=[],n=0;n<t.length;n++){for(var r=t[n],a=[],o=0;o<r.length;o++)a.push(r[o]-(i[o]||0));e.push(a),i=r}return e},n.prototype.sXa=function(){var t,e=this.qVa(this.aha);if(0!==e.length)return t=0<this.q2.length?this.qVa(this.q2):[],{dltype:this.knb,bitrates:this.VF,seltrace:e,vmaftrace:this.vha,paceratetrace:t}},n.prototype.get=function(){var t=this.sXa(),e=this.dg;if(t&&e.push(t),0!==e.length)return e},t.exports=n},function(t,e,i){var r;_esm(e),e.FAa=void 0,r=i(821),t=function(){function t(t){for(var e=2;5!==e;)2===e&&(this.H=t,e=5)}for(var e=2;3!==e;)switch(e){case 4:case 14:return t;case 2:t.prototype.Wkb=function(t,e){for(var i,n=2;14!==n;)switch(n){case 5:n=i&&i.streamingClientConfig&&Object.keys(i.streamingClientConfig).length?4:3;break;case 7:return(t=t.sessionABTestCell)&&(t=t.split("."))&&1<t.length&&(400<=(t=parseInt(t[1].replace(/cell/i,""),10))?(e.set?(e.set({probeServerWhenError:!0}),e.set({probeDetailDenominator:1}),e.set({allowSwitchback:!0})):(e.Ju=!0,e.mI=1,e.Ay=!0),this.H.trace("using sab cell >= 400, probeServerWhenError: "+e.Ju+", probeDetailDenominator: "+e.mI+", allowSwitchback"+e.Ay)):300<=t?(e.set?(e.set({probeServerWhenError:!0}),e.set({probeDetailDenominator:1}),e.set({allowSwitchback:!1})):(e.Ju=!0,e.mI=1,e.Ay=!1),this.H.trace("using sab cell >= 300, probeServerWhenError: "+e.Ju+", probeDetailDenominator: "+e.mI+", allowSwitchback"+e.Ay)):200<=t?(e.set?e.set({pipelineEnabled:!1}):e.zq=!1,this.H.trace("using sab cell >= 200, pipelineEnabled: "+e.zq)):100<=t&&(e.set?(e.set({pipelineEnabled:!0}),e.set({maxParallelConnections:1}),e.set({maxActiveRequestsPerSession:e.a8}),e.set({maxPendingBufferLen:e.A2a})):(e.zq=!0,e.RN=1,e.Fw=e.a8,e.g8=e.A2a),this.H.trace("using sab cell >= 100, pipelineEnabled: "+e.zq))),e;case 2:e=r.VSa(e,t),i=t.steeringAdditionalInfo,n=5;break;case 4:return t=i.streamingClientConfig,this.H.trace("applying manifest based streamingClientConfig"+JSON.stringify(t)),this.oOa(e,t);case 8:return e;case 9:n=t?7:8;break;case 3:t=t.cdnResponseData,n=9}},t.prototype.Xkb=function(t,e){for(var i=2;9!==i;)switch(i){case 5:for(var n in this.Tmb=t,e.fka)new RegExp(n).test(t)&&(e=this.oOa(e,e.fka[n]));return e;case 2:i=e.fka&&t!==this.Tmb?5:1;break;case 1:case 6:return e}},t.prototype.oOa=function(t,e){for(var i,n,r;;){for(n in 2,e)e.hasOwnProperty(n)&&(r=e[n],t.set?0===t.set(((i={})[n]=r,i))&&this.H.trace("Invalid key"+n):t[n]=r);return t}},e=4}}(),e.FAa=t},function(t,e){var i,n;function r(){var e=this;this.dT=[],this.yVb=function(t){0<=(t=e.dT.indexOf(t))&&e.dT.splice(t,1)}}function a(t){this.Qob=t}function o(t,e){this.WQb=t,this.console=e,this.counter=new i}_esm(e),e.BEa=e.HJa=void 0,Object.defineProperties(r.prototype,{lC:{get:function(){return 0!==this.dT.length},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{i4a:{get:function(){return this.dT.length},enumerable:!1,configurable:!0}}),r.prototype.add=function(){var t=new n(this.yVb);return this.dT.push(t),t},r.prototype.Xbb=function(t){var e=this.add();try{return Promise.resolve(t()).then(function(t){return e.release(),t},function(t){return e.release(),Promise.reject(t)})}catch(t){return e.release(),Promise.reject(t)}},i=r,e.HJa=i,a.prototype.release=function(){this.Qob(this)},n=a,o.prototype.vy=function(){var t,e=this;return this.console.trace("Acquiring lease, total count",this.counter.i4a+1),t=this.counter.add(),{release:function(){t.release(),e.console.trace("Releasing lease, total count",e.counter.i4a),e.WQb(function(){return!e.counter.lC})}}},e.BEa=o},function(t,e,i){var n,v,u,r,p,d,y,b,a,w,o,s,_;function c(i,n,t,e,r,a,o,s,u,c,h,f,l,p,d,b){var m,g=_.call(this,void 0,n,e,u.P,i,u,void 0,c,l,y.T.Eb(h),o.Re.bind(o),f,b,void 0,new v.EventEmitter,void 0)||this;return g.rb=i,g.ai=t,g.mc=r,g.T1=a,g.V=o,g.nL=s,g.tg=f,g.pV=p,g.Pg=d,g.sl=b,g.active=!1,g.vNa=[],g.Qga=0,null!==(b=g.P)&&void 0!==b&&b.Cua(g),g.children=Object.create(null),g.ix=[],(g.ke=void 0)===l&&(l=y.T.Eb(u.Z)),m=[g.I.NQa,g.I.Mwa],c.forEach(function(t){var e=t.mediaType;t=new w.y0(i,g.ai,g.H,g,t,l.Y,m[e],n,g.T1,g.Pg,g.Zfa[e],null==f?void 0:f.eb(e)),g.ee.wXb(e,t)}),g.mt=g.ee.TX,g}_esm(e),e.DEa=e.QR=void 0,n=i(2),v=i(17),u=n.__importStar(i(10)),r=n.__importDefault(i(86)),p=i(16),d=i(238),y=i(22),t=i(42),b=n.__importDefault(i(6)),a=i(826),w=i(388),(s=o=e.QR||(e.QR={}))[s.CWa=0]="forwards",s[s.Dia=1]="backwards",s[s.fO=2]="none",_=a.IEa,n.__extends(c,_),Object.defineProperties(c.prototype,{J:{get:function(){return this.P.J},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Gm:{get:function(){var t;return[null!==(t=null===(t=this.eb(0))||void 0===t?void 0:t.Gm)&&void 0!==t?t:0,null!==(t=null===(t=this.eb(1))||void 0===t?void 0:t.Gm)&&void 0!==t?t:0]},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{rn:{get:function(){var t;return[null!==(t=null===(t=this.eb(0))||void 0===t?void 0:t.rn)&&void 0!==t?t:{Y:0,fa:0},null!==(t=null===(t=this.eb(1))||void 0===t?void 0:t.rn)&&void 0!==t?t:{Y:0,fa:0}]},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{z$:{get:function(){return this.O.Z},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{wta:{get:function(){return this.z$+this.Fe},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Lc:{get:function(){return this.O.Ha},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{me:{get:function(){return this.Lc+this.Fe},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{kc:{get:function(){return this.P.kc},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{weight:{get:function(){return this.O.weight},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{O:{get:function(){return this.Gp},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{el:{get:function(){return this.ee},enumerable:!1,configurable:!0}}),c.prototype.Df=function(){var t;this.Eh||(this.active=!1,this.tg&&(delete this.tg.children[this.O.id],this.tg=void 0),u.mf(this.children,function(t){t&&t.tg&&(t.tg=void 0)}),this.children=Object.create(null),this.HK=void 0,_.prototype.Df.call(this),null!==(t=this.P)&&void 0!==t&&t.Ixa(this),this.ee.clear())},c.prototype.bva=function(e,i){switch(void 0===i&&(i=o.Dia),this.el.forEach(function(t){!u.ia(e)&&t.mediaType!==e||t.reset()}),i){case o.Dia:this.tg&&this.tg.bva(e,i);break;case o.CWa:this.children&&u.mf(this.children,function(t){t&&t.bva(e,i)})}},c.prototype.hW=function(t){var e,i;return!!this.active&&(!(e=this.tg)||0===(i=e.eb(t)).Pa.q5a||(e.IL(t),0===i.Pa.q5a))},c.prototype.Rd=function(t){return this.el.get(t)},c.prototype.BIb=function(){return this.el.every(function(t){return 0===t.HA})},c.prototype.toJSON=function(){return n.__assign(n.__assign({},_.prototype.toJSON.call(this)),{active:this.active,playerStartPts:this.zd,playerEndPts:this.me,pipelines:this.el,previousBranch:this.tg})},c.prototype.d9a=function(t,i){this.P.Ixa(this),this.P=this.O.P=t,this.$va(this.P),this.P.Cua(this),this.el.forEach(function(t){var e=i[t.mediaType];e&&t.PY(e)})},c.prototype.OGb=function(t){return this.sl[t]},c.prototype.eb=function(t){return this.el.get(t)},c.prototype.aHb=function(t){return this.eb(t).HA},c.prototype.Yva=function(t,e,n){var r,a=this,o=this.O,i=(t=this.N3(o.Z,this.P,t,this.J===(t||this.mc.Wc).J)).EO;return void 0===e&&(e=[0,1]),0===(r=t.oz).length||e.forEach(function(t){var e,i=a.eb(t);n&&(i.ie=r[t]),e=a.bV(o.Ha),i.L$(e[t])}),i},c.prototype.W6a=function(e,t){var i,n=this.rb,r=this.eb(0);void 0===t&&(t=r.$Jb),this.tg&&(i=this.tg.Rd(0)),n=new w.y0(n,this.ai,this.H,this,e,t,r.gP,this.I,this.T1,this.Pg,this.Zfa[0],i),this.ee.replace(r,n),this.mt=this.ee.TX,this.Yva(this.tg,[0],!0),n.KI(t,!!this.tg),r.Df(),u.mf(this.children,function(t){t&&t.W6a(e)})},c.prototype.Rt=function(t,e){if(e=this.eb(e))return e.Pa.Rt(t)},c.prototype.IL=function(t){void 0===t?this.el.forEach(function(t){t.IL()}):this.eb(t).IL()},c.prototype.WX=function(t,e,i){(t=this.eb(t))&&t.Pa.WX(e,i)},c.prototype.m6=function(t,e){(e=this.eb(e))&&e.Pa.m6(t)},c.prototype.zNb=function(t){this.vNa[t]=!0},c.prototype.rub=function(){var e=this;return[0,1].every(function(t){return!e.kc(t)||e.vNa[t]})},c.prototype.pub=function(t,e,i,n){var r,a,o,s,u,c=this.I,h=this.rb,f=this.V.getState(),l=f===p.ma.xd||f===p.ma.Of;if(!l&&void 0===i)return{Pe:!0};if(f===p.ma.Of&&b.default.time.ea()<this.Qga+c.Nra)return{Pe:!1};if(r=this.eb(0),a=this.eb(1),o=this.mc.dw(this,0),s=this.mc.dw(this,1),u=d.K9(f),o=!r||r.XRa(u,this.V.Re(),e,o,this.V.Jo(),n),s=!a||a.XRa(u,this.V.Re(),t,s,this.V.Jo(),n),void 0!==i&&o&&(i=i.trackId,t=this.P.getTrackById(i),this.clb(i,t.oE),h.Ey=void 0),o&&s)return this.nL(),this.UT=b.default.time.ea(),f===p.ma.Of&&(this.Qga=b.default.time.ea()),{Pe:!0,zt:(a||r).iG};if(o=this.Gh(0),s=this.Gh(1),l){if(h=!a||s>c.tj,(!r||o>c.tj)&&h&&(r=this.pV())>=c.vA)return this.Sb("buffering longer than limit: "+r+" >= "+c.vA+", audio buffer: "+o+" ms, video buffer: "+s+" ms"),this.nL(),this.UT=b.default.time.ea(),f===p.ma.Of&&(this.Qga=b.default.time.ea()),{Pe:!0,zt:"prebufferTimeLimit"};this.ai.Cnb()}return{Pe:!1}},c.prototype.xja=function(t,e){var i,n,r,a=this.I,o=this.eb(0),s=this.eb(1);if(t=e?(e=this.Gh(0,t),this.Gh(1,t)):(e=this.mc.dw(this,0,t),this.mc.dw(this,1,t)),i=a.tj,n=!this.kc(0)||o.Vh&&0===o.Pa.KD&&0===o.Pa.Hs,o=!this.kc(1)||s.Vh&&0===s.Pa.KD&&0===s.Pa.Hs,r=n&&o,a=!n&&e<a.tj,!r&&(a||!o&&t<i))return!1;if(s&&s.Pe||!this.kc(1))return!0;if(r){if(!this.rb.t2||0!==e||0!==t)return!0;this.Sb("playlist mode with nothing buffered, waiting for next manifest")}return!1},c.prototype.I$=function(t,i){var n=this,e=this.I;this.el.forEach(function(t){t.seeking=void 0}),t&&e.ji&&this.el.forEach(function(t){var e;t&&(e=n.mc.mG(n,t.mediaType),t="bufferingComplete: , mediaType: "+t.mediaType+", bufferLevelBytes: "+t.rn.fa+", completedMs: "+t.YL+", completedBytes: "+e+", partials: "+t.Pa.KD+", streamingPts: "+t.Ic+", completeStreamingPts: "+t.Tp+", fragments: "+JSON.stringify(t.Pa.U)+", toAppend: "+i(t.mediaType),n.ai.Bm(t))})},c.prototype.fE=function(t,e,i){var a=this,o=b.default.time.ea(),s={};return u.mf(this.children,function(t){var e,i,n,r;t&&(e=t.ke?(t.ke.RAb=o-t.ke.Z6,t.ke.Z6=void 0,t.ke.weight):a.mc.XYa(a.O.id,t.O.id),i=t.OC(),n=a.eb(0)&&0===i.vr,r=a.eb(1)&&0===i.$n,s[t.O.id]={weight:e,Br:i,SV:!n&&!r})}),i={Iq:o,Ue:t,Uka:i,S$:this.O.id,ke:s},t||(t=e.Re(),i.wP=t-(this.O.Z+this.Fe),i.wP=Math.max(0,i.wP),i.C4=0,i.startTime=o),this.ix.unshift(i),i},c.prototype.tvb=function(t){var e,i=this.ix[0];return i.Ue&&(i.wP=this.Lc-this.O.Z,i.wP=Math.max(0,i.wP)),i.oab={},e=t.OC(),r.default(e,i.oab),i.SV=t.rn.every(function(t){return 0<t.Y}),this.ix=[],i},c.prototype.Vn=function(t){var e=this.O;t-=this.Fe,e.Z<t&&t<e.Ha?this.ix.shift():(e=this.ix[0])&&(e.Vn=!0)},c.prototype.N3=function(t,e,i,n){var r,a,o,s=this;if(void 0===e&&(e=this.P),r=!1,i){if(r=!0,a=i.eb(1).Hf,i=i.eb(0).Hf,!a||!i)return{EO:[],oz:[]};a=a.Ha,n||(a=void 0)}return o=this.eWa(t,a,r,e),e.Pb===this.mc.Syb&&[1,0].forEach(function(t){var e=s.eb(t);e&&(e.ie=o[t])}),{EO:o.map(function(t){return t.Z}),oz:o}},c.prototype.eWa=function(i,n,r,a){var o=this;return void 0===a&&(a=this.P),this.nPa(a)?[1,0].map(function(t){var e;return o.kc(t)?(e=a.sh[t],t=o.eb(t).yn(e.stream,i,n,r),i=t.Z,t):{}}).reverse():[]},c.prototype.bV=function(i,n){var r=this;return void 0===n&&(n=this.P),this.nPa(n)?[1,0].map(function(t){var e;return r.kc(t)?(e=n.sh[t].stream,t=r.eb(t).nz(e,i),i=r.I.ah?new y.T(t.ob,e.sa.S).Y:t.Ha,t):{}}).reverse():[]},c.prototype.d1b=function(t,e){var i=this.O.Ha;i&&i<e&&(t=this.bV(i)),e=this.Rd(1),i=this.Rd(0),e&&e.L$(t[1]),i&&i.L$(t[0])},c.prototype.nPa=function(t){var e=t.sh;return!!e&&(t=e[1],t=!this.kc(1)||t&&t.stream.je,e=e[0],e=!this.kc(0)||e&&e.stream.je,!(!t||!e))},c.prototype.clb=function(t,e){this.ai.Anb(t,e)},i=c,e.DEa=i,t.xf(v.EventEmitter,i)},function(t,e,i){var n,r,c,h,a,o;function s(t,e,i){return o.call(this,t,e,i)||this}_esm(e),e.wda=e.Lfb=void 0,n=i(2),r=n.__importDefault(i(6)),c=i(20),h=i(827),a=i(9),t=function(t,e,i){var n;this.I=e,i=a.wq(r.default,i,"["+t+"]"),this.i3a=1===t?e.F8:e.x8,n=r.default.Io()[t],this.IW=1===t?e.ZNb:e.JNb,this.IW=Math.min(e.QNb*n,this.IW),c.ga&&i.trace("This pipeline's buffer size ",n,this.IW),this.B8=(1===t?e.lA:e.Kw)||e.B8,this.e8=(1===t?e.YNb:e.INb)||e.e8,this.Wha=e.Wha},e.Lfb=t,o=t,n.__extends(s,o),s.prototype.CFb=function(t,e,i,n){var r,a,o,s=e===i.ie.index,u=e===i.Hf.index;if(!u||s&&i.ie.wa?s?((o=t.NXa(i.ie)).nP(i.ie.av),u&&(i.ie.wa||i.Hf.wa)&&o.Bk({start:null===(r=o.wa)||void 0===r?void 0:r.start,end:null===(a=i.Hf.wa)||void 0===a?void 0:a.end})):o=t.Wk(e):(o=t.NXa(i.Hf)).nP(i.Hf.av),o.bO=e+1,(r=h.PYa(i,i.Ic))&&(c.ga&&i.jn("getFragmentForRequest pts:",i.Ic,"in region:",r,"previous region:",i.dqa),h.WUa(i.H,o,r,{JKb:s,PKb:u,VKb:void 0===i.dqa||i.dqa!==r.region})),u&&(o.j2a(),o.WXb(i.gb.O)),s=t.U.cx,!(o.bO===e||null!=s&&s.c0a(e)||n||!this.Wha&&o.wa))for(++e;e<t.U.length&&e<i.Hf.index&&(o.fa<this.i3a||o.duration<this.B8)&&(1===o.stream.Wg.length||this.Rtb(t,e))&&(n=t.Wk(e),null==s||!s.c0a(e))&&!h.b0a(i,n)&&!(o.duration+n.duration>this.e8)&&!(o.fa+n.fa>this.IW);++e)o.f3(n),o.bO=e+1,c.ga&&i.jn("getFragmentForRequest: extended fragment startPts:",o.Z,"to duration:",o.duration,"size:",o.fa,"min request size:",this.i3a,"max request size:",this.IW,"min request duration:",this.B8,"max request duration:",this.e8,"edit:",o.wa);return c.ga&&i.jn("getFragmentForRequest("+e+") returning:",o,"stream:",o.stream,"firstRequestInRegion:",o.sma,"lastRequestInRegion:",o.zw,"nextIndex:",o.bO),o},s.prototype.Rtb=function(t,e){return!t.Wg.some(function(t){return e===t.Qd})},t=s,e.wda=t},function(t,e,i){var n,r,a,o,l,p,s,d,b,m;function u(t,e,i,n,r,a,o,s,u,c,h,f){return(i=m.call(this,n,s,i,n,n,r,d.T.Eb(a),o,h,!1,null==f?void 0:f.ug)||this).rb=t,i.ai=e,i.mg=u,i.Pg=c,i.Via=0,i.LC=[],i.ay=!1,i.uo.jbb=!1,i.zS=new b.EEa(n,i.Pg,s,i.H,i.mediaType,i.ai,i.Pa,i.rb),i.YLb=l.default.time.ea(),i.SLb=void 0,i.GH=s.ipa,i.e6a=l.default.time.ea(),t=(e=p.eN(s)).SD,e=e.O9,i.hTb=0===i.mediaType?t:e,i.PY(r),i}_esm(e),e.y0=void 0,n=i(2),t=i(389),r=n.__importDefault(i(28)).default.Ta,a=i(368),o=i(16),l=n.__importDefault(i(6)),p=i(176),s=i(5),d=i(22),b=i(856),m=t.Sda,n.__extends(u,m),Object.defineProperties(u.prototype,{ut:{get:function(){return this.Pa.ut},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{YL:{get:function(){return this.Pa.YL},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{zC:{get:function(){return this.Pa.zC},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{HA:{get:function(){return this.Pa.HA},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Vh:{get:function(){return this.zS.Vh},set:function(t){this.zS.Vh=t},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Xq:{get:function(){return this.zS.Xq},set:function(t){this.zS.Xq=t},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{R7:{get:function(){return this.Vd},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{$Jb:{get:function(){return this.BNa.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{gP:{get:function(){return this.kl.gP},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{lHb:{get:function(){return this.rb.Uga},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{Pe:{get:function(){return this.ay},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{iG:{get:function(){return this.EMa},enumerable:!1,configurable:!0}}),u.prototype.reset=function(){this.seeking=void 0,this.connected=this.Vh=!1,this.uo.reset()},u.prototype.Df=function(){this.reset(),m.prototype.Df.call(this)},u.prototype.nz=function(t,e){return a.nz(this.ak.mediaType,this.I,t,e,this.ah,this.rb.oOb)},u.prototype.yn=function(t,e,i,n){return a.yn(this.ak.mediaType,this.I,t,e,i,n)},u.prototype.Vn=function(){this.GH=this.I.ipa},u.prototype.IL=function(){this.Pa.zaa()},u.prototype.PY=function(t){var e=this.rb,i=this.mediaType;s.assert(t.mediaType===i),s.assert(t.P===this.gb.P),this.ak=t,this.gb.P.Sxa(i,t.$d),e.Bmb(this,t.cA),this.Atb(t.$d),this.ug.PY(t),this.gb.P.Ija(),this.Vh=!1},u.prototype.dma=function(t){var e=this.gb.P.sh[this.mediaType];if(e&&e.stream.je&&-1!==(t=e.stream.U.zn(t)))return t},u.prototype.KI=function(t,e){var i,n,r;if(this.ie&&this.ie.Z===t)e=this.ie.index,i=t;else{if(!(r=(n=this.gb.P).sh[this.mediaType])||!r.stream.je)return this.cI=t,void(this.fSb=e);if(i=r.stream.U,this.ie=this.yn(r.stream,t,void 0,e),void 0===this.ie){if(e=i.length-1,i=i.Cj(e),this.Sb("setStreamingPts out of range of fragments, pts:",t,"last startPts:",i,"fragment index:",e,"fastplay:",n.sf.Vg),n.sf.Vg)return void(this.cI=t)}else e=this.ie.index,i=this.ie.Z}this.Jn=e,this.jT=i,this.cI=void 0},u.prototype.k2b=function(t){var e=this.ak.ww(t),i="verifying streamId: "+t+" stream's track: "+(e?e.Oa:"unknown")+" currentTrack: "+this.ak.trackId;return!!e||(this.ai.Bm(i),this.ai.Bm("unknown streamId: "+t),!1)},u.prototype.Atb=function(t){this.TIb=t.reduce(function(t,e){return e.lu&&e.bitrate>t.bitrate?e:t},t[0])},u.prototype.L$=function(t){this.Hf=t},u.prototype.qNb=function(t,e,i,n,r){this.uab(t,e,n,r),i&&++this.Via,this.rb.Zj()},u.prototype.qA=function(t){t.Ha&&t.Z&&(this.GH-=t.Ha-t.Z),m.prototype.qA.call(this,t)},u.prototype.tk=function(t){this.vZa(t),this.Ut(t)},u.prototype.f1b=function(t){var e=l.default.time.ea();this.GH+=t*(e-this.e6a),this.e6a=e},u.prototype.dWb=function(){this.GH=this.I.ipa},u.prototype.VL=function(t){this.Pa.tja(),this.ah||this.zS.VL(t,this.Lc)},u.prototype.vZa=function(t){var e,i=this.R7,n=this.rb;this.mg.ZOa()||(this.ai.Znb(t.mediaType,t.P.Pb,t.stream.track.jC,this.Tp,this.xa),null!==(e=this.ah)&&void 0!==e&&e.MJb(t),e=i.V.Re()||0,n.zb.cy()||(i=i.eb(r.Mb))&&!i.Pe&&i.B6&&n.zb.Xna(i),this.VL(e),this.rb.uZa(t),this.mg.I1(this)&&this.mg.Zj())},u.prototype.Qsa=function(t){this.rb.y6(t)},u.prototype.XRa=function(t,e,i,n,r,a){var o=this.I,s=o.tj;return!(i>=o.tj&&(o.j$&&(s=i+1e3),o.k$&&!this.connected))&&(this.ah?this.ah.Qy():!(!(i=this.Vh&&0===this.Pa.Wsa&&0===this.Pa.Hs)&&n<s)&&(i?!a||0!==n||(this.Sb("playlist mode with nothing buffered, waiting for next manifest"),!1):this.Aub(t,e,r)))},u.prototype.NXb=function(t){this.jT=t},u.prototype.I$=function(t){this.ay=!0,this.EMa=t},u.prototype.Gja=function(){this.ay=!1,this.EMa=void 0},u.prototype.Aub=function(t,e,i){return!(!this.Pe&&0!==this.mediaType)||void 0!==this.ou&&(e=this.omb(e,t),this.track.P.ym.LZ(this.track.P.W,this.track.$d),this.kl.Jta([this.ou],!1,e,this.hTb),(t=this.kl.Qy(e,t,i,this.ou,this.gb.P.aq)).complete?this.I$(t.reason):(this.Gja(),this.tD=t.tD,this.progress=t.progress),this.Pe)},u.prototype.omb=function(t,e){var i=l.default.Io()[this.mediaType],n=this.Pa.m6();return"number"!=typeof(t={ew:i,Z:null!==(i=n.zd)&&void 0!==i?i:0,Mc:t,Ic:null!==(i=n.yO||t)&&void 0!==i?i:0,lm:null!==(i=n.gU||t)&&void 0!==i?i:0,bh:n.bh,cl:n.cl,FWa:n.U.length,U:n.U}).Z?(t.Z=0,t.Ic=0):e===o.Jc.xd&&t.Mc!==t.Z&&(t.Mc=t.Z),t},i=u,e.y0=i},function(t,e,i){var n,d,b,r,m,g,v,y,w,a,o,_,s,E,u,k;function c(t,e,i,n,r,a,o,s,u,c,h,f,l){var p=k.call(this,t)||this;return p.I=e,p.Vd=r,p.ak=a,p.BNa=o,p.mmb=u,p.Rv=l,p.events=new d.EventEmitter,p.connected=!1,p.xoa=!1,p.Xl=!1,p.H=w.wq(_.default,i,"["+p.mediaType+"]"),p.Kk=p.H.error.bind(p.H),p.Sb=p.H.warn.bind(p.H),p.jn=p.H.trace.bind(p.H),p.jT=o.Y,"string"==typeof s||void 0===s?(t=0===p.mediaType&&e.xla||1===p.mediaType&&e.yla,p.jha=new y.Lea(s,e,new v.Kea(h),t)):p.jha=s,p.gn=new b.jIa(p,n,p.I,p.H,p.mediaType),p.uo=new m.SJa(p,e,p.H,p.gn,p.Vd,p.mediaType,p.Rv,function(){return p.zj}),e.ah&&(p.ah=new g.HKa(e.ah,p.H)),c&&(p.If=null!=f?f:E.Ht(p.mediaType,p.track.P,p.I,p.H,p.gn.LDb.bind(p.gn),function(){}),p.If.on("created",function(){return p.events.emit("requestQueueCreated")})),p}_esm(e),e.Sda=void 0,n=i(2),d=i(17),b=i(828),r=i(83),m=i(829),g=i(836),v=i(243),y=i(244),w=i(9),a=i(5),o=i(22),_=n.__importDefault(i(6)),t=i(102),s=i(42),E=i(393),u=i(125),k=r.kv,n.__extends(c,k),Object.defineProperties(c.prototype,{mediaType:{get:function(){return this.ak.mediaType},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{track:{get:function(){return this.ak},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{gb:{get:function(){return this.Vd},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{xa:{get:function(){return this.Vd.O.id},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Pa:{get:function(){return this.uo},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{$d:{get:function(){return this.ak.$d},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{rn:{get:function(){return this.uo.rn},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Gm:{get:function(){return this.uo.Gm},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ic:{get:function(){return this.jT},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{U$:{get:function(){var t;return null!==(t=this.xj)&&void 0!==t?t:this.Tr},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{fU:{get:function(){var t;return null!==(t=this.Pa.fU)&&void 0!==t?t:this.U$},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Dha:{get:function(){return this.Pa.fU},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Tp:{get:function(){return this.Pa.Tp},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Uja:{get:function(){return this.Pa.Uja},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{PLb:{get:function(){var t=this.Pa.QLb;return null==t?void 0:t.Pd},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Aw:{get:function(){return!!this.Hf&&(this.Jn>this.Hf.index||this.jT>=this.Hf.Lc)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{wl:{get:function(){return this.Aw&&0===this.uo.KD},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ut:{get:function(){return this.Pa.ut},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Rq:{get:function(){return this.xe?o.T.max(this.xe.Qa(this.jE),o.T.Gb):void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{KM:{get:function(){return this.gb.KM},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{HTa:{get:function(){return this.Pa.U.LU},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{kl:{get:function(){return this.jha},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ug:{get:function(){return this.kl.ug},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ou:{get:function(){return this.kl.ug.ou},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{S:{get:function(){var t;return null!==(t=null===(t=this.ie)||void 0===t?void 0:t.S)&&void 0!==t?t:1},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Wa:{get:function(){var t;return null===(t=this.ie)||void 0===t?void 0:t.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ob:{get:function(){var t;return null===(t=this.Hf)||void 0===t?void 0:t.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{zj:{get:function(){return this.gb.jg.Zf(this.S).vc},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{B6:{get:function(){return this.Pa.B6},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ex:{get:function(){return this.Pa.ex},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Cwa:{get:function(){return this.Pa.Cwa},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Tr:{get:function(){return this.BNa.add(this.gb.jg)},enumerable:!1,configurable:!0}}),c.prototype.rT=function(){var i=this;this.uo.rT(void 0,function(t){var e=t[0];t=e.fd,(e=e.index)<i.Jn&&i.mP(t,e)})},c.prototype.reset=function(){this.Pa.reset(),this.ie&&this.mP(this.ie.fd,this.ie.index),this.If&&this.gb.P.yL(this.mediaType,this.If)},c.prototype.Df=function(){var t;this.Xl=!0,this.uo.Df(),null!==(t=this.jha)&&void 0!==t&&t.ug.Nb(),this.If&&(this.gb.P.yL(this.mediaType,this.If),u.lp.instance.oM(this.If),this.If.removeAllListeners(),this.If=void 0)},c.prototype.toJSON=function(){return{started:this.ex,startOfSequence:this.Cwa,segmentId:this.xa,requestedBufferLevel:this.Gm,viewableId:this.Vd.P.W,hasFragments:this.B6}},c.prototype.Om=function(){return this.Pa.Om()},c.prototype.mP=function(t,e){this.jT=t,this.Jn=e},c.prototype.yz=function(){return this.Pa.yz()},c.prototype.LG=function(){this.Pa.close()},c.prototype.vG=function(t){return!!(t=this.Pa.Rt(t.Y))&&t.complete},Object.defineProperties(c.prototype,{$g:{get:function(){return this.Vd.$g},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{jE:{get:function(){var t,e;return null!==(e=null!==(t=this.Pa.jE)&&void 0!==t?t:null===(e=null===(e=this.ie)||void 0===e?void 0:e.Vc)||void 0===e?void 0:e.add(this.gb.jg))&&void 0!==e?e:this.Tr},enumerable:!1,configurable:!0}}),c.prototype.vab=function(t,e){var i;return a.assert(this.If),a.assert(!this.Xl,"pipeline.tryIssueRequest on disabled pipeline"),(i=t.Y5())?this.uab(t,i,this.If,e):(t=t.pE(this.If))?{Gn:t,reason:"success"}:{Gn:t,reason:"pipelineTryIssueHeaderRequest"}},c.prototype.e7=function(t,e){t&&(this.ie=t),e&&(this.Hf=e),a.assert(this.ie),a.assert(this.Hf),a.assert(void 0===this.Jn),this.mP(this.ie.fd,this.ie.index)},c.prototype.truncate=function(t){var e=this;a.assert(this.ie,"expected first fragment to exist on updateStreaming"),this.Hf=t,this.Aw&&(t=n.__read(this.uo.cqb(t),2),this.mP(t[0],t[1]),this.Ur()&&(this.Pa.F8a(),this.Pa.tja(),Promise.resolve(function(){e.events.emit("lastRequestIssued",{type:"lastRequestIssued",mediaType:e.mediaType})})))},c.prototype.mD=function(){return!this.Ur()&&(!!this.ri()||this.track.N8)},c.prototype.ri=function(){return void 0!==this.ie&&void 0!==this.Hf},c.prototype.Ur=function(){return this.Xl||this.Aw},Object.defineProperties(c.prototype,{c6a:{get:function(){var t=!0;return this.I.k$&&(t=this.connected),this.I.j$&&(t=t&&this.xoa),t},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{CRb:{get:function(){return void 0!==this.ah},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{K4a:{get:function(){var t;return null!==(t=this.ah)&&void 0!==t&&t.Qy()?{complete:!0,reason:"stall"}:{complete:!1,reason:"stall"}},enumerable:!1,configurable:!0}}),c.prototype.tk=function(t){this.gn.QPb(t),"oncomplete"===this.I.y_a&&(this.xoa=!0),this.Ut(t)},c.prototype.qA=function(t){t.ad||this.gn.Z3a(t.stream,t.Z,t.fd),this.gn.MPb(this.xa,t.stream,t.ad),this.NM(t)},c.prototype.XH=function(t){t.e3||(this.connected=!0),"onfirstbyte"===this.I.y_a&&(this.xoa=!0),this.MC(t)},c.prototype.TXa=function(t){var e,i=this.Pa.U;return 0===i.length?{U:[],x9:0,cl:0}:((e=i.JM(t.Y))<0&&(e=void 0===i.Z||t.Y<=i.Z?0:i.length),{U:i.ZWb(e),x9:Math.max(0,i.FSa-e),cl:i.cl})},c.prototype.uab=function(t,e,i,n){var r,a=this.Vd,o=a.P,s=this.mediaType,u=this.Jn;return u>=e.length?(this.Sb("makeRequest nextFragmentIndex:",u,"past fragments length:",e.length),{Gn:!1,reason:"insufficientFragments"}):this.ie&&this.Hf?(e=this.mmb.CFb(t,u,this,o.Oz()),this.dqa=e.region,null!==(r=this.ah)&&void 0!==r&&r.OJb(e,t),e.uq&&1===s&&this.gn.Fga(a.O,e.Ha),this.I.SN&&(e.SN=this.I.SN),void 0!==t&&(e.location=t.location,e.Md=t.Pc,e.Pva=t.ws),(r=a.P.P$)&&(s=0===s&&this.I.xla||1===s&&this.I.yla,u=this.I.KBb&&1===this.mediaType&&this.I.zq,e.vI=s?n:void 0,e.Q$=r.Gt({Qp:a.Gh(this.mediaType),X8:this.I.FBb?this.I.X8:void 0,Y$a:String(_.default.time.ea()),jU:s?n:void 0,Lia:u?{start:e.offset,size:e.fa}:void 0})),_.default.time.ea(),(i=this.Pa.xyb(e,i,t)).oO()?(null!==(u=this.ah)&&void 0!==u&&u.aCb(i,e,t),this.gn.RPb(i),this.mP(i.Lc,e.bO),this.Ur()&&(this.Pa.F8a(),this.events.emit("lastRequestIssued",{type:"lastRequestIssued",mediaType:this.mediaType})),{Gn:!0,reason:"success"}):(this.Sb("MediaRequest.open error: "+i.ph+" native: "+i.uj),7===i.readyState?{Gn:!1,reason:"requestAborted"}:(this.Sb("makeRequest caught:",i.ph),o.Nh("MediaRequest open failed (1)","NFErr_MC_StreamingFailure"),{Gn:!1,reason:"openAseMediaRequest"}))):(this.Sb("makeRequest delayed, first or last fragment not set","first:",!!this.ie,"last:",!!this.Hf),{Gn:!1,reason:"noFirstOrLastFragment"})},i=c,e.Sda=i,s.xf(t.kB,i),s.xf(t.rx,i)},function(t,e,i){var d;_esm(e),e.k8=e.l8=void 0,d=i(2).__importDefault(i(35)).default.console,e.l8=void 0,e.k8=void 0,function(){for(var t=2;4!==t;)switch(t){case 1:e.k8=function(t,e,i,n){for(var r,a,o=2;8!==o;)switch(o){case 2:o=1;break;case 5:var s,u;t=p(e,s=[],(u=n.Kg).Lf),void 0!==(u=null===(r=null===(a=u.U)||void 0===a?void 0:a.cx)||void 0===r?void 0:r.VI[i])&&(-1!==(a=p(e,s,u))&&(a!==t&&(n.f3a=t,n.Kg=e[a],n.reason="min_fragment_vmaf"),null!==(a=null===(a=n.Kg)||void 0===a?void 0:a.U)&&void 0!==a&&a.get&&n.Kg.U.get(i))),o=8;break;case 1:o=!t.UW||t.UW<=0?8:5}},t=4;break;case 2:e.l8=function(t,e,i,n,r){for(var a,o,s,u,c,h,f,l=2;18!==l;)switch(l){case 5:l=n<r?4:18;break;case 6:a=i.Th[n],o=i.sizes[n],l=14;break;case 4:s=p(e,f,i.VI[n]),l=3;break;case 12:l=a&&c?11:19;break;case 11:l=a<c||c===a&&o<h?10:20;break;case 13:c=(u=e[s].U.cx).Th[n],h=u.sizes[n],l=12;break;case 9:d.error("maybeUpgradeLowVmafFragments: invalid streams"),l=18;break;case 7:l=i.Th[n]<t.UW&&s<e.length?6:19;break;case 19:n++,l=5;break;case 14:l=e[s].U?13:19;break;case 8:s+=1,l=7;break;case 1:f=[],l=5;break;case 3:l=-1===s?9:8;break;case 20:s++,l=7;break;case 10:p(e,f,u.VI[n]),i.upgrade(u,n),l=20;break;case 2:l=t.UW&&0<t.UW?1:18}},t=1}function p(t,e,i){for(var n,r=2;7!==r;)switch(r){case 5:r=n<t.length?4:9;break;case 1:n=0,r=5;break;case 2:r=0===e.length?1:9;break;case 4:e[t[n].Lf]=n,r=3;break;case 3:n++,r=5;break;case 9:return void 0!==(t=e[i])?t:-1}}}()},function(t,e,i){var N,j,C,L,n,M,D,U,B,F;_esm(e),e.bx=void 0,t=i(2),N=t.__importStar(i(10)),j=i(25),C=i(101),L=t.__importDefault(i(28)),n=t.__importDefault(i(35)),M=t.__importDefault(i(843)),D=i(16),U=i(390),B=n.default.assert,F=n.default.up,e.bx=void 0,function(){var t;function R(t,e,i){return(t=new F).Kg=i[0],t}for(t=2;5!==t;)2===t&&(e.bx=function(f,l,p,i,t,d,e){for(var n,b,m,g,v,y,r,w,_,E,k,S,a,o,s,u,c,h,T,A,O=a000,I=2;30!==I;)switch(I){case 34:I=t.U&&t.U.length?33:22;break;case 27:I=P(t,p[Math.max(i-1,0)],t,c,h,!1,l.playbackRate)?26:34;break;case 23:t=j.ig(p.slice(i+1,e),function(t,e){return P(t,p[i+e],n,a,o,!1,l.playbackRate)}),I=22;break;case 14:return null!==(c=(t=function(t,e,i,n,r){var a;return a000.Z4L(2),a=a000.j4L(n,r,i),i=0<(i=j.Mp(t,function(t){return t.bitrate>a}))?i-1:0===i?0:t.length-1,t[Math.max(e,i)]}(p,i,t.Ra||0,f.VVa,l.playbackRate)).U)&&void 0!==c&&c.length||(t.Y$=!0),S.Kg=t,S;case 19:I=r!==L.default.h0.tkb&&t.Ra?17:18;break;case 13:n=t,b=l.buffer.Z,m=l.buffer.Mc,g=l.buffer.Ic,v=l.buffer.lm,y=l.Qd,O.Z4L(0),e=O.j4L(m,v),r=this.ug.$0a||L.default.h0.zh,w=l.state===D.ma.Kc||l.state===D.ma.hh?l.buffer.cl:0,_=f.i8,E=f.$z||1e3,I=10;break;case 26:I=i+1<p.length&&e>f.Zz&&(void 0===this.L7||this.pqa&&this.pqa>this.L7||g-this.L7>f.V7&&e>f.Rqa)?25:22;break;case 3:B("number"==typeof l.buffer.ew),B("number"==typeof l.kla),S=new F,I=7;break;case 31:t=r,I=22;break;case 25:e=f.swa&&e>=f.qya?p.length:i+2,a=x(t,y,f.Ioa),o=x(t,y+a,f.Pqa),I=23;break;case 22:S.Kg=t||n,U.k8(f,p,y,S),I=35;break;case 32:I=(t=j.ig(p.slice(0,i).reverse(),function(t,e){return P(t,p[Math.max(i-e-2,0)],n,s,u,!0,l.playbackRate)}))&&t.Lf<r.Lf||!t?31:22;break;case 33:s=x(t,y,f.Hoa),u=x(t,y+s,f.Oqa),I=32;break;case 35:return S;case 18:return R.call(this,l,f,p,t);case 7:t=p[i],I=6;break;case 2:B(!N.ia(i),"Must have at least one selected stream"),void 0===l.Qd&&(l.Qd=0),B(N.Ba(l.Qd),"invalid player fragmentIndex"),I=3;break;case 6:I=e?14:13;break;case 10:c=x(t,y,f.Goa),O.N4L(1),h=x(t,O.J4L(y,c),f.Nqa),I=19;break;case 17:t.U&&t.U.length||(t.Y$=!0),T=C.Rm.xTa(l.buffer.U),A=l.buffer.ew-T.fa,r=p[0],I=27}function x(t,e,i){return t.U?t.U.jka(e,i):0}function P(t,e,i,n,r,a,o){for(var s,u,c,h=2;20!==h;)switch(h){case 9:h=u&&!f.bZ?8:6;break;case 5:return!1;case 4:a||u||(t.Y$=!0),h=3;break;case 6:h=s>=t.bitrate*o*c?14:13;break;case 3:h=a&&u?13:9;break;case 7:return!0;case 2:s=t.Ra||0,u=t.U&&t.U.length,c=a?f.Yla:u?f.l5:f.VVa,h=1;break;case 13:return i=f.bka&&t!==i&&(t.Pc!==i.Pc||!d)&&(i=t.wb)&&i.Aj&&i.Aj.Ga?i.Aj.Ga+f.Zja*(i.Aj.aj?Math.sqrt(i.Aj.aj):0):0,(e=function(r,a,t,e,i,n,o,s,u,c,h,f,l,p,d,b,m,g,v){var y,w,_,E,k,S;function T(t,e,i){for(var n=2;5!==n;)2===n&&(U.l8(r,a,t,e,i),w.push(t.subarray(e,i)),n=5)}for(y=2;15!==y;)switch(y){case 8:return!1;case 11:y=0<v?10:20;break;case 14:y=v?13:16;break;case 7:S||(e=t),w=[],y=14;break;case 13:v=p,y=12;break;case 17:return 0<p||0<d?M.default(i.concat(w),h+p+d,n,s,o,f,u,h,h+p,m,l,_/g,b,r.XW,r.bZ):_>t.iA?{result:!0,EW:0,St:!0}:{result:!1,EW:0,St:!0};case 10:E=Math.min(v,t.U.length-c),T(t.U.cx,c,c+E),v-=E,(c+=E)>=t.U.length&&(c=0),y=11;break;case 18:E=Math.min(v,e.U.length-c),T(e.U.cx,c,c+E),v-=E,(c+=E)>=e.U.length&&(c=0),y=19;break;case 2:B(t,"First stream undefined"),B(e,"Second stream undefined"),_=t.Ra,E=s-n,k=t.U&&t.U.length,S=e.U&&e.U.length,B(i.length===h),r.Sqa&&(b=Math.min(b,E)),y=9;break;case 12:E=void 0,y=11;break;case 19:y=0<v?18:17;break;case 20:v=d,y=19;break;case 9:y=!_||_<t.bitrate*g*r.Foa||!k?8:7;break;case 16:p=Math.max(0,Math.min(p,t.U.length-c)),d=Math.max(0,Math.min(d,e.U.length-c-p)),0<p&&T(t.U.cx,c,c+p),0<d&&T(e.U.cx,c+p,c+p+d),y=17}}(f,p,t,e,T,m+i-b,_,v-b,g-b,y,T.length,w,A,n,r,E,l.kla,l.playbackRate,!!l.K1a))&&e.result&&(S.nac=e.EW),k={m5:e&&e.result,Ra:s,bitrate:t.bitrate},e&&e.result;case 14:return!0;case 8:h=s>=Math.max(t.iA*o,t.bitrate*o*c)&&t.St?7:13;break;case 1:h=k&&!k.m5&&k.Ra>=s&&k.bitrate<=t.bitrate?5:4}}},t=5)}()},function(t,e,i){var r,p,d,a,b,m;function n(t,e,i,n){return a(!r.ia(n),"Must have at least one selected stream"),new m(n)}function o(t,e,i,n){return a(!r.ia(n),"Must have at least one selected stream"),new m(n)}r=i(10),e=i(35),p=e.console,d=e.debug,a=e.assert,b=e.tH,m=e.up,t.exports={STARTING:function(t,e,i){var n,r,a,o,s,u,c,h,f,l;for(n=new m,r=t.W8b||1,a=i.length-1;0<=a;--a){if(o=i[a],u=a,l=f=h=c=void 0,c=(s=o).id,h=s.bitrate,f=s.Ra||0,l=!!f,d&&p.log("Checking feasibility of ["+u+"] "+c+" ("+h+" Kbps)"),s.lu?h>t.HW?(d&&p.log("  Above maxInitAudioBitrate ("+t.HW+" Kbps)"),0):h*t.D8/8<e.buffer.ew?l?(d&&p.log("  Have throughput history = "+l+" : available throughput = "+f+" Kbps"),h*e.playbackRate<f/r?(d&&p.log(" +FEASIBLE: bitrate less than available throughput"),1):void(d&&p.log(" bitrate requires more than available throughput"))):(s=t.WW,e.zpa&&(s=Math.max(s,t.VW)),h<=s?(d&&p.log("  Bitrate is less than max of minInitAudioBitrate ("+t.WW+" Kbps) "+(e.zpa?" and also minHCInitAudioBitrate ("+t.VW+" Kbps)":"")),d&&p.log("  +FEASIBLE: no throughput history and has minimum bitrate configured"),1):void(d&&p.log("  No throughput history"))):(d&&p.log("  audio buffer too small to handle this stream"),0):(d&&!s.ju&&p.log("  Not available"),d&&s.Ez&&p.log("  Failed"),0)){n.Je=a;break}b(o)&&(n.Je=a)}return n},BUFFERING:n,REBUFFERING:n,PLAYING:o,PAUSED:o}},function(t,e,i){var s,u,c;_esm(e),e.Ht=void 0,s=i(20),u=i(125),c=i(5),e.Ht=function(t,e,i,n,r,a){var o;return s.ga&&n.trace("AsePlaygraph.createRequestQueue()"),(o=u.lp.instance.Ht(t,e.J,!0,!1,{iz:i.iz},i)).Xg.on(o,"networkfailing",function(){var t;s.ga&&n.trace("requestQueue OnNetworkFailing: ",o),o.k5&&(c.assert(o.$U),null!==(t=e.aq)&&void 0!==t&&t.ms(o.$U,void 0,o.ph,o.uj)),e.Om()}),o.Xg.on(o,"error",function(){a(o.ph,o.uj)}),o.on("transportreport",r),o.xb(),o}},function(t,e,i){var n,r,h,f,l,a,p,d,b,o,m;function s(){var t=null!==o&&o.apply(this,arguments)||this;return t.JOa=0,t.Yga=0,t.J1=0,t.Afa=0,t}function u(t,e,i,n,r,a,o,s,u){var c=m.call(this)||this;return c.Og=t,c.Sg=e,c.I=n,c.H=r,c.TB=new f.er(!1),c.SB=new f.er(d.T.Eb(-1/0)),c.H=f.wq(h.default,c.H,"AsePlayerBuffer ["+e+"]:"),c.ZB=new l.Eza(c.H,i,e),c.resume(),a&&o&&s&&(c.Lta=new p.uJa(e,r,a,c.Og,a.events,o,s,u),t=new b.vCa(null==a?void 0:a.Cu,d.T.Eb(c.I.YW),r),c.ZB.Mqb(t)),c.Og.on("requestAppended",function(t){c.TB.set(!0),t.request.xe&&c.SB.set(t.request.xe),c.emit("requestAppended")}),c}_esm(e),e.xba=void 0,n=i(2),t=i(17),r=i(20),h=n.__importDefault(i(6)),f=i(9),l=i(858),a=i(149),p=i(859),d=i(22),b=i(862),m=t.EventEmitter,n.__extends(u,m),Object.defineProperties(u.prototype,{jA:{get:function(){return this.TB},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{qW:{get:function(){return this.SB},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{vKb:{get:function(){return this.ZB.Zk},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{TA:{get:function(){return this.Og.TA},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{mediaType:{get:function(){return this.Sg},enumerable:!1,configurable:!0}}),u.prototype.aYa=function(){},u.prototype.resume=function(){r.ga&&this.H.trace("resume"),this.zwa()},u.prototype.Z_a=function(t){return this.Og.sna()>t},Object.defineProperties(u.prototype,{Vrb:{get:function(){return this.zK},enumerable:!1,configurable:!0}}),u.prototype.reset=function(t){void 0===t&&(t=!1),r.ga&&this.H.trace("reset"),this.stop(),this.Og.reset(t),this.TB.set(!1),this.SB.set(d.T.Eb(-1/0)),t||(this.zK=void 0),t||null!==(t=this.Lta)&&void 0!==t&&t.reset()},u.prototype.Hm=function(t){void 0===t&&(t=!1),r.ga&&this.H.trace("restart"),this.reset(t),this.zwa(!0)},u.prototype.stop=function(){r.ga&&this.H.trace("stop"),this.ZB.U9a()},u.prototype.close=function(){var t;r.ga&&this.H.trace("start"),null!==(t=this.Lta)&&void 0!==t&&t.close()},u.prototype.Nb=function(){this.stop(),this.close()},u.prototype.oX=function(){this.I.u5&&this.Og.wWa(),this.Og.gz()},u.prototype.uDb=function(t){this.Og.U3a(t,!0)},u.prototype.Li=function(t){var e;return!(null===(e=this.Lta)||void 0===e||!e.Li(t))},u.prototype.zwa=function(t){this.ZB.Zk&&!t||(this.ZB.lWb(),a.AsyncIterator.wLb(this.ZB,this.F7.bind(this)))},u.prototype.F7=function(t){t.done||this.Wua(t.value)},u.prototype.Wua=function(t){r.ga&&this.H.trace("requestReceived: "+t.toString()),this.Og.endOfStream?r.ga&&this.H.error("Buffer manager has declared EOS, ignoring request",t.toString()):(this.zK?(this.zK.TLb=t.Lc,this.zK.ULb=t.me,this.zK.c1a=t.xe):this.zK={i$b:t.fd,j$b:t.zd,TLb:t.Lc,ULb:t.me,c1a:t.xe},this.Og.Urb(t))},o=u,n.__extends(s,o),s.prototype.Wua=function(t){var e,i;o.prototype.Wua.call(this,t),this.JOa++,this.Yga++,this.dPa=h.default.time.ea(),this.RK||(this.RK={Lc:t.Lc,fd:t.fd,index:t.index},this.X1||(this.X1=this.RK)),i=!1,(e=this.k2)&&Math.abs(e.me-t.zd)<100&&(this.J1+=t.me-e.me,this.Afa++,i=!0),i||(this.J1=t.Hr,this.Afa=1),this.k2=t},s.prototype.stop=function(){o.prototype.stop.call(this),this.Yga=0,this.RK=void 0},s.prototype.aYa=function(){var t,e,i=this.ZB,n=i.p4;if(n)return(e=n.eb(this.Sg))&&e.Pa&&(t=e.Pa.Kna()),{RM:t,currentBranch:{sId:n.O&&n.O.id,cancelled:n.Eh},currentReceivedCount:i&&i.Ryb,totalReceivedCount:this.JOa,currentState:i&&i.ITa||"Uninitialized",lastRequestPushed:this.k2&&{contentEndPts:this.k2.Lc,fragmentIndex:this.k2.index},tslp:this.dPa&&h.default.time.ea()-this.dPa,cpts:this.J1,crq:this.Afa,rslp:this.Yga,firstRequestSSPushed:this.RK&&{contentStartPts:this.RK.fd,fragmentIndex:this.RK.index},firstRequestPushed:this.X1&&{contentStartPts:this.X1.fd,fragmentIndex:this.X1.index}}},i=s,e.xba=i},function(t,e,i){var n,h,f,r,a,l;function o(t,e,i,n,r,a,o,s,u){var c=this;this.mediaType=t,this.console=e,this.Fa=i,this.events=r,this.Qv=a,this.Yf=o,this.j0b=s,this.So=[],this.Ysa=l.add(f.T.Eb(null!==(a=null===(a=a.rP)||void 0===a?void 0:a.Y)&&void 0!==a?a:0)),this.listeners=new h.Wh,this.listeners.on(i.V,"skipped",function(){return c.qX()}),this.listeners.on(n,"requestAppended",function(t){return c.jA(t.request)}),this.hT=!0,this.OU=o.AG(function(){return c.lBb()},"Presentation Emit",u),this.V9=o.AG(function(){return c.iUb()},"Presentation Prune")}_esm(e),e.mea=void 0,n=i(2),h=i(17),f=i(9),r=i(20),a=i(72),l=f.T.Eb(1e3),o.prototype.qX=function(){this.trace("skipped, scheduler clock "+this.Yf.za.currentTime.Zd()),this.hT=!0,this.OU.Hm()},o.prototype.lBb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:this.kI=this.wPb(this.hT),e=this.F3a(),t.label=1;case 1:return e?(i=this.hT?this.Fa.Ug:null==e?void 0:e.timestamp,this.trace("queuing task for "+e.lJ+" at player time "+e.timestamp.Zd()+" scheduler clock is "+this.Yf.za.currentTime.Zd()),[4,a.Jk.XP(e.timestamp)]):[3,3];case 2:return t.bd(),this.trace("executing task for "+e.lJ+" at player time "+e.timestamp.Zd()+" scheduler clock is "+this.Yf.za.currentTime.Zd()),this.hT=!1,this.aVa(e,i),this.kI++,e=this.F3a(),i=null==e?void 0:e.timestamp,[3,1];case 3:return[2]}})},o.prototype.F3a=function(){if(void 0!==this.kI)return this.So[this.kI]},o.prototype.wPb=function(t){var e,i;void 0===t&&(t=!1);for(var n=!t&&null!==(e=this.kI)&&void 0!==e?e:0;n<this.So.length;n++)if(e=this.So[n],i=f.T.Eb(null!==(i=this.Qv.vta)&&void 0!==i?i:0),e.timestamp.greaterThan(this.Fa.Ug.add(i)))return t&&0<n?n-1:n;return Math.max(this.So.length-1,0)},o.prototype.iUb=function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return 1<this.So.length?(e=n.__read(this.So,2),e=e[1],this.trace("queuing pruning task for "+e.lJ+" at player time "+this.Ysa.add(e.timestamp).Zd()+" scheduler clock is "+this.Yf.za.currentTime.Zd()),[4,a.Jk.XP(this.Ysa.add(e.timestamp))]):[3,2];case 1:return t.bd(),this.trace("executing pruning task for "+e.lJ+" at player time "+this.Ysa.add(e.timestamp).Zd()+" scheduler clock is "+this.Yf.za.currentTime.Zd()),this.So.shift(),this.kI&&this.kI--,[3,0];case 2:return[2]}})},o.prototype.reset=function(){this.So=[],r.ga&&this.trace("reset"),this.hT=!0,this.J7=void 0,this.kI=0,this.V9.Hm(),this.OU.Hm()},o.prototype.close=function(){this.OU.Nb(),this.V9.Nb(),this.listeners.clear()},o.prototype.Li=function(t){var e;return r.ga&&this.trace("canSkip() "+t),0===this.So.length?(r.ga&&this.trace("canSkip false, no media sequence"),!1):(e=this.So[0]).timestamp.greaterThan(t)?(r.ga&&this.trace("canSkip false, before earliest item at "+e.timestamp),!1):void 0!==this.J7&&!this.J7.lessThan(t)||(r.ga&&this.trace("canSkip false, later than last appended at "+this.J7),!1)},o.prototype.trace=function(t){r.ga&&this.console.trace("PresentationTracker ["+this.mediaType+"] "+this.j0b+": "+t)},o.prototype.FPa=function(t,e,i){return i&&(this.J7=i),(void 0===(i=this.So.length?this.So[this.So.length-1]:void 0)||i.lJ!==t)&&(this.So.push({lJ:t,timestamp:e}),this.OU.state===a.Ym.complete&&this.OU.Hm(),this.V9.state===a.Ym.complete&&this.V9.Hm(),!0)},e.mea=o},function(t,e,i){var l,r,h,c,s,f,p,d,u,a,b;function o(t,e,i,n,r,a,o,s,u,c){this.rb=t,this.ai=e,this.H=i,this.nL=n,this.I=o,this.T1=s,this.tOa=u,this.pV=c,this.Sb=this.H.warn.bind(this.H),this.jn=this.H.trace.bind(this.H),this.Dg=this.H.log.bind(this.H),this.Yh=[],this.ih={},r.Bo?(d.assert(!r.Wo),this.pfa=!0,this.qob(r,r.Bo,a)):(this.mo=this.dy(r.Wo||"",r,0,void 0,void 0,{},!0),this.mo.cs=!0,this.mo.Ha=1/0,this.P2=[this.mo]),this.Vd=this.L1(this.mo,void 0,a),this.Vd.active=!0,t=p.wq(h.default,this.H,"BranchQueue::"),this.hj=new f.x_(t),this.hj.enqueue(this.Vd),this.Rga=this.JS=void 0}_esm(e),e.Iba=void 0,t=i(2),l=t.__importStar(i(10)),r=t.__importDefault(i(86)),h=t.__importDefault(i(6)),c=i(863),s=i(16),f=i(242),p=i(9),d=i(5),u=i(22),a=i(349),b=i(386),o.Mma=function(t){return"m"+t},Object.defineProperties(o.prototype,{Oz:{get:function(){return!!this.pfa},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{jk:{get:function(){return this.Vd.Eh},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Yd:{get:function(){return this.mo},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{oh:{get:function(){return this.Vd.O.id},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Syb:{get:function(){return this.Vd.P.Pb},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Wc:{get:function(){return this.Vd},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Kb:{get:function(){return this.Yh},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Fe:{get:function(){return this.Vd.Fe},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{Pg:{get:function(){return this.rb.Pg},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{si:{get:function(){return this.JS||this.Kb[0]},enumerable:!1,configurable:!0}}),o.prototype.Nb=function(){this.Yh.forEach(function(t){t.Df()}),this.Yh=[],this.hj.clear()},o.prototype.ue=function(t){return this.ih[t]},o.prototype.YYa=function(){return this.hj.getIterator()},o.prototype.XYa=function(t,e){var i=this.ih[t];if(i)return(t=i.Bl[e])&&t.weight;this.Sb("getSegmentWeight, unknown segment:",t)},o.prototype.hHb=function(t){var e=this.ih[t];if(e)return e.Z;this.Sb("getSegmentStartPts, unknown segment:",t)},o.prototype.gHb=function(t){var e=this.ih[t];if(e){if(l.Ba(e.Ha)&&isFinite(e.Ha)&&l.Ba(e.Z)&&isFinite(e.Z))return e.Ha-e.Z}else this.Sb("getSegmentDuration, unknown segment:",t)},o.prototype.Hua=function(i){var n=-1;this.Yh.some(function(t,e){return t===i&&(n=e,!0)}),-1!==n?this.Yh.splice(n,1):this.Sb("Unable to find branch:",i,"in branches array")},o.prototype.mG=function(t,e){var i=0;return this.nmb(t).forEach(function(t){(t=t.Rd(e))&&(i+=t.zC)}),i},o.prototype.dw=function(t,e,i){var n;if(!t.kc(e))return 0;for(n=t.eb(e),n=i?n.Ic:n.Tp;void 0===n;){if(!t.tg)return 0;n=(t=t.tg).eb(e),n=i?n.Ic:n.Tp}return t=this.tOa.Re(),Math.max(n-t,0)},o.prototype.bma=function(e){return this.Yh.filter(function(t){if(t.P.Pb===e)return!0})},o.prototype.cDb=function(t,e){return this.bNa(t,!1,e)},o.prototype.bDb=function(t,e){return this.bNa(t,!0,e)},o.prototype.FVb=function(e,i,n){l.mf(this.Yh,function(t){t.P===e&&t.d9a(i,n)}),l.mf(this.ih,function(t){t.P===e&&(t.P=i)})},o.prototype.K7a=function(){var i=this;l.mf(this.Yh,function(t){var e=i.rb.qh(t.P.Pb);t.kx(u.T.Eb(e.Cw))})},o.prototype.Lq=function(i){var n=this;l.mf(this.Yh,function(t){t.eb(1).track.$d.forEach(function(t){var e=a.cia(t.kh,t.bitrate,i,n.H);r.default(e,t)})})},o.prototype.Rt=function(t,e,i,n){for(var r;e;){if(r=e.Rt(t,i))return r;if(n)break;e=e.tg}},o.prototype.NTa=function(t){var e,i=this;return void 0===t&&(t=!1),e=this.Yh,t&&(e=e.filter(function(t){return t!==i.Vd})),e.forEach(function(t){t.active=!1,i.hj.remove(t)}),t||this.hj.clear(),e},o.prototype.hUb=function(){for(var t;0<this.Yh.length&&((t=this.Yh[0]).eb(0),t.eb(1),t.active)&&t!==this.Vd&&t.BIb();)t.Df(),this.Yh.shift()},o.prototype.WX=function(t,e,i,n,r){if(n<i){for(i-=n;t;)t.WX(e,i,r),t=t.tg;return i}},o.prototype.X1a=function(t,e){for(var i={gU:null,yO:null,zd:null,cl:0,bh:0,U:[]};t;)t.m6(i,e),t=t.tg;return i},o.prototype.fvb=function(t){var i,e,n=this.Vd;n.L1a?i=n.L1a:(e=this.Vd.Fe,i=this.L1(n.O,n),s.zf.forEach(function(t){var e=i.Rd(t);e&&(e.KI(0),t=n.Rd(t),e.L$(t.Hf))}),i.kx(u.T.Eb(e+t)),n.L1a=i),this.vK(i,n)},o.prototype.Lqb=function(t,e,i){var n,r;d.assert(!t.Oz()),this.pfa||(this.pfa=!0,this.JS=this.si,n=this.mo.id||o.Mma(0),this.mo.id=n,this.ih[n]=this.mo,this.mo.Ha=this.rb.OFb().cYa(),this.mo.QD=!0),r=void 0!==t.Wo?t.Wo:o.Mma(t.Pb),(t=this.dy(r,t,e,i,void 0,{},!0)).QD=!0,this.P2.forEach(function(t){t.Bl={},t.Bl[r]={weight:100},t.wU=r,t.bv=!1}),this.P2=[t]},o.prototype.Cr=function(t,e){var i=this.si,n=i.fE(e,this.rb.V),r=i.O,a=i.children[t];return e?r.Bl[t]?i.Sk?i.Sk===t:(i.Sk=t,a&&i.x5&&this.vK(a,i),!0):(this.Vd.Sb("chooseNextSegment, invalid destination:",t,"for current segment:",r.id),!1):void 0===i.Sk&&(a?(n.B3a=!a.xja(),this.rb.Zga(void 0,b.QR.fO),i.x5=void 0,i.Sk=t,this.vK(a,i),i.LG(),this.rb.fT(),!0):!(n.B3a=!0))},o.prototype.XIb=function(i,t){var n,r=this,e=i.O;t&&!i.Sk&&(i.Sk=e.wU,i.fE(!0,this.rb.V,!0)),i.children=Object.create(null),l.mf(e.Bl,function(t,e){i.Sk&&e!==i.Sk||(n=r.ih[e],n=r.Flb(n,i),i.children[e]=n)}),i.Sk&&(t=i.children[i.Sk])&&this.vK(t,i),i.x5=!0},o.prototype.c0b=function(){var i=0;return l.mf(this.Yh,function(e){s.zf.forEach(function(t){e.kc(t)&&(t=e.Rd(t),i+=t.Pa.Jp)})}),i},o.prototype.g_b=function(t,e){var i,n=this,r=this.kmb(t,e);r?(r!==this.Vd.O?(this.NTa(),(i=this.L1(r,this.Vd,t)).tg=void 0,i.Yva(void 0,void 0,!0),this.Lkb(this.Vd),this.vK(i,this.Vd)):this.NTa(!0).forEach(function(t){t.Df(),n.Hua(t),n.hj.remove(t)}),r===this.si.O&&(this.si.ix.shift(),i&&(i.ix=this.si.ix,i.Sk=this.si.Sk)),this.ai.o2(r,this.Vd.Fe),this.Vd.x5=void 0):this.Sb("findSegment no segment for manifestIndex:",e)},o.prototype.W1a=function(t,e){var i=t.O;e=e||i.wU,t.Sk||(t.Sk=e,t.fE(!0,this.rb.V,!0)),(e=t.children[t.Sk])&&this.vK(e,t)},o.prototype.K8a=function(t,e){if(this.Vd!==t){if(e)for(e=this.Vd;e&&e!==t;)e.active=!1,this.hj.remove(e),e=e.tg;this.Vd=t}},o.prototype.Is=function(t,e){var i,n,r,a,o=this;this.Oz&&(i=this.I,r=(n=this.si).O,a=p.VWb(r.id),!n.Sk&&!r.bv&&n.Lc-e<=i.BD&&(this.Sb(a+"updatePts making fork decision at playerPts:",t,"contentPts:",e),this.W1a(n))),s.zf.forEach(function(t){o.Vd.kc(t)&&o.Pg[t].Is()})},o.prototype.SPb=function(t,e){var i,n;this.Oz&&(i=this.JS,this.I.xJb&&t&&this.Rga&&t.Z===this.Rga||(t=t.Pa.gb,i&&t.O.id===i.O.id)||(n=null==(n=null==i?void 0:i.Rd(1))?void 0:n.Hf,this.Rga=null==n?void 0:n.Z,this.JS=t,this.glb(i),i=i&&i.tvb(t),this.ai.Vnb(t.O,e,i)))},o.prototype.Y8=function(t,e,i){e.cs||(e.Z=this.xYa(t,e.Z,!0),i||(e.Ha=this.xYa(t,e.Ha,!1)),e.cs=!0)},o.prototype.QP=function(t,i){var e=this.ih[t];e?l.mf(e.Bl,function(t,e){t.weight=i[e]||0}):this.Sb("updateChoiceMapEntry, unknown segment:",t)},o.prototype.xYa=function(t,e,i){return(t=i?t.eWa(e):t.bV(e)).length?(e=t[1],i?e.Z:e.Ha):e},o.prototype.FNa=function(t,e,i){var n=e?i.Lc:i.me;return(e?i.z$:i.wta)<=t&&t<n},o.prototype.bNa=function(t,e,i){for(var n,r=this.rb,a=this.Vd;a;){if((!l.Ba(i)||r.wpa(i,a.P.Pb))&&this.FNa(t,e,a))return a;a=a.tg}if(e){a=Object.keys(this.Vd.children);for(var o=0;o<a.length;o++)if(n=this.Vd.children[a[o]],(!l.Ba(i)||r.wpa(i,n.P.Pb))&&this.FNa(t,e,n))return n}},o.prototype.Flb=function(t,r){var a=this.L1(t,r),o=a.Yva(r,void 0,this.I.yua);return s.zf.forEach(function(t){var e,i,n;a.kc(t)&&(e=a.Rd(t),i=r.Rd(t),n=o[t],1===t&&a.kx(u.T.Eb(i.Ic+r.Fe-n)),e.KI(n))}),this.ai.o2(t,a.Fe),a},o.prototype.Lkb=function(t){for(var e=[t.O.id];t.tg;)t=t.tg,e.unshift(t.O.id);this.gfa(t)},o.prototype.gfa=function(t){var e=this,i=t.O;l.mf(t.children,function(t){t&&e.gfa(t)}),this.hj.remove(t),t.Df(),this.Hua(t),this.ai.Gga(i)},o.prototype.vK=function(n,t){var r,a,o=this,e=t.O;t.P!==n.P&&this.rb.RNa(n.P.Pb),n.active=!0,this.hj.enqueue(n),n.IL(),r=h.default.time.ea(),a={},l.mf(t.children,function(t){var e,i;t&&(t.ke&&(e=t.Rd(0),i=t.Rd(1),t.ke.Qp=[e?e.rn.Y:0,i?i.rn.Y:0],t.ke.RAb=r-t.ke.Z6,t.ke.Z6=void 0,a[t.O.id]=t.ke),t.O.id!==n.O.id&&o.gfa(t))}),t.children=Object.create(null),t.children[n.O.id]=n,t.HK=void 0,this.K8a(n),this.ai.Tnb(n.O,a),1<Object.keys(e.Bl).length&&n.xja()},o.prototype.glb=function(t){var e,i;t&&(e=h.default.time.ea(),(i=t.ix[0])&&void 0===i.C4?i.C4=e-i.Iq:i||(this.Sb("missing metrics for branch:",t.O.id),i={S$:t.O.id,Ue:!0,C4:0,ke:{}},t.ix.unshift(i)),void 0===i.startTime&&(i.startTime=e))},o.prototype.kmb=function(t,e){var i,n,r,a,o;for(o in d.assert(0<=t),this.ih)if(i=this.ih[o],this.rb.wpa(i.P.Pb,e)){if(i.Z<=t&&(1/0===i.Ha||void 0===i.Ha||t<i.Ha))return i;n=Math.min(Math.abs(t-i.Z),Math.abs(t-i.Ha)),(l.ia(r)||n<r)&&(r=n,a=i)}return a},o.prototype.dy=function(t,e,i,n,r,a,o,s,u){return e=new c.lKa(t,e,i,n,r,a,o,s,void 0,u),this.ih[t]=e},o.prototype.qob=function(s,t,u){var c,h,f=this;this.mo=void 0,this.P2=[],h=c=null,l.mf(t.segments,function(i,t){var e,n,r=i.startTimeMs,a=i.endTimeMs,o={};l.mf(i.next,function(t,e){o[e]={weight:t.weight||0,q0b:t.transitionHint||i.transitionHint,W9b:("number"==typeof t.earliestSkipRequestOffset?t:i).earliestSkipRequestOffset}}),e=i.defaultNext,l.ia(e)&&(e=Object.keys(o)[0]),n=l.ia(e),e=f.dy(t,s,r,a,e,o,n,i.exitZones,i.transitionHint),r<=u&&(u<a||l.ia(a))?f.mo=e:u<r&&(!c||r<h)&&(c=t,h=r),n&&f.P2.push(e)}),this.mo||(this.mo=c?this.ih[c]:this.ih[t.initialSegment])},o.prototype.L1=function(t,e,i){var n=t.P,r=this.rb.qh(n.Pb),a=r.Cw,o=[];return[0,1].forEach(function(t){n.kc(t)&&o.push(r.jq(t))}),t=new b.DEa(this.rb,this.I,this.ai,this.H,this,this.T1,this.tOa,this.nL,t,o,a,e,i?u.T.Eb(i):void 0,this.pV,this.rb.Pg,this.rb.Pv),this.Mkb(t),this.Yh.push(t),t},o.prototype.Mkb=function(t){var e;function i(t){e.rb.emit(t.type,t)}e=this,t.addListener("locationSelected",i),t.addListener("logdata",i),t.addListener("serverSwitch",i),t.addListener("streamSelected",i),t.addListener("lastSegmentPts",i),t.addListener("managerdebugevent",i),t.addListener("requestCreated",function(t){t=t.request,e.rb.cha(t.mediaType,t.Z)})},o.prototype.nmb=function(t){for(var e=[t];t.tg;)t=t.tg,e.push(t);return e},i=o,e.Iba=i},function(t,e,i){var S,v,T;function u(t,e,i){this.PD=e,this.yl=i,this.QA=this.cW=this.bta=this.n5a=this.m5a=this.iO=this.$d=this.GSb=this.yl=this.Lm=this.Ic=this.Z=this.Ks=this.$n=this.U=this.O_a=this.KT=void 0}function A(t,e,i){this.Ha=e,this.r0a=i,this.uQa=this.Nbb=this.vr=this.$n=this.EH=this.lw=void 0}function n(t,n,e,i,r,a,o){var s=new u(0,n,t.yl);t.forEach(function(t){var e=t.buffer,i=e.U;t.mediaType===S.Ta.Wb?s.KT=i.length?i[0].bitrate:void 0:t.mediaType===S.Ta.Mb&&(s.O_a=i.length?i[0].bitrate:void 0,s.U=i,s.$n=e.lm-e.Mc,s.Ks=e.bh,s.Z=e.Mc,s.Ic=e.Ic,s.Lm=t.Qd,s.yl=t.yl,s.GSb=n-t.yl,s.$d=t.$d,s.iO=i.filter(function(t){return s.Z<=t.Vw}).length)}),this.Dj=s,this.Nt=void 0,this.STa=i,this.$w=r,this.pRa=a,this.uua=this.a$=this.z4a=this.VA=this.DL=this.bWa=this.nx=this.$d=this.Nt=void 0,this.hrb=o,this.Cta={}}S=i(28).default,v=i(35).assert,T=i(16).ma,u.prototype.constructor=u,A.prototype.constructor=A,(n.prototype.constructor=n).prototype.Qt=function(t,e){var i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g=this.Dj,v=[],y=t[S.Ta.Mb],w=t[S.Ta.Wb];if(void 0===y||void 0===w)return!1;if(i=y.buffer,n=w.buffer,r=g.$d.filter(function(t){return t.Y5()}),void 0===i||void 0===n||void 0===r||0===r.length)return!1;a=new A(e&&T[e],y.Mc,e===T.Of),c=u=s=o=0,h=g.Z,t=t[S.Ta.Mb].Mc;for(var _=g.U,E=g.iO,k=0;k<E;k++)l=(f=_[k]).offset,p=f.offset+f.fa-1,d=f.Hr,m=(b=f.AA)+d,f&&b<=t&&h<m&&(d=f.Hr,c+=b=Math.min(d,Math.min(t,m)-Math.max(b,h)+1),o+=b/d*(p-l+1),s+=f.bitrate*b,u+=f.sb*b);return g.m5a=o,g.n5a=c,g.bta=0<c?s/c:0,g.dSb=0<c?u/c:0,g.cW||(g.cW=0,r.some(function(t,e){if(t.bitrate===g.O_a)return g.cW=e,!0})),r.forEach(function(t){var e,i;t=t.Y5(),e=[],g.QA||(g.QA=t.zn(g.Z,void 0,!0)),a.lw||(a.lw=t.zn(a.Ha,void 0,!0),a.EH=t.length-1),g.Lm!==g.QA+g.iO&&(g.Lm=g.QA+g.iO),E=Math.min(a.EH,a.lw+1);for(var n=g.QA;n<=E;n++)i=t.get(n),e[n]=i;v.push(e)}),e===T.Of&&(a.$n=i.lm-i.Mc,a.vr=n.lm-n.Mc,a.Nbb=y.M6a,a.uQa=w.M6a),this.Nt=a,this.$d=r,this.nx=v,this.bWa=!0},n.prototype.wz=function(){var t,e,i,n,r,a,o,s,u,c,h,f,l,p;if(this.mk)return this.mk;if(t=this.VA,e=this.Dj,i=this.Nt,n=this.$d,r=this.z4a,a=this.hrb,v(void 0!==t,"throughput object must be defined before retrieving the logdata from PlaySegment"),(t.trace&&0===t.trace.length||void 0===t.timestamp)&&(s=i.r0a?!(o=!1):i.lw-e.QA+1<=e.iO?o=!0:!(o=!0),u=!0),r)for(var d=r.g7,b=r.FM,m=0;m<a.length;m++)(t=r[c=a[m]])&&t.dsa&&(s=!0);if(i={bst:e.yl,pst:e.PD,s:e.QA,e:i.lw,prebuf:e.iO,brsi:e.Lm,pbdlbytes:e.m5a,pbdur:e.n5a,pbtwbr:e.bta,pbvmaf:e.dSb},this.$w&&(i.fragmentsPrebuffered=e.U),u&&(i.nt=u),s&&(i.nd=s),d&&(i.invalid=d),b&&(i.exception=b),this.uua&&(i.rr=this.uua),this.a$&&(i.ra=this.a$),s||d||b||!this.STa&&!this.$w||(i.bitrate=n.map(function(t){return t.bitrate}),c=(t=this.VA).trace,h=[],l=0,c.forEach(function(t){t=Number(t).toFixed(0),h.push(t-l),l=t}),i.tput={ts:t.timestamp,trace:h,bkms:t.Iy}),s||u||d||b)i.feasible=o;else for(i.sols={},i.elapsed=r.fBb,m=0;m<a.length;m++){if(c=a[m],t=r[c],s={},t&&t.Oq&&(s.algelapsed=t.grb,s.maxHeapTotal=t.eA,s.f=t&&t.jD||!1,s.dltwbr=t.xUa,s.dlvmaf=t.AUa,s.dlvdur=t.zUa,s.dlvbytes=t.yUa,s.dlabytes=t.vUa,(this.STa||this.$w)&&(f=t.Oq.filter(function(t){return t}).map(function(t){return t.Je}),l=0,p=[],f.forEach(function(t){p.push(t-l),l=t}),s.strmsel=p),this.$w)){for(var g in u=[],o=this.Dj.Lm,f)d=f[g],(b=this.nx[d][o]).Lf=d,u.push(b),o++;s.fragsel=u,s.streamList=this.$d,s.pause_dlnd_sec=t.Oq.filter(function(t){return t}).map(function(t){return t.Zsa}),s.buffer_sec=t.Oq.filter(function(t){return t}).map(function(t){return t.Tia}),s.buffer_kb=t.Oq.filter(function(t){return t}).map(function(t){return t.Sia}),s.buffer_frags=t.Oq.filter(function(t){return t}).map(function(t){return t.tRa}),s.elapsed_secs=t.Oq.filter(function(t){return t}).map(function(t){return t.XUa}),s.throughput=t.Oq.filter(function(t){return t}).map(function(t){return t.Ra})}i.sols[c]=s}return this.mk=i},n.prototype.jDb=function(t){var e;if(void 0!==this.Cta[t])return this.Cta[t];for(var i=this.nx[this.Dj.cW],n=0;n<i.length;n++)if((e=i[n])&&e.Z<=t&&e.Z+e.duration>t)return this.Cta[t]=e;throw Error("findPlayingFragment: missing")},t.exports=n},function(t,e,i){var n;function r(t,e,i){this.fa=t,this.Im=e,this.quality=i}function c(t,e){void 0===(this.Xqa=e)&&(this.Xqa=!0),this.Qk=t,this.Ykb()}n=i(5).assert,(r.prototype.constructor=r).prototype.Bz=function(){return 8*this.fa/1e3/this.Im},(c.prototype.constructor=c).prototype.Et=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=t.mN()),void 0===n&&(n=0),void 0===r&&(r=t.Qk.length);for(var a,o=[],s=n;s<r;s++){n=[];for(var u=e;u<i;u++)a=t.Qk[s][u],n.push(a);o.push(n)}return new c(o,t.Xqa)},c.prototype.Ykb=function(){var t,e=this.Qk[0].length;for(t in this.Qk.slice(1))n(this.Qk[t].length===e,"expect this.chunkss[chunksIndex].length === n but got "+this.Qk[t].length+" and "+e);this.Xqa&&this.Zkb(),this.$kb()},c.prototype.mN=function(){return this.Qk[0].length},c.prototype.Zkb=function(){for(var t=0;t<this.Qk.length-1;t++)for(var e=0;e<this.mN();e++)n(this.Qk[t][e].fa<=this.Qk[t+1][e].fa,"Chunk size for epoch "+e+" is not monotonic")},c.prototype.$kb=function(){for(var t=0;t<this.Qk.length-1;t++)for(var e=0;e<this.mN();e++)n(Math.abs(this.Qk[t][e].Im-this.Qk[t+1][e].Im)<1e-8,"Chunk duration for epoch "+e+" is not consistent")},c.prototype.THb=function(){var e=[];return this.Qk[0].forEach(function(t){e.push(t.Im)}),e},t.exports={Ydb:r,Zdb:c}},function(t,e,i){var n;function r(){}function a(t,e,i){void 0===i&&(i=!1),n(t.length===e.length,"bitrates_kbps and durations_sec must be of the same length."),n(1e-8<t.reduce(function(t,e){return t+e},0),"bitrate zero, won't be able to send anything."),this.rC=t,this.TUa=e,this.repeat=i,this.mm=this.Do=0}n=i(5).assert,r.prototype=Error(),(a.prototype.constructor=a).prototype.Et=function(){var t=new a(this.rC,this.TUa,this.repeat);return t.Do=this.Do,t.mm=this.mm,t},a.prototype.ooa=function(){return this.rC[this.Do%this.rC.length]},a.prototype.XC=function(){return this.TUa[this.Do%this.rC.length]},a.prototype.NAb=function(t){if(n(0<t,"expect x_sec > 0.0"),!(this.repeat||0<=this.Do&&this.Do<this.rC.length))throw new r;n(this.mm<this.XC(),"expect this.cur_pos_sec_in_bin < this.get_curr_duration_sec()");for(var e;t-=e=t<(e=this.XC()-this.mm)?t:e,this.mm+=e,!(this.mm<this.XC());)if(this.mm-=this.XC(),this.Do+=1,!this.repeat&&this.Do>=this.rC.length){if(0<t)throw new r;break}},a.prototype.k5a=function(t){this.NAb(t)},a.prototype.OAb=function(t){if(n(0<t,"expect y_kb > 0.0"),!(this.repeat||0<=this.Do&&this.Do<this.rC.length))throw new r;n(this.mm<this.XC(),"expect this.cur_pos_sec_in_bin < this.get_curr_duration_sec()");for(var e,i=0;;){if(e=t<(e=this.XC()-this.mm)*this.ooa()?t/this.ooa():e,t-=this.ooa()*e,i+=e,this.mm+=e,this.mm<this.XC())return i;if(this.mm-=this.XC(),this.Do+=1,!this.repeat&&this.Do>=this.rC.length){if(0<t)throw new r;return i}}},t.exports={okb:a,pkb:r}},function(t,e,i){var v,s,c,n,u,y,h,w,_,E,l,k,p,d,b;function r(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.H=t,this.yg=e,this.I=i,this.kc=n,this.V=r,this.iP=a,this.Qb=o,this.Cb=s,this.mg=u,this.C3=c,this.MF=h,this.K2=[],this.hha=[],this.$Na=[],this.zMa=void 0,[0,1].forEach(function(t){f.kc(t)&&(f.K2[t]=new b(f.H,t),f.hha[t]=new p(t),f.$Na[t]=new d(t))}),this.Cbb=new l.rF(this.H),this.dB=l.CC(this.I,this.Cbb),this.tia=l.BC(),this.yF=void 0}function a(t){this.mediaType=t,this.WT=this.rw=this.Jz=this.zt=this.Kz=void 0}_esm(e),e.bkb=e.oda=e.dkb=e.LKa=void 0,t=i(2),v=t.__importStar(i(10)),s=t.__importDefault(i(6)),c=t.__importDefault(i(35)).default.tH,n=t.__importStar(i(9)).wq,u=t.__importDefault(i(397)),y=i(381),h=i(214),w=i(16),_=i(25),E=i(5),l=i(99),k=i(238),Object.defineProperties(r.prototype,{Kf:{get:function(){return this.K2},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{RA:{get:function(){return this.hha},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{Jw:{get:function(){return this.$Na},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{Ey:{get:function(){return this.zMa},set:function(t){this.zMa=t},enumerable:!1,configurable:!0}}),r.prototype.Lq=function(t,e){this.Cbb.Lq(t,e)},r.prototype.Wqa=function(t){var e=this.I,i=t.mediaType,n=s.default.Io()[i],r=e.I1b?0===i?e.ET:e.RZ:1===i?e.ET:e.RZ,a=this.V.getState(),o=this.V.Re();return e=t.Pa.gb,n={ew:n,Z:(i=this.C3.X1a(e,i)).zd,Mc:o,Ic:i.yO||o,lm:i.gU||o,bh:i.bh,cl:i.cl,FWa:i.U.length,U:[]},void 0===(r={state:a,sq:this.V.sq(),Qd:t.Jn,buffer:n,kla:r,K1a:!!this.iP.DW,wM:!!this.iP.ns,Jp:this.Qb&&this.Qb.Jp,b$:t.lHb,playbackRate:this.V.Jo()}).Qd&&(r.Qd=t.dma(n.Ic)),r.UT=e.UT,n.U=i.U,v.Ba(n.Z)?t.seeking&&n.Mc!=n.Z&&(n.Mc=n.Z):(n.Z=0,n.Ic=0),this.yg.vub(r),this.yg.Kqb(r),r},r.prototype.wja=function(t,e,i){for(var n,r,a=(t=this.K2[t]).maxBitrate,o="manifest",s=0,u=e.length-1;0<=u;u--){if(r=(n=e[u]).bitrate,c(n)){s=Math.max(s,r);break}this.I.bZ&&!n.St?o="bc":n.ju?n.Ez&&(o="hf"):o="av"}void 0!==a&&s===a||(t.maxBitrate=s,this.Cb.NPb(a,s,o,i))},r.prototype.jHb=function(t){return this.Xna(t).Lf},r.prototype.Xna=function(t){var e,i,n,r,a,o,s,u,c,h,f,l=this.I,p=t.mediaType,d=1==p,b=0,m=this.K2[p],g=this.hha[p];if(!m.If)return{Lf:void 0};if(e=this.Wqa(t),n=(i=t.ug).ou,r=t.R7.P,a=t.track.$d,!r.ym.LZ(r.W,a))return t.Kk("location selector did not find any urls"),{Lf:void 0};o=k.K9(e.state),s=d?this.dB:this.tia;try{u=s.wn(a,o)}catch(t){this.H.error("StreamFilters: filterStreams: "+t),u=[a[0]]}if(0===u.length&&(this.H.error("StreamFilters: empty list"),u=[a[0]]),this.MF.Jr&&(t.LC.length!==u.length||0<_.vt(t.LC,u).length||0<_.vt(u,t.LC).length)){try{this.yF&&this.aDb()}catch(t){this.Cb.Kn("Hindsight: Error when handling maxbitrate chagned: "+t)}t.LC=u}o=n?n.Lf:m.uma;try{n&&(b=n.bitrate,n&&i.track&&!n.track.equals(i.track))&&(c=u[y.gma(u,b)||0],n.bitrate===c.bitrate&&1!==p||(e.state=w.ma.zh),n=c,o=a.indexOf(c))}catch(t){this.H.error("StreamFilters: track change: "+t)}if(!d&&(!((b=l.FP)&&0<b.length)&&o&&a[o]&&n&&n.location===a[o].location))return{Lf:o};try{if(h=this.yg.eN(p),!(f=t.kl.Gva(e,u,void 0,h,m.If.config.Rw,r.aq)))return t.Kk("stream selector did not find a stream"),{Lf:void 0}}catch(t){this.H.error("StreamFilters: stream selector: "+t),f={Je:0}}if(f.Je=a.indexOf(u[f.Je]),this.iP.ns&&this.iP.ns.Oqb(t.mediaType,f,a),d&&this.wja(p,u,t.Ic),u=(n=a[e=f.Je]).bitrate,e!=o&&(d&&l.yM&&this.mg.rMa(t,u),d||this.yg.jP(u)),v.Ba(m.uma)||(m.uma=e),t.Pe||(f.Pe?(E.assert(void 0!==f.D3),t.I$(f.D3),g.zt=f.D3):(t.tD=f.tD,t.wI=f.wI,t.progress=f.progress)),this.cy(),d)if(f.ez)r.kP(f.ez);else if(!r.A6()&&!l.A9a)for(t=0;t<a.length;++t)if((l=a[t]).lu&&!r.Xk(p,l.Oa)){r.kP([l.Oa]);break}return f.QQa&&this.Cb.UPb(f.QQa),{Oa:n.Oa,Lf:e,xu:f.xu}},r.prototype.cy=function(){var t=this.Kf[0],e=this.Kf[1],i=this.RA[1],n=this.RA[0];return(t=this.C3.Wc.pub(null!==(e=null==e?void 0:e.Eu)&&void 0!==e?e:0,null!==(e=null==t?void 0:t.Eu)&&void 0!==e?e:0,this.Ey,this.iP.zO)).zt&&(this.iP.Pm&&i?i.zt=t.zt:n&&(n.zt=t.zt)),t.Pe},r.prototype.ama=function(n,t){var e,r,a,o=this;if(this.yF)return e=this.yF,r=this.V.Re(),a=[],t&&(r=t.Ha),h.zf.forEach(function(t){var e,i=o.C3.Wc.Rd(t);i&&((e=o.Wqa(i)).mediaType=t,e.Mc=r,n===w.ma.Of&&(e.M6a=i.Pa.Zha(r)),a[t]=e)}),e.bWa||e.Qt(a,n)||this.ava(),e},r.prototype.aDb=function(){var t=this.yF,e=this.I;t&&(this.ama(void 0),t&&!t.DL&&this.yg.gua.Pla(t)),this.pTa(e)},r.prototype.ava=function(){this.yF=void 0},r.prototype.j1b=function(t){var e,i,n=t.oldValue;t=t.newValue,e=this.yF,i=this.I,t===w.ma.Kc&&n!==w.ma.Kc?(e&&this.H.warn("override an existing play segment!"),this.pTa(i,n,!0)):t!==w.ma.Kc&&n===w.ma.Kc&&e&&(this.ama(t),e&&!e.DL&&this.yg.gua.Pla(e),this.ava())},r.prototype.pTa=function(t,e,r){var i,a=this,o=[];h.zf.forEach(function(t){var e,i,n=a.C3.Wc.Rd(t);n&&(e=a.Wqa(n),r?(i=a.Kf[t]).uwa?(e.yl=i.uwa,i.uwa=void 0):e.yl=i.yl:e.yl=s.default.time.ea(),e.$d=n.LC,e.mediaType=t,o[t]=e)}),i={Q8b:(i=s.default.Io())[0],Abb:i[1],Bac:t.D2a,gA:t.gA},this.yF=new u.default(o,s.default.time.ea(),e,this.MF.QU,t.$w,i,t.J6)},i=r,e.LKa=i,a.prototype.n1b=function(t,e,i){this.Kz=t||this.Kz,this.zt=this.zt,this.Jz=e||this.Jz,this.rw=i||this.rw},p=a,e.dkb=p,d=function(t){this.mediaType=t,this.jqa=this.qqa=this.lqa=this.AH=void 0},e.oda=d,b=function(t,e){this.mediaType=e,this.H=n(s.default,t,"["+e+"]"),this.Kk=this.H.error.bind(this.H),this.Sb=this.H.warn.bind(this.H),this.jn=this.H.trace.bind(this.H),this.Dg=this.H.log.bind(this.H),this.H.debug.bind(this.H),this.uma=this.yl=this.xo=this.If=void 0,this.MX=this.Eu=0,this.YP=!1,this.maxBitrate=void 0},e.bkb=b},function(t,e,i){var T,f,l,p,d,A,n,s,u,O,b,m,g;function I(){}function r(r,t){var a,o,s,e,i,n,u,c,h=T.gd(t)?t:I;this.I=r||{},function(t,e,i){this.Wj[t].De[e]=i}.bind(this),function(t,e){return this.Wj[t].De?this.Wj[t].De[e]:void 0}.bind(this),this.on=this.addEventListener=m.addEventListener,this.removeEventListener=m.removeEventListener,this.emit=this.Va=r.$9b?m.Va:I,a=p.Rxb(r),o=this.I.dailyDiskCacheWriteLimit,a?(this.Hv=a,e=r.Pac||g,i=p.iFb(),n={},u=e.partitions.reduce(function(t,e){return t+e.capacity},0),c=i/u,e.partitions.map(function(t){var e=t.key;n[e]={},n[e].ew=Math.floor(c*t.capacity),n[e].Tyb=t.dailyWriteFactor||1,n[e].ybc=t.owner,n[e].mCb=t.evictionPolicy}),s=n,this.uy=function(t){return!T.ia(s)&&null!==s&&void 0!==this.Wj[t]&&!T.ia(s[t])},s?(this.Wj={},t=f.Promise.all(Object.keys(s).map(function(e){return new f.Promise(function(i,n){var t=s[e];t.rbb=r.rbb,new d(e,a,t,function(t,e){t?n(t):i(e)},o)})})).then(function(t){return t.map(function(t){var e=t.Ov;this.Wj[e]=t,s[e].PDb=s[e].ew-t.ty,this.Wj[e].on(d.Le.REPLACE,function(t){(t=t||{}).partition=e,t.type="save",this.Va("mediacache",t)}.bind(this)),this.Wj[e].on(d.Le.gMa,function(t){(t=t||{}).partition=e,t.type="save",this.Va("mediacache",t)}.bind(this)),this.Wj[e].on(d.Le.Mf,function(t){(t=t||{}).partition=e,t.type=d.Le.Mf,this.Va("mediacache-error",t)}.bind(this))}.bind(this)),this}.bind(this)).then(function(t){var i,n,r;return i=a,n=f.storage.AR,r=Object.keys(s),i.query(n,"",function(t,e){t||Object.keys(e).filter(function(t){return r.indexOf(t.slice(0,t.indexOf(".")))<0}).map(function(t){i.remove(n,t,I)})}),t}.bind(this)).then(function(i){Object.keys(i.Wj).map(function(e){i.Wj[e].lna().map(function(t){i.delete(e,t)})}),i.En=!0,h(null,i)}.bind(this)).catch(function(t){l.error("Failed to initialize media cache ",t),this.rH=O.TAa,h(this.rH,this)}.bind(this)),b.Uw(t)):(this.rH=O.Sgb,h(this.rH,this))):(this.rH=O.TAa,h(this.rH,this))}function c(t,e,i,n,r,a){var o=a?"mediacache-error":"mediacache";e={partition:i,type:e,resource:n,time:f.time.now()},a&&(e.error=a),r&&(T.Ba(r.duration)&&(e.duration=r.duration),T.Ba(r.Ky)&&(e.bytesRead=r.Ky));try{t.Va(o,e)}catch(t){l.warn("caught exception while emitting basic event",t)}}function h(t,e,i,n,r){var a=r?"mediacache-error":"mediacache";e={partition:i,type:e,resources:n,time:f.time.now()},r&&(e.error=r);try{t.Va(a,e)}catch(t){l.warn("caught exception while emitting basic event",t)}}function a(t){return!A.BN(t)&&!s.OKb(t)}function o(r,t,i){var n,a;function o(e){r.delete(n,function(t){t?i(t):(delete r.De[a],t=Object.keys(e.resourceIndex),t=f.Promise.all(t.map(function(n){return new f.Promise(function(e,i){r.delete(n,function(t){t?i(t):e(n)})})})).then(function(){i()},function(t){i(t)}),b.Uw(t))})}a=A.BN(t)?(n=t,A.j5(t)):(n=A.lka(t),t),(t=r.De[a])?o(t):r.read(n,function(t,e){t?i(t):o(e)})}function x(t,e,i){return i?s.rAb(t,e).reduce(function(e,i){return Object.keys(i).map(function(t){e[t]=i[t]}),e},{}):((i={})[t]=e,i)}T=i(10),f=i(127),l=new f.Console("MEDIACACHE","media|asejs"),p=i(877),d=i(878),A=i(402),n=i(128),s=i(885),u=i(886),O=i(249),b=i(250),m=i(403).EventEmitter,g={Dbc:[]},r.prototype.YX=function(t,e,i){var n=T.gd(i)?i:I;this.uy(t)?this.Wj[t].query(e,function(t,e){t?(l.error("Failed to query resources",t),n([])):n(e.filter(a))}):n([])},r.prototype.read=function(n,r,t){var e,a,i,o=T.gd(t)?t:I;this.uy(n)?(e=this.Wj[n],a=e.De[r],!A.BN(r)&&this.I.lOb?(i=function(t){e.Z9(Object.keys(t),function(t,e,i){t?o(O.jK.Uq("Failed to read "+r,t)):(c(this,"read",n,r,i),o(null,s.hKb(e)))}.bind(this),t)}.bind(this),a?i(a.resourceIndex):this.wUb(n,r,function(t,e){t?o(O.jK.Uq("Failed to read "+r,t)):i(e.resourceIndex)})):e.read(r,function(t,e,i){t?o(O.jK.Uq("Failed to read "+r,t)):(a&&a.convertToBinaryData&&(e=u.Vvb(e)),c(this,"read",n,r,i),o(null,e))}.bind(this))):o(O.sB)},r.prototype.Z9=function(t,e,i){var a,n=T.gd(i)?i:I;this.uy(t)?(a={},e=f.Promise.all(e.map(function(r){return new f.Promise(function(i,n){this.read(t,r,function(t,e){t?((e={})[r]=t,n(e)):(a[r]=e,i())})}.bind(this))}.bind(this))).then(function(){n(null,a)},function(t){n(t)}),b.Uw(e)):n(O.sB)},r.prototype.f8a=function(a,o,t){var r=T.gd(t)?t:I;this.uy(a)?"[object Object]"!==Object.prototype.toString.call(o)?r(O.v1.Uq("items must be a map of keys to objects")):(t=new f.Promise(function(t){var e=this.Wj[a].lna(),i=Object.keys(o);(e=e.filter(function(t){return-1===i.indexOf(t)}))&&0<e.length?this.gUa(a,e,function(){t()}):t()}.bind(this)).then(function(){return f.Promise.all(Object.keys(o).map(function(r){return new f.Promise(function(i,n){this.save(a,r,o[r].Kq,o[r].Gc,function(t,e){t?(l.error("Received an error saving",r,t),n(t)):i(e)},!0)}.bind(this))}.bind(this)))}.bind(this)).then(function(t){var i,n,e;try{i=Number.MAX_VALUE,n=Number.MAX_VALUE,e=t.reduce(function(t,e){return e.An&&e.An<i&&(i=e.An),e.jM&&e.jM<n&&(n=e.jM),i<Number.MAX_VALUE&&(t.freeSize=i),n<Number.MAX_VALUE&&(t.dailyBytesRemaining=n),T.Ba(e.Ok)&&(t.bytesWritten+=e.Ok),T.Ba(e.duration)&&(t.duration+=e.duration),t},{partition:a,type:"saveMultiple",keys:Object.keys(o),time:f.time.now(),bytesWritten:0,duration:0}),this.Va("mediacache",e),r(null,e)}catch(t){r(err)}}.bind(this),function(t){T.isArray(t.YPa)?t.YPa.forEach(function(t){this.Va("mediacache-error",{partition:a,type:"saveMultiple",error:t.error,resources:t.resources})}.bind(this)):this.Va("mediacache-error",{partition:a,type:"saveMultiple",error:t}),r(t)}.bind(this)),b.Uw(t)):(T.gd(t)?t:I)(O.sB)},r.prototype.save=function(p,d,b,m,t,g){var v,y,w,e,i,_,E,k,S=T.gd(t)?t:I;this.uy(p)?(v=this.Wj[p],y=A.lka(d),t=(t=v.lna()).filter(function(t){return t!==d}),T.ia(m)||T.Bb(m)||!T.Ba(m.lifespan)?S(O.qhb):(w=x(d,b,this.I.lOb),(i=(e=v.De[d]||{}).resourceIndex)&&Object.keys(i).map(function(t){T.ia(w[t])&&v.delete(t)}),m.convertToBinaryData&&(b=u.Wvb(w),w=x(d,b,!1)),i=f.time.now(),(_={}).partition=p,_.resourceIndex=Object.keys(w).reduce(function(t,e){return t[e]=n.joa(w[e]),t},{}),_.creationTime=e.creationTime||i,_.lastRefresh=i,_.lifespan=m.lifespan,_.lastMetadataUpdate=i,_.size=e.size,_.convertToBinaryData=m.convertToBinaryData,E=function(i,n,r){i.Lzb(function(t,e){t&&l.error("Evicting","Failed to delete some orphaned records",t),e.Aua?r():(t=i.uFb())?this.delete(i.Ov,t,function(t){t?(g||(T.isArray(n)?n.forEach(function(t){h(this,"save",i.pGb,t.resources,t.error)}.bind(this)):c(this,"save",i.Ov,d,void 0,n)),S(n)):r()}.bind(this)):S(O.DJ)}.bind(this))}.bind(this),k=function(){var t=this.Wj,e=0,i=f.time.now();if(!T.ia(t))for(var n in t)e+=t[n].KEb(i);return e}.bind(this),this.gUa(p,t,function(){v.replace(y,_,function(t,e){var i,n,r,a,o,s,u,c,h,f,l;e?(v.De[d]=A.Ima(_),v.GVb(w,(i=w,n=p,r=d,a=b,o=m,s=S,c=y,h=this,f=v,l=E,function(t,e){t?T.isArray(t)?(e=t.map(function(t){return t.error})).some(function(t){return t.code===O.DJ.code})&&!e.some(function(t){return t.code===O.w1.code})?l(f,t,function(){h.save(n,r,a,o,s,u)}):(f.delete(c),delete f.De[r],s({error:t[0].error,yu:t[0].yu,type:t[0].type,YPa:t})):s({error:t,yu:n,type:"save"}):(t=e.items.filter(function(t){return 0<=Object.keys(i).indexOf(t.key)}).reduce(function(t,e){return t+e.D7},0),f.De[r].$8a(t),t={PDb:e.An,E9b:e.jM,Ok:0,items:e},0<e.Ok&&(t.Ok=e.Ok),0<e.duration&&(t.duration=e.duration),s(null,t))}),u=g,k)):t.code===O.DJ.code?E(v,t,function(){this.save(p,d,b,m,S,g)}.bind(this)):S(t)}.bind(this),g,k)}.bind(this)))):S(O.sB)},r.prototype.delete=function(e,i,t){var n=T.gd(t)?t:I;this.uy(e)?o(this.Wj[e],i,function(t){c(this,"delete",e,i,void 0,t),n(t)}.bind(this)):n(O.sB)},r.prototype.gUa=function(s,e,t){var n,u=T.gd(t)?t:I;this.uy(s)?(n=this.Wj[s],t=f.Promise.all(e.map(function(i){return new f.Promise(function(e){o(n,i,function(t){e({$:T.ia(t),error:t,Kq:i})}.bind(this))}.bind(this))}.bind(this))).then(function(t){for(var e,i,n=[],r=[],a=[],o=0;o<t.length;o++)(e=t[o]).$?n.push(e.Kq):e.error&&r.push(e);0<n.length&&h(this,"delete",s,n),0<r.length&&(a=r.map(function(t){return t.Kq}),i=(t=b.sZa(r))[0],t.forEach(function(t){l.error("Failed to delete resources ",t.error,t.resources),h(this,"delete",s,t.resources,t.error)}.bind(this))),(t={}).Tbc=n,0<a.length&&(t.Ubc=a),u(i||void 0,t)}.bind(this),function(t){h(this,"delete",s,e,t),u(t)}.bind(this)),b.Uw(t)):u(O.sB)},r.prototype.clear=function(t,e){var i=T.gd(e)?e:I;this.uy(t)?this.Wj[t].clear(function(t){i(t.filter(a))}):i(O.sB)},r.prototype.wUb=function(t,n,e){var r,a=T.gd(e)?e:I;this.uy(t)?(r=this.Wj[t]).read(A.lka(n),function(t,e){var i;t?a(O.rhb):(i=A.Ima(e)||{},r.FYa(Object.keys(i.fva),function(t){i.size=t,(t=r.De[n])&&(i.lastMetadataUpdate&&t.lastMetadataUpdate&&t.lastMetadataUpdate<=i.lastMetadataUpdate?r.De[n]=i:t.lastMetadataUpdate&&(t.lastMetadataUpdate>i.lastMetadataUpdate||T.ia(i.lastMetadataUpdate))&&(i=t)),a(null,i)}))}):a(O.sB)},r.prototype.constructor=r,t.exports=r},function(t,e,i){var n,r;function a(t,e,i,n,r,a){return new s(t,e,i,n,r,a)}function o(t){return t&&0<=t.indexOf(".__metadata__")}function s(t,e,i,n,r,a){return this.partition=t,this.lifespan=i,this.resourceIndex=e,this.size=n,this.creationTime=r,this.lastRefresh=a,this.fab()}n=i(10),r=i(127),i(128),new r.Console("MEDIACACHE","media|asejs"),s.prototype.refresh=function(){return this.lastRefresh=r.time.now(),this.fab()},s.prototype.$8a=function(t){this.size=t},s.prototype.JSa=function(){var t=r.time.now();return(this.lastRefresh+1e3*this.lifespan-t)/1e3},s.prototype.fab=function(){return this.lastMetadataUpdate=r.time.now(),this},s.prototype.constructor=s,t.exports={create:a,Ima:function(t){var e=t;if("string"==typeof t&&(e=JSON.parse(t)),e&&e.partition&&!n.ia(e.lifespan)&&e.resourceIndex&&e.creationTime&&e.lastRefresh)return t=a(e.partition,e.resourceIndex,e.lifespan,-1,e.creationTime,e.lastRefresh),e.lastMetadataUpdate&&(t.lastMetadataUpdate=e.lastMetadataUpdate),!n.ia(e.size)&&0<=e.size&&t.$8a(e.size),t.JSa(),t.convertToBinaryData=e.convertToBinaryData,t},lka:function(t){return t+".__metadata__"},j5:function(t){return o(t)?t.slice(0,t.length-13):t},BN:o}},function(t,e,i){t.exports={EventEmitter:i(881),Wh:i(882)}},function(t){t.exports="4.1.1819"},function(t,e,i){var m,g,v;function y(t){return t.Cs-t.Er}function w(t,e){return Math.exp(-Math.log(2)/t*e)}function _(t,e){return t=Math.log(2)*e/t,(1-Math.exp(-t))/t}function E(t,e){return t=Math.log(2)/t.N6a,n(e)*Math.exp(-t*y(e))}function n(t){var e;return(null!==(e=t.gH)&&void 0!==e?e:1)*t.$g.reduce(function(t,e){var i=e.dD;return t*(e.Ue+(void 0===i?0:i))},1)}function k(t){return t.$g.filter(function(t){return!t.dD}).reduce(function(t,e){return t*e.Ue},1)}_esm(e),e.ija=e.NRa=e.Jtb=e.MRa=e.Ntb=void 0,m=i(16),g=i(5),v=i(20),e.Ntb=y,e.MRa=function(t,e,i){var r,n,a,o,s,u,c,h,f,l,p,d,b;return!t.R4||m.No(e.Cf)?E(t,e):(r=t.N6a,t=y(e),n=0===(f=e).$g.length?0:(c=0,f.RX<1&&(c=f.Ota,s=f.Nta,u=null!==(u=f.$g[0].duration)&&void 0!==u?u:0,c=Math.max(0,Math.min(u,c-(s-u)))),f.$g.reduce(function(t,e){return t+(void 0===(e=e.duration)?0:e)},0)-c),a=k(e),b=r,u=(s=e).Ota,f=s.Nta,c=s.RX,c=0===s.$g.length?{d3:!1}:(s=(d=s.$g[0]).Ue,l=d.dD,d=d.duration,l&&1!==c?(g.assert(d,"duration should be defined when immediate probability is included in probabilities array"),g.assert(0<c,"presenting segment seamless probability cannot be zero"),u<(f-=d)?{d3:!1}:(l=l*(1-(u=c+(f=u-f)/d*(1-c)))/(1-c),b=s*u/c*w(b,d-=f)+l*_(b,d),g.assert(b<=1),{d3:!0,Zqb:b})):{d3:!1}),o=c.d3,c=void 0===(c=c.Zqb)?1:c,h=e.LA<1?(f=(h=e).Hr,l=h.d$a,p=h.LA,d=h.Cs,b=h.Er,h=h.qWa,g.assert(void 0!==l),g.assert(void 0!==f),p=1-p,d-=b,h?(f-=h,(b=l-h-d)<=0?h=Math.max(0,(l-h)/f):(h=0<(l=f-b)?d/l:0,p*=0<l?l/f:1)):(b=l-d)<=0?h=l/f:(h=0<(l=f-b)?d/l:0,p*=0<l?l/f:1),g.assert(0<=h),g.assert(h<=1),g.assert(0<=p),g.assert(p<=1),1-h*p):1,p=(null!==(p=e.gH)&&void 0!==p?p:1)*a*w(r,t-n)*c*h*e.$g.filter(function(t,e){return t.dD&&(0<e||!o)}).reduce(function(t,e){var i=e.dD,n=e.duration;return n=void 0===n?0:n,i=void 0===i?0:i,t*(e=e.Ue*w(r,n)+i*_(r,n))},1),v.ga&&null!=i&&i.log("{"+e.groupId+"} ["+e.mediaType+"] calculateStreamablePriority: sp: "+e.LA+", pssp: "+e.RX+", streamingDuration: "+e.d$a+", duration: "+e.Hr+", seamlessProbability: "+a+", distance: "+t+", immediateDistance: "+n+", risk:"+w(r,t-n)+", adjustedFirstTerm: "+c+", streamingAdjustment: "+h+", probabilities: "+JSON.stringify(e.$g)+" => "+p),p)},e.Jtb=E,e.NRa=n,e.ija=k},function(t,e,i){var h,n,r,a,o;function s(){this.qO=[],this.TB=new r.er(!1),this.SB=new r.er(r.T.Eb(-1/0)),this.events=new n.EventEmitter}_esm(e),e.hea=void 0,h=i(2),n=i(17),r=i(9),a=i(5),o=i(16),Object.defineProperties(s.prototype,{hx:{get:function(){},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{playbackRate:{get:function(){return this.Jo()},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{jA:{get:function(){return this.TB},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{qW:{get:function(){return this.SB},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{TA:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{vm:{get:function(){return this.nN},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Ug:{get:function(){return this.WM()},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{nj:{get:function(){var t=this.Ug,e=this.js(t);return a.assert(e,"Could not find current branch for "+t.Y),e},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{YJb:{get:function(){return this.Kb[0]},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{wH:{get:function(){return this.nN?this.Kb[this.Kb.length-1]:void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{si:{get:function(){var t=this.Ug,e=this.H5(t);return a.assert(e,"Could not find presenting branch for "+t.Y),e},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{nN:{get:function(){return 0<this.Kb.length},enumerable:!1,configurable:!0}}),s.prototype.yZa=function(t){return-1!==this.Kb.indexOf(t)},s.prototype.q3=function(){return void 0===this.pa},s.prototype.Nb=function(){},s.prototype.OV=function(e){var i,n,t=this.Kb.filter(function(t){return t.O.id===e.xa});if(0!==t.length)return i=this.WM(),n=new r.T(1/0,1),t.forEach(function(t){t=t.gI.add(e.offset),i.rUa(t).lessThan(i.rUa(n))&&(n=t)}),n},s.prototype.js=function(t){var e,i=this.H5(t);if(i)return{xa:(e=i.O).id,offset:t=t.Qa(e.Mg.add(i.jg))}},s.prototype.reset=function(){},s.prototype.vY=function(){},s.prototype.pause=function(t){void 0===t&&(t=o.zf),this.qO=null==t?void 0:t.reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},this.qO)},s.prototype.resume=function(t){var e=this;void 0===t&&(t=o.zf),t.forEach(function(t){-1!==(t=e.qO.indexOf(t))&&e.qO.splice(t,1)})},s.prototype.qxa=function(t){var e;return a.assert(this.pa),a.assert(t!==this),this.TI(),(e=t.q3(this.pa,this))&&(t.pause(this.qO),t.Hla.apply(t,h.__spread(this.Kb)),this.$ka(this.pa)),e},s.prototype.WM=function(){return this.$Xa()},s.prototype.$Xa=function(){var t,e;return a.assert(this.nN,"Attempted to get initial time before any branches were queued"),e=h.__read(this.Kb,1)[0],a.assert(e),null!==(t=e.xj)&&void 0!==t?t:e.Tr},s.prototype.Jo=function(){return 1},s.prototype.H5=function(t){var e;if(this.nN)return e=this.$Xa(),t.lessThan(e)?this.Kb[0]:r.kWa(this.Kb,t)},s.prototype.XEb=function(){var t,e,i,n,r,a,o={};try{for(var s=h.__values(this.Kb),u=s.next();!u.done;u=s.next()){for(i in e=u.value,i=void 0,r=e.OC())(a=r[i])&&(o[i]=(null!==(n=o[i])&&void 0!==n?n:0)+a);if(!e.wl)break}}catch(t){var c={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return o},e.hea=s},function(t,e,i){var m,f,l,b,a,g,o,p,d,u,v,r,y,w,_,n,E,k,S,T,s,A,O,c,I,h,x,P,R,N,j,C,L,M,D,U,B,F,q;function H(t,e,i,n,r,a,o,s,u,c){var h=this;this.jL=t,this.oPa=e,this.config=i,this.id=n,this.IOa=a,this.imb=o,this.Pk=s,this.Oub=u,this.dG="2.0",this.vo=void 0,this.$c=l.Jj.CLOSED,this.Xfa=!0,this.HL=!1,this.jya=this.wia=void 0,this.mRa=new f.Wh,this.JC=0,this.Z$=!1,this.JD=function(t){var e,i;t=h.navigator.ue(t.position.xa),(t=h.Cna(t))&&h.V.vm&&(i=h.V.si,null!==(e=h.V.hx)&&void 0!==e&&e.fE({O:i.O,get uaa(){return i.Pd.Qa(i.O.Mg)}},t,h.nj.offset,!0,!1)),h.Op.start()},this.oX=function(){h.Pk("onDrmReady")},this.console=new d.default.Console("ASEJS_PLAYGRAPH","asejs",""+this.id),this.zi=new T.IB({xD:10,wu:this,source:"AsePlaygraph"}),this.W8a(t),this.Kb=new R.RIa,this.Ni=new F.TIa(this.console),this.events=new f.EventEmitter,this.roa=new I.RCa(this.config,g.T.Eb(this.config.i8),{parent:this.aZa.bind(this)},this.events,this.console),this.Pwa=new p.TKa(this.console,this.events),this.TT={mH:i.ru||1/0},this.V=new v.Uda(this),this.Cu=new y.XR(this.V.za,this.console,"playgraph"),this.Ls=new y.XR(new E.k1({Zk:!0,currentTime:function(){return g.T.Eb(d.default.time.ea())},speed:1}),this.console,"wallclock"),this.Qf=new N.Kza(this.console,i,r,this.events,this,this.Ls),this.B3=new L.Dza(this.Cu,this.Ls,this.config,this.wi.bind(this),this.Cf,this.console),this.f9=this.Qf.f9.bind(this.Qf),this.rX=this.Qf.rX.bind(this.Qf),this.o9=this.Qf.o9.bind(this.Qf),this.C$=this.C$.bind(this),this.PO=new _.wea(i),U.fTa({Qf:this.Qf,Ls:this.Ls},y.Jk.tJ(g.T.Eb(this.config.vA)),function(){h.V.vm&&h.V.si&&(h.Qf.state.value===b.Jc.Of||h.Qf.state.value===b.Jc.xd)&&h.qr(h.V.si)},"buffering"),this.PO.Ji(new k.HB(this.Qf.zi)),this.PO.Ji(new S.kIa(this.IGb.bind(this))),this.PO.Ji(new k.HB(this.zi)),this.PO.Ji(new A.QIa(this.Kb)),this.c$a=new B.SKa(this,this.console,c),this.D1a=new O.iFa(this.Ls,this.console,this.events),this.Op=new q.VIa(this.d$.bind(this)),this.M$(w.CC(this.config),w.BC())}_esm(e),e.w_=void 0,m=i(2),f=i(17),l=i(216),b=i(16),a=i(896),g=i(9),o=i(897),p=i(901),d=m.__importDefault(i(6)),u=i(5),v=i(902),r=i(25),y=i(72),w=i(99),_=i(54),n=i(410),E=i(252),k=i(253),S=i(903),T=i(118),s=m.__importDefault(i(144)),A=i(904),O=i(905),c=i(906),I=i(907),h=i(908),x=i(909),P=i(910),R=i(913),N=i(915),j=i(916),C=i(917),L=i(918),M=i(919),D=i(921),U=i(922),B=i(923),F=i(924),q=i(925),i=i(413).yta.qzb,Object.defineProperties(H.prototype,{state:{get:function(){return this.$c},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{E6:{get:function(){return!(this.V instanceof v.Uda)},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{Ca:{get:function(){return this.jL},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{weight:{get:function(){return this.oPa},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{x$:{get:function(){return u.assert(this.oN,"AsePlaygraph.seekPosition accessed before seekStreaming"),this.vo.position},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{m8a:{get:function(){return u.assert(this.oN,"AsePlaygraph.seekTimestamp accessed before seekStreaming"),this.ZC(this.x$).wG},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{Cf:{get:function(){return this.Qf.state},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{tf:{get:function(){return this.Qf.tf},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{oN:{get:function(){return void 0!==this.vo},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{nj:{get:function(){return this.V.vm?this.V.nj:this.x$},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{Ug:{get:function(){return this.V.vm?this.V.Ug:this.m8a},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{tia:{get:function(){return this.blb},enumerable:!1,configurable:!0}}),Object.defineProperties(H.prototype,{dB:{get:function(){return this.Tpb},enumerable:!1,configurable:!0}}),H.prototype.open=function(){return this.Xfa=!0,this.events.emit("opening",{type:"opening"}),this.events.emit("openComplete",{type:"openComplete"}),this.$c===l.Jj.CLOSED&&(this.$c=l.Jj.OPEN,!0)},H.prototype.Nb=function(){this.Ls.Nb(),this.Cu.Nb(),this.$c!==l.Jj.CLOSED&&(this.Df(),this.Op.Nb(),this.Qf.stop(),this.$c=l.Jj.CLOSED)},H.prototype.bE=function(t,e){var i,n,r=this;return this.wia=t,this.jya=e,t=(e=j.IVa(this.Kb,this.C$.bind(this))).nub,e=e.Zsb,0===t.length||1===t.length&&0===t[0]&&(i=this.nj,t.forEach(function(t){return r.V.vY(t)}),n=this.ZC(i).wG,e.forEach(function(t){var e=t.gb;e.bE(t.vg,i.xa===e.O.id?n:void 0,void 0!==r.Kb.Ina(e))}),this.Qf.fRb(i,e[0].vg),!0)},H.prototype.BC=function(t){return w.BC(this.config,t)},H.prototype.CC=function(t){return w.CC(this.config,t)},H.prototype.bN=function(t,e){var i=this.navigator.ue(t),n=this.navigator.ue(e);return{zbb:i.AIb(e),NL:e!==t&&this.Kb.has(e)&&this.Kb.rz(e)[0].ri,fd:n.Mg.Y,cO:this.Cna(i)}},H.prototype.wi=function(t,e,i,n){var r,a,o,s=this;if(void 0===n&&(n=!0),!e)throw Error("AsePlaygraph.setNextSegment - nextSegmentId undefined - not implemented");n&&this.Ni.get(t)?i||this.Ni.set(t,e):(a=this.Wma(t)[0],o=this.navigator.ue(t),this.nj.xa===t&&a&&null!==(r=this.V.hx)&&void 0!==r&&r.fE({O:a.O,get uaa(){return a.Pd.Qa(a.O.Mg)}},e,this.nj.offset,n,i),n||(t={offset:g.T.Gb,xa:e},this.vo={position:t,ri:!0,Fab:t}),i?this.Ni.AXb(o.id,e):this.Ni.set(o.id,e),this.Op.start(),n&&o.Zw&&0<o.Zw.length&&(u.assert(a),a.zxa(o.Zw)&&this.Wma(e).forEach(function(t){return s.kx(a,t)})),n||this.Qf.x4a(this.x$))},H.prototype.kx=function(t,e){var i=this;t=t.xe.Qa(e.O.Mg),e.kx(t),this.Kb.UEb(e).forEach(function(t){return i.kx(e,t)})},H.prototype.Ai=function(t){this.navigator.Ai(t),this.Op.start()},H.prototype.M$=function(t,e){this.blb=t,this.Tpb=e,this.state===l.Jj.ej&&this.Pk("setStreamFilters")},H.prototype.ZD=function(t,e){var i,n,r,a=this;if(c.C0a(this.Ca,t)){if(void 0===(r=this.rva(t)))this.Nh("Invalid seekPosition");else if(void 0===this.wia||void 0===this.jya)this.Nh("No track selectors available");else if(this.E6&&this.V.nN||!c.rZa(null===(i=this.vo)||void 0===i?void 0:i.Fab,r)){this.oN&&(i=this.navigator.ue(this.nj.xa),null!==(n=this.V.hx)&&void 0!==n&&n.fE({O:i,uaa:i.duration},r.xa,this.nj.offset,!1),this.nj.xa===t.xa?this.Ni.Tub(t.xa):this.Ni.Eja()),t=this.Kb.map(function(t){return a.IOa(t.O.W).Q7});try{this.Df(!0),this.Sub(),this.vo={position:r,Fab:r,ri:!1,MSb:e},this.Qf.x4a(),this.$c=l.Jj.ej,this.Op.start()}finally{t.forEach(function(t){return t.release()})}}}else this.Nh("Invalid seekPosition")},H.prototype.Df=function(t){var e,i=this.RHb();if(this.Kb.reset(),!t&&(this.Ni.Eja(),i.length))try{for(var n=m.__values(i),r=n.next();!r.done;r=n.next())r.value.mVb()}catch(t){var a={error:t}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}this.Cu.reset(),this.Ls.reset(),this.V.reset(),this.vo=void 0,this.B3.reset(),null!==(t=this.mRa)&&void 0!==t&&t.clear(),this.$c===l.Jj.ej&&(this.$c=l.Jj.OPEN)},H.prototype.Wma=function(t){return this.Kb.rz(t)},H.prototype.sk=function(t){this.Qf.sk(t),u.assert(this.V.wH,"Must have an appended branch on underflow"),this.B3.oxa(this.V.wH,this.Ug),this.Pk("onUnderflow"),this.events.emit("underflow")},H.prototype.Ji=function(t){this.PO.Ji(t)},H.prototype.nia=function(t){this.Ji(new n.RJa(t)),this.Srb(t)},H.prototype.Srb=function(t){this.V.qxa(t)?(this.V=t,this.Cu.GQa(this.V.za),this.V.events.on("segmentPresenting",this.JD),this.V.events.on("drmReady",this.oX)):this.Nh("player in use")},H.prototype.ZC=function(t){var e=t.offset,i=this.navigator.ue(t.xa);return{W:t=i.W,wG:i.Mg.add(e)}},H.prototype.js=function(t,e){var i=this.V.js(t);return void 0!==i?i:(i=this.V.wH,c.js(t,{pa:this,ZJb:i&&{id:i.O.id,WWb:i.gI}},e))},H.prototype.OV=function(t){return this.V.OV(t)},H.prototype.rva=function(t){var e=this.Ca.qa[t.xa];if(void 0!==e)return null===e.Ob||void 0===e.Ob?{xa:t.xa,offset:g.T.max(g.T.Gb,t.offset)}:{xa:t.xa,offset:g.T.max(g.T.Gb,g.T.min(t.offset,g.T.Eb(e.Ob-e.Jb)))}},H.prototype.yn=function(t,e){return this.imb(this.Ca.qa[t].W,e)},H.prototype.g6=function(){return M.$Wa(this.Kb,this.k7.bind(this))},H.prototype.k7=function(t){return void 0===(t=this.Kb.Ina(t))||t.wl&&this.k7(t)},H.prototype.f6=function(){return this.TT.mH},H.prototype.qFb=function(t){return D.eZa(this.Kb,t)},H.prototype.Gh=function(t){var n,r,a=this;return this.Kb.hV(function(t){var e=t.KV(0),i=t.KV(1);return!t.O.bv&&a.Kb.voa(t)&&t.wl||((!n||e<n)&&(n=e),(!r||i<r)&&(r=i)),t.wl}),{zZ:n?Math.max(n-t.Y,0):0,AZ:r?Math.max(r-t.Y,0):0}},H.prototype.tw=function(){var t,e=this.oN?this.Gh(this.Ug):{zZ:0,AZ:0},i=s.default.instance().get();return{totalabuflmsecs:e.zZ,totalvbuflmsecs:e.AZ,abuflbytes:0,vbuflbytes:0,currentBandwidth:null!==(t=Number(0<i.confidence)&&(null===(t=i.Ra)||void 0===t?void 0:t.Ga))&&void 0!==t?t:0}},H.prototype.hN=function(){var t,e,h,f,l,p,d,b=this;return this.Fn()?(this.zi.wy({isStreamingFailureReported:!0}),[]):(e=this.Kb.size,this.zi.wy({branchCount:e}),this.oN&&0!==e?(h=this.Ug,f=this.nj,l=[],e=this.navigator.ue(this.nj.xa),p=e.duration,d=!this.Ni.get(e.id)&&null!==(t=e.LA)&&void 0!==t?t:1,t=this.Kb.reduce(function(t,e,i){var n,r,a,o;try{for(var s=m.__values(e.e6()),u=s.next();!u.done;u=s.next())(r=u.value).Ur()||(a="p"+b.id+"-"+i+"-"+(null===(o=e.xj)||void 0===o?void 0:o.Y),o=b.$Ya(r),t.push(b.zyb(r,o.Y,a,p.Y,d,h.Y,f))),!r.mD()&&b.zi.enabled&&l.push({segmentId:r.xa,isDoneStreaming:r.Ur(),isNormalized:r.ri(),needsHeaderRequest:r.track.N8})}catch(t){var c={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(c)throw c.error}}return t},[]),this.zi.wy({nonStreamables:l}),t):[])},H.prototype.$Ya=function(t){var e;return t.Dha||(!(e=this.aZa(t))||this.config.R4&&this.navigator.yIb(e.gb.O,t.xa)?t.fU:this.$Ya(e))},H.prototype.aZa=function(t){var e;return null===(e=this.Kb.Ina(t.gb))||void 0===e?void 0:e.aN(t.mediaType)},H.prototype.hRb=function(t){var e,i;this.Pwa.Fn()||(e=void 0,(i=this.V.nj)&&(e=this.navigator.ue(i.xa).W),this.Nh("BufferingStateTracker: Temporary failure while buffering",e,"NFErr_MC_StreamingFailure",null==t?void 0:t.ph,null==t?void 0:t.cD,null==t?void 0:t.uj))},H.prototype.Nh=function(t,e,i,n,r,a,o){void 0===o&&(o=!1),this.Pwa.Nh(t,e,i,n,r,a,o)},H.prototype.FZ=function(t,e){e=this.c6(e),this.events.emit("logdata",{type:"logdata",target:t,fields:e})},H.prototype.c6=function(t){var e;return this.D1a.jMb(t),e=this.PO.Ho(t),t===_.de.$p&&(t=this.tw(),e.vbuflmsec=t.totalvbuflmsecs,e.abuflmsec=t.totalabuflmsecs,e.vbuflbytes=t.vbuflbytes,e.abuflbytes=t.abuflbytes),e},H.prototype.Mab=function(t){this.TT=t,this.Pk("updateBudget")},H.prototype.Fn=function(){return this.Pwa.Fn()},H.prototype.cbb=function(t){t!==this.weight&&(this.oPa=t,this.events.emit("weightUpdated"))},H.prototype.KZ=function(t){var e,i,n,r,a,o,s,u,c=P.IRa(this.Ca,t),h=c.mub,f=c.L0b;if([c.Uqb,c.MO,h].every(function(t){return!t.length}))return{$:!0,reason:b.Wx.Lib};if(0===h.length&&0===f.length)return{$:!1,reason:b.Wx.Yhb};try{for(var l=m.__values(h),p=l.next();!p.done;p=l.next()){if(i=p.value,n=(o=this.Ca.qa[i]).Jb,u=o.Ob,r=o.W,a=(s=t.qa[i]).Ob,o=s.Jb,s=s.W,this.nj.xa===i&&a!==u){if(!a)return{$:!1,reason:b.Wx.Kjb};if(u=g.T.Eb(a-o),null!==(a=this.nj.offset)&&void 0!==a&&a.greaterThan(u))return{$:!1,reason:b.Wx.lcb}}if(n!==o)return{$:!1,reason:b.Wx.xfb};if(r!==s)return{$:!1,reason:b.Wx.yfb}}}catch(t){var d={error:t}}finally{try{p&&!p.done&&(e=l.return)&&e.call(l)}finally{if(d)throw d.error}}return this.W8a(t),this.Op.start(),{$:!0,reason:b.Wx.Kib}},H.prototype.W8a=function(t){this.jL=t,this.navigator=new x.$Ia(t),this.WHb=P.QSa(this.navigator)},H.prototype.Nsa=function(t,e){this.j7a(t),t.EM.addListener("criticalNetworkError",this.f9),t.EM.addListener("temporaryNetworkError",this.rX),t.EM.addListener("updatingLastSuccessEvent",this.o9),this.$c===l.Jj.ej&&e&&this.i8a()},H.prototype.Osa=function(e){0===this.Kb.filter(function(t){return t.VV&&t.P===e}).length&&this.j7a(e)},H.prototype.j7a=function(t){t.EM.removeListener("criticalNetworkError",this.f9),t.EM.removeListener("temporaryNetworkError",this.rX),t.EM.removeListener("updatingLastSuccessEvent",this.o9)},H.prototype.uPa=function(t){var e;u.assert(t.ri,"expected branch to be normalized on addBranchToPlayer"),this.V.nN||null!==(e=this.vo)&&void 0!==e&&e.ri||this.sDb(t),this.Qf.Gaa(t.vg),this.V.Hla(t),this.B3.oxa(t,this.Ug)},H.prototype.sDb=function(t){u.assert(t.Vc,"Normalized branch should have a defined content start timestamp"),u.assert(this.vo,"AsePlaygraph should have a seek position on first branch normalization"),u.assert(!this.vo.ri,"Seek position should not already be normalized on first branch normalization"),this.vo=m.__assign(m.__assign({},this.vo),{position:{xa:t.O.id,offset:t.Vc.Qa(t.O.Mg)},ri:!0}),this.Qf.vXb(this.vo.position,t.vg.filter(function(t){return 0===t.mediaType})[0])},H.prototype.Sub=function(){var t;this.B3.reset(),this.V.oG(),this.vo=void 0,null!==(t=this.mRa)&&void 0!==t&&t.clear()},H.prototype.zyb=function(s,t,e,i,n,r,a){var u=this,o=null!==(h=null===(c=s.gb.xj)||void 0===c?void 0:c.Y)&&void 0!==h?h:s.gb.Tr.Y,c=s.jE.Y,h=this.Ni.get(s.xa)?1:s.gb.O.LA;return{identifier:s.xa,mediaType:s.mediaType,$g:s.$g,Cf:this.Cf.value,sA:t,Cs:c,Er:r,qWa:s.KM.Y,Ota:a.offset.Y,Nta:i,RX:n,LA:h,Hr:s.gb.LU.Y,d$a:Math.max(c-o,0),mD:s.mD(),Ur:s.Ur(),groupId:e,F0a:function(t,e){return t=u.c$a.Vtb(t,s.mediaType,e<1||!u.k7(s.gb)),1===e&&"global"===b.tua(t.reason)&&u.Qf.DQb(s.mediaType,u.Gh(u.Ug)),t},J0a:function(){var t,e=s.mediaType,i=u.roa.aXb(u.Cf.value,u.Ug,s.jE,u.V.playbackRate,s,0===e?u.tia:u.dB,u.HL),n=i.stream,r=i.vP,a=i.cXb,o=i.xu;return i=i.reason,n?u.Cf.value===b.Jc.ej&&s.gb&&s.gb.P.iH&&!s.gb.P.KW&&!u.V.Oo(s.gb.P.W)&&s.jE.Y-u.Ug.Y>u.config.gra?{Gn:!1,reason:"maxBufferingCompleteBufferInMs"}:(i=1,null!==(t=s.gb)&&void 0!==t&&t.vg.every(function(t){return 0===t.mediaType})&&(i=0),u.Qf.pg&&e===i&&u.Qf.IXb(s.kl.gP,n.bitrate,a),u.kP(r),t=null===(r=s.gb.Rq)||void 0===r?void 0:r.Y,(r=s.vab(n,o)).Gn&&(u.Xfa&&(u.am("firstDriveStreaming"),u.Xfa=!1),0<u.JC&&(n=null===(o=s.gb.Rq)||void 0===o?void 0:o.Y,t&&n&&(u.JC-=t-n,u.JC<=0&&u.i8a()))),r):{Gn:!1,reason:i||"selectLocationsAndStream"}}}},H.prototype.kP=function(t){var i=this;t.forEach(function(t){t.P.BXb(t,function(){var t,e;return u.assert(i.oN,"Speculative header callback after streaming is cancelled"),e=(t=i.Ug.Y)+i.config.TW,{$g:[],Cf:i.Qf.state.value,sA:e,Cs:e,Er:t}})})},H.prototype.i8a=function(){var t=this;this.Op.Uaa(q.OE.Bx,function(){return t.Op.start()})},H.prototype.d$=function(){var n,t,e,i,r=this;this.$c===l.Jj.ej&&(n=this.nj,t=this.navigator.ue(n.xa),e=this.Kb.JHb(),i=this.pEb(n.xa).map(function(t){return t.O.id}),e=(t=h.d$(this.console,this.WHb,t,e,this.Ni,i,g.T.Eb(this.config.Xsb),this.config.Ora,g.T.Eb(this.config.Mia))).A7a,this.JC=t.JC||0,this.Kb.Y0b(e,function(t,e){var i=r.navigator.ue(t);return t=t===n.xa?i.Mg.add(n.offset):i.Mg,r.C0b(i,t,e)}).MO.forEach(function(t){t.Df(),r.Ni.clear(t.O.id),r.V.yZa(t)||r.Op.Uaa(q.OE.Bx,function(){return r.Gga(t.O.id)})}),this.X6a(),this.ZRa(),this.Op.Uaa(q.OE.Bx,function(){r.Pk("reevaluateBranches"),r.Op.RW(q.OE.PR)}))},H.prototype.pEb=function(e){var i=!1;return this.V.Kb.filter(function(t){return t.O.id===e&&(i=!0),i})},H.prototype.RHb=function(){return r.wQa(this.Kb.filter(function(t){return t.VV}).map(function(t){return t.P}))},H.prototype.X6a=function(){var t;if(this.$c===l.Jj.ej&&(this.V.wH||null!=(t=m.__read(this.Kb.rz(this.x$.xa),1)[0])&&t.ri&&this.uPa(t),this.V.wH))for(;(t=this.Cna(this.V.wH.O))&&(null!=(t=m.__read(this.Kb.rz(t),1)[0])&&t.ri)&&!this.V.yZa(t);)this.uPa(t)},H.prototype.Cna=function(t){var e=this.Ni.get(t.id);return void 0!==e?e:1===(t=this.navigator.hFb(t)).length?t[0].id:void 0},H.prototype.ZRa=function(){var t=0!==this.kEb();t||this.Z$?t&&this.Z$&&(this.Z$=!1):(this.Qf.pg&&(t=this.Gh(this.Ug),this.Qf.Pe("complete",t.zZ,t.AZ)),this.Xnb(),this.Z$=!0)},H.prototype.kEb=function(){return this.Kb.filter(function(t){return!t.wl}).length},H.prototype.qr=function(t){this.k7(t)&&this.Qf.zja(this.Ug,this.V.playbackRate,t,{yja:this.roa.yja.bind(this.roa,this.c$a)})},H.prototype.tQb=function(t,e){var i,n=this;e.didNormalizeSegment&&(i=C.oKa.QHb(t),u.assert(i,"Segment should be normalized"),Promise.resolve().then(function(){return n.events.emit("segmentNormalized",{type:"segmentNormalized",segmentId:t.O.id,normalizedStart:e.segmentContentStart,normalizedEnd:e.branchContentEnd,viewableContentEnd:i.y2b,viewableEarliestContentEnd:i.A2b})})),Promise.resolve().then(function(){n.X6a()}),this.Pk("branchNormalized")},H.prototype.uQb=function(){this.ZRa()},H.prototype.sQb=function(){this.Op.start()},H.prototype.C0b=function(t,e,i){var n,r=this;if(this.Oub(t,e))throw Error("Not implemented");return n=new a.Gza(t.W,this.IOa,function(t,e,i){r.state!==l.Jj.CLOSED&&(r.Nsa(e,i),r.Op.Uaa(q.OE.PR,function(){r.o2(t.O.id,e,t.jg)}))},this.Osa.bind(this)),(t=new o.Cza(this.config,this.console,this.events,t,this.C$,e,null!==(e=null===(e=null===(e=this.vo)||void 0===e?void 0:e.MSb)||void 0===e?void 0:e.Qa(this.m8a))&&void 0!==e?e:g.T.Gb,function(){return r.Ug.Y},i,this.Cf,this.Cu,n)).events.on("needsRequest",this.Pk.bind(this,"branchNeedsHeader")),t.events.on("branchNormalized",this.tQb.bind(this,t)),t.events.on("lastRequestIssued",this.sQb.bind(this,t)),t.events.on("branchStreamingComplete",this.uQb.bind(this,t)),t.events.on("checkBufferingProgress",this.qr.bind(this,t)),void 0===i&&(this.am("createDlTracksStart"),t.events.once("requestQueuesCreated",function(){r.am("createDlTracksEnd")})),t.xb(),t},H.prototype.IGb=function(t){if(this.V.vm)return this.V.si.eb(t)},H.prototype.C$=function(n){return[[0,this.wia,"audio_tracks"],[1,this.jya,"video_tracks"]].map(function(t){var e=m.__read(t,3),i=e[1];if(t=e[2],u.assert(i,"Expected mediaType "+e[0]+" track selector to be defined"),void 0!==(e=i.us(n.oa,n.oa[t])))return n.getTrackById(n.oa[t][e].NP)}).filter(r.Z8)},H.prototype.o2=function(t,e,i){t={type:"segmentStarting",segmentId:t,contentOffset:i.Y,maxBitrates:{audio:e.Gw[0],video:e.Gw[1]}},this.events.emit(t.type,t)},H.prototype.Gga=function(t){t={type:"segmentAborted",segmentId:t},this.events.emit(t.type,t)},H.prototype.Xnb=function(){var t={type:"streamerEnd",time:d.default.time.ea()};this.events.emit(t.type,t)},H.prototype.am=function(t){t={type:"startEvent",event:t,time:d.default.time.ea()},this.events.emit(t.type,t)},m.__decorate([m.__param(0,i.XHb())],H.prototype,"ZD",null),m.__decorate([T.bc({methodName:"getStreamables",pm:!0})],H.prototype,"hN",null),e.w_=H},function(t,e,i){var c,m,g;function h(t,e,i,n,r){var a;return i=null!==(a=e.ie)&&void 0!==a?a:e.track.yn(t,i.Y,void 0,r),t=null!==(r=e.Hf)&&void 0!==r?r:e.track.nz(t,null==n?void 0:n.Y,e.ah),[!e.ri(),i,t]}function r(t,e){for(var i,n,r=[],a=0,o=t[a],s=null==o?void 0:o[0],u=null==o?void 0:o[1],c=e.Hf.index,h=e.track.gp,f=0,l=e.ie.Vc,p=e.ie.Pd.Y>o[0],d=p,b=e.ie.index;b<=c;++b)i=!1,o&&(n=h.get(b),p&&(n.Vc.Y>=u?(p=!1,u=++a>=t.length?s=o=void 0:(s=null==(o=t[a])?void 0:o[0],null==o?void 0:o[1])):d?d=!1:(r.push(new m.c1(f,l,n.Vc)),l=n.Vc,i=!0)),!p&&o&&n.Pd.Y>s&&(p=!0,i=n.Vc,(n=e.track.uN.Wk(b).jWa(s))&&0!==n.il&&(i=g.T.Eb(n.Ed)),r.push(new m.c1(f,l,i)),l=i,i=!0)),i&&++f;return r.push(new m.c1(f,l,e.Hf.Pd)),r}_esm(e),e.DNb=e.k2a=e.R3a=e.P3a=e.Pua=void 0,c=i(2),m=i(409),g=i(9),e.Pua=function(t,e,i){var n=e.get(0);return e=null==(e=e.get(1))?void 0:e.track.nz(t,null==i?void 0:i.Y,e.ah),[null==n?void 0:n.track.nz(t,null!==(t=null===(t=null==e?void 0:e.Pd)||void 0===t?void 0:t.Y)&&void 0!==t?t:null==i?void 0:i.Y,n.ah),e]},e.P3a=function(t,e,i,n,r){var a,o,s,u=e.get(0);return e=e.get(1),o=(a=c.__read(e?h(t,e,i,n,r):[!1],3))[0],s=a[1],a=a[2],t=(n=c.__read(u?h(t,u,o&&void 0!==(null==s?void 0:s.Z)?g.T.Eb(s.Z):i,void 0!==(null==a?void 0:a.Ha)?g.T.Eb(null==a?void 0:a.Ha):n,r):[!1],3))[0],i=n[1],n=n[2],t&&null!=u&&u.e7(i,n),o&&null!=e&&e.e7(s,a),[t,o]},e.R3a=function(t,e,i){return e.track.yn(t,i.Y,void 0,!0).Vc},e.k2a=function(t,e,i){var n=e.O;return n.hq&&0!==n.hq.length?r(n.hq.map(function(t){return[n.Jb+t[0],n.Jb+t[1]]}),i.TX):[]},e.DNb=r},function(t,e,i){var r,a;function n(t){return"immediate"===t}function o(t,e,i){this.region=t,this.Vc=e,this.Pd=i}function s(t,e,i){var n=this;this.id=t,this.O=e,this.eOa=!1,this.kN=function(t){var e;return null!==(e=n.Zw)&&void 0!==e&&e.length?"immediate":null!==(t=null===(t=null===(e=n.O.next)||void 0===e?void 0:e[t])||void 0===t?void 0:t.ae)&&void 0!==t?t:n.ae},this.iT=new r.T(e.Jb,1e3),this.xS=void 0!==e.Ob&&null!==e.Ob?new r.T(e.Ob,1e3):r.T.fD,this.Ipb=null!==(e=e.ae)&&void 0!==e?e:i,this.M_a(),a.assert(this.iT.lessThan(this.xS),"PlaygraphSegment: Invalid timestamps (endTimestamp <= startTimestamp)")}_esm(e),e.eJa=e.c1=e.e0a=void 0,r=i(9),a=i(5),e.e0a=n,o.prototype.toJSON=function(){return{region:this.region,Z:this.Vc.hI,Ha:this.Pd.hI}},t=o,e.c1=t,Object.defineProperties(s.prototype,{W:{get:function(){return this.O.W},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{cs:{get:function(){return this.eOa},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Mg:{get:function(){return this.iT},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Uk:{get:function(){return this.xS},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{duration:{get:function(){return this.xS.Qa(this.iT)},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Z:{get:function(){return this.iT.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Ha:{get:function(){return this.xS.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{QD:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{bv:{get:function(){return!this.oA.length||!this.O.Qe&&0===this.eO.length},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{xPb:{get:function(){return this.UB},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{oA:{get:function(){var t;return Object.keys(null!==(t=null===(t=this.O)||void 0===t?void 0:t.next)&&void 0!==t?t:{})},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{eO:{get:function(){var e=this;return this.oA.filter(function(t){return!!e.UB[t]})},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Vwa:{get:function(){var t;return null!==(t=this.$Oa)&&void 0!==t?t:this.$Oa=this.Otb()},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{aaa:{get:function(){var t;return null!==(t=this.aPa)&&void 0!==t?t:this.aPa=this.Ptb()},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{LA:{get:function(){return this.O.weight?this.O.weight/(this.O.weight+this.aaa):1},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{ae:{get:function(){var t;return null!==(t=this.Zw)&&void 0!==t&&t.length?"immediate":this.Ipb},enumerable:!1,configurable:!0}}),s.prototype.normalize=function(t,e,i){this.iT=t,this.xS=e,this.Zw=i,this.eOa=!0,this.Ubb()},s.prototype.vXa=function(){var t;return this.eO.length&&null!==(t=this.eO.map(this.kN).reduce(function(t,e){return t===e?e:void 0}))&&void 0!==t?t:this.ae},s.prototype.Ai=function(t){this.M_a(t)},s.prototype.Etb=function(t){var e,i;return this.Vwa?(e=(this.UB[t]||0)/this.Vwa,void 0===this.O.weight||0===this.aaa?{Ue:e}:1!==(i=this.LA)&&n(this.kN(t))&&this.UB[t]?{Ue:i*e,dD:this.UB[t]/this.aaa*(1-i)}:{Ue:i*e}):{Ue:null!==(e=this.O.next)&&void 0!==e&&e[t]?1/this.oA.length:0}},s.prototype.AIb=function(t){return-1<this.oA.indexOf(t)},s.prototype.M_a=function(n){var r;void 0===this.O.next?this.UB={}:(r=this.O.next,this.UB=Object.keys(r).reduce(function(t,e){var i=n?n[e]||0:r[e].weight;return null!=i&&0<=i&&(t[e]=i),t},{})),this.Ubb()},s.prototype.Otb=function(){var i=this;return this.eO.reduce(function(t,e){return t+i.UB[e]},0)},s.prototype.Ptb=function(){var i=this;return this.eO.filter(function(t){return n(i.kN(t))}).reduce(function(t,e){return t+i.UB[e]},0)},s.prototype.Ubb=function(){this.aPa=this.$Oa=void 0},t=s,e.eJa=t},function(t,s,e){var u,i,c;function n(t){this.Fa=t}_esm(s),s.aXa=s.GYa=s.Vma=s.RJa=void 0,u=e(2),i=e(20),c=e(54),Object.defineProperties(n.prototype,{mj:{get:function(){return"queue-audit"},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{ED:{get:function(){return"qaudit"},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{enabled:{get:function(){return i.ga},enumerable:!1,configurable:!0}}),n.prototype.Ho=function(t){var e,i,n;if(t=t.Qi,(t===c.de.$p||t===c.de.Zn)&&(t=this.Fa.Sma())){i={};try{for(var r=u.__values(t.HSb),a=r.next();!a.done;a=r.next())i[(n=a.value).mediaType]=this.wNb(n)}catch(t){var o={error:t}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return{branchQueue:s.aXa(t.sUb),playerIterator:i,driftStats:this.Fa.pya}}},n.prototype.wNb=function(t){return null==t?void 0:t.aYa()},s.RJa=n,s.Vma=function(t){var e,i;return t&&(e=t.O,i={},t.lq().forEach(function(t){i[t.mediaType]=s.GYa(t)}),{sId:null==e?void 0:e.id,cancelled:t.Eh,RM:i})},s.GYa=function(t){if(t&&t.Pa)return u.__assign(u.__assign({},t.Pa.Kna()),{unsentRequests:t.Pa.Hs,lastFragmentContentEndPts:null===(t=t.Hf)||void 0===t?void 0:t.Lc})},s.aXa=function(t){return t.map(function(t){return s.Vma(t)})}},function(t,e){var i,n,r;function a(t){return void 0!==(null==t?void 0:t.pMa)}function o(t){return(a(t)?t:Object.defineProperties(t,{pMa:{value:{},configurable:!1,enumerable:!1}})).pMa}function s(){this.id=r=(r+1)%n}_esm(e),e.rea=void 0,n=null!==(i=Number.MAX_SAFE_INTEGER)&&void 0!==i?i:1e9,r=Date.now()%n,s.prototype.get=function(t){return a(t)?o(t)[this.id]:void 0},s.prototype.set=function(t,e){return o(t)[this.id]=e,this},s.prototype.has=function(t){return a(t)&&void 0!==o(t)[this.id]},s.prototype.delete=function(t){return!!this.has(t)&&!(o(t)[this.id]=void 0)},e.rea=s},function(t,e){function i(){this[0]=0,this[1]=0}_esm(e),e.wR=void 0,Object.defineProperties(i.prototype,{total:{get:function(){return this[0]+this[1]},enumerable:!1,configurable:!0}}),i.prototype.add=function(t){this[0]+=Math.max(t[0]||0,0),this[1]+=Math.max(t[1]||0,0)},i.prototype.Kha=function(t,e){this[t]+=Math.max(e||0,0)},e.wR=i},function(t,e,i){var n,r;_esm(e),e.yta=void 0,t=i(926),n=i(254),r=i(414),i=i(931),n=n.Z7a(),t=t.zRa()({i2a:"combinedPlaygraph",$7a:{XHb:n()({xNb:function(t,e,i){return e===r.A0.V0b?i.Jla.Iab(t):i.Jla.DAb(t)},lLb:i.o0a})}}),e.yta=t},function(t,e){_esm(e),e.A0=void 0,(t=e.A0||(e.A0={}))[t.V0b=0]="up",t[t.CAb=1]="down"},function(t,e,i){var n,r,a,o;_esm(e),e.EV=void 0,n=i(2),r=i(941),a=n.__importDefault(i(6)),e.EV=function(t){var e=new a.default.Console("ASEJS","media|asejs");return o=o||new r.nJa(function(){return function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.resolve().then(function(){return n.__importStar(i(251))})];case 1:return[2,(0,t.bd().bH)()]}})})}()},t,e)}},function(t){t.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},function(t,e,i){var n,r,a,o,s,u;e=i(59),n=i(418),r=i(967),a=i(416),o=i(257),s=i(972),u=i(421),i=e(n(["filter"],s,function(i,n){return a(n)?o(function(t,e){return i(n[e])&&(t[e]=n[e]),t},{},u(n)):r(i,n)})),t.exports=i},function(t,e,i){var o=i(419),s=i(966);t.exports=function(n,r,a){return function(){var t,e;if(0===arguments.length)return a();if(e=(t=Array.prototype.slice.call(arguments,0)).pop(),!o(e)){for(var i=0;i<n.length;){if("function"==typeof e[n[i]])return e[n[i]].apply(e,t);i+=1}if(s(e))return r.apply(null,t)(e)}return a.apply(this,arguments)}}},function(t){t.exports=Array.isArray||function(t){return null!=t&&0<=t.length&&"[object Array]"===Object.prototype.toString.call(t)}},function(t){t.exports={xb:function(){return this.e_["@@transducer/init"]()},result:function(t){return this.e_["@@transducer/result"](t)}}},function(t,e,i){var a,o,s,u,c;e=i(130),a=i(256),o=i(973),s=!{toString:null}.propertyIsEnumerable("toString"),u="constructor valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),c=function(){return arguments.propertyIsEnumerable("length")}(),i=e("function"!=typeof Object.keys||c?function(t){var e,i,n,r;if(Object(t)!==t)return[];for(n in e=[],i=c&&o(t),t)!a(n,t)||i&&"length"===n||(e[e.length]=n);if(s)for(i=u.length-1;0<=i;){if(n=u[i],r=a(n,t)){t:{for(r=0;r<e.length;){if(e[r]===n){r=!0;break t}r+=1}r=!1}r=!r}r&&(e[e.length]=n),--i}return e}:function(t){return Object(t)!==t?[]:Object.keys(t)}),t.exports=i},function(t){t.exports=function(t,e){for(var i=0,n=e.length,r=Array(n);i<n;)r[i]=t(e[i]),i+=1;return r}},function(t,e,i){var n,r=i(258),a=i(130);e=i(59),n=i(976),i=e(function(t,e){return 1===t?a(e):r(t,n(t,[],e))}),t.exports=i},function(t,e){_esm(e),e.dDa="HLSPlaylistBuilderSymbol"},function(t,e){_esm(e),e.OIa="PlayerPlaydataMonitorSymbol"},function(t,e){_esm(e),e.Jea="StreamChangeDetectorSymbol"},function(t,e){_esm(e),e.qR="HLSLogblobMonitorFactorySymbol"},function(t,e){_esm(e),e.rDa="HeaderFetcherSymbol"},function(t,e){_esm(e),e.BDa="HttpDispatcherSymbol"},function(t,e){_esm(e),e.vDa="HLSHeaderParserFactorySymbol"},function(t){var e,e=((e=new Uint32Array([0,0])).set(new Uint32Array([16843009]),1),0!==e[0]?function(t,e,i){new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),i*t.byteLength/t.length)}:function(t,e,i){t.set(e,i)});t.exports={from:function(t,e,i,n){t=new t(e.length);for(var r="function"==typeof i,a=0;a<e.length;++a)t[a]=r?i.call(n,e[a],a,e):e[a];return t},set:e}},function(t,e,i){var n,r,a,o;function s(){var t=null!==r&&r.apply(this,arguments)||this;return t.qz=1536,t}function u(){return null!==a&&a.apply(this,arguments)||this}function c(){return null!==o&&o.apply(this,arguments)||this}_esm(e),n=i(23),r=i(179).default,n.__extends(s,r),s.Na=!0,t=s,e.default=t,a=t,n.__extends(u,a),u.Xb="ac-3",i=u,e.cba=i,o=t,n.__extends(c,o),c.Xb="ec-3",t=c,e.hca=t},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),r=i(104),t=i(33),i=r.YE,a=t.Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.fileSize=this.u.Td(),this.S=this.u.Td(),this.duration=this.u.Td(!1,!0),this.wsa=this.u.Td(),this.u.Td(),this.Asa=this.u.Td(),this.csa=this.u.ya(),this.xsa=this.u.Td(),this.vma=this.u.ya(),this.u.EA(),this.Te={moof:{offset:this.wsa},sidx:{offset:this.xsa,size:this.vma}},this.Te[r.zR]={offset:this.Asa,size:this.csa},this.u.offset-this.startOffset<=this.length-24&&(this.zsa=this.u.Td(),this.Wra=this.u.ya(),this.ysa=this.u.Td(),this.Ura=this.u.ya(),this.Te[r.Nx]={offset:this.zsa,size:this.Wra},this.Te[r.Mx]={offset:this.ysa,size:this.Ura}),!0},o.Xb=i,o.Na=!1,t=o,e.default=t},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),t=i(104),i=i(33),t=t.ZE,r=i.Dc,n.__extends(a,r),a.prototype.parse=function(){var t,e,i;this.Ac(),1<=this.version&&this.u.EA(),t=this.u.ya(),this.Te={};for(var n=this.startOffset+this.length,r=0;r<t;++r)"uuid"===(e=this.u.Ml())&&(e=this.u.EA()),i=this.u.Td(),this.Te[e]={offset:n,size:i},n+=i;return!0},a.Xb=t,a.Na=!1,i=a,e.default=i},function(t){var e={name:"heaac-2-dash reset sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Ck:new Uint8Array([33,17,69,0,20,80,1,70,157,188,0,0,8,28,0,0,0,14]).buffer},i={name:"heaac-2-dase standard sample",profile:53,channels:2,sampleRate:24e3,duration:1024,Ck:new Uint8Array([33,17,69,0,20,80,1,70,240,77,251,1,60,8,64,0,0,0,0,0,0,0,0,0,7,14,0,14]).buffer},n={name:"ddplus-5.1-dash standard sample",profile:54,channels:6,sampleRate:48e3,duration:1536,Ck:new Uint8Array([11,119,1,127,63,134,255,225,6,32,0,32,0,66,10,65,0,135,216,68,3,254,202,2,88,163,1,16,177,64,146,32,160,75,20,80,37,136,35,227,36,160,152,156,165,37,38,41,37,73,74,9,201,146,130,114,82,116,160,152,152,150,136,58,125,89,245,39,207,159,63,116,150,147,242,73,95,165,171,175,253,215,126,82,21,55,188,8,165,126,249,242,100,175,255,249,73,42,255,253,215,124,246,156,23,239,108,36,134,249,211,228,181,255,246,253,205,119,176,179,86,126,166,27,231,175,225,58,255,222,170,110,127,249,215,41,232,146,73,183,0,88,211,192,0,0,31,7,178,116,62,122,114,245,8,233,196,71,223,196,18,59,202,113,248,103,242,80,250,118,15,1,60,79,251,46,14,8,9,37,4,14,183,67,131,195,103,241,250,32,124,81,61,76,9,40,161,2,1,16,64,114,219,225,217,172,140,44,12,64,147,49,210,195,206,12,52,186,196,0,107,134,202,4,9,216,72,67,11,127,185,13,125,124,124,194,90,203,69,1,209,8,129,183,36,196,101,7,248,73,181,38,181,30,232,124,27,18,222,207,92,251,85,227,78,0,70,196,59,0,207,194,0,252,226,209,111,144,239,111,148,54,39,28,176,248,160,58,88,113,9,76,65,57,180,96,82,224,115,52,208,161,184,86,120,211,212,168,13,52,217,124,121,189,237,163,53,72,52,157,245,160,110,16,182,219,180,152,180,136,47,23,151,198,192,20,62,220,249,107,82,0,0,0,234,22,24,202,252,104,154,198,95,7,98,110,113,104,187,197,110,105,201,123,18,61,45,233,135,20,0,151,155,45,131,75,174,9,228,53,214,32,19,131,131,87,146,156,22,16,160,0,0,5,169,31,241,155,119,242,21,168,176,225,35,130,186,60,97,189,244,57,5,158,124,200,224,156,74,33,48,12,75,235,252,25,83,61,12,178,134,75,92,124,56,71,63,232,35,142,23,11,179,154,25,17,254,160,55,0,28,144,253,91,117,102,221,190,135,231,10,70,30,23,176,0,0,1,176,4,8,133,150,0,255,79,159,83,83,77,46,180,197,95,161,141,13,44,47,253,61,176,86,148,52,201,148,194,126,246,155,165,78,181,18,73,32,28,45,70,221,101,80,78,20,6,206,130,30,219,0,30,251,237,127,232,113,255,107,248,25,147,2,185,140,224,224,189,152,101,89,28,152,47,182,88,216,198,90,3,213,0,64,150,89,96,5,18,73,32,18,105,56,170,112,129,132,77,233,15,190,8,58,109,254,217,232,164,181,91,34,227,8,27,140,83,141,186,71,175,110,91,83,37,82,15,247,58,112,134,42,42,18,3,0,8,18,196,44,5,18,73,32,25,234,135,27,145,161,76,95,163,44,124,140,151,13,189,174,93,108,80,63,112,61,88,28,46,219,213,65,40,74,243,69,108,141,37,80,21,72,191,2,50,88,122,3,0,0,10,36,146,64,54,170,52,196,80,163,79,142,148,81,36,46,131,66,255,221,26,128,73,23,103,49,192,55,30,59,219,161,166,249,122,141,88,62,36,228,107,116,158,14,252,92,103,226,0,0,20,73,36,128,113,105,27,109,199,165,26,100,240,30,8,113,124,175,175,166,144,115,74,138,80,24,32,117,28,206,194,21,85,40,218,254,177,100,37,127,63,131,208,68,250,76,169,40,0,0,0,0,0,0,0,95,208,40,5]).buffer},r={name:"ddplus-2.0-dash standard sample",profile:57,channels:2,sampleRate:48e3,duration:1536,Ck:new Uint8Array([11,119,0,191,52,134,255,224,4,32,24,132,33,46,136,15,236,128,165,150,32,161,69,16,65,66,33,0,160,224,136,32,48,40,56,176,233,159,62,203,176,139,218,213,221,58,124,249,83,239,245,26,179,232,106,97,174,75,74,149,104,85,223,38,74,253,242,95,253,47,117,10,116,228,206,145,61,126,153,83,169,201,146,214,124,251,202,125,62,3,184,113,105,44,145,91,107,58,206,87,7,170,74,27,187,48,217,65,241,1,161,157,113,91,21,163,111,51,104,115,118,123,44,77,110,247,112,43,8,73,76,172,73,150,207,95,153,3,182,105,124,66,2,0,118,237,94,135,88,83,124,41,205,76,76,109,131,40,166,169,150,166,233,51,26,43,143,131,162,201,227,35,146,30,46,75,41,1,28,21,124,91,11,74,112,106,170,137,88,102,81,122,90,108,154,41,64,72,81,74,40,176,29,246,45,81,141,178,47,68,210,113,129,217,48,217,176,77,157,147,211,28,106,174,210,66,110,190,228,106,249,236,107,188,90,91,41,31,191,71,149,201,40,136,209,138,100,91,53,25,18,245,27,148,208,18,20,81,70,24,7,147,116,48,233,47,145,81,32,242,74,51,50,138,85,186,6,202,227,8,169,201,206,77,68,201,80,186,57,179,90,232,234,208,230,109,96,154,4,249,38,86,153,185,81,45,38,146,243,73,117,105,140,5,34,48,227,11,10,32,130,14,49,4,40,131,127,229,199,232,95,78,126,229,243,175,254,117,124,233,83,154,239,93,63,195,190,120,247,107,232,10,68,177,11,22,24,32,66,4,99,231,207,159,7,124,241,174,215,192,0,0,0,0,0,0,0,0,0,0,84,40,187,227]).buffer};t.exports={standard:{"heaac-2-dash":i,"heaac-2hq-dash":i,"ddplus-5.1-dash":n,"ddplus-5.1hq-dash":n,"ddplus-2.0-dash":r},reset:{"heaac-2-dash":e,"heaac-2hq-dash":e},"heaac-2-dash":e,"heaac-2-dash-alt":i,"ddplus-5.1-dash":n,"ddplus-2.0-dash":r}},function(t,e,i){var n,r,s,a;function o(t,e,i,n,r){return(i=a.call(this,i,n,r)||this).Kia=t,i.Pq=e,i.Ua={},i}_esm(e),n=i(23),r=i(33),s=i(88),a=i(1008).Yea,n.__extends(o,a),o.prototype.parse=function(t){var e,i,n,r,a,o;for(this.offset=0,e=[],t=t||{};this.offset<this.view.byteLength&&!(this.view.byteLength-this.offset<8);){if(i=this.offset,0===(n=this.ya()))return{done:!1,offset:this.offset,error:"Invalid zero-length box"};if(null===(r=s.ko(this.ya())))return{done:!1,offset:this.offset,error:"Invalid box type"};if("uuid"===r){if(this.view.byteLength-this.offset<16)break;r=this.EA()}if(0===e.length&&this.Pq.kV(r,i,n))break;if(i+n>this.view.byteLength)break;if(o=void 0,a=this.Kia[r]){if(o=new a(this,r,i,n,e[0]),(e[0]||this).tt(o),!o.parse(t))return{done:!1,offset:this.offset,error:"parse error in "+r+" box"};this.config.bI&&a.Na?e.unshift(o):this.offset=i+n}else this.offset=i+n;for(;e.length&&this.offset>e[0].byteOffset+e[0].Qn-8;){if(!(o=e.shift()).Qt(t))return{done:!1,offset:this.offset,error:"finalize error in "+o.type+" box"};this.offset=o.byteOffset+o.Qn}if(0===e.length&&this.Pq.GU(r,i,n,o))break}return!this.Pq.done&&0<(t=this.Pq.endOffset?this.Pq.endOffset-this.view.byteLength:4096)?{done:!1,offset:this.offset,cX:t}:{done:!0,offset:Math.min(this.Pq.endOffset||1/0,this.offset)}},o.prototype.tt=function(t){r.Dc.tt(this,t)},e.zE=o},function(t,e,i){var a;function o(t,e){-1!==(t=e.indexOf(t))&&e.splice(t,1)}function n(t){this.endOffset=t,this.done=!1}function r(t,e,i,n){void 0===e&&(e=[]),void 0===i&&(i=[]),void 0===n&&(n=!1),this.Oh=t,this.dz=e,this.oZ=i,this.AX=n,this.done=!1,this.Te={}}_esm(e),a=i(104),n.prototype.kV=function(){return this.done},n.prototype.GU=function(t,e,i){return this.done=e+i>=this.endOffset},t=n,e.DQ=t,r.prototype.kV=function(t,e,i){if(-1!==r.Boa.indexOf(t)&&(this.Te[t]={offset:e,size:i}),-1!==this.oZ.indexOf(t)){if(this.Te[t]={offset:e,size:i},!this.AX)return this.endOffset=e,this.done=!0;this.endOffset=e+i}else this.Oh&&-1!==this.Oh.indexOf(t)?(t=1<this.Oh.length?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0)):-1!==this.dz.indexOf(t)&&(t=this.Oh?4096:0,this.endOffset=Math.max(e+i+t,this.endOffset||0));return this.done},r.prototype.GU=function(t,e,i,n){var r=this;return-1!==this.oZ.indexOf(t)?this.done=!0:(t===a.YE&&this.MY(n.Te),t===a.ZE&&this.MY(n.Te),this.Oh&&o(t,this.Oh),o(t,this.dz),this.Oh&&0===this.Oh.length&&!this.dz.some(function(t){return r.Te[t]})?this.done=!0:this.done)},r.prototype.MY=function(t){var i=this;this.Te=t,this.endOffset=(this.Oh||[]).concat(this.dz).reduce(function(t,e){return i.Te[e]?(e=i.Te[e],Math.max(e.offset+(e.size||4096),t)):t},this.endOffset||0)},r.Boa=["moov","sidx"],t=r,e.Dca=t},function(t,e){_esm(e),e.fDa="HLSPlaylistTransformerSymbol"},function(t,e){_esm(e),e.pAa="CdnPartitionerSymbol"},function(t,e,i){var n,r;function a(){}_esm(e),e.eca=void 0,n=i(44),r=i(110),a.Up=function(){var t={};return t[n.N.QJ]="avc1.4D401E",t[n.N.FE]="avc1.4D401F",t[n.N.tca]="avc1.4D4028",t[n.N.Rfb]="hev1.2.6.L90.B0",t[n.N.Sfb]="hev1.2.6.L93.B0",t[n.N.Tfb]="hev1.2.6.L120.B0",t[n.N.Ufb]="hev1.2.6.L123.B0",t[n.N.i0]="hev1.2.6.L90.B0",t[n.N.k0]="hev1.2.6.L93.B0",t[n.N.m0]="hev1.2.6.L120.B0",t[n.N.o0]="hev1.2.6.L123.B0",t[n.N.ZQ]="hev1.2.6.L150.B0",t[n.N.aR]="hev1.2.6.L153.B0",t[n.N.j0]="hev1.2.6.L90.B0",t[n.N.l0]="hev1.2.6.L93.B0",t[n.N.n0]="hev1.2.6.L120.B0",t[n.N.p0]="hev1.2.6.L123.B0",t[n.N.$Q]="hev1.2.6.L150.B0",t[n.N.bR]="hev1.2.6.L153.B0",t[n.N.VCa]="hev1.2.6.L90.B0",t[n.N.WCa]="hev1.2.6.L93.B0",t[n.N.XCa]="hev1.2.6.L120.B0",t[n.N.YCa]="hev1.2.6.L123.B0",t[n.N.ZCa]="hev1.2.6.L150.B0",t[n.N.$Ca]="hev1.2.6.L153.B0",t[n.N.OQ]="hev1.2.6.L90.B0",t[n.N.QQ]="hev1.2.6.L93.B0",t[n.N.SJ]="hev1.2.6.L120.B0",t[n.N.TQ]="hev1.2.6.L123.B0",t[n.N.VQ]="hev1.2.6.L150.B0",t[n.N.XQ]="hev1.2.6.L153.B0",t[n.N.PQ]="hev1.2.6.L90.B0",t[n.N.RQ]="hev1.2.6.L93.B0",t[n.N.SQ]="hev1.2.6.L120.B0",t[n.N.UQ]="hev1.2.6.L123.B0",t[n.N.WQ]="hev1.2.6.L150.B0",t[n.N.YQ]="hev1.2.6.L153.B0",t[n.N.J_]=r.Gd.I_,t[n.N.L_]=r.Gd.Wba,t[n.N.AQ]=r.Gd.Xba,t[n.N.O_]=r.Gd.Yba,t[n.N.Q_]=r.Gd.Zba,t[n.N.S_]=r.Gd.$ba,t[n.N.K_]=r.Gd.I_,t[n.N.M_]=r.Gd.Wba,t[n.N.N_]=r.Gd.Xba,t[n.N.P_]=r.Gd.Yba,t[n.N.R_]=r.Gd.Zba,t[n.N.T_]=r.Gd.$ba,t[n.N.TCa]="avc1.640016",t[n.N.LQ]="avc1.64001E",t[n.N.MQ]="avc1.64001F",t[n.N.sca]="avc1.640028",t[n.N.s1]=r.Gd.aS,t[n.N.qK]=r.Gd.aS,t[n.N.rK]=r.Gd.aS,t[n.N.bS]=r.Gd.aS,t[n.N.Aya]=r.Gd.Hj,t[n.N.Bya]=r.Gd.Hj,t[n.N.l_]=r.Gd.Hj,t[n.N.m_]=r.Gd.Hj,t[n.N.n_]=r.Gd.Hj,t[n.N.o_]=r.Gd.Hj,t[n.N.p_]=r.Gd.Hj,t[n.N.q_]=r.Gd.Hj,t},e.eca=a},function(t,e,i){var n;function r(){}_esm(e),e.dca=void 0,n=i(44),r.Up=function(){var t={};return t[n.ze.GE]="mp4a.40.2",t[n.ze.aDa]="mp4a.40.2",t[n.ze.HE]="mp4a.40.2",t[n.ze.tF]="mp4a.40.42",t[n.ze.xQ]="ec-3",t[n.ze.Rba]="ec-3",t[n.ze.yQ]="ec-3",t},e.dca=r},function(t,e){_esm(e),e.O5b="LogblobBuilderSymbol",e.nR="HLSLogblobBuilderFactorySymbol"},function(t,e){_esm(e),e.jLa="ThroughputTrackerConfigSymbol"},function(t,e){_esm(e),e.mLa="ThroughputTrackerSymbol",e.kLa="ThroughputTrackerFactorySymbol"},function(t,e){_esm(e),e.xCa="ExtraPlatformInfoProviderSymbol"},function(t,e){_esm(e),e.iAa="CapabilityDetectorFactorySymbol"},function(t,e){_esm(e),e.lza={"playready-oggvorbis-2-piff":"OGG_VORBIS","playready-oggvorbis-2-dash":"OGG_VORBIS","heaac-2-piff":"AAC","heaac-2-dash":"AAC","heaac-2hq-dash":"AAC","heaac-5.1-dash":"AAC","playready-heaac-2-dash":"AAC","heaac-2-elem":"AAC","heaac-2-m2ts":"AAC","xheaac-dash":"XHEAAC","ddplus-5.1-piff":"DDPLUS","ddplus-2.0-dash":"DDPLUS","ddplus-5.1-dash":"DDPLUS","ddplus-atmos-dash":"DDPLUS","dd-5.1-elem":"DD","dd-5.1-m2ts":"DD"}},function(t,e,i){var r,n,a;function o(t,e,i,n){this.config=t,this.sj=e,this.mediaType=i,this.Iw=n,this.Ara={},this.Ara[r.Pj.Audio]="audio",this.Ara[r.Pj.VLa]="video"}_esm(e),e.wQ=void 0,r=i(26),t=i(111),n=i(182),a=(new t.FB).format,o.prototype.hZa=function(t){return this.aAb(this.OYa(t))},o.prototype.Ny=function(t){return this.sj.isTypeSupported(t)},o.prototype.uXa=function(){return[n.Xe.g_,n.Xe.gDa,n.Xe.KQ]},o.prototype.lpa=function(){this.Rn=[],this.Ku=[],this.config().DRb&&this.Ku.push(n.Xe.tF),this.config().O4a&&this.Ku.push(n.Xe.bDa),this.config().N4a&&this.Ku.push(n.Xe.UCa),this.config().M4a&&this.Ku.push(n.Xe.Qs),this.config().aI&&this.Ku.push(n.Xe.iB),this.config().P4a&&this.Ku.push(n.Xe.Xx),this.config().L4a&&this.Ku.push(n.Xe.Hj),this.Ku=this.Ku.concat(this.uXa()),this.config().SBb||this.Rn.push(n.Xe.tF),this.config().eVa||this.Rn.push(n.Xe.eeb),this.config().dVa||this.Rn.push(n.Xe.feb),this.config().PU||this.Rn.push(n.Xe.geb),this.config().GBb||this.Rn.push(/prk$/),this.config().M4a||this.config().rBb||this.Rn.push(n.Xe.Qs),this.config().O4a||this.config().tBb||this.Rn.push(n.Xe.bDa),this.config().N4a||this.config().zla||this.Rn.push(n.Xe.UCa),this.config().aI||this.config().xM||this.Rn.push(n.Xe.iB),this.config().P4a||this.config().QBb||this.Rn.push(n.Xe.Xx),this.config().L4a||this.config().nBb||this.Rn.push(n.Xe.Hj),this.config().OBb||this.Rn.push(n.Xe.pK)},o.prototype.$Va=function(t){var n=this,e=t.map(function(t){for(var e=nt(n.Ku),i=e.next();!i.done;i=e.next())if(i.value.test(t))return Promise.resolve(!0);for(i=(e=nt(n.Rn)).next();!i.done;i=e.next())if(i.value.test(t))return Promise.resolve(!1);return n.mz(t).catch(function(){return!1})});return Promise.all(e).then(function(i){return t.filter(function(t,e){return i[e]})})},o.prototype.mz=function(t){return this.config().DBb?this.Iw.mz(t):this.YCb(t)},o.prototype.YCb=function(t){var e="";return(t=this.Zta[t])?(Array.isArray(t)&&(e=1<t.length?" "+t[1]:"",t=t[0]),t=a("{0}/mp4; codecs={1};{2}",this.Ara[this.mediaType],t,e),t=this.Ny(t),Promise.resolve(t)):Promise.resolve(!1)},o.prototype.aAb=function(t){var e={};return this.lpa(),this.$Va(t).then(function(t){return t.map(function(t){return e[t]=1})}).then(function(){return Object.keys(e)})},it.Object.defineProperties(o.prototype,{Zta:{configurable:!0,enumerable:!0,get:function(){return this.yOa||(this.yOa=this.Up()),this.yOa}}}),e.wQ=o},function(t,e,i){var n,r,a,o,s;function u(t,e,i){return(i=r.wQ.call(this,t,e,n.Pj.Audio,i)||this).config=t,i.sj=e,i.type=n.nv.qv,i}_esm(e),e.V_=void 0,n=i(26),r=i(448),a=i(110),t=i(111),o=i(441),s=(new t.FB).format,T(u,r.wQ),u.prototype.dZ=function(){var t=s(u.PP,a.Gd.deb);return Promise.resolve(this.config().PU&&this.sj.isTypeSupported(t))},u.prototype.Up=function(){return o.dca.Up()},u.prototype.OYa=function(t){return t||this.config().oC},(e.V_=u).PP="audio/mp4; codecs={0};"},function(t,e){_esm(e),e.SFa="MediaCapabilitiesDetectorSymbol"},function(t,e){_esm(e),e.WFa="MediaCapabilitiesSymbol"},function(t,e){_esm(e),e.VFa="MediaCapabilitiesLogHelperSymbol"},function(t,e){_esm(e),e.tJa="PresentationAPISymbol"},function(t,e){_esm(e),e.w0="IndexedDBConfigSymbol"},function(t,e){_esm(e),e.Iea="Storage"},function(t,e){_esm(e),e.JAa="CorruptedStorageValidatorConfigSymbol"},function(t,e){_esm(e),e.TEa="LocalStorageSymbol"},function(t,e){_esm(e),e.oGa="MemoryStorageSymbol"},function(t,e){_esm(e),e.zza="BookmarkSymbol"},function(t,e){_esm(e),e.xza="BookmarkConfigSymbol"},function(t,e){_esm(e),e.wza="BookmarkConfigParserSymbol"},function(t,e){_esm(e),e.Qza="CDMAttestedDescriptorProvider"},function(t,e){_esm(e),e.HFa="ManifestProviderConfigSymbol"},function(t,e,i){var n;function r(){}_esm(e),e.Nea=void 0,n=i(11),r.NYa=function(){var t=n.yv&&n.yv.height;return t&&1080<=t?1080:720},e.Nea=r},function(t,e){function i(t,e){this.log=t,this.taa=e}_esm(e),e.vR=void 0,i.prototype.nab=function(t,n){var i,r=this;return t?((i=t.map(function(t){var e,i=r.taa(n,n.type,t.Gr,t.bitrate,t.sb,t.size,r.lFb(t.urls),t.xG,t.JWa/t.IWa,t.Qz);return i.hYb(t.E7a,t.D7a,t.y5a,t.x5a),i.xXb(null!==(e=t.Pyb)&&void 0!==e?e:void 0,null!==(e=t.Qyb)&&void 0!==e?e:void 0,null!==(e=t.Oyb)&&void 0!==e?e:void 0,null!==(e=t.Nyb)&&void 0!==e?e:void 0,null!==(e=t.y5a)&&void 0!==e?e:void 0,null!==(e=t.x5a)&&void 0!==e?e:void 0),n.rm&&(i.rm=n.rm),t.xG&&(i.kh=t.xG),i})).sort(function(t,e){return t.bitrate-e.bitrate}),i.forEach(function(t,e){t.lower=i[e-1],t.SIb=i[e+1]}),i):(this.log.warn("There are no media streams for "+n.type+" track - "+n.trackId),[])},i.prototype.lFb=function(t){return t.reduce(function(t,e){return t[e.Sp]=e.url,t},{})},e.vR=i},function(t,e){_esm(e),e.PIa="PlayerTextTrackFactorySymbol"},function(t,e){_esm(e),e.uLa="TrackStreamFactorySymbol"},function(t,e){_esm(e),e.CLa="TrickPlayFactorySymbol"},function(t,e){_esm(e),e.LFa="ManifestVerifyErrorFactorySymbol"},function(t,e){_esm(e),e.KHa="PboLinksManagerSymbol",e.IHa="PboLinksManagerFactorySymbol"},function(t,e){_esm(e),e.DFa="ManifestEnricherSymbol"},function(t,e,i){var n,r;_esm(e),e.bcb=void 0,n=i(8),r=i(19),e.bcb=function(t){var e,i;if(r.Sz(t)){if((i=(e=(new DOMParser).parseFromString(t,"text/xml")).getElementsByTagName("parsererror"))&&i[0]){try{n.log.error("parser error details",{errornode:(new XMLSerializer).serializeToString(i[0]),xmlData:t.slice(0,300),fileSize:t.length})}catch(t){}throw Error("xml parser error")}return e}throw Error("bad xml text")}},function(t,u,e){var c;function h(t){var e,i,n,r,a,o,s={};for(s[c.cQ]=t.localName,i={},s[c.Fk]=i,n=[],s[c.bQ]=n,a=(r=t.attributes).length,e=0;e<a;e++)i[(o=r[e]).localName]=o.value;for(a=(t=t.childNodes).length,i={},e=0;e<a;e++)switch((r=t[e]).nodeType){case u.fcb:o=(r=h(r))[c.cQ],r[c.Zaa]=s,n.push(r),s[o]?i[o][c.uE]=r:s[o]=r,i[o]=r;break;case u.gcb:case u.dcb:r=r.text||r.nodeValue,n.push(r),s[c.Ms]||(s[c.Ms]=r)}return s}_esm(u),u.ecb=u.dcb=u.gcb=u.Z2b=u.fcb=u.$2b=u.ccb=void 0,c=e(158),u.ccb=function(t){return h(t.nodeType==u.ecb?t.documentElement:t)},u.$2b=h,u.fcb=1,u.Z2b=2,u.gcb=3,u.dcb=4,u.ecb=9},function(t){t.exports=function(){for(var t=0;t<arguments.length;t++)if(null!=arguments[t])return arguments[t];return null}},function(t,e,i){var a,l,p,o;_esm(e),e.Wdb=e.fAa=void 0,a=i(12),l=i(24),p=i(19),o=i(90),e.fAa=function(t,e,i,n,r,a,o,s,u,c){var h=this,f={Type:e,Bitrate:n,DownloadableId:i};l.Zb(h,{track:t,type:e,Bc:i,bitrate:n,sb:r,kh:s,size:a,jw:o,header:null,hYb:function(t,e,i,n){(p.Xc(t)||p.Xc(e))&&(h.width=t,h.height=e,p.Ba(i)&&p.Ba(n)&&(h.Tha=i/n*t),f.Resolution=(h.width||"")+":"+(h.height||""))},xXb:function(t,e,i,n,r,a){p.Xc(t)&&p.Xc(e)&&p.Xc(i)&&p.Xc(n)&&(h.vka=t,h.o4=e,h.n4=i,h.m4=n),p.Xc(r)&&p.Xc(a)&&(h.z5a=r,h.A5a=a)},framerate:u,Qz:c,Ri:f,toJSON:function(){return f}})},e.Wdb=function(t,e,i,n,r){return t==a.z0||t===o.Ei.audio?e:t==a.aK||t===o.Ei.video?i:t==o.Ei.laa?n:t==o.Ei.vxa?r:void 0}},function(t,e){_esm(e),e.tda="MslReadyNotifierSymbol"},function(t,e){_esm(e),e.kBa="DeviceIdGeneratorSymbol"},function(t,e){function n(t,e,i){if(null!=i){if(0<i(t,e))throw n.vTa(t,e)}else if(t.Al&&0<t.Al(e))throw n.vTa(t,e);this.start=t,this.end=e}_esm(e),e.vea=void 0,n.vTa=function(t,e){return new RangeError("end ["+e+"] must be >= start ["+t+"]")},e.vea=n},function(t,e){_esm(e),e.nBa="DeviceProviderSymbol"},function(t,e){_esm(e),e.LAa="CryptoKeysSymbol"},function(t,e){_esm(e),e.uHa="PboBindDeviceCommandSymbol"},function(t,e){_esm(e),e.kFa="LogblobSenderSymbol"},function(t,e){_esm(e),e.qGa="MessageQueueSymbol"},function(t,e){_esm(e),e.MHa="PboLogblobCommandSymbol"},function(t,e){_esm(e),e.RLa="UuidProviderSymbol"},function(t,e){_esm(e),e.Jya="AppLogSinkSymbol"},function(t,e,i){var _,E,k,S,T,A,c,O,I,x,P,R,N,j,s,C,L,M,D,U,p,B;function n(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y){var w=this;this.j=t,this.va=e,this.L$a=i,this.Vf=n,this.tra=r,this.Vla=a,this.pe=o,this.L4=s,this.hf=u,this.config=c,this.Fd=h,this.za=f,this.Aa=l,this.Aq=p,this.Yz=d,this.Vi=b,this.Kr=m,this.JH=g,this.yc=v,this.yD=y,this.rZ=[],this.Gra=this.iD=this.qY=0,this.sM=[],this.Nha=!1,this.gE=function(t){var i,e,n,r,a,o={};try{o={playdelaysdk:O.Sf(w.j.XT()),applicationPlaydelay:O.Sf(w.j.eja()),playdelay:O.Sf(w.j.gja()),trackid:w.j.Fj,bookmark:O.Sf(w.j.aw||0),pbnum:w.j.index,endianness:S.LXa()},w.config().RBb&&(o.transitiontime=w.j.Nm,o.uiplaystarttime=w.j.bb.HZ,o.playbackrequestedat=w.j.vk.da(I.ja),o.clockgettime=w.getTime(),o.clockgetpreciseepoch=w.za.ff.da(I.ja),o.clockgetpreciseappepoch=w.Aa.Vz.da(I.ja),o.absolutestarttime=w.j.VG(),o.relativetime=w.j.Lna()),w.E5(o,"startplay")}catch(t){w.log.error("error in startplay log fields",t)}if(w.j.ei&&(o.blocked=w.j.ei),w.yc.n_a(o),w.o_a(o),w.config().Taa&&w.j.bb.Rbb&&(i={},Object.entries(w.j.bb.Rbb).reverse().forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i[t.toLowerCase()]=e}),o.vui=i),L.Ba(w.j.lRa)&&(o.bookmarkact=O.Sf(w.j.lRa)),(e=w.j.pd.at&&w.j.pd.ats?w.j.pd.at-w.j.pd.ats:void 0)&&(o.nccpat=e),(e=w.j.pd.lr&&w.j.pd.lc?w.j.pd.lr-w.j.pd.lc:void 0)&&(o.nccplt=e),(e=w.PAb())&&(o.downloadables=e),pt._cad_global.device&&L.Xc(pt._cad_global.device.b5)&&(o.esnSource=pt._cad_global.device.b5),O.Zb(o,w.Aq,{prefix:"pi_"}),w.j.yo&&w.j.yo.initBitrate&&(o.initvbitrate=w.j.yo.initBitrate),w.j.yo&&w.j.yo.selector&&(o.selector=w.j.yo.selector),o.fullDlreports=w.mbb,w.j.state.value>=C.Rb.re)try{(n=w.j.Ft())&&(w.maxBitrate=S.iQ(n.map(function(t){return t.bitrate})),w.E2a=S.iQ(n.map(function(t){return t.height})),r=0<n.length?M.q2a(n,function(t){return t.bitrate}):void 0,o.maxbitrate=w.maxBitrate,o.maxresheight=w.E2a)}catch(t){w.log.error("Exception computing max bitrate",t)}try{(a=S.dH())&&(o.pdltime=a)}catch(t){}try{O.Zb(o,w.j.pd,{prefix:"sm_"}),O.Zb(o,w.j.s6(),{prefix:"vd_"})}catch(t){}if("undefined"!=typeof nrdp&&nrdp.device&&(o.firmware_version=nrdp.device.firmwareVersion),t&&w.j.Lu&&(o.pssh=w.j.Lu),w.u_a(w.j,o),o.avtp=w.bJ.Zt().hxa,null!==(e=w.j.Ka)&&void 0!==e&&e.PB&&w.S6(o),w.j.jc.value)try{o.ttTrackFields=w.j.jc.value.Ri}catch(t){}w.yc.j_a(o,w.j.oc.value),w.yc.tN(o,w.j.xg.value),w.j.oa&&"boolean"==typeof w.j.oa.$b.nD&&(o.isSupplemental=w.j.oa.$b.nD),w.j.oa&&(o.packageId=w.j.oa.$b.Vo),w.j.oa&&w.j.oa.$b.Bo&&(o.hasChoiceMap=!0),w.config().xWa&&(o.forceL3WidevineCdm=!0),w.LLb(r),w.KLb(),t&&w.bpa(o),w.l_a(w.j,o),w.nH(w.j,o),w.oH(w.j,o),w.eD(w.j,o,w.Nha),w.cpa(o),w.dpa(o),w.yc.sN(o),w.r_a(o),w.k_a(o),w.yc.U6(o,w.va),w.s_a(o),w.Hc(D.cd.gE,t,B.Ae|B.Ws|B.Bi|B.Ys|B.AE|B.A_|B.DE|B.kp,o)},this.$O=function(t,e,i){e={playdelay:O.Sf(t),reason:i,intrplayseq:w.iD-1,skipped:e},"repos"===i&&(e.prstate=!0===w.j.paused.value?"paused":"playing"),w.oH(w.j,e),w.Hc(D.cd.$O,!1,B.Ae|B.Ws|B.Bi,e),"rebuffer"!==i&&"force_rebuffer"!==i||w.j.Ll.xqb(Number(O.Sf(t)))},this.WL=function(t,e,i,n){t={moff:O.Go(i),moffms:O.Sf(i),vbitrate:e.bitrate,vbitrateold:t.bitrate,vdlid:e.Bc,vdlidold:t.Bc,vheight:e.height,vheightold:t.height,vwidth:e.width,vwidthold:t.width,bw:n},w.oH(w.j,t),w.eD(w.j,t),w.Hc(D.cd.WL,!1,B.Bi,t)},this.Oua=function(t,e,i){t={moff:O.Go(i),moffms:O.Sf(i),vdlidold:t.Bc,vbitrateold:t.bitrate},w.oH(w.j,t),w.eD(w.j,t),w.yc.pq(t,e,w.j.jf.value&&w.j.jf.value.stream),w.Hc(D.cd.k7a,!1,B.Bi,t)},this.pta=function(){var t,e={waittime:O.Sf(w.j.Lna()),abortedevent:"startplay",trackid:w.j.Fj,prstate:w.xz(),paustate:w.j.paused.value};w.E5(e,"endplay"),w.Kr.SU&&(e.eventlist_version=1,e.eventlist=w.JH.IYa(w.j)),w.j.yo&&w.j.yo.initBitrate&&(e.initvbitrate=w.j.yo.initBitrate);try{(t=S.dH())&&(e.pdltime=t),O.Zb(e,w.j.pd,{prefix:"sm_"})}catch(t){}w.Zoa(e,!0),w.yc.U6(e,w.va),w.yc.tN(e,w.j.xg.value),w.bpa(e),w.yc.pq(e,w.j.We.value,w.j.jh.value),w.u_a(w.j,e),w.nH(w.j,e),w.Hc(D.cd.H9,!1,B.Ae|B.Bi|B.AE|B.Ys|B.kp,e)},this.ota=function(t,e){t={waittime:O.Sf(t),abortedevent:"resumeplay",resumeplayreason:e},w.j.yo&&w.j.yo.initBitrate&&(t.initvbitrate=w.j.yo.initBitrate),w.yc.pq(t,w.j.We.value,w.j.jh.value),w.Hc(D.cd.H9,!1,B.Ae|B.Bi|B.kp,t)},this.Fwa=function(t,e){t={newstate:e?"Paused":"Playing",oldstate:t?"Paused":"Playing"},w.oH(w.j,t),w.eD(w.j,t),w.yc.pq(t,w.j.oe.value&&w.j.oe.value.stream,w.j.jf.value&&w.j.jf.value.stream),w.Hc(D.cd.T9a,!1,B.Ae|B.Bi,t)},this.ppa=function(t,e,i){t=O.Zb({vdlid:w.j.We.value.Bc,playingms:t,pausedms:e,intrplayseq:w.iD++,prstate:w.xz(),paustate:w.j.paused.value},i),w.E5(t,"intrplay"),e=w.j.qc[_.Tb.Ta.Mb].value,i=w.j.qc[_.Tb.Ta.Wb].value,t.cdnid=t.vcdnid=e&&e.id,t.acdnid=i&&i.id,t.locid=w.rW&&w.rW.Bqa,t.loclv=w.rW&&w.rW.C1a,t.avtp=w.bJ.Zt().hxa,t.mediabuffered=null===(i=w.j.Xf)||void 0===i?void 0:i.J5(),null!==(i=w.j.Ka)&&void 0!==i&&i.PB&&(w.Zoa(t,!0),w.S6(t),w.q_a(t));try{O.Zb(t,w.j.s6(),{prefix:"vd_"})}catch(t){}w.oH(w.j,t),w.eD(w.j,t),w.yc.pq(t,w.j.oe.value&&w.j.oe.value.stream,w.j.jf.value&&w.j.jf.value.stream),w.Hc(D.cd.ppa,!1,B.Ae|B.Bi,t)},this.QO=function(t,e,i){t={moffold:O.Go(t),reposseq:w.qY++,prstate:w.xz(),paustate:w.j.paused.value},w.eD(w.j,t),w.yc.pq(t,i&&i.stream,e&&e.stream),w.Hc(D.cd.QO,!1,B.Ae|B.Bi,t)},this.uia=function(){var t,e,i,n=w.j.oc.value,r=w.j.jh.value.Bc;n=n?{trackId:n.trackId,bcp47:n.Wd,lang:n.Wd,downloadableId:r,rank:n.uc}:{},e=w.Tz,i=null===(t=w.aqa)||void 0===t?void 0:t.Bc,t=e?{trackId:e.trackId,bcp47:e.Wd,lang:e.Wd,downloadableId:i,rank:e.uc}:{},w.Hc(D.cd.PQa,!1,B.Ae|B.Bi,{switchdelay:O.Sf(w.getTime()-w.bqa),newtrackinfo:n,oldtrackinfo:t,oldAudioDownloadableId:i,newAudioDownloadableId:r})},this.UY=function(t){w.Hc(D.cd.I9a,!1,B.Ae|B.Bi,{speedold:Math.floor(1e3*t.oldValue),speed:Math.floor(1e3*t.newValue)})},this.IP=function(){w.Hc(D.cd.N_b,!1,B.Ae|B.Bi,{track:w.j.jc.value.Ri})},this.UA=function(t){var e,i,n=w.j.jc.value;(t.newValue||n&&n.Vr()&&!n.rq())&&(i={},t=null!==(e=t.newValue)&&void 0!==e?e:n,i.newtrackinfo=t?{trackId:t.trackId,bcp47:t.Wd,lang:t.Wd,downloadableId:t.Bc,rank:t.uc,isImageBased:t.kk}:{},e=w.oqa,i.oldtrackinfo=e?{trackId:e.trackId,bcp47:e.Wd,lang:e.Wd,downloadableId:e.Bc,rank:e.uc,isImageBased:e.kk}:{},i.switchDelay=O.Sf(w.getTime()-w.nqa),w.yc.pq(i,w.j.oe.value&&w.j.oe.value.stream,w.j.jf.value&&w.j.jf.value.stream),w.Hc(D.cd.W$a,!1,B.Ae|B.Bi,i))},this.Np=function(t){w.Hc(D.cd.Qsb,!1,B.Ae|B.Bi,t.newValue)},this.fub=function(t,e){var i=e.serverid,n={locid:e.location,loclv:e.locationlv,selocaid:i,selcdnid:i,selocaname:e.servername};n.mediatype=e.mediatype,n.selreason=e.selreason||"unknown",n.seldetail=e.seldetail,n.cdnbwdata=JSON.stringify([{id:i}]),t&&(n.oldlocid=t.Bqa,n.oldloclv=t.C1a,n.oldocaid=t.nXb,n.oldocaname=t.HI),w.Hc(D.cd.RRa,!1,B.A_,n)},this.uUa=function(){var t,e,i;if(w.j.hi)try{t=!1,w.mbb||(t=!0,w.sM=w.sM.filter(function(t){return!t.$})),0<w.sM.length&&(e=w.L4.construct(w.sM,w.j.vk.da(I.ja)),w.sM=[],e.erroronly=t,i={},O.te(e,function(t,e){i[t]=JSON.stringify(e)}),w.Hc(D.cd.wAb,!1,B.Bi,i))}catch(t){w.log.error("Exception in dlreport.",t)}},this.xz=function(){var t=w.j.yb.value;return t===C.cb.Kc?"playing":t===C.cb.hh?"paused":t===C.cb.Wq?"ended":"waiting"},this.zD=function(){var t,e;w.j.state.value==C.Rb.re&&(e=w.IX(),w.config().Uua&&(e.avtp=w.bJ.Zt().hxa,null!==(t=w.j.Ka)&&void 0!==t&&t.PB&&w.S6(e)),e.mediabuffered=null===(t=w.j.Xf)||void 0===t?void 0:t.J5(),e.midplayseq=w.Gra++,e.prstate=w.xz(),e.paustate=w.j.paused.value,w.config().kXb&&w.l$a("midplay"),w.config().Sw&&w.epa(e),w.cpa(e),w.dpa(e),w.yc.sN(e),w.Hc(D.cd.zD,!1,B.Ae|B.Bi|B.AE|B.Ys,e))},this.l$a=function(t){var e,i={};i.trigger=t;try{e=w.j.Fna(),i.subtitleqoescore=w.j.Qq.xHb(e),i.metrics=JSON.stringify(w.j.Qq.$na(e))}catch(t){w.log.error("error getting subtitle qoe data",t)}w.Hc(D.cd.TZb,!1,B.Ae|B.AE|B.Ws,i,"info")},this.transition=function(t){w.eD(w.j,t),w.Hc(D.cd.transition,!1,0,t)},this.MG=function(t){var e,i,n,r,a,o,s,u=w.IX();w.E5(u,"endplay"),u.prstate=w.xz(),u.paustate=w.j.paused.value,u.muted=w.j.muted.value,w.j.WA&&"downloaded"===w.j.WA.o6()&&(u.trickplay_ms=w.j.EZ.offset,u.trickplay_res=w.j.EZ.C7a),w.config().ubb&&(u.rtinfo=w.j.cHb()),w.config().Uua&&null!==(e=w.j.Ka)&&void 0!==e&&e.PB&&w.S6(u),w.o_a(u),u.endreason=t?"error":w.j.yb.value===C.cb.Wq?"ended":"stopped",e=w.Aq,w.CJb(e),e&&O.Zb(u,e,{prefix:"pi_"}),e=w.j.li,t&&e&&x.kca(e.errorCode)&&(i="info");try{O.Zb(u,w.j.pd,{prefix:"sm_"})}catch(t){}if(w.j.Yoa&&(u.inactivityTime=w.j.Yoa),w.Zoa(u,"info"!==i&&t),w.q_a(u),w.j.etb){e=w.j.etb,n=w.config().ML,r=w.j.loadTime,a={iv:n,seg:[]},o=function(t,e,i){return 0===e||void 0===i[e-1]?t:t-i[e-1]},s=e.FT.map(o),o=e.TZ.map(o);for(var c,h=0;h<s.length;h++)(s[h]||o[h])&&(c?(c.ams.push(s[h]),c.vms.push(o[h])):c={ams:[e.FT[h]],vms:[e.TZ[h]],soffms:e.startTime+h*n-r}),h!==s.length-1&&s[h]&&o[h]||!c||(a.seg.push(c),c=void 0);u.bt=JSON.stringify(a)}t&&w.bpa(u),w.l$a("endplay"),w.config().Sw&&w.epa(u),w.yc.tN(u,w.j.xg.value),w.l_a(w.j,u),w.nH(w.j,u),w.oH(w.j,u),w.eD(w.j,u,w.Nha),w.cpa(u),w.dpa(u),w.yc.sN(u),w.r_a(u),w.DJb(u),w.k_a(u),w.FJb(u),w.EJb(u),w.IJb(u),w.s_a(u),w.JJb(u),w.Hc(D.cd.MG,t,B.Ae|B.Ws|B.Bi|B.AE|B.Ys|B.DE|B.kp,u,i)},this.FAb=function(t){w.sM.push(w.L4.Xvb(t.response))},this.hla=function(t){var e,i,n,r,a,o;if(t=t.response,e=t.request,i=t.request.kA,n=e.track,n&&(r=!t.$&&t.na!=x.L.qB,a=n.type,o=t.zm,r||w.va.Gqa)){switch(i={dltype:a,url1:e.url,url2:t.url||"",cdnid:e.qc&&e.qc.id,tresp:O.Sf(o.vi-o.Iq),brecv:O.AWa(o.eka),trecv:O.Sf(o.Zo-o.vi),sbr:i&&i.bitrate},t.ls&&(i.range=t.ls),a){case T.Ei.audio:i.adlid=e.stream.Bc;break;case T.Ei.video:i.vdlid=e.stream.Bc;break;case T.Ei.laa:i.ttdlid=n.Bc}(e=U.Bna(t.na))&&(i.nwerr=e),t.ik&&(i.httperr=t.ik),w.Hc(D.cd.hla,r,B.Bi,i)}},this.ei=function(){w.Hc(D.cd.iRa,!1,B.Ae|B.AE|B.kp,{})},this.jvb=function(t){var e,i=t.response.zm;t=I.Nc(i.vi),e=I.Nc(i.Zo),(i=R.fa(i.eka||0)).G0a()||i.Fpa()||(t=new N.vea(t,e),w.bJ.qqb(new j.sBa(t,i)))},this.y9=function(t){var e=t.newValue;t.om&&t.om.hsa&&e||e==w.yH||(w.Fwa(w.yH,e),w.yH=e)},this.Jy=function(t){function e(e){var t;if(w.j.Vb&&w.j.Vb.sourceBuffers&&(t=w.j.Vb.sourceBuffers.filter(function(t){return t.type===e}).pop()))return{busy:t.Hh(),updating:t.updating(),ranges:t.K5()}}(t={cause:t.cause}).cause&&t.cause===k.Xda&&(t.mediaTime=w.j.mediaTime.value,t.buf_audio=e(E.z0),t.buf_video=e(E.aK)),w.ppa(w.rZ[C.cb.Kc]||0,w.rZ[C.cb.hh]||0,t)},this.hab=function(t){var e;t=t.oldValue,e=w.getTime(),t===C.cb.Pf?w.rZ=[]:w.rZ[t]=(w.rZ[t]||0)+(e-w.VLb),w.VLb=e},this.gm=function(t){w.bqa=w.getTime(),w.Tz=t.oldValue},this.Rl=function(t){w.nqa=w.getTime(),w.oqa=t.oldValue},this.HT=function(t){w.aqa=t.oldValue},this.Xz=function(t){function e(t,e){var i;if(!t||t.Bqa!==e.location)return i={Bqa:e.location,C1a:e.locationlv,nXb:e.serverid,HI:e.servername},w.fub(t,e),i}"audio"===t.mediatype?(t=e(w.RLb,t))&&(w.RLb=t):(t=e(w.rW,t))&&(w.rW=t)},this.GY=function(t){var e=t.mediatype,i=t.reason;"video"===e?"serverswitchaway"===i?(w.Ej.summary.Obb++,w.Ej.N7=w.za.ff.da(I.ja)):"serverswitchback"===i&&(w.Ej.summary.Pbb++,w.Ej.N7&&(w.Ej.summary.Qbb.push(w.za.ff.da(I.ja)-w.Ej.N7),w.Ej.N7=void 0)):"audio"===e&&("serverswitchaway"===i?(w.Ej.summary.CQa++,w.Ej.I7=w.za.ff.da(I.ja)):"serverswitchback"===i&&(w.Ej.summary.DQa++,w.Ej.I7&&(w.Ej.summary.EQa.push(w.za.ff.da(I.ja)-w.Ej.I7),w.Ej.I7=void 0))),w.Hc(D.cd.pXb,!1,B.Ae|B.Bi,{mediatype:t.mediatype,server:t.server,selreason:t.reason,location:t.location,bitrate:t.bitrate,confidence:t.confidence,throughput:t.throughput,oldserver:t.oldserver})},this.FL=function(t){w.Hc(D.cd.Frb,!1,B.Bi,{strmsel:t.strmsel})},this.DP=function(t){(t=P.pP(t)).details&&(t.details=JSON.stringify(t.details)),w.Hc(D.cd.SZb,!0,B.Ae|B.Ws|B.A_,t)},this.Nha=b.bya||b.Jaa||b.yWa,this.bJ=i(),this.log=A.Ih(t,"LogblobBuilder"),this.yH=t.paused.value,this.ba=this.va.ba,this.Ej={summary:{Obb:0,Pbb:0,Qbb:[],CQa:0,DQa:0,EQa:[]},N7:void 0,I7:void 0}}_esm(e),e.oR=void 0,_=i(47),E=i(12),k=i(58),S=i(50),T=i(90),A=i(8),c=i(21),O=i(24),I=i(4),x=i(3),P=i(30),R=i(52),N=i(478),j=i(1102),s=i(11),C=i(15),L=i(19),M=i(1103),D=i(272),U=i(160),p=i(132),n.prototype.u_a=function(t,e){var i,n,r,a,o,s,u,c,h,f,l;if(this.config().Sw)try{i={},n=this.Fd.getStats(void 0,void 0,t.J),r=t.VG(),l=n.aJ.uvb||[],i.attempts=n.P9||0,i.num_completed_tasks=l.length,a=this.pe.VCb,o={},s=p.Ik.EP,u=p.Ik.Pt,h=p.Ik.nja,n.Dl&&(o.scheduled=n.Dl-r),(c=t.oa)&&L.Ba(c.uI)&&(o.preauthsent=c.uI-t.loadTime,o.preauthreceived=c.TO-t.loadTime),c=l.filter(function(t){return"manifest"===t.type}),i.mf_succ=c.filter(a("status",s)).length,i.mf_fail=c.filter(a("status",u)).length,c=t.pd,L.Xc(c.lg)&&c.lg<0&&t.loadTime&&(o.ldlsent=c.lc,o.ldlreceived=c.lr),c=l.filter(function(t){return"ldl"===t.type}),i.ldl_succ=c.filter(a("status",s)).length,i.ldl_fail=c.filter(a("status",u)).length,n=!0,r=[],"notcached"===t.lG&&(n=!1,r.push("Missing cached manifest")),this.config().RU||(n=!1,r.push("LDL prefetch disabled")),h=c.filter(a("status",h)).length,this.config().RU&&0===h&&(!o.ldlreceived||0<=o.ldlreceived)&&(n=!1,r.push("LDL received after start")),this.config().kVa&&(e.isPrefetchItem?(f=e.prefetchedAudioMs/e.bcABufferLevelMs,(e.prefetchedVideoMs/e.bcVBufferLevelMs<1||f<1)&&(n=!1,r.push("Insufficient media fetched"))):(n=!1,r.push("aseStats not initialized"))),f=l.filter(function(t){return"getHeaders"===t.type}),i.header_succ=f.filter(a("status",s)).length,i.header_fail=f.filter(a("status",u)).length,l=l.filter(function(t){return"getMedia"===t.type}),i.media_succ=l.filter(a("status",s)).length,i.media_fail=l.filter(a("status",u)).length,i.hm_succ=i.header_succ+i.media_succ,i.hm_fail=i.header_fail+i.media_fail,O.Zb(e,i,{prefix:"pr_"}),this.Kr.SU&&(e.eventlist_version=1,e.eventlist=this.JH.IYa(t)),(e.prefetchCompleted=n)||(e.prefetchFailed=r,O.Zb(e,o,{prefix:"pe_"})),this.epa(e)}catch(t){this.log.warn("error in collecting video prepare data",t)}},n.prototype.iHb=function(t,e){if((t=t.qV())&&(e=t[e]))return e.Jb},n.prototype.l_a=function(t,e){t.bb.Fl&&(e.isBranching=!0)},n.prototype.nH=function(t,e){var i=(null===(i=t.oa)||void 0===i?void 0:i.i0a)||"videopreparer"===t.kG;e.cachedManifest=t.lG,e.cachedLicense=t.kG,e.usedldl=this.config().RU?i.toString():"not_capable"},n.prototype.oH=function(t,e){var i,n;this.config().HJb&&(i=t.Gna(),n=t.ha.oa,i&&n&&(e.segment=i,n=t.TC(),e.segmenttime=n,t=this.iHb(t,i),null!==n&&void 0!==t&&(e.segmentoffset=n-t)))},n.prototype.eD=function(t,e,i){e.pxid=t.L9,void 0!==i&&i&&(e.playgraph_trace=t.P5a)},n.prototype.q_a=function(t){var e=this.j.N$b,i=e&&e.Qbc;e&&e.iJb&&(t.htwbr=e.iJb,t.pbtwbr=e.bta,t.hptwbr=e.P$b),e&&e.wWb&&(t.rr=e.wWb,t.ra=e.Mbc),e&&i&&0<(i.length||0)&&(t.qe=JSON.stringify(i))},n.prototype.bpa=function(t){var e=this.pe.createElement("canvas"),e=e.getContext("webgl")||e.getContext("experimental-webgl");t.WebGLRenderer=e.getParameter(e.RENDERER),t.WebGLVendor=e.getParameter(e.VENDOR)},n.prototype.IJb=function(t){t.switchAwaySummary={vsa:this.Ej.summary.Obb,vsb:this.Ej.summary.Pbb,vsbt:this.Ej.summary.Qbb,asa:this.Ej.summary.CQa,asb:this.Ej.summary.DQa,asbt:this.Ej.summary.EQa}},n.prototype.fmb=function(t){return t?Object.keys(t).map(function(t){return+t}):[]},n.prototype.PAb=function(){var e,i=this;if(this.j.ip&&this.j.Ki)return e=[],this.j.ip.concat(this.j.Ki).forEach(function(t){t.streams.forEach(function(t){e.push({dlid:t.Bc,type:t.type,bitrate:t.bitrate,vmaf:t.sb,cdn_ids:i.fmb(t.jw)})})}),JSON.stringify(e)},n.prototype.eub=function(){var t,a,o;function e(t,e){var i,n=t.cdnId+"$"+t.correlationId,r=o[n];r||(r={cdnid:t.cdnId,pbcid:t.correlationId,dls:[]},o[n]=r,a.push(r)),c.kM(t.bitrate),c.kM(t.duration),n={bitrate:t.bitrate,tm:s.bj(t.duration)},(i=t.vmaf)&&(c.kM(t.vmaf),n.vf=i),n[e]=O.He(t.downloadableId),r.dls.push(n)}return t=this.j.Ll.uEb(),a=[],o={},t.audio.forEach(function(t){e(t,"adlid")}),t.video.forEach(function(t){e(t,"dlid")}),JSON.stringify(a)},n.prototype.IX=function(){var t,e,i,n,r,a,o,s=this.j.Ll,u={totaltime:O.Go(s.jN()),totalcontenttime:O.Go(s.hoa()),cdndldist:this.eub(),reposcount:this.qY,intrplaycount:this.iD};try{for(i={numskip:0,numlowqual:0},e=(t=this.j.Xf).QC(),L.Ba(e)&&(u.totfr=e,i.numren=e),e=t.XG(),L.Ba(e)&&(u.totdfr=e,i.numrendrop=e),e=t.sV(),L.Ba(e)&&(u.totcfr=e,i.numrenerr=e),e=t.X5(),L.Ba(e)&&(u.totfdl=e),u.playqualvideo=JSON.stringify(i),(i=this.j.We.value)&&(u.videofr=i.framerate.toFixed(3)),(i=s.Tma())&&(u.abrdel=i),(i=s.JZa()&&s.YWa())&&(u.tw_vmaf=i),(i=s.WWa())&&O.Zb(u,i),u.rbfrs=this.iD,u.maxbitrate=this.maxBitrate,u.maxresheight=this.E2a,n=this.j.fH(),s=0;s<n.length;s++){if(r=n[s],a=this.va.VN.Yu(r)){c.hb(o),u.maxbitrate=o?o.bitrate:0,u.maxresheight=o?o.height:0,u.bitratefilters=a.join("|");break}o=r}this.j.WA&&(u.trickplay=this.j.WA.o6()),null!==this.j.Qq.ZQa&&(u.avg_subt_delay=this.j.Qq.ZQa)}catch(t){this.log.error("Exception reading some of the endplay fields",t)}return O.Zb(u,this.j.s6(),{prefix:"vd_"}),u},n.prototype.getTime=function(){return this.Aa.Yb().da(I.ja)},n.prototype.epa=function(t){var e;try{e=this.Fd.getStats(),t.pr_cache_size=JSON.stringify(e.cache),t.pr_stats=JSON.stringify(e.aEb)}catch(t){}},n.prototype.cpa=function(t){this.log.debug("httpstats",this.hf.ec),O.Zb(t,this.hf.ec,{prefix:"http_"})},n.prototype.Zoa=function(t,e){var i=this.config().QTa&&!(this.ba%this.config().QTa),n=this.j.Ka,r=null==n?void 0:n.$h;i&&r&&(t.ASEstats=JSON.stringify(n.f7(e)))},n.prototype.S6=function(t){Object.assign(t,this.j.Ka.Qb.DHb())},n.prototype.dpa=function(t){var e;try{e=s.xv.memory,L.D0a(e)&&(t.totalJSHeapSize=e.totalJSHeapSize,t.usedJSHeapSize=e.usedJSHeapSize,t.jsHeapSizeLimit=e.jsHeapSizeLimit)}catch(t){}},n.prototype.r_a=function(t){var e=this.j.nf;this.config().$tb&&e&&!this.config().hp&&(e=this.j.DPb(e.w$b()),t.keystatuses=e,this.log.trace("keystatuses",e))},n.prototype.k_a=function(t){var e;try{this.config().$T&&(e=this.j.EEb(),t.battery=e,this.log.trace("batterystatuses",e))}catch(t){}},n.prototype.DJb=function(t){this.j.u4&&(t.dqec=this.j.u4)},n.prototype.CJb=function(t){this.j.Q3&&O.Zb(t,{cast_interaction_counts:this.j.Q3.D$b()})},n.prototype.s_a=function(t){var e;null!==(e=this.j.nf)&&void 0!==e&&e.Wt?t.keysys=this.j.nf.Wt():null!==(e=null===(e=this.j.nf)||void 0===e?void 0:e.mediaKeys)&&void 0!==e&&e.keySystem?t.keysys=this.j.nf.mediaKeys.keySystem:this.yD.V0a&&(t.keysys=this.yD.V0a)},n.prototype.EJb=function(t){this.Ula&&(t.externaldisplay=this.Ula.YU)},n.prototype.FJb=function(t){this.rE&&this.rE.pc&&(t.media_capabilities_smooth=this.rE.pc.smooth,t.media_capabilities_efficient=this.rE.pc.powerEfficient,t.media_capabilities_bitrate=this.rE.pc.bitrate,t.media_capabilities_height=this.rE.pc.height,t.media_capabilities_width=this.rE.pc.width)},n.prototype.o_a=function(t){var e,i;if(this.j.aM&&((e=this.j.aM).f4&&(t.controllerESN=e.f4),e.Uvb&&(t.controllerUiVer=e.Uvb),e.Tvb))try{i=JSON.parse(e.Tvb),t.controllerGroupNames=i}catch(t){this.log.error("Exception parsing controller group names",t)}},n.prototype.JJb=function(t){t.didHydrateTracks=this.j.G4},n.prototype.KLb=function(){void 0===this.Ula&&(this.Ula=this.Vla.NCb())},n.prototype.LLb=function(t){void 0===this.rE&&void 0!==t&&(this.rE=this.tra.$la(t))},n.prototype.E5=function(i,t){(t=this.j.wz(t))&&Object.entries(t).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i[t]=e})},n.prototype.Hc=function(t,e,i,n,r){this.Fha(n,this.j,e,i),t=this.Yz.Gt(t,r||(e?"error":"info"),n,this.va),this.Vf.Hc(t)},n.prototype.Fha=function(i,t,e,n){var r,a,o;if("undefined"!=typeof nrdp&&nrdp.device&&nrdp.device.deviceModel&&(i.devmod=nrdp.device.deviceModel),this.yc.m_a(i,t),n&B.Ae&&(c.hb(!i||void 0===i.moff),this.yc.t_a(i,t)),n&B.Ws&&this.yc.v_a(i,t),n&B.Bi&&null!==(r=t.Ka)&&void 0!==r&&r.$h&&(i.abuflbytes=null!==(a=i.abuflbytes)&&void 0!==a?a:t.oia(),i.abuflmsec=null!==(o=i.abuflmsec)&&void 0!==o?o:t.DT(),i.vbuflbytes=null!==(o=i.vbuflbytes)&&void 0!==o?o:t.gya(),i.vbuflmsec=null!==(o=i.vbuflmsec)&&void 0!==o?o:t.QZ()),n&B.Ys&&this.yc.w_a(i,t.Jg),n&B.AE&&(0<=(r=s.kf.hardwareConcurrency)&&(i.numcores=r),r=this.va.sla)&&(a=r.zEb(),i.droppedFrames=JSON.stringify(a),r=r.GV(this.config().ZAb),O.te(r,function(t,e){i["droppedFramesP"+t]=JSON.stringify(e)})),n&B.A_)try{t.hi&&(i.cdninfo=JSON.stringify(t.hi.map(function(t){return{id:t.id,nm:t.name,rk:t.uc,wt:t.location.weight,lv:t.location.level}})))}catch(t){}e&&n&B.DE&&(c.hb(t.li),this.yc.p_a(i,t,t.li)),n&B.kp&&this.yc.apa(i)},it.Object.defineProperties(n.prototype,{mbb:{configurable:!0,enumerable:!0,get:function(){return this.j.iz||this.j.wM}}}),e.oR=n,(e=B=B||{})[e.Ae=1]="MOFF",e[e.Ws=2]="PRESENTEDSTREAMS",e[e.Bi=4]="BUFFER",e[e.Ys=8]="SCREEN",e[e.AE=16]="CPU",e[e.A_=32]="CDN",e[e.DE=64]="FATALERROR",e[e.kp=128]="BROWSERINFO"},function(t,e){_esm(e),e.uBa="DownloadReportBuilderSymbol"},function(t,e,i){var a,s,o,n,r,u,c,h,f;function l(t){this.config=t}_esm(e),e.tBa=void 0,t=i(1),a=i(160),s=i(90),o=i(24),n=i(3),r=i(21),u=i(11),c=i(19),h=i(0),i=i(13),l.prototype.construct=function(t,i){var n,r=this,a={};return t.forEach(function(t){var e=t.url;a[e]||(a[e]=[]),a[e].push(t)}),n=[],o.te(a,function(t,e){n.push(r.LHb(e,i))}),{urls:n}},l.prototype.LHb=function(t,i){var n=this,e=t[0],r={url:e.url,bitrate:e.bitrate,cdnid:c.Jh(e.qc)?e.qc.id:e.qc,dltype:e.yAb,id:e.Bc},a={};return t.forEach(function(t){var e=n.HKb(t)?"fail":"success";a[e]||(a[e]=[]),a[e].push(t)}),o.te(a,function(t,e){"fail"===t?r.failures=n.wFb(e,i):"success"===t&&(r.downloads=n.nFb(e,i))}),r},l.prototype.nFb=function(t,n){var r,a=this,i={};return t.forEach(function(t){var e=t.bvb;i[e]||(i[e]=[]),i[e].push(t)}),r=[],o.te(i,function(e,t){var i=[];t.forEach(function(t){i.push(t),a.sKb(t)&&(r.push(a.zXa(i,n,e)),i=[])}),0<i.length&&r.push(a.zXa(i,n,e))}),r},l.prototype.zXa=function(t,e,i){var n,r=t.sort(function(t,e){return t.zm.vi<e.zm.vi?-1:t.zm.vi>e.zm.vi?1:0}),a=r[0].zm,o=a.Iq,s=a.vi;a=a.Zo;for(var u=1;u<t.length;u++)(n=t[u].zm).Iq<o&&(o=n.Iq),n.vi<s&&(s=n.vi),n.Zo>a&&(a=n.Zo);return u=this.VGb(r),n=r[r.length-1],{time:o-e,tcpid:i?parseInt(i):-1,tresp:s-o,first:u,ranges:this.WGb(r,u),dur:a-s,trace:this.VC(t),status:this.o6(n)}},l.prototype.VGb=function(t){var e=0;return t.forEach(function(t){t.ls&&(e=u.np(e,t.ls[0]))}),e},l.prototype.WGb=function(t,e){var i=[];return t.forEach(function(t){t.ls?i.push([t.ls[0]-e,t.ls[1]-e]):i.push([0,-1])}),i},l.prototype.VC=function(t){var i,n=[];return t.forEach(function(t){var e;t=t.zm,i&&(0<(e=t.Iq-i.Zo)&&n.push([e,-2]),e=u.fo(i.Zo,t.Iq),0<(e=t.vi-e)&&n.push([e,-3])),n.push([t.Zo-t.vi,t.eka||0]),i=t}),n},l.prototype.sKb=function(t){if(t.na===n.L.qB||t.na===n.L.IE)return!0},l.prototype.o6=function(t){return t.$?"complete":t.na===n.L.qB?"abort":t.na===n.L.IE?"stall":(r.hb(!1,"download status should never be: other"),"other")},l.prototype.wFb=function(t,i){var n=this,r=[];return t.forEach(function(t){var e=t.zm;t={time:e.vi-i,tresp:e.vi-e.Iq,dur:e.Zo-e.vi,range:t.ls,reason:n.YGb(t),httpcode:t.ik,nwerr:a.Bna(t.na)},r.push(t)}),r},l.prototype.YGb=function(t){return t.ik||t.na===n.L.dR?"http":t.na===n.L.fR?"timeout":"network"},l.prototype.HKb=function(t){return!t.$&&void 0!==t.$&&t.na!==n.L.qB&&t.na!==n.L.IE},l.prototype.Xvb=function(t){var e,i=t.request,n=i.stream,r=i.track,a=i.url,o=this.kFb(r,a);switch(o){case s.Ei.audio:case s.Ei.video:e=i.stream.Bc;break;case s.Ei.laa:case s.Ei.vxa:e=r.Bc}return t={bitrate:n&&n.bitrate,yAb:o,Bc:e,zm:t.zm,qc:i.qc,url:a,pf:t.pf,ik:t.ik,na:t.na,$:t.$,bvb:this.ACb(t)},void 0!==i.offset&&null!=i.length&&(t.ls=[i.offset,i.offset+i.length-1]),t},l.prototype.kFb=function(t,e){if(t)return t.type;if(0<=e.indexOf("netflix.com")){if(0<=e.indexOf("nccp"))return"nccp";if(0<=e.indexOf("api"))return"api"}return"other"},l.prototype.ACb=function(t){if(t.headers&&(t=t.headers["X-TCP-Info"]||t.headers["x-tcp-info"]))return(t=t.split(";").filter(function(t){return 0==t.indexOf("port=")}).map(function(t){return t.split("=")[1]})[0])?o.He(t):t},f=l,f=t.__decorate([h.R(),t.__param(0,h.l(i.Zc))],f),e.tBa=f},function(t,e){_esm(e),e.qR="LogblobMonitorFactorySymbol"},function(t,e){_esm(e),e.oMa="XhrFactorySymbol"},function(t,e){_esm(e),e.HGa="NetworkMonitorSymbol"},function(t,e){_esm(e),e.GCa="FtlDataParserSymbol"},function(t,e){_esm(e),e.EDa="HttpRequesterSymbol"},function(t,e){_esm(e),e.rHa="PboAcquireLicenseCommandSymbol"},function(t,e,i){var n,r,a,o,s,u;function c(t){var e;if(1481462272!=(t=new a.BQ(t)).Gq())throw Error("Invalid header");return e={XMR:{Version:t.Gq(),RightsID:t.Yw(16)}},h(t,e.XMR,t.buffer.length),e}function h(t,e,i){for(var n,r,a,o,s;t.position<i;){switch(n=t.uh(),r=t.Gq(),r-=8,n){case 1:a="OuterContainer";break;case 2:a="GlobalPolicy";break;case 3:a="MinimumEnvironment";break;case 4:a="PlaybackPolicy";break;case 5:a="OutputProtection";break;case 6:a="UplinkKID";break;case 7:a="ExplicitAnalogVideoOutputProtectionContainer";break;case 8:a="AnalogVideoOutputConfiguration";break;case 9:a="KeyMaterial";break;case 10:a="ContentKey";break;case 11:a="Signature";break;case 12:a="DeviceIdentification";break;case 13:a="Settings";break;case 18:a="ExpirationRestriction";break;case 42:a="ECCKey";break;case 48:a="ExpirationAfterFirstPlayRestriction";break;case 50:a="PlayReadyRevocationInformationVersion";break;case 51:a="EmbeddedLicenseSettings";break;case 52:a="SecurityLevel";break;case 54:a="PlayEnabler";break;case 57:a="PlayEnablerType";break;case 85:a="RealTimeExpirationRestriction";break;default:a="Other"}switch(o={Type:f(n)},(s=e[a])?u.isArray(s)?s.push(o):(e[a]=[],e[a].push(s),e[a].push(o)):e[a]=o,n){case 1:case 2:case 4:case 7:case 9:case 54:h(t,o,t.position+r);break;case 5:o.Reserved1=t.uh(),o.MinimumUncompressedDigitalVideoOutputProtectionLevel=t.uh(),o.MinimumAnalogVideoOutputProtectionLevel=t.uh(),o.Reserved2=t.uh(),o.MinimumUncompressedDigitalAudioOutputProtectionLevel=t.uh();break;case 10:o.Reserved=t.Yw(16),o.SymmetricCipherType=t.uh(),o.AsymmetricCipherType=t.uh(),r=t.uh(),o.EncryptedKeyLength=r,n=t.Yw(r),o.EncryptedKeyData=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 11:o.SignatureType=t.Yw(2),r=t.uh(),n=t.Yw(r),o.SignatureData=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 13:o.Reserved=t.uh();break;case 18:o.BeginDate=t.Gq(),o.EndDate=t.Gq();break;case 42:o.CurveType=t.Yw(2),r=t.uh(),n=t.Yw(r),o.Key=r<=10?n:n.substring(0,4)+"..."+n.substring(n.length-4,n.length);break;case 48:o.ExpireAfterFirstPlay=t.Gq();break;case 50:o.Sequence=t.Gq();break;case 51:o.LicenseProcessingIndicator=t.uh();break;case 52:o.MinimumSecurityLevel=t.uh();break;case 57:o.PlayEnablerType=l(t.Yw(16));break;case 85:break;default:o.OtherData=t.Yw(r)}}}function f(t){return"0x"+t.toString(16)}function l(t){return t.substring(6,8)+t.substring(4,6)+t.substring(2,4)+t.substring(0,2)+"-"+t.substring(10,12)+t.substring(8,10)+"-"+t.substring(14,16)+t.substring(12,14)+"-"+t.substring(16,20)+"-"+t.substring(20,32)}_esm(e),e.izb=e.jzb=e.hzb=e.gzb=e.fzb=void 0,n=i(12),r=i(8),a=i(165),o=i(158),s=i(280),u=i(19),e.fzb=function(t,e,i){e===n.Y_&&t&&(t=r.aRa(t),s.vya(t,function(t){t.$&&(t=t.object)&&(t=o.wXa(t,"Body","AcquireLicenseResponse","AcquireLicenseResult","Response","LicenseResponse","Licenses","License"))&&(t=o.g5a(t))&&(t=r.Ar(t))&&(t=c(t))&&i(t)}))},e.gzb=c,e.hzb=h,e.jzb=f,e.izb=l},function(t,e){_esm(e),e.eIa="PboReleaseLicenseCommandSymbol"},function(t,e){_esm(e),e.GHa="PboLicenseRequestTransformerSymbol"},function(t,e){_esm(e),e.wHa="PboCachedPlaydataSymbol"},function(t,e){_esm(e),e.IIa="PlaydataConfigSymbol"},function(t,e){_esm(e),e.Nda={pW:"keepAlive",splice:"splice"},e.CHa="PboEventSenderSymbol"},function(t,e){_esm(e),e.YHa="PboPlaydataPlaybackMonitorSymbol"},function(t,e){_esm(e),e.HBa="DxDisplaySymbol"},function(t,i,e){var n,r,a,o,s;function u(t,e,i){this.ce=t,this.is=e,this.prefix=i,this.SX=this.isVisible=!1,this.kb=new o.BLa(e)}_esm(i),i.WR=i.EJ=i.bAa=i.aAa=i.$za=void 0,t=e(1),n=e(0),r=e(29),a=e(27),o=e(1133),s=e(11),i.$za="position:fixed;left:0px;top:0px;right:0px;bottom:100px;z-index:1;background-color:rgba(255,255,255,.65)",i.aAa="position:fixed;left:100px;top:30px;right:100px;bottom:210px;z-index:9999;color:#000;overflow:auto;box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);background-color:rgba(255,255,255,.65);",i.bAa="position:fixed;left:100px;right:100px;height=30px;bottom:130px;z-index:9999;color:#000;overflow:auto;box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);background-color:rgba(255,255,255,.65);",i.EJ="",u.prototype.show=function(){this.isVisible||(this.Jvb(),this.bM&&s.Be.body.appendChild(this.bM),this.Jg&&s.Be.body.appendChild(this.Jg),this.QT&&s.Be.body.appendChild(this.QT),this.WI&&s.Be.getElementsByTagName("head")[0].appendChild(this.WI),this.isVisible=!0,this.refresh())},u.prototype.Qr=function(){this.isVisible&&(this.Jg&&s.Be.body.removeChild(this.Jg),this.QT&&s.Be.body.removeChild(this.QT),this.bM&&s.Be.body.removeChild(this.bM),this.WI&&s.Be.getElementsByTagName("head")[0].removeChild(this.WI),this.WI=this.lZ=this.bM=this.QT=this.Jg=void 0,this.isVisible=!1)},u.prototype.toggle=function(){this.isVisible?this.Qr():this.show()},u.prototype.Z_b=function(){(this.SX=!this.SX)||this.refresh()},u.prototype.LEb=function(t){return"table."+t+'-display-table {border-collapse:collapse;font-family:"Lucida Console", Monaco, monospace;font-size:small}table.'+t+"-display-table tr:nth-child(2n+2) {background-color: #EAF3FF;}table."+t+"-display-table tr:nth-child(2n+3) {background-color: #fff;}table."+t+"-display-table tr:nth-child(0n+1) {background-color: lightgray;}table."+t+"-display-table, th, td {padding: 2px;text-align: left;vertical-align: top;border-right:solid 1px gray;border-left:solid 1px gray;}table."+t+"-display-table, th {border-top:solid 1px gray;border-bottom:solid 1px gray}span."+t+"-display-indexheader {margin-left:5px;}span."+t+"-display-indexvalue {margin-left:5px;}span."+t+"-display-keyheader {margin-left:5px;}span."+t+"-display-keyvalue {margin-left:5px;}span."+t+"-display-valueheader {margin-left:5px;}ul."+t+"-display-tree {margin-top: 0px;margin-bottom: 0px;margin-right: 5px;margin-left: -20px;}ul."+t+"-display-tree li {list-style-type: none; position: relative;}ul."+t+"-display-tree li ul {display: none;}ul."+t+"-display-tree li.open > ul {display: block;}ul."+t+"-display-tree li a {color: black;text-decoration: none;}ul."+t+"-display-tree li a:before {height: 1em;padding: 0 .1em;font-size: .8em;display: block;position: absolute;left: -1.3em;top: .2em;}ul."+t+"-display-tree li > a:not(:last-child):before {content: '+';}ul."+t+"-display-tree li.open > a:not(:last-child):before {content: '-';}div."+t+"-display-div {float:right;display:flex;align-items:center;height:30px;width:130px;margin:10px;background-color:#C6CCD2;transition: all 200ms ease-in-out 0s;border-radius:6px;font-weight:300;font-size:16px;border-style:none;}button."+t+"-display-btn {float:right;display:inline-block;height:30px;width:100px;padding:3px;margin:10px;background-color:#C6CCD2;transition: all 200ms ease-in-out 0s;border-radius:6px;font-weight:300;font-size:16px;border-style:none;}select."+t+"-display-select {float:right;display:inline-block;height:30px;width:100px;padding:3px;margin:10px;background-color:#C6CCD2;transition: all 200ms ease-in-out 0s;border-radius:6px;font-weight:300;font-size:16px;border-style:none;}ul."+t+"-display-item-inline {margin:0;padding:0}."+t+"-display-btn:hover, ."+t+"-display-btn:focus, ."+t+"-display-btn:active {background: none repeat scroll 0 0 #B8BFC7 !important; }button."+t+"-display-btn-inline {float:right;display:inline-block;height:20px;width:40px;background-color:#C6CCD2;transition: all 200ms ease-in-out 0s;border-radius:6px;font-weight:300;font-size:12px;border-style:none;padding:0;color:palevioletred;background:rgba(0,0,0,0)}."+t+"-display-btn-inline:hover, ."+t+"-display-btn-inline:focus, ."+t+"-display-btn-inline:active {background: none repeat scroll 0 0 #B8BFC7 !important; }"},u.prototype.Jvb=function(){var e=this;this.WI=s.Be.createElement("style"),this.WI.type="text/css",this.WI.innerHTML=this.LEb(this.prefix),this.QT=this.ce.createElement("div",i.$za,void 0,{class:this.prefix+"-display-blur"}),this.Jg=this.ce.createElement("div",i.aAa,void 0,{class:this.prefix+"-display"}),this.bM=this.ce.createElement("div",i.bAa,void 0,{class:this.prefix+"-display"}),this.qXa().forEach(function(t){return e.bM.appendChild(t)})},u.prototype.Lvb=function(t){for(var e=(t=this.ce.createElement("div","",t,{class:this.prefix+"-display-tree1"})).querySelectorAll("ul."+this.prefix+"-display-tree a:not(:last-child)"),i=0;i<e.length;i++)e[i].addEventListener("click",function(t){var e,i;if(t=t.target.parentElement)if((e=t.classList).contains("open")){e.remove("open");try{for(i=t.querySelectorAll(":scope .open"),t=0;t<i.length;t++)i[t].classList.remove("open")}catch(t){}}else e.add("open")});return t},u.prototype.refresh=function(){var i=this;return!this.isVisible||this.SX?Promise.resolve():this.Y6a().then(function(t){if(t&&(t=i.Lvb(t),i.Jg)){i.lZ&&(i.Jg.removeChild(i.lZ),i.lZ=void 0),i.lZ=t,i.Jg.appendChild(i.lZ),t=i.Jg.querySelectorAll("button."+i.prefix+"-display-btn-inline");for(var e=0;e<t.length;++e)t[e].addEventListener("click",i.X7a);(t=i.Jg.querySelector("#"+i.prefix+"-display-close-btn"))&&t.addEventListener("click",function(){i.toggle()})}})},e=u,e=t.__decorate([n.R(),t.__param(0,n.l(r.cg)),t.__param(1,n.l(a.bg)),t.__param(2,n.nl())],e),i.WR=e},function(t,e){_esm(e),e.KBa="DxManagerSymbol",e.JBa="DxManagerProviderSymbol"},function(t,e){_esm(e),e.ZEa="LogDisplayConfigSymbol"},function(t,e){_esm(e),e.kMa="WindowUtilsSymbol"},function(t,e){_esm(e),e.qIa="PlayPredictionDeserializerSymbol"},function(t,e){_esm(e),e.qJa="PreparerManifestFetcherSymbol",e.pJa="PreparerLicenseFetcherSymbol",e.oJa="PreparerLegacyLicenseFetcherSymbol"},function(t,e,i){var n,r,a,o;function s(t){this.Em=t}_esm(e),e.jea=e.dJa=void 0,t=i(1),n=i(14),r=i(0),a=i(121),o=i(67),s.prototype.g2a=function(t){var e,i=this;return t.Nd.key.Ca?Promise.resolve(t.Nd.key.Ca):(e=t.Nd.key.W,t.Nd.Gj.Cn(e).hv.then(function(t){return(t=t.oa).Bo?o.xC(t.Bo,{config:n.config}):o.NI(e,i.Em.Lr(e))}))},i=s,i=t.__decorate([r.R(),t.__param(0,r.l(a.hK))],i),e.dJa=i,e.jea="PlaygraphResolverSymbol"},function(t,e){function i(){this.sJ=new Map}_esm(e),e.$ea=void 0,i.prototype.store=function(t,e){this.IPb(t),this.sJ.set(t,e)},i.prototype.Cn=function(t){return this.sJ.get(t)},i.prototype.has=function(t){return this.sJ.has(t)&&!this.sJ.get(t).Ot},i.prototype.clear=function(){this.sJ.clear()},i.prototype.IPb=function(t){var e;this.sJ.has(t)&&(null!==(e=(t=this.sJ.get(t)).events)&&void 0!==e&&e.emit("viewableEvicted",{type:"viewableEvicted"}),t.p$a=!0)},e.$ea=i},function(t,e){_esm(e),e.aGa="MediaHttpSymbol"},function(t,e){_esm(e),e.WGa="OpenConnectSideChannelSymbol",e.hGa="MediaRequestDownloaderSymbol"},function(t,e){_esm(e),e.fGa="MediaRequestConstructorFactorySymbol"},function(t,e){_esm(e),e.AHa="PboDispatcherSymbol"},function(t,e){_esm(e),e.zLa="TransportFactorySymbol",e.zGa="MslTransportSymbol",e.GKa="SslTransportSymbol"},function(t,e,i){var n,r;function a(t){return!(!t||!t.MD&&!t.pboc||!t.code&&!t.code)}function o(t){return!(!t||!t.Cc)}function s(t){return!!(t instanceof Error)}function u(t){switch(t){case"ACCOUNT_ON_HOLD":return r.L.sib;case"STREAM_QUOTA_EXCEEDED":return r.L.wib;case"INSUFFICICENT_MATURITY":return r.L.zib;case"TITLE_OUT_OF_WINDOW":return r.L.Gib;case"CHOICE_MAP_ERROR":return r.L.vib;case"BadRequest":return r.L.Bib;case"Invalid_SemVer_Format":return r.L.Aib;case"RESTRICTED_TO_TESTERS":return r.L.Eib;case"AGE_VERIFICATION_REQUIRED":return r.L.tib;case"BLACKLISTED_IP":return r.L.uib;case"DEVICE_EOL_WARNING":return r.L.Cda;case"DEVICE_EOL_FINAL":return r.L.YGa;case"INCORRECT_PIN":return r.L.bHa;case"MOBILE_ONLY":return r.L.Dib;case"MDX_CONTROLLER_CTICKET_INVALID":return r.L.Cib;case"VIEWABLE_RESTRICTED_BY_PROFILE":return r.L.Hib;case"RESET_DEVICE":return r.L.aHa;case"RELOAD_DEVICE":return r.L.$Ga;case"EXIT_DEVICE":return r.L.ZGa;case"FREE_PREVIEW_ENDED":return r.L.yib;case"STREAMING_LOCATION_DISALLOWED":return r.L.Fib;default:return r.L.MCa}}function c(t,e){var i=e.bladeRunnerCode?Number(e.bladeRunnerCode):void 0;return new n.qd(t,u(e.code),"BadRequest"===e.code?r.t0.cdb:void 0,e.code,void 0,e.display,void 0,e.detail,e.display,i,e.alert,e.alertTag)}function h(t,e){return new n.qd(t,e.Cc,e.Kd,void 0,e.mA,e.message,e.details,e.data)}_esm(e),e.ARa=e.BRa=e.RDb=e.VDb=e.Bn=e.UDb=e.FKb=e.AKb=e.n0a=void 0,n=i(41),r=i(3),e.n0a=a,e.AKb=o,e.FKb=s,e.UDb=u,e.Bn=function(t,e){return o(e)?h(t,e):a(e)?c(t,e):s(e)?n.qd.Hma(t,e):new n.qd(t,void 0,void 0,void 0,void 0,"Recieved an unexpected error type",void 0,e)},e.VDb=c,e.RDb=h,e.BRa=function(t,e,i,n,r){var a,o,s,u=e.A8a[i];if(void 0===u)throw{MD:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no configuration information",detail:e};if(void 0===(a=u.version))throw{MD:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no version information",detail:e};if(void 0===(o=u.service))throw{MD:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no service information",detail:e};if(void 0===(s=u.orgOverride)&&void 0===(s=e.organization))throw{MD:!0,code:"FAIL",display:"Unable to build the URL for "+i+" because there was no organization information",detail:e};return u.isPlayApiDirect?t.JGb(n)+"/"+s+"/"+o+"/"+a:t.yGb(n)+"/"+s+"/"+o+"/"+a+"/"+(void 0===r?"router":r)},e.ARa=function(t,e){var i={"Content-Type":"text/plain"};return e=e(),t.RPa&&e&&(i["X-Esn"]=e.Vk),i}},function(t,e){_esm(e),e.gIa="PboRequestFactorySymbol"},function(t,e){_esm(e),e.GLa="TrickPlayManagerSymbol"},function(t,e){_esm(e),e.wp=void 0,(t=e.wp||(e.wp={}))[t.J0=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.ME=2]="LOADED",t[t.kR=3]="LOAD_FAILED",t[t.XGa=4]="PARSE_FAILED"},function(t,e){_esm(e),e.qza="BandwidthMeterFactorySymbol"},function(t,e){_esm(e),e.AIa="PlaybackInfoPanelFactorySymbol"},function(t,e){_esm(e),e.QJa="RepositionTraceSymbol",e.OJa="RepositionTraceFactorySymbol"},function(t,e,i){var n,r,a,M,o,s,u,c,D,U,B,F,q,h,H,K,f,V,l,G,J,z,Y,W,X,p,d,Q,b,m,g,Z,v,$,tt,y,w,_,E,et,k,S;function T(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j){var C,L;(C=this).fb=r,this.Ek=a,this.Gz=o,this.Aa=u,this.mC=c,this.za=h,this.GW=f,this.$qa=d,this.NN=b,this.Fd=m,this.Lh=g,this.Vi=v,this.KL=y,this.KX=w,this.nk=_,this.uxa=E,this.Vf=k,this.pe=S,this.qta=T,this.Dm=A,this.q7a=O,this.hia=I,this.JH=x,this.$sa=P,this.EL=R,this.Q3=N,this.P5a=[],this.gs=new Map,this.oc=new B.dc(null),this.xg=new B.dc(null),this.jc=new B.dc(null),this.ci=new B.dc(null),this.cv=new B.dc(void 0),this.We=new B.dc(null),this.jh=new B.dc(null),this.mediaTime=new B.dc(void 0),this.playbackRate=new et.EIa(1,F.config.lra),this.Jxa=function(t){return C.oc.set(t.newValue)},this.x1b=function(t){return C.xg.set(t.newValue)},this.u1b=function(t){return C.jc.set(t.newValue)},this.W0b=function(t){return C.ci.set(t.newValue)},this.t1b=function(t){return C.cv.set(t.newValue)},this.w1b=function(t){return C.We.set(t.newValue)},this.X0b=function(t){return C.jh.set(t.newValue)},this.l1b=function(t){return C.oe.set(t.newValue)},this.k1b=function(t){return C.jf.set(t.newValue)},this.h1b=function(t){return C.mediaTime.set(t.newValue)},this.Eaa=function(t){return C.playbackRate.set(t.newValue)},this.mk={},this.gva=this.nxa=0,this.Ub=new q.Gk,this.SZ={},this.YY=this.I5a=!1,this.state=new B.dc($.Rb.dK),this.yj=new B.dc(!1),this.paused=new B.dc(!1),this.muted=new B.dc(!1),this.volume=new B.dc(F.config.Ezb/100),this.yb=new B.dc($.cb.Pf),this.Cf=new B.dc($.yf.xd),this.zr=new B.dc($.yf.xd),this.Mm=new B.dc($.yf.xd),this.jf=new B.dc(null),this.oe=new B.dc(null),this.$ia=new B.dc(null),this.O6=D.CDa(this),this.qc=[new B.dc(null),new B.dc(null)],this.Iia={},this.wM=!1,this.Ra=this.Aj=-1,this.Rna=function(t,e){var i;return t=void 0===t?null:t,Q.Ba(t)?(!e||C.um(e).oa)&&null!==(i=C.Ka)&&void 0!==i&&i.$h?C.Ka.Dt(t):t:null},this.m4a=function(){C.ywa()},this.gM=t,this.addEventListener=this.Ub.addListener,this.removeEventListener=this.Ub.removeListener,this.fireEvent=this.Ub.Fc,this.IPa({W:t,xa:n,bb:i||{}},F.config.Sw?this.Fd.Az(t):void 0,e),this.log=J.Ih(this),this.E4=s(this),this.Csb=l(this),this.Jg=Z.createElement("DIV",U.uea,void 0,{id:this.J}),this.SJb(),L=p(z.vh(1)),this.od=this.log.oka("Playback"),this.xSb=M.nIa(this),K.zB.r3a=this,K.zB.rma||(K.zB.rma=this),this.od.info("Playback created",this.Ri),this.Gqa?this.od.info("Playback selected for trace playback info logging"):this.od.trace("Playback not selected for trace playback info logging"),F.config.Sw&&(this.Fd.kIb(this.J),this.addEventListener($.ca.Cq,function(){C.Fd.lIb(C.J),C.jc.addListener(function(){C.Fd.wZa()}),C.oc.addListener(function(){C.Fd.wZa()})}),this.addEventListener($.ca.kg,function(){C.Fd.jIb(C.J)})),this.state.addListener(function(t){C.od.info("Playback state changed",{From:t.oldValue,To:t.newValue}),W.hb(t.newValue>t.oldValue)}),H.ve.addListener(H.El,this.m4a,U.P0),this.mediaTime.addListener(function(){C.qDb(),L.Ol(function(){return C.mWa()})}),this.yb.addListener(function(t){C.od.info("PresentingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.cj(C.mediaTime.value)},C.su())}),this.yb.addListener(function(){C.yj.set(C.yb.value===$.cb.Kc)}),this.Cf.addListener(function(t){C.od.info("BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.cj(C.mediaTime.value)},C.su())}),this.zr.addListener(function(t){C.od.info("AV BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.cj(C.mediaTime.value)},C.su())}),this.Mm.addListener(function(t){C.od.info("Text BufferingState changed",{From:t.oldValue,To:t.newValue,MediaTime:X.cj(C.mediaTime.value)},C.su())}),this.oc.addListener(function(t){W.hb(t.newValue&&t.newValue.oi),C.od.info("AudioTrack changed",t.newValue&&{ToBcp47:t.newValue.Wd,To:t.newValue.trackId},t.oldValue&&{FromBcp47:t.oldValue.Wd,From:t.oldValue.trackId},{MediaTime:X.cj(C.mediaTime.value)})}),this.jc.addListener(function(t){W.hb(!t.newValue||t.newValue.oi),C.od.info("TimedTextTrack changed",t.newValue?{ToBcp47:t.newValue.Wd,To:t.newValue.trackId}:{To:"none"},t.oldValue?{FromBcp47:t.oldValue.Wd,From:t.oldValue.trackId}:{From:"none"},{MediaTime:X.cj(C.mediaTime.value)})}),this.yb.addListener(function t(e){e.newValue!==$.cb.Pf&&(C.yb.removeListener(t),C.JX=C.za.ff.da(z.ja),C.Ub.Fc($.ca.Bq))},U.cF),this.yb.addListener(function t(e){e.newValue!==$.cb.Pf&&e.newValue!==$.cb.hh&&(C.yb.removeListener(t),C.qH=C.za.FY,C.Ub.Fc($.ca.Cq))}),this.addEventListener($.ca.Cq,function(){C.YY=!0,C.M9a=C.XT(),C.Dd("start"),C.d7=C.oe.value.stream.bitrate}),G.wIa(this),K.ho.push(this),F.config.nY&&(this.E9=this.qta(this),this.G9=new V.GIa(this)),K.bea.forEach(function(t){t(C)}),this.Hqb=function(){C.addEventListener($.ca.tI,function(t){var e;(t=t.cause)!==$.Ce.Fx&&t!==$.Ce.lK&&null!==(e=C.Ka)&&void 0!==e&&e.stop()}),C.addEventListener($.ca.wk,function(e){var t,i,n,r,a,o,s,u,c;if(C.q7a.wk(e),i=e.cause,n=e.skip,r=e.U8,a=e.Csa,o=e.J,s=e.ek,C.ha.Ll.nsa(a,r),i!==$.Ce.lK&&(F.config.zDb&&i===$.Ce.UR&&C.Ka.K3(),i!==$.Ce.Fx))if(n)if(null!==(n=C.Ka)&&void 0!==n&&n.Li(r)){C.od.trace("Repositioned. Skipping from "+a+" to "+r),e=function(t){C.log.error("streamingSession.skipped threw an exception",t),t=tt.qd.Hma(Y.M.rcb,t),C.Dq(t.code,t)};try{C.Ka.Vn(r).then(function(t){t.wN||null!==(t=C.Ka)&&void 0!==t&&t.play()}).catch(e)}catch(t){e(t)}}else C.log.error("can skip returned false");else{C.od.trace("Repositioned. Seeking from "+a+" to "+r);try{u=C.fb.k6(C.ha),c=Object.keys(u.qa).find(function(t){return(t=u.qa[t]).W===o&&t.Jb<=s&&(null!==(t=t.Ob)&&void 0!==t?t:1/0)>s}),null!==(t=C.Ka)&&void 0!==t&&t.ss(s,c)}catch(t){C.log.error("streamingSession.seekByContentPts threw an exception",t),r=tt.qd.Hma(Y.M.pcb,t),C.Dq(r.code,r)}}})},this.playbackRate.addListener(function(){var t,e;null!==(t=C.Ka)&&void 0!==t&&t.$h&&null!==(e=C.Ka)&&void 0!==e&&e.sta()}),this.addEventListener($.ca.Jy,function(t){t.cause==K.Yda&&(C.Cf.set($.yf.xd),null!==(t=C.Ka)&&void 0!==t&&t.Zn(C.Xf.IXa()))}),j&&(this.ha.oa=j,this.nk.aZ(t,j))}_esm(e),e.zIa=void 0,n=i(1),r=i(47),a=i(295),M=i(297),o=i(134),s=i(529),u=i(1180),c=i(1181),D=i(532),U=i(12),B=i(80),F=i(14),q=i(73),h=i(533),H=i(60),K=i(58),f=i(106),V=i(535),l=i(1184),G=i(539),J=i(8),z=i(4),Y=i(3),W=i(21),X=i(92),p=i(24),d=i(61),Q=i(19),b=i(540),m=i(129),g=i(302),Z=i(30),v=i(103),$=i(15),tt=i(41),y=i(298),w=i(542),_=i(131),E=i(1187),et=i(1188),k=i(67),S=i(51),T.prototype.Dd=function(t,e){e=void 0===e?this.gM:e,null!==(e=this.gs.get(e))&&void 0!==e&&e.Dd(t)},T.prototype.Hz=function(t){this.ha.Hz(t)},T.prototype.SJb=function(){var e=this;this.oc.addListener(function(t){return e.ha.oc.set(t.newValue)}),this.xg.addListener(function(t){return e.ha.xg.set(t.newValue)}),this.jc.addListener(function(t){return e.ha.jc.set(t.newValue)}),this.ci.addListener(function(t){return e.ha.ci.set(t.newValue)}),this.cv.addListener(function(t){return e.ha.cv.set(t.newValue)}),this.We.addListener(function(t){return e.ha.We.set(t.newValue)}),this.jh.addListener(function(t){return e.ha.jh.set(t.newValue)}),this.oe.addListener(function(t){return e.ha.oe.set(t.newValue)}),this.jf.addListener(function(t){return e.ha.jf.set(t.newValue)}),this.qc[r.Tb.Ta.Wb].addListener(function(t){return e.ha.qc[r.Tb.Ta.Wb].set(t.newValue)}),this.qc[r.Tb.Ta.Mb].addListener(function(t){return e.ha.qc[r.Tb.Ta.Mb].set(t.newValue)}),this.mediaTime.addListener(function(t){return e.ha.mediaTime.set(t.newValue)}),this.playbackRate.addListener(function(t){return e.ha.playbackRate.set(t.newValue)}),this.V7a()},T.prototype.V7a=function(){var e=this;this.ha!==this.Eva&&(this.ha.mediaTime.set(this.mediaTime.value),this.ha.playbackRate.set(this.playbackRate.value),this.Tq(function(t){return t.oc},this.Jxa),this.Tq(function(t){return t.xg},this.x1b),this.Tq(function(t){return t.cv},this.t1b),this.Tq(function(t){return t.jc},this.u1b),this.Tq(function(t){return t.ci},this.W0b),this.Tq(function(t){return t.We},this.w1b),this.Tq(function(t){return t.jh},this.X0b),this.Tq(function(t){return t.jf},this.k1b),this.Tq(function(t){return t.oe},this.l1b),this.Tq(function(t){return t.qc[r.Tb.Ta.Wb]},function(t){return e.qc[r.Tb.Ta.Wb].set(t.newValue)}),this.Tq(function(t){return t.qc[r.Tb.Ta.Mb]},function(t){return e.qc[r.Tb.Ta.Mb].set(t.newValue)}),this.Tq(function(t){return t.mediaTime},this.h1b),this.Tq(function(t){return t.playbackRate},this.Eaa),this.jc.set(this.ha.jc.value),this.oc.set(this.ha.oc.value,{dQa:!0}),this.xg.set(this.ha.xg.value),this.ci.set(this.ha.ci.value),this.cv.set(this.ha.cv.value),this.We.set(this.ha.We.value),this.jh.set(this.ha.jh.value),this.Eva=this.ha)},T.prototype.Tq=function(t,e){this.Eva&&t(this.Eva).removeListener(e),t(this.ha).addListener(e)},T.prototype.load=function(t){var e,i=this;this.load=function(){},this.S5a=t,this.state.value==$.Rb.dK&&(this.od.info("Playback loading",this),this.KPb(),this.Dd("asl_load_start"),e=(t=this.mC).endTime,Q.Xc(t.startTime)?Q.Xc(e)?this.Dd("asl_ended"):this.Dd("asl_in_progress"):this.Dd("asl_not_started"),this.mC.LN(function(t){i.Dd("asl_load_complete"),t.$?i.Mxb():i.Dq(t.errorCode||Y.M.Gca,t)}))},T.prototype.ZSb=function(){var e;try{this.state.value===$.Rb.LOADING&&(e={width:1,height:1,Tha:1},this.fH().forEach(function(t){e.width*e.height<t.width*t.height&&(e.width=t.width,e.height=t.height,e.Tha=t.Tha)}),this.cB=e,this.aw=this.KL.Yqb({oJ:z.Nc(this.Z),J:this.J,D9:this.Uy,bb:this.bb}).da(z.ja),this.eia(),this.Lyb())}catch(t){this.Dq(Y.M.Ggb,{na:Y.L.Lj,ub:p.wd(t)})}},T.prototype.Nw=function(){var t,e=this.fb.k6(this);this.qTa(e),null!==(t=this.Ka)&&void 0!==t&&t.KZ(e)},T.prototype.WH=function(t){var e,i;W.hb(this.Ka,"ASE should be initialized"),(i=this.fb.DV(t))?t===this.fb.oh?this.Ka.Cr(i,!0,!0)||this.NV(i,{}):null!==(e=this.Ka)&&void 0!==e&&e.wi(t,i,!1,!0):this.log.warn("onNextSegmentChanged: Next segment not found")},T.prototype.NV=function(t,e,i){var n,r,a=this;if(i=void 0===i||i,n=this.fb.ue(t),this.Vi.Jaa&&this.fb.ha.W===n.W)return Promise.resolve(this.Xf.seek(n.Jb,$.Ce.CB,void 0));if(e=m.u8(this.Ek.lN(n.W).Fb,e),null===(n=this.Ka)||void 0===n||!n.$h)throw this.log.debug("No streaming session. Aborting transition"),Error("No streaming session");return this.log.debug("going to next segment: "+this.fb.oh+" -> "+t),this.bG("Transition "+this.fb.oh+"->"+t),(r=this.um(t)).Nm=this.Aa.Yb().da(z.ja),r.bb=e,"seamless"!==(null!==(e=this.fb.ue(t).ae)&&void 0!==e?e:"seamless")||i?(this.Ka.bN(t).NL?this.VHb(t,r.J):this.AY(t,r.J)).then(function(){a.IDb(r.J)}):Promise.resolve()},T.prototype.AY=function(t,e){var i=this.fb.fl.qa[t].Jb;return this.log.debug("Segment is not pre-buffered - performing a regular seek"),this.bG("NO DATA "+t+", SEEKING "+i+", viewableId: "+e),Promise.resolve(this.Xf.seek(i,$.Ce.CB,t,!0))},T.prototype.VHb=function(e,i){var t,n,r,a=this,o=this.Ka;if(null==o||!o.$h)throw Error("No streaming session");return t=new Promise(function(e){o.addEventListener("stop",function t(){a.log.debug("Stopped ASE"),o.removeEventListener("stop",t),e()})}),n=!1,r=new Promise(function(i){a.addEventListener($.ca.tI,function t(){a.log.debug("Repositioning"),a.removeEventListener($.ca.tI,t),o.stop()}),a.addEventListener($.ca.wk,function t(e){a.log.debug("Repositioned"),a.removeEventListener($.ca.wk,t),n=e.skip,i()})}),t=Promise.all([t,r]).then(function(){var t=!1;if(n&&(t=o.Cr(e,!1,!0)),!t)return a.bG("Seek forced - ASE chooseNextSegment failed. Likely ASE entered panic mode and chose a default segment."),a.AY(e,i)}),r=o.cM(e,this.fb.fl.qa[e].Jb),this.log.debug("Calling seek on internal player to "+r),this.Xf.seek(r,$.Ce.lK,e,!0),t},T.prototype.IPa=function(t,e,i){var n,r,a;e=void 0===e?this.Gz.Wy():e,i=void 0===i?this.Aa.Yb():i,n=!(!F.config.Bbb||e%F.config.Bbb),r=t.W,a=t.xa,t=t.bb,this.gs.has(r)?this.gs.get(r):(e=this.KX(K.zB.index++,r,a,t,e,i,n,this.ha,this.Rna),this.gs.set(r,e),1<this.gs.size&&(e.AW=this.NN.create(this,e,!1)),e.VN=new f.kGa(this,e),null!==(r=this.Ka)&&void 0!==r&&r.oU(e.xa,{ba:e.ba,ds:e.Fg}))},T.prototype.dN=function(t){if(!this.gs.has(t))throw Error("Playback segment not found: "+t);return this.gs.get(t)},T.prototype.um=function(t){return t=this.fb.ue(t),null!==(t=this.gs.get(null==t?void 0:t.W))&&void 0!==t?t:this.ha},T.prototype.NGb=function(t){for(var e,i=nt(this.LX),n=i.next();!n.done;n=i.next())if((null===(e=null===(e=(n=n.value).nf)||void 0===e?void 0:e.Ib)||void 0===e?void 0:e.sessionId)===t)return n;return this.ha},T.prototype.pUb=function(e){var i=this,n=e.J;return this.Ek.GXb(n),this.EY(e).then(function(t){return i.Uta(t,e),(e.oD?i.Vb.Gl.r7a(e):Promise.resolve()).then(function(){return i.Ek.L8a(n)})}).catch(function(t){throw i.log.error("queueManifest failed",t),i.Ek.FXb(n,t),i.Lh(t.code,t)})},T.prototype.wEb=function(){if(Q.Ba(this.pd.ats)&&Q.Ba(this.pd.at))return this.pd.at-this.pd.ats},T.prototype.cXa=function(){var t=this.QZ(),e=this.DT();return Math.min(t,e)},T.prototype.yP=function(){this.background||(this.od.info("Starting inactivity monitor for movie "+this.J),new h.fEa(this))},T.prototype.close=function(t){t&&(this.state.value==$.Rb.CLOSED?t():this.addEventListener($.ca.closed,function(){t()})),this.ywa()},T.prototype.Xd=function(t,e,i){t=this.Lh(t,e,i),this.qG(t,void 0)},T.prototype.qG=function(t,e){var i,n,r,a=this;this.state.value==$.Rb.dK?this.li||(this.li=t,this.load()):(e&&(this.state.value==$.Rb.CLOSED?e():this.addEventListener($.ca.closed,function(){e()})),i=function(){a.ywa(t)},n=F.config.eUa&&t&&F.config.eUa[t.errorCode],r=-1,Q.Sz(n)&&(r=p.He(n)),this.od.error("Fatal playback error",{Error:""+t,HandleDelay:""+n}),0<=r?setTimeout(i,r):i())},T.prototype.bG=function(t){var e=void 0===e?this.xa:e;this.P5a.push(this.Aa.Yb().da(z.ja)+"-"+e+"-"+t)},T.prototype.ADb=function(){this.mWa()},T.prototype.Gna=function(){var t;return null!==(t=this.Ka)&&void 0!==t&&t.$h&&void 0!==(t=this.Ka.Ko().id)?t:null},T.prototype.TC=function(){var t=null===(t=this.Ka)||void 0===t?void 0:t.$h;return void 0===this.ha.iU||t?this.Rna(this.mediaTime.value):this.ha.iU},T.prototype.Fna=function(){var t=this.Rna(this.Xf.IXa());return null===t?null:Math.min(this.Uy.da(z.ja),Math.max(0,t))},T.prototype.qV=function(){var t;return null===(t=null===(t=this.oa)||void 0===t?void 0:t.$b.Bo)||void 0===t?void 0:t.qa},T.prototype.Daa=function(t){this.bb=m.u8(this.bb,t),this.eia()},T.prototype.rEb=function(){return this.oc.value?this.oc.value.streams:[]},T.prototype.fH=function(t){return t=void 0===t?this.J:t,(t=this.dN(t).xg)&&t.value?t.value.streams:[]},T.prototype.rIb=function(e){for(var t=nt(this.LX),i=t.next();!i.done;i=t.next())if(i=(i=i.value.hi)&&i.find(function(t){return t.id===e}))return i},T.prototype.lTb=function(t){(t=void 0===t?this.ha:t).jc.value?this.Qq.iTb(t.jc.value):Promise.resolve()},T.prototype.xZa=function(e){for(var t=nt(this.LX),i=t.next();!i.done;i=t.next())for(var n=(i=nt(i.value.Ki)).next();!n.done;n=i.next())if(n=n.value.streams.find(function(t){return t.Bc===e}))return n},T.prototype.IZa=function(e){for(var t=nt(this.LX),i=t.next();!i.done;i=t.next())for(var n=(i=nt(i.value.ip)).next();!n.done;n=i.next())if(n=(n=n.value)&&n.streams.find(function(t){return t.Bc===e}))return n},T.prototype.Ft=function(){var t,e;return null!==(e=null===(t=null===(e=this.G9)||void 0===e?void 0:e.kU)||void 0===t?void 0:t.call(e))&&void 0!==e?e:this.Wxb().LC},T.prototype.b9a=function(t){var e,i;null!==(e=this.Ka)&&void 0!==e&&e.$h&&this.gs.has(t)&&(null!==(i=this.G9)&&void 0!==i&&i.kU?this.G9.Kab():(e=this.uka(t),this.Ka.Lq(e,t)))},T.prototype.mLb=function(){return"trailer"===this.ye},T.prototype.xKb=function(){return!!this.ye&&0<=this.ye.indexOf("billboard")},T.prototype.rLb=function(){return!!this.ye&&0<=this.ye.indexOf("video-merch")},T.prototype.SKb=function(){return!!this.ye&&0<=this.ye.indexOf("mini-modal")},T.prototype.nD=function(){return this.mLb()||this.xKb()||this.rLb()||this.SKb()},T.prototype.O5=function(){var t,e,i;if(this.ip){for(var n,r=0;r<this.ip.length;r++)for(var a=this.ip[r],o=0;o<a.streams.length;o++)t=a.streams[o],Q.Ba(t.vka)&&Q.Ba(t.o4)&&Q.Ba(t.n4)&&Q.Ba(t.m4)&&(0<t.vka||0<t.o4)&&(i=e=1,Q.Ba(t.z5a)&&Q.Ba(t.A5a)&&(e=t.z5a,i=t.A5a),t=t.m4*i/(t.n4*e),n=Q.Ba(n)?Math.min(n,t):t);return n}},T.prototype.cHb=function(){return{tr:this.nxa,rt:this.gva}},T.prototype.wz=function(t){return this.mk[t]},T.prototype.eja=function(){return this.Nm?this.Aa.Yb().da(z.ja)-this.Nm:this.za.ff.da(z.ja)-this.VG()},T.prototype.XT=function(){var t;return this.Nm?this.Aa.Yb().da(z.ja)-this.Nm:(t=this.Aa.Vz,this.JX-(this.vk.da(z.ja)+t.da(z.ja)))},T.prototype.gja=function(){return this.Nm?this.Aa.Yb().da(z.ja)-this.Nm:this.JX-this.VG()},T.prototype.DPb=function(t){var i=this.loadTime,n={};return p.te(t,function(t,e){n[t]=e.map(function(t){return t-i})}),n},T.prototype.EEb=function(){var i=this.loadTime,n={};return p.te(this.Iia,function(t,e){n[t]=e.map(function(t){return t-i})}),s.$v?{level:s.$v.eYa(),charging:s.$v.Zma(),statuses:n}:null},T.prototype.s6=function(){return this.lWa(),this.SZ},T.prototype.VG=function(){var t=this.bb.HZ,t=Q.Ba(t)?t:this.vk.da(z.ja)+this.Aa.Vz.da(z.ja);return W.hb(Q.Rz(t)),t},T.prototype.Lna=function(){return this.Aa.Yb().da(z.ja)-this.vk.da(z.ja)},T.prototype.c9a=function(t,e){this.SZ[t]=e},T.prototype.E2b=function(){this.HYb=!0},T.prototype.c9=function(){this.$6a()},T.prototype.QZ=function(){var t=this.o3();return t&&t.vbuflmsec||0},T.prototype.DT=function(){var t=this.o3();return t&&t.abuflmsec||0},T.prototype.gya=function(){var t=this.o3();return t&&t.vbuflbytes||0},T.prototype.oia=function(){var t=this.o3();return t&&t.abuflbytes||0},T.prototype.EY=function(e,t,i){var n,r,a,o=this;return e=void 0===e?this.ha:e,i=void 0===i||i,r=!(n=!!t)&&e!==this.ha,a=F.config.W9.enabled?v.Vm.ujb:r?v.Vm.eF:this.nD()?v.Vm.g1:v.Vm.rp,n=this.nD()||n?void 0:this.Vb.Gl.b6(r),this.nk.ZM({ba:e.ba,bb:e.bb,W:e.J,Tt:a,Uf:n,raa:t},i).then(function(t){return t.h0a&&o.fireEvent($.ca.KN,{J:e.J}),t})},T.prototype.Uta=function(t,e,i){var n;e=void 0===e?this.ha:e,i=void 0!==i&&i,n=this.GW.create(this),n=i?(t=(n=n.mJb(e.oa,e.Rc,t)).oa,n.Rc):n.f5a(t),e.oa=t,e.Rc=n,i||(e.xg.set(n.A4),e.oc.set(n.vU),e.jc.set(n.xU))},T.prototype.IDb=function(t){this.EI(t,!1)},T.prototype.AZa=function(t,e){return!this.Vi.bya||((t=this.Bu.da(z.ja)-t)<0||e<t)},T.prototype.mWb=function(){this.Xf.seek(this.TC()||0,$.Ce.c0)},T.prototype.c_a=function(i,n){var r=this,a=this.ha;return a.G4=!0,this.EY(a,{uRb:a.Ti,ZVb:i,bWb:n},!1).then(function(t){return r.Uta(t,a,!0),r.nk.aZ(a.J,a.oa),null===(t=r.Ka)||void 0===t?void 0:t.lx(r.O5a)}).then(function(){var t=a.Ki.find(function(t){return t.trackId===i}),e=a.Qh.find(function(t){return t.trackId===n});if(!(t&&t.oi&&e&&e.oi))throw Error("Track hydration failed: requiredAudioTrackId="+i+" requiredTextTrackId="+n);return r.fireEvent($.ca.lab),{oc:t,pZ:e}})},T.prototype.EI=function(t,e){var i,n;if(this.BO){if(t===this.gM)return void(this.BO=t);(n=(i=this.dN(t)).oa)&&Q.Xc(n.uI)&&Q.Xc(n.TO)&&i.Hz({pr_ats:n.uI,pr_at:n.TO}),this.fireEvent($.ca.Yqa,{J:this.gM}),this.gM=t,this.eia(),e||this.V7a(),this.qH=this.za.FY,this.ha.Nm||(this.ha.Nm=this.Aa.Yb().da(z.ja))}("boolean"==typeof this.bb.zM?this.bb:F.config).zM&&!e&&this.uxa.zM(this),e={J:t,p7:e,BO:this.BO},this.BO=t,this.fireEvent($.ca.CH,e)},T.prototype.Mxb=function(){try{this.Vb=new u.ZFa(this),this.e4=new y.GAa(this),this.AW=this.NN.create(this,this.ha,!0),F.config.aub&&new w.uCa(this,this.Vf,this.log),F.config.$T&&this.$T(this),this.f2b()}catch(t){this.Dq(Y.M.Fgb,{na:Y.L.Lj,ub:p.wd(t)})}},T.prototype.f2b=function(){this.li?this.qG(this.li):Q.Lpa(this.J)?this.zub():this.Dq(Y.M.rgb,{ub:""+this.J})},T.prototype.zub=function(){var t=a.UI.D8a;t?t.$?this.Mja():this.Dq(Y.M.bEa,t):(W.hb(!F.config.V4),this.Aha())},T.prototype.Mja=function(){var t=this;!this.background&&F.config.Mja?K.aea(function(){t.Aha()},this):this.Aha()},T.prototype.Aha=function(){var e=this;this.state.value==$.Rb.LOADING&&(F.config.Gla&&!this.nD()?a.UI.vy(K.vIa,function(t){t.$?(e.W7=t.W7,F.config.D$?e.xia():e.Kva()):e.Dq(Y.M.aEa)},!0):F.config.D$?this.xia():this.Kva())},T.prototype.Kva=function(){var e=this;this.state.value==$.Rb.LOADING&&(this.Dd("ic"),this.xSb.gXb(function(t){t.error&&e.log.error("Error sending persisted playdata",Y.Ts(t));try{e.xia()}catch(t){e.log.error("playback.authorize threw an exception",t),e.Dq(Y.M.Bcb,{na:Y.L.Lj,ub:p.wd(t)})}}))},T.prototype.xia=function(){var t,e,n=this;this.state.value==$.Rb.LOADING&&(this.log.info("Authorizing",this),t=this.Aa.Yb().da(z.ja),this.Dd("ats"),W.kM(this.J),W.kM(this.Fj),e=this.WTb.bind(this,t),Promise.all([this.oa,F.config.Sw&&this.nk.uoa(this.J)?this.nk.L5(this.J).catch(function(){}):void 0]).then(function(t){var e,i=nt(t);return t=i.next().value,i=i.next().value,t&&i?e=i.$b.expiration>t.$b.expiration?i:t:t?e=t:i&&(e=i),e&&e.$b.expiration-S.W3()<18e5&&(e=void 0),e?(n.lG=e===t?"ui":"videopreparer",e):n.EY()}).then(function(t){try{n.Uta(t),e(U.Ye),n.I5a||(n.I5a=!0,n.$sa.ap(n))}catch(t){n.log.error("Exception processing authorization response",t),e({$:!1,na:Y.L.ejb})}}).catch(e))},T.prototype.WTb=function(t,e){var i,n=this;this.state.value==$.Rb.LOADING&&(this.Dd("at"),i=this.oa,this.Hz({pr_ats:i&&Q.Xc(i.uI)?i.uI:t,pr_at:i&&Q.Xc(i.TO)?i.TO:this.Aa.Yb().da(z.ja)}),e.$?0<this.Rc.hi.length&&this.Rc.vU&&this.Rc.A4&&this.Rc.xU?this.S5a?(this.log.info("Processing post-authorize",this),this.S5a(this,function(t){t.$?n.Oab():n.Dq(Y.M.Kgb,t)})):this.Oab():this.Dq(Y.M.lhb,this.$qa(this.Rc)):this.Dq(Y.M.sR,e))},T.prototype.Oab=function(){var i;n.__awaiter(this,void 0,void 0,function t(){var e=this;return A(t,function(t){return e.state.value!=$.Rb.LOADING?t.return():(null!==(i=e.ha.oa)&&void 0!==i&&i.$b.Bo&&e.fb.reset(k.xC(null===(i=e.ha.oa)||void 0===i?void 0:i.$b.Bo,{config:F.config})),e.Ka=e.hia(e.fb,e),e.Ka.kYb({ln:o.ln,config:F.config,pe:e.pe,od:e.od,su:e.su.bind(e),Oi:J.Oi,JY:e.JY.bind(e),EI:e.EI.bind(e)}),e.ZSb(),void(t.SH=0))})})},T.prototype.Lyb=function(){var t,e,i,n,r,a=this;try{if(this.state.value===$.Rb.LOADING){this.Vb.open(),t=new Promise(function(t){a.Vb.addEventListener(g.Oj.H9a,t)}),this.Xf=new b.dGa(this),e=this.Rc.vU.ml===_.vp.NONE,i={Vg:!1,DW:!1,ii:!this.oD,zO:!!this.bb.w7,Ha:this.bb.Ha,sE:this.Rc.vU.Vr||e},n={ba:this.ba,ds:this.Fg,iz:this.iz};try{if(this.state.value!==$.Rb.LOADING)return;(r=this.Ka).e7({flags:i,hw:n,xa:this.O5a,uka:this.uka.bind(this)}),this.qTa(this.fb.k6(this)),this.Hqb(),r.Osb({mk:this.mk,loadTime:this.loadTime})}catch(t){throw this.log.error("Failed to initialize ASE streaming",{error:t,startPts:this.Z,flags:i}),t}t.then(function(){var t;a.state.value!==$.Rb.CLOSING&&a.state.value!==$.Rb.CLOSED&&null!==(t=a.Ka)&&void 0!==t&&t.open()}),this.mediaTime.set(this.Z),this.Qq=new c.pLa(this),("boolean"==typeof this.bb.f$?this.bb:F.config).f$&&(this.sZ=new l.qLa(this)),this.yP(),K.cea.forEach(function(t){t(a)}),this.JPb()}}catch(t){this.Dq(Y.M.Hgb,{na:Y.L.Lj,ub:p.wd(t)})}},T.prototype.KPb=function(){W.hb(this.state.value==$.Rb.dK),this.loadTime=this.Aa.Yb().da(z.ja),this.state.set($.Rb.LOADING)},T.prototype.Dq=function(t,e){this.done||(this.done=!0,e instanceof tt.qd?this.Xd(e.code,e):this.Xd(t,e))},T.prototype.$T=function(i){var n,t;function e(){var t=s.$v.Zma()+"",e=i.Iia[t];(e=e||(i.Iia[t]=[])).push(n.Aa.Yb().da(z.ja)),n.log.trace("charging change event",{level:s.$v.eYa(),charging:s.$v.Zma()})}n=this,t=s.$v.Edb,s.$v.addEventListener(t,e),i.addEventListener($.ca.kg,function(){s.$v.removeEventListener(t,e)})},T.prototype.ywa=function(t){var e=this;if(this.state.value==$.Rb.dK||this.state.value==$.Rb.LOADING||this.state.value==$.Rb.re){this.od.info("Playback closing",this,t?{ErrorCode:t.I4}:void 0),this.bG("Closing"),H.ve.removeListener(H.El,this.m4a),this.li=t,this.ha.iU=this.TC(),this.lWa(),null!==(t=this.Ka)&&void 0!==t&&t.$h&&this.Ka.flush();try{this.Ub.Fc($.ca.kg,{movieId:this.gM})}catch(t){this.od.error("Unable to fire playback closing event",t)}this.state.set($.Rb.CLOSING),this.ocb(),this.HYb||d.Rf(function(){return e.$6a()})}},T.prototype.qDb=function(){this.Ub.Fc($.ca.Hab)},T.prototype.mWa=function(){var t=this.mediaTime.value;this.ZLb!=t&&(this.ZLb=t,this.Ub.Fc($.ca.fxa))},T.prototype.$6a=function(){var t,e=this;W.hb(this.state.value==$.Rb.CLOSING),t=this.W7,this.W7=void 0,t?a.UI.release(t,function(t){W.hb(t.$),e.Tja()}):this.Tja()},T.prototype.ocb=function(){var t;null!==(t=this.Ka)&&void 0!==t&&t.ed(),delete this.Ka,delete this.Bcc,delete this.Acc},T.prototype.Tja=function(){var t;this.Tja=U.ql,W.hb(this.state.value==$.Rb.CLOSING),t=K.ho.indexOf(this),W.hb(0<=t),K.ho.splice(t,1),this.state.set($.Rb.CLOSED),this.Ub.Fc($.ca.closed,void 0,!0),this.Ub.Fh(),delete this.nf,this.ha.c9()},T.prototype.eia=function(){this.bb.playbackState&&("number"==typeof this.bb.playbackState.volume&&this.volume.set(X.op(this.bb.playbackState.volume,0,1)),"boolean"==typeof this.bb.playbackState.muted&&this.muted.set(this.bb.playbackState.muted),"number"==typeof this.bb.playbackState.playbackRate&&this.playbackRate.set(this.bb.playbackState.playbackRate))},T.prototype.lWa=function(){this.Ub.Fc($.ca.q9a,{SZ:this.SZ})},T.prototype.JY=function(t,e,i){var n;(n=(t=this.um(t)).hi.filter(function(t){return t.id===e})[0])&&t.qc[i].set(n)},T.prototype.su=function(){return{AudioBufferLength:this.DT(),VideoBufferLength:this.QZ()}},T.prototype.o3=function(){var t;if(null!==(t=this.Ka)&&void 0!==t&&t.$h)return this.Ka.f7(!1)},T.prototype.JPb=function(){this.state.value==$.Rb.LOADING&&this.state.set($.Rb.re)},T.prototype.Wxb=function(){var t=void 0===t?this.J:t,e=this.fH(t),i=this.dN(t);return E.Ft(e,function(t){return i.VN.Yu(t)})},T.prototype.uka=function(t){var e,i;return t=void 0===t?this.J:t,e=this.fH(t),i=this.dN(t),E.oZa(e,function(t){return i.VN.Yu(t)})},T.prototype.qTa=function(t){var r=this;Object.keys(t.qa).filter(function(t){return!r.gs.has(r.fb.ue(t).W)}).forEach(function(t){var e,i=r.fb.ue(t),n=i.W;i=Object.assign(null!==(e=r.Ek.lN(n).Fb)&&void 0!==e?e:{},{Z:i.Jb,Ha:i.Ob,Fl:!1,HZ:Date.now(),w7:!0}),r.IPa({W:n,xa:t,bb:i})})},it.Object.defineProperties(T.prototype,{LX:{configurable:!0,enumerable:!0,get:function(){return this.gs.values()}},ha:{configurable:!0,enumerable:!0,get:function(){return this.gs.get(this.gM)}},Z:{configurable:!0,enumerable:!0,get:function(){var t;return void 0!==this.aw?this.aw:null!==(t=null===(t=this.LX.next())||void 0===t?void 0:t.value.bb.Z)&&void 0!==t?t:0}},Rc:{configurable:!0,enumerable:!0,get:function(){return this.ha.Rc},set:function(t){this.ha.Rc=t}},v5:{configurable:!0,enumerable:!0,get:function(){return this.ha.bb.v5}},w5:{configurable:!0,enumerable:!0,get:function(){return this.ha.bb.w5}},index:{configurable:!0,enumerable:!0,get:function(){return this.ha.index}},xa:{configurable:!0,enumerable:!0,get:function(){return this.ha.xa}},O5a:{configurable:!0,enumerable:!0,get:function(){return this.fb.cya?this.fb.oh:this.ha.xa}},nf:{configurable:!0,enumerable:!0,get:function(){return this.ha.nf},set:function(t){this.ha.nf=t}},Nm:{configurable:!0,enumerable:!0,get:function(){return this.ha.Nm},set:function(t){this.ha.Nm=t}},lG:{configurable:!0,enumerable:!0,get:function(){return this.ha.lG},set:function(t){this.ha.lG=t}},kG:{configurable:!0,enumerable:!0,get:function(){return this.ha.kG},set:function(t){this.ha.kG=t}},d7:{configurable:!0,enumerable:!0,get:function(){return this.ha.d7},set:function(t){this.ha.d7=t}},oa:{configurable:!0,enumerable:!0,get:function(){return this.ha.oa},set:function(t){this.ha.oa=t}},aw:{configurable:!0,enumerable:!0,get:function(){return this.ha.aw},set:function(t){this.ha.aw=t}},jZ:{configurable:!0,enumerable:!0,get:function(){return this.ha.jZ},set:function(t){this.ha.jZ=t}},bb:{configurable:!0,enumerable:!0,get:function(){return this.ha.bb},set:function(t){this.ha.bb=t}},AW:{configurable:!0,enumerable:!0,get:function(){return this.ha.AW},set:function(t){this.ha.AW=t}},Ll:{configurable:!0,enumerable:!0,get:function(){return this.ha.Ll}},J:{configurable:!0,enumerable:!0,get:function(){return this.ha.J}},ye:{configurable:!0,enumerable:!0,get:function(){return this.ha.ye}},Ki:{configurable:!0,enumerable:!0,get:function(){return this.ha.Ki}},ip:{configurable:!0,enumerable:!0,get:function(){return this.ha.ip}},XA:{configurable:!0,enumerable:!0,get:function(){return this.ha.XA}},Qh:{configurable:!0,enumerable:!0,get:function(){return this.ha.Qh}},Ti:{configurable:!0,enumerable:!0,get:function(){return this.ha.Ti}},oD:{configurable:!0,enumerable:!0,get:function(){return this.ha.oD}},Lu:{configurable:!0,enumerable:!0,get:function(){return this.ha.Lu}},rm:{configurable:!0,enumerable:!0,get:function(){return this.ha.rm}},hi:{configurable:!0,enumerable:!0,get:function(){return this.ha.hi}},Uy:{configurable:!0,enumerable:!0,get:function(){return this.ha.Uy},set:function(t){this.ha.Uy=t}},ba:{configurable:!0,enumerable:!0,get:function(){return this.ha.ba}},Fj:{configurable:!0,enumerable:!0,get:function(){return this.ha.Fj}},vk:{configurable:!0,enumerable:!0,get:function(){return this.ha.vk}},qH:{configurable:!0,enumerable:!0,get:function(){return this.ha.qH},set:function(t){this.ha.qH=t}},Fg:{configurable:!0,enumerable:!0,get:function(){return this.ha.Fg}},II:{configurable:!0,enumerable:!0,get:function(){return this.ha.II}},background:{configurable:!0,enumerable:!0,get:function(){return this.ha.background},set:function(t){this.ha.background=t}},zka:{configurable:!0,enumerable:!0,get:function(){return this.ha.zka}},pd:{configurable:!0,enumerable:!0,get:function(){return this.ha.pd}},Np:{configurable:!0,enumerable:!0,get:function(){return this.ha.Np}},sla:{configurable:!0,enumerable:!0,get:function(){return this.ha.sla}},VN:{configurable:!0,enumerable:!0,get:function(){return this.ha.VN}},iz:{configurable:!0,enumerable:!0,get:function(){return 0!==F.config.M4&&0==this.ha.ba%F.config.M4}},G4:{configurable:!0,enumerable:!0,get:function(){return this.ha.G4}},Ri:{configurable:!0,enumerable:!0,get:function(){return{MovieId:this.J,TrackingId:this.Fj,Xid:this.ba}}},L9:{configurable:!0,enumerable:!0,get:function(){return this.fb.L9}}}),e.zIa=T},function(t,e,i){var n,a,o;_esm(e),e.Y9a=void 0,n=i(12),a=i(8),o=i(3),i(24),e.Y9a=function(t){var r;a.Oi("Storage"),r={},t({$:!0,storage:{load:function(t,e){r.hasOwnProperty(t)?e({$:!0,data:r[t],W$:t}):e({na:o.L.EB})},save:function(t,e,i,n){i&&r.hasOwnProperty(t)?n({$:!1}):(r[t]=e,n&&n({$:!0,W$:t}))},remove:function(t,e){delete r[t],e&&e(n.Ye)}}})}},function(t,e,i){var n,r,a,o;_esm(e),e.W9a=void 0,n=i(8),r=i(79),a=i(29),o=i(527),e.W9a=function(e){n.ka.get(r.jB).create().then(function(t){e({$:!0,storage:new o.Tca(t,n.ka.get(a.cg))})}).catch(function(t){e(t)})}},function(t,e){function a(t,e){this.Yv=t,this.pe=e}_esm(e),e.Tca=void 0,a.prototype.load=function(e,i){var n=this;this.Yv.load(e).then(function(t){i&&i(a.n$a(t))}).catch(function(t){i&&i(n.Nla(e,t))})},a.prototype.save=function(e,t,i,n){var r=this;this.Yv.save(e,t,i).then(function(){n&&n(a.n$a({key:e,value:t}))}).catch(function(t){n&&n(r.Nla(e,t))})},a.prototype.remove=function(e,i){var n=this;this.Yv.remove(e).then(function(){i&&i({$:!0,W$:e})}).catch(function(t){i&&i(n.Nla(e,t))})},a.n$a=function(t){return{$:!0,data:t.value,W$:t.key}},a.prototype.Nla=function(t,e){return{$:!1,W$:t,na:e.na,ub:e.cause?this.pe.wd(e.cause):void 0}},e.Tca=a},function(t,e,i){var n,r,a,o;_esm(e),e.X9a=void 0,n=i(527),r=i(8),a=i(457),o=i(29),e.X9a=function(t){t({$:!0,storage:new n.Tca(r.ka.get(a.TEa),r.ka.get(o.cg))})}},function(t,r,e){var a,o,s,u,c,i,h,n,f,l;_esm(r),r.$v=void 0,a=e(12),o=e(14),t=e(3),s=e(8),u=e(30),c=e(11),i=e(31),h=e(19),n=e(64),f=e(4),e=s.ka.get(i.fh),l=s.ka.get(n.Rx),e.register(t.M.LDa,function(t){var e,i;function n(){t(a.Ye),n=u.ql}e=s.Oi("BatteryManager"),r.$v={Edb:"chargingchange",eYa:function(){return i?i.level:null},Zma:function(){return i?i.charging:null},addEventListener:function(t,e){i&&i.addEventListener(t,e)},removeEventListener:function(t,e){i&&i.removeEventListener(t,e)}},o.config.$T&&h.gd(c.kf.getBattery)?l.Jq(f.Nc(o.config.DEb),Promise.resolve().then(function(){var t=c.kf.getBattery();if(!h.gd(t.then))throw"getBattery did not return a promise";return t})).then(function(t){!function(e){if(!(e instanceof EventTarget))throw"batteryManager is not an instaceof EventTarget";["addEventListener","removeEventListener"].forEach(function(t){if(!h.gd(e[t]))throw t+" is not a function"})}(t),i=t}).catch(function(t){e.error("getBattery failed",t)}).then(n):n()})},function(t,e){_esm(e),e.NEa="LicenseBrokerFactorySymbol"},function(t,e){function i(t,e){var i=this;this.sYa=t,this.k4a=e,this.lxa=!1,this.nO=function(){i.ep=void 0,i.update()}}_esm(e),e.rLa=void 0,i.prototype.update=function(t){var e,i,n=this.sYa();this.ebb!==n&&((e=null===(e=null===(e=this.Ro)||void 0===e?void 0:e.WG(n))||void 0===e?void 0:e[0])&&"startTime"in e&&(e.startTime<=n&&n<=e.endTime?(i=e,this.Tab(e.endTime-n)):this.Tab(e.startTime-n)),this.ebb=n,this.Cha!==i&&(this.Cha=i,!t&&this.k4a&&this.k4a()))},i.prototype.start=function(){this.lxa=!0,this.update()},i.prototype.R8a=function(t){this.Ro=t,this.Cha=this.ebb=void 0,t||this.stop()},i.prototype.stop=function(){this.lxa=!1,this.Bs()},i.prototype.lEb=function(){return this.update(!0),this.Cha},i.prototype.Tab=function(t){this.Bs(),this.lxa&&0<t&&(this.ep=setTimeout(this.nO,t+i.Thb))},i.prototype.Bs=function(){this.ep&&(clearTimeout(this.ep),this.ep=void 0)},(e.rLa=i).Thb=10},function(t,e,i){var r,a;_esm(e),e.CDa=void 0,r=i(15),a=i(74),e.CDa=function(i){function n(t){i.fireEvent(r.ca.GG,{response:t,J:i.ha.J})}return{download:function(t,e){return t.j=i,(t=a.hf.download(t,e)).Eha(n),t}}}},function(t,e,i){var o,s,u,c,h,f,l,p,d;_esm(e),e.fEa=void 0,o=i(14),s=i(51),u=i(3),c=i(534),h=i(11),f=i(19),l=i(15),p=i(8),d=i(208),e.fEa=function(i){var n,t,r,a;function e(){i.state.value!==l.Rb.re||i.yb.value!==l.cb.hh&&i.yb.value!==l.cb.Wq?t.Bs():t.NG()}n=o.config.YRb,!i.nD()&&n&&(t=p.ka.get(d.o1)(n,function(){i.fireEvent(l.ca.rN,u.M.Q0)}),i.yb.addListener(e),i.state.addListener(e),o.config.Xoa&&(r=s.lj(),(a=new c.GJa(o.config.Xoa,function(){var t=s.lj(),e=t-r;n<e&&(i.fireEvent(l.ca.rN,u.M.u0),a.mSa()),e>2*o.config.Xoa&&(i.Yoa=h.fo(e,i.Yoa||0)),r=t})).cYb()),i.addEventListener(l.ca.kg,function(){t.Bs(),f.Xc(a)&&a.mSa()}))}},function(t,e){_esm(e),e.GJa=void 0,e.GJa=function(t,e){var i;this.cYb=function(){i=i||setInterval(e,t)},this.mSa=function(){i&&(clearInterval(i),i=void 0)}}},function(t,r,e){var a,o,s,u,c,i,h;function n(t){var e,i,n,r=this;this.j=t,this.Mfa=s.createElement("DIV","","",{class:"player-streams"}),this.rfa=s.createElement("DIV"),this.alb=this.Dfa("Audio Bitrate"),this.tha=this.Dfa("Video Bitrate"),this.ufa=this.Dfa("CDN"),this.TS={},this.v6=u.ka.get(c.Tm),this.Mfa.appendChild(this.rfa),(e=s.createElement("BUTTON","","Override")).addEventListener("click",this.Vkb.bind(this)),this.rfa.appendChild(e),(e=s.createElement("BUTTON","","Reset")).addEventListener("click",this.dpb.bind(this)),this.rfa.appendChild(e),i=this.lob.bind(this),o.ve.addListener(o.YC,i),t.addEventListener(h.ca.CH,function(){r.TS={}}),t.addEventListener(h.ca.kg,function(){o.ve.removeListener(o.YC,i)}),n=this.Rob.bind(this),t.qc.forEach(function(t){t.addListener(n)}),t.oc.addListener(n),t.xg.addListener(n)}_esm(r),r.GIa=void 0,a=e(47),o=e(60),s=e(30),u=e(8),c=e(40),i=e(133),h=e(15),n.prototype.show=function(t){var e;this.seen||(e=this.Mfa,document.body.appendChild(this.Mfa),t||(e.style.opacity=1),this.seen=1,this.HOa())},n.prototype.Qr=function(){this.seen&&(document.body.removeChild(this.Mfa),this.seen=!1)},n.prototype.toggle=function(t){this.seen?this.Qr():this.show(t)},n.prototype.Kab=function(){var t,c,h,e;c=this.j.Ft(),e=(h=this.j.fH().sort(function(t,e){return t.bitrate-e.bitrate})).reduce(function(t,e){return t.indexOf(e.kh)<0&&t.push(e.kh),t},[]).map(function(t){return{profile:t,ranges:(r=t,a=c,u=[],h.filter(function(t){return t.kh===r}).forEach(function(t){0<=a.indexOf(t)?(void 0===s?s=t.bitrate:o=t.bitrate,void 0===o&&(o=t.bitrate)):void 0!==s&&void 0!==o&&(u.push({min:s,max:o}),s=o=void 0)}),void 0!==s&&void 0!==o&&(u.push({min:s,max:o}),s=o=void 0),u),disallowed:(e=t,i=c,n=[],h.filter(function(t){return t.kh===e}).forEach(function(t){-1===i.indexOf(t)&&n.push({stream:{bitrate:t.bitrate},disallowedBy:["manual"]})}),n)};var e,i,n,r,a,o,s,u}),null!==(t=this.j.Ka)&&void 0!==t&&t.Lq(e,this.j.J)},n.prototype.Vkb=function(){var t,e;this.TS={};for(var i=this.tha.options,n=i.length;n--;)(t=i[n]).selected&&(this.TS[t.value]=1);this.kU=this.zlb.bind(this),this.Kab(),(i=this.j.hi)&&(e=this.ufa.value,i=i.filter(function(t){return t.id==e})[0],n=this.j.qc[a.Tb.Ta.Mb].value,i&&i!=n&&(i.RRa={testreason:"streammanager",selreason:"userselection"},this.j.qc[a.Tb.Ta.Mb].set(i))),this.Qr()},n.prototype.dpb=function(){this.kU=void 0,this.j.b9a(this.j.J),this.Qr()},n.prototype.zlb=function(){var e=this;return this.j.fH().filter(function(t){return e.TS[t.bitrate]})},n.prototype.HOa=function(){var e=this,t=this.j.oc.value,i=this.j.xg.value,n=this.j.hi;t&&((n=n.slice()).sort(function(t,e){return t.uc-e.uc}),this.dha(this.alb,t.streams.map(function(t){return{value:t.bitrate,caption:t.bitrate,selected:t==e.j.jh.value}}))),i&&this.dha(this.tha,i.streams.map(function(t){return{value:t.bitrate,caption:t.bitrate,selected:t.bitrate==e.j.We.value.bitrate}})),n&&this.dha(this.ufa,n.map(function(t){return{value:t.id,caption:"["+t.id+"] "+t.name,selected:t==e.j.qc[a.Tb.Ta.Mb].value}}))},n.prototype.Rob=function(){this.seen&&this.HOa()},n.prototype.Dfa=function(t){var e=s.createElement("DIV","display:inline-block;margin:5px"),t=s.createElement("DIV","margin:2px",t),i=s.createElement("select","","",{multiple:1});return e.appendChild(t),e.appendChild(i),this.Mfa.appendChild(e),i},n.prototype.dha=function(i,t){i.innerHTML="",t.forEach(function(t){var e={title:t.caption};t.selected&&(e.selected="selected"),(e=s.createElement("option",void 0,t.caption,e)).value=t.value,i.appendChild(e)})},n.prototype.lob=function(t){t.keyCode==i.tv.S&&this.v6.Spa&&this.toggle(t.shiftKey)},r.GIa=n},function(t,e,i){var b,m,g,n,r;function v(t,e){this.wma=t,this.JG={position:"absolute",left:"0",top:"0",right:"0",bottom:"0",display:"block"},this.element=b.createElement("DIV",void 0,void 0,{class:"player-timedtext"}),this.element.onselectstart=function(){return!1},this.M8a(e),this.uWa=this.AFb(this.wma)}_esm(e),e.oLa=void 0,b=i(30),m=i(537),g=i(538),n=i(11),r=i(24),v.prototype.Dn=function(){return this.element},v.prototype.sXb=function(t){this.jia=t},v.prototype.CXb=function(t){this.entry=t,this.NO()},v.prototype.JXb=function(t){this.M8a(t),this.NO()},v.prototype.NO=function(){var t,e,i,n,r,a,o,s=this,u=this.Dn(),c=u.parentElement,h=c&&c.clientWidth||0,f=c&&c.clientHeight||0,l=c=0,p={width:h,height:f};if(0<h&&0<f&&this.entry&&(this.jia&&(p=b.LM(h,f,this.jia),c=Math.round((h-p.width)/2),l=Math.round((f-p.height)/2)),e=this.Ltb(p),i=b.LM(e.width,e.height,this.jia),e=(t=this.entry.blocks)&&t.map(function(t){var e=g.Ila(t,i,s.wma,s.uWa);return t=g.zVa(t)+";position:absolute",b.createElement("div",t,e,v.Sba)})),Object.assign(this.JG,{left:c+"px",right:c+"px",top:l+"px",bottom:l+"px"}),u.style.display="none",u.style.direction=this.JG.direction,u.innerHTML="",e&&e.length){h=p.width,c=p.height,n=p,this.RT&&(n=this.fqb(p,this.RT,f,l)),this.JG.margin=this.Zr?this.M3(p,"top")+"px "+this.M3(p,"right")+"px "+this.M3(p,"bottom")+"px "+this.M3(p,"left")+"px ":void 0,e.forEach(function(t){return u.appendChild(t)}),f=b.yG(this.JG),u.style.cssText=f+";visibility:hidden;z-index:-1",l=[];for(var d=e.length-1;0<=d;d--)r=e[d],a=t[d],(o=this.O3a(r,a,h,c)).width>h&&(r.innerHTML=g.Ila(a,p,this.wma,this.uWa,h/o.width),o=this.O3a(r,a,h,c)),l[d]=o;for(l=m.Bab(l,n),(d=t&&t[0]&&t[0].textNodes&&t[0].textNodes[0]&&t[0].textNodes[0].style)&&(n=d.windowColor,d=d.windowOpacity,n&&0<d&&(p=g.BVa(t,l,Math.round(c/50),n,p),p=b.createElement("div","position:absolute;left:0;top:0;right:0;bottom:0;opacity:"+d,p,v.Sba),u.insertBefore(p,u.firstChild))),u.style.display="none",p=l.length-1;0<=p;p--)n=e[p].style,d=g.AVa(t[p].region,l[p],h,c,0),Object.assign(n,d);u.style.cssText=f}},v.prototype.dwa=function(t){this.RT=t,this.NO()},v.prototype.eoa=function(){return this.RT},v.prototype.ewa=function(t){this.Zr=t,this.NO()},v.prototype.foa=function(){return this.Zr},v.prototype.goa=function(){return"block"===this.JG.display},v.prototype.fwa=function(t){var e=t?"block":"none";this.element.style.display=e,this.JG.display=e,t&&this.NO()},v.prototype.AFb=function(t){var i=this,n={};return r.te(t,function(t,e){n[t]=i.jOb(e)}),n},v.prototype.M8a=function(t){this.JG.direction="boolean"==typeof t?t?"ltr":"rtl":"inherit"},v.prototype.M3=function(t,e){if(this.Zr){if("left"===e||"right"===e)return t.width*(this.Zr[e]||0);if("top"===e||"bottom"===e)return t.height*(this.Zr[e]||0)}return 0},v.prototype.Ltb=function(t){return this.Zr?{height:t.height*(1-(this.Zr.top||0)-(this.Zr.bottom||0)),width:t.width*(1-(this.Zr.left||0)-(this.Zr.right||0))}:t},v.prototype.jOb=function(t){var e;return t=b.createElement("DIV","display:block;position:fixed;z-index:-1;visibility:hidden;font-size:1000px;"+t+";","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",v.Sba),n.Be.body.appendChild(t),e={fontSize:1e3,height:t.clientHeight,width:t.clientWidth/52,lineHeight:t.clientHeight/1e3},n.Be.body.removeChild(t),e},v.prototype.O3a=function(t,e,i,n){var r=e.region,a=(r.marginTop||0)*n,o=(r.marginBottom||0)*n,s=(r.marginLeft||0)*i,u=(r.marginRight||0)*i;switch(e=t.clientWidth||1,t=t.clientHeight||1,r.verticalAlignment){case"top":n=a;break;case"center":n=(a+n-o-t)/2;break;default:n=n-o-t}switch(r.horizontalAlignment){case"left":i=s;break;case"right":i=i-u-e;break;default:i=(s+i-u-e)/2}return{top:n,left:i,width:e,height:t}},v.prototype.fqb=function(t,e,i,n){return{height:i-Math.max(n,e.bottom||0)-Math.max(n,e.top||0),width:t.width}},(e.oLa=v).Sba={class:"player-timedtext-text-container"}},function(t,e,i){var p;_esm(e),e.Bab=void 0,p=i(11),e.Bab=function(t,e){function i(t,e,i){var n,r,a,o,s;if(t&&1<t.length){for(var u=[],c=[],h=0;h<t.length;h++)u[h]=0,c[h]=0;for(n=!1,h=0;h<t.length;h++)for(var f=h+1;f<t.length;f++)r=t[h],a=t[f],(o=!(r.width<0||a.width<0||a.left>r.left+r.width||a.left+a.width<r.left||a.top>r.top+r.height)&&a.top+a.height>=r.top?(o=p.fo(r.left,a.left),s=p.fo(r.top,a.top),{width:p.fo(p.np(r.left+r.width,a.left+a.width)-o,0),height:p.fo(p.np(r.top+r.height,a.top+a.height)-s,0),x:o,y:s}):void 0)&&1<o.width&&1<o.height&&(s=o.width<=o.height,r=l(t[h]),a=l(t[f]),s&&e||!s&&!e?(o=p.fo(o.width/2,.25),r.x<=a.x?(c[h]-=o,c[f]+=o):(c[f]-=o,c[h]+=o)):(s&&!e||!s&&e)&&(r=p.fo(o.height/2,.25),u[h]-=r,u[f]+=r));for(h=0;h<t.length;h++)(c[h]<-.25&&0<=t[h].left+c[h]||.25<c[h]&&t[h].left+t[h].width+c[h]<=i.width)&&(t[h].left+=c[h],n=!0),(u[h]<-.25&&0<=t[h].top+u[h]||.25<u[h]&&t[h].top+t[h].height+u[h]<=i.height)&&(t[h].top+=u[h],n=!0);return n}}function l(t){return{x:t.left+t.width/2,y:t.top+t.height/2}}var n;t=t.map(function(t){return{top:t.top,left:t.left,width:t.width,height:t.height}}),n=e,t.forEach(function(t){t.left<0&&t.left+t.width<n.width?t.left+=p.np(-t.left,n.width-(t.left+t.width)):t.left+t.width>n.width&&0<t.left&&(t.left-=p.np(t.left+t.width-n.width,t.left)),t.top<0&&t.top+t.height<n.height?t.top+=p.np(-t.top,n.height-(t.top+t.height)):t.top+t.height>n.height&&0<t.top&&(t.top-=p.np(t.top+t.height-n.height,t.top))});for(var r=0;r<50&&i(t,!0,e);r++);for(r=0;r<50&&i(t,!1,e);r++);return t}},function(t,e,i){var s,f,l;function p(t,e,i,n,r){var a={};return"right"==t.horizontalAlignment?a.right=100*(i-e.left-e.width-r)/i+"%":a.left=100*(e.left-r)/i+"%","bottom"==t.verticalAlignment?a.bottom=100*(n-e.top-e.height-r)/n+"%":a.top=100*(e.top-r)/n+"%",a}function u(t,e){var i;if(t&&e&&(40===e.x&&19===e.y?i=4/3/(40/19):52===e.x&&19===e.y&&(i=16/9/(52/19)),i))return t.width/t.fontSize/i}function o(t,e,i,n,r){var a=t.style,o=f.XV(t.text);for(t=t.lineBreaks;t--;)o="<br />"+o;return c(o,a,e,i,n,r)}function c(t,e,i,n,r,a){var o=e.characterStyle;switch(r=r[o],o=0<=o.indexOf("MONOSPACE")&&u(r,e.cellResolution)||r.lineHeight,n=e.characterSize*n.height/(o||1),a={"font-size":(n=0<a?l.Kx(n*a):l.bj(n))+"px","line-height":"normal","font-weight":"normal"},e.characterItalic&&(a["font-style"]="italic"),e.characterUnderline&&(a["text-decoration"]="underline"),e.characterColor&&(a.color=e.characterColor),e.backgroundColor&&0!==e.backgroundOpacity&&(a["background-color"]=h(e.backgroundColor,e.backgroundOpacity)),n=e.characterEdgeColor||"#000000",e.characterEdgeAttributes){case"DROP_SHADOW":a["text-shadow"]=n+" 0px 0px 7px";break;case"UNIFORM":a["text-shadow"]="-1px 0px "+n+",0px 1px "+n+",1px 0px "+n+",0px -1px "+n;break;case"RAISED":a["text-shadow"]="-1px -1px white, 0px -1px white, -1px 0px white, 1px 1px black, 0px 1px black, 1px 0px black";break;case"DEPRESED":a["text-shadow"]="1px 1px white, 0px 1px white, 1px 0px white, -1px -1px black, 0px -1px black, -1px 0px black"}return a=s.yG(a),(i=i[e.characterStyle||"PROPORTIONAL_SANS_SERIF"])&&(a+=";"+i),0<(e=e.characterOpacity)&&e<1&&(t='<span style="opacity:'+e+'">'+t+"</span>"),'<span style="'+a+'">'+t+"</span>"}function h(t,e){return t=t.substring(1),"rgba("+((t=parseInt(t,16))>>16&255)+","+(t>>8&255)+","+(255&t)+","+(void 0!==e?e:1)+")"}_esm(e),e.zVa=e.eCb=e.cCb=e.fCb=e.dCb=e.AVa=e.BVa=e.Ila=void 0,s=i(50),f=i(24),l=i(11),e.Ila=function(t,e,i,n,r){var a="";return t.textNodes.forEach(function(t){a+=o(t,i,e,n,r)}),a},e.BVa=function(t,e,i,n,r){var a,o,s,u="",c=r.width;r=r.height;for(var h=e.length;h--;)a=e[h],o=(o=t[h])&&o.region,s="position:absolute;background:"+n+";width:"+l.bj(a.width+2*i)+"px;height:"+l.bj(a.height+2*i)+"px;",a=p(o,a,c,r,i),f.te(a,function(t,e){s+=t+":"+e+";"}),u+='<div style="'+s+'"></div>';return u},e.AVa=p,e.dCb=u,e.fCb=o,e.cCb=c,e.eCb=h,e.zVa=function(t){var e={display:"block","white-space":"nowrap"};switch(t.region.horizontalAlignment){case"left":e["text-align"]="left";break;case"right":e["text-align"]="right";break;default:e["text-align"]="center"}return s.yG(e)}},function(t,e,i){var n,b,m,g,v,r,y,w;_esm(e),e.wIa=void 0,n=i(12),b=i(14),m=i(51),g=i(92),v=i(11),r=i(61),y=i(19),w=i(15),e.wIa=function(u){var c,h,f,l,p,t;function d(){return u.state.value===w.Rb.LOADING||u.state.value===w.Rb.re&&u.yb.value===w.cb.Pf}function e(){d()?t=t||setInterval(i,100):t&&(clearInterval(t),t=void 0,r.Rf(i))}function i(){var t,e,i,n,r=m.lj(),a=c.value,o=a?a.progress:0,s=u.state.value==w.Rb.LOADING||d()&&r-h>b.config.ntb;s&&u.state.value==w.Rb.re?(u.Cf.value===w.yf.aKa?(t=o,e=!0):(i=r,f=f||r,l=l||f+b.config.LOb+1,y.Ba(i)&&(i=v.fo(i,l),t=v.bj(1e3*g.op((r-f)/(i-f),0,.99))/1e3)),t<o&&(o-t<b.config.cUb/100?(t=o,p=void 0):p?r-p>b.config.bUb?(n=!0,p=void 0):t=o:(p=r,t=o))):p=l=f=void 0,(!(r=s?{As:e,progress:t,dUb:n}:null)||!c||!a||y.Ba(r.progress)&&!y.Ba(a.progress)||y.Ba(r.progress)&&y.Ba(a.progress)&&.01<v.SE(r.progress-a.progress)||r.As!==a.As)&&c.set(r)}c=u.$ia,h=0,u.state.addListener(function(){e(),i()},n.P0),u.yb.addListener(function(t){t.oldValue===w.cb.Pf&&t.newValue===w.cb.Pf||(h=m.lj()),e()}),u.Cf.addListener(function(){e()}),u.zr.addListener(function(){e()}),u.Mm.addListener(function(){e()}),t=t||setInterval(i,100)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x;function P(t){var n=this;this.j=t,this.Vb=this.j.Vb,this.log=h.Ih(this.j,"MediaPresenterASE"),this.Q8=this.t4=0,this.X=this.Vb.X,this.C5a=this.t5a=this.y7=this.rta=!1,this.j_b=h.ka.get(E.nK)(_.Nc(y.e1)),this.EL=void 0,this.$o=h.ka.get(S.iKa)(this.j),this.ox={},this.Q2a={},this.MV={},this.rg=new A.QFa(this.j),this.h_b=function(){var t,e,i;n.j.jZ=c.lj(),!n.jk()&&n.En&&((t=n.Vb.WYa())||(n.hSb(),n.rg.xxa(n.mediaTime)),n.j.paused.value||!n.rg.Nka(n.mediaTime)||!n.Xia()||t||n.$o.Ipa?n.lva():n.rta||n.mva(),n.gSb(),n.Vb.WYa()||n.y7||(t=n.Vb.tV(!0),e=n.j.yb.value,(i=n.wvb())===g.cb.Wq?(n.mediaTime=n.j.Bu.da(_.ja),n.lva()):i!==g.cb.Pf&&n.i1b(t),n.Xab(),n.rg.uja(n.mediaTime),n.j.yb.set(i),i!==g.cb.Pf||e!==g.cb.Kc&&e!==g.cb.hh||n.UQb()))},this.Ql=T.o6a(this.h_b),this.mediaTime=t.Z,this.j.ei=!1,this.Vb.addEventListener(w.Oj.G9a,function(){n.log.trace("sourceBuffers have been created. Initialize MediaPresenter.");try{n.xb()}catch(t){n.log.error("Exception while initializing",t),n.Xd(f.M.Mib)}})}_esm(e),e.dGa=void 0,n=i(47),r=i(12),a=i(14),o=i(58),s=i(60),u=i(50),c=i(51),h=i(8),i(98),f=i(3),l=i(331),p=i(21),d=i(92),b=i(30),m=i(61),g=i(15),v=i(19),y=i(185),w=i(302),_=i(4),E=i(112),k=i(208),S=i(541),T=i(1185),A=i(1186),O=i(262),I=i(207),x=i(11),P.prototype.IXa=function(){return this.Vb.tV(!1)},P.prototype.S5=function(){return this.Vb.S5()},P.prototype.QC=function(){return this.Vb.QC()},P.prototype.XG=function(){return this.Vb.XG()},P.prototype.sV=function(){return this.Vb.sV()},P.prototype.X5=function(){return this.Vb.X5()},P.prototype.xb=function(){var e=this;this.log.trace("Video element initializing"),this.Vb.sourceBuffers.forEach(function(t){return e.rg.YXb(t)}),this.TJb(this.j.oD)},P.prototype.TJb=function(t){var i=this;t?this.log.trace("Waiting for needkey"):(this.log.warn("Movie is not DRM protected",{MovieId:this.j.J}),null!==(t=this.j.Ka)&&void 0!==t&&t.gz(this.j.J)),this.log.trace("Waiting for loadedmetadata"),this.Vb.addEventListener(w.Oj.n1a,function(t){var e;t=t.W,i.j.Dd("ld",t),null!==(e=i.j.Ka)&&void 0!==e&&e.gz(t),i.j.fireEvent(g.ca.k1a)}),u.OPa(this.X,"loadedmetadata",function(){i.log.trace("Video element event: loadedmetadata"),i.j.Dd("md")}),s.ve.addListener(s.El,this.MV[s.El]=function(){return i.close()},r.cF),this.j.addEventListener(g.ca.kg,function(){return i.close()},r.cF),this.j.addEventListener(g.ca.e8a,function(){return i.mva()}),this.j.addEventListener(g.ca.CH,function(){return i.HQb()}),this.j.paused.addListener(function(){return i.Ql()}),this.j.muted.addListener(function(){return i.Uxa()}),this.j.volume.addListener(function(){return i.Uxa()}),this.j.playbackRate.addListener(function(){return i.Eaa()}),this.j.zr.addListener(function(){return i.Ql()}),this.j.Mm.addListener(function(){return i.Ql()}),this.Uxa(),this.Eaa(),this.rg.J$(function(){return i.o8()}),this.o8(),this.B0b()},P.prototype.j3=function(t){var e=this;this.rg.wrb(t),this.kub(t).then(function(){e.o8(),e.j.fireEvent(g.ca.n8)}).catch(function(t){e.Xd(f.M.Qib,{ub:b.wd(t)})})},P.prototype.aia=function(t,e,i){i=void 0===i?{}:i,e=this.dBb(t,e),this.rg.urb(t,e,i),this.o8(),this.t5a||t.type!==n.Tb.ol.Mb||(this.$o.Ipa||this.seek(this.j.Z,g.Ce.Fx),this.t5a=!0)},P.prototype.B0b=function(){var t=this;this.Vb.addEventListener(w.Oj.BY,this.ox[w.Oj.BY]=function(){return t.ZQb()}),this.Vb.addEventListener(w.Oj.Wp,this.ox[w.Oj.Wp]=function(){return t.g9()}),this.X.addEventListener("ended",this.ox.ended=function(){return t.CQb()}),this.X.addEventListener("play",this.ox.play=function(){return t.LQb()}),this.X.addEventListener("pause",this.ox.pause=function(){return t.JQb()}),this.X.addEventListener("playing",this.ox.playing=function(){return t.RQb()}),this.En=!0,this.rg.xxa(this.mediaTime),this.log.trace("Video element initialization complete"),this.j.Dd("vi"),a.config.fUa?setTimeout(function(){t.Bsa=!0,t.Ql()},a.config.fUa):this.Bsa=!0,this.eZb(),m.Rf(function(){return t.Ql()})},P.prototype.eZb=function(){var n;function e(){var t=n.j.yb.value!==g.cb.Kc||0!==(null===(t=n.j.Xf)||void 0===t?void 0:t.S5())||x.Be.hidden?(n.N3a.Bs(),"stopTimer"):(n.N3a.NG(),"ensureTimer");n.log.trace("No render timer update: "+t,{presentingState:g.cb[n.j.yb.value],hidden:x.Be.hidden})}function t(t){var e,i;t=void 0===t||t,i=(null==(e=n.j.Ka)?void 0:e.$h)&&e.D6(),e=n.j.yb.value==g.cb.Pf&&n.j.state.value==g.Rb.re&&n.j.zr.value==g.yf.re&&n.j.Mm.value==g.yf.re&&!n.j.ei&&i?(t&&n.v4.Bs(),n.v4.NG(),"ensureTimer"):(n.v4.Bs(),"stopTimer"),n.log.trace("Timer update: "+e,{presentingState:g.cb[n.j.yb.value],playbackState:g.Rb[n.j.state.value],avBufferingState:g.yf[n.j.zr.value],textBufferingState:g.yf[n.j.Mm.value],autoplayWasBlocked:n.j.ei,hasLicense:i,restartTimer:t})}n=this,a.config.VTa&&(p.hb(!this.v4),this.v4=h.ka.get(k.o1)(a.config.VTa,function(){var t=h.ka.get(l.cca).oUa(n.j);n.Xd(t.code,t)}),this.j.yb.addListener(function(){return t()}),this.j.zr.addListener(function(){return t()}),this.j.Mm.addListener(function(){return t()}),this.j.state.addListener(function(){return t()}),this.j.addEventListener(g.ca.k1a,function(){return t()}),this.j.addEventListener(g.ca.ei,function(){return t()}),this.j.addEventListener(g.ca.zia,function(){return t()}),this.j.addEventListener(g.ca.tI,function(){return t(!0)}),t()),a.config.M3a&&(this.N3a=h.ka.get(k.o1)(a.config.M3a,function(){var t;0===(null===(t=n.j.Xf)||void 0===t?void 0:t.QC())&&(t=h.ka.get(l.cca).oUa(n.j),n.Xd(t.code,t)),n.j.yb.removeListener(e),s.ve.removeListener(s.Nr,n.MV[s.Nr])}),this.j.yb.addListener(e),s.ve.addListener(s.Nr,this.MV[s.Nr]=e),e())},P.prototype.dBb=function(t,e){var i=this.j.nf;return(i=I.upa(i)?i.YM():void 0)&&t.type===n.Tb.ol.Mb&&(t=new O.WJ(this.log,{mediaType:O.Pj.Mb,url:"http://some-url"},e).wa(i))&&(e=t),e},P.prototype.o8=function(){this.En?this.Ql():a.config.vrb&&this.rg.xxa(this.mediaTime),this.rg.YRa()},P.prototype.kZb=function(){this.j.yb.set(g.cb.Pf),this.y7=!0,this.Ql()},P.prototype.svb=function(){var t=this;this.y7&&(this.y7=!1,m.Rf(function(){return t.VPb()}))},P.prototype.J5=function(){return this.rg.J5()},P.prototype.VPb=function(){var t,e=this.j.TC()||0;this.j.bb.Fl?a.config.$sb&&(e=e-(this.Vb.Bva+1)-a.config.Ava,t=this.j.Ka.Ko().fd,e=Math.max(e,t)):(e-=a.config.RWb,e=Math.max(e,this.$o.iqa)),this.seek(e,g.Ce.UR)},P.prototype.d9=function(t){var e=this;this.rg.$Xb(t),m.Rf(function(){return e.Ql()})},P.prototype.TFb=function(){return{t4:this.t4,Q8:this.Q8}},P.prototype.kub=function(t){var e=this.Vb&&this.Vb.rYa();return this.j.Bu&&e&&1/0!==t.n8a&&((t=t.n8a+t.Ou)>this.j.Bu.V5a(_.ja)&&(this.j.Bu=_.Nc(t))),Promise.resolve()},P.prototype.gSb=function(){var t=this;this.$o.z9&&this.Xia()&&this.rg.Nka(this.mediaTime)&&(this.Vb.seek(this.mediaTime),this.$o.z9=!1,m.Rf(function(){return t.Ql()}))},P.prototype.i1b=function(t){var e;t<this.mediaTime?(e=this.mediaTime-t,a.config.iSb&&t&&e>y.e1&&(t={ElementTime:d.cj(t),MediaTime:d.cj(this.mediaTime)},e>y.CJa?this.Xd(f.M.$ib,{ub:Object.assign({Trace:this.Vb.VC()},t)}):this.log.warn("VIDEO.currentTime became smaller",t))):this.mediaTime=d.op(t,0,this.j.Bu.da(_.ja))},P.prototype.Xia=function(){return this.j.zr.value===g.yf.re&&this.j.Mm.value===g.yf.re},P.prototype.wvb=function(){var t=this,e=this.j.yb.value,i=e;return this.$o.Ipa?i=g.cb.Pf:this.X&&this.X.ended?e===g.cb.Kc&&(i=g.cb.Wq):this.Xia()&&this.rg.Nka(this.mediaTime)?this.Vb.dAb()?i=this.X&&this.X.paused?g.cb.hh:g.cb.Kc:this.j_b.Ol(function(){return t.i_b()}):i=!this.j.Bu||this.j.AZa(this.mediaTime,this.rg.s4())?g.cb.Pf:g.cb.Wq,i},P.prototype.UQb=function(){var t;this.j.yb.value===g.cb.Pf&&(t=this.rg.R_b()>this.rg.s4(),this.j.Mm.value!==g.yf.re?this.j.ci.value?(this.j.fireEvent(g.ca.Jy,{cause:o.uIa}),this.log.warn("rebuffer due to timed text",this.j.ci.value.Ri)):this.j.fireEvent(g.ca.IP):t?(this.t4++,this.j.fireEvent(g.ca.Jy,{cause:o.Xda})):(this.Q8++,this.j.fireEvent(g.ca.Jy,{cause:o.Yda})))},P.prototype.i_b=function(){this.jk()||(a.config.ZPb&&this.rg.YPb(),this.Ql())},P.prototype.ZQb=function(){this.Ql()},P.prototype.g9=function(){this.Ql(),this.j.fireEvent(g.ca.Wp)},P.prototype.CQb=function(){this.log.trace("Video element event: ended"),this.Ql()},P.prototype.LQb=function(){this.log.trace("Video element event: play"),this.Ql()},P.prototype.JQb=function(){this.log.trace("Video element event: pause"),this.Ql()},P.prototype.RQb=function(){this.log.trace("Video element event: playing"),this.Ql()},P.prototype.Uxa=function(){this.jk()||(this.X&&this.X.volume!==this.j.volume.value&&(this.X.volume=this.j.volume.value),this.X&&this.X.muted!==this.j.muted.value&&(this.X.muted=this.j.muted.value))},P.prototype.Eaa=function(){!this.jk()&&this.X&&(this.X.playbackRate=this.j.playbackRate.value)},P.prototype.mva=function(){var e=this;this.jk()||!v.Xc(this.X)||this.X.ended||!this.Bsa||!this.TP&&void 0!==this.TP||(this.log.trace("Calling play on element"),Promise.resolve(this.X.play()).then(function(){e.closed||(e.TP=!1,e.rta=!1,e.X.style.display=null,e.j.ei=!1,e.j.fireEvent(g.ca.zia,{j:e.j}))}).catch(function(t){"NotAllowedError"===t.name?(e.log.warn("Playback is blocked by the browser settings",t),e.j.ei=!0,e.closed||(e.rta=!0,e.X.style.display="none",e.j.fireEvent(g.ca.ei,{player:{play:function(){return e.mva()}}}))):e.closed||(e.TP=!1,e.C5a||(e.C5a=!0,e.log.error("Play promise rejected",t)))}))},P.prototype.HQb=function(){this.$o.iqa=this.j.TC()||0},P.prototype.lva=function(){this.jk()||!v.Xc(this.X)||this.X.ended||!this.Bsa||this.TP&&void 0!==this.TP||(this.log.trace("Calling pause on element"),this.X.pause(),this.TP=!0)},P.prototype.Xab=function(t){this.j.mediaTime.set(this.mediaTime),t&&this.j.ADb()},P.prototype.seek=function(t,e,i,n){var r;i=void 0===i?this.j.xa:i,n=void 0!==n&&n,r=null===(r=this.j.Ka)||void 0===r?void 0:r.$h,!this.jk()&&r&&(this.j.fireEvent(g.ca.tI,{cause:e}),this.$o.EX={time:t,cause:e,xa:i,GDb:n},this.j.yb.set(g.cb.Pf),this.Ql())},P.prototype.hSb=function(){var t,e,i,n,r,a,o,s;this.$o.EX&&(e=(t=this.$o.EX).time,i=t.cause,n=t.xa,r=t.GDb,this.rg.Hh()&&i!==g.Ce.Fx||(t=this.j.um(n).J,a=this.rg.Hh()?void 0:this.rg.IEb(),n=(a=this.$o.rGb(e,i,n,r,a)).U8,r=a.ek,o=a.KSb,a=a.Li,this.rg.uja(this.mediaTime),s=this.mediaTime,e=d.cj(e),this.j.bG("SEEKING: Requested: ("+t+":"+i+":"+e+") - Actual: (contentPts: "+r+",playerPts: "+o+", newMediaTime: "+n+")"),this.log.info("Seeking",{Requested:e,Actual:d.cj(n),Cause:i,Skip:a}),i===g.Ce.Fx||a||(this.rg.H7a(),this.rg.VXb()),this.mediaTime=n,this.$o.iqa=r,e=this.j.jf.value,o=this.j.oe.value,this.j.jf.set(null),this.j.oe.set(null),this.Xab(!0),this.$o.EX=void 0,this.$o.z9=!0,this.j.fireEvent(g.ca.wk,{Csa:s,U8:n,ek:r,cause:i,skip:a,jf:e,oe:o,J:t}),a&&this.rg.skip(n)))},P.prototype.Xd=function(t,e,i){this.closed||this.j.Xd(t,e,i)},P.prototype.close=function(){if(!this.closed){this.log.info("Closing."),this.rg.close(),this.Vb.removeEventListener(w.Oj.BY,this.Q2a[w.Oj.BY]),this.Vb.removeEventListener(w.Oj.Wp,this.Q2a[w.Oj.Wp]),this.X.removeEventListener("ended",this.ox.ended),this.X.removeEventListener("play",this.ox.play),this.X.removeEventListener("pause",this.ox.pause),this.X.removeEventListener("playing",this.ox.playing),s.ve.removeListener(s.El,this.MV[s.El]),s.ve.removeListener(s.Nr,this.MV[s.Nr]),this.closed=!0;try{a.config.mPb&&(this.X.volume=0,this.X.muted=!0),this.lva(),this.Vb.close()}catch(t){}this.X=void 0,this.rg.H7a()}},P.prototype.jk=function(){return!!this.closed||!v.Xc(this.X)&&(this.log.error("MediaPresenter not closed and videoElement is not defined"),!0)},e.dGa=P},function(t,e){_esm(e),e.iKa="SeekManagerFactorySymbol"},function(t,e,i){var a,o,s,u,c;_esm(e),e.uCa=void 0,a=i(14),o=i(60),s=i(24),u=i(3),c=i(15),e.uCa=function(n,t,r){function e(t){var e=t.error||t,i=s.wd(e);r.error("uncaught exception",e,i),(e=(e=e&&e.stack)&&a.config.Dab&&a.config.M0b?0<=e.indexOf(a.config.Dab):void 0)&&(t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),n.Xd(u.M.KLa))}function i(){o.ve.removeListener(o.w6,e),n.removeEventListener(c.ca.kg,i),n.removeEventListener(c.ca.Cq,i)}try{o.ve.addListener(o.w6,e),n.addEventListener(c.ca.kg,i),a.config.yJb&&n.addEventListener(c.ca.Cq,i)}catch(t){r.error("exception in exception handler ",t)}}},function(t,e,i){var s,u,c,h,f,n;_esm(e),e.T1a=void 0,s=i(14),u=i(12),c=i(51),t=i(3),h=i(11),f=i(19),n=i(8),i=i(31),n.ka.get(i.fh).register(t.M.PDa,function(t){var n,r,i,a,o;n=s.config.iNb,r=-6/(n-2-2),i=u.pl,a=[],o=h.Kx(c.lj()/i),f.Lpa(n)&&(setInterval(function(){var t=h.Kx(c.lj()/i);if(t!=o){for(var e=h.np(t-o,30);e--;)a.push(0);(e=h.fo(a.length-31,0))&&a.splice(0,e),o=t}a[a.length-1]++},1e3/n),e.T1a={KFb:function(){for(var t,e=[],i=a.length-1;i--;)t=a[i],e.unshift(t<=0?9:t<=1?8:n-1<=t?0:h.bj((t-2)*r+7));return e}}),t(u.Ye)})},function(t,e){_esm(e),e.eea="PlaybackMilestoneStoreSymbol"},function(t,e){_esm(e),e.OHa="PboManifestRequestTransformerSymbol"},function(t,e,i){var n,r,a,o,s;function u(t,e){this.Vb=t,this.j=e,this.wW=[]}_esm(e),e.oQ=void 0,t=i(1),n=i(3),r=i(0),a=i(19),o=i(30),s=i(8),u.prototype.r5=function(e){this.wW.forEach(function(t){return t(e)})},u.prototype.Xd=function(t,e,i){this.j.Xd(t,e,i)},u.prototype.zqb=function(t){-1===this.wW.indexOf(t)&&this.wW.push(t)},u.prototype.uVb=function(t){0<=(t=this.wW.indexOf(t))&&this.wW.splice(t,1)},u.prototype.nZa=function(t){var e,i={};a.Xc(t.code)?i.na=n.rCa(t.code):i.na=n.L.Lj;try{e=t.message.match(/\((\d*)\)/)[1],i.pf=s.Hia(e,4)}catch(t){}return i.ub=o.wd(t),i},i=t.__decorate([r.R()],u),e.oQ=i},function(t,e){_esm(e),e.bJa="PlaygraphPlaybackStrategyFactorySymbol"},function(t,e){_esm(e),e.fJa="PlaygraphStateFactorySymbol"},function(t,e){_esm(e),e.JEa="LegacyPostPlayShimFactorySymbol"},function(t,e,i){var o;function n(t,e,i,n,r){var a=this;this.fb=t,this.Ek=e,this.Wu=i,this.Ub=n,this.Em=r,this.Q9=new Map,this.mYb(),this.Ub.addListener(o.Da.loaded,function(){return a.a6a()})}_esm(e),e.WE=void 0,o=i(15),n.prototype.QPa=function(e){var i=this,t=Object.keys(this.fb.fl.qa).find(function(t){return i.fb.fl.qa[t].W===e.J});return e.id||(e.id=null!=t?t:this.Em.Lr(e.J)),t||(this.fb.fl=this.Em.xrb(this.fb.fl,e)),t=this.jI(e.id),e.rj&&this.fb.o1b(e.id,e.rj),t},n.prototype.xab=function(){return Promise.reject(Error("Error isn't recoverable"))},n.prototype.qoa=function(t,e){var i=this;return e=void 0===e?{}:e,this.Wu.transition(t,e).then(function(){i.fb.oh=t})},n.prototype.close=function(t){return this.Wu.close(t)},n.prototype.isReady=function(){return this.Wu.XGb()},n.prototype.Dn=function(){return this.Wu.Dn()},n.prototype.cH=function(){return this.Wu.cH()},n.prototype.jI=function(t){return this.Q9.has(t)||this.Q9.set(t,this.Wu.Nk(this.mtb(t))),this.Q9.get(t)},n.prototype.mYb=function(){var i=this;this.Wu.addListener(o.iF.CY,function(){return i.Ub.Fc(o.iF.CY)}),Object.values(o.Da).forEach(function(e){i.Wu.addListener(e,function(t){return i.Ub.Fc(e,t)})})},n.prototype.Nw=function(){this.a6a()},n.prototype.Ksa=function(t){this.Wu.m1b({id:t,J:this.fb.ue(t).W,rj:this.fb.oHb(t)})},n.prototype.WH=function(){},n.prototype.a6a=function(){var t,e;this.isReady()&&(t=this.fb.oh,(e=this.fb.DV(t))&&!this.Q9.has(e)&&(this.Ksa(t),this.jI(e)))},n.prototype.mtb=function(t){var e=this.fb.ue(t),i=this.Ek.lN(e.W),n=null==i?void 0:i.Fb;return i=null==i?void 0:i.oa,{id:t,J:e.W,Z:e.Jb,rj:null!==(t=null==n?void 0:n.rj)&&void 0!==t?t:e.Ob,Fb:n,oa:i}},e.WE=n},function(t,e){function i(){}_esm(e),e.fea=void 0,i.prototype.ara=function(t){return{Fj:(t=void 0===t?{}:t).trackingId,w3:t.authParams,Jm:t.sessionParams,ye:t.uiLabel,Laa:t.uxLabels,fla:t.disableTrackStickiness,HZ:t.uiPlayStartTime,v5:t.forceAudioTrackId,w5:t.forceTimedTextTrackId,Fl:t.isBranching,Rbb:t.vuiCommand,playbackState:t.playbackState?{currentTime:t.playbackState.currentTime,volume:t.playbackState.volume,muted:t.playbackState.muted,playbackRate:t.playbackState.playbackRate}:void 0,zM:t.enableTrickPlay,Eoa:t.heartbeatCooldown,w7:t.isPlaygraph,S7:t.loadImmediately||!1,v5a:t.pin,NX:t.preciseSeeking,Z:t.startPts,Ha:t.endPts,rj:t.logicalEnd,f$:t.renderTimedText,NVa:t.extraManifestParams,lia:t.assetId,dsb:t.audioLanguages,x_b:t.textLanguages,Fbb:t.videoLanguage,Vo:t.packageId,kUa:t.desiredDownloadables,Xua:t.requestReference}},e.fea=i},function(t,e){_esm(e),e.LCa=void 0,e.LCa=function(e){var i,n,r,a;function o(){if(r)for(var t;t=i.pop();)t(a)}function s(t){r=!0,a=t,o()}return i=[],function(t){i.push(t),n||(n=!0,e(s)),o()}}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_;function E(t){var e="info",i="",n=u.ka.get(f.oF).iYa();t.$||(e="error",i+="&errorcode="+(t.errorCode||""),i+="&errorsubcode="+(t.na||"")),k("startup",i="type=startup&sev="+e+i+"&"+o.kO(h.Zb({},n,{prefix:"m_"})),v)}function k(t,e,i){i&&y&&a.config.kab[t]&&(t=w+"&jsoffms="+s.lj()+"&do="+l.kf.onLine+"&"+e+"&"+o.kO(h.Zb({},_.pd,{prefix:"im_"})),n.hf.download({url:i,Fta:t,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},EC:"track"},r.ql))}_esm(e),e.iab=void 0,n=i(74),r=i(12),a=i(14),o=i(50),s=i(51),u=i(8),c=i(3),h=i(24),f=i(71),l=i(11),p=i(123),d=i(31),b=i(39),m=i(34),g=i(18),e.iab=(y=!1,w="",u.Oi("TrackingLog"),(_=u.ka.get(d.fh)).register(c.M.UDa,function(t){var e,i,n;(y=a.config.jab&&!!a.config.pxa)&&(v=u.ka.get(p.zJ).host+a.config.pxa,e=u.ka.get(m.Hk),i=u.ka.get(m.yB),n=u.ka.get(g.jd).id,w="cat=cadplayback&dev="+encodeURIComponent(e.fz)+"&ep="+encodeURIComponent(i.a0)+"&ver="+encodeURIComponent("6.0033.414.911")+"&jssid="+n+"&browserua="+l.xB,a.config.Cz&&(w+="&groupname="+encodeURIComponent(a.config.Cz)),a.config.mJ&&(w+="&uigroupname="+encodeURIComponent(a.config.mJ)),e=w,i=u.ka.get(b.KR),i=h.Zb({},i,{prefix:"pi_"}),i="&"+o.kO(i),w=e+i,_.LN(E)),t(r.Ye)}),k)},function(t,e,i){var n,r,a,o,s;function u(t){var e;n.Oi("MediaSourceASE").trace("Inside MediaSourceASE"),e=t.BV(),this.readyState=s.Sc.CLOSED,this.sourceBuffers=e.sourceBuffers,this.addSourceBuffer=function(t){return e.addSourceBuffer(t)},this.b3=function(t){return e.b3(t)},this.removeSourceBuffer=function(t){return e.removeSourceBuffer(t)},this.Yp=function(t){return e.Yp(t)},this.TY=o++,this.duration=void 0,e.rXb(this.TY),this.readyState=s.Sc.OPEN,this.pc=r.ka.get(a.cg).LH(s.pc,{})}_esm(e),e.iGa=void 0,n=i(8),r=i(8),a=i(29),o=0,Object.defineProperty(u.prototype,"duration",{get:function(){return this.Tj},set:function(t){var e;this.Tj=t||1/0,e=Math.floor(1e3*t)||1/0,this.sourceBuffers.forEach(function(t){t.Tj=e})}}),s={Sc:{CLOSED:0,OPEN:1,Wq:2,name:["CLOSED","OPEN","ENDED"]},pc:{sSa:!0,w3a:!0}},e.iGa=Object.assign(u,s)},function(t,e,i){var h,f,l,p,d,u,b,c;function m(t){return t&&"object"==typeof t?JSON.stringify(t):"string"==typeof t?'"'+t+'"':""+t}function g(r,a,o){var s;return"string"==typeof r?g.call(this,r.split(",").reduce(function(t,e){var i=e.split("=");return e=i[0],i=i.slice(1).join("="),e&&e.length&&(t[e]=i||!0),t},{}),a,o):(s=0,Object.keys(r).forEach(function(e){var t,i=d[e],n=r[e];if(i){if(t=u[e]||c[typeof h[i]])try{n=t(n)}catch(t){return void(o&&o.error("Failed to convert value '"+n+"' for config '"+e+"' : "+t.toString()))}t=p[i],this[i]=n,p[i]!==t&&(o&&o.debug("Config changed for '"+e+"' from "+m(t)+" ("+typeof t+") to "+m(n)+" ("+typeof n+")"),++s)}else a?((i=(i=b[e])?i.filter(function(t){return t[0]!==this},this):[]).push([this,n]),b[e]=i):o&&o.error("Attempt to change undeclared config option '"+e+"'")},this),s&&p.emit("changed"),s)}function n(){return Object.keys(d).reduce(function(t,e){var i=d[e],n=t[i];return n?(n.push(e),t[i]=n.sort(function(t,e){return e.length-t.length})):t[i]=[e],t},{})}function v(t,e){return t.hasOwnProperty(e)?m(t[e]):void 0}function y(t,e){return void 0===t?e:t}e=i(86),i=i(1269).EventEmitter,h={},f=Object.create(h),l=Object.create(f),p=Object.create(l),d={},u={},b={},p.declare=function(n){return Object.keys(n).forEach(function(e){var t=n[e],i=t[0],r=t[1],a=t[2];if(h.hasOwnProperty(e))throw Error("The local configuraion key '"+e+"' is already in use");"string"==typeof i&&(i=[i]),i.forEach(function(n){var t;if(d.hasOwnProperty(n))throw Error("The configuration value '"+n+"' has been declared more than once");h.hasOwnProperty(e)||("function"==typeof r&&(r=r()),h[e]=r),d[n]=e,"function"==typeof a&&(u[n]=a),(t=b[n])&&(t.forEach(function(t){var e=t[0],i={};i[n]=t[1],g.call(e,i,!1)}),delete b[n])})}),p},c={object:function(t){return"object"==typeof t?t:JSON.parse(""+t)},boolean:function(t){return"boolean"==typeof t?t:!("0"==""+t||"false"===(""+t).toLowerCase())},number:function(t){if("number"==typeof t)return t;if(t=parseFloat(""+t),isNaN(t))throw Error("parseFloat returned NaN");return t}},p.set=g.bind(f),p.wX=g.bind(l),p.dump=function(r,a){var t,o,s,u;function c(){u&&r&&r.log("===========================================")}t=Object.keys(b).sort(),o={},s=n(),a=y(a,!0),Object.keys(d).sort().forEach(function(t){var e,i,n;t=d[t],o[t]||(o[t]=!0,e=v(f,t),i=v(l,t),!a&&void 0===e&&void 0===i||(n=s[t].join(","),n+=" = "+m(p[t])+" ("+typeof p[t]+") [",n+=y(i,"<unset>")+",",n+=y(e,"<unset>")+",",n+=v(h,t)+"]",u||(u=!0,r&&r.log("Current config values"),c()),r&&r.log(n)))}),(a||t.length)&&r&&r.log("<undeclared> :",t),c()},p.Et=function(t){var e={},i={};return Object.keys(d).forEach(function(t){t=d[t],i[t]||(i[t]=!0,e[t]=p[t])}),t&&g.call(e,t),e},p.u5a=function(){var i=n();return Object.getOwnPropertyNames(f).reduce(function(t,e){return t[i[e][0]]=f[e],t},{})},p.reset=function(){Object.keys(f).forEach(function(t){delete f[t]})},p.Ad={},e(i,p),t.exports=Object.freeze(p)},function(t,e,i){var o;function c(t){for(var e="",i=0;i<t.length;i++)e+=t[i].W+"|";return e}o=i(307),t.exports={assert:function(t,e){if(!t)throw Error("PlayPredictionModel assertion failed"+(e?" : "+e:""))},Y$b:function(t,e,i){Array.prototype.splice.apply(t,[e,0].concat(i))},YEb:function(t){for(var e=[],i=0;i<t.length;i++)if(t[i].context===o.jR.Vdb){e=t[i].list;break}return e},FEb:function(t){for(var e=[],i=0;i<t.length;i++)if(t[i].context===o.jR.Mcb){e=t[i].list;break}return e},Zzb:function(t,e){for(var i,n,r=0,a=0,o=t.length-1;a<o;a++){i=c(t[a].list||[]),n=!1;for(var s=0,u=e.length;s<u;s++)if(c(e[s].list||[])==i){n=!0;break}if(!1===n){r=a;break}}return r},nQb:function(t,e,i){for(var n,r=[],a=0;a<Math.min(e,t.length);a++)n=t[a].list||[],r=r.concat(n.slice(0,i));return r},mQb:function(t,e){for(var i,n=[],r=0;r<t.length&&(e-=(i=(i=t[r].list||[]).slice(0,Math.min(i.length,e))).length,n=n.concat(i),0!==e);r++);return n},lQb:function(t,e,i){var n;return e<t.length&&0<=e&&(i<(t=t[e].list||[]).length&&(n=t[i])),n},hWa:function(t){for(var e,i={},n=t.length,r=0;r<n;r++){e=t[r].list||[];for(var a=0;a<e.length;a++)if(e[a].property===o.VJ.FR||e[a].property===o.VJ.QAa){i.xk=r,i.jm=a;break}}return void 0===i.xk&&void 0===i.jm&&(i.xk=0,i.jm=0),i}}},function(t,e,i){var n;function r(t,e,i,n,r,a,o){this.PZ=n,this.hcb=t,this.K3a=e,this.Qra=i,this.tLb=a,this.YD=o,this.split=r}function a(){this.K={},this.K[0]=new r("1","2","1","14","-0.0000100136",0,0),this.K[1]=new r("3","4","3","20","-0.0000100136",0,0),this.K[3]=new r("7","8","7","10","1.5",0,0),this.K[7]=new r("15","16","15","9","4.5",0,0),this.K[15]=new r("31","32","31","2","5.5",0,0),this.K[31]=new r("63","64","63","29","-0.0000100136",0,0),this.K[63]=new r("123","124","123","24","-0.0000100136",0,0),this.K[123]=new r("123","124","123","0","0",1,.207298),this.K[124]=new r("123","124","123","0","0",1,.49076),this.K[64]=new r("125","126","125","4","40.5",0,0),this.K[125]=new r("125","126","125","0","0",1,-.00157835),this.K[126]=new r("125","126","125","0","0",1,.934205),this.K[32]=new r("65","66","65","135","5.5",0,0),this.K[65]=new r("127","128","128","4","1272.5",0,0),this.K[127]=new r("127","128","128","0","0",1,-.510333),this.K[128]=new r("127","128","128","0","0",1,.18363),this.K[66]=new r("129","130","129","24","-0.0000100136",0,0),this.K[129]=new r("129","130","129","0","0",1,-.0464542),this.K[130]=new r("129","130","129","0","0",1,.458833),this.K[16]=new r("33","34","34","10","2.00001",0,0),this.K[33]=new r("67","68","67","0","29.5",0,0),this.K[67]=new r("131","132","131","2","39.5",0,0),this.K[131]=new r("131","132","131","0","0",1,-.37577),this.K[132]=new r("131","132","131","0","0",1,.512087),this.K[68]=new r("133","134","134","140","1.5",0,0),this.K[133]=new r("133","134","134","0","0",1,.321272),this.K[134]=new r("133","134","134","0","0",1,-.675396),this.K[34]=new r("69","70","70","2","24.5",0,0),this.K[69]=new r("135","136","136","9","28.5",0,0),this.K[135]=new r("135","136","136","0","0",1,-.0573845),this.K[136]=new r("135","136","136","0","0",1,-.507455),this.K[70]=new r("137","138","137","45","-0.0000100136",0,0),this.K[137]=new r("137","138","137","0","0",1,-.503909),this.K[138]=new r("137","138","137","0","0",1,.450886),this.K[8]=new r("17","18","17","4","44189.5",0,0),this.K[17]=new r("35","36","35","2","21.5",0,0),this.K[35]=new r("71","72","72","0","19.5",0,0),this.K[71]=new r("139","140","140","9","2.5",0,0),this.K[139]=new r("139","140","140","0","0",1,.00403497),this.K[140]=new r("139","140","140","0","0",1,-.312656),this.K[72]=new r("141","142","141","135","96",0,0),this.K[141]=new r("141","142","141","0","0",1,-.465786),this.K[142]=new r("141","142","141","0","0",1,.159633),this.K[36]=new r("73","74","73","130","89.5",0,0),this.K[73]=new r("143","144","144","10","4.5",0,0),this.K[143]=new r("143","144","144","0","0",1,-.76265),this.K[144]=new r("143","144","144","0","0",1,-.580804),this.K[74]=new r("145","146","146","10","16.5",0,0),this.K[145]=new r("145","146","146","0","0",1,.296357),this.K[146]=new r("145","146","146","0","0",1,-.691659),this.K[18]=new r("37","38","38","9","1.5",0,0),this.K[37]=new r("37","38","38","0","0",1,.993951),this.K[38]=new r("75","76","75","0","19",0,0),this.K[75]=new r("147","148","147","39","-0.0000100136",0,0),this.K[147]=new r("147","148","147","0","0",1,-.346535),this.K[148]=new r("147","148","147","0","0",1,-.995745),this.K[76]=new r("147","148","147","0","0",1,-.99978),this.K[4]=new r("9","10","9","5","4.5",0,0),this.K[9]=new r("19","20","19","2","4.5",0,0),this.K[19]=new r("39","40","39","140","7.5",0,0),this.K[39]=new r("77","78","78","134","6.5",0,0),this.K[77]=new r("149","150","150","7","11.5",0,0),this.K[149]=new r("149","150","150","0","0",1,.729843),this.K[150]=new r("149","150","150","0","0",1,.383857),this.K[78]=new r("151","152","151","133","4.5",0,0),this.K[151]=new r("151","152","151","0","0",1,.39017),this.K[152]=new r("151","152","151","0","0",1,.0434342),this.K[40]=new r("79","80","79","133","3.5",0,0),this.K[79]=new r("153","154","154","8","4.5",0,0),this.K[153]=new r("153","154","154","0","0",1,-.99536),this.K[154]=new r("153","154","154","0","0",1,-.00943396),this.K[80]=new r("155","156","155","125","-0.0000100136",0,0),this.K[155]=new r("155","156","155","0","0",1,.266272),this.K[156]=new r("155","156","155","0","0",1,.959904),this.K[20]=new r("41","42","42","10","65.5",0,0),this.K[41]=new r("81","82","82","7","10.5",0,0),this.K[81]=new r("157","158","158","2","37.5",0,0),this.K[157]=new r("157","158","158","0","0",1,-.701873),this.K[158]=new r("157","158","158","0","0",1,.224649),this.K[82]=new r("159","160","159","133","9.5",0,0),this.K[159]=new r("159","160","159","0","0",1,.0955181),this.K[160]=new r("159","160","159","0","0",1,-.58962),this.K[42]=new r("83","84","83","39","-0.0000100136",0,0),this.K[83]=new r("161","162","161","135","31",0,0),this.K[161]=new r("161","162","161","0","0",1,-.229692),this.K[162]=new r("161","162","161","0","0",1,.88595),this.K[84]=new r("163","164","164","1","13.5",0,0),this.K[163]=new r("163","164","164","0","0",1,-.992157),this.K[164]=new r("163","164","164","0","0",1,.922159),this.K[10]=new r("21","22","22","4","486",0,0),this.K[21]=new r("43","44","44","133","4.5",0,0),this.K[43]=new r("85","86","86","10","4.5",0,0),this.K[85]=new r("165","166","166","4","158.5",0,0),this.K[165]=new r("165","166","166","0","0",1,-.127778),this.K[166]=new r("165","166","166","0","0",1,.955189),this.K[86]=new r("165","166","166","0","0",1,-.994012),this.K[44]=new r("87","88","88","1","3.5",0,0),this.K[87]=new r("167","168","168","135","7",0,0),this.K[167]=new r("167","168","168","0","0",1,-.997015),this.K[168]=new r("167","168","168","0","0",1,.400821),this.K[88]=new r("169","170","169","130","36",0,0),this.K[169]=new r("169","170","169","0","0",1,-.898638),this.K[170]=new r("169","170","169","0","0",1,.56129),this.K[22]=new r("45","46","45","9","2.5",0,0),this.K[45]=new r("89","90","90","9","1.5",0,0),this.K[89]=new r("171","172","171","10","10.5",0,0),this.K[171]=new r("171","172","171","0","0",1,.573986),this.K[172]=new r("171","172","171","0","0",1,-.627266),this.K[90]=new r("173","174","173","31","-0.0000100136",0,0),this.K[173]=new r("173","174","173","0","0",1,.925273),this.K[174]=new r("173","174","173","0","0",1,-.994805),this.K[46]=new r("91","92","91","136","5.5",0,0),this.K[91]=new r("175","176","175","10","10.5",0,0),this.K[175]=new r("175","176","175","0","0",1,.548352),this.K[176]=new r("175","176","175","0","0",1,-.879195),this.K[92]=new r("177","178","178","8","14.5",0,0),this.K[177]=new r("177","178","178","0","0",1,.457305),this.K[178]=new r("177","178","178","0","0",1,-.998992),this.K[2]=new r("5","6","5","10","2.5",0,0),this.K[5]=new r("11","12","11","9","4.5",0,0),this.K[11]=new r("23","24","24","10","4.00001",0,0),this.K[23]=new r("47","48","48","133","5.5",0,0),this.K[47]=new r("93","94","93","3","13.5",0,0),this.K[93]=new r("179","180","179","138","15.5",0,0),this.K[179]=new r("179","180","179","0","0",1,.658398),this.K[180]=new r("179","180","179","0","0",1,-.927007),this.K[94]=new r("181","182","182","3","15.5",0,0),this.K[181]=new r("181","182","182","0","0",1,-.111351),this.K[182]=new r("181","182","182","0","0",1,-.99827),this.K[48]=new r("95","96","95","7","167",0,0),this.K[95]=new r("183","184","183","132","36.5",0,0),this.K[183]=new r("183","184","183","0","0",1,.895161),this.K[184]=new r("183","184","183","0","0",1,-.765217),this.K[96]=new r("185","186","186","137","6.00001",0,0),this.K[185]=new r("185","186","186","0","0",1,-.851095),this.K[186]=new r("185","186","186","0","0",1,.674286),this.K[24]=new r("49","50","49","137","5.5",0,0),this.K[49]=new r("97","98","97","5","23.5",0,0),this.K[97]=new r("187","188","187","3","28.5",0,0),this.K[187]=new r("187","188","187","0","0",1,.951654),this.K[188]=new r("187","188","187","0","0",1,-.993808),this.K[98]=new r("187","188","187","0","0",1,-.99705),this.K[50]=new r("187","188","187","0","0",1,-.997525),this.K[12]=new r("25","26","25","8","8.5",0,0),this.K[25]=new r("51","52","52","10","4.00001",0,0),this.K[51]=new r("99","100","100","133","5.5",0,0),this.K[99]=new r("189","190","190","7","40.5",0,0),this.K[189]=new r("189","190","190","0","0",1,.151839),this.K[190]=new r("189","190","190","0","0",1,-.855517),this.K[100]=new r("191","192","192","133","14.5",0,0),this.K[191]=new r("191","192","192","0","0",1,.86223),this.K[192]=new r("191","192","192","0","0",1,.544394),this.K[52]=new r("101","102","101","135","47.5",0,0),this.K[101]=new r("193","194","194","4","24.5",0,0),this.K[193]=new r("193","194","194","0","0",1,.946185),this.K[194]=new r("193","194","194","0","0",1,.811859),this.K[102]=new r("193","194","194","0","0",1,-.991561),this.K[26]=new r("53","54","54","132","6.5",0,0),this.K[53]=new r("103","104","103","131","85",0,0),this.K[103]=new r("195","196","196","134","16.5",0,0),this.K[195]=new r("195","196","196","0","0",1,.0473538),this.K[196]=new r("195","196","196","0","0",1,-.999401),this.K[104]=new r("197","198","198","8","15.5",0,0),this.K[197]=new r("197","198","198","0","0",1,.816129),this.K[198]=new r("197","198","198","0","0",1,-.99322),this.K[54]=new r("105","106","105","133","3.5",0,0),this.K[105]=new r("105","106","105","0","0",1,-.998783),this.K[106]=new r("199","200","199","39","-0.0000100136",0,0),this.K[199]=new r("199","200","199","0","0",1,.528588),this.K[200]=new r("199","200","199","0","0",1,-.998599),this.K[6]=new r("13","14","14","10","7.5",0,0),this.K[13]=new r("27","28","28","133","7.5",0,0),this.K[27]=new r("55","56","56","10","4.5",0,0),this.K[55]=new r("107","108","107","3","3.5",0,0),this.K[107]=new r("201","202","201","4","17.5",0,0),this.K[201]=new r("201","202","201","0","0",1,-.379512),this.K[202]=new r("201","202","201","0","0",1,.15165),this.K[108]=new r("203","204","203","57","-0.0000100136",0,0),this.K[203]=new r("203","204","203","0","0",1,-.884606),this.K[204]=new r("203","204","203","0","0",1,.265406),this.K[56]=new r("109","110","109","136","6.5",0,0),this.K[109]=new r("205","206","205","4","157.5",0,0),this.K[205]=new r("205","206","205","0","0",1,-.0142737),this.K[206]=new r("205","206","205","0","0",1,.691279),this.K[110]=new r("205","206","205","0","0",1,-.998086),this.K[28]=new r("57","58","58","138","11.5",0,0),this.K[57]=new r("111","112","112","2","6.5",0,0),this.K[111]=new r("207","208","208","7","67.5",0,0),this.K[207]=new r("207","208","208","0","0",1,.763925),this.K[208]=new r("207","208","208","0","0",1,-.309645),this.K[112]=new r("209","210","209","40","-0.0000100136",0,0),this.K[209]=new r("209","210","209","0","0",1,-.306635),this.K[210]=new r("209","210","209","0","0",1,.556696),this.K[58]=new r("113","114","113","138","50.5",0,0),this.K[113]=new r("211","212","212","8","25.5",0,0),this.K[211]=new r("211","212","212","0","0",1,.508234),this.K[212]=new r("211","212","212","0","0",1,.793551),this.K[114]=new r("211","212","212","0","0",1,-.998438),this.K[14]=new r("29","30","29","134","27.5",0,0),this.K[29]=new r("59","60","60","7","17.5",0,0),this.K[59]=new r("115","116","115","135","5.5",0,0),this.K[115]=new r("213","214","214","137","5.5",0,0),this.K[213]=new r("213","214","214","0","0",1,.401747),this.K[214]=new r("213","214","214","0","0",1,.0367503),this.K[116]=new r("215","216","216","8","5.5",0,0),this.K[215]=new r("215","216","216","0","0",1,-.0241984),this.K[216]=new r("215","216","216","0","0",1,-.999046),this.K[60]=new r("117","118","117","0","12.5",0,0),this.K[117]=new r("217","218","218","132","5.5",0,0),this.K[217]=new r("217","218","218","0","0",1,-.997294),this.K[218]=new r("217","218","218","0","0",1,.210398),this.K[118]=new r("219","220","219","137","1.5",0,0),this.K[219]=new r("219","220","219","0","0",1,-.55763),this.K[220]=new r("219","220","219","0","0",1,.074493),this.K[30]=new r("61","62","62","133","42.5",0,0),this.K[61]=new r("119","120","119","135","5.5",0,0),this.K[119]=new r("221","222","222","4","473.5",0,0),this.K[221]=new r("221","222","222","0","0",1,-.920213),this.K[222]=new r("221","222","222","0","0",1,-.17615),this.K[120]=new r("223","224","224","5","144",0,0),this.K[223]=new r("223","224","224","0","0",1,-.954295),this.K[224]=new r("223","224","224","0","0",1,-.382538),this.K[62]=new r("121","122","121","133","50",0,0),this.K[121]=new r("225","226","226","10","18.5",0,0),this.K[225]=new r("225","226","226","0","0",1,-.0731343),this.K[226]=new r("225","226","226","0","0",1,.755454),this.K[122]=new r("227","228","228","0","30",0,0),this.K[227]=new r("227","228","228","0","0",1,.25),this.K[228]=new r("227","228","228","0","0",1,-.997101)}function o(t,e,i,n,r,a){this.r$=r,this.Y3=a}e=i(555),n=i(306),(i={}).Xrb=new function(){this.lmb=n(),this.G=0,this.update=function(){this.G=n()-this.lmb},this.getValue=function(){return this.G},this.type="num"},i.nMb=new function(){this.getValue=function(t,e,i){return this.G="becauseYouAdded"===i.Ya[t].context||null},this.type="cat"},i.oMb=new function(){this.getValue=function(t,e,i){return this.G="becauseYouLiked"===i.Ya[t].context||null},this.type="cat"},i.qMb=new function(){this.getValue=function(t,e,i){return this.G="billboard"===i.Ya[t].context||null},this.type="cat"},i.rMb=new function(){this.getValue=function(t,e,i){return this.G="continueWatching"===i.Ya[t].context||null},this.type="cat"},i.pMb=new function(){this.getValue=function(t,e,i){return this.G="bigRow"===i.Ya[t].context||null},this.type="cat"},i.sMb=new function(){this.getValue=function(t,e,i){return this.G="genre"===i.Ya[t].context||null},this.type="cat"},i.tMb=new function(){this.getValue=function(t,e,i){return this.G="netflixOriginals"===i.Ya[t].context||null},this.type="cat"},i.uMb=new function(){this.getValue=function(t,e,i){return this.G="newRelease"===i.Ya[t].context||null},this.type="cat"},i.vMb=new function(){this.getValue=function(t,e,i){return this.G="popularTitles"===i.Ya[t].context||null},this.type="cat"},i.wMb=new function(){this.getValue=function(t,e,i){return this.G="queue"===i.Ya[t].context||null},this.type="cat"},i.xMb=new function(){this.getValue=function(t,e,i){return this.G="recentlyAdded"===i.Ya[t].context||null},this.type="cat"},i.yMb=new function(){this.getValue=function(t,e,i){return this.G="similars"===i.Ya[t].context||null},this.type="cat"},i.AMb=new function(){this.getValue=function(t,e,i){return this.G="trendingNow"===i.Ya[t].context||null},this.type="cat"},i.BMb=new function(){this.getValue=function(t,e,i){return this.G="ultraHD"===i.Ya[t].context||null},this.type="cat"},i.CMb=new function(){this.getValue=function(t,e,i){return this.G="watchAgain"===i.Ya[t].context||null},this.type="cat"},i.zMb=new function(){this.getValue=function(t,e,i){return this.G="topTen"===i.Ya[t].context||null},this.type="cat"},i.Isb=new function(){this.update=function(t){for(var e in t.Ya)if("becauseYouAdded"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.Jsb=new function(){this.update=function(t){for(var e in t.Ya)if("becauseYouLiked"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.Msb=new function(){this.update=function(t){for(var e in t.Ya)if("billboard"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.Svb=new function(){this.update=function(t){for(var e in t.Ya)if("continueWatching"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.Lsb=new function(){this.update=function(t){for(var e in t.Ya)if("bigRow"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.iEb=new function(){this.update=function(t){for(var e in t.Ya)if("genre"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.pPb=new function(){this.update=function(t){for(var e in t.Ya)if("netflixOriginals"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.rPb=new function(){this.update=function(t){for(var e in t.Ya)if("newRelease"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.XSb=new function(){this.update=function(t){for(var e in t.Ya)if("popularTitles"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.Yo=new function(){this.update=function(t){for(var e in t.Ya)if("queue"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.HUb=new function(){this.update=function(t){for(var e in t.Ya)if("recentlyAdded"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.OYb=new function(){this.update=function(t){for(var e in t.Ya)if("similars"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.s0b=new function(){this.update=function(t){for(var e in t.Ya)if("trendingNow"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.K0b=new function(){this.update=function(t){for(var e in t.Ya)if("ultraHD"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.I2b=new function(){this.update=function(t){for(var e in t.Ya)if("watchAgain"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.b0b=new function(){this.update=function(t){for(var e in t.Ya)if("topTen"===t.Ya[e].context){this.G=Math.max(t.Ya[e].list.length,this.G);break}},this.getValue=function(){return this.G},this.type="num",this.G=0},i.cwb=new function(){this.getValue=function(t,e,i){return this.G="AR"===i.Xa||null},this.type="cat"},i.dwb=new function(){this.getValue=function(t,e,i){return this.G="AT"===i.Xa||null},this.type="cat"},i.ewb=new function(){this.getValue=function(t,e,i){return this.G="AU"===i.Xa||null},this.type="cat"},i.fwb=new function(){this.getValue=function(t,e,i){return this.G="AZ"===i.Xa||null},this.type="cat"},i.gwb=new function(){this.getValue=function(t,e,i){return this.G="BB"===i.Xa||null},this.type="cat"},i.hwb=new function(){this.getValue=function(t,e,i){return this.G="BE"===i.Xa||null},this.type="cat"},i.iwb=new function(){this.getValue=function(t,e,i){return this.G="BO"===i.Xa||null},this.type="cat"},i.jwb=new function(){this.getValue=function(t,e,i){return this.G="BR"===i.Xa||null},this.type="cat"},i.kwb=new function(){this.getValue=function(t,e,i){return this.G="BS"===i.Xa||null},this.type="cat"},i.lwb=new function(){this.getValue=function(t,e,i){return this.G="CA"===i.Xa||null},this.type="cat"},i.mwb=new function(){this.getValue=function(t,e,i){return this.G="CH"===i.Xa||null},this.type="cat"},i.nwb=new function(){this.getValue=function(t,e,i){return this.G="CL"===i.Xa||null},this.type="cat"},i.owb=new function(){this.getValue=function(t,e,i){return this.G="CO"===i.Xa||null},this.type="cat"},i.pwb=new function(){this.getValue=function(t,e,i){return this.G="CR"===i.Xa||null},this.type="cat"},i.qwb=new function(){this.getValue=function(t,e,i){return this.G="CW"===i.Xa||null},this.type="cat"},i.rwb=new function(){this.getValue=function(t,e,i){return this.G="DE"===i.Xa||null},this.type="cat"},i.swb=new function(){this.getValue=function(t,e,i){return this.G="DK"===i.Xa||null},this.type="cat"},i.twb=new function(){this.getValue=function(t,e,i){return this.G="DM"===i.Xa||null},this.type="cat"},i.uwb=new function(){this.getValue=function(t,e,i){return this.G="DO"===i.Xa||null},this.type="cat"},i.vwb=new function(){this.getValue=function(t,e,i){return this.G="EC"===i.Xa||null},this.type="cat"},i.wwb=new function(){this.getValue=function(t,e,i){return this.G="EE"===i.Xa||null},this.type="cat"},i.xwb=new function(){this.getValue=function(t,e,i){return this.G="EG"===i.Xa||null},this.type="cat"},i.ywb=new function(){this.getValue=function(t,e,i){return this.G="ES"===i.Xa||null},this.type="cat"},i.zwb=new function(){this.getValue=function(t,e,i){return this.G="FI"===i.Xa||null},this.type="cat"},i.Awb=new function(){this.getValue=function(t,e,i){return this.G="FR"===i.Xa||null},this.type="cat"},i.Bwb=new function(){this.getValue=function(t,e,i){return this.G="GB"===i.Xa||null},this.type="cat"},i.Cwb=new function(){this.getValue=function(t,e,i){return this.G="GF"===i.Xa||null},this.type="cat"},i.Dwb=new function(){this.getValue=function(t,e,i){return this.G="GP"===i.Xa||null},this.type="cat"},i.Ewb=new function(){this.getValue=function(t,e,i){return this.G="GT"===i.Xa||null},this.type="cat"},i.Fwb=new function(){this.getValue=function(t,e,i){return this.G="HK"===i.Xa||null},this.type="cat"},i.Gwb=new function(){this.getValue=function(t,e,i){return this.G="HN"===i.Xa||null},this.type="cat"},i.Hwb=new function(){this.getValue=function(t,e,i){return this.G="HR"===i.Xa||null},this.type="cat"},i.Iwb=new function(){this.getValue=function(t,e,i){return this.G="HU"===i.Xa||null},this.type="cat"},i.Jwb=new function(){this.getValue=function(t,e,i){return this.G="ID"===i.Xa||null},this.type="cat"},i.Kwb=new function(){this.getValue=function(t,e,i){return this.G="IE"===i.Xa||null},this.type="cat"},i.Lwb=new function(){this.getValue=function(t,e,i){return this.G="IL"===i.Xa||null},this.type="cat"},i.Mwb=new function(){this.getValue=function(t,e,i){return this.G="IN"===i.Xa||null},this.type="cat"},i.Nwb=new function(){this.getValue=function(t,e,i){return this.G="IT"===i.Xa||null},this.type="cat"},i.Owb=new function(){this.getValue=function(t,e,i){return this.G="JE"===i.Xa||null},this.type="cat"},i.Pwb=new function(){this.getValue=function(t,e,i){return this.G="JM"===i.Xa||null},this.type="cat"},i.Qwb=new function(){this.getValue=function(t,e,i){return this.G="JP"===i.Xa||null},this.type="cat"},i.Rwb=new function(){this.getValue=function(t,e,i){return this.G="KE"===i.Xa||null},this.type="cat"},i.Swb=new function(){this.getValue=function(t,e,i){return this.G="KN"===i.Xa||null},this.type="cat"},i.Twb=new function(){this.getValue=function(t,e,i){return this.G="KR"===i.Xa||null},this.type="cat"},i.Uwb=new function(){this.getValue=function(t,e,i){return this.G="LU"===i.Xa||null},this.type="cat"},i.Vwb=new function(){this.getValue=function(t,e,i){return this.G="MK"===i.Xa||null},this.type="cat"},i.Wwb=new function(){this.getValue=function(t,e,i){return this.G="MU"===i.Xa||null},this.type="cat"},i.Xwb=new function(){this.getValue=function(t,e,i){return this.G="MX"===i.Xa||null},this.type="cat"},i.Ywb=new function(){this.getValue=function(t,e,i){return this.G="MY"===i.Xa||null},this.type="cat"},i.Zwb=new function(){this.getValue=function(t,e,i){return this.G="NI"===i.Xa||null},this.type="cat"},i.$wb=new function(){this.getValue=function(t,e,i){return this.G="NL"===i.Xa||null},this.type="cat"},i.axb=new function(){this.getValue=function(t,e,i){return this.G="NO"===i.Xa||null},this.type="cat"},i.bxb=new function(){this.getValue=function(t,e,i){return this.G="NZ"===i.Xa||null},this.type="cat"},i.cxb=new function(){this.getValue=function(t,e,i){return this.G="OM"===i.Xa||null},this.type="cat"},i.dxb=new function(){this.getValue=function(t,e,i){return this.G="PA"===i.Xa||null},this.type="cat"},i.exb=new function(){this.getValue=function(t,e,i){return this.G="PE"===i.Xa||null},this.type="cat"},i.fxb=new function(){this.getValue=function(t,e,i){return this.G="PF"===i.Xa||null},this.type="cat"},i.gxb=new function(){this.getValue=function(t,e,i){return this.G="PH"===i.Xa||null},this.type="cat"},i.hxb=new function(){this.getValue=function(t,e,i){return this.G="PK"===i.Xa||null},this.type="cat"},i.ixb=new function(){this.getValue=function(t,e,i){return this.G="PL"===i.Xa||null},this.type="cat"},i.jxb=new function(){this.getValue=function(t,e,i){return this.G="PT"===i.Xa||null},this.type="cat"},i.kxb=new function(){this.getValue=function(t,e,i){return this.G="PY"===i.Xa||null},this.type="cat"},i.lxb=new function(){this.getValue=function(t,e,i){return this.G="QA"===i.Xa||null},this.type="cat"},i.mxb=new function(){this.getValue=function(t,e,i){return this.G="RO"===i.Xa||null},this.type="cat"},i.nxb=new function(){this.getValue=function(t,e,i){return this.G="RS"===i.Xa||null},this.type="cat"},i.oxb=new function(){this.getValue=function(t,e,i){return this.G="RU"===i.Xa||null},this.type="cat"},i.pxb=new function(){this.getValue=function(t,e,i){return this.G="SA"===i.Xa||null},this.type="cat"},i.qxb=new function(){this.getValue=function(t,e,i){return this.G="SE"===i.Xa||null},this.type="cat"},i.rxb=new function(){this.getValue=function(t,e,i){return this.G="SG"===i.Xa||null},this.type="cat"},i.sxb=new function(){this.getValue=function(t,e,i){return this.G="SV"===i.Xa||null},this.type="cat"},i.txb=new function(){this.getValue=function(t,e,i){return this.G="SX"===i.Xa||null},this.type="cat"},i.uxb=new function(){this.getValue=function(t,e,i){return this.G="TH"===i.Xa||null},this.type="cat"},i.vxb=new function(){this.getValue=function(t,e,i){return this.G="TR"===i.Xa||null},this.type="cat"},i.wxb=new function(){this.getValue=function(t,e,i){return this.G="TT"===i.Xa||null},this.type="cat"},i.xxb=new function(){this.getValue=function(t,e,i){return this.G="TW"===i.Xa||null},this.type="cat"},i.yxb=new function(){this.getValue=function(t,e,i){return this.G="US"===i.Xa||null},this.type="cat"},i.zxb=new function(){this.getValue=function(t,e,i){return this.G="UY"===i.Xa||null},this.type="cat"},i.Axb=new function(){this.getValue=function(t,e,i){return this.G="VE"===i.Xa||null},this.type="cat"},i.Bxb=new function(){this.getValue=function(t,e,i){return this.G="ZA"===i.Xa||null},this.type="cat"},i.JUb=new function(){this.getValue=function(t,e,i){return this.G=1===i.ti||null},this.type="cat"},i.KUb=new function(){this.getValue=function(t,e,i){return this.G=10===i.ti||null},this.type="cat"},i.LUb=new function(){this.getValue=function(t,e,i){return this.G=11===i.ti||null},this.type="cat"},i.MUb=new function(){this.getValue=function(t,e,i){return this.G=12===i.ti||null},this.type="cat"},i.NUb=new function(){this.getValue=function(t,e,i){return this.G=13===i.ti||null},this.type="cat"},i.OUb=new function(){this.getValue=function(t,e,i){return this.G=14===i.ti||null},this.type="cat"},i.PUb=new function(){this.getValue=function(t,e,i){return this.G=15===i.ti||null},this.type="cat"},i.QUb=new function(){this.getValue=function(t,e,i){return this.G=16===i.ti||null},this.type="cat"},i.RUb=new function(){this.getValue=function(t,e,i){return this.G=17===i.ti||null},this.type="cat"},i.SUb=new function(){this.getValue=function(t,e,i){return this.G=18===i.ti||null},this.type="cat"},i.TUb=new function(){this.getValue=function(t,e,i){return this.G=19===i.ti||null},this.type="cat"},i.UUb=new function(){this.getValue=function(t,e,i){return this.G=2===i.ti||null},this.type="cat"},i.VUb=new function(){this.getValue=function(t,e,i){return this.G=20===i.ti||null},this.type="cat"},i.WUb=new function(){this.getValue=function(t,e,i){return this.G=21===i.ti||null},this.type="cat"},i.XUb=new function(){this.getValue=function(t,e,i){return this.G=22===i.ti||null},this.type="cat"},i.YUb=new function(){this.getValue=function(t,e,i){return this.G=23===i.ti||null},this.type="cat"},i.ZUb=new function(){this.getValue=function(t,e,i){return this.G=3===i.ti||null},this.type="cat"},i.$Ub=new function(){this.getValue=function(t,e,i){return this.G=4===i.ti||null},this.type="cat"},i.aVb=new function(){this.getValue=function(t,e,i){return this.G=5===i.ti||null},this.type="cat"},i.bVb=new function(){this.getValue=function(t,e,i){return this.G=6===i.ti||null},this.type="cat"},i.cVb=new function(){this.getValue=function(t,e,i){return this.G=7===i.ti||null},this.type="cat"},i.dVb=new function(){this.getValue=function(t,e,i){return this.G=8===i.ti||null},this.type="cat"},i.eVb=new function(){this.getValue=function(t,e,i){return this.G=9===i.ti||null},this.type="cat"},i.UZb=new function(){this.update=function(t){"down"===t.direction&&this.G++},this.getValue=function(){return this.G},this.type="num",this.G=0},i.WZb=new function(){this.update=function(t){"right"===t.direction&&this.G++},this.getValue=function(){return this.G},this.type="num",this.G=0},i.VZb=new function(){this.update=function(t){"left"===t.direction&&this.G++},this.getValue=function(){return this.G},this.type="num",this.G=0},i.XZb=new function(){this.update=function(t){"up"===t.direction&&this.G++},this.getValue=function(){return this.G},this.type="num",this.G=0},i.$Nb=new function(){this.G=0,this.update=function(t){this.G=Math.max(this.G,t.rowIndex)},this.getValue=function(){return this.G},this.type="num"},i.aOb=new function(){this.G=0,this.update=function(t){this.G=Math.max(this.G,t.Pja)},this.getValue=function(){return this.G},this.type="num"},i.hOb=new function(){this.qS=this.G=0,this.update=function(t){this.qS++,this.G=+(this.G+t.rowIndex)/this.qS},this.getValue=function(){return this.G},this.type="num"},i.iOb=new function(){this.qS=this.G=0,this.update=function(t){return this.qS++,this.G=+(this.G+t.Pja)/this.qS},this.getValue=function(){return this.G},this.type="num"},i.CTb=new function(){this.getValue=function(t,e,i){return this.G=i.Pja+e},this.type="num"},i.DTb=new function(){this.getValue=function(t,e,i){return this.G=i.rowIndex+t},this.type="num"},a.prototype.YD=function(t){return this.POa(this.K[0].j8a(t),t)},a.prototype.POa=function(t,e){return"string"==typeof t?this.POa(this.K[t].j8a(e),e):t},r.prototype.j8a=function(t){switch(this.tLb){case 0:switch(t.features[this.PZ].type){case"cat":return null===t.features[this.PZ].value?this.K3a:"missing"==t.features[this.PZ].value?this.Qra:this.hcb;case"num":return null===t.features[this.PZ].value?this.Qra:t.features[this.PZ].value<this.split?this.hcb:this.K3a;default:return this.Qra}case 1:default:return this.YD}},e.declare({ZW:["modelSelector","modelone"],ivb:["colEpisodeList",5],YIb:["holdDuration",15e3],W7a:["rowFirst",2],uSa:["colFirst",5],Y7a:["rowScroll",2],vSa:["colScroll",6],vWb:["rowScrollHorizontal",6],OWb:["searchTop",3],MTa:["cwFirst",2],WV:["horizontalItemsFocusedMode",3],vLb:["itemsPerRank",1],RNb:["maxNumberPayloadsStored",10],z2a:["maxNumberTitlesScheduled",5],Z9b:["enableDetailedLogging",!0],Ybc:["rowStep",20],y9b:["colStep",15],Abc:["pageRows",100],zbc:["pageColumns",75],dra:["maskParamsList",(new function(){var t,e;for(this.dra=[],this.Te={},this.r$=20,this.Y3=15,t=0;t<100;t++)for(e=0;e<75;e++)Math.floor(t/this.r$)+"_"+Math.floor(e/this.Y3)in this.Te||(this.Te[Math.floor(t/this.r$)+"_"+Math.floor(e/this.Y3)]=1,this.dra.push(new o(0,0,0,0,Math.floor(t/this.r$),Math.floor(e/this.Y3))))}).dra],K:["nodes",(new a).K],mapping:["mapping",{aOb:"0",iOb:"1",$Nb:"2",hOb:"3",Xrb:"4",XZb:"5",VZb:"6",WZb:"7",UZb:"8",DTb:"9",CTb:"10",nMb:"11",oMb:"12",qMb:"13",rMb:"14",pMb:"15",sMb:"16",tMb:"17",uMb:"18",vMb:"19",wMb:"20",xMb:"21",yMb:"22",zMb:"23",AMb:"24",BMb:"25",CMb:"26",JUb:"27",KUb:"28",LUb:"29",MUb:"30",NUb:"31",OUb:"32",PUb:"33",QUb:"34",RUb:"35",SUb:"36",TUb:"37",UUb:"38",VUb:"39",WUb:"40",XUb:"41",YUb:"42",ZUb:"43",$Ub:"44",aVb:"45",bVb:"46",cVb:"47",dVb:"48",eVb:"49",cwb:"50",dwb:"51",ewb:"52",fwb:"53",gwb:"54",hwb:"55",iwb:"56",jwb:"57",kwb:"58",lwb:"59",mwb:"60",nwb:"61",owb:"62",pwb:"63",qwb:"64",rwb:"65",swb:"66",twb:"67",uwb:"68",vwb:"69",wwb:"70",xwb:"71",ywb:"72",zwb:"73",Awb:"74",Bwb:"75",Cwb:"76",Dwb:"77",Ewb:"78",Fwb:"79",Gwb:"80",Hwb:"81",Iwb:"82",Jwb:"83",Kwb:"84",Lwb:"85",Mwb:"86",Nwb:"87",Owb:"88",Pwb:"89",Qwb:"90",Rwb:"91",Swb:"92",Twb:"93",Uwb:"94",Vwb:"95",Wwb:"96",Xwb:"97",Ywb:"98",Zwb:"99",$wb:"100",axb:"101",bxb:"102",cxb:"103",dxb:"104",exb:"105",fxb:"106",gxb:"107",hxb:"108",ixb:"109",jxb:"110",kxb:"111",lxb:"112",mxb:"113",nxb:"114",oxb:"115",pxb:"116",qxb:"117",rxb:"118",sxb:"119",txb:"120",uxb:"121",vxb:"122",wxb:"123",xxb:"124",yxb:"125",zxb:"126",Axb:"127",Bxb:"128",I2b:"129",HUb:"130",OYb:"131",Yo:"132",Svb:"133",iEb:"134",s0b:"135",b0b:"136",Msb:"137",rPb:"138",K0b:"139",XSb:"140",Isb:"141",Lsb:"142",Jsb:"143",pPb:"144"}],features:["features",i],H8b:["_modelName","tree"],C8b:["_format","xgboost"],G8b:["_itemsToKeep",5],F8b:["_itemsThreshold",null],j9b:["cacheLimit",20]}),t.exports={config:e,vac:o,D9b:r}},function(t,e,i){t.exports=i(559)},function(t,e,i){_esm(e),i(560),pt._cad_global={},pt.DEBUG=!1,i(12),i(11),i(19),i(24),i(50),i(92),i(1255),i(552),i(61),i(51),i(21),i(73),i(60),i(1256),i(301),i(335),i(1257),i(534),i(1258),i(531),i(538),i(536),i(537),i(553),i(525),i(526),i(528),i(296),i(295),i(1259),i(14),i(543),i(1260),i(193),i(74),i(532),i(158),i(472),i(473),i(280),i(1261),i(1262),i(496),i(1263),i(489),i(298),i(487),i(297),i(524),i(1264),i(300),i(540),i(190),i(554),i(134),i(1265),i(106),i(1272),i(1273),i(1274),i(1275),i(1277),i(1279),i(539),i(58),i(1280),i(535),i(475),i(533),i(542),i(1281),i(1282),i(305),i(163),i(1283),i(1284),i(1285),i(1287),i(1288),i(529)},function(t,e,i){(function(t){var i,n,e,r,a,o,s,u,c,h,f,l,p,d;function b(t,e,i){var n=c.get(t);if(!n){if(!i)return;n=new s,c.set(t,n)}if(!(t=n.get(e))){if(!i)return;t=new s,n.set(e,t)}return t}function m(t,e,i){return void 0!==(e=b(e,i,!1))&&!!e.has(t)}function g(t,e,i){return void 0===(e=b(e,i,!1))?void 0:e.get(t)}function v(t,e){var i,n=y(t,e);if(null===(t=S(t)))return n;if((e=v(t,e)).length<=0)return n;if(n.length<=0)return e;t=new u;for(var r,a=0;a<n.length;a++)i=n[a],t.add(i);for(n=0;n<e.length;n++)i=e[n],t.add(i);return r=[],T(t,function(t,e){r.push(e)}),r}function y(t,e){var i;return t=b(t,e,!1),i=[],t&&T(t,function(t,e){return i.push(e)}),i}function w(t){return void 0===t}function _(t){return Array.isArray?Array.isArray(t):t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"object"==typeof t?null!==t:"function"==typeof t}function k(t){return"symbol"==typeof t?t:String(t)}function S(t){var e,i=Object.getPrototypeOf(t);return"function"!=typeof t||t===o||i!==o||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?i:e}function T(t,e,i){var n,r,a=t.entries;if("function"==typeof a){a=a.call(t);try{for(;n=(r=(r=a).next()).done?void 0:r;)r=n.value,e.call(i,r[1],r[0],t)}finally{n&&(t=a.return)&&t.call(a)}}else"function"==typeof(a=t.forEach)&&a.call(t,e,i)}function A(e,i,n){var r=0;return{next:function(){var t;if((e||i)&&r<(e||i).length)switch(t=r++,n){case"key":return{value:e[t],done:!1};case"value":return{value:i[t],done:!1};case"key+value":return{value:[e[t],i[t]],done:!1}}return{value:i=e=void 0,done:!0}},throw:function(t){throw(e||i)&&(i=e=void 0),t},return:function(t){return(e||i)&&(i=e=void 0),{value:t,done:!0}}}}function O(t){return t.z8b=1,delete t.A8b,t}function I(){}function x(){this.bf=[],this.Bf=[],this.Dv=l,this.$s=-2}function P(){this.Rg=new s}function R(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function N(){var t,e;do{(t="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):R(new Uint8Array(16),16):R(Array(16),16))[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<16;++n)4!==n&&6!==n&&8!==n||(i+="-"),(e=t[n])<16&&(i+="0"),i+=e.toString(16).toLowerCase()}while(t="@@WeakMap@@"+i,a.has(p,t));return p[t]=!0,t}function j(t,e){if(!n.call(t,d)){if(!e)return;Object.defineProperty(t,d,{value:r()})}return t[d]}function C(){this.jt=N()}i={},n=Object.prototype.hasOwnProperty,e="function"==typeof Object.create,I.prototype=h={},f=(new I).__proto__===h,r=e?function(){return O(Object.create(null))}:f?function(){return O({__proto__:null})}:function(){return O({})},h=a=a||{},f=!e&&!f,h.has=f?function(t,e){return n.call(t,e)}:function(t,e){return e in t},h.get=f?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]},o=Object.getPrototypeOf(Function),s="function"==typeof Map?Map:(l={},Object.defineProperty(x.prototype,"size",{get:function(){return this.bf.length},enumerable:!0,configurable:!0}),x.prototype.has=function(t){return 0<=this.gy(t,!1)},x.prototype.get=function(t){return 0<=(t=this.gy(t,!1))?this.Bf[t]:void 0},x.prototype.set=function(t,e){return t=this.gy(t,!0),this.Bf[t]=e,this},x.prototype.delete=function(t){var e=this.gy(t,!1);if(0<=e){for(t=this.bf.length,e+=1;e<t;e++)this.bf[e-1]=this.bf[e],this.Bf[e-1]=this.Bf[e];return this.bf.length--,this.Bf.length--,this.Dv=l,this.$s=-2,!0}return!1},x.prototype.clear=function(){this.bf.length=0,this.Bf.length=0,this.Dv=l,this.$s=-2},x.prototype.keys=function(){return A(this.bf,void 0,"key")},x.prototype.values=function(){return A(void 0,this.Bf,"value")},x.prototype.entries=function(){return A(this.bf,this.Bf,"key+value")},x.prototype.gy=function(t,e){var i;return this.Dv===t?this.$s:((i=this.bf.indexOf(t))<0&&e&&(i=this.bf.length,this.bf.push(t),this.Bf.push(void 0)),this.Dv=t,this.$s=i)},x),u="function"==typeof Set?Set:(Object.defineProperty(P.prototype,"size",{get:function(){return this.Rg.size},enumerable:!0,configurable:!0}),P.prototype.has=function(t){return this.Rg.has(t)},P.prototype.add=function(t){return this.Rg.set(t,t),this},P.prototype.delete=function(t){return this.Rg.delete(t)},P.prototype.clear=function(){this.Rg.clear()},P.prototype.keys=function(){return this.Rg.keys()},P.prototype.values=function(){return this.Rg.values()},P.prototype.entries=function(){return this.Rg.entries()},P),c=new("function"==typeof WeakMap?WeakMap:(p=r(),d=N(),C.prototype.has=function(t){return void 0!==(t=j(t,!1))&&a.has(t,this.jt)},C.prototype.get=function(t){return void 0!==(t=j(t,!1))?a.get(t,this.jt):void 0},C.prototype.set=function(t,e){return j(t,!0)[this.jt]=e,this},C.prototype.delete=function(t){return void 0!==(t=j(t,!1))&&delete t[this.jt]},C.prototype.clear=function(){this.jt=N()},C)),i.Fr=function(t,e,i,n){var r;if(!w(n)){if(!_(t))throw new TypeError;if(!E(e))throw new TypeError;if(w(i))throw new TypeError;if(!E(n))throw new TypeError;i=k(i);for(var a=t.length-1;0<=a;--a)if(!w(r=(0,t[a])(e,i,n))){if(!E(r))throw new TypeError;n=r}return n}if(w(i)){if(!_(t))throw new TypeError;if("function"!=typeof e)throw new TypeError;for(i=t.length-1;0<=i;--i)if(!w(n=(0,t[i])(e))){if("function"!=typeof n)throw new TypeError;e=n}return e}if(!_(t))throw new TypeError;if(!E(e))throw new TypeError;for(i=k(i),n=t.length-1;0<=n;--n)(0,t[n])(e,i)},i.Gc=function(i,n){return function(t,e){if(w(e)){if("function"!=typeof t)throw new TypeError;b(t,void 0,!0).set(i,n)}else{if(!E(t))throw new TypeError;b(t,e=k(e),!0).set(i,n)}}},i.B4=function(t,e,i,n){if(!E(i))throw new TypeError;w(n)||(n=k(n)),b(i,n,!0).set(t,e)},i.zIb=function(t,e){var i;if(!E(e))throw new TypeError;return w(i)||(i=k(i)),function t(e,i,n){return!!m(e,i,n)||null!==(i=S(i))&&t(e,i,n)}(t,e,i)},i.zoa=function(t,e){var i;if(!E(e))throw new TypeError;return w(i)||(i=k(i)),m(t,e,i)},i.getMetadata=function(t,e,i){if(!E(e))throw new TypeError;return w(i)||(i=k(i)),function t(e,i,n){return m(e,i,n)?g(e,i,n):null!==(i=S(i))?t(e,i,n):void 0}(t,e,i)},i.EYa=function(t,e,i){if(!E(e))throw new TypeError;return w(i)||(i=k(i)),g(t,e,i)},i.x$b=function(t,e){if(!E(t))throw new TypeError;return w(e)||(e=k(e)),v(t,e)},i.z$b=function(t,e){if(!E(t))throw new TypeError;return w(e)||(e=k(e)),y(t,e)},i.G9b=function(t,e,i){var n;if(!E(e))throw new TypeError;return w(i)||(i=k(i)),!(w(n=b(e,i,!1))||!n.delete(t))&&(0<n.size||((t=c.get(e)).delete(i),0<t.size||c.delete(e),!0))},function(t){if(void 0!==t.Reflect){if(t.Reflect!==i)for(var e in i)n.call(i,e)&&(t.Reflect[e]=i[e])}else t.Reflect=i}(void 0!==pt?pt:"undefined"!=typeof WorkerGlobalScope?self:void 0!==t?t:Function("return this;")())}).call(this,i(194))},function(t,e,i){var n,a,r,o,s,u,c,h,f,l,p,d;function b(t){if("object"!=typeof(t=t||{}))throw Error(""+o.Udb);if(void 0===t.DG)t.DG=s.Ps.q1;else if(t.DG!==s.Ps.Gea&&t.DG!==s.Ps.q1&&t.DG!==s.Ps.Request)throw Error(""+o.Sdb);if(void 0===t.LT)t.LT=!1;else if("boolean"!=typeof t.LT)throw Error(""+o.Rdb);if(void 0===t.OI)t.OI=!1;else if("boolean"!=typeof t.OI)throw Error(""+o.Tdb);this.options={LT:t.LT,DG:t.DG,OI:t.OI},this.id=l.id(),this.DK=new d.khb,this.vpb=[],this.parent=this.Cga=null,this.lnb=new u.pda}n=this&&this.__awaiter||function(a,o,s,u){return new(s=s||Promise)(function(t,e){function i(t){try{r(u.next(t))}catch(t){e(t)}}function n(t){try{r(u.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(i,n)}r((u=u.apply(a,o||[])).next())})},a=this&&this.__generator||function(i,n){var r,a,o,s,t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,o&&(s=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,o=e[1],e=[0];continue;case 7:e=r.On.pop(),r.Yn.pop();continue;default:if(!(s=0<(s=r.Yn).length&&s[s.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))r.label=e[1];else if(6===e[0]&&r.label<s[1])r.label=s[1],s=e;else{if(!(s&&r.label<s[2])){s[2]&&r.On.pop(),r.Yn.pop();continue}r.label=s[2],r.On.push(e)}}e=n.call(i,r)}catch(t){e=[6,t],o=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}return r={label:0,bd:function(){if(1&s[0])throw s[1];return s[1]},Yn:[],On:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t},_esm(e),r=i(562),o=i(55),s=i(76),i(43),u=i(308),c=i(563),h=i(570),f=i(572),l=i(107),p=i(135),i(575),d=i(576),b.prototype.load=function(){for(var t,e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];n=this.kNa();for(var r=0;r<i.length;r++)e=n((t=i[r]).id),t.Dua(e.cRa,e.Aab,e.H0a,e.K6a)},b.prototype.LN=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];n(this,void 0,void 0,function(){var e,i,n;return a(this,function(t){switch(t.label){case 0:n=this.kNa(),e=0,i=r,t.label=1;case 1:return e<i.length?(i=i[e],n=n(i.id),[4,i.Dua(n.cRa,n.Aab,n.H0a,n.K6a)]):[3,4];case 2:t.bd(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},b.prototype.bind=function(t){var e=new r.edb(t,this.options.DG||s.Ps.q1);return this.DK.add(t,e),new f.gdb(e)},b.prototype.DUb=function(t){return this.zab(t),this.bind(t)},b.prototype.zab=function(e){try{this.DK.remove(e)}catch(t){throw Error(o.Ddb+" "+p.gN(e))}},b.prototype.Y_a=function(t){var e=this.DK.BZa(t);return!e&&this.parent&&(e=this.parent.Y_a(t)),e},b.prototype.restore=function(){var t=this.vpb.pop();if(void 0===t)throw Error(o.Zhb);this.DK=t.PT,this.Cga=t.GOb},b.prototype.Ixb=function(){var t=new b(this.options);return t.parent=this,t},b.prototype.get=function(t){return this.jNa(!1,!1,s.Vx.Xea,t)},b.prototype.getAll=function(t){return this.jNa(!0,!0,s.Vx.Xea,t)},b.prototype.resolve=function(t){var e=this.Ixb();return e.bind(t).bab(),e.get(t)},b.prototype.kNa=function(){var n;return n=this,function(t){return{cRa:function(t){return(t=n.bind.bind(n)(t)).Ec.bPb=i,t},H0a:function(t){return n.Y_a.bind(n)(t)},K6a:(e=i=t,function(t){return(t=n.DUb.bind(n)(t)).Ec.bPb=e,t}),Aab:function(t){n.zab.bind(n)(t)}};var e,i}},b.prototype.jNa=function(t,e,i,n){var r=null;if(t={wsb:t,Rvb:function(t){return t},TKb:e,key:void 0,Lg:n,q_b:i,value:void 0},this.Cga){if(null==(r=this.Cga(t)))throw Error(o.Rgb)}else r=this.xob()(t);return r},b.prototype.xob=function(){var i=this;return function(t){var e=c.uO(i.lnb,i,t.TKb,t.q_b,t.Lg,t.key,t.value,t.wsb),e=t.Rvb(e);return h.resolve(e)}},e.G_=b},function(t,e,i){var n,r;function a(t,e){this.id=r.id(),this.Bha=!1,this.Lg=t,this.scope=e,this.type=n.Kj.chb,this.uG=function(){return!0},this.uM=this.Mw=this.zA=this.GM=this.cache=this.wm=null}_esm(e),n=i(76),r=i(107),a.prototype.clone=function(){var t=new a(this.Lg,this.scope);return t.Bha=!1,t.wm=this.wm,t.uM=this.uM,t.scope=this.scope,t.type=this.type,t.GM=this.GM,t.zA=this.zA,t.uG=this.uG,t.Mw=this.Mw,t.cache=this.cache,t},e.edb=a},function(t,e,i){var s,c,h,u,f,l,p,d,b,m,g,v;function y(t,e,i,n,r){var a,o=w(i.$a,r.Lg);return o.length===s.Gba.IGa&&i.$a.options.LT&&"function"==typeof r.Lg&&t.pXa(r.Lg).BSa&&(i.$a.bind(r.Lg).bab(),o=w(i.$a,r.Lg)),a=e?o:o.filter(function(t){var e=new g.Request(t.Lg,i,n,t,r);return t.uG(e)}),function(t,e,i,n){switch(e.length){case s.Gba.IGa:if(i.m0a())return;throw t=l.gN(t),e=c.Xhb,e+=l.mMb(t,i),e+=l.q1a(n,t,w),Error(e);case s.Gba.oib:if(!i.isArray())return;default:if(i.isArray())return;throw t=l.gN(t),e=c.kcb+" "+t,e+=l.q1a(n,t,w),Error(e)}}(r.Lg,a,r,i.$a),a}function w(t,e){var i=[],n=t.DK;return n.BZa(e)?i=n.get(e):null!==t.parent&&(i=w(t.parent,e)),i}_esm(e),s=i(564),c=i(55),h=i(76),u=i(43),f=i(309),l=i(135),p=i(565),d=i(65),b=i(566),m=i(567),g=i(569),v=i(311),e.s$b=function(t){return t.DK},e.uO=function(t,e,i,n,r,a,o,s){void 0===s&&(s=!1),e=new p.EAa(e),i=new d.Metadata(i?u.QE:u.hR,r),n=new v.n1(n,"",r,i),void 0!==a&&(a=new d.Metadata(a,o),n.Gc.push(a));try{return function r(a,t,e,o,i,s){var u;null===i?(t=y(a,t,o,null,s),u=new g.Request(e,o,null,t,s),e=new b.ljb(o,u),o.Gqb(e)):(t=y(a,t,o,i,s),u=i.vPa(s.Lg,t,s)),t.forEach(function(t){var e,i,n=null;if(s.isArray())n=u.vPa(t.Lg,t,s);else{if(t.cache)return;n=u}if(t.type===h.Kj.Instance&&null!==t.wm){if(e=m.dFb(a,t.wm),!o.$a.options.OI&&(i=m.BEb(a,t.wm),e.length<i))throw t=c.mcb(m.getFunctionName(t.wm)),Error(t);e.forEach(function(t){r(a,!1,t.Lg,o,n,t)})}})}(t,s,r,e,null,n),e}catch(t){throw f.u0a(t)&&e.uO&&l.Lub(e.uO.kva),t}},e.z9b=function(t,e,i,n){return i=new v.n1(h.Vx.Xea,"",e,new d.Metadata(i,n)),t=new p.EAa(t),new g.Request(e,t,null,[],i)}},function(t,e){_esm(e),e.Gba={a6b:2,IGa:0,oib:1}},function(t,e,i){var n;function r(t){this.id=n.id(),this.$a=t}_esm(e),n=i(107),r.prototype.Gqb=function(t){this.uO=t},e.EAa=r},function(t,e){_esm(e),e.ljb=function(t,e){this.pO=t,this.kva=e}},function(t,e,i){var m,g,v,a,o,y;function s(t,e,i,n){var r,a,o,s,u,c,h,f,l,p=t.pXa(i),d=p.BSa;if(void 0===d)throw Error(g.uhb+" "+e+".");p=p.X1b,r=Object.keys(p),a=(0===i.length&&0<r.length?r:i).length,r=[];for(var b=0;b<a;b++){if(s=n,u=e,c=d,l=!0!==(f=w(h=p[(o=b).toString()]||[])).nl,c=c[o],(c=f.l||f.OH||c)instanceof m.Sca&&(c=c.U0b()),l){if(l=c===Function,l=c===Object||l||void 0===c,!s&&l)throw Error(g.vhb+" argument "+o+" in class "+u+".");(o=new y.n1(v.Vx.CAa,f.nZ,c)).Gc=h,h=o}else h=null;null!==h&&r.push(h)}return t=function t(e,i){var n,r,a;for(var o=e.SGb(i),s=[],u=0,c=Object.keys(o);u<c.length;u++)n=c[u],r=o[n],a=w(o[n]),(n=new y.n1(v.Vx.tAa,a.nZ||n,a.l||a.OH)).Gc=r,s.push(n);i=Object.getPrototypeOf(i.prototype).constructor;i!==Object&&(e=t(e,i),s=s.concat(e));return s}(t,i),r.concat(t)}function w(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{l:e[a.hR],OH:e[a.QE],nZ:e[a.E0],nl:e[a.ZR]}}_esm(e),m=i(310),g=i(55),v=i(76),a=i(43),o=i(135),e.getFunctionName=o.getFunctionName,y=i(311),e.dFb=function(t,e){return s(t,o.getFunctionName(e),e,!1)},e.BEb=function t(e,i){var n,r;return(i=Object.getPrototypeOf(i.prototype).constructor)!==Object?(r=(n=s(e,n=o.getFunctionName(i),i,!0)).map(function(t){return t.Gc.filter(function(t){return t.key===a.ZR})}),r=[].concat.apply([],r).length,0<(n=n.length-r)?n:t(e,i)):0}},function(t,e){function i(t){this.BP=t}_esm(e),i.prototype.startsWith=function(t){return 0===this.BP.indexOf(t)},i.prototype.endsWith=function(t){var e=t.split("").reverse().join("");return t=this.BP.split("").reverse().join(""),this.startsWith.call({BP:t},e)},i.prototype.contains=function(t){return-1!==this.BP.indexOf(t)},i.prototype.equals=function(t){return this.BP===t},i.prototype.value=function(){return this.BP},e.vjb=i},function(t,e,i){var a;function n(t,e,i,n,r){this.id=a.id(),this.Lg=t,this.pO=e,this.rA=i,this.target=r,this.Bja=[],this.PT=Array.isArray(n)?n:[n],this.UVb=null===i?new Map:null}_esm(e),a=i(107),n.prototype.vPa=function(t,e,i){return t=new n(t,this.pO,this,e,i),this.Bja.push(t),t},e.Request=n},function(t,e,i){var u,c,n,h,f;function l(e,i,t){try{return t()}catch(t){if(n.u0a(t))throw Error(u.Gdb(e,i.toString()));throw t}}_esm(e),u=i(55),c=i(76),n=i(309),h=i(135),f=i(571),e.resolve=function(t){return function o(s){return function(t){var e,i=t.PT,n=t.Bja,r=t.target&&t.target.isArray(),a=!(t.rA&&t.rA.target&&t.target&&t.rA.target.GNb(t.target.Lg));if(r&&a)return n.map(function(t){return o(s)(t)});if(r=null,!t.target.m0a()||0!==i.length){if(i=(e=i[0]).scope===c.Ps.Gea,a=e.scope===c.Ps.Request,i&&e.Bha)return e.cache;if(a&&null!==s&&s.has(e.id))return s.get(e.id);if(e.type===c.Kj.AAa)r=e.cache;else if(e.type===c.Kj.Function)r=e.cache;else if(e.type===c.Kj.BAa)r=e.wm;else if(e.type===c.Kj.LBa&&null!==e.uM)r=l("toDynamicValue",e.Lg,function(){return e.uM(t.pO)});else if(e.type===c.Kj.pca&&null!==e.GM)r=l("toFactory",e.Lg,function(){return e.GM(t.pO)});else if(e.type===c.Kj.yJa&&null!==e.zA)r=l("toProvider",e.Lg,function(){return e.zA(t.pO)});else{if(e.type!==c.Kj.Instance||null===e.wm)throw n=h.gN(t.Lg),Error(u.Ngb+" "+n);r=f.fWb(e.wm,n,o(s))}return"function"==typeof e.Mw&&(r=e.Mw(t.pO,r)),i&&(e.cache=r,e.Bha=!0),a&&null!==s&&!s.has(e.id)&&s.set(e.id,r),r}}}(t.uO.kva.UVb)(t.uO.kva)}},function(t,e,i){var o,s,u;_esm(e),o=i(55),s=i(76),u=i(43),e.fWb=function(t,e,i){var n,r,a=null,a=0<e.length?(a=e.filter(function(t){return null!==t.target&&t.target.type===s.Vx.CAa}).map(i),a=new(t.bind.apply(t,[void 0].concat(a))),n=a,i=i,e=(e=e).filter(function(t){return null!==t.target&&t.target.type===s.Vx.tAa}),r=e.map(i),e.forEach(function(t,e){t=t.target.name.value(),n[t]=r[e]}),n):new t;return function(e,t){var i;if(Reflect.zIb(u.HR,e)){i=Reflect.getMetadata(u.HR,e);try{t[i.value]()}catch(t){throw Error(o.cjb(e.name,t.message))}}}(t,a),a}},function(t,e,i){var n,r,a,o;function s(t){this.Ec=t}_esm(e),n=i(55),r=i(76),a=i(573),o=i(312),s.prototype.to=function(t){return this.Ec.type=r.Kj.Instance,this.Ec.wm=t,new a.tza(this.Ec)},s.prototype.bab=function(){if("function"!=typeof this.Ec.Lg)throw Error(""+n.Tgb);this.to(this.Ec.Lg)},s.prototype.$i=function(t){this.Ec.type=r.Kj.AAa,this.Ec.cache=t,this.Ec.uM=null,this.Ec.wm=null,new o.xE(this.Ec)},s.prototype.nE=function(t){return this.Ec.type=r.Kj.LBa,this.Ec.cache=null,this.Ec.uM=t,this.Ec.wm=null,new a.tza(this.Ec)},s.prototype.V_b=function(t){this.Ec.type=r.Kj.BAa,this.Ec.wm=t,new o.xE(this.Ec)},s.prototype.wf=function(t){this.Ec.type=r.Kj.pca,this.Ec.GM=t,new o.xE(this.Ec)},s.prototype.W_b=function(t){if("function"!=typeof t)throw Error(n.Qgb);this.$i(t),this.Ec.type=r.Kj.Function},s.prototype.$$a=function(e){this.Ec.type=r.Kj.pca,this.Ec.GM=function(t){return function(){return t.$a.get(e)}},new o.xE(this.Ec)},s.prototype.wZ=function(t){this.Ec.type=r.Kj.yJa,this.Ec.zA=t,new o.xE(this.Ec)},s.prototype.X_b=function(e){this.nE(function(t){return t.$a.get(e)})},e.gdb=s},function(t,e,i){var n,r,a;function o(t){this.Ec=t,this.hS=new a.Hba(this.Ec),this.nfa=new r.y_(this.Ec),this.AMa=new n.fdb(t)}_esm(e),n=i(574),r=i(197),a=i(198),o.prototype.aa=function(){return this.AMa.aa()},o.prototype.Woa=function(){return this.AMa.Woa()},o.prototype.when=function(t){return this.hS.when(t)},o.prototype.$Z=function(){return this.hS.$Z()},o.prototype.Mw=function(t){return this.nfa.Mw(t)},e.tza=o},function(t,e,i){var n,r;function a(t){this.Ec=t}_esm(e),n=i(76),r=i(312),a.prototype.aa=function(){return this.Ec.scope=n.Ps.Gea,new r.xE(this.Ec)},a.prototype.Woa=function(){return this.Ec.scope=n.Ps.q1,new r.xE(this.Ec)},e.fdb=a},function(t,e){function n(){}_esm(e),e.a4b=(n.of=function(t,e){var i=new n;return i.PT=t,i.GOb=e,i},n)},function(t,e,i){var n;function r(){this.Rg=new Map}_esm(e),n=i(55),r.prototype.add=function(t,e){var i;if(null==t)throw Error(n.BR);if(null==e)throw Error(n.BR);void 0!==(i=this.Rg.get(t))?(i.push(e),this.Rg.set(t,i)):this.Rg.set(t,[e])},r.prototype.get=function(t){if(null==t)throw Error(n.BR);if(void 0!==(t=this.Rg.get(t)))return t;throw Error(n.vEa)},r.prototype.remove=function(t){if(null==t)throw Error(n.BR);if(!this.Rg.delete(t))throw Error(n.vEa)},r.prototype.BZa=function(t){if(null==t)throw Error(n.BR);return this.Rg.has(t)},r.prototype.clone=function(){var i=new r;return this.Rg.forEach(function(t,e){t.forEach(function(t){return i.add(e,t.clone())})}),i},e.khb=r},function(t,e,i){var n;_esm(e),n=i(107),e.rd=function(t){this.id=n.id(),this.Dua=t},e.hza=function(t){this.id=n.id(),this.Dua=t}},function(t,e,i){var n,r;_esm(e),n=i(55),r=i(43),e.R=function(){return function(t){var e;if(Reflect.zoa(r.Bda,t))throw Error(n.$eb);return e=Reflect.getMetadata(r.yeb,t)||[],Reflect.B4(r.Bda,e,t),t}}},function(t,e,i){var o,s;_esm(e),o=i(65),s=i(93),e.y$a=function(r,a){return function(t,e,i){var n=new o.Metadata(r,a);"number"==typeof i?s.ZI(t,e,i,n):s.mZ(t,e,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(43),o=i(65),s=i(93),e.z3a=function(r){return function(t,e,i){var n=new o.Metadata(a.vB,r);"number"==typeof i?s.ZI(t,e,i,n):s.mZ(t,e,n)}}},function(t,e,i){var r,a,o;_esm(e),r=i(43),a=i(65),o=i(93),e.optional=function(){return function(t,e,i){var n=new a.Metadata(r.RGa,!0);"number"==typeof i?o.ZI(t,e,i,n):o.mZ(t,e,n)}}},function(t,e,i){var r,a,o;_esm(e),r=i(43),a=i(65),o=i(93),e.nl=function(){return function(t,e,i){var n=new a.Metadata(r.ZR,!0);o.ZI(t,e,i,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(43),o=i(65),s=i(93),e.OH=function(r){return function(t,e,i){var n=new o.Metadata(a.QE,r);"number"==typeof i?s.ZI(t,e,i,n):s.mZ(t,e,n)}}},function(t,e,i){var a,o,s;_esm(e),a=i(43),o=i(65),s=i(93),e.nZ=function(r){return function(t,e,i){var n=new o.Metadata(a.E0,r);s.ZI(t,e,i,n)}}},function(t,e,i){var n,r,a;_esm(e),n=i(55),r=i(43),a=i(65),e.T5a=function(){return function(t,e){if(e=new a.Metadata(r.HR,e),Reflect.zoa(r.HR,t.constructor))throw Error(n.Ihb);Reflect.B4(r.HR,e,t.constructor)}}},function(t,e){_esm(e),e.v3a=function(n){return function(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.forEach(function(t){return n.bind(t).X_b(i)})}}}},function(t,e,n){var i,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y;function w(t,e){t=t.xw||t.yN?f.FXa(e):t.iW?p.PXa(e):t.u7?l.AYa(e):t.DN?d.SYa(e):h.lXa(e),this.a0=t.a0,this.Tba=t.Tba}function _(t){this.he=t}function E(t){var e=o.Vda.call(this)||this;return t.AN?Object.assign(e,d.ZXa()):t.iW?Object.assign(e,p.OXa()):t.u7?Object.assign(e,l.zYa()):t.xw||t.yN?Object.assign(e,f.EXa()):t.DN?Object.assign(e,d.RYa()):Object.assign(e,h.kXa(t)),e}function k(t){this.data=t.iW?p.RXa(t):t.u7?l.CYa(t):t.xw||t.yN?f.HXa(t):t.DN?d.UYa(t):h.nXa(t)}_esm(e),e.platform=e.zdb=e.ydb=e.xdb=e.wdb=void 0,t=n(1),i=n(0),r=n(34),a=n(108),o=n(588),s=n(164),u=n(315),c=n(200),h=n(589),f=n(590),l=n(591),p=n(592),d=n(593),b=n(594),m=n(595),it.Object.defineProperties(k.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return this.data.version}},L8:{configurable:!0,enumerable:!0,get:function(){return this.data.L8}},bq:{configurable:!0,enumerable:!0,get:function(){return this.data.bq}},Fo:{configurable:!0,enumerable:!0,get:function(){return this.data.Fo}},PM:{configurable:!0,enumerable:!0,get:function(){return this.data.PM}},fz:{configurable:!0,enumerable:!0,get:function(){return this.data.fz}},bla:{configurable:!0,enumerable:!0,get:function(){return this.data.bla}},aUa:{configurable:!0,enumerable:!0,get:function(){return this.data.aUa}},Hqa:{configurable:!0,enumerable:!0,get:function(){return this.data.Hqa}},BU:{configurable:!0,enumerable:!0,get:function(){return this.data.BU}},eya:{configurable:!0,enumerable:!0,get:function(){return this.data.eya}},g3:{configurable:!0,enumerable:!0,get:function(){return this.data.g3}},jY:{configurable:!0,enumerable:!0,get:function(){return this.data.jY}}}),g=k,g=t.__decorate([i.R(),t.__param(0,i.l(s.mB))],g),e.wdb=g,T(E,o.Vda),v=E,v=t.__decorate([i.R(),t.__param(0,i.l(s.mB))],v),e.xdb=v,_.prototype.apply=function(){return this.he.iW?Object.assign(this,p.QXa(this.he)):this.he.u7?Object.assign(this,l.BYa(this.he)):this.he.xw||this.he.yN?Object.assign(this,f.GXa(this.he)):this.he.DN?Object.assign(this,d.TYa(this.he)):Object.assign(this,h.mXa(this.he)),this},y=_,y=t.__decorate([i.R(),t.__param(0,i.l(s.mB))],y),e.ydb=y,w=t.__decorate([i.R(),t.__param(0,i.l(s.mB)),t.__param(1,i.l(r.Hk))],w),e.zdb=w,e.platform=new i.rd(function(t){t(r.Hk).to(g).aa(),t(a.fF).to(v).aa(),t(u.lIa).to(y).aa(),t(r.yB).to(w).aa(),t(c.Wda).wf(function(e){return function(){var t=e.$a.get(s.mB);return t.xw||t.yN?{ac:function(t,e,i){return new m.cfa(t,e,i)},request:b.lMa}:t.DN?{ac:function(t,e,i){return new(n(596))(t,e,i)},request:n(597)}:{}}})})},function(t,e,i){var n,r,a,o,s;_esm(e),e.Vda=void 0,n=i(4),r=i(52),a=i(199),o=i(44),s={MONOSPACED_SERIF:"font-family:Courier New,Arial,Helvetica;font-weight:bolder",MONOSPACED_SANS_SERIF:"font-family:Consolas,Lucida Console,Menlo,Monaco,Arial,Helvetica;font-weight:bolder",PROPORTIONAL_SERIF:"font-family:Georgia,Times New Roman,Arial,Helvetica;font-weight:bolder",PROPORTIONAL_SANS_SERIF:"font-family:Arial,Helvetica;font-weight:bolder",CASUAL:"font-family:Gabriola,Segoe Print,Comic Sans MS,Chalkboard,Arial,Helvetica;font-weight:bolder",CURSIVE:"font-family:Lucida Handwriting,Brush Script MT,Segoe Script,Arial,Helvetica;font-weight:bolder",SMALL_CAPITALS:"font-family:Copperplate Gothic,Copperplate Gothic Bold,Copperplate,Arial,Helvetica;font-variant:small-caps;font-weight:bolder"},e.Vda=function(){this.UQa=this.JL=a.sx.x0,this.Nva=!0,this.oC=[],this.gv=[],this.aI=this.xM=!1,this.dv=[o.Zm.Uba,o.Zm.Ojb,o.Zm.cK],this.xm=void 0,this.Gla=!0,this.V4=!1,this.AT=r.fa(288e4),this.BT=r.fa(335544320),this.dA=n.Nc(15e3),this.ONb=r.fa(6291456),this.MN=1e3,this.kja=!0,this.jxa=s,this.JP=r.fa(0),this.naa=n.Nc(0),this.$V=!0,this.Haa=!1,this.yra=this.C5=!0,this.KG=!1}},function(t,e,i){var n,r,a;_esm(e),e.lXa=e.mXa=e.kXa=e.nXa=void 0,n=i(26),r=i(44),a=i(136),e.nXa=function(t){return Object.assign(Object.assign({},a.VM()),{bq:t.y0a?"T":t.xN?"C":"M",Fo:t.y0a?"NFCDTS-01-":t.A7?"NFCDCH-02-":t.Cpa?"NFCDCH-MC-":t.xN?"NFCDCH-01-":t.i7?"NFCDCH-AP-":t.h7?"NFCDCH-AT-":t.AN?"NFCDCH-PH-":"NFCDCH-LX-",fz:t.xN?"chromeos-cadmium":"chrome-cadmium",jY:t.xN})},e.kXa=function(t){var e=Object.assign(Object.assign({},a.TM()),{xM:!0,aI:!0});return t.xN&&(e.gv=[].concat(G(r.N.rca),G(r.N.pba),G(r.N.SLa),G(r.N.Tea),G(r.N.Uea),G(r.N.vca),G(r.N.uca))),e},e.mXa=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,workaroundValueForSeekIssue:500,captureKeyStatusData:!0,logMediaPipelineStatus:!0,prepareCadmium:!0,enableLdlPrefetch:!0,captureBatteryStatus:!0,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,enableSeamless:!0,videoCapabilityDetectorType:n.gj.FJ,preciseSeeking:!0,useTypescriptEme:!0,webkitDecodedFrameCountIncorrectlyReported:!0,enableCDMAttestedDescriptors:!0};return 67<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableVP9:!0})),80<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableMediaCapabilities:!0})),t.xN&&89<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableHEVC:!0,enablePRK:!0,enableHDR:!0,enableMediaCapabilities:!0,enableHdcp:!0,prepareLdlCacheMaxCount:15})),94<=t.Pp&&t.A7&&(e=Object.assign(Object.assign({},e),{overrideEnableAVCHigh:!1,microsoftClearLeadRequiresSwdrm:!0})),e},e.lXa=function(t){return a.UM(t)}},function(t,e,i){var u,c,h,n,r,f;_esm(e),e.FXa=e.GXa=e.EXa=e.HXa=void 0,u=i(26),c=i(109),h=i(44),n=i(199),r=i(136),f=i(110),e.HXa=function(t){return Object.assign(Object.assign({},r.VM()),{bq:t.xw?"D":"H",Fo:t.xw?t.Cpa?"NFCDIE-04-":t.i7?"NFCDIE-AP-":t.h7?"NFCDIE-AT-":t.AN?"NFCDIE-PH-":"NFCDIE-03-":"NFCDIE-02-",fz:"edge-cadmium",g3:!1,jY:!1})},e.EXa=function(){return Object.assign(Object.assign({},r.TM()),{JL:pt.crypto?n.sx.x0:n.sx.uEa,UQa:pt.crypto?n.sx.x0:n.sx.uEa,oC:[h.ze.GE,h.ze.HE,h.ze.xQ,h.ze.yQ],gv:[].concat(G(h.N.rca),G(h.N.pba),G(h.N.SLa),G(h.N.Tea),G(h.N.Uea),G(h.N.vca),G(h.N.uca),G(h.N.YAa),G(h.N.XAa),G(h.N.Hj)),xm:void 0,$V:!1})},e.GXa=function(t){var e={nudgeSourceBuffer:!0,audioCapabilityDetectorType:u.nv.Lx,videoCapabilityDetectorType:u.gj.Lx,microsoftHwdrmRequiresHevc:!0,microsoftScreenSizeFilterEnabled:!0,addFailedLogBlobsToQueue:!1,bookmarkIgnoreBeginning:"2000"},i=t.yN,n=t.xw,r=t.A7,a=null===(o=pt.MSMediaKeys)||void 0===o?void 0:o.isTypeSupported(c.Hb.Ud,f.Gd.Ira),o=a||(null===(s=pt.MSMediaKeys)||void 0===s?void 0:s.isTypeSupported(c.Hb.gF,f.Gd.Ira)),s={prepareCadmium:!0,enableLdlPrefetch:!o||a,licenseRenewalRequestDelay:5e3,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,prepareLdlCacheMaxCount:15};return a={audioCapabilityDetectorType:u.nv.qv,videoCapabilityDetectorType:u.gj.FJ,microsoftScreenSizeFilterEnabled:!1,keySystemList:[c.Hb.hMa],useTypescriptEme:!0,licenseRenewalRequestDelay:0,audioProfiles:[h.ze.GE,h.ze.HE],videoProfiles:[h.N.QJ,h.N.FE,h.N.LQ,h.N.MQ],enableAVCHigh:!0,droppedFrameRateFilterEnabled:!0,enableCDMAttestedDescriptors:!0},i&&(14<=t.Pp&&(e=Object.assign(Object.assign(Object.assign({},e),s),{microsoftEnableDeviceInfo:!0,microsoftClearLeadRequiresSwdrm:!0,enableHWDRM:!0,enableHEVC:!0,useHevcCodecForDolbyVision:!0})),15<=t.Pp&&(e=Object.assign(Object.assign({},e),{enablePRK:!0,enableDV:!0,enableHDR:!0,usePlayReadyHeaderObject:!0})),16<=t.Pp&&(e=Object.assign(Object.assign({},e),{microsoftHwdrmRequiresHevc:!1})),17<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableDDPlusAtmos:!0}))),n&&(e=Object.assign(Object.assign({},e),s),r&&(e=Object.assign(Object.assign({},e),{webkitDecodedFrameCountIncorrectlyReported:!0,noRenderTimeoutMilliseconds:1e4})),o?(e=Object.assign(Object.assign({},e),{microsoftEnableDeviceInfo:!1,microsoftClearLeadRequiresSwdrm:!0,enableHWDRM:!0,enableHEVC:!0,enablePRK:!0,enableDV:!0,enableHDR:!0,usePlayReadyHeaderObject:!0,microsoftHwdrmRequiresHevc:!1,enableDDPlusAtmos:!0,keySystemList:[c.Hb.njb,c.Hb.rIa]}),94===t.Pp&&(e=Object.assign(Object.assign({},e),{enableHWDRM:!1})),95<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableHWDRM:!0}))):e=Object.assign(Object.assign({},e),a)),e},e.FXa=function(t){return r.UM(t)}},function(t,e,i){var n,r;_esm(e),e.AYa=e.BYa=e.zYa=e.CYa=void 0,n=i(26),r=i(136),e.CYa=function(t){return Object.assign(Object.assign({},r.VM()),{bq:"O",Fo:t.i7?"NFCDOP-AP-":t.h7?"NFCDOP-AT-":t.AN?"NFCDOP-PH-":"NFCDOP-01-",fz:"opera-cadmium"})},e.zYa=function(){return Object.assign(Object.assign({},r.TM()),{xM:!0,aI:!0})},e.BYa=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,workaroundValueForSeekIssue:500,captureKeyStatusData:!0,logMediaPipelineStatus:!0,prepareCadmium:!0,enableLdlPrefetch:!0,captureBatteryStatus:!0,enableMediaPrefetch:!0,defaultHeaderCacheSize:15,enableSeamless:!0,videoCapabilityDetectorType:n.gj.FJ,preciseSeeking:!0,useTypescriptEme:!0,webkitDecodedFrameCountIncorrectlyReported:!0,enableCDMAttestedDescriptors:!0};return 67<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableVP9:!0})),e},e.AYa=function(t){return r.UM(t)}},function(t,e,i){var n,r;_esm(e),e.PXa=e.QXa=e.OXa=e.RXa=void 0,n=i(26),r=i(136),e.RXa=function(t){return Object.assign(Object.assign({},r.VM()),{bq:"F",Fo:t.Cpa?"NFCDFF-MC-":t.A7?"NFCDFF-02-":t.i7?"NFCDFF-AP-":t.h7?"NFCDFF-AT-":t.AN?"NFCDFF-PH-":"NFCDFF-LX-",fz:"firefox-cadmium"})},e.OXa=function(){return Object.assign(Object.assign({},r.TM()),{xM:!0,aI:!0})},e.QXa=function(t){var e={droppedFrameRateFilterEnabled:!0,promiseBasedEme:!0,defaultHeaderCacheSize:15,enableMediaPrefetch:!0,enableLdlPrefetch:!0,prepareCadmium:!0,enableSeamless:!0,waitForDrmToAppendMedia:!0,videoCapabilityDetectorType:n.gj.FJ,useTypescriptEme:!0,enableCDMAttestedDescriptors:!0};return 58<=t.Pp&&(e=Object.assign(Object.assign({},e),{enableVP9:!0,preciseSeeking:!0})),e},e.PXa=function(t){return r.UM(t)}},function(t,e,i){var n,r,a,o,s;function u(){return Object.assign(Object.assign({},s.TM()),{oC:[o.ze.GE,o.ze.HE,o.ze.tF],gv:[].concat(G(o.N.rca),G(o.N.pba),G(o.N.Tea),G(o.N.Uea),G(o.N.vca),G(o.N.uca),G(o.N.YAa),G(o.N.XAa)),xm:a.Hb.Ifb,dA:n.Nc(7e3)})}_esm(e),e.SYa=e.TYa=e.RYa=e.ZXa=e.UYa=void 0,n=i(4),r=i(26),a=i(109),o=i(44),s=i(136),e.UYa=function(t){return Object.assign(Object.assign({},s.VM()),{bq:"S",Fo:t.AN?"NFCDSF-PH-":"NFCDSF-01-",fz:"safari-cadmium"})},e.ZXa=function(){return Object.assign(Object.assign({},u()),{Haa:!0,KG:!1,dv:[o.Zm.u1]})},e.RYa=u,e.TYa=function(t){var e={delayErrorHandling:{7361:"100",7371:"100",7373:"100"},licenseRenewalRequestDelay:5e3,enableLastChunkLogging:!0,appendInitSegmentAfterLicense:!0,addFailedLogBlobsToQueue:!1,performRewindCheck:!1,fatalOnUnexpectedSeeking:!1,fatalOnUnexpectedSeeked:!1,waitForDrmToAppendMedia:!0,forceAppendHeadersAfterDrm:!0,videoCapabilityDetectorType:r.gj.qv,enableSeamless:!0};return s.kW(t,10,12,2)&&(e=Object.assign(Object.assign({},e),{keySystemId:"com.apple.fps.3_0",enableMediaPrefetch:!0,defaultHeaderCacheSize:15,prepareCadmium:!0})),s.kW(t,10,13,6)&&(e=Object.assign(Object.assign({},e),{enableLdlPrefetch:!0})),s.kW(t,10,15,5)&&(e=Object.assign(Object.assign({},e),{useTypescriptEme:!0,useEncryptedEvent:!1,enablePRK:!0,enableDV:!0,enableAVCHigh:!0,enableHEVC:!0,enableHDR:!0,enableCDMAttestedDescriptors:!0,waitForDrmToAppendMedia:!1,forceAppendHeadersAfterDrm:!1,enableMediaCapabilities:!0,powerEfficientForVideo:!0,preciseSeeking:!0})),s.kW(t,10,15,6)&&(e=Object.assign(Object.assign({},e),{keyStatusFilterEnabled:!0,hdcpEngagementWaitTime:8e3,enableUHD:!0})),s.E0a(t,9)&&(e=Object.assign(Object.assign({},e),{maxDecoderBufferMilliseconds:31e3})),e},e.SYa=function(t){return s.UM(t)}},function(t,e,i){var n;function r(t,e,i,n){this.log=t,this.aH=e,this.FA=i,this.context=n}_esm(e),e.lMa=void 0,n=i(3),r.prototype.Hg=function(t){var e=this;return(this.context.qf||this.context.Yk)&&this.log.trace("Requesting license",{drmType:t.Eo}),this.aH(t).catch(function(t){if(e.log.error("Unable to get the Playready license",t),e.context.Wcc)throw t;throw{$:!1,code:n.M.XJ,Cc:t.Cc,Kd:t.Kd,un:t.un,hk:t.message||t.hk,DM:t.data,message:"Unable to send the Playready license request. "+(t.message||t.hk)}})},r.prototype.release=function(t){var e=this;return this.log.trace("Requesting stop data"),this.FA(t).catch(function(t){throw e.log.error("Unable to release the PlayReady license ",{code:t.code,subCode:t.Cc,extCode:t.Kd,edgeCode:t.un,message:t.message||t.hk}),{$:!1,code:n.M.tea,Cc:t.Cc,Kd:t.Kd,un:t.un,hk:t.message||t.hk,message:"Unable to release the PlayReady license. "+(t.message||t.hk)}})},e.lMa=r,pt._cad_global.WindowsDrmRequests=r},function(t,e,i){var n,l,p,r,d,a,o,s,b;function u(t,e,i){var n=this;if(this.log=t,this.Nn=e||function(t){this.context.za&&(this.pd[t]=this.context.za.getTime(),this.log.trace("Milestone: "+t+", "+this.pd[t]))}.bind(this),this.context=i,this.CX=this.challenge=this.keySystem=this.keySessionId=this.Ib=this.mediaKeys=void 0,this.pd={},this.vqa=this.Iwa=!1,this.pX=function(t){var e=t.target.error?t.target.error.msExtendedCode:void 0;this.log.error("Received "+t.type+" event",{sessionId:this.Ib.sessionId,systemCode:e}),this.context.onerror&&this.context.onerror(b.ag.fr,b.GB.Ss,e);this.Ib=void 0}.bind(this),this.CX=void 0,this.lya=new Promise(function(t,e){n.dva=t,n.Fua=e}),this.lya.catch(function(t){n.log.error("wait for license rejected",t)}),l.cc.get(o.yx).T5().then(function(t){(n.context.qf||n.context.Yk)&&n.log.debug("DRIVERINFO: ",t)}).catch(function(t){n.log.error("DRIVERINFO",t)}),this.Mn=function(t,e){n.Fua(t,e),n.context.onerror(t,e)},this.Hsa=function(){n.dva()},!(this instanceof u))throw new TypeError("EmeSession constructor not called correctly.")}function m(){return l.cc.get(a.Ci)}function g(){return l.cc.get(r.cg)}function v(t,e,i){for(var n,r,a,o=2;o<arguments.length;++o);for(o="",r=t.length,n=0;n<r;n++)0<(a=t[n])&&(o+=String.fromCharCode(a));for(r="\\s*(.*)\\s*",n=arguments.length-1;0<n;n--){if(a=arguments[n],o.search(a)<0)return;r="[\\s\\S]*<"+(a="(?:[^:].*:|)"+a)+"[^>]*>"+r+"</"+a+">[\\s\\S]*"}if(o=o.match(new RegExp(r)))return o[1]}function y(i,n,r){return i.m7()&&i.log.trace("LICENSE: Got the response, calling update",{sessionId:r.sessionId,license:m().encode(n)}),new Promise(function(t,e){try{i.Ib.update(n),t(void 0),i.m7()&&i.log.trace("LICENSE: Update succeeded",{sessionId:r.sessionId})}catch(t){e({$:!1,code:b.ag.R0,message:"Unable to update the EME.",ub:g().wd(t)})}})}_esm(e),e.cfa=void 0,n=i(3),l=i(196),p=i(201),r=i(29),d=i(77),a=i(36),o=i(26),s=i(62),(b={}).ag=n.M,b.GB=n.L,u.prototype.Wt=function(){return this.keySystem},u.prototype.Yab=function(t,e){t.log&&(this.log=t.log),t.Nn&&(this.Nn=t.Nn),e.Nl&&(this.context.Nl=e.Nl),e.onerror&&(this.context.onerror=e.onerror)},u.prototype.create=function(t){var i=this;return(t?Promise.resolve(t):l.cc.get(o.yx).Wt()).then(function(e){if(i.Nn("lg"),i.log.trace("Creating the media keys",{keySystem:e}),i.keySystem=e,i.context.UX)e=Promise.reject({$:!1,code:b.ag.GQ,message:"Promise based EME is currently not supported for Internet Explorer"});else t:{try{i.mediaKeys=new pt.MSMediaKeys(e)}catch(t){e=Promise.reject({$:!1,code:b.ag.cHa,message:"create MSMediaKeys("+e+") failed",ub:g().wd(t)});break t}try{i.context.X&&i.context.X.msSetMediaKeys(i.mediaKeys)}catch(t){e=Promise.reject({$:!1,code:b.ag.fK,message:"set MSMediaKeys failed",ub:g().wd(t)});break t}e=Promise.resolve({$:!0,mediaKeys:i.mediaKeys})}return e})},u.prototype.close=function(){if(this.Ib){this.log.info("Closing the session",{sessionId:this.Ib.sessionId}),this.Ib.removeEventListener("mskeyerror",this.pX);try{this.Ib.close()}catch(t){this.log.error("Failed to close the key sessions",t)}this.Ib=void 0}},u.prototype.Hg=function(u,c,h){var f;return 1<c.length?Promise.reject({code:b.ag.hHa}):0===c.length?Promise.reject({code:b.ag.gHa}):(c=c[0],(f=this).context.qf&&f.log.trace("LICENSE: Setting license"),f.context.UX?Promise.reject({$:!1,code:b.ag.SBa,message:"Promise based EME is currently not supported for Internet Explorer"}):new Promise(function(e,i){var o,s,n,r,a,t;try{s=function(t){f.Ib&&(f.Ib.removeEventListener("mskeymessage",n),f.Ib.removeEventListener("mskeyadded",r),f.Ib.removeEventListener("mskeyerror",a),f.Ib.addEventListener("mskeyerror",f.pX)),t.state=11,t.$?e(t):(f.close(),i(t))},t=function(t){var e=[],i=Array.prototype.map.call(t,function(t){return t?String.fromCharCode(t):""}).join("").match(/<KID>(.+?)<\/KID>/);if(i)e.push(i[1]);else{t=v(t,"KIDS");for(var n=(i=/VALUE="(.+?)">/g).exec(t);null!=n;)e.push(n[1]),n=i.exec(t)}return e},n=function(t){var e,i,n,r,a;o&&clearTimeout(o),i=u,n=f,r=s,a=(e=t).target&&e.target.sessionId,t=m().decode(v(e.message,"PlayReadyKeyMessage","Challenge")),n.state=12,n.log.trace("LICENSE: Received "+e.type+" event",{keySystem:e.target&&e.target.keySystem,sessionId:a}),(n.context.qf||n.context.Yk||n.context.bB)&&n.log.debug("LICENSE: License challenge",m().encode(t)),n.keySessionId=a,e={Uf:i,messageType:"license-request",Eo:/clearkey/i.test(n.keySystem)?"clearkey":"playready",dk:[{data:t,sessionId:a}]},12===n.state&&(n.Nn("lc"),t={data:t,Eo:/clearkey/i.test(n.keySystem)?"clearkey":"playready"},n.context.dI||(n.CX=t)),n.context.Nl.Hg(e).then(function(t){if(12!==n.state||(n.Nn("lr"),n.Hsa(),n.context.dI)){if(n.Ib)return y(n,t.qj[0].data,n.Ib).then(function(){n.state=30,r({$:!0,state:n.state})})}else n.DX=t.qj[0].data,n.state=13,r({$:!0,state:n.state})}).catch(function(t){r(g().LH(t,{state:n.state}))})},r=function(t){(f.context.qf||f.context.Yk)&&f.log.trace("LICENSE: Received "+t.type+" event",{keySystem:t.target.keySystem,sessionId:t.target.sessionId}),s({$:!0})},a=function(t){var e,i;o&&clearTimeout(o),t.target&&t.target.error&&(e=t.target.error.systemCode,i=t.target.error.code),e={code:b.ag.fr,Cc:b.GB.Ss,Kd:e?l.cc.get(d.tx).UG(e,4):i,details:g().wd(t),cause:t.target&&t.target.error,faa:e,f5:i},f.log.error("LICENSE: Received "+t.type+" event",{sessionId:f.Ib&&f.Ib.sessionId,keySystem:t.target.keySystem,systemCode:e.faa,code:e.f5}),f.Nn("le"),f.Mn&&f.Mn(b.ag.fr,e),s({$:!1,code:b.ag.fr,Cc:b.GB.Ss,Kd:e.Kd,message:"Received a key error.",ub:e.details,cause:e.cause})},f.log.trace("LICENSE: Executing prefix based EME"),(f.context.qf||f.context.Yk)&&f.log.debug("LICENSE: PSSH",m().encode(c)),f.yw||(f.yw=t(c)),h?(t=function(t){var e=l.cc.get(p.Mea),i="";return t.forEach(function(t){i+="<KeyID>"+t+"</KeyID>"}),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="true"><KeyIDs>'+i+"</KeyIDs><CustomData></CustomData></LicenseAcquisition></PlayReadyCDMData>",e=new Uint8Array(e.g$a(t)),(this.context.qf||this.context.Yk)&&this.log.trace("LICENSE: proactive license cdm data",{xml:t,b64:m().encode(e)}),e}.call(f,f.yw),f.Ib=f.mediaKeys.createSession("video/mp4",new Uint8Array(0),t)):f.Ib=f.mediaKeys.createSession("video/mp4",c,null),(f.context.qf||f.context.Yk)&&f.log.debug("LICENSE: Created the media keys sessions",{keySystem:f.Ib.keySystem,sessionId:f.Ib.sessionId}),f.Ib.addEventListener("mskeymessage",n),f.Ib.addEventListener("mskeyadded",r),f.Ib.addEventListener("mskeyerror",a),f.context.gMb&&(o=setTimeout(function(){s({$:!1,code:b.ag.GR,Cc:b.GB.vfb})},f.context.gMb))}catch(t){i({code:b.ag.GR,Cc:b.GB.Lj})}}))},u.prototype.rI=function(){var t;return(this.context.qf||this.context.Yk)&&this.log.trace("LICENSE: Renewing license"),t=[new Uint8Array(0)],this.Hg(s.co.Rca.rp,t,!0)},u.prototype.k3=function(t){this.DX||this.log.error("pending license must exist at this point"),this.context.dI=!0;try{t&&(this.context.X=t,this.context.X.msSetMediaKeys(this.mediaKeys))}catch(t){return Promise.reject({$:!1,code:b.ag.fK,message:"setMediaKeys failed",ub:g().wd(t)})}return y(this,this.DX,this.Ib)},u.prototype.MVa=function(n){var t,r=this;return r.log.trace("Releasing the license of current session",JSON.stringify(n)),t={ba:n.ba,we:n.we},new Promise(function(e,i){r.context.Nl.release.call(r.context.Nl,t).then(function(){var t;r.log.trace("successfully released the license",JSON.stringify(n)),t={$:!0},r.close(),(t.$?e:i)(t)}).catch(function(t){r.log.error("Unable to release the license",{sessionId:r.keySessionId,code:t.code,subCode:t.Cc,extCode:t.Kd,edgeCode:t.un,message:t.hk}),r.close(),(t.$?e:i)(t)})})},u.prototype.m7=function(){return this.context.qf||this.context.Yk},e.cfa=u,pt._cad_global.WindowsEmeSession=e.cfa},function(t,e,i){var r,n,a,o,s,u,c,h,f,d,b,m;function l(t,e,i){var n=this;if(this.log=t,this.Nn=e||function(t){this.pd[t]=r.ka.get(u.jd).Yb().da(c.ja),this.log.trace("Milestone: "+t+", "+this.pd[t])}.bind(this),this.context=i,this.CX=this.challenge=this.keySystem=this.keySessionId=this.mediaKeys=void 0,this.pd={},this.sj=void 0,this.url="",this.vqa=this.Iwa=!1,this.pX=function(t){var e=w(t);this.log.error("LICENSE Error: Received event: "+t.type,{sessionId:this.Ib?this.Ib.sessionId:void 0,keySystem:t.target.keySystem,systemCode:e.faa,code:e.f5}),this.Mn&&this.Mn(m.ag.fr,e),this.Ib=void 0}.bind(this),this.Jg=this.CX=void 0,this.lya=new Promise(function(t,e){n.dva=t,n.Fua=e}),this.Mn=function(t,e){n.Fua(t,e),n.context.onerror(t,e)},this.Hsa=function(){n.dva()},!(this instanceof l))throw new TypeError("EmeSession constructor not called correctly.")}function g(){return r.ka.get(s.Bv)}function v(){return r.ka.get(o.Ci)}function p(){return r.ka.get(n.cg)}function y(t){return/com.apple.fps/.test(t)&&!/com.apple.fps.2_0/.test(t)}function w(t){var e,i;return t.target.error&&(e=t.target.error.systemCode,i=t.target.error.code),{code:m.ag.fr,Cc:m.GB.Ss,Kd:e?r.ka.get(a.tx).UG(e,4):i,details:p().wd(t),cause:t.target.error,faa:e,f5:i}}function _(t,e,i,n){var r=t.target.sessionId,a=t.message,o=p().Bt(a,g().decode("certificate"));i.vqa=e===f.co.Rca.eo,i.state=o?2:12,i.log.trace("LICENSE: Received event: "+t.type,{keySystem:t.target.keySystem,sessionId:r}),(i.context.qf||i.context.Yk||i.context.bB)&&i.log.debug("LICENSE: License challenge",v().encode(a)),i.keySessionId=r,t={pj:i.pj,Uf:e,messageType:"license-request",Eo:/clearkey/i.test(i.keySystem)?"clearkey":"fps",dk:[{data:a,sessionId:r}]},12===i.state&&(i.Nn("lc"),a={data:a,Eo:/clearkey/i.test(i.keySystem)?"clearkey":"fps"},i.context.dI||(i.CX=a)),i.context.Nl.Hg(t).then(function(t){if(12!==i.state||(i.Nn("lr"),i.Hsa(),i.context.dI)){if(i.Ib)return t=S(i,o,t.qj[0].data,i.Ib),2===i.state?t:t.then(function(){i.state=30,n({$:!0,state:i.state})})}else i.DX=t.qj[0].data,i.state=13,n({$:!0,state:i.state})}).catch(function(t){n(p().LH(t,{state:i.state}))})}function E(t,e,i){e.log.trace("LICENSE: Received event: "+t.type,{keySystem:t.target.keySystem,sessionId:t.target.sessionId}),i({$:!0})}function k(t,e,i){var n=w(t);e.Mn&&e.Mn(m.ag.fr,n),e.log.error("LICENSE Error: Received event: "+t.type,{sessionId:e.Ib?e.Ib.sessionId:void 0,keySystem:t.target.keySystem,systemCode:n.faa,code:n.f5}),i({$:!1,code:m.ag.fr,Cc:m.GB.Ss,Kd:n.Kd,message:"Received a key error.",ub:n.details,cause:n.cause})}function S(n,t,r,e){return e={sessionId:e.sessionId},n.m7()&&(e.license=v().encode(r)),n.log.trace("calling keysession update",e),new Promise(function(e,i){try{t||n.Ib.addEventListener("webkitkeyadded",function t(){n.Ib.removeEventListener("webkitkeyadded",t),e(void 0)}),n.Ib.update(r),t&&e(void 0)}catch(t){i({$:!1,code:m.ag.R0,message:"Unable to update the EME.",e:t})}})}_esm(e),r=i(8),e=i(3),n=i(29),a=i(77),o=i(36),s=i(78),u=i(18),c=i(4),h=i(11),f=i(62),d=i(165),b=i(63),(m={}).ag=e.M,m.GB=e.L,l.prototype.Wt=function(){return this.keySystem},l.prototype.Yab=function(t,e){t.log&&(this.log=t.log),t.Nn&&(this.Nn=t.Nn),e.Nl&&(this.context.Nl=e.Nl),e.onerror&&(this.context.onerror=e.onerror)},l.prototype.create=function(r){var a=this;return a.Nn("lg"),a.log.trace("CREATE: Creating the media keys",{keySystem:r}),a.keySystem=r,a.context.UX?Promise.reject({$:!1,code:m.ag.GQ,message:"CREATE: Promise based EME is currently not supported for Internet Explorer"}):new Promise(function(e,i){if(y(a.keySystem))try{a.mediaKeys=new pt.WebKitMediaKeys(r),a.context.X&&(a.log.trace("LICENSE: calling setmediakeys on video element"),a.context.X.webkitSetMediaKeys(a.mediaKeys)),e({$:!0,mediaKeys:a.mediaKeys})}catch(t){i({$:!1,code:m.ag.GR,ub:p().wd(t)})}else a.mediaKeys=new pt.WebKitMediaKeys(r),a.context.X?(a.log.trace("LICENSE: calling setmediakeys on video element"),a.context.X.webkitSetMediaKeys(a.mediaKeys)):(t=p().createElement("div","position:relative;width:100%;height:100%;overflow:hidden"),n=t.lastChild,a.Jg=t,a.context.X=h.Be.createElement("VIDEO"),n?a.Jg.insertBefore(a.context.X,n):a.Jg.appendChild(a.context.X),a.sj=new h.$E,a.sj.addEventListener("sourceopen",function(t){(a.context.qf||a.context.Yk||a.context.bB)&&a.log.trace("CREATE: Received event: "+t.type,{readyState:t.target.readyState,duration:t.target.duration});try{a.mediaKeys=new pt.WebKitMediaKeys(r),a.context.X.webkitSetMediaKeys(a.mediaKeys),e({$:!0,mediaKeys:a.mediaKeys})}catch(t){a.log.error("CREATE: Exception on webkitSetMediaKeys",t),i({$:!1,code:m.ag.GR,ub:p().wd(t)})}}),a.url=URL.createObjectURL(a.sj),a.context.X.src=a.url),e({$:!0,mediaKeys:a.mediaKeys});var t,n})},l.prototype.close=function(){this.Ib&&(this.log.info("Closing the session",{sessionId:this.Ib.sessionId}),this.Ib.removeEventListener("webkitkeyerror",this.pX),this.Ib.close(),this.Ib=void 0)},l.prototype.Hg=function(f,l){var p;return 1<l.length?Promise.reject({code:m.ag.hHa}):0===l.length?Promise.reject({code:m.ag.gHa}):(l=l[0],(p=this).context.qf&&p.log.trace("LICENSE: Setting license",{initData:v().encode(l)}),p.context.UX?Promise.reject({$:!1,code:m.ag.SBa,message:"Promise based EME is currently not supported in Safari"}):new Promise(function(e,i){var n,r,a,t,o,s,u;function c(t){p.Ib&&(p.Ib.removeEventListener("webkitkeymessage",n),p.Ib.removeEventListener("webkitkeyadded",r),p.Ib.removeEventListener("webkitkeyerror",a),p.Ib.addEventListener("webkitkeyerror",p.pX)),t.$?e(t):(p.close(),i(t))}function h(t,e,i,n){var r=new Uint8Array("piff"==e?88:72),a=new d.BQ(r);return a.hB(12),a.gB("frma"),a.gB(t),a.hB(20),a.gB("schm"),a.d_(0),a.d_(0),a.gB(e),a.hB(i),"piff"==e?(a.hB(56),a.gB("schi"),a.hB(48),a.gB("uuid"),a.c_([137,116,219,206,123,231,76,81,132,249,113,72,249,136,37,84])):(a.hB(40),a.gB("schi"),a.hB(32),a.gB("tenc")),a.d_(0),a.d_(0),a.hB(264),a.c_(n),r}n=function(t){_(t,f,p,c)},r=function(t){E(t,p,c)},a=function(t){k(t,p,c)},y(p.keySystem)&&(p.pj=(s=(s=l).subarray(14,30),s=String.fromCharCode.apply(null,s),s=(s=v().decode(s)).subarray(4),(u=new Uint8Array(16)).set(s),u),t=p.pj,s=h("avc1","piff",65537,o=t),s=g().decode(v().encode(s)),o=h("avc1",b.wx,65536,o),o=g().decode(v().encode(o)),(u=new Uint8Array(7+s.length+8+o.length+5)).set([91,10,32,32,32,32,34],0),u.set(s,7),u.set([34,44,10,32,32,32,32,34],7+s.length),u.set(o,7+s.length+8),u.set([34,10,32,32,93],7+s.length+8+o.length),t=u,(u=new Uint8Array(13+t.length+2)).set([123,10,32,32,34,115,105,110,102,34,32,58,32]),u.set(t,13),u.set([10,125],13+t.length),l=u),p.log.trace("LICENSE: Executing prefix based EME"),p.context.qf|p.context.Yk&&p.log.debug("LICENSE: PSSH",v().encode(l)),p.Ib=p.mediaKeys.createSession("video/mp4",l,null),(p.context.qf||p.context.Yk)&&p.log.debug("LICENSE: Created the media keys sessions",{keySystem:p.Ib.keySystem,sessionId:p.Ib.sessionId}),p.Ib.addEventListener("webkitkeymessage",n),p.Ib.addEventListener("webkitkeyadded",r),p.Ib.addEventListener("webkitkeyerror",a)}))},l.prototype.rI=function(){var s=this;return s.Iwa?Promise.resolve({$:!0}):new Promise(function(e,i){var n,r,a;function o(t){s.Ib&&(s.Ib.removeEventListener("webkitkeymessage",n),s.Ib.removeEventListener("webkitkeyadded",r),s.Ib.removeEventListener("webkitkeyerror",a)),t.$?e(t):(i(t),s.close())}n=function(t){_(t,f.co.Rca.rp,s,o)},r=function(t){E(t,s,o),e({$:!0})},a=function(t){k(t,s,o)},s.vqa=!1,s.Ib.addEventListener("webkitkeymessage",n),s.Ib.addEventListener("webkitkeyadded",r),s.Ib.addEventListener("webkitkeyerror",a),s.Ib.update(g().decode("renew"))})},l.prototype.k3=function(t){this.DX||this.log.error("pending license must exist at this point"),this.context.dI=!0;try{t&&(this.context.X=t,this.log.trace("calling setmediakeys on video element"),this.context.X.webkitSetMediaKeys(this.mediaKeys))}catch(i){return new Promise(function(t,e){e({$:!1,code:m.ag.fK,message:"setMediaKeys failed",ub:p().wd(i)})})}return S(this,!1,this.DX,this.Ib)},l.prototype.MVa=function(n){var t,r=this;return r.log.trace("Releasing the license of the current session",JSON.stringify(n)),r.Iwa=!0,t={ba:n.ba,we:n.we},new Promise(function(e,i){r.context.Nl.release.call(r.context.Nl,t).then(function(){var t;r.log.trace("successfully released the license",JSON.stringify(n)),(t={$:!0}).$?e(t):(r.close(),i(t))}).catch(function(t){r.log.error("RELEASE: Unable to get the release the license",{sessionId:r.Ib?r.Ib.sessionId:void 0,code:t.code,subCode:t.Cc,extCode:t.Kd,edgeCode:t.un,message:t.hk}),t.$?e(t):(r.close(),i(t))})})},l.prototype.m7=function(){return this.context.qf||this.context.Yk},t.exports=l},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.log=t,this.aH=e,this.FA=i,this.context=n}_esm(e),n=i(3),r=i(8),a=i(29),o=i(78),s=i(36),u=i(63),c.prototype.Hg=function(t){var e=this;return(this.context.qf||this.context.Yk)&&this.log.debug("Requesting a license",t),r.ka.get(a.cg).Bt(r.ka.get(o.Bv).decode("certificate"),t.dk[0].data)?(e.log.trace("Requesting Fairplay cert data."),Promise.resolve({qj:[{sessionId:t.dk[0].sessionId,data:r.ka.get(s.Ci).decode(u.b0)}]})):r.ka.get(a.cg).Bt(r.ka.get(o.Bv).decode("content"),t.dk[0].data)?Promise.resolve({qj:[{sessionId:t.dk[0].sessionId,data:t.pj}]}):(e.log.trace("Requesting license",{drmType:t.Eo}),e.aH(t).catch(function(t){throw e.log.error("Unable to get the Fairplay license",t),{code:n.M.XJ,Cc:t.Cc,Kd:t.Kd,un:t.un,hk:t.message||t.hk,DM:t.data,message:"Unable to send the Fairplay license request. "+(t.message||t.hk),cause:t}}))},c.prototype.release=function(t){var e=this;return this.log.trace("Requesting stop data"),this.FA(t).catch(function(t){throw e.log.error("Unable to release the FairPlay license",{code:t.code,subCode:t.Cc,extCode:t.Kd,edgeCode:t.un,message:t.message||t.hk}),{$:!1,code:n.M.tea,Cc:t.Cc,Kd:t.Kd,un:t.un,hk:t.message||t.hk,message:"Unable to release the FairPlay license. "+(t.message||t.hk),cause:t}})},t.exports=c},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){var n=this;this.is=t,this.Wn=e,this.config=i,this.gx=function(){return{version:n.version,drmData:n.O4.map(function(t){return t.gx()})}},this.Jma=function(t){var e;if(n.is.kn(t)&&(t=function(t){if((t={xid:(t=JSON.parse(t)).xid,movieId:t.movieId,keySessionIds:t.keySessionIds,licenseContextId:t.licenseContextId}).licenseContextId&&t.xid&&t.movieId)return{version:1,drmData:[t]};throw new s.qd(a.M.UJ,a.L.nB)}(t)),1===t.version&&(t=function(t,e){if(t.By(e.drmData))return{version:2,drmData:e.drmData.map(function(e){var t=e.keySessionIds;return new h.W_({keySessionData:(t&&0<t.length?t:[void 0]).map(function(t){return{id:t,licenseContextId:e.licenseContextId,licenseId:void 0}}),xid:e.xid,movieId:e.movieId}).gx()})};throw new s.qd(a.M.UJ,a.L.nB)}(n.is,t)),e={version:2,data:[]},2===t.version){e.version=t.version;try{e.data=t.drmData.map(function(t){return new h.W_(t)})}catch(t){throw new s.qd(a.M.UJ,a.L.nB,void 0,void 0,void 0,"The format of the DRM data is inconsistent with what is expected.",t)}}else{if(!t.version||!n.is.Ii(t.version))throw new s.qd(a.M.UJ,a.L.nB,void 0,void 0,void 0,"The format of the DRM data is inconsistent with what is expected.");if(1!==t.version)throw new s.qd(a.M.UJ,a.L.Lza,void 0,void 0,void 0,"Version number is not supported. Version: "+t.version)}return e},this.xs=new u.Jca(2,this.config.JU,this.is.kn(this.config.JU),this.Wn,this.gx)}_esm(e),e.eAa=void 0,t=i(1),n=i(0),r=i(69),a=i(3),o=i(27),s=i(41),u=i(317),c=i(79),h=i(203),f.prototype.E6a=function(){return this.iZb()},f.prototype.yPa=function(t){return this.xs.add(t)},f.prototype.lY=function(t){return this.xs.remove(t,function(t,e){return t.ba===e.ba})},f.prototype.toString=function(){return JSON.stringify(this.gx(),null,"  ")},f.prototype.iZb=function(){var i=this;return this.I6a||(this.I6a=new Promise(function(t,e){i.xs.load(i.Jma).then(function(){t()}).catch(function(t){t.na&&t.cause?e(new s.qd(a.M.UJ,t.na,void 0,void 0,void 0,"Unable to load persisted playdata.",void 0,t)):e(t)})})),this.I6a},it.Object.defineProperties(f.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return this.xs.version}},O4:{configurable:!0,enumerable:!0,get:function(){return this.xs.cw}}}),i=f,i=t.__decorate([n.R(),t.__param(0,n.l(o.bg)),t.__param(1,n.l(c.jB)),t.__param(2,n.l(r.sv))],i),e.eAa=i},function(t,e,i){var n,r,a,o,s;_esm(e),e.p6a=void 0,n=i(3),r=i(95),a=i(122),o=i(202),e.p6a=function(t){return o.vM.parent=t.$a,function(){return s=s||new Promise(function(t,e){try{t(o.vM.get(a.EBa))}catch(t){e(new r.Ng(n.M.ugb,n.L.Pgb,void 0,"Unable to extract the DRM services from the dependency injector",t))}})}}},function(t,e){function i(){}_esm(e),e.cGa=void 0,i.prototype.DZa=function(){return void 0!==this.mediaKeys},i.prototype.setMediaKeys=function(t){this.mediaKeys=t},i.prototype.vVb=function(){this.DZa()&&(this.mediaKeys=void 0)},e.cGa=i},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r){this.IG=t,this.Uc=e,this.UN=n,this.pk=r,this.log=i.ib("CannedChallengeProviderImpl")}_esm(e),e.gAa=void 0,t=i(1),n=i(0),r=i(122),a=i(36),o=i(7),s=i(138),u=i(70),c=i(137),h=i(602),f.prototype.Tna=function(i){var n=this;return Promise.all([this.IG(),this.MFb()]).then(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,t.cEb({type:i,initData:e},n.UN())}).then(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,e=n.Uc.encode(e.data[0]),n.log.trace("Challenge generated",e),{ac:t,rja:e}})},f.prototype.MFb=function(){var e=this;return this.pk.Vt().then(function(t){switch(t){case c.bo.PG:return h.Jfb;case c.bo.RD:return h.mjb;default:return h.Ckb}}).then(function(t){return t.map(e.Uc.decode)})},i=f,i=t.__decorate([n.R(),t.__param(0,n.l(r.X_)),t.__param(1,n.l(a.Ci)),t.__param(2,n.l(o.qb)),t.__param(3,n.l(s.uR)),t.__param(4,n.l(u.Vs))],i),e.gAa=i},function(t,e){_esm(e),e.Ckb=["AAAANHBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABQIARIQAAAAAAPSZ0kAAAAAAAAAAA=="],e.Jfb=["c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFBcDVKNTB0Qml4WTVMaTNYSGJFc3dKdDdybTdhdEExVWpPMkw3Q1ArckJYTT0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFCczgwL0dQUmxsNXEweHl3bHhac1Nya3hjMndPRHZpWWNCMmJoWDdQOTNHQT0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFDcWNFL25GeU0waXVKY1pKSi9xTkl3T0xJaGFCdnB4WEpDNGtyV2VpaGJBOD0=","c2tkOi8vbmV0ZmxpeC9BQUFBQkFBQUFBQUV3MzFFamVRbC8rZTBLYWpjSEhZQkt1U0hkb21BdXhmSGlWUTNZYTFpRGJqYjF5Zz0="],e.mjb=["AAADPHBzc2gAAAAAmgTweZhAQoarkuZb4IhflQAAAxwcAwAAAQABABIDPABXAFIATQBIAEUAQQBEAEUAUgAgAHgAbQBsAG4AcwA9ACIAaAB0AHQAcAA6AC8ALwBzAGMAaABlAG0AYQBzAC4AbQBpAGMAcgBvAHMAbwBmAHQALgBjAG8AbQAvAEQAUgBNAC8AMgAwADAANwAvADAAMwAvAFAAbABhAHkAUgBlAGEAZAB5AEgAZQBhAGQAZQByACIAIAB2AGUAcgBzAGkAbwBuAD0AIgA0AC4AMgAuADAALgAwACIAPgA8AEQAQQBUAEEAPgA8AFAAUgBPAFQARQBDAFQASQBOAEYATwA+ADwASwBJAEQAUwA+ADwASwBJAEQAIABBAEwARwBJAEQAPQAiAEEARQBTAEMAVABSACIAIABWAEEATABVAEUAPQAiAEEAQQBBAEEAQQBNAFkARQB4AEkARQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAPQA9ACIAPgA8AC8ASwBJAEQAPgA8AC8ASwBJAEQAUwA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEwAQQBfAFUAUgBMAD4AaAB0AHQAcAA6AC8ALwBjAGEAcABwAHIAcwB2AHIAMAA2AC8AcwBpAGwAdgBlAHIAbABpAGcAaAB0ADUALwByAGkAZwBoAHQAcwBtAGEAbgBhAGcAZQByAC4AYQBzAG0AeAA8AC8ATABBAF8AVQBSAEwAPgA8AEwAVQBJAF8AVQBSAEwAPgBoAHQAdABwADoALwAvAGMAYQBwAHAAcgBzAHYAcgAwADYALwBzAGkAbAB2AGUAcgBsAGkAZwBoAHQANQAvAHIAaQBnAGgAdABzAG0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAFUASQBfAFUAUgBMAD4APABEAEUAQwBSAFkAUABUAE8AUgBTAEUAVABVAFAAPgBPAE4ARABFAE0AQQBOAEQAPAAvAEQARQBDAFIAWQBQAFQATwBSAFMARQBUAFUAUAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A"]},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p;_esm(e),e.config=void 0,t=i(0),n=i(13),r=i(604),a=i(37),o=i(40),s=i(605),u=i(319),c=i(607),h=i(167),f=i(608),l=i(69),p=i(609),e.config=new t.rd(function(t){t(n.Zc).wf(function(){return function(){return pt._cad_global.config}}),t(a.Qba).to(r.zAa).aa(),t(a.Wl).to(r.TLa).aa(),t(a.iR).to(r.lEa).aa(),t(o.Tm).to(s.OCa).aa(),t(u.FGa).to(c.EGa).aa(),t(h.ICa).to(f.HCa).aa(),t(l.sv).to(p.cCa).aa()})},function(t,e,i){var n,r,a,o,s;function u(){this.Yy={},this.U7a=0}function c(t,e,i,n,r){this.debug=t,this.Iz=e,this.jX=i,this.Wf=n,this.X9=r}function h(t,e,i){this.Iz=t,this.jX=e,this.X9=i}_esm(e),e.lEa=e.TLa=e.zAa=void 0,t=i(1),n=i(0),r=i(96),a=i(7),o=i(139),s=i(318),i=i(37),h=t.__decorate([n.R(),t.__param(0,n.l(i.iR)),t.__param(1,n.l(o.m1)),t.__param(2,n.l(s.qea))],h),e.zAa=h,c=t.__decorate([n.R(),t.__param(0,n.l(r.pv)),t.__param(1,n.l(i.iR)),t.__param(2,n.l(o.m1)),t.__param(3,n.l(a.qb)),t.__param(4,n.l(s.qea))],c),e.TLa=c,u.prototype.vOb=function(t){this.Yy=Object.assign({},this.Yy,t),this.U7a++},it.Object.defineProperties(u.prototype,{data:{configurable:!0,enumerable:!0,get:function(){return this.Yy}},q$:{configurable:!0,enumerable:!0,get:function(){return this.U7a}}}),i=t.__decorate([n.R()],u),e.lEa=i},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){return(t=o.Ze.call(this,t,void 0===i?"GeneralConfigImpl":i)||this).oj=e,t}_esm(e),e.OCa=e.CM=void 0,t=i(1),n=i(4),r=i(0),a=i(45),o=i(46),s=i(40),u=i(37),i=i(108),c={test:"Test",stg:"Staging",int:"Int",prod:"Prod"},e.CM=function(t,e){return t.F6a(c[e]||e,s.Cx)},T(f,o.Ze),it.Object.defineProperties(f.prototype,{CM:{configurable:!0,enumerable:!0,get:function(){return s.Cx.tjb}},Jwa:{configurable:!0,enumerable:!0,get:function(){return n.vh(8)}},Cz:{configurable:!0,enumerable:!0,get:function(){return""}},SL:{configurable:!0,enumerable:!0,get:function(){return""}},mJ:{configurable:!0,enumerable:!0,get:function(){return""}},D$a:{configurable:!0,enumerable:!0,get:function(){return!1}},l3:{configurable:!0,enumerable:!0,get:function(){return!0}},$V:{configurable:!0,enumerable:!0,get:function(){return this.oj.$V}},pCb:{configurable:!0,enumerable:!0,get:function(){return!1}},he:{configurable:!0,enumerable:!0,get:function(){return{}}},S7a:{configurable:!0,enumerable:!0,get:function(){return!1}},Spa:{configurable:!0,enumerable:!0,get:function(){return 1}},Taa:{configurable:!0,enumerable:!0,get:function(){return!1}},Js:{configurable:!0,enumerable:!0,get:function(){return!1}},SU:{configurable:!0,enumerable:!0,get:function(){return!0}},iE:{configurable:!0,enumerable:!0,get:function(){return{__default_rule_key__:["idb","mem"]}}},nw:{configurable:!0,enumerable:!0,get:function(){return 0<=[s.Cx.fLa,s.Cx.pEa].indexOf(this.CM)}}}),h=f,t.__decorate([a.config(e.CM,"environment")],h.prototype,"CM",null),t.__decorate([a.config(a.$k,"storageTimeout")],h.prototype,"Jwa",null),t.__decorate([a.config(a.string,"groupName")],h.prototype,"Cz",null),t.__decorate([a.config(a.string,"canaryGroupName",!0)],h.prototype,"SL",null),t.__decorate([a.config(a.string,"uiGroupName")],h.prototype,"mJ",null),t.__decorate([a.config(a.dd,"testIndexDBForCorruptedDatabase")],h.prototype,"D$a",null),t.__decorate([a.config(a.dd,"applyIndexedDbOpenWorkaround")],h.prototype,"l3",null),t.__decorate([a.config(a.dd,"ignoreIdbOpenError")],h.prototype,"$V",null),t.__decorate([a.config(a.dd,"executeStorageMigration")],h.prototype,"pCb",null),t.__decorate([a.config(a.object(),"browserInfo")],h.prototype,"he",null),t.__decorate([a.config(a.dd,"retryAllMslRequestsOnError")],h.prototype,"S7a",null),t.__decorate([a.config(a.dd,"isTestAccount")],h.prototype,"Spa",null),t.__decorate([a.config(a.dd,"vuiCommandLogging")],h.prototype,"Taa",null),t.__decorate([a.config(a.dd,"useRangeHeader")],h.prototype,"Js",null),t.__decorate([a.config(a.dd,"enableMilestoneEventList")],h.prototype,"SU",null),t.__decorate([a.config(a.object,"storageRules")],h.prototype,"iE",null),h=t.__decorate([r.R(),t.__param(0,r.l(u.Wl)),t.__param(1,r.l(i.fF)),t.__param(2,r.l(u.F_)),t.__param(2,r.optional())],h),e.OCa=h},function(t,e){function i(t){this.value=t}_esm(e),e.Ada=void 0,i.empty=function(){return i.of(void 0)},i.of=function(t){return new i(t)},i.prototype.or=function(t){return void 0===this.value?t instanceof Function?t():t:this.value},i.prototype.map=function(t){return void 0===this.value?i.empty():i.of(t(this.value))},e.Ada=i},function(t,e,i){var n,r,a,o;function s(t,e){return a.Ze.call(this,t,void 0===e?"NetworkMonitorConfigImpl":e)||this}_esm(e),e.EGa=void 0,t=i(1),n=i(0),r=i(45),a=i(46),i=i(37),T(s,a.Ze),it.Object.defineProperties(s.prototype,{qbb:{configurable:!0,enumerable:!0,get:function(){return!0}}}),o=s,t.__decorate([r.config(r.dd,"useNetworkMonitor")],o.prototype,"qbb",null),o=t.__decorate([n.R(),t.__param(0,n.l(i.Wl)),t.__param(1,n.l(i.F_)),t.__param(1,n.optional())],o),e.EGa=o},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n){return(t=o.Ze.call(this,t,"FtlProbeConfigImpl")||this).Ch=e,t.za=i,t.oj=n,t}_esm(e),e.HCa=void 0,t=i(1),n=i(38),r=i(0),a=i(4),o=i(46),s=i(123),u=i(45),c=i(37),i=i(108),T(f,o.Ze),it.Object.defineProperties(f.prototype,{enabled:{configurable:!0,enumerable:!0,get:function(){return this.oj.C5}},endpoint:{configurable:!0,enumerable:!0,get:function(){return this.Lma+(-1===this.Lma.indexOf("?")?"?":"&")+"monotonic="+this.za.q3a+"&device=web"}},L9a:{configurable:!0,enumerable:!0,get:function(){return a.Gb}},Bma:{configurable:!0,enumerable:!0,get:function(){return""}},Lma:{configurable:!0,enumerable:!0,get:function(){return this.Ch.endpoint+"/ftl/probe"+(this.Bma?"?force="+this.Bma:"")}}}),h=f,t.__decorate([u.config(u.dd,"ftlEnabled")],h.prototype,"enabled",null),t.__decorate([u.config(u.$k,"ftlStartDelay")],h.prototype,"L9a",null),t.__decorate([u.config(u.string,"ftlEndpointForceParam")],h.prototype,"Bma",null),t.__decorate([u.config(u.url,"ftlEndpoint")],h.prototype,"Lma",null),h=t.__decorate([r.R(),t.__param(0,r.l(c.Wl)),t.__param(1,r.l(s.zJ)),t.__param(2,r.l(n.Uh)),t.__param(3,r.l(i.fF))],h),e.HCa=h},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return(t=r.Ze.call(this,t,void 0===i?"EmeConfigImpl":i)||this).he=e,t}_esm(e),e.cCa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(4),s=i(45),i=i(164),T(c,r.Ze),it.Object.defineProperties(c.prototype,{L_a:{configurable:!0,enumerable:!0,get:function(){return!!(this.he.$_a||this.he.iW||this.he.DN)}},rD:{configurable:!0,enumerable:!0,get:function(){return o.vh(5)}},kta:{configurable:!0,enumerable:!0,get:function(){return o.vh(10)}},JU:{configurable:!0,enumerable:!0,get:function(){return"unsentDrmData"}},iV:{configurable:!0,enumerable:!0,get:function(){return!1}},Sw:{configurable:!0,enumerable:!0,get:function(){return!0}},iQa:{configurable:!0,enumerable:!0,get:function(){return o.vh(30)}},jQa:{configurable:!0,enumerable:!0,get:function(){return o.vh(30)}},mQa:{configurable:!0,enumerable:!0,get:function(){return o.vh(30)}},kQa:{configurable:!0,enumerable:!0,get:function(){return o.vh(30)}},nQa:{configurable:!0,enumerable:!0,get:function(){return o.vh(30)}},Ova:{configurable:!0,enumerable:!0,get:function(){return""}},I4a:{configurable:!0,enumerable:!0,get:function(){return!this.he.xw}},J4a:{configurable:!0,enumerable:!0,get:function(){return!1}}}),u=c,t.__decorate([s.config(s.dd,"initializeKeySystemAtStartup")],u.prototype,"L_a",null),t.__decorate([s.config(s.$k,"licenseRenewalRequestDelay")],u.prototype,"rD",null),t.__decorate([s.config(s.$k,"persistedReleaseDelay")],u.prototype,"kta",null),t.__decorate([s.config(s.string,"drmPersistKey")],u.prototype,"JU",null),t.__decorate([s.config(s.dd,"forceLimitedDurationLicense")],u.prototype,"iV",null),t.__decorate([s.config(s.dd,"prepareCadmium")],u.prototype,"Sw",null),t.__decorate([s.config(s.$k,"apiCloseTimeout")],u.prototype,"iQa",null),t.__decorate([s.config(s.$k,"apiCreateMediaKeysTimeout")],u.prototype,"jQa",null),t.__decorate([s.config(s.$k,"apiSetServerCertificateTimeout")],u.prototype,"mQa",null),t.__decorate([s.config(s.$k,"apiGenerateRequestTimeout")],u.prototype,"kQa",null),t.__decorate([s.config(s.$k,"apiUpdateTimeout")],u.prototype,"nQa",null),t.__decorate([s.config(s.string,"serverCertificate")],u.prototype,"Ova",null),t.__decorate([s.config(s.dd,"outputRestrictedIsFatal")],u.prototype,"I4a",null),t.__decorate([s.config(s.dd,"outputRestrictedIsFatalForUhd")],u.prototype,"J4a",null),u=t.__decorate([n.R(),t.__param(0,n.l(a.Wl)),t.__param(1,n.l(i.mB)),t.__param(2,n.l(a.F_)),t.__param(2,n.optional())],u),e.cCa=u},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.YUa=void 0,t=i(0),n=i(122),r=i(611),a=i(70),o=i(612),s=i(321),u=i(620),e.YUa=new t.rd(function(t){t(n.EBa).to(r.DBa).aa(),t(a.Vs).to(o.bGa).aa(),t(s.eCa).to(u.dCa)})},function(t,e,i){var n,r,a,o,s,f,u,c,h,l,p,d,b,m;function g(t,e,i,n,r,a,o,s,u,c){var h=this;this.Oc=e,this.zA=i,this.config=n,this.Kr=r,this.gBb=a,this.RL=o,this.pk=s,this.UN=u,this.Dm=c,this.LZb=function(e,i){var n;h.Dm.mark(m.Ia.f0,e.Si.ba,"generate-challenge"),n=!1,i.KXb(function(t){n||(n=!0,h.Dm.mark(m.Ia.e0,e.Si.ba,"generate-challenge")),h.aH(e,i,t).then(function(t){i.CPa(t),h.qtb(i)}).catch(function(t){return i.Aqb(t)})})},this.log=t.ib("DrmServices"),this.Kr().hp&&this.RL.E6a().then(function(){h.iVb()}).catch(function(t){h.log.error("Unable to load the persisted DRM data",t)}),this.config.L_a&&this.pk.vw().then(function(t){return h.mTa(u(),t,f.Xh.rp).then(function(t){return t.close()})})}_esm(e),e.DBa=void 0,t=i(1),n=i(0),r=i(7),a=i(48),o=i(320),s=i(71),f=i(57),u=i(69),c=i(204),h=i(203),l=i(321),p=i(13),d=i(70),b=i(138),m=i(62),g.prototype.cEb=function(t,e){return this.zG(e,t.type,t.context).then(function(e){return e.fEb(t.initData).then(function(t){return[e,{Eo:e.Vt(),data:t.dk}]})})},g.prototype.Hg=function(e,t){var i=this;return this.log.info("Requesting challenges",this.fYa(e,e.type)),this.zG(t,e.type,e.context).then(function(t){return i.o3a(e,t),t.gEb(e.initData).then(function(){return t})})},g.prototype.o3a=function(t,e){e.RXb(t.Si),this.LZb(t,e)},g.prototype.release=function(e,i){var n=this;return this.log.info("Releasing server license",this.ZYa(e)),this.ZGb(e).then(function(){var t=Object.assign({active:!1,we:[]},e.Si);return n.RL.lY(t),i.vVb(),e})},g.prototype.fYa=function(t,e){return{movieId:t.Si.J,xid:t.Si.ba,type:f.tqa(e)}},g.prototype.ZYa=function(t){return{movieId:t.Si?t.Si.J:void 0,xid:t.Si?t.Si.ba:void 0,keySessionId:t.vz()}},g.prototype.aH=function(t,e,i){return this.log.info("Sending license request",this.fYa(t,i.Uf)),this.zA.Hg({ba:t.Si.ba,Ti:t.Si.Ti,N4:[t.Si.rm],dk:[{sessionId:e.vz()||"session",data:i.dk}],Uf:i.Uf,Eo:e.Vt(),TRa:i.TRa,MW:t.Si.MW,lk:t.Si.lk})},g.prototype.ZGb=function(t){return this.log.info("Sending release request",this.ZYa(t)),this.zA.release({ba:t.Si.ba,we:t.we})},g.prototype.zG=function(e,i,n){var r=this;return this.pk.vw().then(function(t){return r.mTa(e,t,i,n)})},g.prototype.mTa=function(e,i,n,r){return this.gBb.create().then(function(t){return t.createSession(i,e,n,r).then(function(){return t})})},g.prototype.hVb=function(t){var e=this;return this.zA.release({ba:t.ba,we:t.we}).catch(function(t){e.log.error("Unable to send release data to the server",t)})},g.prototype.iVb=function(){var i=this;this.Oc.zk(this.config.kta,function(){i.log.trace("Removing cached sessions",{"count:":i.RL.O4.length}),i.RL.O4.filter(function(t){return!t.active}).reduce(function(t,e){return t.then(function(){return i.hVb(e)}).then(function(){return i.RL.lY(e)})},Promise.resolve(void 0))})},g.prototype.qtb=function(t){var e;t.vz()&&t.Si&&((e=new h.W_).we=t.we,e.ba=t.Si.ba,e.J=t.Si.J,this.RL.yPa(e))},i=g,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.Qj)),t.__param(2,n.l(o.CBa)),t.__param(3,n.l(u.sv)),t.__param(4,n.l(p.Zc)),t.__param(5,n.l(l.eCa)),t.__param(6,n.l(c.Nba)),t.__param(7,n.l(d.Vs)),t.__param(8,n.l(b.uR)),t.__param(9,n.l(s.xR))],i),e.DBa=i},function(t,e,i){var n,o,r,s,a,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k;function S(t,e,i,n,r,a,o,s,u,c){this.Yr=t,this.pe=e,this.Sh=i,this.kj=n,this.Uc=r,this.is=a,this.aX=o,this.config=s,this.Zp=u,this.Yg=c,this.log=this.Yr.ib("MediaKeySystemAccessServices")}_esm(e),e.bGa=void 0,t=i(1),n=i(0),o=i(3),r=i(7),s=i(95),a=i(137),u=i(613),c=i(614),h=i(615),f=i(206),l=i(29),p=i(77),d=i(36),b=i(27),m=i(39),g=i(616),v=i(618),y=i(78),w=i(13),_=i(109),E=i(69),i=i(66),S.prototype.vw=function(){return this.promise||(this.promise=this.zWb()),this.promise},S.prototype.cyb=function(r){var a=this;return new Promise(function(e,i){var t=_.Hb.ina(r),n=a.JXa(t);t=a.CXa(t),n.PVb(r,t.Nna()).then(function(t){a.log.trace("Created the media keys system access",{keySystem:r,supportedconfig:t.getConfiguration?JSON.stringify(t.getConfiguration()):void 0}),a.keySystem=t.keySystem,e(t)}).catch(function(t){a.log.error("Unable to create the media key system access object",{keySystem:r,error:t.message}),i(new s.Ng(o.M.NBa,o.L.Lj,void 0,"Unable to create media keys system access. "+t.message,t))})})},S.prototype.Vt=function(){var e=this;return this.vw().then(function(t){return e.DXa(t)})},S.prototype.oFb=function(){var e=this,t=this.config().W0a||[this.config().xm];return 1<t.length?this.vw().then(function(t){return e.DXa(t)}).then(function(t){return _.Hb.BXa(t)}):(t=_.Hb.ina(t[0]),Promise.resolve(_.Hb.BXa(t)))},S.prototype.pFb=function(){var e=this;return this.Vt().then(function(t){return e.CXa(t)})},S.prototype.rFb=function(){var e=this;return this.Vt().then(function(t){return e.JXa(t)})},S.prototype.DXa=function(t){return _.Hb.ina(t.keySystem)},S.prototype.CXa=function(t){switch(t){case a.bo.RD:return new u.aCa(this.kj,this.Uc);case a.bo.PG:return new v.fKa(this.kj,this.Uc,this.Sh,this.Yg);default:return new h.rAa(this.kj,this.Zp,this.config)}},S.prototype.JXa=function(t){switch(t){case a.bo.RD:return new c.jJa(this.aX,this.is,this.Uc,this.pe,this.Zp,this.Sh);case a.bo.PG:return new g.CCa(this.aX,this.is,this.Uc,this.pe,this.Zp,this.Sh);default:return new f.Av(this.aX,this.is,this.Uc,this.pe,this.Zp,this.Sh)}},S.prototype.zWb=function(){var e=this,t=(this.config().W0a||[this.config().xm]).map(function(t){return function(){return e.cyb(t)}});return this.AWb(t)},S.prototype.AWb=function(t){return t.reduce(function(t,e){return t.then(function(t){return Promise.resolve(t)}).catch(function(){return e()})},Promise.reject(Error("keySystem missing")))},it.Object.defineProperties(S.prototype,{V0a:{configurable:!0,enumerable:!0,get:function(){return this.keySystem}}}),k=S,k=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(l.cg)),t.__param(2,n.l(y.Bv)),t.__param(3,n.l(p.tx)),t.__param(4,n.l(d.Ci)),t.__param(5,n.l(b.bg)),t.__param(6,n.l(m.eK)),t.__param(7,n.l(w.Zc)),t.__param(8,n.l(E.sv)),t.__param(9,n.l(i.Xs))],k),e.bGa=k},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e){this.kj=t,this.Uc=e}_esm(e),e.aCa=void 0,t=i(1),n=i(0),r=i(3),a=i(77),o=i(36),s=i(205),u=i(95),c=i(64),h=i(41),f=i(63),l.prototype.a4=function(){return!0},l.prototype.yia=function(){return!1},l.prototype.lja=function(){return!1},l.prototype.yV=function(){return f.wx},l.prototype.Yma=function(){return f.Fda},l.prototype.Nna=function(){return[{initDataTypes:[this.yV()],audioCapabilities:[{contentType:s.$J}],videoCapabilities:[{contentType:s.Jx}],sessionTypes:["temporary"]}]},l.prototype.npa=function(){Promise.reject(new h.qd(r.M.ica))},l.prototype.hka=function(t){var e=new Uint8Array(t.message),e=this.Wla(e,"PlayReadyKeyMessage","Challenge");return e=this.Uc.decode(e),{type:t.type,sessionId:t.target.sessionId,HH:[e],messageType:t.messageType}},l.prototype.Vy=function(t){var e,i=new u.Ng(r.M.fr),n=t.code;null!=n&&void 0!==n?(n=parseInt(n,10),i.Cc=1<=n&&n<=9?r.L.Ss+n:r.L.Ss):i.Cc=t instanceof c.hr?r.L.HQ:r.L.Lj;try{e=/\((\d+)\)/.exec(t.message),i.Kd=this.kj.UG(Number(e&&e[1]),4)}catch(t){}return i.AU(t),i},l.prototype.Wla=function(t,e){for(var i,n,r,a=1;a<arguments.length;++a);for(a=1;a<arguments.length;a++);for(a="",n=t.length,i=0;i<n;i++)0<(r=t[i])&&(a+=String.fromCharCode(r));for(n="\\s*(.*)\\s*",i=arguments.length-1;0<i;i--){if(r=arguments[i],a.search(r)<0)return"";n="[\\s\\S]*<"+(r="(?:[^:].*:|)"+r)+"[^>]*>"+n+"</"+r+">[\\s\\S]*"}return(a=a.match(new RegExp(n)))?a[1]:""},l.prototype.YM=function(){},i=l,i=t.__decorate([n.R(),t.__param(0,n.l(a.tx)),t.__param(1,n.l(o.Ci))],i),e.aCa=i},function(t,e,i){var n,r,a,o;function s(){return r.Av.apply(this,arguments)||this}_esm(e),e.jJa=void 0,t=i(1),n=i(0),r=i(206),a=i(95),o=i(3),T(s,r.Av),s.prototype.k4=function(t,e,i,n,r){return this.f7a(i),this.d7a(n),this.b7a(r),this.Wmb=this.rb,this.rb=t.createSession(e),this.GPa(i),this.BPa(n),this.zPa(r),this.generateRequest(this.initDataType,this.initData)},s.prototype.close=function(){var t;function e(t){return t&&t.sessionId?t.close().then(function(){return t=void 0}):Promise.resolve()}return(t=this).Nja=void 0,this.rb?e(this.rb).then(function(){e(t.Wmb)}):Promise.reject(new a.Ng(o.M.MBa,o.L.MJ,void 0,"Unable to close a key session, key session is not valid"))},s.prototype.generateRequest=function(t,e){return this.initDataType=t,this.initData=e,r.Av.prototype.generateRequest.call(this,t,e)},i=t.__decorate([n.R()],s),e.jJa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function p(t,e,i){this.kj=t,this.Zp=e,this.config=i}_esm(e),e.rAa=void 0,t=i(1),n=i(0),r=i(3),a=i(77),o=i(205),s=i(95),u=i(64),c=i(69),h=i(13),f=i(41),l=i(63),p.prototype.a4=function(){return!0},p.prototype.yia=function(){return!0},p.prototype.lja=function(){return!0},p.prototype.yV=function(){return l.wx},p.prototype.Yma=function(){return this.Zp.Ova||l.fMa},p.prototype.Nna=function(){var t=[{contentType:o.Jx,robustness:l.TJ},{contentType:o.Jx,robustness:l.Cea},{contentType:o.Jx,robustness:l.h1}],e=[{contentType:o.Jx,robustness:l.h1}];return[{initDataTypes:[this.yV()],persistentState:"required",videoCapabilities:this.config().xWa?e:t}]},p.prototype.npa=function(){Promise.reject(new f.qd(r.M.ica))},p.prototype.hka=function(t){var e;return{type:t.type,sessionId:null===(e=t.target)||void 0===e?void 0:e.sessionId,HH:[new Uint8Array(t.message)],messageType:t.messageType}},p.prototype.Vy=function(t){var e,i=new s.Ng(r.M.fr),n=null==t?void 0:t.code;null!=n&&void 0!==n?(n=parseInt(n,10),i.Cc=1<=n&&n<=9?r.L.Ss+n:r.L.Ss):i.Cc=t instanceof u.hr?r.L.HQ:r.L.Lj;try{e=t.message.match(/\((\d*)\)/)[1],i.Kd=this.kj.UG(e,4)}catch(t){}return i.AU(t),i},p.prototype.YM=function(){},i=p,i=t.__decorate([n.R(),t.__param(0,n.l(a.tx)),t.__param(1,n.l(c.sv)),t.__param(2,n.l(h.Zc))],i),e.rAa=i},function(t,e,i){var n,s,o,r,a,u,c,h,f,l,p;function d(t,e,i,n,r,a){return(t=s.Av.call(this,t,e,i,n,r,a)||this).Uc=i,t.ce=n,t.Zp=r,t.Sh=a,t.UZa=new o.BCa(t.Uc,t.ce,t.Sh),t}_esm(e),e.CCa=void 0,t=i(1),n=i(0),s=i(206),o=i(617),r=i(39),a=i(27),u=i(36),c=i(29),h=i(69),f=i(78),l=i(322),p=i(323),T(d,s.Av),d.prototype.generateRequest=function(t,e){var i,n=this;try{return i=e.map(function(t){return n.UZa.YFb(t)}),this.A_a=i.map(function(t){return n.Uc.encode(t)}),i=this.UZa.Kvb(i),s.Av.prototype.generateRequest.call(this,t,[i])}catch(t){return Promise.reject(t)}},d.prototype.update=function(t,i,n){var e,r,a,o=this;if(n)try{a=this.Sh.encode(t[0]),e=JSON.parse(a).RESPONSES.map(function(t){var e=p.i1.h$a(t.ID);return{keyID:i===l.qF.IJa?o.A_a[o.A_a.length-1]:n[e],payload:t.PAYLOAD}}),i===l.qF.Request&&(r=e.map(function(t){return t.keyID}),n.forEach(function(t){-1===r.indexOf(t)&&e.push({keyID:t,error:1})})),a=JSON.stringify(e),t=[this.Sh.decode(a)]}catch(t){return Promise.reject(t)}return s.Av.prototype.update.call(this,t,i)},d.prototype.rI=function(){return s.Av.prototype.update.call(this,[this.Sh.decode("renew")],l.qF.Request)},i=d,i=t.__decorate([n.R(),t.__param(0,n.l(r.eK)),t.__param(1,n.l(a.bg)),t.__param(2,n.l(u.Ci)),t.__param(3,n.l(c.cg)),t.__param(4,n.l(h.sv)),t.__param(5,n.l(f.Bv))],i),e.CCa=i},function(t,e){function i(t,e,i){var n=this;this.Uc=t,this.ce=e,this.Sh=i,this.YFb=function(t){var e;return t=t.subarray(14,30),t=String.fromCharCode.apply(null,t),t=(t=n.Uc.decode(t)).subarray(4),(e=new Uint8Array(16)).set(t),e},this.Kfb={wx:1667591779,T3b:1667392371}}_esm(e),e.BCa=void 0,i.prototype.Kvb=function(t){var e=this.Kfb.wx;return t=t.map(function(t){return{gac:"",JLb:t,lia:t,aZb:t,l2b:[1]}}),this.lNb(e,t)},i.prototype.kNb=function(t){var e=new Uint8Array(4);return new DataView(e.buffer).setUint32(0,t),this.Vqa("fpsi",[e])},i.prototype.jNb=function(t,e,i,n){return t=[this.Vqa("fkri",[t])],e.byteLength&&t.push(this.FW("fkai",[e])),i.byteLength&&t.push(this.FW("fkcx",[i])),n.length&&t.push(this.FW("fkvl",[new Uint8Array(new Uint32Array(n).buffer)])),this.FW("fpsk",t)},i.prototype.lNb=function(t,e){var i,n,r=new Uint8Array([148,206,134,251,7,255,79,67,173,184,147,210,250,150,140,162]);for(n in t=[this.kNb(t)],e)i=e[n],t.push(this.jNb(i.JLb,i.lia,i.aZb,i.l2b));return e=this.FW("fpsd",t),n=new Uint8Array(4),new DataView(n.buffer).setUint32(0,e.byteLength),this.Vqa("pssh",[r,n,e])},i.prototype.Vqa=function(t,e){var i,n,r,a=0;for(n in e)a+=e[n].byteLength;for(r in a=new Uint8Array(12+a),n=0,(i=new DataView(a.buffer)).setUint32(n,a.byteLength),n+=4,a.set(this.Sh.decode(t),n),n+=4,i.setUint32(n,0),n+=4,e)t=e[r],a.set(t,n),n+=t.byteLength;return a},i.prototype.FW=function(t,e){var i,n,r=0;for(i in e)r+=e[i].byteLength;for(n in r=new Uint8Array(8+r),i=0,new DataView(r.buffer).setUint32(i,r.byteLength),i+=4,r.set(this.Sh.decode(t),i),i+=4,e)t=e[n],r.set(t,i),i+=t.byteLength;return r},e.BCa=i},function(t,e,i){var n,a,r,o,s,u,c,h,f,l,p,d;function b(t,e,i,n){this.kj=t,this.Uc=e,this.Sh=i,this.Yg=n}_esm(e),e.fKa=void 0,t=i(1),n=i(0),a=i(3),r=i(77),o=i(78),s=i(95),u=i(64),c=i(36),h=i(63),f=i(324),l=i(41),p=i(66),d=i(323),b.prototype.a4=function(){return!1},b.prototype.yia=function(){return!1},b.prototype.lja=function(){return!0},b.prototype.yV=function(){return h.wx},b.prototype.Yma=function(){return h.b0},b.prototype.Nna=function(){return[{initDataTypes:[h.wx],videoCapabilities:[{contentType:"video/mp4; codecs=avc1.42E01E",robustness:""}],audioCapabilities:[{contentType:"audio/mp4; codecs=mp4a.40.2",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"optional",sessionTypes:["temporary"]}]},b.prototype.npa=function(t){t.rI()},b.prototype.hka=function(t){var e,i=[];if(t.messageType===f.fda||t.messageType===f.eda){if(0===(i=t.messageType===f.fda?(e=this.Sh.encode(new Uint8Array(t.message)),e=(i=JSON.parse(e)).map(function(t){return t.keyID}),i.map(function(t){return t.payload})):[this.Uc.encode(new Uint8Array(t.message))]).length||!i.every(function(t){return t&&t.length}))throw new l.qd(a.M.RBa);i=this.T_b(i),i=this.Sh.decode(JSON.stringify(i))}else i=new Uint8Array(t.message);return{type:t.type,sessionId:t.target.sessionId,HH:[i],messageType:t.messageType,yw:e}},b.prototype.Vy=function(t){var e,i,n,r=null===(e=t.target)||void 0===e?void 0:e.error;return r&&(i=r.systemCode,n=r.code),(e=new s.Ng(a.M.fr,t instanceof u.hr?a.L.HQ:a.L.Ss,i?this.kj.UG(i,4):n,"",r)).AU(t),e},b.prototype.T_b=function(t){return t=t.map(function(t,e){return{ID:d.i1.PJb(e),PAYLOAD:t}}),{VERSION:this.Yg.Z3?3:1,CHALLENGES:t}},b.prototype.YM=function(i,t){var e,n=this;if(t&&this.Yg.Z3)try{return e=this.Sh.encode(t[0]),JSON.parse(e).RESPONSES.sort(function(t,e){return t.ID>e.ID?1:-1}).map(function(t){var e=d.i1.h$a(t.ID);return{from:t=n.Uc.decode(t.DHB).subarray(4,12),to:n.Uc.decode(i[e]).subarray(0,8)}})}catch(t){throw new s.Ng(a.M.Rib,void 0,void 0,void 0,t)}},i=b,i=t.__decorate([n.R(),t.__param(0,n.l(r.tx)),t.__param(1,n.l(c.Ci)),t.__param(2,n.l(o.Bv)),t.__param(3,n.l(p.Xs))],i),e.fKa=i},function(t,e){_esm(e),e.V0=void 0,e.V0=function(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})}},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r,a){this.Yr=t,this.Aa=e,this.Uc=i,this.config=n,this.Xo=r,this.pk=a}_esm(e),e.dCa=void 0,t=i(1),n=i(0),r=i(7),a=i(18),o=i(36),s=i(69),u=i(64),c=i(324),i=i(70),f.prototype.create=function(){var n=this;return Promise.all([this.pk.rFb(),this.pk.pFb(),this.pk.Vt()]).then(function(t){var e,i=nt(t);return t=i.next().value,e=i.next().value,i=i.next().value,new c.fCa(n.Yr,n.Aa,n.Uc,n.config,t,e,i,n.Xo)})},h=f,h=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.jd)),t.__param(2,n.l(o.Ci)),t.__param(3,n.l(s.sv)),t.__param(4,n.l(u.Rx)),t.__param(5,n.l(i.Vs))],h),e.dCa=h},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C,L,M;_esm(e),e.s1a=void 0,n=i(622),r=i(647),a=i(656),o=i(659),s=i(665),u=i(986),c=i(1024),h=i(1027),f=i(1039),l=i(1049),p=i(1053),d=i(1055),b=i(1086),m=i(1088),g=i(1092),v=i(1107),y=i(1115),w=i(1121),_=i(1124),E=i(1131),k=i(202),S=i(1139),T=i(1140),A=i(1147),O=i(1160),I=i(1166),x=i(1168),P=i(1175),R=i(1204),N=i(1226),j=i(1230),C=i(1234),L=i(1248),M=i(1251),e.s1a=function(t){t.load(n.Sy,c.bJ,r.I1a,h.sn,a.n3a,o.qa,s.Gbb,u.YZa,f.storage,l.KL,p.ERa,d.b2a,b.DD,m.gk,g.H1a,v.C3a,y.KWa,w.q6a,_.fI,E.UUa,k.eme,S.crypto,T.pe,A.Fd,O.Ka,I.t3a,x.o5a,P.j,R.ySa,N.transports,j.Gl,C.Zg,L.KQa,M.oa)}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C,L,M,D,U,B,F,q,H,K,V,G,J,z,Y,W,X,Q,Z,$,tt,et,it,nt,rt,at,ot,st,ut,ct,ht,ft,lt;_esm(e),e.Sy=void 0,t=i(0),n=i(39),r=i(38),a=i(48),o=i(81),s=i(140),u=i(623),c=i(624),h=i(625),f=i(626),l=i(78),p=i(77),d=i(36),b=i(29),m=i(27),g=i(97),v=i(64),y=i(327),w=i(627),_=i(328),E=i(628),k=i(629),S=i(630),T=i(195),A=i(329),O=i(631),I=i(201),x=i(111),P=i(632),R=i(18),N=i(330),j=i(633),C=i(634),L=i(96),M=i(635),D=i(7),U=i(326),B=i(636),F=i(71),q=i(637),H=i(331),K=i(638),V=i(639),G=i(112),J=i(11),z=i(640),Y=i(333),W=i(334),X=i(641),Q=i(335),Z=i(13),$=i(34),tt=i(141),et=i(336),it=i(164),nt=i(642),rt=i(337),at=i(338),ot=i(208),st=i(643),ut=i(339),ct=i(644),ht=i(209),ft=i(645),lt=i(646),e.Sy=new t.rd(function(t){t(n.KR).nE(function(){return{}}).aa(),t(n.LE).$i(JSON),t(n.iMa).$i(pt),t(s.XKa).$i(Math),t(n.UEa).$i(J.H0),t(n.Rda).$i(J.xv),t(n.NLa).$i(J.xB),t(n.ZAa).$i(Date),t(n.eK).$i(J.kf),t(n.Lhb).$i(J.$E),t(U.vAa).to(B.uAa).aa(),t(R.jd).to(P.Lya).aa(),t(r.Uh).to(f.wAa).aa(),t(a.Qj).to(u.gKa).aa(),t(o.Gx).to(c.eEa).aa(),t(v.Rx).to(S.xJa).aa(),t(s.b1).to(h.EJa).aa(),t(et.mda).to(lt.YFa).aa(),t(L.pv).to(C.eBa).aa(),t(L.cBa).to(M.bBa).aa(),t(l.Bv).to(w.OLa).aa(),t(p.tx).to(_.Fba).aa(),t(d.Ci).to(E.sza).aa(),t(b.cg).to(k.PLa).aa(),t(m.bg).$i(T.KE),t(rt.JQ).to(at.tCa).aa(),t(g.nca).to(A.Gk).Woa(),t(g.U_).to(A.Gk).aa(),t(g.oBa).to(A.Gk).aa(),t(g.qca).to(A.Gk).aa(),t(I.Mea).to(x.FB).aa(),t(N.NAa).to(j.MAa).aa(),t(F.oF).to(q.Rea).aa(),t(F.xR).to(q.Rea).aa(),t("Factory<LoggerFactory>").$$a(D.qb),t(H.cca).to(K.fBa).aa(),t(G.nK).wf(function(e){return function(t){return new V.hLa(e.$a.get(R.jd),e.$a.get(a.Qj),t)}}),t(ut.$Aa).wf(function(e){return function(t){return new ct.aBa(e.$a.get(a.Qj),t)}}),t(z.oea).V_b(Y.nea),t(z.rjb).wf(function(t){var e=t.$a.get(z.oea);return function(){return new e(!1)}}),t(z.sjb).wf(function(t){var e=t.$a.get(z.oea);return function(){return new e(!0)}}),t(W.LLa).wf(function(){return function(t){return new X.MLa(t)}}),t(tt.LR).wf(function(n){return function(t,e,i){return new Q.MIa(n.$a.get(L.pv),n.$a.get(Z.Zc),n.$a.get($.Hk),n.$a.get(et.mda),t,e,i)}}),t(y.TGa).wf(function(){return function(t){return new O.UGa(t)}}),t(it.mB).to(nt.Iza),t(ot.o1).wf(function(i){return function(t,e){return new st.sLa(i.$a.get(a.Qj),t,e)}}),t(ht.mCa).to(ft.lCa).aa()})},function(t,e,i){var n,r,a,o;function s(t){this.LP=t,r.Qo(this,"timers")}function u(t,e){this.LP=t,this.Ytb=e}_esm(e),e.gKa=void 0,t=i(1),n=i(0),r=i(56),a=i(39),o=i(4),u.prototype.cancel=function(){this.Ytb(this.LP)},s.prototype.Ol=function(t){return this.zk(o.Gb,t)},s.prototype.zk=function(t,e){var i=this.LP.setTimeout(e,t.da(o.ja));return new u(this.LP,function(t){t.clearTimeout(i)})},s.prototype.u$=function(t,e){var i=this.LP.setInterval(e,t.da(o.ja));return new u(this.LP,function(t){t.clearInterval(i)})},i=s,i=t.__decorate([n.R(),t.__param(0,n.l(a.iMa))],i),e.gKa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){this.za=t,this.random=e}_esm(e),e.eEa=void 0,t=i(1),r=i(0),a=i(4),o=i(38),i=i(140),u.prototype.Wy=function(){return this.za.ff.da(a.io)*n.Yza+Math.floor(this.random.random()*n.Yza)},(s=n=u).Yza=1e8,s=n=t.__decorate([r.R(),t.__param(0,r.l(o.Uh)),t.__param(1,r.l(i.b1))],s),e.eEa=s},function(t,e,i){var n,r;function a(t){this.l_b=t}_esm(e),e.EJa=void 0,t=i(1),n=i(0),i=i(140),a.prototype.random=function(){return this.l_b.random()},a.prototype.y6a=function(t,e){if("number"!=typeof t)e=t.end,t=t.start;else if(void 0===e)throw Error("max must be provided for randomInteger API");return Math.round(t+this.random()*(e-t))},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.XKa))],r),e.EJa=r},function(t,e,i){var a,o,n,r,s,u,c;function h(t,e,i,n){var r=this;this.config=t,this.Vyb=e,this.Ub=i,this.performance=n,this.aRb=function(t){r.w8a=t.Qa(r.ff)},a.Qo(this,"date"),a.Qo(this,"performance"),this.rrb=void 0!==this.performance&&void 0!==this.performance.timing&&void 0!==this.performance.now,this.w8a=o.Gb,this.Ub.addListener(c.Lca.z8a,this.aRb)}_esm(e),e.wAa=void 0,t=i(1),a=i(56),o=i(4),n=i(0),r=i(39),s=i(326),u=i(97),c=i(15),it.Object.defineProperties(h.prototype,{ff:{configurable:!0,enumerable:!0,get:function(){return this.q3a?o.timestamp(this.performance.timing.navigationStart+this.performance.now()):o.Nc(this.Vyb.now())}},FY:{configurable:!0,enumerable:!0,get:function(){return this.ff.add(this.w8a)}},q3a:{configurable:!0,enumerable:!0,get:function(){return this.config.sbb&&this.rrb}}}),i=h,i=t.__decorate([n.R(),t.__param(0,n.l(s.vAa)),t.__param(1,n.l(r.ZAa)),t.__param(2,n.l(u.qca)),t.__param(3,n.l(r.Rda)),t.__param(3,n.optional())],i),e.wAa=i},function(t,e,i){var n,r;function a(){}_esm(e),e.OLa=void 0,t=i(1),i=i(0),a.prototype.encode=function(t){return n.Cla(t)},a.prototype.decode=function(t){return n.Mka(t)},a.Cla=function(t){if(!t)throw new TypeError("Invalid byte array");for(var e,i=0,n=t.length,r="";i<n;){if(!(0<=(e=t[i++])&&e<=255))throw Error("bad utf8");if(128&e)if(192==(224&e))e=((31&e)<<6)+(63&t[i++]);else{if(224!=(240&e))throw Error("unsupported utf8 character");e=((15&e)<<12)+((63&t[i++])<<6)+(63&t[i++])}r+=String.fromCharCode(e)}return r},a.Mka=function(t){var e,i,n=t.length,r=0,a=0;if(!(0<=n))throw Error("bad string");for(e=n;e--;)(i=t.charCodeAt(e))<128?r++:r=i<2048?r+2:r+3;for(r=new Uint8Array(r),e=0;e<n;e++)(i=t.charCodeAt(e))<128?r[a++]=i:(i<2048?r[a++]=192|i>>>6:(r[a++]=224|i>>>12,r[a++]=128|i>>>6&63),r[a++]=128|63&i);return r},r=n=a,r=n=t.__decorate([i.R()],r),e.OLa=r},function(t,e,i){var n,r,a,s,u,c,h,f;function o(){}_esm(e),e.sza=void 0,t=i(1),i=i(0),r=Array.prototype.slice,a=r.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),r=r.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s={},u={},c={},h={},f=/\s+/g,[a,r].forEach(function(t){for(var e,i=t.length;i--;)e=t[i],s[e]=i<<18,u[e]=i<<12,c[e]=i<<6,h[e]=i}),o.prototype.encode=function(t){return n.Cla(t,a,"=")},o.prototype.decode=function(t){return n.Mka(t)},o.Mka=function(t){var e,i,n=(t=t.replace(f,"")).length;switch("="!==(e=t.charAt(n-1))&&"."!==e||n--,"="!==(e=t.charAt(n-1))&&"."!==e||n--,e=3*(n>>2),i=0,n%4){case 2:i=1;break;case 3:i=2;break;case 1:throw Error("bad base64")}n=new Uint8Array(e+i);for(var r,a=0,o=0;o<e;){if(!(0<=(r=s[t[a++]]+u[t[a++]]+c[t[a++]]+h[t[a++]])&&r<=16777215))throw Error("bad base64");n[o++]=r>>>16,n[o++]=r>>>8&255,n[o++]=255&r}if(0<i&&(r=s[t[a++]]+u[t[a++]],n[o++]=r>>>16,1<i&&(r+=c[t[a++]],n[o++]=r>>>8&255),!(0<=r&&r<=16776960&&0==(r&(1<i?255:65535)))))throw Error("bad base64");return n},o.Cla=function(t,e,i){for(var n,r="",a=0,o=t.length,s=o-2;a<s;){if(!(0<=(n=(t[a++]<<16)+(t[a++]<<8)+t[a++])&&n<=16777215))throw Error("not bytes");r+=e[n>>>18]+e[n>>>12&63]+e[n>>>6&63]+e[63&n]}if(a==s){if(!(0<=(n=(t[a++]<<8)+t[a++])&&n<=65535))throw Error("not bytes");r+=e[n>>>10]+e[n>>>4&63]+e[n<<2&63]+i}else if(a==o-1){if(!(0<=(n=t[a++])&&n<=255))throw Error("not bytes");r+=e[n>>>2]+e[n<<4&63]+i+i}return r},r=n=o,r=n=t.__decorate([i.R()],r),e.sza=r},function(t,e,i){var n,r,a,o;function s(t,e){this.is=t,this.kj=e}_esm(e),e.PLa=void 0,t=i(1),n=i(0),i(3),r=i(27),a=i(77),o=i(11),s.prototype.LH=function(i,t,e){var n,r,a,o=this;return t&&(e?(n=e.ON,r=e.prefix,a=e.pA,this.KC(t,function(t,e){a&&!o.is.Gg(e)||(i[(r||"")+(n?t.toLowerCase():t)]=e)})):this.KC(t,function(t,e){i[t]=e})),i},s.prototype.KC=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(i,t[i])},s.prototype.Bt=function(t,e){if(t.length!=e.length)return!1;for(var i=t.length;i--;)if(t[i]!=e[i])return!1;return!0},s.prototype.SSa=function(t,e){if(t.length!=e.length)return!1;t.sort(),e.sort();for(var i=t.length;i--;)if(t[i]!==e[i])return!1;return!0},s.prototype.wd=function(t){var e,i,n;if(t)return e=t.stack,i=t.number,n=(n=t.message)||""+t,e?0!==(t=""+e).indexOf(n)&&(t=n+"\n"+t):t=n,i&&(t+="\nnumber:"+i),t},s.prototype.getFunctionName=function(t){return(t=/function (.{1,})\(/.exec(t.toString()))&&1<t.length?t[1]:""},s.prototype.$ma=function(t){return this.getFunctionName(t.constructor)},s.prototype.tsa=function(t){var i=this,n="";return this.is.By(t)||this.is.fQa(t)?n=Array.prototype.reduce.call(t,function(t,e){return t+(32<=e&&e<128?String.fromCharCode(e):".")},""):this.is.Ip(t)?n=t:this.KC(t,function(t,e){n+=(n?", ":"")+"{"+t+": "+(i.is.Y2(e)?i.getFunctionName(e)||"function":e)+"}"}),"["+this.$ma(t)+" "+n+"]"},s.prototype.createElement=function(t,e,i,n){var r=o.Be.createElement(t);return e&&(r.style.cssText=e),i&&(r.innerHTML=i),n&&this.KC(n,function(t,e){r.setAttribute(t,e)}),r},s.prototype.VCb=function(e,i){return function(t){return t[e]===i}},s.prototype.zX=function(t){var n={};return(t||"").split("&").forEach(function(t){var e,i;0<=(e=(t=t.trim()).indexOf("="))?(i=decodeURIComponent(t.substr(0,e)).toLowerCase(),n[i]=decodeURIComponent(t.substr(e+1))):n[t.toLowerCase()]=void 0}),n},i=s,i=t.__decorate([n.R(),t.__param(0,n.l(r.bg)),t.__param(1,n.l(a.tx))],i),e.PLa=i},function(t,e,i){var n,r,o;function a(t){this.Oc=t}_esm(e),e.xJa=void 0,t=i(1),n=i(0),r=i(48),o=i(64),a.prototype.Jq=function(t,r){var a=this;return new Promise(function(e,i){var n=a.Oc.zk(t,function(){i(new o.hr(t))});r.then(function(t){e(t),n.cancel()}).catch(function(t){i(t),n.cancel()})})},i=a,i=t.__decorate([n.R(),t.__param(0,n.l(r.Qj))],i),e.xJa=i},function(t,e,i){var n;function r(t){this.mEb=t,this.z6=!1,this.Q6=this.$f=this.GP=0,this.aW=!1,this.R6=0}_esm(e),e.UGa=void 0,n=i(19),r.prototype.Eqb=function(t){t<this.GP&&(this.$f+=this.GP),this.GP=t,this.z6=!0},r.prototype.ZEb=function(){if(this.z6)return this.aW?this.R6-this.Q6:this.$f+this.GP-this.Q6},r.prototype.refresh=function(){var t=this.mEb();n.Ba(t)&&this.Eqb(t)},r.prototype.cZb=function(){this.aW||(this.z6&&(this.R6=this.$f+this.GP),this.aW=!0)},r.prototype.pZb=function(){this.aW&&(this.z6&&(this.Q6+=this.$f+this.GP-this.R6),this.R6=0,this.aW=!1)},e.UGa=r},function(t,e,i){var n,r,a,o;function s(t,e){this.za=t,this.D5=this.za.ff.da(a.ja)-1,this.ZMb=this.M7=0,this.id=""+e.Wy()}_esm(e),e.Lya=void 0,t=i(1),n=i(0),r=i(38),a=i(4),i=i(81),s.prototype.Yb=function(){var t,e=this.za.ff.da(a.ja)-this.D5;return e<this.M7&&(t=this.M7+1,this.D5-=t-e,e=t),this.M7=e,a.Nc(this.M7)},s.prototype.fGb=function(){return this.ZMb++},it.Object.defineProperties(s.prototype,{Vz:{configurable:!0,enumerable:!0,get:function(){return a.Nc(this.D5)}}}),o=s,o=t.__decorate([n.R(),t.__param(0,n.l(r.Uh)),t.__param(1,n.l(i.Gx))],o),e.Lya=o},function(t,e,i){var n,r,a,o;function s(t,e){this.is=t,this.pe=e}_esm(e),e.MAa=void 0,t=i(1),r=i(0),a=i(27),i=i(29),s.prototype.encode=function(t){var i=this,n="";return this.pe.KC(t,function(t,e){t=i.rVa(t)+"="+i.rVa(e),n=n?n+","+t:t}),n},s.prototype.rVa=function(t){return this.is.EG(t)?this.is.Ii(t)?""+t:this.is.Ip(t)?(t=t.replace(n.Bua,this.bra.bind(this)),!n.tUb.test(t)&&n.nPb.test(t)&&(t='"'+t+'"'),t):this.is.pT(t)?""+t:this.is.wha(t)?"NaN":"":""},s.prototype.bra=function(t){return n.map[t]},(o=n=s).map={'"':'""',"\r":"","\n":" "},o.Bua=/(?!^.+)["\r\n](?=.+$)/g,o.tUb=/["].*["]/g,o.nPb=/[", ]/,o=n=t.__decorate([r.R(),t.__param(0,r.l(a.bg)),t.__param(1,r.l(i.cg))],o),e.MAa=o},function(t,e,i){var n,r,a,o;function s(t,e,i){this.config=t,this.jb=e,this.ta=i.ib("General")}_esm(e),e.eBa=void 0,t=i(1),n=i(0),r=i(27),a=i(96),i=i(7),s.prototype.assert=function(){},s.prototype.Hrb=function(t,e){this.assert(this.jb.EG(t),e)},s.prototype.Irb=function(t,e){this.assert(this.jb.Gg(t),e)},s.prototype.p3=function(t,e){this.assert(this.jb.Ip(t),e)},s.prototype.Orb=function(t,e){this.assert(this.jb.kn(t),e)},s.prototype.Mrb=function(t,e){this.assert(this.jb.Ip(t)||null==t,e)},s.prototype.kia=function(t,e){this.assert(this.jb.Ii(t),e)},s.prototype.Krb=function(t,e){this.assert(this.jb.Yha(t),e)},s.prototype.Nrb=function(t,e){this.assert(this.jb.yT(t),e)},s.prototype.Lrb=function(t,e){this.assert(this.jb.qT(t),e)},s.prototype.Grb=function(t,e){this.assert(this.jb.pT(t),e)},s.prototype.Jrb=function(t,e){this.assert(this.jb.Y2(t),e)},s.prototype.oKb=function(){this.assert(!1,"invalid operation, this method should not be called")},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(a.cBa)),t.__param(1,n.l(r.bg)),t.__param(2,n.l(i.qb))],o),e.eBa=o},function(t,e,i){var n,r,a,o;function s(t){return(t=r.nQ.call(this,t,"DebugConfigImpl")||this).F9b=function(){},t}_esm(e),e.bBa=void 0,t=i(1),n=i(45),r=i(46),a=i(0),i=i(37),T(s,r.nQ),it.Object.defineProperties(s.prototype,{atb:{configurable:!0,enumerable:!0,get:function(){return!1}}}),o=s,t.__decorate([n.config(n.dd,"breakOnError")],o.prototype,"atb",null),o=t.__decorate([a.R(),t.__param(0,a.l(i.Qba))],o),e.bBa=o},function(t,e,i){var n,r,a,o;function s(t){return r.nQ.call(this,t,"ClockConfigImpl")||this}_esm(e),e.uAa=void 0,t=i(1),n=i(45),r=i(46),a=i(0),i=i(37),T(s,r.nQ),it.Object.defineProperties(s.prototype,{sbb:{configurable:!0,enumerable:!0,get:function(){return!1}}}),o=s,t.__decorate([n.config(n.dd,"usePerformanceApi")],o.prototype,"sbb",null),o=t.__decorate([a.R(),t.__param(0,a.l(i.Qba))],o),e.uAa=o},function(t,e,i){var n,r,a,o;function s(t,e){this.Aa=t,this.entries=new Set,this.ta=e.ib("TimingApi")}_esm(e),e.Rea=void 0,t=i(1),n=i(0),r=i(18),a=i(4),i=i(7),s.prototype.mark=function(t,e,i){return t={name:t,Es:this.Aa.Yb()},e&&(t.ba=e),i&&(t.Fg=i),this.entries.add(t),t},s.prototype.tna=function(){var e=[];return this.entries.forEach(function(t){return e.push(t)}),e},s.prototype.lYa=function(e){return this.tna().filter(function(t){return t.ba===e})},s.prototype.iYa=function(){var t={};try{t=this.tna().filter(function(t){return!t.ba}).reduce(function(t,e){return t[e.name]=e.Es.da(a.ja),t},{})}catch(t){this.ta.error(" getMapOfCommonMarks exception",t)}return t},s.prototype.e7a=function(e){var i=this;this.tna().forEach(function(t){t.ba===e&&i.entries.delete(t)})},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(i.qb))],o),e.Rea=o},function(t,e,i){var h,n,r,f,l,p,d,a,o;function s(t,e){this.Aa=t,this.config=e}_esm(e),e.fBa=void 0,t=i(1),n=i(0),r=i(18),f=i(41),l=i(3),p=i(15),d=i(4),a=i(11),i=i(332),s.prototype.oUa=function(e){var t,n,r=this,a=e.mediaTime.value,i=e.zr.value,o=e.yb.value,s=e.state.value,u={segmentId:e.Gna(),mediaTime:a,segmentTime:e.TC(),bufferingState:h.htb[i],presentingState:h.FTb[o],playbackState:h.ESb[s],mseBuffersBusy:this.pHb(e),intBuffersBusy:this.SFb(e),tabVisible:this.m_b(),decodedFrameCount:this.ozb(e),videoElementInDom:this.v2b(e),lastVideoSync:this.Aa.Yb().Qa(d.Nc(e.jZ)).da(d.ja)},c=o===p.cb.Pf?e.bb.Fl?this.config.C4a:this.config.B4a:this.config.k3a;i!==p.yf.re?(i=l.L.heb,this.nRa(u.mseBuffersBusy,u.intBuffersBusy)&&(n=h.pza)):(o!==p.cb.Kc?i=l.L.jeb:(i=l.L.ieb,(o=e.Xf)&&0===o.S5()&&(n=h.Gkb)),(o=e.Xf)&&o.Vb.sourceBuffers.forEach(function(t){var e,i=h.Bd[t.mediaType];u[i+"Ranges"]=t.K5();try{e=t.buffered()}catch(t){e=void 0}e&&0!==e.length?(t=1e3*e.end(0)-a,u[i+"Undecoded"]=t,1<e.length&&(n=h.Ycb),a<1e3*e.start(0)||a>1e3*e.end(0)?n=h.Zcb:t<c.da(d.ja)?n=h.$cb:r.nRa(u.mseBuffersBusy,u.intBuffersBusy)&&(n=h.pza)):(u[i+"Undecoded"]=0,n=h.Xcb)})),o=e.q7a.fZa(),s=a===(null===(t=o.repositionTrace)||void 0===t?void 0:t[0].newMediaTime),u.lastRepositionCausedTimeout=s,u.trackChangeInProgress=null===(s=e.Ka)||void 0===s?void 0:s.iJ,Object.assign(u,o),e="";try{e=JSON.stringify(u)}catch(t){e="Cannot stringify details: "+t}return new f.qd(l.M.dHa,i,n,void 0,void 0,void 0,e,void 0)},s.prototype.pHb=function(t){var e;if(t.Vb)return e={},t.Vb.sourceBuffers.forEach(function(t){e[0===t.type?"audio":"video"]={updating:t.updating()}}),e},s.prototype.SFb=function(t){var e;if(t.Vb)return e={},t.Vb.sourceBuffers.forEach(function(t){e[0===t.type?"audio":"video"]={updating:t.Hh()}}),e},s.prototype.m_b=function(){return!a.Be.hidden},s.prototype.ozb=function(t){return(t=t.Xf)&&(t=t.Vb.X)&&void 0!==t.webkitDecodedFrameCount?t.webkitDecodedFrameCount:NaN},s.prototype.v2b=function(t){return!(!(t=t.Xf)||!(t=t.Vb.X))&&a.Be.body.contains(t)},s.prototype.nRa=function(t,e){var i;return!((null===(i=t.audio)||void 0===i?void 0:i.updating)===(null===(i=e.audio)||void 0===i?void 0:i.updating)&&(null===(t=t.video)||void 0===t?void 0:t.updating)===(null===(e=e.video)||void 0===e?void 0:e.updating))},(o=h=s).Xcb="1",o.Ycb="2",o.Zcb="3",o.pza="4",o.$cb="5",o.Gkb="6",o.Bd=["Audio","Video"],o.htb=["","NORMAL","BUFFERING","STALLED"],o.FTb=["","WAITING","PLAYING ","PAUSED","ENDED"],o.ESb=["STATE_NOTLOADED","STATE_LOADING","STATE_NORMAL","STATE_CLOSING","STATE_CLOSED"],o=h=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(i.sda))],o),e.fBa=o},function(t,e,i){var n,r,a,o;function s(t,e,i){var n=this;this.hg=t,this.Oc=e,this.g4=i,this.nO=function(t){n.Bj=void 0,n.D0b(t||n.g4)},this.Y0a=a.Nc(-this.g4.da(a.ja))}_esm(e),e.hLa=void 0,t=i(1),n=i(0),r=i(18),a=i(4),i=i(48),s.prototype.Ol=function(t){this.vva=t,this.Bj=this.Bj||this.Rf(this.nO)},s.prototype.Fh=function(){this.Bj&&this.Bj.cancel(),this.Bj=void 0},s.prototype.D0b=function(t){var e,i=this.hg.Yb();this.vva&&((e=t.Qa(i.Qa(this.Y0a))).Al(a.Gb)<=0?(t=this.vva,this.vva=void 0,this.Y0a=i,t()):this.Bj=this.Bj||this.Oc.zk(e,this.nO.bind(this,t)))},s.prototype.Rf=function(t){return this.Oc.zk(a.Gb,t)},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(i.Qj))],o),e.hLa=o},function(t,e){_esm(e),e.oea="PrioritizedSetOfListsSymbol",e.rjb="PrioritizedSetOfListsFactorySymbol",e.sjb="PrioritizedSetOfSetsFactorySymbol"},function(t,e){function i(){this.searchParams={}}function n(t){this.xl=t,this.searchParams=new i}_esm(e),e.MLa=void 0,n.prototype.toString=function(){return this.href},it.Object.defineProperties(n.prototype,{href:{configurable:!0,enumerable:!0,get:function(){return""+this.xl+this.searchParams.toString()}}}),e.MLa=n,i.prototype.get=function(t){return this.searchParams[t]},i.prototype.set=function(t,e){this.searchParams[t]=e},i.prototype.toString=function(){return Object.entries(this.searchParams).reduce(function(t,e,i){var n=nt(e);return t+(0==i?"?":"&")+(e=n.next().value)+"="+(n=n.next().value)},"")}},function(t,e,i){var n,r,a,o,s;function u(t,e){this.he=this.zCb(t,e.data.browserInfo)}_esm(e),e.ULa=e.Iza=void 0,t=i(1),n=i(0),r=i(13),a=i(37),i=i(39),u.prototype.r6=function(t,e){var i;if(e=this.NHb(e))switch(t){case s.Tqa:i=0<e.length?Number(e[0]):0;break;case s.m3a:i=1<e.length?Number(e[1]):0;break;case s.j5a:i=2<e.length?Number(e[2]):0;break;case s.q$:i=3<e.length?Number(e[3]):0}return void 0===i||isNaN(i)?0:i},u.prototype.NHb=function(t){return null==t?void 0:t.split(".")},u.prototype.sH=function(t){return this.he.name===t},u.prototype.CN=function(t){return this.he.q9.name===t},u.prototype.MKb=function(t){return this.he.qIb===t},u.prototype.zCb=function(t,e){return Object.assign(Object.assign({qIb:this.BCb(t,e)},this.yCb(t,e)),{q9:this.CCb(t,e)})},u.prototype.BCb=function(t,e){return e&&e.hardware?e.hardware:/Mobile|iPhone/.test(t)?r.s0.phone:/Android/.test(t)?r.s0.n_b:r.s0.yvb},u.prototype.yCb=function(t,e){return e&&e.name&&e.version?{name:e.name,version:e.version}:/OPR/.test(t)?{name:r.Sm.opera,version:""}:/Tesla/.test(t)?{name:r.Sm.C$a,version:""}:(e=t.match(/Edge\/(\d*)\./))?{name:r.Sm.Ir,version:e[1]}:(e=t.match(/Edg\/(\d*)\./))?{name:r.Sm.VUa,version:e[1]}:(e=t.match(/Chrome\/(\d*)\./))?{name:r.Sm.Dja,version:e[1]}:(e=t.match(/Firefox\/(\d*)\./))?{name:r.Sm.pWa,version:e[1]}:(t=t.match(/(\d*)\.(\d*)\.?(\d*)? Safari/))?{name:r.Sm.c8a,version:t[1]}:{name:r.Sm.Dja,version:""}},u.prototype.CCb=function(t,e){return e&&e.os&&e.os.name&&e.os.version?{name:e.os.name,version:e.os.version}:/CrOS/.test(t)?{name:r.qp.dSa,version:""}:(e=t.match(/Mac OS X (\d*)_?(\d*)?_?(\d*)?/))?{name:r.qp.S1a,version:e[1]+"."+e[2]+"."+e[3]}:/Windows NT/.test(t)?{name:r.qp.rya,version:""}:/Android.*Chrome\/[.0-9]* Mobile/.test(t)||/Android.*Chrome\/[.0-9]* /.test(t)?{name:r.qp.i3,version:""}:/Linux/.test(t)?{name:r.qp.lMb,version:""}:/iPhone/.test(t)?{name:r.qp.V_a,version:""}:{name:r.qp.rya,version:""}},it.Object.defineProperties(u.prototype,{$_a:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.Dja)}},yN:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.Ir)}},xw:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.VUa)}},iW:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.pWa)}},u7:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.opera)}},DN:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.c8a)}},y0a:{configurable:!0,enumerable:!0,get:function(){return this.sH(r.Sm.C$a)}},h7:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.i3)}},AN:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.V_a)}},i7:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.i3)&&this.MKb(r.s0.phone)}},xN:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.dSa)}},Cpa:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.S1a)}},A7:{configurable:!0,enumerable:!0,get:function(){return this.CN(r.qp.rya)}},Pp:{configurable:!0,enumerable:!0,get:function(){return this.r6(s.Tqa,this.he.version)}},wRb:{configurable:!0,enumerable:!0,get:function(){return this.r6(s.Tqa,this.he.q9.version)}},xRb:{configurable:!0,enumerable:!0,get:function(){return this.r6(s.m3a,this.he.q9.version)}},yRb:{configurable:!0,enumerable:!0,get:function(){return this.r6(s.j5a,this.he.q9.version)}}}),o=u,o=t.__decorate([n.R(),t.__param(0,n.l(i.NLa)),t.__param(1,n.l(a.iR))],o),e.Iza=o,(e=s=e.ULa||(e.ULa={}))[e.Tqa=0]="major",e[e.m3a=1]="minor",e[e.j5a=2]="patch",e[e.q$=3]="revision"},function(t,e,i){var n,r,a;function o(t,e,i){this.Oc=t,this.O_b=e,this.hH=i}_esm(e),e.sLa=void 0,t=i(1),n=i(48),r=i(0),a=i(4),o.prototype.NG=function(){this.Bj||(this.Bj=this.Oc.zk(a.Nc(this.O_b),this.hH))},o.prototype.Bs=function(){this.Bj&&this.Bj.cancel(),this.Bj=void 0},i=o,i=t.__decorate([r.R(),t.__param(0,r.l(n.Qj))],i),e.sLa=i},function(t,e,i){var n,r;function a(t,e){this.Oc=t,this.g4=e}_esm(e),e.aBa=void 0,t=i(1),n=i(0),i=i(48),a.prototype.Ol=function(t){this.Fh(),this.Bj=this.Oc.zk(this.g4,t)},a.prototype.Fh=function(){this.Bj&&this.Bj.cancel(),this.Bj=void 0},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.Qj))],r),e.aBa=r},function(t,e,i){var n,o;function r(){}_esm(e),e.lCa=void 0,t=i(1),n=i(0),o=i(209),r.prototype.BM=function(r,t){var a=this;r&&Object.entries(t).forEach(function(t){var e,i,n=nt(t);t=n.next().value,n=n.next().value,a.CKb(n)?(n=(e=nt(n)).next().value,i=e.next().value,e=r[n],Array.isArray(e)?(a.Vka(r,t,n),e.forEach(function(t){a.BM(t,i)})):n===o.$m?Object.values(r).forEach(function(t){a.BM(t,i)}):(a.Vka(r,t,n),"object"==typeof e&&a.BM(e,i))):a.Vka(r,t,n)})},r.prototype.CKb=function(t){return Array.isArray(t)},r.prototype.Vka=function(t,e,i){t.hasOwnProperty(e)||e===i||Object.defineProperty(t,e,{get:function(){return t[i]},enumerable:!1})},i=t.__decorate([n.R()],r),e.lCa=i},function(t,e,i){var n,r,a;function o(t){this.config=t}_esm(e),e.YFa=void 0,t=i(1),n=i(13),r=i(12),i=i(0),o.prototype.Vt=function(){return this.BKb()?r.FBa:/widevine/i.test(this.config().xm)?r.gca:/fps/i.test(this.config().xm)?"fairplay":r.Y_},o.prototype.BKb=function(){return/clearkey/i.test(this.config().xm)},a=o,a=t.__decorate([i.R(),t.__param(0,i.l(n.Zc))],a),e.YFa=a},function(t,e,i){var n,r,a,o,s;_esm(e),e.I1a=void 0,n=i(648),r=i(649),t=i(0),a=i(113),o=i(7),s=i(654),e.I1a=new t.rd(function(t){t(o.qb).to(r.lFa).aa(),t(a.ZJ).to(n.mFa).aa(),t(o.Xca).to(s.aFa).aa()})},function(t,e,i){function n(){this.x9a={},this.Un=[]}_esm(e),e.mFa=void 0,t=i(1),i=i(0),n.prototype.e$=function(t,e){e&&(this.x9a[t]=e,this.Un=Object.values(this.x9a))},i=t.__decorate([i.R()],n),e.mFa=i},function(t,e,i){var a,n,o,r,s,u,c;function h(t,e,i){this.Aa=t,this.Un=e,this.Dqa=i}_esm(e),e.lFa=void 0,t=i(1),a=i(210),n=i(0),o=i(651),r=i(18),s=i(113),u=i(7),c=i(652),h.prototype.ib=function(t,e,i,n,r){return i=void 0===i?this.Un:i,e?new o.CIa(this.Aa,this.Dqa,i,e,t):r?new c.Uya(this.Aa,this.Dqa,i,t,n||"",r):new a.YJ(this.Aa,this.Dqa,i,t)},i=h,i=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(s.ZJ)),t.__param(2,n.l(u.Xca))],i),e.lFa=i},function(t,e){_esm(e),e.yRa=void 0,e.yRa=function(t,e){var i;t=t.dGb();for(var n=0;n<e.length;++n)null!=(i=e[n])&&null!=i&&(i.Ri&&(i=i.Ri),i.constructor===Uint8Array?t.Rqb(i):"MediaRequest"===i.constructor.name?t.Cqb(i):"string"==typeof i?t.Pqb(i):"function"==typeof i?t.wqb(i):i instanceof Error?t.tqb(i):i instanceof Object?t.Dqb(i):t.Sqb(i));return t.gi()}},function(t,e,i){var a,n,o;function r(t,e,i,n,r){return(t=o.YJ.call(this,t,e,i,r)||this).j=n,a.Qo(t,"playback"),t}_esm(e),e.CIa=void 0,a=i(56),n=i(340),T(r,(o=i(210)).YJ),r.prototype.oka=function(t){return new r(this.Aa,this.H3,this.Un,this.j,t)},r.prototype.iC=function(t,e,i){for(t=new n.Wca(t,this.Ao,this.Aa.Yb(),e,i,this.j.index),i=(e=nt(this.Un.Un)).next();!i.done;i=e.next())(i=i.value)(t,this.j)},e.CIa=r},function(t,e,i){var o,n;function r(t,e,i,n,r,a){return(t=o.YJ.call(this,t,e,i,n)||this).groups=r,Array.isArray(a)?t.prefix=a:a&&"string"==typeof a&&(t.prefix=[],t.prefix.push(a)),t}_esm(e),e.Uya=void 0,o=i(210),n=i(653),T(r,o.YJ),r.prototype.iC=function(t,e,i){for(t=new n.Tya(t,this.Ao,this.Aa.Yb(),e,i,this.prefix),i=(e=nt(this.Un.Un)).next();!i.done;i=e.next())(i=i.value)(t)},r.prototype.oka=function(t){return new r(this.Aa,this.H3,this.Un,t,this.groups,this.prefix)},e.Uya=r},function(t,e,i){var n,r;function a(t,e,i,n,r,a,o){this.level=t,this.Ao=e,this.timestamp=i,this.message=n,this.ic=r,this.prefix=a,this.index=void 0===o?0:o}_esm(e),e.Tya=void 0,n=i(4),r={0:"F",1:"E",2:"W",3:"I",4:"T",5:"D"},a.prototype.maa=function(t,e){return t=(this.prefix.length?this.prefix.join(" ")+" ":"")+this.message+(e?"":" "+this.IZb(!!t)),(this.timestamp.da(n.ja)/1e3).toFixed(3)+"|"+this.index+"|"+(r[this.level]||this.level)+"|"+this.Ao+"| "+t},a.prototype.IZb=function(t){for(var e,i=this.ic.length,n="",r=0;r<i;++r)if(e=this.ic[r].Pu,r&&n.length&&(n+=" "),"object"==typeof e)if(null===e)n+="null";else if(e instanceof Error)n+=this.HZb(e,t);else try{n+=JSON.stringify(e)}catch(t){n+=this.GZb(e)}else n+=e;return n},a.prototype.HZb=function(t,e){return t.toString()+(t.stack&&!e?"\n"+t.stack:"")+"\n"},a.prototype.GZb=function(t){var i=[];return JSON.stringify(t,function(t,e){if("object"==typeof e&&null!==e){if(-1!==i.indexOf(e))return"<cycle>";i.push(e)}return e})},e.Tya=a},function(t,e,i){var n,r,a,o;function s(t,e){this.Uc=t,this.pe=e}_esm(e),e.aFa=void 0,t=i(1),n=i(0),r=i(655),a=i(36),i=i(29),s.prototype.dGb=function(){return new r.bFa(this.Uc,this.pe)},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(a.Ci)),t.__param(1,n.l(i.cg))],o),e.aFa=o},function(t,e,i){var n,r,a;function o(t,e){this.Uc=t,this.pe=e,this.ic=[]}function s(t){return d.call(this,t,function(t){return{Details:t}})||this}function u(t){return d.call(this,t,function(t){return JSON.parse(t.toJSON())})||this}function c(e,t){return(t=d.call(this,t,function(t){return{Base64:e.encode(t)}})||this).Uc=e,t}function h(t,e){return(e=d.call(this,e,function(t){return t()})||this).pe=t,e}function f(t){return d.call(this,t,function(t){return{Exception:t.message||""+t,StackTrace:t.stack||"nostack"}})||this}function l(t,e,i){return(e=d.call(this,e,i)||this).pe=t,e}function p(t){return d.call(this,t,function(t){return{Details:t}})||this}function d(t,e){this.Pu=t,this.value=e?e(t):t}_esm(e),e.bFa=void 0,t=i(1),n=i(0),r=i(29),i=i(36),d.prototype.WU=function(t){return this.Pu===t},T(p,d),p.prototype.fJ=function(t,e){return e?"":"\r\n"+this.Pu},T(l,d),l.prototype.fJ=function(){var n="";return this.pe.KC(this.value,function(e,i){try{n+=", "+e+": "+i}catch(t){try{n+=", "+e+": "+JSON.stringify(i)}catch(t){n+=", error stringifying "+e}}}),n.replace(/[\r\n]+ */g," ")},T(f,d),f.prototype.fJ=function(t){var e="\r\n"+this.Pu.message;return t||(e+="\r\n"+this.Pu.stack),e},T(h,d),h.prototype.fJ=function(){var i="";return this.pe.KC(this.value,function(t,e){i+=", "+t+": "+e}),i.replace(/[\r\n]+ */g," ")},T(c,d),c.prototype.fJ=function(t,e){return this.Pu&&!e?"\r\n"+this.Uc.encode(this.Pu):""},T(u,d),u.prototype.fJ=function(){return this.Pu?this.Pu.toJSON():""},T(s,d),s.prototype.fJ=function(){return", "+(this.Pu.toString?""+this.Pu.toString():"")},o.prototype.Pqb=function(t){this.ic.push(new p(t))},o.prototype.Dqb=function(t){this.ic.push(new l(this.pe,t))},o.prototype.tqb=function(t){this.ic.push(new f(t))},o.prototype.wqb=function(t){this.ic.push(new h(this.pe,t))},o.prototype.Rqb=function(t){this.ic.push(new c(this.Uc,t))},o.prototype.Cqb=function(t){this.ic.push(new u(t))},o.prototype.Sqb=function(t){this.ic.push(new s(t))},o.prototype.gi=function(){return this.ic},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.Ci)),t.__param(1,n.l(r.cg))],a),e.bFa=a},function(t,e,i){var n,r;_esm(e),e.n3a=void 0,t=i(0),n=i(341),r=i(657),e.n3a=new t.rd(function(t){t(n.uGa).to(r.tGa).aa()})},function(t,e,i){var n,r,a;function o(t){this.Oc=t}_esm(e),e.tGa=void 0,t=i(1),n=i(0),r=i(658),i=i(48),o.prototype.nTa=function(t,e){return new r.vGa(this.Oc,t,e)},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.Qj))],a),e.tGa=a},function(t,e){function i(t,e,i){this.Oc=t,this.config=e,this.getTime=i}_esm(e),e.vGa=void 0,i.prototype.observe=function(t,e){var i=this;this.cancel(),this.Bj=this.Oc.u$(this.config.MYa(),function(){i.getTime()>=t&&(i.cancel(),e())})},i.prototype.cancel=function(){this.Bj&&(this.Bj.cancel(),this.Bj=void 0)},e.vGa=i},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.qa=void 0,t=i(0),n=i(211),r=i(342),a=i(660),o=i(663),s=i(345),u=i(664),e.qa=new t.rd(function(t){t(n.Eea).to(a.pKa).aa(),t(r.nKa).to(o.mKa).aa(),t(s.wLa).to(u.vLa).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b;function m(t,e,i,n,r,a,o,s,u,c){this.Aa=t,this.Wf=e,this.ZN=i,this.iya=n,this.HX=r,this.Oc=a,this.EL=o,this.Lh=s,this.Rla=u,this.ce=c}_esm(e),e.pKa=void 0,t=i(1),n=i(0),r=i(18),a=i(7),o=i(341),s=i(141),u=i(343),c=i(344),h=i(661),f=i(662),l=i(98),p=i(48),d=i(338),i=i(29),m.prototype.gyb=function(t,e,i){return new h.qKa(this.Aa,this.Wf,this.ZN,this.iya,e,t,this.Lh,this.HX,this.ce,this.Rla,i)},m.prototype.Exb=function(t,e){return new f.Hza(this.Wf,t,e,this.ZN,this.Oc,this.EL)},b=m,b=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(a.qb)),t.__param(2,n.l(o.uGa)),t.__param(3,n.l(c.YLa)),t.__param(4,n.l(u.yIa)),t.__param(5,n.l(p.Qj)),t.__param(6,n.l(l.jQ)),t.__param(7,n.l(s.LR)),t.__param(8,n.l(d.JQ)),t.__param(9,n.l(i.cg))],b),e.pKa=b},function(t,e,i){var l,r,p;function n(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.Aa=t,this.ZN=i,this.uta=n,this.config=r,this.fb=a,this.Lh=o,this.HX=s,this.ce=u,this.Ek=h,this.lCb=Object.values(l.Da).map(function(e){return{event:e,hH:function(t){return f.Ub.Fc(e,t)}}}),this.Ub=c.create(),this.VD=[],this.log=e.ib("SegmentManager"),this.tma=!0,this.Jg=this.ce.createElement("div",p.uea)}function a(t,e,i,n,r,a,o,s,u,c,h){var f=this;this.log=t,this.config=e,this.kQb=i,this.uta=n,this.Lh=r,this.HX=a,this.Wu=o,this.O=s,this.Jg=u,this.fb=c,this.Ek=h,this.TL=function(){f.GD&&(f.GD.cancel(),f.GD=void 0)},this.toa=function(t){f.log.trace("Received the transition event",{movieId:t.J}),f.AUb()},this.wqa=function(){},this.log.debug("Constructing session data",d(s)),this.Q_b=new Promise(function(t){f.AUb=t})}function d(t){return{movieId:t.J}}function o(t){return JSON.stringify({movieId:t.J,startPts:t.Z,logicalEnd:t.rj,params:t.Fb?{trackingId:t.Fb.Fj,authParams:t.Fb.w3,sessionParams:t.Fb.Jm,disableTrackStickiness:t.Fb.fla,uiPlayStartTime:t.Fb.HZ,loadImmediately:t.Fb.S7,playbackState:t.Fb.playbackState?{currentTime:t.Fb.playbackState.currentTime,volume:t.Fb.playbackState.volume,muted:t.Fb.playbackState.muted,playbackRate:t.Fb.playbackState.playbackRate}:void 0,pin:t.Fb.v5a,heartbeatCooldown:t.Fb.Eoa,uiLabel:t.Fb.ye,uxLabels:t.Fb.Laa}:void 0})}_esm(e),e.qKa=void 0,l=i(15),r=i(4),p=i(12),a.prototype.load=function(t){var e,i=this;this.log.trace("Loading new segment",d(this.O)),this.V=this.uta.pka(this.config,this.HX,this.Lh,this.O,this.fb,this.Ek),this.V.addEventListener(l.Da.rN,function(t){i.log.trace("Segment is inactive",d(i.O)),i.Wu.close(i.Lh(t.errorCode))}),this.V.addEventListener(l.Da.closed,this.TL),t?(this.log.debug("Pausing background segment",d(this.O)),this.V.addEventListener(l.Da.Opa,this.toa),this.V.pause()):(this.Jg.appendChild(this.V.Dn()),e=function(t){i.toa(t),i.V.removeEventListener(l.Da.loaded,e)},this.V.addEventListener(l.Da.loaded,e))},a.prototype.observe=function(){var t,e,i=this;this.log.trace("Observing segment",o(this.O)),this.GD?this.log.trace("Segment is currently observing",d(this.O)):this.O.Fb&&this.O.Fb.S7?this.wqa(this):(t=this.kQb.nTa(this.config,function(){var t;return i.V&&(t=i.V.Yt())?t:0}),e=this.Btb(this.O),this.log.trace("Adding a moment to watch",{time:e}),t.observe(e,function(){i.log.trace("Segment has reached its loading point",d(i.O)),i.wqa(i),i.TL()}))},a.prototype.close=function(t){return this.log.info("Closing segment",{segment:o(this.O),error:t}),this.V?(this.V.removeEventListener(l.Da.Opa,this.toa),this.V.close(t)):Promise.resolve()},a.prototype.dRb=function(t){this.wqa=t},a.prototype.Btb=function(t){var e,i=t.rj;return t=!!t.Fb&&t.Fb.S7,e=0,i&&!t&&((e=i-this.config.hYa())<this.config.kYa()&&(e=i-(t=i-this.config.kYa())/2)),e},n.prototype.XGb=function(){return!(!this.mh||!this.mh.V)&&this.mh.V.isReady()},n.prototype.Dn=function(){return this.Jg},n.prototype.cH=function(){if(!this.mh||!this.mh.V)throw Error("Player not ready");return this.mh.V},n.prototype.m1b=function(t){var e=this.hma(t);e?this.Zab(e,t):this.fb.ue(t.id)||this.log.error("Tried to update a non-existent segment",{segment:o(t),currentMovieId:this.mh.O.J,queuedMovieIds:this.VD.map(function(t){return t.O.J}),xid:null===(t=this.mh.V)||void 0===t?void 0:t.Az()})},n.prototype.Nk=function(t){var e;return this.log.info("Adding segment",o(t)),this.tma?(this.log.trace("First segment, loading",d(t)),e=this.v1a(t),this.tma=!1):(this.log.trace("Subsequent segment, caching",d(t)),(e=this.hma(t))?this.Zab(e,t):(e=this.createSession(t),this.VD.push(e),this.mh.observe())),e?e.Q_b:null},n.prototype.transition=function(t,e){var i=this.TH,n=null==i?void 0:i.V;return i&&n?(this.TH=void 0,this.log.info("Transitioning segment",o(i.O)),n.gwa(this.Aa.Yb().da(r.ja)),this.pab(i,e)):(e=null==i?void 0:i.O,this.log.error("Transitioning to next segment failed. Session or player not available.",{mid:this.mh.O.J,xid:null===(i=this.mh.V)||void 0===i?void 0:i.Az(),nextSegmentId:t,currentSegment:o(this.mh.O),nextSegment:e?o(e):void 0,queuedMovieIds:this.VD.map(function(t){return t.O.J})}),Promise.reject())},n.prototype.close=function(t){var e=this;return this.log.trace("Closing all segments",{currSession:JSON.stringify(d(this.mh.O)),nextSession:this.TH?JSON.stringify(d(this.TH.O)):void 0}),t=[this.mh.close(t)],this.TH&&t.push(this.TH.close()),Promise.all(t).then(function(){e.TH=void 0,e.VD=[],e.tma=!0})},n.prototype.addListener=function(t,e,i){this.Ub.addListener(t,e,i)},n.prototype.removeListener=function(t,e){this.Ub.removeListener(t,e)},n.prototype.Zab=function(t,e){this.ERb(t.O,e),this.log.trace("Overwrote existing segment data",o(t.O))},n.prototype.v1a=function(t){var e,i=this;if(this.log.info("Loading the next episode",d(t)),e=this.mh?(this.config.Uma()[t.J]=t.Z,this.hma(t)):this.createSession(t))return this.log.trace("Found the next session",d(t)),e.dRb(function(t){i.P$a(t)}),this.mh?(this.log.trace("Subsequent playback, caching player and pausing",d(t)),(this.TH=e).load(!0)):(this.log.trace("First playback transitioning immediately",d(t)),e.load(!1),this.pab(e)),e;this.log.warn("Unable to find the session, make sure to add it before loading",d(t))},n.prototype.pab=function(t,e){var i,n,r,a;return e=void 0===e?{}:e,(r=t.V?null===(i=t.V)||void 0===i?void 0:i.getError():"missing player")?(null!==(n=t.V)&&void 0!==n&&n.close(),this.log.error("Transitioning to next segment failed. Session is in the error state.",{srcmid:this.mh.O.J,mid:t.O.J,error:r,xid:null===(r=t.V)||void 0===r?void 0:r.Az()}),Promise.reject()):(this.log.trace("Playing episode",d(t.O)),i=this.mh,this.mh=t,(t=this.mh.V).Rva(!1),this.uJ(t,i?i.V:void 0),i&&i.V&&(a=i.V.Dn(),n=t.Dn(),a.style.display="none",i=i.close(),this.Jg.appendChild(n),i.then(function(){a.parentElement&&a.parentElement.removeChild(a)}),n.style.display="block",t.Daa(e),t.yP(),t.play()),Promise.resolve())},n.prototype.P$a=function(t){var e,i,n,r,a;this.VD.length&&t.V&&(e=t.V.Yt(),i=this.VD[0],n=this.mh.O.rj,r=!!this.mh.O.Fb&&this.mh.O.Fb.S7,(n||r)&&(r?a=0:n&&(a=n-this.config.hYa()),null!==e&&a<=e&&(this.log.info("Got a time change, loading the next player",d(i.O)),this.v1a(i.O),this.VD.splice(0,1),this.P$a(t))))},n.prototype.hma=function(e){return this.mh.O.J===e.J?this.mh:this.VD.find(function(t){return t.O.J===e.J})},n.prototype.ERb=function(t,e){t.Z=e.Z||t.Z,t.rj=e.rj||t.rj,t.Fb=e.Fb||t.Fb,t.oa=e.oa||t.oa},n.prototype.createSession=function(t){return new a(this.log,this.config,this.ZN,this.uta,this.Lh,this.HX,this,t,this.Jg,this.fb,this.Ek)},n.prototype.uJ=function(e,i){this.lCb.forEach(function(t){i&&i.removeEventListener(t.event,t.hH),e.addEventListener(t.event,t.hH)}),this.Ub.Fc(l.iF.CY)},e.qKa=n},function(t,e,i){var l,r,p,d;function n(t,e,i,n,r,a){var o=this;this.V=e,this.j=i,this.ZN=n,this.Oc=r,this.EL=a,this.TL=function(){o.GD&&(o.GD.cancel(),o.GD=void 0)},this.log=t.ib("SegmentManager",this.j),this.qa=new Map,this.j.bb.Fl&&(this.j.addEventListener(p.ca.DI,function(t){return o.JD(t)}),this.j.addEventListener(p.ca.closed,this.TL))}function a(t,e){this.id=t,this.Cja=e}function o(t,e,i,n){return r.qd.call(this,t,i,void 0,void 0,void 0,e,void 0,n)||this}_esm(e),e.Hza=void 0,l=i(3),r=i(41),p=i(15),d=i(4),T(o,r.qd),o.prototype.toString=function(){return this.code+"-"+this.Cc+" : "+this.message+"\n"+JSON.stringify(this.data)},a.prototype.toJSON=function(){return{id:this.id,contentStartPts:this.Jb,contentEndPts:this.Ob}},it.Object.defineProperties(a.prototype,{Jb:{configurable:!0,enumerable:!0,get:function(){return this.Cja.startTimeMs}},Ob:{configurable:!0,enumerable:!0,get:function(){return this.Cja.endTimeMs}},oA:{configurable:!0,enumerable:!0,get:function(){return Object.keys(this.Cja.next)}}}),n.prototype.JD=function(t){var i=this;t=t.position.segmentId,0===this.qa.size&&Object.entries(this.j.qV()).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i.qa.set(t,new a(t,e))}),this.ha=this.qa.get(t)},n.prototype.play=function(t){return this.Ww&&(this.Ww=void 0),this.TL(),this.log.trace("Playing segment",t),this.l0a(t)?this.ASb(t):this.FX(t)},n.prototype.Yo=function(t){return this.log.trace("Queueing segment",t),this.l0a(t)?this.qUb(t):this.rUb(t)},n.prototype.Ai=function(i,n){var r=this,a=this.j.Ka;return null!=a&&a.$h?(this.log.trace("Updating next segment weights",i,n),new Promise(function(t,e){try{a.QP(i,n),r.j.fireEvent(p.ca.Pxa,{xa:i,y1b:n}),t()}catch(t){e(r.getError(l.M.oza,"updateNextSegmentWeights threw an exception",l.L.Wcb,{segmentId:i,updates:n,error:t}))}})):Promise.reject(this.getError(l.M.oza,"ASE session manager is not yet initialized",l.L.Eba,{segmentId:i,updates:n}))},n.prototype.l0a=function(t){return!!this.ha&&void 0!==this.j.qV()[this.ha.id].next[t]},n.prototype.Jna=function(){var t=this.j.Ka;if(null!=t&&t.$h)return t.Ko().me},n.prototype.QGb=function(){var t=this.j.Ka;if(null!=t&&t.$h)return t.Ko().id},n.prototype.TEb=function(t){var e=this.j.Ka;if(null!=e&&e.$h)return(t=e.M5(t))&&t.Fe},n.prototype.ASb=function(c){var h=this,f=this.j.Ka;return null!=f&&f.$h?this.ha&&1===this.ha.oA.length?this.FX(c):this.j.Xf?void 0===this.TEb(c)?(this.log.error("playNextSegment: branchOffset missing",{segment:c}),this.FX(c)):new Promise(function(t,e){var i,n,r,a,o,s;function u(){!r&&n&&i&&(s.cancel(),r=!0,h.log.trace("Telling ASE to choose the next segment",{id:c,stopped:n,repositioned:i,completed:r}),f.Cr(c,!1,!0)?(t(),r=!0):(r=!0,h.log.error("playNextSegment: ASE chooseNextSegment failed. Falling back to full seek.",{segment:c}),h.FX(c).then(t).catch(e)))}if(r=n=i=!1,a=h.qa.get(c),void 0===(o=h.Jna()))return h.log.debug("playNextSegment: getPresentingBranchPlayerEndPts undefined, fallback to full seek.",{segment:c}),h.FX(c);h.log.trace("Seeking to next segment",JSON.stringify({segmentId:c,seekTo:o,currentSegment:h.ha,nextSegment:a},null,"  ")),h.j.fireEvent(p.ca.V8,{oh:h.ha&&h.ha.id,dO:c}),f.addEventListener("stop",function t(){n=!0,h.log.trace("ASE is stopped",{id:c,stopped:n,repositioned:i,completed:r}),f.removeEventListener("stop",t),u()}),h.j.addEventListener(p.ca.tI,function t(){h.j.removeEventListener(p.ca.tI,t),f.stop()}),h.j.addEventListener(p.ca.wk,function t(){i=!0,h.log.trace("Player is repositioned",{id:c,stopped:n,repositioned:i,completed:r}),h.j.removeEventListener(p.ca.wk,t),u()}),s=h.Oc.zk(d.vh(10),function(){r=!0,s.cancel(),e(h.getError(l.M.mQ,"Timed out waiting for the player to be repositioned and ASE to be stopped",l.L.Scb,{id:c,stopped:n,repositioned:i,completed:r}))}),h.V.seek(o,p.Ce.lK)}):(this.log.warn("MediaPresenter is not initialized",c),Promise.reject(this.getError(l.M.mQ,"MediaPresenter is not initialized",l.L.Tcb,{id:c}))):Promise.reject(this.getError(l.M.mQ,"ASE session manager is not yet initialized",l.L.Eba,{id:c}))},n.prototype.FX=function(t){var e=this.qa.get(t);return e?this.AY(e,l.M.mQ):Promise.reject(this.getError(l.M.mQ,"Unable to find the separated segment",l.L.nza,{id:t}))},n.prototype.qUb=function(t){var e=this.j.Ka;return null!=e&&e.$h?(this.j.fireEvent(p.ca.V8,{oh:this.ha&&this.ha.id,dO:t}),e.Cr(t,!0,!0)?Promise.resolve():(this.log.error("queueNextSegment: ASE chooseNextSegment failed",{segment:t}),Promise.reject(this.getError(l.M.BJ,"ASE chooseNextSegment failed",l.L.Qcb,{id:t})))):Promise.reject(this.getError(l.M.BJ,"ASE session manager is not yet initialized",l.L.Eba,{id:t}))},n.prototype.rUb=function(n){var r,a=this;return this.log.error("calls to queueSeparatedSegment are deprecated",{segment:n,mid:this.j.J,srcsegment:this.QGb()}),this.Ww?Promise.reject(this.getError(l.M.BJ,"Unable to queue a non-next segment because there is currently already a segment queued",l.L.Vcb,{currentSegment:this.ha?this.ha.id:void 0,queuedSegment:this.Ww.id,failedSegment:n})):this.ha?(r=this.qa.get(n))?(this.Ww={id:n,promise:new Promise(function(t,e){var i;a.GD=a.ZN.nTa({MYa:function(){return d.Nc(100)}},function(){return a.V.Yt()||0}),i=a.Jna()-500,a.log.trace("Adding moment for queued segment",{segment:n,pts:i}),a.GD.observe(i,function(){a.log.trace("Moment has arrived",{segment:n,currentSegment:a.ha.id,playerEndPts:a.Jna(),pts:i}),a.Ww=void 0,a.TL(),a.AY(r,l.M.BJ).then(t).catch(e)})})},this.Ww.promise.catch(function(t){a.j.Xd(t.code,t)}),Promise.resolve()):Promise.reject(this.getError(l.M.BJ,"Unable to find the separated segment",l.L.nza,{nextSegmentid:n,currentSegmentId:this.ha.id})):Promise.reject(this.getError(l.M.BJ,"Unable to queue a non-next segment because there is no currently playing segment",l.L.Rcb,{nextSegmentid:n}))},n.prototype.AY=function(n,r){var a=this;return new Promise(function(t,e){var i;try{i=n.Jb,a.V.seek(i,p.Ce.CB),t()}catch(t){e(a.getError(r,"Seek threw an exception",l.L.Ucb,{id:n.id,error:t}))}})},n.prototype.getError=function(t,e,i,n){return this.log.warn(e,n),new o(t,e,i,n)},e.Hza=n},function(t,e,i){var n,r;function a(){}function o(t,e,i,n,r){this.debug=t,this.version=e,this.CLb=i,this.wSb=n,this.config=r}_esm(e),e.mKa=void 0,t=i(1),n=i(0),r=i(4),o.prototype.FFb=function(){return this.config().Cz},o.prototype.Uma=function(){return this.config().jRa},o.prototype.MYa=function(){return r.Nc(this.config().WSb)},o.prototype.hYa=function(){return this.config().MMb},o.prototype.kYa=function(){return this.config().yNb},a.prototype.PC=function(t,e,i,n,r){return new o(t,e,i,n,r)},i=t.__decorate([n.R()],a),e.mKa=i},function(t,e,i){var n,r;function a(t){this.config=t}_esm(e),e.vLa=void 0,t=i(1),n=i(0),i=i(13),a.prototype.YTb=function(t,e,i,n){var r;this.config().lXb&&void 0!==(r=t.metrics)&&r.segment!==r.srcsegment&&e.AW.kb.transition({isBranching:n||void 0,isPlaygraph:!n||void 0,mid:e.J,xid:e.ba,srcxid:i.ba,srcmid:i.J,segment:t.position.segmentId,srcsegment:r.srcsegment,srcsegmentduration:r.srcsegmentduration,srcoffset:r.srcoffset,seamlessRequested:r.seamlessRequested,transitionType:r.transitionType,transitionTypeAtRequest:r.transitionTypeAtRequest,nextExitPositionAtRequest:r.nextExitPositionAtRequest,delayToTransition:r.delayToTransition,durationOfTransition:r.durationOfTransition,atRequest:r.atRequest,atTransition:r.atTransition,discard:r.discard})},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.Zc))],r),e.vLa=r},function(t,e,i){var n,r;_esm(e),e.Gbb=void 0,t=i(0),n=i(344),r=i(666),e.Gbb=new t.rd(function(t){t(n.YLa).to(r.XLa).aa()})},function(t,e,i){var n,r,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P;function a(t){this.cc=t}_esm(e),e.XLa=void 0,t=i(1),n=i(0),r=i(94),o=i(29),s=i(27),u=i(7),c=i(97),h=i(211),f=i(346),l=i(667),p=i(212),d=i(82),b=i(347),m=i(668),g=i(259),v=i(81),y=i(18),w=i(119),_=i(260),E=i(424),k=i(13),S=i(425),T=i(426),A=i(38),O=i(261),I=i(427),x=i(66),P=i(31),a.prototype.pka=function(t,e,i,n,r,a){return this.cc.get(k.Zc)().Haa?new m.ZLa(this.cc.get(u.qb),this.cc.get(g.gea),this.cc.get(v.Gx),this.cc.get(y.jd),this.cc.get(w.RE),this.cc.get(c.nca),this.cc.get(_.kda),this.cc.get(E.dDa),this.cc.get(S.OIa),this.cc.get(T.Jea),this.cc.get(T.Jea),this.cc.get(A.Uh),this.cc.get(I.qR),this.cc.get(O.xca),this.cc.get(P.fh),n,i):new l.qEa(this.cc.get(o.cg),this.cc.get(s.bg),this.cc.get(u.qb),this.cc.get(c.nca),this.cc.get(h.Eea),this.cc.get(p.Qda),this.cc.get(d.mca),this.cc.get(b.EHa),this.cc.get(f.pBa),t,e,i,n,r,a,this.cc.get(x.Xs).KG)},i=a,i=t.__decorate([n.R(),t.__param(0,n.l(r.nEa))],i),e.XLa=i},function(t,e,i){var o,g,n,r,a,s;function u(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b){var m=this;this.pe=t,this.jb=e,this.Ub=n,this.Au=a,this.eU=o,this.NWa=s,this.config=c,this.Lh=f,this.O=l,this.aLb=b,this.j=h.create(l.J,l.vk,u,p,d,l.Fb,l.id,l.oa),this.j.background=!0,this.log=i.ib("VideoPlayer",this.j),this.r5a=[],this.ended=!1,this.uJ(),this.j.state.addListener(function(t){t.newValue===g.Rb.re&&m.Db(g.Da.Opa,{movieId:l.J})}),this.j.bb.Fl&&(this.LL=r.Exb(this,this.j),this.j.addEventListener(g.ca.DI,function(t){t=t.position.segmentId,m.XLb!==t&&(m.XLb=t,m.Db(g.Da.YWb,{segmentId:t}))}))}_esm(e),e.qEa=void 0,o=i(3),g=i(15),n=i(4),r=i(11),a=i(82),s=i(24),u.prototype.isReady=function(){return this.j.state.value===g.Rb.re},u.prototype.vYa=function(){return this.j.J},u.prototype.Az=function(){return this.j.ba},u.prototype.Dn=function(){return this.j.Jg},u.prototype.sq=function(){return this.j.yj.value},u.prototype.lW=function(){return this.j.paused.value},u.prototype.vpa=function(){return this.ended},u.prototype.Hh=function(){var t=this.j.$ia.value;return t?{networkStalled:!!t.As,stalled:!!t.As,progress:t.progress,progressRollback:!!t.dUb}:null},u.prototype.getError=function(){var t=this.j.li;return t?t.xZ():null},u.prototype.Yt=function(){return this.j.mediaTime.value},u.prototype.dXa=function(){var t=(this.N5()||0)+this.j.cXa();return Math.min(t,this.ana())},u.prototype.N5=function(){return this.j.TC()},u.prototype.ana=function(){return this.j.Uy.da(n.ja)},u.prototype.pZa=function(){return this.j.cB?{width:this.j.cB.width,height:this.j.cB.height}:null},u.prototype.O5=function(){var t;if(this.j.ip){for(var e,i=0;i<this.j.ip.length;i++)for(var n=this.j.ip[i],r=0;r<n.streams.length;r++)t=n.streams[r],this.jb.Ii(t.vka)&&this.jb.Ii(t.o4)&&this.jb.Ii(t.n4)&&this.jb.Ii(t.m4)&&0<t.o4&&(t=t.m4/t.n4,e=this.jb.Ii(e)?Math.min(e,t):t);return e}},u.prototype.rXa=function(){return this.j.O5()},u.prototype.MWa=function(t){var e,i;return null!==(e=this.j.oa)&&void 0!==e&&e.lk.zV("generateScreenshots")?this.NWa.gq(this.log,this.j.oa.lk,t):(e=null===(i=this.j.bb)||void 0===i?void 0:i.Vo)?this.NWa.og(this.log,Object.assign({packageId:e},t)):Promise.reject("Unknown packageId")},u.prototype.xXa=function(){return this.gFb(this.j.E4)},u.prototype.VWa=function(){var e=this;return this.j.Ki.map(function(t){return e.mq(t)})},u.prototype.oYa=function(){var t;return this.AV(this.j.Ki,null===(t=this.j.oa)||void 0===t?void 0:t.$b.B2a)},u.prototype.doa=function(t){var e=this;return this.HV(t).map(function(t){return e.mq(t)})},u.prototype.una=function(t){return this.AV(this.HV(t),null===(t=this.j.oa)||void 0===t?void 0:t.$b.C2a)},u.prototype.r9a=function(){return this.aLb},u.prototype.Dpa=function(){return this.j.muted.value},u.prototype.qZa=function(){return this.j.volume.value},u.prototype.UWa=function(){var t=(null===(t=this.Qw)||void 0===t?void 0:t.oc)||this.j.oc.value;return t&&this.mq(t)},u.prototype.coa=function(){var t=(null===(t=this.Qw)||void 0===t?void 0:t.pZ)||this.j.jc.value;return t&&this.mq(t)},u.prototype.X_a=function(){return!!this.j.background},u.prototype.U8a=function(t){this.j.muted.set(!!t)},u.prototype.e9a=function(t){this.j.volume.set(this.bQb(t))},u.prototype.V8a=function(t){this.j.playbackRate.set(t)},u.prototype.Jo=function(){return this.j.playbackRate.value},u.prototype.G8a=function(t){var e,i,n,r=this,a=this.cV(t);return a?a.oi?(this.j.oc.set(a),Promise.resolve()):(i=(t=(null===(e=this.Qw)||void 0===e?void 0:e.pZ)||this.j.jc.value)&&this.z0a(a,t)?t:a.Qh[0],e=a.trackId,n=i.trackId,this.Qw={oc:a,pZ:i},this.Db(g.Da.gm),this.Db(g.Da.ev),i!==t&&this.Db(g.Da.Rl),this.j.c_a(e,n).then(function(t){t=t.oc,r.Qw=void 0,r.j.oc.set(t)}).catch(function(t){r.Qw=void 0,t=r.pe.wd(t),r.log.error(t),r.close(r.Lh(o.M.sR,{na:o.L.cda,ub:t,kH:{nJb:a.trackId,d_a:a.Wd,oJb:i.trackId,e_a:i.Wd}}))})):(this.log.error("Invalid setAudioTrack call"),Promise.reject(Error("Invalid setAudioTrack call")))},u.prototype.cwa=function(t){var e,i,n=this,r=(null===(e=this.Qw)||void 0===e?void 0:e.oc)||this.j.oc.value;if(null!==r){i=r.Qh,e={};for(var a=0;a<i.length;e={Ns:e.Ns},a++){if(e.Ns=i[a],!t&&null===e.Ns)return this.j.jc.set(null),Promise.resolve();if(this.mq(e.Ns)===t)return e.Ns.oi?(this.log.info("Setting Timed Text, profile: "+e.Ns.profile),this.j.jc.set(e.Ns),Promise.resolve()):(t=r.trackId,i=e.Ns.trackId,this.Qw={oc:r,pZ:e.Ns},this.Db(g.Da.Rl),this.j.c_a(t,i).then(function(t){t=t.pZ,n.Qw=void 0,n.j.jc.set(t)}).catch(function(e){return function(t){n.Qw=void 0,t=n.pe.wd(t),n.log.error(t),n.close(n.Lh(o.M.sR,{na:o.L.cda,ub:t,kH:{nJb:r.trackId,d_a:r.Wd,oJb:e.Ns.trackId,e_a:e.Ns.Wd}}))}}(e)))}}return this.log.error("Invalid setTextTrack call"),Promise.reject(Error("Invalid setTextTrack call"))},u.prototype.Rva=function(t){this.j.background=t},u.prototype.yP=function(){this.j.yP()},u.prototype.Daa=function(t){this.j.Daa(t)},u.prototype.um=function(t){return this.j.um(t)},u.prototype.JYa=function(){return this.j.bb},u.prototype.Nw=function(){this.j.Nw()},u.prototype.WH=function(t){this.j.WH(t)},u.prototype.NV=function(t,e,i){return this.j.NV(t,e,i)},u.prototype.Mha=function(t,e){this.j.addEventListener(t,e,void 0)},u.prototype.addEventListener=function(t,e,i){this.Ub.addListener(t,e,i)},u.prototype.removeEventListener=function(t,e){this.Ub.removeListener(t,e)},u.prototype.iI=function(){},u.prototype.load=function(){var i=this;this.loaded||(this.loaded=!0,this.j.load(function(t,e){try{i.Db(g.Da.x1a,void 0,!0),t.oa&&(t.oa.$b.Tbb&&i.Db(g.Da.K2b,t.oa.$b.Tbb,!0),t.oa.$b.Bo&&i.Db(g.Da.XWb,{segmentMap:t.oa.$b.Bo},!0)),e({$:!0})}catch(t){e({na:o.L.Lj,ub:i.pe.wd(t)})}}))},u.prototype.close=function(e){var i=this;return this.qSa||(this.qSa=new Promise(function(t){e?i.j.qG(e,t):i.j.close(t)})),this.qSa},u.prototype.play=function(){this.j.ei?this.j.fireEvent(g.ca.e8a):(this.load(),this.j.paused.value&&(this.j.paused.set(!1),this.j.fireEvent(g.ca.ybb)))},u.prototype.pause=function(){this.load(),this.j.paused.value||(this.j.paused.set(!0),this.j.fireEvent(g.ca.Z1b))},u.prototype.seek=function(t,e,i,n){e=void 0===e?g.Ce.CB:e,this.j.Xf?this.j.Xf.seek(t,e,i,n):this.j.aw=t},u.prototype.D5a=function(t){return this.LL?(this.log.trace("Playing a segment",t),this.LL.play(t)):Promise.resolve()},u.prototype.w6a=function(t){return this.LL?(this.log.trace("Queueing a segment",t),this.LL.Yo(t)):Promise.resolve()},u.prototype.Ai=function(t,e){return this.LL?(this.log.trace("Updating next segment weights",t,e),this.LL.Ai(t,e)):Promise.resolve()},u.prototype.LV=function(){var t=this.j.Qq.LV();return{bounds:t.RT,margins:t.Zr,size:t.size,visibility:t.visibility}},u.prototype.oP=function(t){var e=t.bounds,i=t.margins,n=t.size;t=t.visibility,this.j.sZ&&(e&&this.j.sZ.dwa(e),i&&this.j.sZ.ewa(i),"boolean"==typeof t&&this.j.sZ.fwa(t)),this.j.Qq&&n&&this.j.Qq.bYb(n)},u.prototype.gwa=function(t){this.j.Nm=t},u.prototype.mZa=function(t){return this.j.WA&&this.j.WA.DFb(t)||null},u.prototype.RWa=function(){return this.pe.LH({playerver:this.config.version,jssid:this.config.CLb,groupName:this.config.FFb(),xid:this.j.ba,pbi:this.j.index},this.config.wSb,{prefix:"pi_"})},u.prototype.z_a=function(t){this.j.Xd(o.M.$Ba,o.L.Vl,t)},u.prototype.t1a=function(t,e,i,n){if(!this.jb.gQa(t))throw Error("invalid url");this.r5a.push({url:t,name:e,qsb:i,options:n}),this.k6a()},u.prototype.Una=function(){var t,e,i={},n=this.j.YY;try{this.j.li&&(i.errorCode=this.j.li.I4,i.errorType=n?"endplay":"startplay"),i.playdelay=s.Sf(this.j.XT()),i.xid=this.j.ba,this.j.oa&&this.jb.Ip(this.j.oa.$b.Vo)&&(i.packageId=Number(this.j.oa.$b.Vo)),i.auth=this.j.wEb(),n&&(i.totaltime=this.j.Ll?this.Go(this.j.Ll.jN()):0,i.abrdel=this.j.Ll?this.j.Ll.Tma():0,t=(e=this.j.Xf)?e.XG():null,this.jb.Ii(t)&&(i.totdfr=t),t=e?e.sV():null,this.jb.Ii(t)&&(i.totcfr=t),(e=e?e.TFb():null)&&(i.rbfrs_decoder=e.t4,i.rbfrs_network=e.Q8),i.rbfrs_delay=this.j.Ll?this.j.Ll.qpa:0,i.init_vbr=this.j.d7,e=this.dH(),this.jb.EG(e)&&(i.pdltime=e),(e=(e=this.j.oe.value)&&e.stream)&&(i.vbr=e.bitrate,i.vdlid=e.Bc),i.bufferedTime=this.j.cXa())}catch(t){this.log.error("error capturing session summary",t)}return i},u.prototype.AM=function(t){return this.j.bb.Jm&&(this.j.bb.Jm.userEngageAction=1),this.jb.Ii(this.j.mediaTime.value)?(t=Object.assign(Object.assign({},this.Au.create(this.j)),{action:t}),this.eU(a.mp.AM).gq(this.log,this.j.oa.lk,t).then(function(){return{success:!0}}).catch(function(t){return{success:!1,errorCode:t.code,errorSubCode:t.Cc,errorExternalCode:t.Kd,errorData:t.data,errorDetails:t.details}})):Promise.resolve({success:!1})},u.prototype.gFb=function(t){return{register:t.register.bind(t),notifyUpdated:t.a4a.bind(t),getModel:t.mGb.bind(t),getGroups:t.xV.bind(t),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t),getTime:t.getTime.bind(t)}},u.prototype.mq=function(t){var e=t.dua=t.dua||{trackId:t.trackId,bcp47:t.Wd,displayName:t.displayName,trackType:t.ml,rawTrackType:t.oI,channels:t.channels};return this.Jpa(t)&&(e.isNative=t.isNative,e.surroundFormatLabel=t.hZ),this.Kpa(t)&&(e.isNoneTrack=t.Vr(),e.isForcedNarrative=t.rq(),e.isImageBased=t.kk),e.subType=t.XI,e.variant=t.variant,e},u.prototype.Jpa=function(t){return void 0!==t.isNative},u.prototype.Kpa=function(t){return void 0!==t.Vr&&void 0!==t.rq},u.prototype.cV=function(e){var i=this;return e&&this.j.Ki.find(function(t){return i.mq(t)===e})},u.prototype.HV=function(t){var e;return null!==(t=null==(t=this.cV(t)||(null===(e=this.Qw)||void 0===e?void 0:e.oc)||this.j.oc.value)?void 0:t.Qh)&&void 0!==t?t:[]},u.prototype.AV=function(t,e){var i=t.length-1;return"number"!=typeof e||-1===(t=t.findIndex(function(t){return t.uc>e}))?i:t-1},u.prototype.z0a=function(t,e){return 0<=t.Qh.indexOf(e)},u.prototype.bQb=function(t){return 0<=t?t<=1?t:1:0},u.prototype.Go=function(t){return this.jb.Ii(t)?(t/1e3).toFixed(0):""},u.prototype.Db=function(t,e,i){((e=e||{}).target=this).Ub.Fc(t,e,!i)},u.prototype.uJ=function(){var i=this;this.j.addEventListener(g.ca.fxa,function(){i.Db(g.Da.Wp)}),this.j.addEventListener(g.ca.Hab,function(){i.Db(g.Da.Gab)}),this.j.addEventListener(g.ca.n8,function(){i.Db(g.Da.Uia)}),this.j.addEventListener(g.ca.wk,function(){i.Db(g.Da.Uia)}),this.j.addEventListener(g.ca.rN,function(t){i.Db(g.Da.rN,{errorCode:t})}),this.j.addEventListener(g.ca.zia,function(t){i.Db(g.Da.WQa,t.j)}),this.j.addEventListener(g.ca.ei,function(t){i.Db(g.Da.x3,t)}),this.j.addEventListener(g.ca.lab,function(){i.Db(g.Da.u3),i.Db(g.Da.ev)}),this.j.yj.addListener(function(){i.Db(g.Da.Bta)}),this.j.paused.addListener(function(){i.Db(g.Da.l5a)}),this.j.muted.addListener(function(){i.Db(g.Da.x3a)}),this.j.volume.addListener(function(){i.Db(g.Da.Mbb)}),this.j.yb.addListener(function(){i.Qab()}),this.j.state.addListener(function(){i.Qab()}),this.j.$ia.addListener(function(t){i.NMb||i.j.state.value!=g.Rb.re||t.newValue||(i.NMb=!0,i.Db(g.Da.loaded),setTimeout(function(){i.log.debug.bind(i.log,"summary ",i.Una())})),i.Db(g.Da.OL)}),this.j.oc.addListener(function(){i.Db(g.Da.gm),i.Db(g.Da.ev),setTimeout(function(){var t=i.j.oc.value,e=i.j.jc.value;null===t||null===e||i.z0a(t,e)||(i.log.info("Changing timed text track to match audio track"),i.j.jc.set(t.Qh[0]))},0)}),this.j.jc.addListener(function(t){t.oldValue&&t.newValue&&t.oldValue.trackId==t.newValue.trackId||i.Db(g.Da.Rl)}),this.j.addEventListener(g.ca.ev,function(){i.Db(g.Da.ev)}),this.j.addEventListener(g.ca.DZ,function(){i.Db(g.Da.DZ)}),this.j.state.addListener(function(t){switch(t.newValue){case g.Rb.re:i.Db(g.Da.SUa),i.Db(g.Da.Hbb),i.Db(g.Da.u3),i.Db(g.Da.ev),i.Db(g.Da.w1a),i.k6a(),i.Q2b();break;case g.Rb.CLOSING:i.j.li&&i.Db(g.Da.T_a,i.j.li);break;case g.Rb.CLOSED:i.Db(g.Da.closed),i.Ub.Fh()}})},u.prototype.Q2b=function(){var e=this;this.j.Qq.addEventListener("showsubtitle",function(t){e.Db(g.Da.lwa,t,!0)}),this.j.Qq.addEventListener("removesubtitle",function(t){e.Db(g.Da.Lua,t,!0)})},u.prototype.k6a=function(){if(this.j.state.value==g.Rb.re){for(var t,e,i;e=this.r5a.shift();)t=this.j.Qq.Gha(e.url,e.name,e.options),e.qsb&&(i=t);i&&this.j.jc.set(i)}},u.prototype.Qab=function(){var t=this.j.state.value==g.Rb.re&&this.j.yb.value==g.cb.Wq;this.ended!==t&&(this.ended=t,this.j.bG("Ended changed: "+t),!t&&this.j.state.value!==g.Rb.CLOSING||this.Db(g.Da.wVa))},u.prototype.dH=function(){var e,t;try{if(e=/playercore.*js/,(t=r.xv.getEntriesByType("resource").filter(function(t){return null!==e.exec(t.name)}))&&0<t.length)return JSON.stringify(Math.round(t[0].duration))}catch(t){}},e.qEa=u},function(t,e,i){var v,y,w,_,n,r,a,o,E,s,u,c,h;function f(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m){var g=this;this.KX=e,this.Gz=i,this.Aa=n,this.nk=r,this.Ub=a,this.GW=o,this.TSb=s,this.H5a=u,this.Qaa=c,this.t3=h,this.za=f,this.NN=l,this.config=p,this.mC=d,this.O=b,this.Lh=m,this.T7=new E.dc(!0),this.yj=new E.dc(!1),this.As=new E.dc(!1),this.ended=new E.dc(!1),this.I3=new E.dc(0),this.yb=new E.dc(y.cb.Pf),this.RO=new E.dc(void 0),this.loaded=this.YY=this.closed=!1,this.d6a=function(o,s){return function(t){var e,i,n,r=t.newValue,a=r.wC;t=r.im,e=r.stream,i=(r=o.value).streams.find(function(t){return t.bitrate===e.stream.bitrate}),n=g.va.hi.find(function(t){return t.id===a}),g.log.info("Presenting "+i.type+" request with bitrate "+i.bitrate+", track "+r.trackId+" ["+t.startTime+"..."+t.endTime+"]"),s.set({stream:i,im:t,qc:n})}},this.e$a=function(n,r,a){return function(e){var t=n.value,i=t.streams.find(function(t){return t.bitrate===e.newValue.stream.bitrate});g.log.info("Streaming "+i.type+" stream with bitrate "+i.bitrate+", track "+t.trackId),r.set(i,{nG:e.om.nG,NT:void 0}),t=g.va.hi.filter(function(t){return t.id===e.om.wC})[0],a.set(t)}},this.oWa=new Set,this.log=t.ib("HLSVideoPlayer"),this.X=w.createElement("VIDEO","position:absolute;width:100%;height:100%"),this.X.playsInline=this.config.R5a,this.va=this.KX(_.zB.index++,b.J,b.id,null!==(b=b.Fb)&&void 0!==b?b:{},this.Gz.Wy(),this.Aa.Yb(),!1,void 0,function(){return g.Yt()}),this.va.mediaTime.set(null!==(b=this.va.aw)&&void 0!==b?b:0),this.uJ(),this.bnb=this.NN.create(this),this.bnb,this.load()}_esm(e),e.ZLa=void 0,v=i(47),y=i(15),w=i(30),_=i(58),n=i(103),r=i(57),a=i(3),o=i(62),E=i(80),s=i(4),u=i(19),c=i(129),h=i(24),f.prototype.c_b=function(){return!!this.X.canPlayType&&(""!==this.X.canPlayType("application/vnd.apple.mpegURL")||""!==this.X.canPlayType("audio/mpegurl"))},f.prototype.uJ=function(){var e=this;this.X.addEventListener("loadedmetadata",function(){e.Db(y.Da.x1a),e.Db(y.Da.w1a),e.Db(y.Da.gm),e.Db(y.Da.u3),e.Db(y.Da.Rl),e.Db(y.Da.ev)}),this.X.addEventListener("error",function(t){t=e.Lh(a.M.iHa,t),e.close(t)}),this.X.addEventListener("timeupdate",function(){e.ended.set(!1),e.va.mediaTime.set(e.Yt()),e.ala(),e.Db(y.Da.Wp),e.Db(y.Da.Gab)}),this.X.addEventListener("durationchange",function(){e.Db(y.Da.SUa)}),this.X.addEventListener("resize",function(){e.Db(y.Da.Hbb)}),this.X.addEventListener("playing",function(){e.ala(),e.As.set(!1),e.yj.set(!0),e.ended.set(!1),e.yb.set(y.cb.Kc)}),this.X.addEventListener("pause",function(){e.yj.set(!1),e.As.set(!1),e.yb.set(y.cb.hh)}),this.X.addEventListener("waiting",function(){e.yb.set(y.cb.Pf)}),this.X.addEventListener("stalled",function(){e.As.set(!0)}),this.X.addEventListener("seeking",function(){e.As.set(!1),e.RO.set(e.va.mediaTime.value),e.yb.set(y.cb.Pf)}),this.X.addEventListener("seeked",function(){void 0!==e.RO.value&&(e.va.Ll.nsa(e.RO.value,e.Yt()),e.RO.set(void 0)),e.yb.set(e.sq()?y.cb.Kc:y.cb.hh)}),this.X.addEventListener("progress",function(){e.Db(y.Da.Uia),e.Z0b()}),this.X.addEventListener("ended",function(){e.yb.set(y.cb.Wq),e.As.set(!1),e.yj.set(!1),e.ended.set(!0)}),this.X.addEventListener("volumechange",function(){e.Db(y.Da.Mbb),e.Db(y.Da.x3a)}),this.yj.addListener(function(){e.Db(y.Da.Bta),e.Db(y.Da.l5a),e.UL()}),this.I3.addListener(function(){e.Db(y.Da.OL)}),this.As.addListener(function(){e.Db(y.Da.OL)}),this.T7.addListener(function(){e.UL()}),this.ended.addListener(function(){e.Db(y.Da.wVa)}),this.va.playbackRate.addListener(function(t){e.X.playbackRate=t.newValue})},f.prototype.UL=function(){!this.sq()||this.T7.value||this.YY||this.VQa||(this.YY=!0,this.va.qH=this.za.FY,this.H5a.ap(this,this.va))},f.prototype.XT=function(){return this.JX-(this.va.vk.da(s.ja)+this.Aa.Vz.da(s.ja))},f.prototype.VG=function(){var t=this.va.bb.HZ;return u.Ba(t)?t:this.va.vk.da(s.ja)+this.Aa.Vz.da(s.ja)},f.prototype.eja=function(){return this.za.ff.da(s.ja)-this.VG()},f.prototype.gja=function(){return this.JX-this.VG()},f.prototype.Z0b=function(){var t=this.X.readyState<=o.co.q0.HAVE_METADATA?0:this.X.readyState<=o.co.q0.HAVE_CURRENT_DATA?.5:1;1==t&&(this.JX=this.za.ff.da(s.ja),this.T7.set(!1),this.kma(y.Da.loaded)),this.I3.set(t)},f.prototype.ala=function(){var t=this.Yt();this.Qaa.J8a(t),this.t3.J8a(t)},f.prototype.EY=function(){var g=this;return this.va.Dd("ats"),this.nk.ZM({ba:this.va.ba,bb:this.va.bb,W:this.va.J,Tt:n.Vm.g1,Uf:r.Xh.rp}).then(function(t){var e;return g.va.Dd("at"),e=g.GW.create({}).f5a(t),g.va.oa=t,g.va.Rc=e,g.X.audioTracks.addEventListener("addtrack",function(){g.abb(g.va.oc.value)}),g.X.audioTracks.addEventListener("change",function(){for(var t,e={},i=nt(g.X.audioTracks),n=i.next();!n.done;e={eQ:e.eQ},n=i.next())e.eQ=n.value,e.eQ.enabled&&e.eQ.label!==(null===(t=g.va.oc.value)||void 0===t?void 0:t.displayName)&&(n=null!==(t=g.va.Ki.find(function(e){return function(t){return t.displayName===e.eQ.label}}(e)))&&void 0!==t?t:null,g.va.oc.set(n))}),g.va.oc.addListener(function(t){g.abb(t.newValue),g.Db(y.Da.gm),g.Db(y.Da.ev)}),g.X.textTracks.addEventListener("addtrack",function(){g.bbb(g.va.jc.value)}),g.X.textTracks.addEventListener("change",function(){for(var t,e=g.X.textTracks,i={},n=0;n<e.length;i={fQ:i.fQ},n++)i.fQ=e[n],"showing"===i.fQ.mode&&i.fQ.label!==(null===(t=g.va.jc.value)||void 0===t?void 0:t.displayName)&&(t=null!==(t=g.va.Qh.find(function(e){return function(t){return t.displayName===e.fQ.label}}(i)))&&void 0!==t?t:null,g.va.jc.set(t),g.va.ci.set(t))}),g.va.jc.set(e.xU),g.va.ci.set(e.xU),g.va.jc.addListener(function(t){g.bbb(t.newValue),g.Db(y.Da.Rl)}),g.TSb.gi(t,function(t){return g.va.Dd(t)})}).then(function(t){var i,e,n,r,a,o,s,u,c,h,f,l,p,d,b=t.vNb,m=t.gub;t=t.wZb,i=t.audio,e=t.YTa,n=t.video,a=(r=g.va).jh,o=r.oc,s=r.Ki,u=r.We,c=r.xg,t=r.aw,h=r.oe,f=r.jf,l=r.Ll,(r=r.Rc).Ki=s.filter(function(e){return i.find(function(t){return t.track.sg===e.trackId})}),c.set(r.A4),o.set(s.find(function(t){return t.trackId===e})),p=(r=n[0]).stream,d=(s=i.find(function(t){return t.track.sg===e})).stream,g.eW=p.bitrate,g.Qaa.Mta.addListener(g.d6a(c,h)),g.Qaa.Swa.addListener(g.e$a(c,u,g.va.qc[v.Tb.Ta.Mb])),u=m.get(p.Gr).DO.Sp,g.Qaa.xb(n,r,u),g.t3.Mta.addListener(g.d6a(o,f)),g.t3.Swa.addListener(g.e$a(o,a,g.va.qc[v.Tb.Ta.Wb])),m=m.get(d.Gr).DO.Sp,g.t3.xb(i,s,m),g.X.src=b,g.X.currentTime=(null!=t?t:0)/1e3,g.X.load(),l.nsa(0,t&&0<t?t:1)}).catch(function(t){var e;t instanceof Error&&(e=h.wd(t),g.log.error("uncaught exception",t,e)),g.close(g.Lh(null!==(e=t.code)&&void 0!==e?e:a.M.KLa,t))})},f.prototype.bbb=function(t){for(var e,i=this.X.textTracks,n=0;n<i.length;n++)(e=i[n]).label===t.displayName&&"showing"!==e.mode&&(e.mode="showing"),e.label!==t.displayName&&"showing"===e.mode&&(e.mode="hidden")},f.prototype.abb=function(t){for(var e=nt(this.X.audioTracks),i=e.next();!i.done;i=e.next())(i=i.value).label!==t.displayName||i.enabled||(i.enabled=!0),i.label!==t.displayName&&i.enabled&&(i.enabled=!1)},f.prototype.Yt=function(){return Math.floor(1e3*this.X.currentTime)},f.prototype.N5=function(){return this.Yt()},f.prototype.ana=function(){return Math.floor(1e3*this.X.duration)},f.prototype.vYa=function(){return this.O.J},f.prototype.Az=function(){return this.va.ba},f.prototype.Dn=function(){return this.X},f.prototype.isReady=function(){return null===this.Hh()},f.prototype.sq=function(){return this.yj.value},f.prototype.lW=function(){return!this.yj.value},f.prototype.vpa=function(){return this.X.ended},f.prototype.Hh=function(){return 1!==this.I3.value?{stalled:this.As.value,progress:this.I3.value,progressRollback:!1}:null},f.prototype.getError=function(){var t;return null!==(t=null===(t=this.li)||void 0===t?void 0:t.xZ())&&void 0!==t?t:null},f.prototype.dXa=function(){return 1===this.X.buffered.length?1e3*this.X.buffered.end(0):null},f.prototype.pZa=function(){return{width:this.X.videoWidth,height:this.X.videoHeight}},f.prototype.Dpa=function(){return this.X.muted},f.prototype.qZa=function(){return this.X.volume},f.prototype.U8a=function(t){this.X.muted=t},f.prototype.e9a=function(t){this.X.volume=t},f.prototype.addEventListener=function(t,e,i){this.Ub.addListener(t,e,i)},f.prototype.removeEventListener=function(t,e){this.Ub.removeListener(t,e)},f.prototype.load=function(){var e=this;this.loaded||(this.loaded=!0,this.mC.LN(function(t){e.c_b()?t.$?e.EY():e.close(e.Lh(t.errorCode||a.M.Gca,t)):e.close(e.Lh(a.M.Vfb))}))},f.prototype.close=function(t){return this.closed?Promise.resolve():(this.va.mediaTime.set(this.Yt()),this.ala(),this.va.iU=this.N5(),this.closed=!0,this.X.removeAttribute("src"),this.X.load(),(this.li=t)&&this.Db(y.Da.error,t.xZ()),this.Db(y.Da.closed),this.H5a.$Y(this.va))},f.prototype.play=function(){var e=this,t=this.X.play();this.VQa=!1,t&&t.then(function(){e.kma(y.Da.WQa)}).catch(function(t){e.Db(y.Da.OL),"NotAllowedError"===t.name&&(e.log.warn("Playback is blocked by the browser settings",t),e.VQa=!0,e.ei=!0,e.kma(y.Da.x3,{player:{play:function(){return e.play()}}}))})},f.prototype.Db=function(t,e,i){((e=e||{}).target=this).Ub.Fc(t,e,!i)},f.prototype.kma=function(t,e){this.oWa.has(t)||(this.oWa.add(t),this.Db(t,e,void 0))},f.prototype.pause=function(){this.X.pause()},f.prototype.seek=function(t){this.X.currentTime=t/1e3},f.prototype.z_a=function(t){this.close(this.Lh(a.M.$Ba,a.L.Vl,t))},f.prototype.Jo=function(){return this.va.playbackRate.value},f.prototype.V8a=function(t){this.va.playbackRate.set(t)},f.prototype.VWa=function(){var e=this;return this.va.Ki.map(function(t){return e.mq(t)})},f.prototype.doa=function(t){var e=this;return this.HV(t).map(function(t){return e.mq(t)})},f.prototype.UWa=function(){var t=this.va.oc.value;return t&&this.mq(t)},f.prototype.coa=function(){var t=this.va.jc.value;return t&&this.mq(t)},f.prototype.G8a=function(t){return(t=this.cV(t))&&t.oi?(this.va.oc.set(t),Promise.resolve()):(this.log.error("Invalid setAudioTrack call"),Promise.reject(Error("Invalid setAudioTrack call")))},f.prototype.cwa=function(e){var i=this,t=this.va.Qh.find(function(t){return i.mq(t)===e});return t&&t.oi?(this.va.jc.set(t),this.va.ci.set(t),Promise.resolve()):(this.log.error("Invalid setTextTrack call"),Promise.reject(Error("Invalid setTextTrack call")))},f.prototype.oYa=function(){var t;return this.AV(this.va.Ki,null===(t=this.va.oa)||void 0===t?void 0:t.$b.B2a)},f.prototype.una=function(t){return this.AV(this.HV(t),null===(t=this.va.oa)||void 0===t?void 0:t.$b.C2a)},f.prototype.mq=function(t){var e=t.dua=t.dua||{trackId:t.trackId,bcp47:t.Wd,displayName:t.displayName,trackType:t.ml,rawTrackType:t.oI,channels:t.channels};return this.Jpa(t)&&(e.isNative=t.isNative,e.surroundFormatLabel=t.hZ),this.Kpa(t)&&(e.isNoneTrack=t.Vr(),e.isForcedNarrative=t.rq(),e.isImageBased=t.kk),e.subType=t.XI,e.variant=t.variant,e},f.prototype.Jpa=function(t){return void 0!==t.isNative},f.prototype.Kpa=function(t){return void 0!==t.Vr&&void 0!==t.rq},f.prototype.cV=function(e){var i=this;return e&&this.va.Ki.find(function(t){return i.mq(t)===e})},f.prototype.HV=function(t){return null!==(t=null==(t=this.cV(t)||this.va.oc.value)?void 0:t.Qh)&&void 0!==t?t:[]},f.prototype.AV=function(t,e){var i=t.length-1;return"number"!=typeof e||-1===(t=t.findIndex(function(t){return t.uc>e}))?i:t-1},f.prototype.Daa=function(t){this.va.bb=c.u8(this.va.bb,t)},f.prototype.um=function(t){if(t!==this.va.xa)throw Error("Unknown segmentId "+t);return this.va},f.prototype.JYa=function(){return this.va.bb},f.prototype.Mha=function(){},f.prototype.Nw=function(){},f.prototype.WH=function(){},f.prototype.NV=function(){return Promise.reject()},f.prototype.Una=function(){return{}},f.prototype.O5=function(){},f.prototype.rXa=function(){},f.prototype.RWa=function(){return{}},f.prototype.Rva=function(){},f.prototype.yP=function(){},f.prototype.X_a=function(){return!1},f.prototype.xXa=function(){return{addEventListener:function(){},removeEventListener:function(){},getGroups:function(){return[]},register:function(){},notifyUpdated:function(){},getModel:function(){},getTime:function(){return 0}}},f.prototype.AM=function(){return Promise.resolve({success:!0})},f.prototype.mZa=function(){},f.prototype.LV=function(){},f.prototype.oP=function(){},f.prototype.gwa=function(){},f.prototype.t1a=function(){},f.prototype.MWa=function(){return Promise.reject()},f.prototype.D5a=function(){return Promise.reject()},f.prototype.w6a=function(){return Promise.reject()},f.prototype.Ai=function(){return Promise.reject()},f.prototype.iI=function(){},f.prototype.r9a=function(){return!1},e.ZLa=f},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){var i,n;_esm(e),e.Jc=e.No=void 0,(n=i=i||{})[n.dj=0]="STOPPED",n[n.xd=1]="BUFFERING",n[n.Of=2]="REBUFFERING",n[n.ej=3]="STREAMING",n[n.VR=4]="TRACK_SWITCH",e.Jc=i,e.No=function(t){return t===i.xd||t===i.Of||t===i.VR}},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(681),e),t.__exportStar(i(682),e),t.__exportStar(i(683),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e),e.uda=void 0,(t=e.uda||(e.uda={}))[t.HAVE_NOTHING=0]="HAVE_NOTHING",t[t.pB=1]="HAVE_SOMETHING",t[t.Dx=2]="HAVE_MINIMUM",t[t.RJ=3]="HAVE_ENOUGH"},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){var i;_esm(e),e.ma=void 0,(t=i=i||{})[t.zh=0]="STARTING",t[t.xd=1]="BUFFERING",t[t.Of=2]="REBUFFERING",t[t.Kc=3]="PLAYING",t[t.gr=4]="STOPPING",t[t.dj=5]="STOPPED",t[t.hh=6]="PAUSED",e.ma=i},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(704),e),t.__exportStar(i(705),e),t.__exportStar(i(706),e),t.__exportStar(i(707),e),t.__exportStar(i(708),e),t.__exportStar(i(709),e),t.__exportStar(i(710),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),i(2).__exportStar(i(712),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e),e.Wx=void 0,(t=e.Wx||(e.Wx={}))[t.Kib=0]="PLAYGRAPH_CHANGED",t[t.Lib=1]="PLAYGRAPH_UNCHANGED",t[t.Yhb=2]="NO_MATCHING_SEGMENT_FOUND",t[t.yfb=3]="EXISTING_SEGMENT_VIEWABLE_ID_MISMATCHED",t[t.xfb=4]="EXISTING_SEGMENT_START_TIME_MISMATCHED",t[t.Kjb=5]="SEGMENT_EXTENSION_NOT_SUPPORTED",t[t.lcb=6]="APPENDED_PAST_TRUNCATION_POINT"},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n;function r(t){this.config=t}_esm(e),e.eza=void 0,n=i(16),r.prototype.wn=function(t,e){return this.config.bZ||e!==n.Jc.ej?t.filter(function(t){return t.St}):t},e.eza=r},function(t,e,i){var o,s,u;function n(t){this.console=t,this.ZTa=[],this.fRa={},this.pUa=!1}_esm(e),e.rF=void 0,t=i(2),o=i(20),s=t.__importDefault(i(6)),u=i(349),n.prototype.Lq=function(t,e){this.ZTa=t,void 0!==e?this.fRa[e]=t:this.pUa||(this.console.warn("StreamFilters: Bitrate filters received with undefined viewable id"),this.pUa=!0)},n.prototype.wn=function(e){var t,i,n,r,a=this;if(0===e.length)return e;if(void 0===(n=e[0].W))return this.console.error("StreamFilters: Stream has undefined viewable id"),e;try{null!==(t=s.default.Ft)&&void 0!==t&&t.call(s.default,n)}catch(t){return this.console.error("StreamFilters: createFilteredVideoStreamList: "+t),e}return r=null!==(i=this.fRa[n])&&void 0!==i?i:this.ZTa,o.ga&&this.console.trace("VideoBitrateRangesFilter: filtering "+e.length+" streams with "+JSON.stringify(r)),e=e.filter(function(t){return u.cia(t.profile,t.bitrate,r,a.console).inRange}),o.ga&&this.console.trace("VideoBitrateRangesFilter: ... "+e.length+" streams in range"),e},i=n,e.rF=i},function(t,e){function i(t){var e=this;t.CP&&t.CP.enabled&&t.CP.profiles&&t.CP.profiles.length&&"keepLowest"===t.CP.action&&(this.U0a={},t.CP.profiles.forEach(function(t){return e.U0a[t]=!0}))}_esm(e),e.fza=void 0,i.prototype.wn=function(t){var e={},i=this.U0a;return void 0===i?t:t.filter(function(t){return!i[t.profile]||!e[t.profile]&&(e[t.profile]=!0)})},e.fza=i},function(t,e){function i(t){this.config=t}_esm(e),e.cza=void 0,i.prototype.wn=function(t){var e=this.config;return t.filter(function(t){return!(void 0!==t.sb&&(t.sb<e.KH||t.sb>e.n2a)||(void 0===t.sb||e.KH<=0)&&t.bitrate<e.Jra||(void 0===t.sb||1/0===e.n2a)&&t.bitrate>e.HNb)})},e.cza=i},function(t,e,i){var n;function r(t,e){return e=Math.max(t,e),isNaN(e)?t||-1/0:e}function a(t){this.config=t,this.b$=0,this.state=n.Jc.dj,this.l3a=r(t.Jra,t.w8),this.Pra=r(t.KH,t.SW)}_esm(e),e.Pya=void 0,n=i(16),a.prototype.wn=function(t,e){var i=this;if(e!==this.state){if((this.state=e)===n.Jc.xd||e===n.Jc.VR)return t;e===n.Jc.Of&&this.L6a()}return t.filter(function(t){return!(void 0!==t.sb&&t.sb<i.Pra||(void 0===t.sb||i.Pra<0)&&t.bitrate<i.l3a)})},a.prototype.L6a=function(){++this.b$,this.Pra=r(this.config.KH,this.config.SW-this.config.HOb*this.b$),this.l3a=this.config.Jra||-1/0},e.Pya=a},function(t,e,i){var c;function n(t){this.config=t}_esm(e),e.bza=void 0,c=i(25),n.prototype.uYb=function(t){return t%100+1<=this.config.hta},n.prototype.wn=function(t){var e,i,n,r,a,o,s,u=Number(null===(e=t[0])||void 0===e?void 0:e.J);if(!(this.config.U4&&this.uYb(u)&&0<this.config.o$.length))return t;if(e=t.length,r=null!==(i=t[e-1].n$)&&void 0!==i?i:0,i=c.ig(this.config.o$,function(t){return t.Rbc>=r&&t.N7a<=r})){for(u=0;u<e&&(a=t[Math.max(u-1,0)],(null!==(n=(o=t[u]).n$)&&void 0!==n?n:0)<i.N7a||(null!==(s=a.n$)&&void 0!==s?s:0)<i.N7a||(s=null!==(n=o.sb)&&void 0!==n?n:1/0,(a=null!==(n=a.sb)&&void 0!==n?n:1/0)<i.abc||a<i.$ac&&o.bitrate<i.maxBitrate||!s&&o.bitrate<i.wac));u++);return t.slice(0,u)}return t},e.bza=n},function(t,e,i){var n;_esm(e),e.$ca=e.Aba=void 0,n=i(25),e.Aba={wn:function(t){return t.filter(function(t){return t.ju&&!t.Ez})}},e.$ca={wn:function(t){return(t=n.ig(t,function(t){return!!t.ju&&!t.Ez}))?[t]:[]}}},function(t,e){_esm(e),e.ada=void 0,e.ada={wn:function(t){return[t[0]]}}},function(t,e,i){var n,r;_esm(e),e.CC=e.BC=void 0,n=i(351),r=i(99),e.BC=function(t,e){return e&&null!=t&&t.h_a&&(e=new r.mF(e).or(r.aF)),new r.mF(r.Aba).and(null!=e?e:r.aF).or(r.$ca,n.mK.QG).or(r.ada,n.mK.QG)},e.CC=function(t,e){return e&&t.h_a&&(e=new r.mF(e).or(r.aF)),new r.mF(r.Aba).and(new r.eza(t)).and(new r.cza(t)).and(new r.Pya(t)).and(new r.fza(t)).and(t.U4?new r.bza(t):r.aF).and(null!=e?e:r.aF).or(r.$ca,n.mK.QG).or(r.ada,n.mK.QG)}},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){_esm(e),(t=i(2)).__exportStar(i(733),e),t.__exportStar(i(355),e)},function(t,e){_esm(e)},function(t,e){_esm(e)},function(t,e,i){var n;function r(t,e){return(t=n.call(this,r.dEb(t,e))||this).$lb=e,t.name="AggregateError",t}_esm(e),e.Fya=void 0,i=i(2),n=Error,i.__extends(r,n),r.dEb=function(t,e){return e.reduce(function(t,e){return t+"\n"+e},t)},Object.defineProperties(r.prototype,{a5:{get:function(){return this.$lb},enumerable:!1,configurable:!0}}),e.Fya=r},function(t,e){_esm(e)},function(t,e){function n(){}_esm(e),e.pjb=(n.decode=function(t){return Object.assign({initialSegment:t.Yd,segments:n.nzb(t.qa)},void 0!==t.ae?{transitionType:t.ae}:{})},n.encode=function(t){return Object.assign({Yd:t.initialSegment,qa:n.WBb(t.segments)},void 0!==t.transitionType?{ae:t.transitionType}:{})},n.WBb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.VBb(i[e]),t},{})},n.VBb=function(t){return Object.assign({W:t.viewableId,Jb:t.startTimeMs},t.endTimeMs?{Ob:t.endTimeMs}:{},t.defaultNext?{Qe:t.defaultNext}:{},t.weight?{weight:t.weight}:{},t.transitionType?{ae:t.transitionType}:{},t.next?{next:n.TBb(t.next)}:{},t.exitZones?{hq:t.exitZones}:{},t.playbackRate?{playbackRate:t.playbackRate}:{},t.uxSegment?{fv:t.uxSegment}:{})},n.TBb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.UBb(i[e]),t},{})},n.UBb=function(t){return Object.assign({},void 0!==t.weight?{weight:t.weight}:{},t.transitionType?{ae:t.transitionType}:{})},n.nzb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.mzb(i[e]),t},{})},n.mzb=function(t){return Object.assign({viewableId:t.W,startTimeMs:t.Jb},t.Ob?{endTimeMs:t.Ob}:{},t.Qe?{defaultNext:t.Qe}:{},t.weight?{weight:t.weight}:{},t.ae?{transitionType:t.ae}:{},t.next?{next:n.kzb(t.next)}:{},t.hq?{exitZones:t.hq}:{},t.playbackRate?{playbackRate:t.playbackRate}:{},t.fv?{uxSegment:t.fv}:{})},n.kzb=function(i){return Object.keys(i).reduce(function(t,e){return t[e]=n.lzb(i[e]),t},{})},n.lzb=function(t){return Object.assign({},void 0!==t.weight?{weight:t.weight}:{},t.ae?{transitionType:t.ae}:{})},n)},function(t,e,i){var a;_esm(e),a=i(169),e.xC=function(h,t){var e,i,f,l,p,n,r=void 0===t?{}:t;return t=r.Bd,e=r.Yd,i=r.qa,r=r.config,f=!(!r||-1===r.Ama.indexOf(h.viewableId)),n=h,l=!Object.keys(n.segments).some(function(t){var e;return(null===(e=n.segments[t].ui)||void 0===e?void 0:e.interactionZones)||(null===(t=n.segments[t].ui)||void 0===t?void 0:t.interactionZonesV2)})&&(null==r?void 0:r.zma)||0,r=new a.AB,p=i||h.segments,r.JI(null!=e?e:h.initialSegment).T8a(null!=t?t:h.mediaTypes).hwa(f?"immediate":h.transitionType).bwa(Object.keys(p).reduce(function(t,e){var i,n,r,a,o,s,u=p[e],c=u.weight;if(null==c&&(c=u.next&&(f||null!==(i=u.exitZones)&&void 0!==i&&i.length)?(r=u.next,a=Object.keys(r),(o=a.length)?a.reduce(function(t,e){return t+(r[e].weight||0)},0)/o:void 0):void 0),null==(i=u.exitZones))t:{if(f&&u.endTimeMs){i=u.endTimeMs-u.startTimeMs;e:{if(u.ui){if(null!=(n=u.ui.interactionZones)&&n.length&&n[0].length){n=n[0][0]-u.startTimeMs;break e}if(null!=(n=u.ui.interactionZonesV2)&&n.length&&n[0].length){n=n[0][0];break e}}n=void 0}if(n&&n<i){i=[[n,i]];break t}if(l&&l<i){i=[[i-l,i]];break t}}i=void 0}return n=u.transitionHint||(!f||l||i?void 0:"lazy"),c={W:h.viewableId,Jb:u.startTimeMs,Ob:null!=(o=u.endTimeMs)?o:1/0,ae:n,hq:i,weight:c},u.defaultNext&&(c.Qe=u.defaultNext),u.next&&(c.next=(s=u.next,Object.keys(s).reduce(function(t,e){var i=s[e],n=i.weight;return i=i.transitionType||i.transitionHint,e=t[e]={},void 0!==n&&(e.weight=n),i&&(e.ae=i),t},{}))),t[e]=c,t},{})),r.gi()}},function(t,e,i){var r;_esm(e),r=i(169),e.NI=function(t,e,i){var n=new r.AB;return n.JI(e).hwa("lazy").T8a(i).Nk(e,{W:t,Jb:0,Ob:1/0}),n.gi()}},function(t,e,i){var f,l,p;_esm(e),f=i(1),l=i(169),p=i(357),e.Rac=function(s,t){var e,i,n,r,u,c,h,a,o=Object.keys(t.qa);return p.assert(2===o.length,"Unsupported content playgraph: must have 2 segments"),e=t.Yd,i=o[0]===e?o[1]:o[0],o=t.qa[e],n=t.qa[i],r=n.W,p.assert(o.W!==r,"Unsupported content playgraph: must have different viewableIds"),(u=new l.AB).bwa(s.qa,function(t){return t.W!==r}),u.NPa(s.qa,function(t){return t.W===r&&t.Jb>=n.Jb&&(!n.Ob||!!t.Ob&&t.Ob<=n.Ob)}),t=Object.keys(s.qa).filter(function(t){return!u.FIb(t)}),p.assert(t.length<=1,"Unsupported content playgraph: more than one source playgraph segment not contained in content playgraph main segment"),0<t.length?(c=t[0],t=s.qa[c],h=c+":"+e,!t.Ob||t.Ob>n.Jb?(a=c+":"+i,u.Nk(h,f.__assign(f.__assign({},o),{fv:c,Qe:a,next:((i={})[a]={},i)})),u.Nk(a,f.__assign(f.__assign({},t),{fv:c,Jb:n.Jb}))):u.Nk(h,f.__assign(f.__assign({},o),{fv:c,Qe:t.Qe,next:((a={})[t.Qe]={},a)})),Object.keys(s.qa).forEach(function(t){var e,i,n,r,a,o=s.qa[t];void 0!==(null===(e=o.next)||void 0===e?void 0:e[c])&&u.Nk(t,f.__assign(f.__assign({},o),{Qe:o.Qe===c?h:o.Qe,next:(i=o.next,n=c,r=h,a={},Object.keys(i).forEach(function(t){t!==n?a[t]=i[t]:a[r]=i[t]}),a)}))}),u.JI(s.Yd===c?h:s.Yd)):u.JI(s.Yd),u.gi()}},function(t,e,i){var a,o;_esm(e),a=i(357),o=i(358),e.uac=function(t,e,i){var n,r=e.qa[i.O];return a.assert(r,"Graph position does not exist"),n=i.offset,a.assert(0<=n,"Graph position offset cannot be negative"),a.assert(!r.Ob||n<r.Ob-r.Jb,"Graph position offset outside segment"),void 0===r.fv?i:(t=t.qa[r.fv],a.assert(t,"Referenced ux playgraph segment must exist"),r.W===t.W?{O:r.fv,offset:r.Jb+n-t.Jb}:(a.assert(r.Ob,"Content playgraph segments from other viewables must have end time"),(n=r.Qe&&e.qa[r.Qe])?null==(e=(e=o.kDb(e,i.O))?e.W!==t.W?t.Jb:e.Ob:0)?(a.assert(t.Ob,"Experience playgraph segment must have end time"),{O:r.fv,offset:t.Ob-t.Jb}):(null!=(t=n.W!==t.W?t.Ob:n.Jb)||a.assert(t,"Experience playgraph segment must have end time"),{O:r.fv,offset:e+i.offset/(r.Ob-r.Jb)*(t-e)}):(a.assert(t.Ob,"Must have definite end time to add terminal content playgraph segment"),{O:r.fv,offset:t.Ob-t.Jb})))}},function(t,e,i){var n,r,a,o,s,b,u;function c(t,e){var i=u.call(this)||this;return i.I=t,i.th=new s.HEa(t,e),t.TU&&i.RSa(e),i.Xg=new r.Wh,b.forEach(function(e){i.Xg.on(i.th,e,function(t){return i.emit(e,t)}),i.Km&&i.Xg.on(i.Km,e,function(t){return i.emit(e,t)})}),i}_esm(e),e.BFa=void 0,n=i(2),r=i(17),a=i(218),o=i(353),t=n.__importDefault(i(6)),s=i(767),(t=new t.default.Console("ASEJS","media|asejs")).trace.bind(t),b=["prebuffstats","discardedBytes","flushedBytes","cacheEvict","mediacache"],u=r.EventEmitter,n.__extends(c,u),Object.defineProperties(c.prototype,{Qb:{get:function(){return this.th.Qb},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{In:{get:function(){return this.th.In},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Xu:{get:function(){return this.th.Xu},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{OA:{get:function(){return this.th.OA},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Upa:{get:function(){return this.th.Upa},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{dE:{get:function(){return this.th.dE},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Gf:{get:function(){return this.th.Gf},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Kh:{get:function(){return this.th.Kh},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Soa:{get:function(){return this.th.Soa},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{BW:{get:function(){return this.th.BW.bind(this.th)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{G5:{get:function(){return this.th.G5.bind(this.th)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{K3:{get:function(){var t=this;return function(){t.cva(),t.th.K3()}},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{dja:{get:function(){var t=this;return function(){t.cva(),t.th.dja()}},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ly:{get:function(){var t=this;return function(){t.cva(),t.th.Ly()}},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Lp:{get:function(){var r=this;return function(t,e,i){var n;null!==(n=r.Gf)&&void 0!==n&&n.Lp(t,e,i)}},enumerable:!1,configurable:!0}}),c.prototype.RSa=function(t){return this.Km=new(i(889).uKa)(this.I,this.Ly,this.Lp,t)},c.prototype.xb=function(t,e,i,n,r,a,o,s){void 0===o&&(o=262144),void 0===s&&(s=1048576),this.th.xb(t,e,i,n,r,a),this.Km?this.Km.xb(t,e,i,n,r,a,o,s):this.a1a={Zrb:t,r2b:e,hw:i,OA:n,dE:r,kOb:a,ria:o,hya:s}},c.prototype.OY=function(t,e,i){this.th.OY(t,e,i),this.Km?this.Km.OY(t,e,i):this.f1a={CZb:t,OA:e,dE:i}},c.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){var h,f,l,p,d=this;return(s=s||this.th.config).TU&&!this.Km&&(h=this.RSa(this.th.mE),b.forEach(function(e){d.Xg.on(d.Km,e,function(t){return d.emit(e,t)})}),this.a1a&&(l=(f=this.a1a).OA,p=f.dE,h.xb(f.Zrb,f.r2b,f.hw,l,p,f.kOb,f.ria,f.hya)),this.f1a&&(f=(p=this.f1a).CZb,l=p.OA,p=p.dE,h.OY(f,l,p))),this.Km&&s&&s.Iaa?(s.wr||s.RH||this.th.Ly(),this.Km.createSession(t,e,i,n,r,a,o,s,u,c)):this.th.createSession(t,e,i,n,r,a,o,s,u,c)},c.prototype.lx=function(t,e,i){if(this.Km)return this.Km.lx(t,e,i);throw Error("Update viewable not supported in legacy.")},c.prototype.addEventListener=function(t,e){return this.addListener(t,e),!0},c.prototype.removeEventListener=function(t,e){return this.removeListener(t,e),!0},c.prototype.Nb=function(){var t;this.Xg.clear(),this.th.Nb(),null!==(t=this.Km)&&void 0!==t&&t.Nb(),a.GJ.reset()},c.prototype.cva=function(){var t;this.I.wr||this.I.RH||(null===(t=this.Km)||void 0===t?void 0:t.Ka.state)!==o.Os.OPEN||null!==(t=this.Km)&&void 0!==t&&t.Ka.Gu.reset()},t=c,e.BFa=t},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addListener=function(t,e,i,n){if(i=n?i.bind(n):i,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addListener)t.addListener(e,i);else{if("function"!=typeof t.addEventListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");t.addEventListener(e,i)}this.listeners.push([t,e,i])}return this},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){t.exports={xjb:i(745),H3b:i(746)}},function(t,e,i){function h(t){this.data=t,this.right=this.left=null,this.red=!0}function n(t){this.cf=null,this.cn=t,this.size=0}function f(t){return null!==t&&t.red}function l(t,e){var i=t.rh(!e);return t.Mq(!e,i.rh(e)),i.Mq(e,t),t.red=!0,i.red=!1,i}function p(t,e){return t.Mq(!e,l(t.rh(!e),!e)),l(t,e)}e=i(359),h.prototype.rh=function(t){return t?this.right:this.left},h.prototype.Mq=function(t,e){t?this.right=e:this.left=e},(n.prototype=new e).qq=function(t){var e,i,n,r,a,o,s,u,c=!1;if(null===this.cf)this.cf=new h(t),c=!0,this.size++;else{for(a=e=new h(void(n=i=0)),o=r=null,s=this.cf,a.right=this.cf;null===s?(s=new h(t),o.Mq(i,s),c=!0,this.size++):f(s.left)&&f(s.right)&&(s.red=!0,s.left.red=!1,s.right.red=!1),f(s)&&f(o)&&(u=a.right===r,s===o.rh(n)?a.Mq(u,l(r,!n)):a.Mq(u,p(r,!n))),0!==(u=this.cn(s.data,t));)n=i,i=u<0,null!==r&&(a=r),r=o,s=(o=s).rh(i);this.cf=e.right}return this.cf.red=!1,c},n.prototype.remove=function(t){var e,i,n,r,a;if(null===this.cf)return!1;(i=e=new h(void 0)).right=this.cf;for(var o,s=null,u=null,c=1;null!==i.rh(c);)n=c,o=s,i=(s=i).rh(c),c=0<(r=this.cn(t,i.data)),0===r&&(u=i),f(i)||f(i.rh(c))||(f(i.rh(!c))?(o=l(i,c),s.Mq(n,o),s=o):f(i.rh(!c))||null===(r=s.rh(!n))||(f(r.rh(!n))||f(r.rh(n))?(a=o.right===s,f(r.rh(n))?o.Mq(a,p(s,n)):f(r.rh(!n))&&o.Mq(a,l(s,n)),(n=o.rh(a)).red=!0,i.red=!0,n.left.red=!1,n.right.red=!1):(s.red=!1,r.red=!0,i.red=!0)));return null!==u&&(u.data=i.data,s.Mq(s.right===i,i.rh(null===i.left)),this.size--),this.cf=e.right,null!==this.cf&&(this.cf.red=!1),null!==u},t.exports=n},function(t,e,i){function s(t){this.data=t,this.right=this.left=null}function n(t){this.cf=null,this.cn=t,this.size=0}e=i(359),s.prototype.rh=function(t){return t?this.right:this.left},s.prototype.Mq=function(t,e){t?this.right=e:this.left=e},(n.prototype=new e).qq=function(t){if(null===this.cf)return this.cf=new s(t),this.size++,!0;for(var e=0,i=null,n=this.cf;;){if(null===n)return n=new s(t),i.Mq(e,n),ret=!0,this.size++,!0;if(0===this.cn(n.data,t))return!1;e=this.cn(n.data,t)<0,n=(i=n).rh(e)}},n.prototype.remove=function(t){var e,i,n;if(null===this.cf)return!1;(i=e=new s(void 0)).right=this.cf;for(var r=null,a=null,o=1;null!==i.rh(o);)i=(r=i).rh(o),o=0<(n=this.cn(t,i.data)),0===n&&(a=i);return null!==a&&(a.data=i.data,r.Mq(r.right===i,i.rh(null===i.left)),this.cf=e.right,this.size--,!0)},t.exports=n},function(t,e,i){var r,a;function n(){this.data={}}_esm(e),e.AGa=void 0,r=i(25),a=i(5),Object.defineProperties(n.prototype,{empty:{get:function(){return 0===Object.keys(this.data).length},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{size:{get:function(){var i=this;return Object.keys(this.data).reduce(function(t,e){return t+i.data[e].length},0)},enumerable:!1,configurable:!0}}),n.prototype.get=function(t){return null!==(t=this.data[t])&&void 0!==t?t:[]},n.prototype.has=function(t,e){return!!(t=this.data[t])&&(void 0===e||-1!==t.indexOf(e))},n.prototype.count=function(t){return(t=this.data[t])?t.length:0},n.prototype.keys=function(){return Object.keys(this.data)},n.prototype.values=function(){var e=this;return r.flatten(this.keys().map(function(t){return e.data[t]}))},n.prototype.set=function(t,e){return(this.data[t]||(this.data[t]=[])).push(e),this},n.prototype.clear=function(){this.data={}},n.prototype.delete=function(t,e){var i,n=this.data[t];return void 0!==n&&(void 0===e?(a.assert(1===arguments.length),delete this.data[t],!0):-1!==(i=n.indexOf(e))&&(1===n.length?delete this.data[t]:n.splice(i,1),!0))},n.prototype.forEach=function(i,t){var n=this;i=void 0!==t?i.bind(t):i,this.keys().forEach(function(e){return n.data[e].forEach(function(t){return i(t,e,n)})})},n.prototype.reduce=function(i,t,e){var n,r=this;return i=void 0!==e?i.bind(e):i,n=t,this.forEach(function(t,e){n=i(n,t,e,r)}),n},n.prototype.map=function(i,t){var n=this;return i=void 0!==t?i.bind(t):i,r.flatten(this.keys().map(function(e){return n.data[e].map(function(t){return i(t,e,n)})}))},n.prototype.filter=function(i,t){var n=this;return i=void 0!==t?i.bind(t):i,r.flatten(this.keys().map(function(e){return n.data[e].filter(function(t){return i(t,e,n)})}))},e.AGa=n},function(t,e){_esm(e),e.kWa=void 0,e.kWa=function(t,i){return t.filter(function(t){var e;return!!(t=null!==(e=null!==(e=t.xj)&&void 0!==e?e:t.Tr)&&void 0!==e?e:t.Mg)&&t.HN(i)}).pop()}},function(t,e,i){var r;function n(t){this.G=t,this.listeners=[],this.sX=[]}function a(){this.listeners=[]}_esm(e),e.yKa=e.xKa=void 0,r=i(25),Object.defineProperties(n.prototype,{value:{get:function(){return this.G},enumerable:!1,configurable:!0}}),n.prototype.set=function(e){var t;this.G=e,t=this.sX,this.sX=[],this.listeners.forEach(function(t){return t(e)}),t.forEach(function(t){return t(e)})},n.prototype.M7a=function(){this.G=void 0},n.prototype.on=function(t){this.listeners=this.listeners.concat([t]),void 0!==this.G&&t(this.G)},n.prototype.once=function(t){void 0!==this.G?t(this.G):this.sX.push(t)},n.prototype.HD=function(e){this.listeners=this.listeners.filter(function(t){return t!==e}),this.sX=this.sX.filter(function(t){return t!==e})},t=n,e.xKa=t,a.prototype.on=function(t,e){this.listeners.push({signal:t,listener:e}),t.on(e)},a.prototype.once=function(e,i){var t,n=this;void 0===e.value?(t=function(t){n.remove(e,i),i(t)},this.listeners.push({signal:e,listener:i,Zbb:t}),e.once(t)):e.once(i)},a.prototype.HD=function(e,i){var t,n=r.ig(this.listeners,function(t){return t.signal===e&&t.listener===i});void 0!==n&&e.HD(null!==(t=n.Zbb)&&void 0!==t?t:n.listener),this.remove(e,i)},a.prototype.removeAllListeners=function(){this.listeners.forEach(function(t){var e=t.listener,i=t.Zbb;return t.signal.HD(null!=i?i:e)}),this.listeners=[]},a.prototype.remove=function(e,i){this.listeners=this.listeners.filter(function(t){return t.signal!==e||t.listener!==i})},t=a,e.yKa=t},function(t,e){function i(){var e=this;this.MOa=!1,this.promise=new Promise(function(t){e.gpb=t})}_esm(e),e.EQ=e.p0a=void 0,e.p0a=function(t){return"function"==typeof(null==t?void 0:t.then)},Object.defineProperties(i.prototype,{then:{get:function(){return this.promise.then.bind(this.promise)},enumerable:!1,configurable:!0}}),Object.defineProperties(i.prototype,{Q7a:{get:function(){return this.MOa},enumerable:!1,configurable:!0}}),i.prototype.resolve=function(t){this.MOa=!0,this.gpb(t)},e.EQ=i},function(t,e){_esm(e),e.XTa=void 0,e.XTa=function(t){return JSON.parse(JSON.stringify(t))}},function(t,e,i){var f;_esm(e),e.szb=void 0,f=i(2),e.szb=function(t,e,i){return void 0===i&&(i={}),function t(e,i,n){var r,a,o;if(e===i||!n.$u&&e==i)return!0;if(typeof e!=typeof i)return!1;if(e&&"object"==typeof e){for(var s in e)if(!t(e[s],i[s],n))return!1;if(!n.uub){a=Object.keys(e),o=Object.keys(i).filter(function(t){return a.indexOf(t)<0});try{for(var u=f.__values(o),c=u.next();!c.done;c=u.next())if(!t(e[s=c.value],i[s],n))return!1}catch(t){var h={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(h)throw h.error}}}return!0}return!1}(t,e,i=f.__assign({$u:!1,uub:!1},i))}},function(t,e){function i(){this.count=0,this.max=this.min=this.Ga=NaN}_esm(e),e.l1=void 0,Object.defineProperties(i.prototype,{ls:{get:function(){return this.max-this.min},enumerable:!1,configurable:!0}}),i.prototype.push=function(t){this.count++,1===this.count?this.Ga=this.min=this.max=t:(this.min=Math.min(t,this.min),this.max=Math.max(t,this.max),this.Ga+=(t-this.Ga)/this.count)},i.prototype.toJSON=function(){return{min:this.min,max:this.max,average:this.Ga}},e.l1=i},function(t,e,i){var r;function n(t){this.bP=new Uint16Array(t.length);for(var e=0;e<t.length;++e)this.bP[e]=t.charCodeAt(e)}r=new(i(6).default.Console)("ASEJS_XORCiper","media|asejs"),(n.prototype.constructor=n).prototype.encrypt=function(t){var e=this.bP.length;if(void 0!==this.bP){for(var i="",n=0;n<t.length;++n)i+=String.fromCharCode(this.bP[n%e]^t.charCodeAt(n));return encodeURIComponent(i)}r.warn("XORCiper.encrypt is called with undefined secret!")},n.prototype.decrypt=function(t){var e="",i=this.bP.length;t=decodeURIComponent(t);for(var n=0;n<t.length;n++)e+=String.fromCharCode(this.bP[n%i]^t.charCodeAt(n));return e},t.exports=n},function(t){function e(t,e){this.Ga=t,this.aj=e}e.prototype.Gta=function(t){var e,i,n,r,a=this.Ga,o=Math.sqrt(2*this.aj);if(2<=(t*=2))t=-100;else if(t<=0)t=100;else{e=t<1?t:2-t,i=-.70711*((2.30753+.27061*(i=Math.sqrt(-2*Math.log(e/2))))/(1+i*(.99229+.04481*i))-i);for(var s=0;s<2;s++)n=(r=1/(1+(n=Math.abs(i))/2))*Math.exp(-n*n-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806))))),i+=(n=(0<=i?n:2-n)-e)/(1.1283791670955126*Math.exp(-i*i)-i*n);t=t<1?i:-i}return a-o*t},t.exports=e},function(t,e,i){var n,r,a,o;function s(t,e,i){n.call(this,t,e,i)}function u(t,e){r.call(this,new s(t,e,!1))}n=i(757),r=i(758),a=i(115).yEb,o=i(115).MHb,(s.prototype=Object.create(n.prototype)).Ga=function(){return Math.floor(8*a(this.Od)/this.Hd)},s.prototype.aj=function(){return Math.floor(64*o(this.Od)/(this.Hd*this.Hd))},s.prototype.get=function(){return{Ga:this.Ga(),aj:this.aj(),i9b:this.Od.length}},s.prototype.toString=function(){return"bsw("+this.wL+","+this.Hd+","+this.bk+")"},(u.prototype=Object.create(r.prototype)).setInterval=function(t){this.KK.setInterval(t)},t.exports=u},function(t){function e(t,e,i){this.wL=t,this.bk=Math.floor((t+e-1)/e),this.Hd=e,this.Oob=i,this.reset()}e.prototype.shift=function(){this.Od.shift(),this.bi.shift()},e.prototype.update=function(t,e){this.Od[t]+=e},e.prototype.push=function(t){this.Od.push(0),this.bi.push(t||0),this.tb+=this.Hd},e.prototype.add=function(t,e,i,n){var r,a;if(null===this.tb)for(r=Math.max(Math.floor((i-e+this.Hd-1)/this.Hd),1),this.tb=e;this.Od.length<r;)this.push(n);for(;this.tb<i;)if(this.push(n),this.Oob)for(;1<this.Od.length&&i+n-(this.tb-this.Hd*this.Od.length+this.bi[0])>this.wL;)this.shift();else this.Od.length>this.bk&&this.shift();if(e>this.tb-this.Hd)this.update(this.Od.length-1,t);else if(e==i)0<=(n=this.Od.length-Math.max(Math.ceil((this.tb-i)/this.Hd),1))&&this.update(n,t);else for(n=1;n<=this.Od.length;++n)if(a=(r=this.tb-n*this.Hd)+this.Hd,!(i<r)){if(a<e)break;this.update(this.Od.length-n,Math.round(t*(Math.min(a,i)-Math.max(r,e))/(i-e)))}for(;this.Od.length>this.bk;)this.shift()},e.prototype.reset=function(){this.Od=[],this.bi=[],this.tb=null},e.prototype.setInterval=function(t){this.bk=Math.floor((t+this.Hd-1)/this.Hd)},t.exports=e},function(t){function e(t){this.KK=t,this.Ne=0,this.qL=null}e.prototype.add=function(t,e,i){null!==this.qL&&e>this.qL&&(this.Ne+=e-this.qL,this.qL=null),this.KK.add(t,e-this.Ne,i-this.Ne,this.Ne)},e.prototype.stop=function(t){null===this.qL&&(this.qL=t)},e.prototype.Ita=function(t,e){return this.KK.Ita(t,e)},e.prototype.get=function(){return this.KK.get()},e.prototype.reset=function(){this.KK.reset()},e.prototype.toString=function(){return this.KK.toString()},t.exports=e},function(t,e,i){var o,s,u,c,h,f,l,p,d,b;function n(t){this.Mlb=t}e=i(362),o=e.ffb,s=e.dfb,u=i(221).efb,c=i(221).Bkb,h=i(363),f=i(364),l=i(365).eLa,p=i(760),d=i(761),b=i(171),(n.prototype.constructor=n).prototype.create=function(t,e){var i,n=this.Mlb[t],r=e[t],a={};switch(n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),r&&Object.keys(r).forEach(function(t){a[t]=r[t]}),a.type){case"slidingwindow":i=new u(a.mw);break;case"discontiguous-ewma":i=new s(a.mw);break;case"wssl":i=new c(a.mw,a.max_n);break;case"iqr":i=new h(a.mx,a.mn,a.bw,a.iv);break;case"tdigest":i=new f(a);break;case"discrete-ewma":i=new o(a.hl);break;case"tdigest-history":i=new l(a);break;case"iqr-history":i=new p(a);break;case"avtp":i=new b;break;case"entropy":i=new d(a)}return i&&(i.type=a.type),i},t.exports=n},function(t,e,i){var n;function r(){this.Yj=void 0,this.aC=0}n=i(10),r.prototype.getState=function(){return 0!==this.aC&&this.Yj?{p25:this.Yj.Jl,p50:this.Yj.uk,p75:this.Yj.Kl,c:this.aC}:null},r.prototype.Ve=function(t){if(!(!n.Bb(t)&&n.has(t,"p25")&&n.has(t,"p50")&&n.has(t,"p75")&&n.has(t,"c")&&n.isFinite(t.p25)&&n.isFinite(t.p50)&&n.isFinite(t.p75)&&n.isFinite(t.c)))return this.Yj=void 0,this.aC=0,!1;this.Yj={Jl:t.p25,uk:t.p50,Kl:t.p75},this.aC=t.c},r.prototype.get=function(){return{A9:this.Yj,pva:this.aC}},r.prototype.set=function(t,e){this.Yj=t,this.aC=e},r.prototype.reset=function(){this.Yj=void 0,this.aC=0},r.prototype.toString=function(){return"IQRHist("+this.Yj+","+this.aC+")"},t.exports=r},function(t,e,i){var c;function n(t){var e=t.sw,i=t.mw;this.vL=e,this.ofa={uhd:t.uhdl,hd:t.hdl},this.bk=Math.max(Math.ceil(+e/i),1),this.rnb=t.mins||1,c.call(this,e,i),this.reset()}c=i(143),new(i(6).default.Console)("ASEJS_NETWORK_ENTROPY","media|asejs"),(n.prototype=Object.create(c.prototype)).flush=function(){this.Od.map(function(t,e){this.PPa(t,this.Nma(e))},this)},n.prototype.utb=function(){var t,e,i,n,r,a,o,s=this.ofa;for(t in s)if(s.hasOwnProperty(t)){e=s[t],i=this.nha[t],n=this.mha[t],i.first&&(r=i.first,void 0!==(a=i.lI)&&(n[r][a]+=1),i.first=void 0),i=[],r=0,e=a=e.length+1;for(var u=0;u<a;u++){for(var c=0,h=0;h<e;h++)c+=n[h][u];r+=c,i.push(c)}if(c=-1,r>this.rnb){for(u=c=0;u<a;u++)if(0<i[u])for(h=0;h<e;h++)0<(o=n[h][u])&&(c-=o*Math.log(+o/i[u]));c/=r*Math.log(2)}this.Nfa[t]=c}return this.Nfa},n.prototype.PPa=function(t,e){for(var i,n,r=this.bk,a=this.ofa;this.R1.length>=r;)this.R1.shift();for(;this.S1.length>=r;)this.S1.shift();if(this.R1.push(t),this.S1.push(e),t=this.R1.reduce(function(t,e){return t+e},0),0<(e=this.S1.reduce(function(t,e){return t+e},0)))for(var o in t=8*t/e,a)a.hasOwnProperty(o)&&(e=this.nha[o],r=this.mha[o],i=this.mUb(t,a[o]),void 0!==(n=e.lI)?r[i][n]+=1:e.first=i,e.lI=i)},n.prototype.mUb=function(t,e){for(var i=0;i<e.length&&t>e[i];)i+=1;return i},n.prototype.shift=function(){this.PPa(this.Od[0],this.Nma(0)),c.prototype.shift.call(this)},n.prototype.reset=function(){var t,e,i,n,r,a,o;for(e in this.nha={},this.R1=[],this.S1=[],this.mha={},this.Nfa={},t=this.ofa)if(t.hasOwnProperty(e)){i=this.mha,n=e,o=Array(void 0),a=r=t[e].length+1;for(var s=0;s<a;s++){o[s]=Array(r);for(var u=0;u<r;u++)o[s][u]=0}i[n]=o,this.nha[e]={first:void 0,lI:void 0},this.Nfa[e]=0}c.prototype.reset.call(this)},t.exports=n},function(t,e,i){var n,r;function a(t){this.I=t,this.MS()}n=i(10),new(r=i(6).default).Console("ASEJS_NETWORK_HISTORY","media|asejs"),a.prototype.save=function(){var t=this.getState();r.storage.set("nh",t)},a.prototype.jZb=function(){this.WF||(this.WF=!0,this.ny=r.time.ea())},a.prototype.qZb=function(){var t;this.WF&&(t=r.time.ea(),this.sy+=t-this.ny,this.ny=t,this.WF=!1,this.LS=null)},a.prototype.U_a=function(t,e){this.WF&&(e>this.ny&&(this.sy+=e-this.ny,this.ny=e),null===this.LS||t>this.LS)&&(t=e-t,this.XK.push([this.sy-t,t]),this.Jpb(),this.LS=e)},a.prototype.Jpb=function(){var e=this.sy-this.I.qPb;this.XK=this.XK.filter(function(t){return t[0]>e})},a.prototype.MS=function(){var t=r.storage.get("nh");this.eha(t)||(this.ny=r.time.ea(),this.sy=0,this.WF=!1,this.LS=null,this.XK=[])},a.prototype.eha=function(t){return!!(t&&n.has(t,"t")&&n.has(t,"s")&&n.has(t,"i")&&n.Ba(t.t)&&n.Ba(t.s)&&n.isArray(t.i))&&(this.ny=r.time.osa(1e3*t.t),this.sy=1e3*t.s,this.WF=!1,this.XK=t.i.map(function(t){return[1e3*t[0],t[1]]}),!(this.LS=null))},a.prototype.getState=function(){return this.WF?{t:r.time.now()/1e3|0,s:(this.sy+(r.time.ea()-this.ny))/1e3|0,i:this.XK.map(function(t){return[t[0]/1e3|0,t[1]]})}:{t:r.time.Rra(this.ny)/1e3|0,s:this.sy/1e3|0,i:this.XK.map(function(t){return[t[0]/1e3|0,t[1]]})}},t.exports=a},function(t,e,i){var n;_esm(e),e.hCa=void 0,t=i(2),n=i(764),new(t.__importDefault(i(6)).default.Console)("ASEJS_ENDPOINT_ACTIVITY","media|asejs"),i=function(){for(var t=2;7!==t;)switch(t){case 8:return e;case 2:e.prototype.reset=function(){for(var t=2;1!==t;)2===t&&(this.lE=new n.mAa,t=1)},e.prototype.SO=function(t,e){for(var i=2;1!==i;)2===i&&(e.ki&&(this.$oa?this.lE.start(t,e.ki):1===e.type&&(this.kz[e.ki]?this.kz[e.ki].UZ+=1:this.kz[e.ki]={ki:e.ki,UZ:1,n5:!1},this.Lab(t))),i=1)},e.prototype.rY=function(t,e){for(var i,n=2;9!==n;)switch(n){case 2:n=e.ki?1:9;break;case 4:i=this.kz[e.ki],1===e.type&&i&&(--i.UZ,0===i.UZ&&(i.n5&&this.lE.stop(t,e.ki),i.n5=!1,delete this.kz[e.ki]),this.Lab(t)),n=9;break;case 1:n=this.$oa?5:4;break;case 5:this.lE.stop(t,e.ki),n=9}},e.prototype.Wv=function(t,e,i,n){for(var r=2;1!==r;)2===r&&(n.ki&&(this.$oa||this.vT===n.ki)&&this.lE.add(t,e,i,n.ki),r=1)},e.prototype.Zt=function(){return this.lE.get()},e.prototype.Lab=function(t){for(var e,i,n=2;5!==n;)2===n&&(e=Object.keys(this.kz),i=this.kz[e[0]],1===e.length&&!1===i.n5?(this.lE.start(t,i.ki),this.vT=i.ki):1<e.length&&this.vT&&(e=this.kz[this.vT],this.lE.stop(t,this.vT),e.n5=!1,this.vT=void 0),n=5)},t=8}function e(t){for(var e=2;4!==e;)2===e&&(this.$oa=t,this.kz={},e=4)}}(),e.hCa=i},function(t,e,i){var o;function n(){for(var t=2;5!==t;)2===t&&(this.v2={},t=5)}_esm(e),e.mAa=void 0,o=i(2).__importDefault(i(171)),n.prototype.add=function(t,e,i,n){for(var r,a=2;4!==a;)2===a&&(void 0===(r=this.v2)[n]&&(r[n]=new o.default),r[n].add(t,e,i),a=4)},n.prototype.start=function(t,e){for(var i,n=2;4!==n;)2===n&&(void 0===(i=this.v2)[e]&&(i[e]=new o.default),i[e].start(t),n=4)},n.prototype.stop=function(t,e){for(var i,n=2;5!==n;)2===n&&(void 0!==(i=this.v2)[e]&&i[e].stop(t),n=5)},n.prototype.get=function(){for(var t,e,i,n,r,a,o=2;8!==o;)switch(o){case 5:(e=i[t=n[a]].get())&&r.push({cdnid:t,avtp:e.Ga,tm:e.GC}),o=3;break;case 2:i=this.v2,n=Object.keys(i),r=[],a=0,o=1;break;case 1:o=a<n.length?5:9;break;case 3:a++,o=1;break;case 9:return r}},e.mAa=n},function(t,e,i){var n;function r(t){for(var e=2;7!==e;)switch(e){case 3:this.t9=t.t9,this.Rsa=[new n.default,new n.default],this.R4a=new n.default,e=7;break;case 2:this.uY=[0,0],this.bh=[0,0],this.yX=[0,0],e=3}}_esm(e),e.nHa=void 0,n=i(2).__importDefault(i(171)),r.prototype.reset=function(){for(var t=2;4!==t;)switch(t){case 2:this.uY=[0,0],this.bh=[0,0],t=5;break;case 7:this.yX=[7,3],t=7;break;case 5:this.yX=[0,0],t=4}},r.prototype.Wv=function(t,e,i,n){for(var r,a=2;8!==a;)switch(a){case 9:this.yX[n.type]+=t,a=8;break;case 2:this.bh[n.type]+=t,a=5;break;case 5:a=null!==(r=n.vI)&&void 0!==r&&r.v7()?4:3;break;case 4:this.uY[n.type]+=t,this.R4a.add(t,e,i),this.Rsa[n.type].add(t,e,i),a=3;break;case 3:a=null!==(r=n.vI)&&void 0!==r&&r.m2a(t,e,i,this.t9)?9:8}},r.prototype.i6=function(){return{bytesRequestedPacingVideo:this.uY[1],bytesRequestedPacingAudio:this.uY[0],estimatedBytesPacedVideo:this.yX[1],estimatedBytesPacedAudio:this.yX[0],bytestotalVideo:this.bh[1],bytestotalAudio:this.bh[0],pacedAvtpVideo:this.Rsa[1].get().Ga,pacedAvtpAudio:this.Rsa[0].get().Ga,pacedAvtp:this.R4a.get().Ga}},e.nHa=r},function(t,e,i){var n;_esm(e),e.mEa=void 0,n=i(2).__importDefault(i(171)),t=function(){for(var t=2;9!==t;)switch(t){case 2:e.prototype.reset=function(){for(var t=2;3!==t;)2===t&&(this.yZ=[0,0],this.Y9=!1,this.pH=new n.default,this.hO=this.jO=0,t=3)},e.prototype.Wv=function(t,e,i){for(var n=2;1!==n;)2===n&&(this.Y9||(this.pH.add(t,e,i),this.jO++,1==i-e&&this.hO++),n=1)},t=5;break;case 5:return e.prototype.LJb=function(t){for(var e=2;1!==e;)2===e&&(this.Y9||(++this.yZ[t],this.yZ[1]>=this.UNb&&(this.Y9=!0)),e=1)},e.prototype.Z5=function(){return{pH:this.pH.get().Ga,GC:this.pH.get().GC,H_a:this.yZ[0],I_a:this.yZ[1],jO:this.jO,hO:this.hO}},e}function e(t){for(var e=2;8!==e;)switch(e){case 2:this.yZ=[0,0],this.pH=new n.default,e=5;break;case 5:this.Y9=!1,this.hO=this.jO=0,e=3;break;case 3:this.UNb=t||3,e=8}}}(),e.mEa=t},function(t,e,a){var i,f,l,c,p,n,h,d,o,b,m,r,s,g;_esm(e),e.HEa=void 0,i=a(2),f=i.__importStar(a(10)),t=a(17),l=i.__importDefault(a(28)),c=i.__importDefault(a(768)),p=i.__importDefault(a(6)),n=a(168),h=a(218),i.__importDefault(a(220)),d=i.__importDefault(a(769)),a(366),o=a(5),b=a(772),m=a(874),r=new p.default.Console("ASEJS","media|asejs"),s=r.trace.bind(r),g=r.warn.bind(r),t=function(r){for(var t=2;26!==t;)switch(t){case 6:Object.defineProperties(e.prototype,{Kh:{get:function(){return this.H1.Kh},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Soa:{get:function(){return this.wob},enumerable:!1,configurable:!0}}),t=13;break;case 8:Object.defineProperties(e.prototype,{dE:{get:function(){return this.VOa},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Gf:{get:function(){return this.Kv},enumerable:!1,configurable:!0}}),t=6;break;case 2:i.__extends(e,r),Object.defineProperties(e.prototype,{Qb:{get:function(){return this.H1.Qb},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{In:{get:function(){return this.H1.In},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Xu:{get:function(){return this.bha},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{OA:{get:function(){return this.F2},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Upa:{get:function(){return!f.ia(this.YOa)},enumerable:!1,configurable:!0}}),t=8;break;case 10:e.prototype.BW=function(t,e){return!(!this.Kv||!(t=this.Kv.BW(t,e)))&&t},e.prototype.Sob=function(t){for(var e,i=2;4!==i;)2===i&&(this.Qb.lP(null),e=this.RF.indexOf(t),f.ia(e)?g("can't find session in array, movieId:",t.Ge.P.J):(this.RF.splice(e,1),0===this.RF.length&&this.In.qZb(),this.In.save(),this.Kh.save()),i=4)},e.prototype.G5=function(t,e,i){return n.pYa(t,e,i)},e.prototype.K3=function(){for(var t,e=2;5!==e;)2===e&&(null!==(t=this.Kv)&&void 0!==t&&t.flush(),e=5)},t=17;break;case 17:return e.prototype.dja=function(){for(var t,e=2;5!==e;)2===e&&(null!==(t=this.Kv)&&void 0!==t&&t.tWa(),e=5)},e.prototype.Ly=function(){for(var t,e=2;5!==e;)2===e&&(null!==(t=this.Kv)&&void 0!==t&&t.Yzb(),e=5)},e.prototype.Nb=function(){for(var t=2;6!==t;)switch(t){case 7:h.GJ.reset(),t=6;break;case 1:this.jga=!1,delete this.H1,t=4;break;case 2:o.assert(0===this.RF.length,"Attempted to destruct Manager before all Sessions removed"),t=1;break;case 4:delete this.bha,delete this.mE,this.Ly(),delete this.Kv,t=7}},e;case 13:e.prototype.xb=function(t,e,i,n,r,a){for(var o,s,u=2;11!==u;)switch(u){case 5:0<s.ru&&(!f.ia(t)&&t>s.ru&&(t=s.ru),e>s.ru&&(e=s.ru)),f.ia(t)&&(this.YOa=e),this.F2=n,this.VOa=r,u=8;break;case 2:s=(o=this).config,h.GJ.reset(),u=5;break;case 14:u=s.obb||s.Yxa?13:12;break;case 8:c.default(s),this.H1=h.GJ.DYa(s,this.mE),this.bha=new d.default(s),u=14;break;case 13:t=function(t){for(var e=2;1!==e;)switch(e){case 4:o.emit(t.type,t),e=2;break;case 2:o.emit(t.type,t),e=1}},(e=new m.pDa(this,s,i,a)).addListener("prebuffstats",t),e.addListener("discardedBytes",t),e.addListener("flushedBytes",t),e.addListener("cacheEvict",t),(s.aya||s.$xa)&&e.addListener("mediacache",function(t){for(var e=2;1!==e;)switch(e){case 4:o.emit("",t),e=6;break;case 2:o.emit("mediacache",t),e=1}}),this.Kv=e,u=12;break;case 12:this.jga=!0,u=11}},e.prototype.OY=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.YOa=t,this.F2=e||0,this.VOa=i||0,n=4)},e.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){for(var h=2;4!==h;)switch(h){case 9:h=this.jga?6:7;break;case 1:return s=s||this.config,this.Qb.reset(),this.In.jZb(),this.bha.reset(),void 0===a&&(a=this.G5(t,e)),f.ia(this.F2)&&(this.F2=p.default.Io()[l.default.Ta.Mb]<=s.OOb?0:s.XO),t=new b.tKa(this,t,c,e,i,n,r,a,o,s,u),this.RF.push(t),t;case 7:g(""),h=1;break;case 2:h=this.jga?1:5;break;case 5:g("open: streamingManager not initted"),h=4}},t=10}function e(t,e){for(var i,n=2;13!==n;)switch(n){case 2:(i=r.call(this)||this).config=t,n=5;break;case 4:t=a(404),s("nf-ase version:",t,"DEBUG:",!1),i.jga=!1,n=8;break;case 8:return i.wob=!1,i.RF=[],i;case 5:i.mE=e,n=4}}}(t.EventEmitter),e.HEa=t},function(t,e,i){var n,r,a,o;n=i(5).assert,i(124),r=i(6).default,a=r.$q,o=r.Khb,t.exports=function(){var s,e,u,t,i;new r.Console("ASEJSMONKEY","media|asejs");r.$q.pc||(s=function(t){this.jnb=t},e=o.prototype.appendBuffer,r.MediaSource.pc||(r.MediaSource.pc={}),"undefined"!=typeof nrdp&&nrdp.i3&&(t=r.MediaSource.pc,!(i=nrdp.gk.scc.match(/android-(\d*)/))||23<i[1]?t.Xwa=!1:(i=nrdp.gk.z7b.Ct.platform.platformVersion.match(/(\d*)\.(\d*).(\d*)/),t.Xwa=!!i&&(6<i[1]||6==i[1]&&1<i[2]||6==i[1]&&1==i[2]&&1<=i[3])),t.YZb=!1,r.MediaSource.pc.sSa=!1,r.MediaSource.pc.w3a=!1),r.$q.pc={wY:{ncb:!0,SR:!0,Whb:!0}},Object.defineProperty(a.prototype,"_response",{get:function(){return this.Bpb||this.Klb},set:function(t){this.Klb=t}}),u=a.prototype.open,a.prototype.open=function(t,e,i,n,r,a,o){return 1===i&&(this.Bpb=new s(this)),u.call(this,t,e,i,n,r,a,o)},a.prototype.iY=function(){this.lL=void 0},o.prototype.appendBuffer=function(t){return t instanceof ArrayBuffer?e.call(this,t):t instanceof s?this.j3(t.jnb):void n(!1)})}},function(t,e,i){var n,r;function a(){this.ky=this.vS=this.Y1=this.l2=this.U1=null}function o(t){this.I=t,this.cC=[],this.kr=new a,this.MS()}n=i(10),i(28),i(9),new(r=i(6).default).Console("ASEJS_SESSION_HISTORY","media|asejs"),a.prototype.Ve=function(t){var e=!1;return t&&n.has(t,"ens")&&n.has(t,"lns")&&n.has(t,"fns")&&n.has(t,"d")&&n.has(t,"t")&&(this.U1=t.ens,this.l2=t.lns,this.Y1=t.fns,this.vS=t.d,this.ky=t.t,e=!0),e},a.prototype.getState=function(){var t;return n.Bb(this.U1)||n.Bb(this.l2)||n.Bb(this.Y1)||n.Bb(this.vS)||n.Bb(this.ky)?null:((t={d:this.vS,t:this.ky}).ens=this.U1,t.lns=this.l2,t.fns=this.Y1,t)},a.prototype.get=function(){var t,e=this.getState();return e&&(t=new Date(this.ky),e.dateint=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate(),e.hour=t.getHours()),e},o.prototype.MS=function(){var t=r.storage.get("sth");t&&this.Ve(t)},o.prototype.Ve=function(t){var i=null,e=this.I;return t.forEach(function(t){var e=new a;e.Ve(t)?(i=!0,this.cC.push(e)):n.Bb(i)&&(i=!1)},this),this.cC=this.cC.filter(function(t){return t.vS>=e.E8}),this.cC.sort(function(t,e){return t.ky-e.ky}),!!n.Bb(i)||i},o.prototype.bga=function(){var e=[];return this.cC.forEach(function(t){e.push(t.getState())},this),e},o.prototype.save=function(){var t=this.bga(),e=this.I,i=this.kr.getState();i&&i.d>=e.E8&&(t.push(i),this.cC.push(this.kr)),t.length>e.f8&&(t=t.slice(t.length-e.f8,t.length)),this.kr=new a,t&&r.storage.set("sth",t)},o.prototype.reset=function(){this.kr=new a},o.prototype.aFb=function(){return this.kr.get()},o.prototype.kHb=function(){return this.cC.length+1},o.prototype.rqb=function(t){this.kr.U1=t,this.kr.ky=r.time.ea()},o.prototype.Bqb=function(t){this.kr.l2=t,this.kr.ky=r.time.ea()},o.prototype.vqb=function(t,e){this.kr.Y1=t,this.kr.ky=r.time.ea(),this.kr.vS=e},t.exports=o},function(t,e){function i(t,e,i){this.Fpb=e,this.flb=i,this.H=t}_esm(e),e.nFa=void 0,i.prototype.Ita=function(t){return t=this.cKb(t,this.Fpb)+this.flb,this.Sga=isNaN(t)?NaN:this.mwa(t)},i.prototype.Rub=function(t){return!isNaN(this.Sga)&&this.Sga>t?1:0},i.prototype.cKb=function(t,e){var i=0;if(t.length!==e.length)i=NaN;else for(var n=0;n<t.length;n++)i+=t[n]*e[n];return i},i.prototype.mwa=function(t){return 1/(1+Math.exp(-t))},e.nFa=i},function(t,e){function i(t){this.Yj={},this.zga=t,this.gg=[],this.ur=!1,this.SF=void 0}_esm(e),e.JR=void 0,i.prototype.a3=function(t){this.gg.length===this.zga&&this.gg.shift(),Array.isArray(t)?this.gg=this.gg.concat(t):this.gg.push(t),this.ur=!0},i.prototype.fN=function(){return this.gg.length},i.prototype.fja=function(){var t=this.gg;return 0<t.length?t.reduce(function(t,e){return t+e},0)/this.gg.length:void 0},i.prototype.O3=function(){var t=this.gg,e=this.fja();if(0<t.length&&void 0!==e)return t=t.reduce(function(t,e){return t+e*e},0)/t.length,Math.sqrt(t-e*e)},i.prototype.At=function(t){var e,i,n;return!this.ur&&void 0!==this.SF||(this.SF=this.gg.slice(0).sort(function(t,e){return t-e}),this.ur=!1),void 0===this.Yj[t]&&(e=this.SF,i=Math.floor(t/100*(e.length-1)+1)-1,n=(t/100*(e.length-1)+1)%1,this.Yj[t]=i==e.length-1?e[i]:e[i]+n*(e[1+i]-e[i])),this.Yj[t]},e.JR=i},function(t,e,i){var v,d,a,y,n,b,w,_,f,E,k,S,l,T,r,A,O,I,x,P,p,m,h,g,R,N,j,C,L,M,D;_esm(e),e.tKa=void 0,t=i(2),v=i(17),d=t.__importStar(i(10)),a=i(142),y=i(773),n=i(168),b=i(16),w=i(214),_=i(235),f=i(236),E=i(819),k=i(820),S=t.__importDefault(i(6)),l=S.default.MediaSource,T=i(9),r=i(5),A=i(170),O=i(384),I=i(822),x=i(823),P=i(385),t=i(42),p=i(824),m=i(825),h=i(386),g=i(857),R=i(396),N=i(864),j=i(400),C=i(870),L=i(871),M=i(872),D=i(873),i=function(){for(var t=2;91!==t;)switch(t){case 27:e.prototype.$M=function(){return this.Jd.length},e.prototype.wpa=function(t,e){for(var i=2;9!==i;)switch(i){case 5:return t=this.Jd[t],e=this.Jd[e],t.P.sf.Vg&&e.P.sf.LW||e.P.sf.Vg&&t.P.sf.LW;case 2:i=t===e?1:5;break;case 1:return!0}},e.prototype.M5=function(t){for(var e=2;5!==e;)switch(e){case 2:e=(t=this.La.si.children[t])?1:5;break;case 1:return{id:t.O.id,Fe:t.Fe,zd:t.wta,me:t.me,fd:t.z$,Lc:t.Lc}}},e.prototype.Ko=function(){var t;return{id:(t=this.La.si).O.id,Fe:t.Fe,zd:t.wta,me:t.me,fd:t.z$,Lc:t.Lc}},e.prototype.QP=function(t,e){return this.La.QP(t,e)},e.prototype.open=function(){for(var r,a,e,t,i=2;33!==i;)switch(i){case 22:s.Fzb?setTimeout(function(){for(var t=2;1!==t;)switch(t){case 2:a.IMa(u).then(e),t=1;break;case 4:a.IMa(u).then(e),t=8}},0):this.IMa(u).then(function(){for(var t=2;1!==t;)2===t&&(setTimeout(e,0),t=1)}),o={type:"logdata",target:"startplay",fields:{audiogapconfig:s.XN,audiogapdpi:this.eg.pc&&this.eg.pc.XN,aseApiVersion:this.dG}},this.emit(o.type,o),i=33;break;case 14:var n=this.IU.Clb(h,o);h.forEach(function(t,e){for(var i=2;1!==i;)2===i&&("headers"===t?a.FS=n[e]:a.zb.Kf[t].If=n[e],i=1)}),this.Cb.am("createMediaSourceStart"),r=new l(this.V.pG),i=10;break;case 2:a=this,i=1;break;case 4:var o,s=this.I,u=(o=this.Ge.P).J,c=[],h=["headers"];this.Pm&&(c.push(1),h.push(1)),this.yr&&(c.push(0),h.push(0)),this.IU.Kmb(),i=7;break;case 15:r.sourceBuffers.forEach(function(t){for(var e=2;13!==e;)switch(e){case 2:var i=t.mediaType,n=a.zb.Kf[i];t=new f.Jba(n.H,i,r,t,s,!1,a.V,void 0,a.qh.bind(a)),n=new g.CEa(t,i,a.La,a.I,n.H),t.addListener("headerAppended",a.xmb.bind(a)),t.addListener("requestAppended",a.Amb.bind(a)),e=9;break;case 9:t.addListener("error",function(t){for(var e=2;1!==e;)2===e&&(a.Ep(t.errorstr,void 0,"NFErr_MC_StreamingFailure"),e=1)}),t.addListener("logdata",function(t){for(var e=2;1!==e;)2===e&&(T.Va(a,t.type,t),e=1)}),s.ji&&t.addListener("managerdebugevent",function(t){for(var e=2;1!==e;)switch(e){case 4:T.Va(a,t.type,t),e=0;break;case 2:T.Va(a,t.type,t),e=1}}),a.Pg[i]=t,a.Pv[i]=n,e=13}}),this.ay=new p.JIa(this.Pv,this.nL.bind(this),this.V.Re.bind(this.V)),this.ns&&this.Cb.znb(),o=this.mYa(),this.Cb.iOa(o),e=function(){for(var t=2;5!==t;)2===t&&(a.Cb.Rnb(),a.en()?a.Sb("shutdown detected before startRequests"):a.ypb(),t=5)},i=22;break;case 18:this.eg=r,i=17;break;case 10:i=1===r.readyState?20:34;break;case 20:this.Cb.am("createMediaSourceEnd"),r.pc||(r.pc=l.pc),i=18;break;case 16:throw this.jn("Error:",r.error),r.error;case 17:i=r.b3(c)?15:16;break;case 1:i=!d.Ba(this.eC)||this.eC<0?5:4;break;case 34:this.jn("Error:",r.error),this.Ep("exception in init",void 0,"NFErr_MC_StreamingInitFailure"),i=33;break;case 7:t=s.wr,this.mc.Gf&&this.mc.Gf.Lp(t,this.Yl.sessionId),i=14;break;case 5:this.Ep("startPts must be a positive number, not "+this.eC,void 0,"NFErr_MC_StreamingInitFailure"),i=33}},Object.defineProperties(e.prototype,{dG:{get:function(){for(;;)return"1.0"},enumerable:!1,configurable:!0}}),e.prototype.Kna=function(){},e.prototype.flush=function(){for(var t=2;1!==t;)switch(t){case 2:this.Qi.flush(),t=1;break;case 4:this.Qi.flush(),t=3}},e.prototype.paused=function(){for(var t=2;1!==t;)2===t&&(this.V.paused(),t=1)},t=32;break;case 48:e.prototype.D6=function(){return this.V.Oo(this.Ge.P)},e.prototype.JMa=function(t){for(var e,i,n,r=2;11!==r;)switch(r){case 1:case 7:return!1;case 8:r=(t===this.dL+1&&i.sf.replace||e&&n)&&this.V.Oo(i)?6:7;break;case 2:r=t>=this.Jd.length?1:5;break;case 6:t=i.sh[0],e=i.sh[1],r=13;break;case 5:e=this.La.Wc.Rd(0),i=this.La.Wc.Rd(1),e=!e||e.Vh,n=!i||i.Vh,i=this.Jd[t].P,r=8;break;case 13:return e=!this.Pm||e&&e.stream.je,!(!(!this.yr||t&&t.stream.je)||!e)}},e.prototype.U2=function(){for(var t=2;1!==t;)2===t&&(this.T2(this.dL+1),t=1)},e.prototype.T2=function(t){for(var e,i=2;6!==i;)switch(i){case 2:i=this.JMa(t)?5:1;break;case 4:i=e.FCb||!e.P.sf.replace?3:9;break;case 5:e=this.Jd[t],i=4;break;case 3:case 1:return!1;case 9:return this.Epb(t),this.mg.Zj(),!0}},e.prototype.Epb=function(t){for(var i,n,e,r,a,o,s=2;20!==s;)switch(s){case 3:e.ji&&this.Cb.Bm("switchManifest manifestIndex: "+t+", streamingPts: "+a+", "+o),a=(e=this.Ge).P.sf.Vg,i=[],[1,0].forEach(function(t){for(var e=2;1!==e;)2===e&&(n.P.kc(t)&&(i[t]=n.jq(t)),e=1)}),a?this.La.FVb(e.P,n.P,i):r.d9a(n.P,i),s=13;break;case 2:n=this.Jd[t],e=this.I,a=(a=(r=this.La.Wc).eb(0))?a.Ic:void 0,s=5;break;case 5:o=(o=r.eb(1))?o.Ic:void 0,s=3;break;case 13:this.RNa(t),n.gsa(),this.Sn.Tfa(),s=10;break;case 10:this.mg.Zj(),s=20}},e.prototype.l4a=function(){for(var t,e=2;6!==e;)switch(e){case 1:e=r?5:7;break;case 2:r=(t=this.La.Wc).eb(0),e=1;break;case 8:this.mg.Zj(),e=6;break;case 5:var i=this.V.Re(),n=this.zb.Kf[r.mediaType],r=(t=this.La.Rt(i,t,0))?t.Pa:(this.Sb("onAudioTrackSwitchStarted but current playing request not found"),r.Pa);this.Eob(r),n.YP=!1,e=8;break;case 7:this.Sb("onAudioTrackSwitchStarted ignored, no audio pipeline"),e=6}},e.prototype.eaa=function(t){for(var e,i,n,r,a,o=2;35!==o;)switch(o){case 5:return this.Sb("switchTracks rejected, audio disabled"),!1;case 12:o=this.V.getState()===b.ma.Kc?11:19;break;case 4:o=this.zb.Ey?3:9;break;case 19:t=t.pn,a=this.Ge.P.getTrackById(t),o=17;break;case 7:e=this.zb.Kf[0],o=6;break;case 8:return this.Sb("switchTracks rejected, buffering"),!1;case 10:o=a<n.y8?20:19;break;case 20:return this.Sb("switchTracks rejected, bufferLevelMs",a,"<",n.y8),!1;case 13:i=this.La.Wc,o=12;break;case 9:o=this.V.pg()?8:7;break;case 25:return n.ji&&this.Cb.Bm("switchTracks current: "+r+" to: "+a.trackId),e.T8={trackId:t},n=i.eb(0),this.xpb(n),!0;case 2:n=this.I,o=1;break;case 15:r=this.Ge.jq(0).trackId,o=27;break;case 3:return this.Sb("switchTracks rejected, previous switch still in progress: "+JSON.stringify(this.zb.Ey)),!1;case 14:return this.Sb("switchTracks rejected, previous switch still waiting to start"),!1;case 6:o=e.YP?14:13;break;case 11:a=this.La.dw(i,1),o=10;break;case 16:return this.Sb("switchTracks can't find trackId:",t),!1;case 1:o=this.yr?4:5;break;case 26:return!1;case 17:o=a?15:16;break;case 27:o=r===a.trackId?26:25}},e.prototype.Lq=function(t,e){for(var i=2;1!==i;)2===i&&(this.zb.Lq(t,e),i=1)},e.prototype.Rt=function(t,e,i){return this.La.Rt(t,this.La.si,e,i)},e.prototype.Li=function(t){return this.Sn.Li(t)},t=59;break;case 104:e.prototype.STb=function(t,e,i){for(var n,r=2;6!==r;)switch(r){case 7:this.fT(0),r=6;break;case 2:a.Qm.kq(0),(t=this.Jd[t]).Jxa(e),r=4;break;case 4:r=t.P.H6?3:7;break;case 3:t.jq(0).$d.some(function(t){for(var e=2;4!==e;)switch(e){case 5:return!!n;case 1:e=n&&n.stream&&n.stream.U&&i<n.stream.U.Cj(0)?4:5;break;case 2:n=t.Xk(),e=1;break;case 9:n=t.Xk(),e=8;break;case 7:return-~n}}),r=8;break;case 8:n?(t.P.sh[0]=n,t.$X=!1,n.stream.je&&t.L3()):(t.P.sh[0]=void 0,t.$X=!1,t.P.UO([t.jq(0)],!0,0)),r=7}},e.prototype.Kob=function(t,e){for(var i,n=2;4!==n;)2===n&&(i=this.Pg[t.mediaType],t=this.La.WX(t.gb,t.mediaType,e,this.mc.OA||0,function(t){for(var e=2;1!==e;)switch(e){case 2:i.h$(t),e=1;break;case 4:i.h$(t),e=9}}),d.ia(t)||this.mg.Zj(),n=4)},e.prototype.xmb=function(t){for(var e,i,n,r=2;8!==r;)switch(r){case 2:e=t.mediaType,i=t.manifestIndex,n=t.streamId,t=this.La.Wc.eb(e),e=this.Jd[i].P.ww(e,n),r=4;break;case 4:this.rpb(t,e),this.I=this.WSa.Xkb(e.kh,this.I),this.Jd.forEach(function(t,e){for(var i,n=2;5!==n;)switch(n){case 2:i=t.P,n=1;break;case 1:i.H6||0===e||i.UO([t.jq(0),t.jq(1)]),n=5}}),r=8}},e.prototype.Amb=function(t){for(var e,i,n=2;8!==n;)switch(n){case 2:e=t.request,t=t.mediaType,i=e.Pa.gb,n=4;break;case 4:i.zNb(t),e.s5&&this.Cb.Gnb(e),e.uq&&this.Cb.Unb(t,e.P.Pb,i.O),n=8}},e.prototype.rpb=function(t,e){for(var i=2;1!==i;)2===i&&(this.zb.Jw[t.mediaType].AH={id:e.Oa,index:e.Lf,bitrate:e.bitrate,Ra:e.wb&&e.wb.confidence&&e.wb.Ra?e.wb.Ra.Ga:0,location:e.location},i=1)},e.prototype.f7=function(t){for(var e,i,n,r,a,o,s,u=2;11!==u;)switch(u){case 2:i={},n=this.Pg,r=this.La,u=1;break;case 13:t&&n&&(t=n[1],n=n[0],i.atoappend=null==t?void 0:t.G$(),i.vtoappend=null==n?void 0:n.G$()),u=12;break;case 8:i.abuflbytes=null!==(e=null==o?void 0:o.rn.fa)&&void 0!==e?e:0,i.vbuflmsec=r.dw(a,1),i.abuflmsec=r.dw(a,0),t&&(i.a=null==o?void 0:o.Pa.U.toJSON(),i.v=null==s?void 0:s.Pa.U.toJSON()),u=13;break;case 1:u=r.Wc.Eh?12:5;break;case 12:return i;case 5:o=(a=r.Wc).Rd(0),s=a.Rd(1),i.vspts=null!==(e=null==s?void 0:s.Ic)&&void 0!==e?e:0,i.aspts=null!==(e=null==o?void 0:o.Ic)&&void 0!==e?e:0,i.vbuflbytes=null!==(e=null==s?void 0:s.rn.fa)&&void 0!==e?e:0,u=8}},e.prototype.bZa=function(t){for(var e,i,n,r,a,o,s=2;8!==s;)switch(s){case 1:s=o?5:8;break;case 5:return e=this.zb.Jw[t],i=this.La.mG(a,t),e=e.AH?e.AH.bitrate:0,n=o.Pa.Wsa,r=this.La.Fe,{type:t,availableMediaBuffer:S.default.Io()[t]-i,completeBuffer:a.Gh(t),incompleteBuffer:n,playbackBitrate:o.F5a,streamingBitrate:e,streamingTime:o.Ic+r,usedMediaBuffer:i,toappend:o.G2b};case 2:o=(a=this.La.Wc).eb(t),s=1}},e.prototype.RVb=function(){for(var t,e=2;5!==e;)2===e&&(t={type:"requestGarbageCollection",time:S.default.time.ea()},T.Va(this,t.type,t),e=5)},e.prototype.Ep=function(t,e,i,n,r,a,o){for(var s=2;5!==s;)2===s&&(void 0===o&&(o=!1),this.L2||(d.ia(i)&&(i="NFErr_MC_StreamingFailure"),this.L2=!0,this.Cb.Ynb(i,t,n,r,a,void 0!==e?e:this.QX,o)),s=5)},e.prototype.tNa=function(){for(var t=2;5!==t;)2===t&&(this.Sb("Network failures reset!"),this.mg.Zj(),t=5)},t=94;break;case 59:e.prototype.c5=function(t,e){for(var i,n,r,a=2;6!==a;)switch(a){case 3:a=e?9:8;break;case 2:t=(i=this.zb).ama(t,e),n=this.yg.gua,a=4;break;case 4:t&&!t.DL&&n.Pla(t),a=3;break;case 9:i.ava(),a=6;break;case 8:e=n.MEb();try{for(r=2;1!==r;)2===r&&(this.Cb.Jnb(e),r=1)}catch(t){this.H.error("exception: ["+t.message+"] ["+t.ucc+"]")}a=6}},e.prototype.jja=function(t,e){return a000.N4L(3),r.assert(a000.j4L(e,0)),this.Jd[e].Mtb(t)},e.prototype.Dt=function(t,e){for(var i,n,r=2;7!==r;)switch(r){case 4:i=n.Fe,r=3;break;case 3:return d.Ba(i)||(i=this.Jd[t].Cw),a000.Z4L(0),a000.j4L(i,e);case 5:r=n?4:8;break;case 2:void 0===t&&(t=this.QX),n=this.La.cDb(e,t),r=5;break;case 8:0<(n=this.La.bma(t)).length&&(i=(n=n[0]).Fe),r=3}},e.prototype.cM=function(t,e){for(var i,n,r=2;7!==r;)switch(r){case 5:r=i?4:8;break;case 2:void 0===t&&(t=this.QX),i=this.La.bDb(e,t),r=5;break;case 4:n=i.Fe,r=3;break;case 3:d.Ba(n)||(n=this.Jd[t].Cw),r=9;break;case 9:return a000.N4L(1),a000.j4L(e,n);case 8:0<(i=this.La.bma(t)).length&&(n=(i=i[0]).Fe),r=3}},e.prototype.nL=function(){for(var t,e=2;4!==e;)switch(e){case 1:e=t||this.zb.Ey?5:4;break;case 8:t&&this.zb.Ey,e=8;break;case 2:t=this.V.pg(),e=1;break;case 5:t&&this.Cb.Ega(),this.nT(),this.V.Ve(b.ma.Kc),this.mg.Zj(),e=4}},e.prototype.fha=function(){for(var e,t,i=2;3!==i;)switch(i){case 2:t=(e=this).V.pg(),this.La.Wc.I$(t,function(t){return e.Pg[t]?e.Pg[t].G$():""}),i=5;break;case 5:this.EK&&(clearTimeout(this.EK),this.EK=void 0),this.ay.ENb(),i=3}},e.prototype.QOa=function(t){for(var e,i,n=2;7!==n;)switch(n){case 2:t.Vh=!0,n=1;break;case 8:try{for(e=2;1!==e;)2===e&&(this.c5(b.ma.gr,{Ha:t.Lc}),e=1)}catch(t){a000.N4L(1),this.Cb.Kn(a000.j4L("Hindsight: Error evaluating QoE at endOfStream: ",t))}n=7;break;case 1:t.Xq=!1,i=this.V.Re()||0,t.VL(i),this.zb.cy(),n=9;break;case 9:n=this.Jr&&1===t.mediaType?8:7}},e.prototype.Wob=function(){for(var t,e=2;5!==e;)2===e&&((t=(t=this.mc.Qb)&&t.get())&&t.avtp&&this.Xu.rqb({avtp:t.avtp.Ga}),e=5)},e.prototype.ypb=function(){for(var t,e,i,n=2;4!==n;)2===n&&(this.V.Ve(b.ma.zh),e=(t=this.La.Wc).Rd(0),i=t.Rd(1),this.Pm&&!this.WOa(i)?this.Sb("failed to start video pipeline"):this.yr&&!this.WOa(e)?this.Sb("failed to start audio pipeline"):(this.sOa=!0,this.Jd[0].P.H6=!0,e=this.zb.Kf[1],i=this.zb.Kf[0],(e&&0<e.Eu||i&&0<i.Eu)&&this.Cb.Hnb(String(t.P.J),i?i.Eu:0,e?e.Eu:0,i?i.MX:0,e?e.MX:0),this.V.v0a()?(this.H2(0),this.yr&&(t=this.Ge.R5(0),e=this.Ge.jq(0).trackId,this.Cb.Knb(t,e))):this.Sb("startup, playerState no longer STARTING:",this.V.getState())),n=4)},e.prototype.WOa=function(t){for(var e,i,n=2;14!==n;)switch(n){case 1:n=d.ia(i)?5:4;break;case 5:return this.en()||this.Ep("startPipeline failed",t.gb.P.Pb,"NFErr_MC_StreamingInitFailure"),!1;case 4:t=t.track.$d[i],n=3;break;case 3:n=t.Xk()?9:8;break;case 2:e=t.mediaType,i=this.zb.jHb(t),n=1;break;case 8:return i=this.Ge.P,t.P.lTa(t,{offset:0,IC:!i.sf.Vg&&!i.ii&&1===e,qw:!this.zb.Kf[e].vDb}),!0;case 9:return!0}},t=72;break;case 2:Object.defineProperties(e.prototype,{addEventListener:{get:function(){return this.addListener.bind(this)},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{removeEventListener:{get:function(){return this.removeListener.bind(this)},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{oOb:{get:function(){return this.eg.pc},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{mediaSourceId:{get:function(){return this.eg?this.eg.TY:void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{yr:{get:function(){return this.kc(0)},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Pm:{get:function(){return this.kc(1)},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{attributes:{get:function(){return this.kfa},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Xg:{get:function(){return this.Gi},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{QX:{get:function(){return 0<=this.j2?this.j2:0},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{Ge:{get:function(){return this.Jd[this.dL]},enumerable:!1,configurable:!0}}),t=13;break;case 87:e.prototype.cha=function(t,e){for(var i,n=2;9!==n;)switch(n){case 1:n=i.eb(t)?5:9;break;case 2:i=this.La.Wc,n=1;break;case 5:var r=this.zb.Kf[t],a=this.zb.RA[t];d.ia(r.xo)&&(r.xo=e,1===t&&this.yr&&(t=this.zb.Kf[0],d.ia(t.xo)&&(i=i.eb(0)).KI(e),this.emit("ptschanged",e))),d.ia(a.WT)&&(a.WT=e),n=9}},e.prototype.uZa=function(t){for(var e=2;1!==e;)2===e&&(this.Ah&&(this.Ah.CNb(t),this.VRa()),e=1)},e.prototype.y6=function(t){for(var e=2;1!==e;)2===e&&(this.Ah&&(this.Ah.BNb(t),this.VRa()),e=1)},e.prototype.VRa=function(){for(var t=2;4!==t;)switch(t){case 9:t=this.Ah?0:6;break;case 2:t=this.Ah?1:4;break;case 1:var e=this.I;this.Ah.$C()||(this.Ah=void 0,e.wr||this.Zx.lC||this.mT("allCompleted")),t=4}},e.prototype.nT=function(){for(var c,t,e,i,h,f,l,p,n=2;7!==n;)switch(n){case 2:t=(c=this).I,e=this.QX,i=this.Jd[e],h=this.La.Wc,f=this.V.Re()||0,l=this.Dt(e,f),p=t.Faa,this.mc.Gf&&void 0!==i.UH&&i.UH-f<=t.d3a&&this.mc.Gf.Lp(!0,this.Yl.sessionId),this.V.getState()===b.ma.Kc&&([1,0].forEach(function(t){for(var e,i,n,r,a,o,s,u=2;35!==u;)switch(u){case 6:(a=o.me-f)<p&&(p=a),e=c.zb.Jw[t],n=(i=o.P).Pb,a=o.Pa,u=11;break;case 20:r=0<(c.j2=n)?n-1:null,c.Cb.Mnb(i,f,o.Ou,null!==r?c.Jd[r].P.J:null,r),u=17;break;case 7:u=o?6:21;break;case 10:c.La.SPb(o,o.Ou),u=n>c.j2?20:16;break;case 4:a=s.Pa,s.VL(f),(o=c.La.Rt(f,h,t))&&!o.ef&&(o=c.Pg[t].OLb),u=7;break;case 24:d.ia(o)||o==s.F5a||(s.F5a=o),u=23;break;case 17:l=c.Dt(n,f),u=15;break;case 15:e.WLb=o.Ou,i=o.Oa,u=26;break;case 23:c.Kob(a,f),c.La.hUb(),u=35;break;case 1:s=h.eb(t),u=5;break;case 2:u=c.kc(t)?1:35;break;case 11:u=c.Pm&&1!==t?15:10;break;case 26:i!=e.lqa&&(e.lqa=i,t=c.Jd[n].P.ww(t,i),n=c.Dt(n,o.zd),c.Cb.Wnb(t,o.zd,n,t.P.Pb)),o=o.bitrate,u=24;break;case 21:s.Sb("Unable to find request presenting at playerPts:",f),u=23;break;case 16:c.cL&&o.Ou!=e.WLb&&c.Cb.aob(o.Ou),u=15;break;case 5:u=s?4:35}}),this.La.Is(f,l)),this.mg.Zj(),p=Math.max(p,1),this.gC&&clearTimeout(this.gC),n=8;break;case 8:this.gC=setTimeout(this.nT.bind(this),p),n=7}},e.prototype.I1=function(t){return this.mg.I1(t)},e.prototype.Zj=function(){return this.mg.Zj()},e.prototype.$F=function(t,e){for(var i,n,r=2;13!==r;)switch(r){case 1:r=n?5:14;break;case 5:i=t.mediaType,t.abort(),t.ed(),t.Gi&&t.Gi.clear(),n.h$(t),r=7;break;case 14:this.Sb("abortRequest with no requestManagaer:",t),r=13;break;case 7:this.Pg[i].h$(t),!0===e&&this.mg.Zj(),r=13;break;case 2:n=t.Pa,r=1}},e.prototype.xpb=function(t){for(var e,i,n=2;5!==n;)2===n&&(e=t.mediaType,i=this.zb.Kf[e],d.ia(i.T8)?t.Sb("no newAudioTrack set"):(this.Pg[e].pause(),i.YP=!0,t=this.Ge.jq(0),i=this.Ge.P.getTrackById(i.T8.trackId),this.Cb.Bnb(t,i)),n=5)},e.prototype.Eob=function(t){for(var e,i,n,r,a,o,s,u,c=2;27!==c;)switch(c){case 10:this.La.K8a(t,!0),c=20;break;case 18:this.STb(o,n,r),c=17;break;case 19:c=o<this.Jd.length?18:16;break;case 8:this.Ah.BVb(function(t){for(var e=2;5!==e;)switch(e){case 1:return a.$F(t,!1),!0;case 3:t.mediaType,e=4;break;case 2:e=0===t.mediaType?1:5;break;case 9:return a.$F(t,-6),6}}),this.Ah.$C()||(this.Ah=void 0,s.wr||this.Zx.lC||this.mT("audioSwitch")),c=7;break;case 20:o=this.dL,c=19;break;case 16:t.W6a(i,r),this.SI(0),c=27;break;case 14:this.IU.DOa(0,t.P),u.T8=void 0,this.yg.jP(null),this.Zga(0,h.QR.CWa,t),c=10;break;case 3:n=(i=(e=this.Ge).P.getTrackById(this.zb.Ey.trackId)).oE,r=this.V.Re()-t.Fe,c=9;break;case 7:o=this.mc.G5(e.P.oa,[n],0),this.kfa[0]=o[0],c=14;break;case 9:c=null!==(o=this.Ah)&&void 0!==o&&o.$C()?8:7;break;case 2:s=(a=this).I,t=t.gb,u=this.zb.Kf[0],this.zb.Ey=u.T8,c=3;break;case 17:++o,c=19}},t=104;break;case 13:Object.defineProperties(e.prototype,{Xu:{get:function(){return this.mc.Xu},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{ns:{get:function(){return this.$ob},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{DW:{get:function(){return this.cL},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{zO:{get:function(){return this.t2},enumerable:!1,configurable:!0}}),e.prototype.kc=function(t){return this.Dpb[t]},e.prototype.pV=function(){return S.default.time.ea()-this.qfa},e.prototype.mYa=function(){return(this.Jd||[]).reduce(function(i,t){var n=t.P;return w.zf.forEach(function(t){for(var e=2;1!==e;)2===e&&(n.Gw[t]>i[t]&&(i[t]=n.Gw[t]),e=1)}),i},[0,0])},e.prototype.QN=function(){var i=0;return d.forEach(this.Ge.P.oa.audio_tracks,function(t){for(var e=2;1!==e;)2===e&&(d.forEach(t.streams,function(t){for(var e=2;1!==e;)2===e&&(i=Math.max(i,t.bitrate),e=1)}),e=1)}),i},e.prototype.qh=function(t){return this.Jd[t]},e.prototype.OFb=function(){var t;return(t=this.Jd[0]).P.sf.Vg?this.Jd[1]:t},t=27;break;case 39:e.prototype.stop=function(){for(var t=2;1!==t;)switch(t){case 2:this.Qi.stop(),t=1;break;case 4:this.Qi.stop(),t=7}},e.prototype.ss=function(t,e){return this.Sn.ss(t,e)},e.prototype.seek=function(t,e){return this.Sn.seek(t,e)},e.prototype.Zn=function(o){for(var s,i,t,e=2;18!==e;)switch(e){case 3:this.Uga+=1,s=this.La.Wc,w.zf.forEach(function(t){var e,i,n;for(a=2;6!==a;)switch(a){case 5:a=c.ji?4:9;break;case 2:i=s.Rd(t),a=1;break;case 4:r=u.Pg[t],n=u.La.mG(s,t),a=3;break;case 3:var r="underflow: "+o+", mediaType: "+t+", completedMs: "+i.YL+", completedBytes: "+n+", partials: "+i.Pa.KD+", streamingPts: "+i.Ic+", completeStreamingPts: "+i.Tp+", fragments: "+JSON.stringify(i.Pa.U)+", toAppend: "+(r&&r.G$()),a=9;break;case 9:c.ji&&u.Cb.Bm(r),i.Gja(),a=7;break;case 1:a=i?5:6;break;case 7:null!==(e=i.ah)&&void 0!==e&&e.MVb(),a=6}}),this.Ge.P.sk(),this.emit("underflow"),this.H2(2),e=13;break;case 2:var u=this,c=this.I,n=this.Dt(this.QX,o);this.Sb("underflow: going to BUFFERING at player pts:",o,"contentPts:",n,"entry.manifestOffset:",this.Ge.Cw,"branchOffset:",this.La.Fe),i=c.gA,this.Pg.forEach(function(t){for(var e=2;1!==e;)2===e&&(i=Math.max(0,Math.min(i,t.sna-o)),e=1)}),e=3;break;case 11:try{for(t=2;1!==t;)2===t&&(this.c5(b.ma.xd),t=1)}catch(t){a000.N4L(1),this.Cb.Kn(a000.j4L("Hindsight: Error when evaluating QoE at Buffering: ",t))}e=10;break;case 13:this.mg.Zj(),e=12;break;case 10:n=(n=this.mc.Qb.get()).confidence?n.Ra.Ga:0,i>c.ICb&&n>c.HCb&&this.fha(),e=18;break;case 12:e=this.Jr?11:10}},e.prototype.Vn=function(t){return this.Sn.Vn(t)},e.prototype.Cr=function(t,e,i){return this.Sn.Cr(t,e,i)},e.prototype.RNa=function(t){for(var e,i=2;3!==i;)switch(i){case 5:this.Cb.Onb(t,e),this.Cb.iOa(e.P.Gw),i=3;break;case 2:this.dL=t,e=this.Jd[t],i=5}},e.prototype.AL=function(t,e){for(var i,o,s,r,n,a,u=2;35!==u;)switch(u){case 7:e.zO&&(this.t2=!0),n=this.Jd.length,e.replace&&1!==n?n=1:this.Ge.P.sf.Vg&&!e.replace&&1===n&&(this.Sb("addManifest in fastplay but not drm manifest, leaving space for it"),n=this.Jd[0].clone(),this.Jd.push(n),n=this.Jd.length),a=e.Z||0,u=12;break;case 9:u=!e.U$b&&(this.yr&&n.Xq||this.Pm&&a.Xq)?8:7;break;case 5:this.Sb("addManifest: pipelines already shutdown"),u=35;break;case 24:e=this.zb.Jw[0].AH,n=this.zb.Jw[1].AH,r.ji&&this.Cb.Bm("addManifest, currentPts: "+this.V.Re()+" playerState: "+this.V.getState()+" streamCount: ("+t.jq(0).$d.length+", "+t.jq(1).$d.length+") lastStreamAppended: ("+e+", "+n+")"),u=21;break;case 15:this.Jd[n]&&this.Jd[n].ed(),(this.Jd[n]=t).HRa(),e.replace||this.La.Lqb(o,a,i),u=24;break;case 19:var c=["audio_tracks","video_tracks"],h=this.mYa();e.replace&&c.forEach(function(t,n){for(var r,a,e=2;3!==e;)switch(e){case 5:r=s.Jd[0].P,Object.keys(a).forEach(function(t){for(var e,i=2;5!==i;)2===i&&((e=r.ww(n,t))&&e.je&&(a[t].h4(e),(t=o.Gw)[n]>h[n]&&(h[n]=t[n])),i=5)}),e=3;break;case 2:a=o.UC(n),e=1;break;case 8:a=o.UC(n),e=4;break;case 1:e=a?5:3}}),c.forEach(function(t,i){for(var n,e=2;5!==e;)2===e&&((n=o.UC(i))&&Object.keys(n).forEach(function(t){for(var e=2;1!==e;)2===e&&(n[t].Nab(S.default.Io()[i],o.Oz()?r.u2a:0),e=1)}),e=5)}),t.zT="boolean"!=typeof e.psb||e.psb,u=15;break;case 12:i=e.Ha,t=y.jda.create({Pb:n,oa:t,Wo:void 0,r8a:e.MP||[this.Ge.R5(0),this.Ge.R5(1)],Vg:!1,j0a:!!e.replace,ii:!!e.ii,Bd:w.s8(!!e.GT,!!e.sE),Z:a,Ha:i,Cb:this.Cb,Pr:this.tNa.bind(this),ac:this,config:this.I,H:this.H,mg:this.mg,Sn:this.Sn,Gf:this.mPa?this.mc.Gf:void 0,aD:this.aD}),u=10;break;case 8:this.Sb("addManifest ignored, pipelines already set EOS:",n.Xq,a.Xq),u=35;break;case 10:o=t.P,(e.Psb||this.BMa)&&this.zb.Lq(e.Psb||this.BMa,o.W),u=19;break;case 2:r=(s=this).I,u=1;break;case 1:u=this.en()?5:4;break;case 4:e=e||{},n=this.La.Wc.Rd(0),a=this.La.Wc.Rd(1),u=9;break;case 21:this.yr&&d.ia(e)||this.Pm&&d.ia(n)||(t.P.UO([t.jq(0),t.jq(1)]),this.U2()),u=35}},e.prototype.tT=function(t){return this.Sn.tT(t)},e.prototype.gz=function(t){for(var e,i,n,r,a,o=2;7!==o;)switch(o){case 5:d.ia(n)&&(n=!0),e=this.La.Wc.Rd(0),i=this.La.Wc.Rd(1),o=3;break;case 1:o=this.en()?7:5;break;case 2:a=this.I,o=1;break;case 3:a.ji&&this.Cb.Bm("drmReady at streaming pts: "+(e?e.Ic:null)+", "+(i?i.Ic:null)+" for movieId: "+t+" readyState: "+n),a000.Z4L(1),this.V.LY(a000.J4L(t,""),n),n&&(this.Pg.forEach(function(t){for(var e=2;5!==e;)2===e&&(a.u5&&t.wWa(),t.gz(),e=5)}),a.Vaa&&this.fT(),this.Ge.P.sf.Vg&&this.T2(this.Sn.WB?this.Sn.WB.Pb:this.dL+1),a.wr||null!==(r=this.Ah)&&void 0!==r&&r.$C()||this.Zx.lC||this.mT("drmReady"),this.Sn.Tfa()),o=7}},t=48;break;case 72:e.prototype.H2=function(i,t){for(var n,e,r,a,o,s=2;19!==s;)switch(s){case 2:e=(n=this).I,r=this.zb.Kf[0]||{},a=this.zb.Kf[1]||{},o=this.zb.RA[1]||{},(this.zb.RA[0]||{}).WT=void 0,o.WT=void 0,this.V.Ve(2===i?b.ma.Of:b.ma.xd),this.Cb.Enb(t),this.ay.reset(),s=8;break;case 8:this.Ge.P.Dsa(),this.emit("startBuffering"),w.zf.forEach(function(t){for(var e=2;5!==e;)switch(e){case 2:e=(t=n.La.Wc.Rd(t))?1:5;break;case 1:t.Via=0,t.seeking=0===i||1===i,t.Gja(),e=5}}),this.qfa=S.default.time.ea(),r.yl=a.yl=this.qfa,0===i&&(!this.Pm||0<a.Eu)&&(!this.yr||0<r.Eu)&&this.zb.cy(),s=11;break;case 11:e.UU&&(this.Lfa=setTimeout(function(){for(var t=2;1!==t;)switch(t){case 2:n.Wob(),t=1;break;case 4:n.Wob(),t=6}},e.ula)),this.V.pg()&&(this.EK=setTimeout(function(){for(var t=2;1!==t;)2===t&&(n.zb.cy(),t=1)},e.vA)),this.mg.Zj(),s=19}},e.prototype.mT=function(t){for(var e,i=2;3!==i;)2===i&&(a000.Z4L(1),t=a000.J4L("wipeHeaderCache:",t),this.Zx.lC&&this.Kk("AdoptingData still has lock:"+t),(e=this.I).RH||(e.ji&&this.Cb.Bm(t),this.mc.Ly(),this.Ah&&(this.Ah=void 0)),i=3)},e.prototype.IMa=function(i){for(var t,o,n,e=2;13!==e;)switch(e){case 9:return this.mc.dja(),Promise.resolve();case 2:var h=this;null!==(t=this.Ah)&&void 0!==t&&t.$C()&&this.Kk("Previously adopted request list still retained was unexpected"),this.Ah=void 0,o=this.I,e=3;break;case 3:e=this.Qpb&&this.mc.Gf?8:9;break;case 8:return this.Cb.am("checkForHcdStart"),this.Jd.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.P.J===i&&(n=t),e=1)}),this.mc.Gf.fNb(i,n?n.P:void 0).then(function(n){for(var t=2;8!==t;)switch(t){case 4:var r=h.La.Wc.Rd(0),a=h.La.Wc.Rd(1);return h.Cb.am("adoptHcdStart"),h.Zx.Xbb(function(){for(var t,e,i=2;7!==i;)switch(i){case 2:t=Promise.resolve(),h.Pm&&(t=s(a,n)),e=Promise.resolve(),i=4;break;case 4:return!h.yr||o.PZa&&!t||(e=o.PZa?t.then(function(t){return t?s(r,n):Promise.resolve()}):s(r,n)),h.wNa=n,h.Cb.am("adoptHcdEnd"),Promise.all([t,e])}});case 1:t=d.ia(n)?5:4;break;case 5:return o.wr||h.Zx.lC||h.mT("headerCacheDataNotFound"),Promise.resolve();case 2:h.Cb.am("checkForHcdEnd"),t=1}}).then(function(){for(var t,e=2;5!==e;)2===e&&(o.wr||null!==(t=h.Ah)&&void 0!==t&&t.$C()||h.Zx.lC||!h.V.Oo(h.Ge.P)||h.mT("adoptedCompletedRequests"),e=5)}).catch(function(t){for(var e=2;1!==e;)2===e&&(h.Sb("headerCache:lookupDataPromise caught error:",t),e=1)})}function s(t,e){for(var i,n,r,a,o,s,u,c=2;10!==c;)switch(c){case 2:n=e[i=t.mediaType],r=Promise.resolve(void 0),c=1;break;case 5:a=n.Oa,o=n.header.stream,s=h.zb.Kf[i],u=h.zb.RA[i],d.ia(e.bD)||h.yg.O8a(e.bD,e.Lo,e.Mo),u.Kz=e.Kz,u.rw=e.rw,c=8;break;case 1:c=n?5:11;break;case 8:c=t.k2b(a)?6:7;break;case 6:c=n.header?13:14;break;case 14:return t.Kk("adoptPipeline no header for streamId:",a),r;case 7:return r;case 13:e=h.Ge.P,c=12;break;case 12:e.Z2(n.header,!e.sf.Vg&&!e.ii&&1===i,!0)&&(void 0!==t.cI&&t.KI(t.cI),r=e.Xk(i,a).stream.U.zn(t.Ic,void 0,!0),o=(e=o.Wk(r)).Z,(e=e.jma(t.Ic))&&0<e.Ed&&(o=e.Ed),t.Ic!==o&&(t.mP(o,r),h.cha(i,o)),r=h.Qkb(t,n.data).then(function(){return a}),s.vDb=!0,0===i&&h.yg.jP(n.header.bitrate)),c=11;break;case 11:return r}}},e.prototype.Qkb=function(n,r){for(var a,o,s,u,c,h,f,t=2;9!==t;)switch(t){case 2:a=this,t=1;break;case 1:t=0===r.length?5:4;break;case 5:return Promise.resolve();case 4:return o=n.R7,s=o.O,u=Math.min(this.Jd[0].Ha||1/0,o.Lc||1/0),c=n.mediaType,h=this.zb.Kf[c],this.Zx.Xbb(function(){for(var i,t=2;3!==t;)switch(t){case 5:e(),t=1;break;case 2:i=[],t=1;break;case 8:i=[],t=9;break;case 1:t=0<r.length?5:4;break;case 6:e(),t=2;break;case 4:case 14:return Promise.all(i)}function e(){for(var e,t=2;5!==t;)2===t&&(7===(e=r.shift()).readyState?n.Sb("adoptData, not adopting aborted mediaRequest:",e.toString()):6===e.readyState?(n.Sb("adoptData, not adopting failed mediaRequest:",e.toString()),a.$F(e,!1)):n.Ic>=e.fd&&n.Ic<e.Lc&&(n.Ic<u||!d.Ba(u))?(i.push(a.Rkb(n,e).then(function(){for(var t=2;1!==t;)2===t&&(e.complete&&a.uZa(e),t=1)})),n.NXb(e.Lc),d.Ba(u)&&n.Ic>=u&&a.Cb.Fga(s,e.Lc),0===c&&a.yg.jP(e.bitrate),e.complete?(h.Eu+=e.duration,e.OMb&&(h.MX+=e.duration),f=e):(a.Ah||(a.Ah=new m.Eya(a.H)),a.Ah.push(e))):a.$F(e,!1),t=5)}}).then(function(){for(var t,e,i=2;8!==i;)switch(i){case 4:e=a.Jd[o.P.Pb],void 0!==(t=n.dma(n.Ic))?(n.Jn=t,n.ie=e.P.sh[c].stream.Wk(n.Jn)):n.Jn=n.Hf?n.Hf.index+1:n.Jn+1,i=8;break;case 5:i=f||null!==(e=a.Ah)&&void 0!==e&&e.$C()?4:8;break;case 2:f&&n.vZa(f),i=5}})}},e.prototype.Rkb=function(t,e){for(;;){var i=this,n=t.mediaType;return this.I.ji&&this.Cb.Bm("adoptMediaRequest: type: "+n+", state: "+e.readyState+", pts: "+e.fd),this.cha(n,e.fd),t.Pa.erb(e).catch(function(t){for(var e=2;1!==e;)2===e&&(i.Kk("Error adopting requests",t),e=1)})}},e.prototype.Zga=function(t,e,i){for(var n,r=2;9!==r;)2===r&&(n=this,void 0===e&&(e=h.QR.Dia),(i||this.La.Wc).bva(t,e),this.ay.reset(),(void 0===t?w.zf:[t]).forEach(function(t){for(var e=2;1!==e;)2===e&&(n.kc(t)&&(n.Pv[t].reset(),n.epb(t),n.yg.KQb(t)),e=1)}),r=9)},e.prototype.Hwa=function(){for(var n,t=2;5!==t;)2===t&&(n=this,w.zf.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!==(e=n.Pv[t])&&void 0!==e&&e.stop(),i=5)}),t=5)},e.prototype.SI=function(t){var n=this;return(void 0===t?w.zf:[t]).forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!==(e=n.Pv[t])&&void 0!==e&&e.resume(),i=5)}),Promise.resolve()},e.prototype.fT=function(t){for(var n,e,i=2;3!==i;)2===i&&(n=this,t=void 0===t?w.zf:[t],null!==(e=this.ay)&&void 0!==e&&e.reset(),t.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(null!==(e=n.Pv[t])&&void 0!==e&&e.resume(),i=5)}),i=3)},e.prototype.epb=function(t){for(var e,i=2;3!==i;)2===i&&(e=this.zb.Kf[t],this.zb.Jw[t].lqa=void 0,e.Eu=0,e.MX=0,i=3)},t=87;break;case 32:e.prototype.sta=function(){},e.prototype.close=function(){for(var t=2;4!==t;)2===t&&(this.C8a.Nb(),this.Jd.forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:t.close(),e=8;break;case 2:t.close(),e=1}}),this.Qi.close(),t=4)},e.prototype.h7a=function(){for(var t=2;1!==t;)switch(t){case 4:this.mc.Sob(this),t=9;break;case 2:this.mc.Sob(this),t=1}},e.prototype.ed=function(){for(var t=2;20!==t;)switch(t){case 12:var e=this.eg;this.eg=void 0,d.ia(e)||e.Yp()||this.Sb("Error on MediaSource destroy: ",e.error),t=20;break;case 2:this.yg.wQb(),this.E1(),this.La.Nb(),t=3;break;case 3:this.IU.Olb(),null!==(e=this.ay)&&void 0!==e&&e.reset(),this.Pv.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.reset(),e=1)}),this.V.Ve(b.ma.dj),this.Jd.forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:t.ed(),e=7;break;case 2:t.ed(),e=1}}),this.Jd=[],t=13;break;case 13:this.Gi.clear(),t=12}},e.prototype.suspend=function(){for(var t=2;1!==t;)switch(t){case 4:this.Qi.suspend(),t=6;break;case 2:this.Qi.suspend(),t=1}},e.prototype.resume=function(){for(var t=2;1!==t;)2===t&&(this.Qi.resume(),t=1)},e.prototype.en=function(){return this.Qi.en()},e.prototype.tpb=function(){for(var t,e=2;8!==e;)switch(e){case 4:this.$x||(this.$x=setInterval(this.Cb.gOa.bind(this.Cb),t.ML)),this.M2||(this.M2=setInterval(this.Cb.$nb.bind(this.Cb),t.Rwa)),this.ns&&!this.A1&&(this.A1=setInterval(this.Cb.fOa.bind(this.Cb),t.n3)),e=8;break;case 2:t=this.I,this.gC&&clearTimeout(this.gC),this.gC=setTimeout(this.nT.bind(this),t.Faa),e=4}},e.prototype.E1=function(){for(var t=2;7!==t;)switch(t){case 9:this.Lfa&&(clearTimeout(this.Lfa),this.Lfa=void 0),this.mg.E1(),t=7;break;case 2:this.gC&&(clearTimeout(this.gC),this.gC=void 0),this.$x&&(clearInterval(this.$x),this.$x=void 0),this.M2&&(clearInterval(this.M2),this.M2=void 0),this.A1&&(clearInterval(this.A1),this.A1=void 0),this.EK&&(clearTimeout(this.EK),this.EK=void 0),t=9}},e.prototype.play=function(){for(var t=2;1!==t;)2===t&&(this.Qi.play(),t=1)},t=39;break;case 94:return e.prototype.Bmb=function(t,e){for(var i=2;5!==i;)2===i&&(e=n.qYa(e),this.kfa[t.mediaType]=e,i=5)},Object.defineProperties(e.prototype,{Ey:{set:function(t){for(var e=2;1!==e;)2===e&&(this.zb.Ey=t,e=1)},enumerable:!1,configurable:!0}}),e}function e(t,e,i,n,r,a,o,s,u,c,h){for(var f,l,p,d,b=2;74!==b;)switch(b){case 18:this.Qi=new M.REa(this,this.H,this.kc.bind(this),d),b=17;break;case 37:this.Gi.on(this.mc.Gf,"mediacache",function(t){for(var e=2;1!==e;)2===e&&(T.Va(g,"mediacache",t),e=1)}),b=36;break;case 39:this.Gi.on(this.mc.Gf,"managerdebugevent",function(t){for(var e=2;1!==e;)switch(e){case 2:T.Va(g,t.type,t),e=1;break;case 4:T.Va(g,t.type,t),e=0}}),b=38;break;case 65:this.Jd=[e],this.yg=new N.Gya(this,this.H,t,this.mc.Qb,c,this.QN(),r,this.kc.bind(this),d),b=63;break;case 36:p&&c.yM&&!c.mBb&&(c.set?c.set({enableAdaptiveParallelStreaming:!1}):c.yM=!1),0==Math.floor(1e6*Math.random())%c.GL&&(this.$ob=new E.NJa(c)),this.Pv=[],this.Pg=[],this.C8a=new _.Uca(e,this.mc.Qb,this.mc.Kh,this.I,void 0),t=this.C8a.sHb(),r=null,b=48;break;case 14:f=new D.LGa(this,this.H),b=13;break;case 40:b=c.ji&&this.mc.Gf?39:38;break;case 43:this.Sn=new C.kKa(this,this.H,this.kc.bind(this),f),this.mg=new L.yBa(this,this.H,this.kc.bind(this)),this.IU=new I.xBa(this,this.H,f),b=40;break;case 63:b=c.Ala&&this.yg.r7?62:59;break;case 9:this.H=new S.default.Console("ASEJS","media|asejs","("+o.sessionId+")"),this.Kk=this.H.error.bind(this.H),this.Sb=this.H.warn.bind(this.H),this.jn=this.H.trace.bind(this.H),b=14;break;case 35:this.V=new x.Sya(u),this.eC=r||0,this.dL=0,this.kfa=s,b=31;break;case 23:this.Qpb=!!a.Yxa,this.cL=a.DW,this.z2=void 0,b=35;break;case 31:this.L2=!1,this.FS=void 0,b=29;break;case 62:for(var m in c=c.RIb)i=c[m],c.hasOwnProperty(m)&&i&&(this.I[m]=i);b=60;break;case 77:l=this,b=76;break;case 38:b=(c.aya||c.$xa)&&this.mc.Gf?37:36;break;case 2:var g=this;this.Zx=new P.HJa,this.BMa=[],this.aD={Lv:[Object.create(null),Object.create(null)]},b=9;break;case 48:c.UU&&(r=this.mc.Xu.cC),A.ux.instance().reset(),(e=y.jda.create({Pb:0,oa:e,Wo:i,r8a:n,Vg:!!a.Vg,j0a:!1,ii:!!a.ii,Bd:w.s8(!!a.GT,!!a.sE),Z:0,Ha:a.Ha,Cb:this.Cb,Pr:this.tNa.bind(this),ac:this,config:this.I,H:this.H,mg:this.mg,Sn:this.Sn,Gf:this.mPa?this.mc.Gf:void 0,aD:this.aD})).zT=!0,b=65;break;case 17:this.Dpb=[!a.sE,!a.GT],this.kc(0)&&this.kc(1),this.mc=t,this.Yl=o,this.I=c=this.WSa.Wkb(e,c),this.t2=a.zO,this.mPa=!!a.obb,b=23;break;case 29:this.j2=-1,this.Uga=0,this.Gi=new v.Wh,b=43;break;case 60:this.yg.Kxa(this.I),b=59;break;case 59:m=e.P,this.La=new R.Iba(this,this.Cb,this.H,this.fha.bind(this),m,this.eC,this.I,this.mg,this.V,this.pV.bind(this)),c={DW:this.DW,ns:this.ns,Pm:this.Pm,zO:this.zO},this.zb=new j.LKa(this.H,this.yg,this.I,this.kc.bind(this),this.V,c,this.mc.Qb,this.Cb,this.mg,this.La,d),b=55;break;case 76:this.V.addListener(function(t){for(var e,i=2;1!==i;)if(2===i){try{for(e=2;1!==e;)2===e&&(l.zb.j1b.bind(l.zb)(t),e=1)}catch(t){a000.Z4L(1),l.Cb.Kn(a000.J4L("Hindsight: Error when adding updatePlaySegment Listener: ",t))}i=1}}),b=75;break;case 75:h&&this.zb.Lq(h,m.W),b=74;break;case 55:b=this.Jr?77:75;break;case 13:this.Cb=f,this.WSa=new O.FAa(this.H),d=(p=!(!e||!e.choiceMap||"branching"!==e.choiceMap.type))?{QU:!1,Jr:!1}:k.YXa(c),this.QU=d.QU,this.Jr=d.Jr,this.$w=c.$w,b=18}}}(),e.tKa=i,t.xf(v.EventEmitter,i)},function(t,e,i){var g,v,y;function w(t,e,i,n,r,a,o,s,u,c,h,f){void 0===i&&(i=0),this.fe=t,this.D2=e,this.Z=i,this.Ha=n,this.I5=r,this.qh=a,this.$M=o,this.config=s,this.H=u,this.Cb=c,this.FCb=h,this.Xg=f,this.Cw=0}_esm(e),e.jda=void 0,g=i(17),v=i(9),y=i(222),w.create=function(t){var o,e,i,n,r,a,s,u,c,h,f,l,p,d,b;function m(t){v.Va(u,t.type,t)}return o=t.Pb,e=t.oa,i=t.r8a,n=t.Z,r=t.Ha,a=t.Pr,s=t.Cb,u=t.ac,c=t.config,h=t.H,f=t.mg,l=t.Sn,p=t.Gf,d=t.aD,b=new y.zba(Number(e.movieId),{Pb:o,oa:e,Wo:t.Wo,L2a:{xpa:t.Vg,t0a:!!t.j0a},ii:t.ii,Bd:t.Bd,config:c,QZa:{Ol:f.Zj.bind(f),Gf:p,aD:d,Ln:m,l7:function(t){return t===u.La.Wc.P},IV:function(t,e,i,n,r){return t=u.zb.Kf[t],!e||i||n||r?u.FS:t.If},SC:function(t){return u.zb.Jw[t]},qh:u.qh.bind(u)},iX:function(t){u.emit("requestComplete",{type:"requestComplete",timestamp:t.rf,mediaRequest:t})},F5:function(){return u.yg},Qb:u.mc.Qb,Kh:u.mc.Kh,EVa:{Pr:a,Nh:function(t,e,i,n,r,a){return void 0===a&&(a=!1),!(a&&!u.V.pg())&&(u.Ep(t,o,e,i,n,r,a),!0)},Fn:function(){return u.L2},Ln:m},VO:void 0,QI:{Y:u.mc.OA,fa:u.mc.dE}}),c.jz&&b.aE({ds:u.Yl.ds,ba:u.Yl.ba,HC:u.Yl.HC,Kn:s.Kn.bind(s)}),(t=new g.Wh).addListener(b.eu,"onHeaderFragments",function(t){var e,i=t.mediaType,n=t.Oa,r=t.stream.U,a=u.qh(o);a?(b.sh[i]&&t!==b.sh[i]?t.qw&&(a=b.sh[i],t=t.stream,e=a&&a.stream,h.warn("first header received for non-current track (trackId "+t.trackId+"streamId "+t.Oa+"), expected track "+(e&&e.trackId)+", stream "+(e&&e.Oa)+", "+a)):(b.sh[i]=t,t=u.La.Wc,0===o&&(e=(b.kc(1)?t.eb(1):t.eb(0)).Ic,t.N3(e,b)),a.$X=!1,a.L3(),u.U2()),l.Tfa(),s.Snb(o,i,n,b.J,r),f.Zj()):h.warn("addFragments for stale manifestIndex:",o)}),t.addListener(b.eu,"onHeaderRequestComplete",function(t){var e,i;t.Tk?u.U2():t.IC&&(h.warn("drm header header:",t.toString(),"but no headers seen, marking pipeline drmReady"),u.gz(t.J)),e=t.mediaType,i=Object.getOwnPropertyNames(d.Lv[e]),u.Pg[e].U3a(t.stream,1===i.length&&i[0]===t.Oa),f.XMa(),u.RVb()}),t.addListener(b.eu,"onHeaderFromCache",function(t){var e=t.header;t=t.wDb,e.Tk&&u.U2(),t&&s.Inb(e.J,e.Oa)}),new w(b,i,n,r,function(){return u.La},u.qh.bind(u),u.$M.bind(u),c,h,s,!1,t)},Object.defineProperties(w.prototype,{P:{get:function(){return this.fe},enumerable:!1,configurable:!0}}),Object.defineProperties(w.prototype,{Pb:{get:function(){return this.P.Pb},enumerable:!1,configurable:!0}}),w.prototype.jq=function(t){return this.fe.FHb(t,this.R5(t))},w.prototype.R5=function(t){return this.D2[t]},w.prototype.close=function(){this.Xg.clear(),this.P.close()},w.prototype.ed=function(){this.fe.ed(),delete this.fe},w.prototype.clone=function(){return new w(this.P,this.D2,this.Z,this.Ha,this.I5,this.qh,this.$M,this.config,this.H,this.Cb,!0,this.Xg)},w.prototype.Jxa=function(t){this.H.trace("updateAudioTrack:",this.D2[0],"->",t),this.D2[0]=t},w.prototype.cYa=function(){return void 0!==this.UH?this.UH:this.Ha||this.fe.duration},w.prototype.Mtb=function(t){var e,i=this.fe.sh[1];if(i&&i.stream.je)return this.oz&&this.oz[1]&&this.oz[1].Z<=t&&this.oz[1].Ha>t?this.oz[1].zd:(t=(i=i.stream.U).zn(t,void 0,!0),(e=void 0)===e&&(e=i.Cj(t)),e)},w.prototype.L3=function(){var t,e;if(!this.$X&&this.GZa())for(this.gsa(),t=[0,0],0===this.Pb||this.fe.sf.LW||this.fe.sf.replace||(e=this.qh(this.Pb-1),e=this.fe.J===e.fe.J,t=(e=(t=this.I5().Wc).N3(this.Z,this.P,t,e)).EO),this.Z=t[1],this.EO=t,this.oz=e&&e.oz,this.HRa(),e=(this.fe.kc(1)?this.fe.sh[1]:this.fe.sh[0]).stream.U.Ha,this.Cb.Nnb(this.Pb,this.Cw,this.Z,this.UH,e),this.$X=!0,e=this.Pb+1;e<this.$M();++e)(t=this.qh(e)).$X=!1,t.L3()},w.prototype.HRa=function(){var t;0===this.Pb||this.fe.sf.replace?this.Cw=0:(t=this.qh(this.Pb-1),this.Cw=t.Cw+t.cYa()-this.Z)},w.prototype.gsa=function(){var t,e,i,n,r,a;this.GZa()&&(i=this.I5().Wc,n=this.Ha||1/0,r=this.fe.kc(1),a=i.bV(n,this.P),this.UH=(r?a[1]:a[0]).Ha,i=(r?this.fe.sh[1]:this.fe.sh[0]).stream.U.Ha,r=Math.min(null!==(e=null===(t=a[1])||void 0===t?void 0:t.Ha)&&void 0!==e?e:1/0,null!==(e=null===(e=a[0])||void 0===e?void 0:e.Ha)&&void 0!==e?e:1/0),this.Cb.Pnb(this.Pb,this.UH,i,r),0<(t=this.I5().bma(this.Pb)).length&&t.forEach(function(t){t.d1b(a,n)}))},w.prototype.GZa=function(){var t=this.fe.kc(0),e=this.fe.kc(1),i=this.fe.sh[0],n=this.fe.sh[1];return i=i&&i.stream.je,n=n&&n.stream.je,(!t||i)&&(!e||n)},e.jda=w},function(t,e,i){var n,r;function a(t,e,i){this.Kn=i,this.Zpb=new n.mMa(t),this.ba=e.ba,this.ilb=1e3*e.bOb/e.btb,this.xAb=e.HC,this.vQa=!1}_esm(e),e.wKa=void 0,t=i(2),n=i(9),i=t.__importDefault(i(6)),r=i.default.$q,new i.default.Console("ASEJS_SIDECHANNEL","media|asejs"),a.prototype.Gt=function(t){var e,i={s_xid:this.ba,dl:this.xAb?1:0};return t.Qp&&(i.bs=n.T3(Math.floor(t.Qp/this.ilb)+1,1,5)),t.X8&&(i.limit_rate=t.X8),t.hRa&&(i.bb_reason=t.hRa),t.Y$a&&(i.tm=t.Y$a),t.jU&&((e=t.jU.v7())||!e&&this.vQa)&&(i.cpr_ss=t.jU.sP,i.cpr_ca=t.jU.$L,i.cpr_rec=t.jU.KO,this.vQa=e),t.Lia&&(i.br=t.Lia.start+"+"+t.Lia.size),this.bob(i)},a.prototype.Hva=function(t,e){var i,n;try{i=new r(void 0,"notification"),n=this.Gt({hRa:t}),e&&n&&i.open(e,void 0,2,void 0,void 0,void 0,n)}catch(t){this.Kn("SideChannel: Error when sending sendBlackBoxNotification. Error: "+t)}},a.prototype.bob=function(t){var e;try{return e=this.opb(t),this.Zpb.encrypt(e)}catch(t){this.Kn("SideChannel: Error when obfuscating msg. Error: "+t)}},a.prototype.opb=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(e[t]))}).join("&")},i=a,e.wKa=i},function(t,e,i){var a,s,r,u,o,l;function c(t,e,i){var n,r,a,o;this.I=e,this.H=i,this.NB=new u.xKa,this.p2=0,this.cA=t.cA,this.P=t.P,this.mediaType=t.mediaType,this.oE=t.oE,this.jC=t.jC,1!==this.mediaType||void 0!==(e=this.cA.streams[0]).framerate_value&&void 0!==e.framerate_scale&&(this.xga=(n=e.framerate_value,r=e.framerate_scale,a=Math.floor(1e3*n/r),o=1e3*Math.round(a/1e3),new s.T(o,Math.abs(Math.floor(1001*n/r)-o)>Math.abs(a-o)?1e3:1001).xua())),this.nb=(this.TK=this.xga)&&this.TK.S,this.cga=this.YMa=!1,this.Joa=-1/0,this.P1a=1/0,e=(t=c.Elb(this,t.Vg)).maxBitrate,i=t.$d,this.iH=t.iH,this.maxBitrate=e,this.$d=i,this.Apb=i.reduce(function(t,e){return t[e.Oa]=e,t},{})}_esm(e),e.yba=void 0,a=i(367),s=i(22),r=i(5),u=i(9),o=i(368),l=i(369),c.Elb=function(a,o){var s=a.I,u=1===a.mediaType,c=!1,h=0,f=[];return a.cA.streams.forEach(function(t,e){var i,n=t.bitrate,r=!0;u&&(i=-1===t.content_profile.indexOf("none"),r=o&&!i||!o&&i,c=c||i),r&&h<n&&(h=n),t=new l.dza({Dw:t,Lf:e,track:a,ju:r},s,a.H),f.push(t)}),{iH:c,maxBitrate:h,$d:f}},Object.defineProperties(c.prototype,{N8:{get:function(){return!this.je&&0===this.p2},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{je:{get:function(){return!!this.gp&&!!this.NB.value},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ola:{get:function(){return this.YMa},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{J:{get:function(){return String(this.P.J)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{trackId:{get:function(){return this.cA.track_id},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{sa:{get:function(){return this.TK},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{S:{get:function(){return this.nb},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{$N:{get:function(){return this.unb},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{gp:{get:function(){return this.md},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{uN:{get:function(){return this.NB.value},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Gma:{get:function(){return this.sa.S},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Fma:{get:function(){return this.sa.vc},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Z:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{qma:{get:function(){return this.NB},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{KW:{get:function(){return this.$d.some(function(t){return 1<((null===(t=t.Wg)||void 0===t?void 0:t.length)||0)})},enumerable:!1,configurable:!0}}),c.prototype.ww=function(t){return this.UC()[t]},c.prototype.UC=function(){return this.Apb},c.prototype.equals=function(t){return!!t&&this.J===t.J&&this.mediaType===t.mediaType&&this.trackId===t.trackId},c.prototype.j9=function(){this.p2++},c.prototype.i9=function(){0<this.p2&&this.p2--},c.prototype.h9=function(t,e,i,n,r){n&&void 0!==n.jl&&(this.je||void 0!==n.vd&&n.vd.length)?(t.Qz&&(this.YMa=!0),this.je?!this.cga&&n.vd&&n.vd.length>this.gp.length&&(this.md=new a.Sea(this.mediaType,this.sa,n,r),this.NB.M7a(),this.Joa=-1/0,this.cga=!0):(this.SOa(e),(i=i||this.xga)&&(this.ROa(i||this.xga),void 0===this.S&&this.TOa(i.S)),this.md=new a.Sea(this.mediaType,this.sa,n,r),t.Qz&&(this.cga=!0))):this.H&&this.H.error("AseTrack.onHeaderReceived with missing fragments data")},c.prototype.EQb=function(t){void 0===this.NB.value&&this.NB.set(t)},c.prototype.Yvb=function(t){this.je||(this.TOa(t.S),this.SOa(t.$N),this.ROa(t.sa),this.md=t.gp,t.qma.value?this.NB.set(t.qma.value):this.NB.M7a())},c.prototype.yn=function(t,e,i,n){return r.assert(this.uN),o.yn(this.mediaType,t,this.uN,e,i,n)},c.prototype.nz=function(t,e,i){return r.assert(this.uN),o.nz(this.mediaType,t,this.uN,e,i)},c.prototype.toJSON=function(){return{movieId:this.J,mediaType:this.mediaType,trackId:this.trackId}},c.prototype.toString=function(){return(0===this.mediaType?"a":"v")+":"+this.trackId},c.prototype.TOa=function(t){this.nb=t},c.prototype.SOa=function(t){this.unb=t},c.prototype.ROa=function(t){this.TK=t},e.yba=c},function(t,e,i){var n,o,r,s,a,u,c;_esm(e),e.QKa=e.ckb=void 0,n=i(2),i(116),o=i(5),t=n.__importDefault(i(6)),r=i(377),i=i(367),s=new t.default.Console("FRAGMENTS","media|asejs");try{new Float64Array(8),a=!0}catch(t){a=!1}function h(t,e){return(e=c.call(this,t.gp,e)||this).UF=t,e}function f(t,e,i,n,r,a,o){this.hL=128,this.md=e,this.Ne=i.offset,this.$j=i.sizes,this.sL=t,this.GK=this.lS=this.bi=this.fPa=this.gha=void 0,this.tnb=n,this.ifa=r&&r.Sd,this.st=a,this.lf=Math.min(this.md.length,this.$j.length),this.fnb=this.Ctb(),this.gp.mr.length!==this.$j.length&&s.error("Mis-matched stream duration ("+this.gp.mr.length+","+this.$j.length+") for movie id "+o),this.gp.c3&&!this.ifa&&s.error("Mis-matched additional SAPs information for movie id "+o)}c=i.tLa,n.__extends(h,c),Object.defineProperties(h.prototype,{fa:{get:function(){return this.UF.y9a(this.Me)},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{offset:{get:function(){return this.UF.Sd(this.Me)},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Sra:{get:function(){return this.UF.NH&&this.UF.NH[this.Me]},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{di:{get:function(){return this.UF.nEb(this.Me)},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{sb:{get:function(){return this.UF.Th&&this.UF.Th[this.Me]},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{gRa:{get:function(){return 8*this.fa/(1e3*this.Lt/this.S)},enumerable:!1,configurable:!0}}),h.prototype.toJSON=function(){return{index:this.index,contentStartTicks:this.Wa,contentEndTicks:this.ob,durationTicks:this.Lt,timescale:this.S,startPts:this.Z,endPts:this.Ha,duration:this.duration,additionalSAPs:this.di}},u=h,e.ckb=u,Object.defineProperties(f.prototype,{mediaType:{get:function(){return this.md.mediaType},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{length:{get:function(){return this.lf},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{jl:{get:function(){return this.md.jl},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{Fla:{get:function(){return this.md.Fla},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{Z:{get:function(){return this.md.Z},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{Ha:{get:function(){return this.md.Ha},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{jra:{get:function(){return this.md.jra},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{iA:{get:function(){return this.fnb},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{sa:{get:function(){return this.md.sa},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{S:{get:function(){return this.md.S},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{bh:{get:function(){return this.fPa||this.sfa()},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{NH:{get:function(){return this.tnb},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{TPa:{get:function(){return this.ifa},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{Th:{get:function(){return this.st},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{gp:{get:function(){return this.md},enumerable:!1,configurable:!0}}),Object.defineProperties(f.prototype,{cx:{get:function(){return this.gha||this.Dlb()},enumerable:!1,configurable:!0}}),f.prototype.y9a=function(t){return this.$j?this.$j[t]:(s.error("sizesByIndex _sizes is undefined"),-1)},f.prototype.Cj=function(t){return this.md.Cj(t)},f.prototype.VU=function(t){return this.md.Cj(t)+this.md.vd(t)},f.prototype.Sd=function(t){var e,i,n;if(this.lS!==t||void 0===this.GK){if(0===t)return this.Ne;if(this.lS===t-1&&void 0!==this.GK)this.GK+=this.$j[this.lS],++this.lS;else{for(e=this.bi||this.olb(),n=(i=Math.floor(t/this.hL))*this.hL,e=e[i];n<t;++n)e+=this.$j[n];this.lS=t,this.GK=e}}return this.GK},f.prototype.vd=function(t){return this.md.vd(t)},f.prototype.get=function(t){return new u(this,t)},f.prototype.nEb=function(t){var e,i,n,r,a;if(o.assert(0<=t),e=this.gp.c3,i=this.gp.UPa,!(n=this.ifa)||!e||!i||t>=e.length)return[];for(r=[],a=t===e.length-1?i.length:e[t+1],e=e[t];e<a;++e)r.push({il:i[e],Ed:this.Cj(t)+this.sa.PH(i[e]).Y,offset:n[e]});return r},f.prototype.gYb=function(t){this.st=t},f.prototype.zn=function(t,e,i){return this.md.zn(t,e,i)},f.prototype.o5=function(t,e,i){return this.md.o5(t,e,i)},f.prototype.jka=function(t,e){return this.md.jka(t,e)},f.prototype.ztb=function(t,e,i,n,r){var a,o,s,u,c,h=!0,f=0,l=this.md.mr,p=this.$j;if(t=Math.floor(t*this.S/1e3),a=Math.floor(i*this.S/1e3),u=s=o=0,this.md.Hxa&&this.md.Gxa)for(f=this.md.Hxa;f<=this.md.Gxa;++f)o+=l[f],s+=p[f];if(e<s)h=!1;else for(;f<this.length&&(!r||f<r);){if(c=p[f],i=l[f],e<s+c){for(;1<f-u&&e<s+c&&(o-l[u]>=a||s-p[u]>n);)o-=l[u],s-=p[u],++u;if(o<t||e<s+c){h=!1,this.md.Hxa=u,this.md.Gxa=f;break}}o+=i,s+=c,++f}return h},f.prototype.subarray=function(t,e){return o.assert(void 0===t||0<=t&&t<this.length),o.assert(void 0===e||t<e&&e<=this.length),new f(this.sL,this.md.subarray(t,e),{offset:this.Sd(t),sizes:this.$j.subarray(t,e)},this.NH&&this.NH.subarray(t,e),this.TPa&&{Sd:this.TPa},this.st&&this.st.subarray(t,e))},f.prototype.forEach=function(t){for(var e=0;e<this.length;++e)t(this.get(e),e,this)},f.prototype.map=function(t){for(var e=[],i=0;i<this.length;++i)e.push(t(this.get(i),i,this));return e},f.prototype.reduce=function(t,e){for(var i=0;i<this.length;++i)e=t(e,this.get(i),i,this);return e},f.prototype.toJSON=function(){return{length:this.length}},f.prototype.dump=function(){var t;s.trace("StreamFragments: "+this.length);for(var e=0;e<this.length;++e)t=this.get(e),s.trace("StreamFragments: "+e+": ["+t.Z+"-"+t.Ha+"] @ "+t.offset+", "+t.fa+" bytes")},f.prototype.Ctb=function(){var t,e=0,i=this.md.t2a,n=this.md.mr,r=this.$j;if(void 0===i||i>=this.length){for(var a=0;a<this.length;++a)e<(t=r[a]/n[a])&&(e=t,i=a);void 0===this.md.t2a&&(this.md.t2a=i)}else e=r[i]/n[i];return Math.floor(e*this.S/125)},f.prototype.sfa=function(){for(var t=0,e=0;e<this.length;++e)t+=this.$j[e];return this.fPa=t},f.prototype.Dlb=function(){var t=new Uint8Array(this.$j.length);if(o.assert(void 0!==t,"invalid streamIndices"),t){o.assert(void 0!==this.sL,"invalid _streamIndex");for(var e=0;e<t.length;e++)t[e]=this.sL}return e=this.st||new Uint8Array(this.$j.length),this.gha=new r.Fea(this.md.mr,this.$j,t,e,this.md.S)},f.prototype.olb=function(){if(!this.bi){for(var t=a?new Float64Array(Math.ceil(this.length/this.hL)):Array(Math.ceil(this.length/this.hL)),e=this.Ne,i=0;i<t.length;++i){t[i]=e;for(var n=0;n<this.hL;++n)e+=this.$j[i*this.hL+n]}this.bi=t}return this.bi},t=f,(e.QKa=t).prototype.P9a=i.Bw(t.prototype.Cj),i.Bw(t.prototype.VU),i.Bw(t.prototype.vd),i.Bw(t.prototype.Sd),i.Bw(t.prototype.y9a),i.Bw(t.prototype.get)},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=1===this.version?this.Wi([{creationTime:"int64"},{modificationTime:"int64"},{S:"int32"},{duration:"int64"}]):this.Wi([{creationTime:"int32"},{modificationTime:"int32"},{S:"int32"},{duration:"int32"}]),!0},a.Xb="mvhd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.Xb="trak",a.Na=!0,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;return this.Ac(),t=(t=1===this.version?[{creationTime:"int64"},{modificationTime:"int64"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int64"}]:[{creationTime:"int32"},{modificationTime:"int32"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int32"}]).concat({offset:64,type:"offset"},{cMb:"int16"},{prb:"int16"},{volume:"int16"},{offset:16,type:"offset"},{offset:288,type:"offset"},{width:"int32"},{height:"int32"}),this.ic=this.Wi(t),this.ic.f0b=!!(1&this.flags),this.ic.g0b=!!(2&this.flags),this.ic.h0b=!!(4&this.flags),this.ic.i0b=!!(8&this.flags),this.u.console.trace("Finished parsing track box"),!0},a.Xb="tkhd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=this.Wi(1===this.version?[{A5:"int64"}]:[{A5:"int32"}]),!0},a.Xb="mehd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.ic=this.Wi([{$Ib:"int32"},{o2b:"int32"}]),!0},a.Xb="pasp",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.ic=this.Wi([{dtb:"int32"},{maxBitrate:"int32"},{Bia:"int32"}]),!0},a.Xb="btrt",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){for(this.u.Ml(),this.u.Ml(),this.rG=[];this.u.offset<=this.byteOffset+this.byteLength-4;)this.rG.push(this.u.Ml());return!0},a.Xb="ftyp",a.Na=!1,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),r=i(84),a=i(32).Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.ic=this.Wi([{dTb:"int32"},{RV:"int32"},{offset:96,type:"offset"},{name:"string"}]),this.ic.RV=r.ko(this.ic.RV),!0},o.Xb="hdlr",o.Na=!1,e.default=o},function(t,e,i){var n,r,a,o,s,u;function c(){return null!==u&&u.apply(this,arguments)||this}_esm(e),n=i(2),r=i(100),a=i(224),o=i(172),t=i(32),s=i(85),u=t.Dc,n.__extends(c,u),c.prototype.parse=function(){return this.Ac(),this.sm=this.u.ya(),!0},c.prototype.Qt=function(t){var e=Object.keys(this.Ua);return e.length&&(e=e[0],this.Ua[e].length&&((e=this.Ua[e][0])instanceof o.default?this.sa=new a.T(e.qz,e.samplerate):e instanceof s.default&&(e=e.Ua[r.XE])&&e.length&&(1e3!==(e=e[0].ic).cz&&1001!==e.cz||0!=e.VH%1e3?this.u.console.warn("Unexpected frame rate in NetflixFrameRateBox: "+e.VH+"/"+e.cz):this.sa=new a.T(e.cz,e.VH)),this.sa&&(t.sa=this.sa))),!0},c.prototype.mY=function(t){void 0!==this.Ua[t]&&0!==this.Ua[t].length&&(this.la.dh(this.sm-1,this.byteOffset+12),t=this.Ua[t][0],this.Ie(t.byteLength,t.byteOffset))},c.Xb="stsd",c.Na=!0,i=c,e.default=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Kma=this.u.zc(2),this.Nia=this.u.zc(5),this.Oia=this.u.zc(3),this.zha=this.u.zc(3),this.u.zc(1),this.u.zc(5),this.u.zc(5),!0},a.Xb="dac3",e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;this.ssa=7&this.u.Yc(),this.Uwa=[];for(var e=0;e<this.ssa;e++)0<(t={Kma:this.u.zc(2),Nia:this.u.zc(5),Oia:this.u.zc(5),zha:this.u.zc(3),fMb:this.u.zc(1),rsa:this.u.zc(4)}).rsa?t.jub=this.u.zc(9):this.u.zc(1),this.Uwa.push(t);return!0},a.Xb="dec3",e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32),a=r.Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.zY=this.u.Ml(),r.ga&&this.u.console.trace("SchemeTypeBoxTranslator: "+this.zY),"cenc"===this.zY&&(this.u.offset-=4,r.ga&&this.u.console.trace("SchemeTypeBoxTranslator: writing type piff at offset "+this.u.offset),this.la.b_("piff")),this.u.ya(),!0},o.Xb="schm",o.Na=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;return this.u.mb(),this.qba=this.u.mb(),this.u.mb(),this.u.mb(),this.u.mb(),this.VY=this.LF(31&this.u.mb()),this.LF(this.u.mb()),this.yA=this.VY.length?this.VY[0][0]:this.qba,this.YS=this.u.offset,this.startOffset+this.length<this.u.offset&&(100===this.yA||110===this.yA||122===this.yA||144===this.yA)&&(this.u.mb(),this.u.mb(),this.LF(this.u.mb())),0<(t=this.startOffset+this.length-this.YS)&&this.Ie(t,this.YS),!0},a.prototype.LF=function(t){for(var e,i=[],n=0;n<t;++n)e=this.u.Yc(),i.push(this.u.CA(e));return i},a.Xb="avcC",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(172).default,n.__extends(a,r),a.prototype.Qt=function(){var t=this.Cl("esds");return(t=t&&t.jca.Cl(5))&&(this.qz=t.qz),!0},a.Xb="mp4a",a.Na=!0,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(2),r=i(226),a=i(32).Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.jca=r.IQ.bY(this.u),!0},o.Xb="esds",o.Na=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),t=i(100),i=i(32),t=t.XE,r=i.Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=this.Wi([{VH:"int32"},{cz:"int16"}]),!0},a.Xb=t,a.Na=!1,i=a,e.default=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),r=i(32).Dc,n.__extends(a,r),a.prototype.parse=function(){var t,e,i,n,r;return this.Ac(),e=(t=this.Wi([{kJ:"int32"},{zU:"int32"},{$y:"int32"},{bz:"int32"},{az:"int32"}])).kJ,i=t.zU,n=t.$y,r=t.az,t=t.bz,this.ic={trackId:e,yzb:i,Zy:n,zzb:r,Azb:t},this.kJ=e,this.zU=i,this.$y=n,this.bz=t,this.az=r,!0},a.Xb="trex",a.Na=!1,e.default=a},function(t,e,i){var r,a,o,s,u,n,c,h,f,l,p,d;function b(t,e,i,n,r,a){this.console=t,this.stream=e,this.Oh=n,this.Pha=r,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length),this.config=a||{},this.FZa=f.fna()}_esm(e),r=i(2),a=i(795),o=i(230),s=i(145),u=i(224),n=i(32),t=i(372),c=i(373),h=i(375),f=i(146),l=i(223),p=i(100),d=i(376),b.path=function(t,e){return e.reduce(function(t,e){return t&&t.Ua[e]&&t.Ua[e][0]},t)},b.vna=function(t){return t&&t.rG&&-1!==t.rG.indexOf("mcl0")?"mcl0":void 0},b.fma=function(t,e){var i,n;for(s.assert("mcl0"===t,"Unsupported McClearen brand"),t=(i=e.U).vd,e=new u.T(120,1).Zf(i.S).vc,n=0,i=i.jl;n<t.length&&i<e;)i+=t[n++];return n},b.prototype.parse=function(t){var e=this.sva();return e.done?(e=this.view.buffer.slice(this.view.byteOffset,this.view.byteOffset+e.offset),this.view=new DataView(e),(t=this.Ssa(t)).done?this.dka():(this.console.error("Parse error: "+t.error),{Cm:!1,parseError:t.error||"unknown mp4 parse error"})):e.cX?{Cm:!1,SPa:e.cX}:(this.console.error("Scan error: "+e.error),{Cm:!1,parseError:e.error||"unknown mp4 scan error"})},b.prototype.xn=function(t){return n.Dc.xn(this,t)},b.prototype.Cl=function(t){return n.Dc.Cl(this,t)},b.prototype.sva=function(){var t=new d.Dca(this.Oh,this.Pha?[p.Nx,p.Mx]:[],this.config&&this.config.w_b||["moof",p.zR],this.config&&this.config.AX),e=r.__assign(r.__assign({},this.config),{bI:!1});return new h.zE(b.CI,t,this.view,this.console,e).parse()},b.prototype.Ssa=function(t){var e,i=new d.DQ(this.view.byteLength),n=Object.create(l.xq.Ua);return this.config&&((this.config.w9||this.config.vaa||this.config.eE)&&a(l.xq.AI,n),this.config.waa&&a(l.xq.sxa,n),this.config.vaa&&a(l.xq.CZ,n)),e=r.__assign(r.__assign({},this.config),{bI:!0}),this.tc=new h.zE(n,i,this.view,this.console,e),(t=this.tc.parse(t)).done&&(this.Ua=this.tc.Ua),t},b.prototype.dka=function(){var t,e,i,n={Cm:!0},r=b.path(this,["moov"]),a=b.path(r,["trak","mdia","minf","stbl","stsd"]);if(this.config.w9){if(!a)return{Cm:!1,parseError:"Missing sample descriptions"};n.sa=a.sa,n.CWb=a.Ua}if((t=(t=b.path(a,["encv","sinf","schi"]))&&(b.path(t,["tenc"])||b.path(t,[p.ER])))&&(n.sVa={Nvb:t.pj,vH:t.vH,FLb:!1}),(t=b.path(r,["trak","mdia","mdhd"]))&&(n.S=t.S),(t=b.path(r,["mvex","trex"]))&&(n.Zy=t&&t.ic.Zy),n.Zy&&n.S&&(n.sa=new u.T(n.Zy,n.S)),(t=b.path(this,["sidx"]))&&(e=(e=b.path(this,[p.Nx]))&&e.qra,i=(i=b.path(this,[p.Mx]))&&i.di,n.U=t.U,n.NH=e,n.di=i),(e=this.Ua.vmaf&&this.Ua.vmaf[0])&&(n.Th=e.Th),this.config.T7a){if(!r)return{Cm:!1,parseError:"Missing movie box"};this.trim(r.byteOffset+r.byteLength),this.config.eE&&a&&1<a.sm&&t&&(n.Wg=this.eE(a,t)),void 0===n.Wg&&(r=this.tc.hz?o.concat(this.tc.wa()):this.view.buffer,n.Wg=[{Qd:0,data:r}])}return n.Cm=!0,n.BX=this.tc.offset,n},b.prototype.trim=function(t){var e=this.view.buffer.slice(this.view.byteOffset,this.view.byteOffset+Math.min(t,this.view.byteLength));this.tc.trim(t),this.view=new DataView(e)},b.prototype.eE=function(t,e){var i,n=Object.keys(t.Ua),r=n.filter(function(t){return"encv"!==t});if(!(n.length<2||r.length===n.length||0===r.length)&&(n=b.path(this,["ftyp"]),i=b.vna(n)))return n=[],this.tc.eua(),t.mY("encv"),n.push({Qd:0,Tk:!1,data:o.concat(this.tc.wa())}),this.tc.Dta(),t.mY(r[0]),t=b.fma(i,e),n.push({Qd:t,Tk:!0,data:o.concat(this.tc.wa())}),n},b.CI={},i=b,(e.dr=i).CI[p.YE]=t.default,i.CI[p.ZE]=c.default},function(t){t.exports=function t(e,i){var n;e.__proto__&&e.__proto__!==Object.prototype&&t(e.__proto__,i),Object.getOwnPropertyNames(e).forEach(function(t){void 0!==(n=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,n)})}},function(t,e,i){var n,r,a,o,s,u;function c(t){t?(this.Jf=t.Jf.slice(),this.eh=t.eh.slice(),this.Sd=t.Sd.slice(),this.trim=t.trim):(this.Jf=[],this.eh=[],this.Sd=[])}function h(t,e,i){return(t=u.call(this,t,e,i)||this).NU=[],t.lb=new s,t}_esm(e),n=i(2),r=i(145),a=i(230),o=i(84),t=i(797),Object.defineProperties(c.prototype,{empty:{get:function(){return 0===this.Jf.length&&0===this.eh.length&&0===this.Sd.length},enumerable:!0,configurable:!0}}),s=c,u=t.Zea,n.__extends(h,u),h.fia=function(t,e){if(e.offset+e.size<=t.byteLength)switch(e.size){case 1:t.setUint8(e.offset,e.value);break;case 2:e.Zu?t.setInt16(e.offset,e.value):t.setUint16(e.offset,e.value);break;case 4:e.Zu?t.setInt32(e.offset,e.value):t.setUint32(e.offset,e.value);break;case 8:r.assert(!e.Zu),t.setUint32(e.offset,Math.floor(e.value/4294967296)),t.setUint32(e.offset+4,4294967295&e.value);break;default:r.assert(!1)}},Object.defineProperties(h.prototype,{hz:{get:function(){return!this.lb.empty},enumerable:!0,configurable:!0}}),h.prototype.fB=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:1}),void 0===e&&(this.offset+=1)},h.prototype.sya=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:2,Zu:!1}),void 0===e&&(this.offset+=2)},h.prototype.dh=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:4,Zu:!1}),void 0===e&&(this.offset+=4)},h.prototype.tya=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:8,Zu:!1}),void 0===e&&(this.offset+=8)},h.prototype.b_=function(t){this.dh(o.pS(t))},h.prototype.vJ=function(t,e){this.lb.Sd.push({offset:this.offset,xl:t,value:e}),this.offset+=4},h.prototype.Ie=function(t,e,i){this.lb.Jf.push({offset:e,remove:t,$a:i})},h.prototype.Ru=function(t,e,i,n){this.lb.Jf.push({offset:i,remove:t,replace:e,$a:n})},h.prototype.trim=function(t){this.lb.trim=t},h.prototype.eua=function(){this.NU.push(new s(this.lb))},h.prototype.Dta=function(){this.lb=this.NU.pop()||new s},h.prototype.wa=function(){var e,t,i,n,r,a,o=this;return 0===this.lb.Jf.length&&0===this.lb.eh.length&&0===this.lb.Sd.length?[void 0===this.lb.trim?this.view.buffer:this.view.buffer.slice(0,this.lb.trim)]:(this.lb.Jf.sort(function(t,e){return t.offset-e.offset}),this.lb.eh.sort(function(t,e){return t.offset-e.offset}),this.eva(),e=this.cma(),t=this.view.buffer.slice(0,e),i=new DataView(t),this.lb.eh.forEach(h.fia.bind(void 0,i)),this.Nxa(i),this.Lxa(i),n=[],r=void 0!==this.lb.trim?Math.min(this.lb.trim,this.view.byteLength):this.view.byteLength,a=0,this.lb.Jf.filter(function(t){return t.offset<=r}).forEach(function(t){t.offset>a&&(n.push(i.buffer.slice(a,t.offset)),t.offset>i.byteLength&&i!==o.view&&(i=o.view,n.push(i.buffer.slice(e,t.offset)))),t.replace&&n.push(t.replace),a=t.offset+t.remove}),a<e&&n.push(t.slice(a)),a<r&&n.push(this.view.buffer.slice(Math.max(t.byteLength,a),r)),n)},h.prototype.cma=function(){var e=[],t=this.lb.eh[this.lb.eh.length-1],i=this.lb.Sd[this.lb.Sd.length-1];return t&&e.push(t.offset+t.size),i&&e.push(i.offset+4),this.lb.Jf.filter(function(t){return t.$a}).forEach(function(t){return e.push(t.$a.byteOffset+4)}),t=Math.max.apply(void 0,e),void 0!==this.lb.trim?Math.min(t,this.lb.trim):t},h.prototype.eva=function(){this.lb.Jf=this.lb.Jf.reduce(function(t,e){var i,n;return 0===t.length?t.push(e):(n=(i=t[t.length-1]).offset+i.remove,e.offset>=n?t.push(e):e.offset+e.remove>n&&(r.assert(i.$a===e.$a),i.remove+=e.offset+e.remove-n,e.replace&&(i.replace=i.replace?a.concat(i.replace,e.replace):e.replace))),t},[])},h.prototype.Nxa=function(a){var o=this;this.lb.Sd.forEach(function(i){var n,t,e=a,r=i.offset;o.lb.Jf.some(function(t){return!!(t.offset<=i.offset&&t.replace&&t.offset+t.replace.byteLength>=i.offset+4)&&(e=new DataView(t.replace),r=i.offset-t.offset,!0)}),n=i.xl+(void 0!==i.value?i.value:e.getInt32(r)),t=o.lb.Jf.reduce(function(t,e){return e.offset>i.xl&&e.offset<n?t+(e.remove-(e.replace?e.replace.byteLength:0)):t},0),e.setInt32(r,n-i.xl-t)})},h.prototype.Lxa=function(i){this.lb.Jf.forEach(function(t){var e=(t.remove||0)-(t.replace?t.replace.byteLength:0);if(0!=e)for(t=t.$a;t;)i.setUint32(t.byteOffset,i.getUint32(t.byteOffset)-e),t=t.parent})},t=h,e.Yea=t},function(t,e,i){var r,n;function a(t,e,i){this.view=t,this.console=e,this.config=i,this.view=t,this.console=e,this.Hn=this.Hy=this.offset=0}_esm(e),r=i(146),i(146),n=i(84),a.prototype.cna=function(t){return new DataView(this.view.buffer,this.view.byteOffset+this.offset,t)},a.prototype.zc=function(t){for(;this.Hn<t;)this.Hy=(this.Hy<<8)+this.mb(),this.Hn+=8;return this.Hn-=t,this.Hy>>>this.Hn&(1<<t)-1},a.prototype.mb=function(){var t=this.view.getUint8(this.offset);return this.offset+=1,t},a.prototype.Yc=function(t){return t=this.view.getUint16(this.offset,t),this.offset+=2,t},a.prototype.ya=function(t){return t=this.view.getUint32(this.offset,t),this.offset+=4,t},a.prototype.pI=function(){var t=this.view.getInt32(this.offset,void 0);return this.offset+=4,t},a.prototype.cta=function(t,e){var i=this.view.getUint32(this.offset+(t?4:0),t);return t=this.view.getUint32(this.offset+(t?0:4),t),e||0==(4278190080&i)||this.console.warn("Warning: read unsigned value > 56 bits"),4294967296*i+t},a.prototype.Td=function(t,e){return t=this.cta(t,e),this.offset+=8,t},a.prototype.dta=function(t,e){var i=this.view.getInt32(this.offset+(t?4:0),t);return t=this.view.getUint32(this.offset+(t?0:4),t),e||0==(4278190080&(0<i?i:-i))||this.console.warn("Warning: read signed value > 56 bits"),4294967296*i+t},a.prototype.rua=function(){var t=this.dta(void 0,void 0);return this.offset+=8,t},a.prototype.Ml=function(){return n.ko(this.ya())},a.prototype.EA=function(){var t,e,i,n,r,a;function o(t,e){return("000000"+t.toString(16)).slice(2*-e)}return t=this.ya(!0),e=this.Yc(!0),i=this.Yc(!0),n=this.Yc(),r=this.Yc(),a=this.ya(),[o(t,4),o(e,2),o(i,2),o(n,2),o(r,2)+o(a,4)].join("-")},a.prototype.oua=function(t){var e=this.view.byteOffset+this.offset;return this.view.buffer.slice(e,e+t)},a.prototype.mua=function(t){var e=[];if(0===t)return"";t=t||Number.MAX_SAFE_INTEGER;for(var i=this.mb();0!==i&&0<=--t;)e.push(i),i=this.mb();return String.fromCharCode.apply(null,e)},a.prototype.CA=function(t){var e,i;return void 0===e&&(e=1),void 0===i&&(i=!0),this.Mh(this.config.aB&&r.moa||r.nq,1,t,e,i)},a.prototype.kua=function(t,e,i){var n;return void 0===e&&(e=2),void 0===i&&(i=!0),void 0===n&&(n=!1),this.Mh(this.config.aB&&r.koa||r.zz,2,t,e,i,n)},a.prototype.BA=function(t,e,i){var n;return void 0===e&&(e=4),void 0===i&&(i=!0),void 0===n&&(n=!1),this.Mh(this.config.aB&&r.loa||r.$t,4,t,e,i,n)},a.prototype.pua=function(){for(var t=this.mb(),e=127&t;128&t;)e=e<<7|127&(t=this.mb());return e},a.prototype.Mh=function(t,e,i,n,r,a){return void 0===r&&(r=!0),void 0===a&&(a=!1),t=t(this.view,this.offset,i,n,a),this.offset=r||!n||n===e?this.offset+i*(n||e):this.offset+e,t},e.Zea=a},function(t,e,i){var w,r,n,a;function o(t,e,i,n){r.call(this,t,e,i,n)}function s(t,e,i){r.call(this,t,e,i,void 0)}w=i(100),r=i(231).ar,n=i(374),a=i(84).pS,o.prototype=Object.create(r.prototype),(s.prototype=Object.create(o.prototype)).aga=function(t,e){return"string"==typeof e?n[e]:e&&n.reset[t]||n.xwa[t]},s.prototype.Jua=function(t,e,i){return this.wa(t,e,!1,i,void 0)},s.prototype.Nua=function(t,e,i){return this.wa(t,e,!0,i,void 0)},s.prototype.wa=function(t,e,i,n,r){var a,o,s,u,c,h,f,l,p,d,b,m,g,v;function y(t){return o=a[t],void 0!==(s=o.Rh("traf"))&&void 0!==s.ck&&void 0!==(f=s.Rh("tfdt"))?void 0!==(u=s.Rh("trun")):void 0}if(!this.parse().done)return!1;if(!(a=this.Ua.moof)||0===a.length)return!1;if(void 0!==t)for(c=t,t=0;t<a.length;++t){if(!y(t,this.tc.console.trace))return!1;if(u.Lb>c||i&&u.Lb===c)break;c-=u.Lb}else if(!y(t=i?a.length-1:0,this.tc.console.trace))return!1;if(i&&t<a.length-1?(h=a[t+1],this.tc.Ie(this.Uyb-h.startOffset,h.startOffset)):!i&&0<t&&this.tc.Ie(o.startOffset,0),void 0===(h=s.Rh("tfhd")))return!1;if(f=s.Rh("tfdt"),l=u.Lb,p=s.Rh("saiz"),d=s.Rh("saio"),b=s.Rh(w.DR),m=s.Rh("sbgp"),!(!p&&!d||p&&d))return!1;if(g=s.Rh("sdtp"),this.Ua.mdat&&t<this.Ua.mdat.length)v=this.Ua.mdat[t];else if(t!==a.length-1)return!1;if(void 0===c&&(c=i?u.Lb:0),u.wa(s,h,v||this.tc,e,c,s.ck,i))u.hz&&(!i&&f&&f.wa(u.vwa),p&&d&&(p.wa(u.Nq,i),d.wa(b?0:p.zI,s.ck,i)),b&&b.wa(u.Nq,i),g&&g.wa(u.Nq,l,i),m&&m.wa(u.Nq,i));else if(i){if(0===u.Nq)return!1}else{if(t===a.length-1)return!1;this.tc.Ie(a[t+1].startOffset-o.startOffset,o.startOffset)}return n&&(e=this.aga(this.stream.profile,r))&&u.Qua(s,h,v,i,n,e),n=(i=this.tc.wa()).reduce(function(t,e){return t+e.byteLength},0),i={Ld:i,length:n,Qn:this.tc.view.byteLength},u.hz&&!v&&(i.Hq=s.ck+u.Hq,i.Yi=u.Yi),i},t.exports={cr:s,bA:function(t){var e=new ArrayBuffer(8),i=new DataView(e);return i.setUint32(0,t+8),i.setUint32(4,a("mdat")),e}}},function(t,e,i){var n,s,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(2),t=i(231),s=i(230),r=t.ar,n.__extends(a,r),a.prototype.wa=function(t){var e,r,a,o=this;return!!this.parse().done&&(!(!(e=this.Ua.moov)||0===e.length)&&(!!(r=e[0].Cl("tenc"))&&(a=new Uint8Array(r.pj),t.forEach(function(t){for(var e=t.from,i=!0,n=0;n<e.length;n++)if(a[n]!==e[n]){i=!1;break}i&&o.tc.Ru(t.from.length,t.to,r.vH)}),s.concat(this.tc.wa()))))},i=a,e.WJ=i},function(t,e){_esm(e),(t=e.Pj||(e.Pj={}))[t.Wb=0]="AUDIO",t[t.Mb=1]="VIDEO"},function(t,e,i){var a,d,c,b,m,o,g,s,v,y,w,u,n,_,E;_esm(e),e.nCa=void 0,t=i(2),a=i(17),d=t.__importStar(i(10)),c=t.__importDefault(i(6)),b=new c.default.Console("ASEJS_ERROR_DIRECTOR","asejs"),m=t.__importDefault(i(28)),o=t.__importDefault(i(802)),g=c.default.$q,s=g.$_,v={},y={},i=[m.default.yh.Ox,!1],t=[m.default.yh.Ox,!0],w=[m.default.yh.lF,!1],u=[m.default.yh.lF,!0],n=[m.default.yh.URL,!0],_=[-1,!1],E=[m.default.yh.lF,!1],v[s.b3b]=w,v[s.UNKNOWN_ERROR]=w,v[s.t6b]=w,v[s.Jeb]=w,v[s.UAa]=w,v[s.Veb]=w,v[s.Neb]=u,v[s.Mdb]=u,v[s.Xza]=E,v[s.Vza]=E,v[s.Ndb]=_,v[s.Odb]=E,v[s.Pdb]=E,v[s.Jdb]=w,v[s.Ldb]=w,v[s.Wza]=i,v[s.Kdb]=w,v[s.Idb]=E,v[s.V3b]=u,v[s.Xfb]=E,v[s.lDa]=E,v[s.kDa]=E,v[s.hDa]=E,v[s.iDa]=E,v[s.Wfb]=n,v[s.yca]=u,v[s.Aca]=n,v[s.zca]=t,v[s.oDa]=u,v[s.Zfb]=n,v[s.r0]=E,v[s.mDa]=u,v[s.Yfb]=u,v[s.Qeb]=u,v[s.Keb]=w,v[s.Rjb]=w,v[s.Aeb]=w,v[s.Beb]=w,v[s.Ceb]=w,v[s.Deb]=w,v[s.Eeb]=w,v[s.Feb]=w,v[s.Geb]=w,v[s.Heb]=w,v[s.Ieb]=w,v[s.Leb]=w,v[s.Meb]=w,v[s.Oeb]=w,v[s.Peb]=w,v[s.Reb]=w,v[s.Seb]=w,v[s.Teb]=w,v[s.Ueb]=w,v[s.Web]=w,v[s.Xeb]=w,v[s.Qjb]=E,v[s.TIMEOUT]=i,y[s.Xza]=!0,y[s.lDa]=!0,y[s.kDa]=!0,y[s.iDa]=!0,y[s.UAa]=!0,i=function(){for(var t=2;12!==t;)switch(t){case 2:e.prototype.Nb=function(){for(var t=2;1!==t;)switch(t){case 2:this.Xg.clear(),t=1;break;case 4:this.Xg.clear(),t=0}},e.prototype.aE=function(t){for(var e=2;1!==e;)switch(e){case 4:this.R$=t,e=7;break;case 2:this.R$=t,e=1}},e.prototype.ms=function(n,r,a,o){for(var s,t,u,e,c,h,f,i,l=2;15!==l;)switch(l){case 3:l=a&&d.isArray(v[a])?9:16;break;case 2:s=this,t=g.$_.name,u=a?t[a]:void 0,t={},e=this.config,c=this.ym,l=4;break;case 6:l=p!==_?14:15;break;case 14:l=void 0!==n.url?13:20;break;case 18:b.error("Invalid affected for network failure"),l=17;break;case 20:l=void 0!==n.host&&void 0!==n.port?19:18;break;case 12:i&&(t[i]=[n.url]),l=11;break;case 4:b.warn("Failure "+u+" on "+JSON.stringify(n)+" : critical error count = "+this.It),l=3;break;case 11:h=p[0],f=p[1],e.Ju?d.forEach(t,function(t,e){for(var i=2;5!==i;)2===i&&(p===E||p===w?s.Rta.NTb({url:void 0!==n.url?n.url:t[0],Md:e},{XPa:e,GZ:p,cD:r,ph:a,SVa:u,uj:o}):t.some(function(t){return c.ms(h,f,t),h===m.default.yh.lF}),!s.R$||0!==r&&void 0!==r||(t=void 0!==n.url?n.url:t[0])&&s.R$.Hva("error",t),i=5)}):d.forEach(t,function(t,e){for(var i=2;5!==i;)switch(i){case 1:t.some(function(t){return c.ms(h,f,t),h===m.default.yh.lF}),!s.R$||0!==r&&void 0!==r||(t=void 0!==n.url?n.url:t[0])&&s.R$.Hva("error",t),i=5;break;case 2:i=p!==E||s.KVb(e)?1:5}}),l=15;break;case 17:return;case 19:t=c.oXb(n.host,n.port),l=11;break;case 9:var p=v[a];this.Uz={cD:r,ph:a,SVa:u,uj:o},y[a]&&(++this.It,this.events.emit("criticalNetworkError",{type:"criticalNetworkError",ph:a})),l=6;break;case 13:i=c.x8a(n.url),l=12;break;case 16:a000.Z4L(1),b.error(a000.j4L("Unmapped failure code in JSASE error director : ",a)),l=15}},e.prototype.KVb=function(t){for(var e,i,n,r=2;7!==r;)switch(r){case 5:r=n.Po<this.GN?4:3;break;case 1:r=n?5:8;break;case 2:e=c.default.time.ea(),i=this.config,n=this.gxa[t],r=1;break;case 3:r=n.Po>=e-i.gaa||n.GA||(n.Po=e,++n.count,n.count<i.h8)?7:9;break;case 9:return n.GA=!0;case 8:this.gxa[t]={Po:e,count:1},r=7;break;case 4:n.Po=e,n.count=1,r=7}},t=3;break;case 3:e.prototype.hIb=function(t){for(var e,i,n,r=2;7!==r;)switch(r){case 3:e=this.Uz.ph,i=this.Uz.cD,n=this.Uz.uj,r=9;break;case 4:r=this.Uz?3:9;break;case 2:var a=this,o=c.default.time.ea()-this.GN,s=t,u=this.config;a000.N4L(4),b.warn(a000.J4L(" ms ago","Network has failed "," last success was ",o,t?"permanently":"temporarily")),!t&&o>u.Xra&&(s=!0),r=4;break;case 9:t||this.events.emit("temporaryNetworkError",{type:"temporaryNetworkError",errorCode:e,httpCode:i,nativeCode:n}),s?(this.YO&&(clearTimeout(this.YO),this.YO=void 0),this.nSa(),this.Rta.reset(),this.oIb({YKb:t,rRb:e,sRb:i,tRb:n})):this.YO||(this.YO=setTimeout(function(){for(var t=2;5!==t;)2===t&&(a.YO=void 0,a.l$(),t=5)},u.Yra)),r=7}},e.prototype.l$=function(){for(var t=2;1!==t;)2===t&&(this.YO||(this.ym.l$(),this.gxa={},this.Pr()),t=1)},e.prototype.Baa=function(t){for(var e,i=2;9!==i;)switch(i){case 2:e=this.config,this.GN=Math.max(t.timestamp||c.default.time.ea(),this.GN),this.nSa(),e.Ju&&this.Rta.Baa(t),i=3;break;case 3:this.events.emit("updatingLastSuccessEvent",{type:"updatingLastSuccessEvent"}),i=9}},e.prototype.Dsa=function(){for(var t=2;1!==t;)2===t&&(this.It=0,t=1)},t=6;break;case 6:return e.prototype.sk=function(){for(var e,t,i,n=2;4!==n;)switch(n){case 5:!t.kbb||this.IZ||t.Iaa&&t.TU&&t.zPb||(b.info("Setting underflow timeout in "+i+"ms"),this.IZ=setTimeout(function(){for(var t=2;4!==t;)2===t&&(a000.N4L(5),b.info(a000.J4L("Forcing permanent network failure after ","ms, since underflow with no success",i)),e.IZ=void 0,e.ym.ms(m.default.yh.Ox,!0),t=4)},i)),n=4;break;case 2:t=(e=this).config,i=t.c8,this.GN=Math.max(c.default.time.ea(),this.GN),n=5}},e.prototype.nSa=function(){for(var t=2;1!==t;)2===t&&(this.IZ&&(clearTimeout(this.IZ),this.IZ=void 0,b.info("Cleared underflow timeout")),t=1)},e}function e(t,e,i,n){for(var r=2;10!==r;)switch(r){case 9:this.Xg=new a.Wh,v[s.hDa]=e.hJb?u:E,this.Xg.addListener(this.ym,"networkFailed",this.hIb.bind(this)),r=14;break;case 2:this.ym=t,this.config=e,this.oIb=i,this.Pr=n,r=3;break;case 3:this.events=new a.EventEmitter,r=9;break;case 14:this.GN=c.default.time.ea(),this.It=0,this.gxa={},this.Rta=new o.default(t,n,e),r=10}}}(),e.nCa=i},function(t,e,i){var p,d,o;function n(t,e,i){this.NS=t,this.CF=0==Math.floor(1e6*Math.random())%i.mI,this.groupId=1,this.config=i,this.lz={},this.TD={},this.Pr=e}p=i(10),new(d=i(6).default).Console("ASEJS_PROBE_MANAGER","asejs"),o=i(803).$ya,(n.prototype.constructor=n).prototype.NTb=function(r,t){var e=this.NS,a=r.Md,i=e.b$a(r.url),n=e.U7(r.url),o=this.config,s=d.time.ea(),u=t,c=[],h=i.Hl[0],f=!1,l=this.lz[a];if(l){if(l.Po>=s-o.gaa)return}else l=this.lz[a]={count:0,Po:s,GA:!1,error:t,Qva:[],Tta:{}};l.GA||(h&&n.id===h.id&&(r.isPrimary=!0),l.Po=s,l.GA=!1,l.error=t,++l.count,i&&i.urls&&0!==i.urls.length&&(p.forEach(i.urls,function(t){var e=t.Pc.id,i=e+"-"+a,n=this.TD[i];void 0!==n&&void 0!==n.T9||(n&&n.ep&&clearTimeout(n.ep),t=this.sTa(t.url,r,e),this.TD[i]={$:!1,count:0,T9:t.mi()},c.push(t.mi()),f=!0),-1===l.Qva.indexOf(e)&&l.Qva.push(e)},this),this.CF&&0<c.length&&(i={type:"logdata",target:"endplay",fields:{}},t=u,u={ts:d.time.ea(),es:t.XPa,fc:t.ph,fn:t.SVa,nc:t.uj,pb:c,gid:this.groupId},t.cD&&(u.hc=t.cD),i.fields.errpb={type:"array",value:u,adjust:["ts"]},e.Ln(i)),f&&this.groupId++))},n.prototype.sTa=function(t,e,i){var n,r,a=this.NS.U7(e.url);return a&&a.wb&&a.wb.gu&&a.wb.gu.Ga||Math.random(0,1),a=new o(this),n=t.split("?"),r="random="+parseInt(1e7*Math.random(),10),a.mRb(1<n.length?t+"&"+r:t+"?"+r,e,i),a},n.prototype.OTb=function(e,i){var n,r,a=this.NS,t=this.config,o=i.Md,s=this.lz[o],u=e.url,c=this.TD[e.Md+"-"+o];s&&(n=s.error,c&&(c&&c.ep&&clearTimeout(c.ep),c.$=!0,c.count=0,c.T9=void 0,s.Tta[e.Md]=!0,(c=this.lz[e.Md])&&!0===c.GA&&t.Ay&&(a.L7a(e.Md,c.error.GZ[1]),this.CF&&((c={type:"logdata",target:"endplay",fields:{}}).fields.errst={type:"array",value:{ts:d.time.ea(),id:e.requestId,servid:i.Md,gid:e.groupId||-1},adjust:["ts"]},a.Ln(c)),this.lz[e.Md]=void 0,this.Pr()),u!==i.url&&((r=this.TD[o+"-"+o])&&r.$||(o=(o=a.U7(u))&&o.wb&&o.wb.gu&&o.wb.gu.Ga||Math.random(0,1)*t.d8,o=Math.min(o,t.d8),setTimeout(function(){var t;!1!==s.GA||r&&r.$||(s.GA=!0,a.ms(n.GZ[0],n.GZ[1],i.url,n),!this.CF)||((t={type:"logdata",target:"endplay",fields:{}}).fields.erep={type:"array",value:{ts:d.time.ea(),id:e.requestId,servid:i.Md,gid:e.groupId||-1},adjust:["ts"]},a.Ln(t))}.bind(this),o))),this.CF&&((c={type:"logdata",target:"endplay",fields:{}}).fields.pbres={type:"array",value:{ts:d.time.ea(),id:e.requestId,result:1,servid:e.Md,gid:e.groupId||-1},adjust:["ts"]},a.Ln(c))))},n.prototype.LTb=function(e,i){var t,n,r,a=this.NS,o=parseInt(i.Md,10),s=this.lz[o],u=parseInt(e.Md,10),c=this.TD[u+"-"+o],h=0,f=this.config;c&&s&&(c.$=!1,c.T9=void 0,s.Tta[u]=!1,t=s.Qva,f.Ay&&u===o&&i.isPrimary&&(n=(n=a.U7(i.url))&&n.wb&&n.wb.gu&&n.wb.gu.Ga||300*Math.random(0,1),n*=Math.pow(2,c.count),n=Math.min(n,12e4),n+=Math.random(0,1)*(n<1e4?100:1e4),c.ep=setTimeout(function(){var t;c.ep=void 0,(t=this.sTa(e.url,i,u)).HXb(e.groupId),c.T9=t.mi()}.bind(this),n)),++c.count,u===o&&(h=0,t.forEach(function(t){!1===s.Tta[t]&&h++}),t.length===h&&s.count>=f.h8)&&(r=s.error,s.GA=!0,p.forEach(a.b$a(i.url).urls,function(t){var e;a.ms(r.GZ[0],r.GZ[1],t.url,r),this.CF&&((e={type:"logdata",target:"endplay",fields:{}}).fields.erep={type:"array",value:{ts:d.time.ea(),id:-1,servid:t.Pc.id},adjust:["ts"]},a.Ln(e))},this)),this.CF&&((o={type:"logdata",target:"endplay",fields:{}}).fields.pbres={type:"array",value:{ts:d.time.ea(),id:e.requestId,result:0,servid:e.Md,gid:e.groupId||-1},adjust:["ts"]},a.Ln(o)))},n.prototype.Baa=function(t){var e,i,n=t.url||t.mediaRequest.url;n&&(n=(t=this.NS).x8a(n),e=this.lz[n],i=this.TD[n+"-"+n],e&&e.GA&&this.config.Ay&&(t.L7a(e.error.XPa,!1),this.CF&&((e={type:"logdata",target:"endplay",fields:{}}).fields.errst={type:"array",value:{ts:d.time.ea(),id:-1,servid:n},adjust:["ts"]},t.Ln(e)),this.lz[n]=void 0,i&&i.ep&&clearTimeout(i.ep)))},n.prototype.reset=function(){var t,e,i=this.TD;for(e in i)i.hasOwnProperty(e)&&(t=i[e+"-"+e])&&t.ep&&clearTimeout(t.ep);this.TD={},this.lz={}},t.exports=n},function(t,e,i){var n,r,a,o;function s(t){var e=o.call(this)||this;return e.xOa=t,e.c2=t.groupId,e.Gi=new r.Wh,e.Gi.on(e,a.Le.CR,e.Iga),e.Gi.on(e,a.Le.bF,e.RS),e}_esm(e),e.$ya=void 0,n=i(2),r=i(17),a=n.__importDefault(i(6)).default.zv,o=a,n.__extends(s,o),s.prototype.mRb=function(t,e,i){a.prototype.open.call(this,t,e,i)},s.prototype.HXb=function(t){this.c2=t},Object.defineProperties(s.prototype,{groupId:{get:function(){return this.c2},enumerable:!1,configurable:!0}}),s.prototype.ed=function(){this.Gi&&this.Gi.clear(),a.prototype.ed.call(this)},s.prototype.Iga=function(t){this.xOa.OTb(t.probed,t.affected),this.ed()},s.prototype.RS=function(t){this.xOa.LTb(t.probed,t.affected),this.ed()},e.$ya=s},function(t,e,i){var c,h,a,n,o,f,l,p,d;function r(t,e,i,n,r,a,o,s,u,c,h){var f=d.call(this,t)||this;return f.fe=t,f.H=e,f.I=i,f.Ln=n,f.SC=a,f.l7=o,f.Kv=s,f.OOa=u,f.qh=c,f.HNa=[void 0,void 0],f.uha=[],f.ES=null!=h?h:{Lv:[Object.create(null),Object.create(null)]},r?f.IV=r:(f.Ee=p.lp.instance.Ht("headers",""+f.fe.W,!0,!1,{},f.I),f.Ee.xb()),f}_esm(e),e.sDa=void 0,c=i(2),h=i(142),a=i(378),n=i(16),o=c.__importDefault(i(6)),t=i(83),f=i(381),l=i(5),p=i(125),d=t.kv,c.__extends(r,d),Object.defineProperties(r.prototype,{Lv:{get:function(){return this.ES.Lv},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{LB:{get:function(){return this.ES.LB},set:function(t){this.ES.LB=t},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{MK:{get:function(){return this.ES.MK},set:function(t){this.ES.MK=t},enumerable:!1,configurable:!0}}),r.prototype.ed=function(){var n=this;this.Lv.forEach(function(t,e){for(var i in t)t[i].ed(),n.Xka(e,i)}),this.Ee&&p.lp.instance.oM(this.Ee),this.Ee=void 0},r.prototype.Xk=function(t,e){return this.Lv[t][e]},r.prototype.A6=function(){return!(!this.LB||!this.LB.length)},r.prototype.Ija=function(){this.LB=void 0},r.prototype.kP=function(t){this.LB=t},r.prototype.yxa=function(){var t,e;if(!this.A6()||this.MK)return!1;for(h.Qm.kq(1);0<this.LB.length;)if(t=this.LB.shift(),(e=this.fe.ww(1,t))&&!this.xIb(t)&&e.lu)return this.MK=t,this.yaa(e,{offset:0,uP:!0});return!1},r.prototype.Sxa=function(i,t){var n=this;t.forEach(function(t){var e=n.Xk(i,t.Oa);e&&!t.je&&(e.stream.je?t.h4(e.stream):(e.vX||(e.vX=[]),e.vX.push(n.fe)))})},r.prototype.UO=function(a,o,s){var t,u=this,c=this.fe;n.zf.forEach(function(t){var e,i,n,r;!c.kc(t)||void 0!==s&&t!==s||(n=a[t],l.assert(n&&c.getTrackById(n.trackId)===n),n=n.$d,c.jk?u.H.warn("requestHeadersFromManifest, shutdown detected"):c.ym.LZ(c.W,n)?(r=null!==(r=null===(i=null===(e=u.SC(t))||void 0===e?void 0:e.AH)||void 0===i?void 0:i.bitrate)&&void 0!==r?r:0,void 0===(e=f.gma(n,r))&&u.H.warn("Unable to find stream for bitrate "+r),e=n[e],(i=c.Xk(t,e.Oa))&&i.stream.U?c.$0b(t,i):(t={offset:0,uP:!1,IC:1===t,qw:!0,aO:!u.l7(c)},c.lTa(e,t,o))):u.H.warn("requestHeadersFromManifest, unable to update urls"))}),c.H6=!0,null!==(t=this.qh)&&void 0!==t&&t.call(this,c.Pb).L3()},r.prototype.pE=function(t,e){var i,n,r=this.I,a=this.Xk(t.mediaType,t.Oa);return a?(a.stream.U||a.uP&&this.kSa(a),!1):(a=this.Umb,i=this.Vmb,(void 0===r.Mra||void 0===a||void 0===i||!((n=o.default.time.ea())-a<r.Mra||n-i<r.Mra))&&(t=this.yaa(t,{url:t.url,offset:0},void 0,void 0,e),this.Vmb=o.default.time.ea(),t))},r.prototype.yaa=function(t,e,i,n,r){var a,o,s,u=t.mediaType;if(h.Qm.kq(u),s=t.Oa,this.qlb(s,!!e.qw))return null!==(o=this.OOa)&&void 0!==o&&o.call(this),!1;if(o=this.Xk(u,s))t=!1;else{if(a=!!(o=c.__assign(c.__assign({},e),{fa:null!==(a=e.fa)&&void 0!==a?a:this.amb(t)})).IC,s=!!o.aO,r=this.IV?this.IV(u,!!o.qw,a,s,!!i):r||this.Ee,l.assert(r),t.url&&(this.SC(u).qqa=t.url),o=t=this.KMa(t,r,o),!t.oO())return this.fe.Nh("MediaRequest open failed (2)","NFErr_MC_StreamingFailure"),!1;t=!0}return e.qw&&n&&(this.fe.sh[u]=o),null!==(o=this.OOa)&&void 0!==o&&o.call(this),t},r.prototype.Om=function(){var r=this,a=[];return this.Lv.forEach(function(t,e){var i,n;for(n in h.Qm.kq(e),t)1===(i=(e=t[n]).Txa())?a.push(e):2===i&&r.fe.Nh("swapUrl failure")}),a},r.prototype.tk=function(t){var e=t.mediaType,i=h.Qm.kq(e);this.fe.jk?i.warn("header onrequestcomplete ignored, session shutdown:",t.toString()):(this.Ln({type:"logdata",target:"startplay",ic:{usedNativeDataView:t.W1b}}),t.BX>t.pRb&&(this.HNa[e]=t.BX),t.uP&&this.kSa(t),this.zmb(t),this.Umb=o.default.time.ea(),this.fe.eu.emit("onHeaderRequestComplete",t)),this.Ut(t)},r.prototype.Z2=function(t,e,i){var n=t.mediaType;return h.Qm.kq(n),n=this.fe.ww(n,t.Oa),e===!!t.Tk&&(this.APa(t),t.drb(n),this.sMa(t),this.fe.eu.emit("onHeaderFromCache",{header:t,wDb:i}),!0)},r.prototype.yL=function(t,e){var i,n,r=[],a=this.Lv[t];for(i in a)(n=a[i])&&!n.stream.U&&n.Yo===e&&(this.Xka(t,i),r.push({stream:n.stream,offset:n.offset,fa:n.fa,IC:n.IC,qw:n.qw,aO:n.aO,Xsa:n.Xsa}),n.ed());return r},r.prototype.hva=function(t){var e=this;t.forEach(function(t){e.yaa(t.stream,t)})},r.prototype.APa=function(t){this.Lv[t.mediaType][t.Oa]=t},r.prototype.xIb=function(t){return!!this.Xk(1,t)},r.prototype.zmb=function(t){var e,i,n=this.I,r=h.Qm.kq(t.mediaType),a=t.stream.U;if(n.Gka){e=a.length,r.trace("fragment count:",e);for(var o=0;o<e;++o)i=a.get(o),r.trace("fragment: "+o+", startPts: "+i.Z+", duration: "+i.duration+", offset: "+i.offset)}if(this.sMa(t),n.tA&&n.tA.enabled&&void 0===a.Th&&n.tA.simulatedFallback){for(e=a.length,n=new Uint8Array(e),o=0;o<e;++o)n[o]=Math.max(0,t.stream.sb+this.Mob(o));a.gYb(n)}},r.prototype.sMa=function(e){var i=e.mediaType,n=e.Oa;h.Qm.kq(i),e.vX&&(e.vX.forEach(function(t){(t=t.ww(i,n))&&t!==e.stream&&!t.je&&t.h4(e.stream)}),e.vX=void 0),this.fe.eIb(e)},r.prototype.KMa=function(t,e,i){var n=this,r=h.Qm.kq(t.mediaType);return(t=new a.vba(t,this.I,e,i,this,!1,r)).addListener("headerRequestCancelled",function(t){n.ymb(t.request)}),t.xb(void 0),this.APa(t),t},r.prototype.qlb=function(t,e){return!!(this.Kv&&(t=this.Kv.BW(this.fe.J,t))&&this.Z2(t,!1,e))},r.prototype.amb=function(t){var e=t.zs,i=t.P,n=i.duration,r=this.I;return i.sf.Vg?r.UVa||r.G6:r.T1b&&e?e.offset+e.size:(t=this.HNa[t.mediaType])?t+128:r.Ola?2292+12*Math.ceil(n/2e3):r.G6},r.prototype.ymb=function(t){this.Xka(t.mediaType,t.Oa)},r.prototype.Xka=function(t,e){delete this.Lv[t][e]},r.prototype.kSa=function(t){this.MK===t.Oa&&(this.MK=void 0)},r.prototype.Mob=function(t){var e=this.I.tA.fallbackBound;return void 0===this.uha[t]&&(this.uha[t]=Math.floor(2*Math.random()*e)-e),this.uha[t]},i=r,e.sDa=i},function(t,e,i){var n,a,o;function r(t,e,i,n){var r=o.call(this)||this;return r.H=t,r.track=e,r.Co=!1,r.iga=!1,r.Xg=new a.Wh,r.Xg.on(e,"networkfailing",function(){r.emit("networkfailing")}),r.Xg.on(e,"error",function(){r.H.warn("requestQueue got error"),r.emit("error")}),i?(r.Co=!0,Promise.resolve().then(function(){return r.emit("created")})):r.Xg.on(e,"created",function(){r.Co=!0,r.emit("created")}),r.iga=n,r}_esm(e),e.UJa=void 0,n=i(2),a=i(17),o=a.EventEmitter,n.__extends(r,o),Object.defineProperties(r.prototype,{k5:{get:function(){return this.track.k5},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{ph:{get:function(){return this.track.ph},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{uj:{get:function(){return this.track.uj},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{$U:{get:function(){return this.track.$U},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{config:{get:function(){return this.track.config},enumerable:!1,configurable:!0}}),r.prototype.xb=function(){var t,e;this.iga||(null!==(e=(t=this.track).xb)&&void 0!==e&&e.call(t),this.iga=!0)},r.prototype.ku=function(){return this.track.ku()},r.prototype.toString=function(){return this.track.toString()},r.prototype.toJSON=function(){return this.track},r.prototype.Yp=function(){this.Xg.clear()},e.UJa=r},function(t,e,i){var n,f,p,a,d,b,u,r;function m(t){return t.gf!==b.Ul}function o(t,e){(t.gf===b.TEMPORARY||t.gf===b.rl&&e)&&(t.gf=b.Ul),t.children&&t.children.forEach(function(t){t&&o(t,e)})}_esm(e),e.Uca=void 0,n=i(2),f=n.__importStar(i(10)),t=i(17),p=n.__importDefault(i(28)),a=n.__importDefault(i(6)),d=new a.default.Console("ASEJS_LOCATION_SELECTOR","media|asejs"),(r=b=b||{})[r.Ul=0]="OK",r[r.TEMPORARY=1]="TEMPORARY",r[r.rl=2]="PERMANENT",(r=u=u||{})[r.Ux=0]="STARTUP",r[r.zjb=1]="REBUFFER",i=function(s){function t(t,e,i,n,r){for(var a,o=2;27!==o;)switch(o){case 2:(a=s.call(this)||this).Qb=e,a.Kh=i,a.config=n,o=3;break;case 14:a.urls={},a.streams={},a.nA=[],a.P8=!1,o=10;break;case 15:return a;case 18:a.fP=p.default.kF.Ux,a.AL(t),o=15;break;case 3:a.Lnb=r,a.RTb=u.Ux,a.Xz=void 0,a.Hl={},a.Pl={},o=14;break;case 10:a.Uo={id:"network",vn:p.default.yh.Ox,gf:b.Ul,Tw:void 0,parent:void 0,children:a.nA},a.m2=null,a.eP=null,o=18}}for(var e=2;26!==e;)switch(e){case 2:n.__extends(t,s),t.prototype.sHb=function(){return this.nA[0].wb},t.prototype.Pt=function(){return m(this.Uo)},e=4;break;case 20:t.prototype.Nb=function(){for(var t=2;1!==t;)2===t&&(this.config.SMb&&this.lSb(),t=1)},t.prototype.i6a=function(t){for(var o,e=2;5!==e;)2===e&&(o=this,t.streams.forEach(function(t){var e;for(n=2;6!==n;)switch(n){case 3:o.streams[a.id]=a,n=9;break;case 1:n=f.ia(a)?5:9;break;case 2:e=t.downloadable_id,a=o.streams[e],n=1;break;case 5:var i=t.content_profile,a={id:e,bitrate:t.bitrate,sb:t.vmaf,type:t.type,profile:i,clear:0===i.indexOf("none-"),ju:!0,urls:[],NZ:{},Hl:[]},n=3;break;case 9:t.urls.forEach(function(t){for(var e,i,n,r=2;13!==r;)switch(r){case 5:e=t.location,n={id:i,vn:p.default.yh.URL,gf:b.Ul,Tw:void 0,parent:t,children:[],url:i,Pc:t,stream:a},r=3;break;case 1:r=f.ia(n)&&(t=o.Pl[t.cdn_id])?5:13;break;case 2:i=t.url,n=o.urls[i],r=1;break;case 3:o.urls[i]=n,t.children.push(n),a.urls.push(n),0===a.Hl.filter(function(t){return t.id===e.id}).length&&a.Hl.push(e),r=6;break;case 6:(i=(e.streams[a.id]=a).NZ[e.id])?i.push(n):a.NZ[e.id]=[n],r=13}}),f.mf(a.NZ,function(t){for(var e=2;1!==e;)2===e&&(t.sort(function(t,e){return t.Pc.uc-e.Pc.uc}),e=1)}),a.Hl=a.Hl.sort(function(t,e){return t.level-e.level||t.uc-e.uc}),n=6}}),e=5)},t.prototype.e1b=function(){for(var t,i,e,n,r=2;13!==r;)switch(r){case 4:t=a.default.time.ea(),r=3;break;case 2:e=(i=this).config,n=this.nA.filter(function(t){return!m(t)&&0!==t.level}),r=1;break;case 1:r=0===n.length?5:4;break;case 5:return null;case 3:r=null===this.m2||this.m2+e.zqa<t?9:8;break;case 8:return e=this.fP,n.sort(function(t,e){return t.level-e.level||t.uc-e.uc}),this.Xz||f.Bb(e)||(this.Xz=!0),n;case 9:n.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.id!==i.Qb.location&&(t.wb=i.Kh.get(t.id)),e=1)}),this.m2=t,r=8}},e=17;break;case 17:return t.prototype.OVb=function(t){for(var i,e=2;3!==e;)switch(e){case 5:this.RTb=t,this.nA.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.id!==i&&t.wb&&t.wb.confidence>p.default.Nf.pB&&(t.wb.confidence=p.default.Nf.pB),e=1)}),e=3;break;case 2:i=this.Qb.location,this.Xz=!1,e=5}},t.prototype.lSb=function(){for(var i,t=2;5!==t;)2===t&&((i=this).P8||this.nA.forEach(function(t){for(var e=2;1!==e;)2===e&&(t.gf===b.TEMPORARY&&i.Kh.fail(t.id,a.default.time.ea()),e=1)}),t=5)},t.prototype.dump=function(){},t;case 7:t.prototype.LZ=function(t,e){for(var n,o,s,r,u,c,i=2;19!==i;)switch(i){case 2:o=(n=this).config,s=this.Qb.get(),r=0,a.default.Ft&&a.default.Ft(t),i=5;break;case 5:i=m(this.Uo)?4:3;break;case 13:u=this.eP,i=12;break;case 4:return!1;case 3:c=p.default.Nf.pB,o.bX&&(c=p.default.Nf.Dx),this.Qb.location&&s.confidence>=c&&(t=this.Hl[this.Qb.location])&&(t.wb=s),f.Bb(this.eP)&&(this.eP=this.e1b()),i=6;break;case 12:i=u.length?10:11;break;case 11:return this.ms(p.default.yh.Ox,!1),!1;case 6:i=this.eP?13:14;break;case 14:return this.ms(p.default.yh.Ox,!1),!1;case 10:return e.forEach(function(a,t){for(var i,e=2;5!==e;)2===e&&(i=a.id,u.some(function(n){for(var t,r,e=2;8!==e;)switch(e){case 2:t=n.streams[i],e=1;break;case 1:e=t?4:5;break;case 5:return!1;case 4:r=t.Hl[0],e=3;break;case 3:return void 0===a.S9&&(a.S9=r.id,a.Qta=t.NZ[r.id][0].Pc.id),t.NZ[n.id].some(function(t){for(var e=2;12!==e;)switch(e){case 5:e=m(t)?4:3;break;case 2:e=m(t.Pc)?1:5;break;case 1:return t.Pc.gf===b.TEMPORARY&&(a.gf=b.TEMPORARY),o.Ju&&a.Pc===t.Pc.id&&t.Pc.Tw&&(a.Tw=t.Pc.Tw),!1;case 3:var i="unknown";a.location!==n.id&&(o.Ju?a.Wpa=n.id===r.id:i=n!==u[0]?""+p.default.kF.Dba:void 0===a.location?""+p.default.kF.Ux:f.ia(a.b1a)||a.b1a===n.id?f.ia(a.e1a)||a.e1a===t.Pc.id?"performance":"serverfailover":"locationfailover",a.location=n.id,a.Aqa=n.level,a.ws=i),a.url=t.url,a.Pc=t.Pc.id,e=6;break;case 6:return a.HI=t.Pc.name,a.wb=o.Jia?n.wb.confidence>=p.default.Nf.Dx||s.confidence<c?n.wb:s:s.confidence===p.default.Nf.HAVE_NOTHING||n.wb.confidence>=p.default.Nf.Dx?n.wb:s,!0;case 4:return!1}})}})?(a.Ez=!1,a.gf=void 0,a.ju&&++r):a.gf&&a.gf===b.TEMPORARY?n.Uo.gf=b.TEMPORARY:a.Ez||(d.warn("Failing stream ["+t+"] "+i+" ("+a.bitrate+" Kbps)"),a.Zub(),a.Ez=!0),e=5)}),m(this.Uo)?(d.warn("Network has failed, not updating stream selection"),this.P8=!0,this.emit("networkFailed",this.Uo.gf===b.rl),!1):!!r||(d.warn("Did not find a URL for ANY stream..."+(e.length?"":"(empty stream list)")),this.ms(p.default.yh.Ox,!0),!1)}},t.prototype.oXb=function(s,u){var c={},h=/^http(s?):\/\/([^\/:]+):?([0-9]*)/;return f.forEach(this.urls,function(t,e){for(var i,n=2;7!==n;)switch(n){case 4:var r,a="s"===r[1],o=r[2];(r=r[3]).length||(r=a?"443":"80"),f.Se(o)&&f.Se(r)&&o===s&&r==u&&(i?i.push(e):c[t]=[e]),n=7;break;case 5:n=r&&4===r.length?4:7;break;case 2:t=t.parent?t.parent.id:"",i=c[t],r=e.match(h),n=5}}),c},t.prototype.ms=function(t,e,i,n){for(var r,a,o,s,u,c,h,f,l=2;42!==l;)switch(l){case 44:throw Error("Invalid failure state");case 27:a.call(i,t+(e.length?"/"+e.join("/"):"")+" : was "+function(t){switch(t.gf){case b.Ul:return"OK";case b.rl:return"FAILED PERMANENTLY";case b.TEMPORARY:return"FAILED TEMPORARILY";default:return"INVALID"}}(s)),l=26;break;case 10:r=f,l=20;break;case 4:l=s?3:43;break;case 12:l=f?11:27;break;case 28:l=44;break;case 22:this.P8=this.P8||m(this.Uo),u<(c=this.Uo.gf)&&(d.warn("Emitting networkFailed, permanent =",c===b.rl),this.emit("networkFailed",c===b.rl)),this.eP=null,l=33;break;case 30:l=o===b.TEMPORARY?24:29;break;case 5:s=s.parent,l=1;break;case 9:a=(i=d).warn,l=7;break;case 26:l=(o=s.gf)===b.rl?25:30;break;case 20:e.unshift(r.id+"("+r.name+")"),l=19;break;case 18:l=h===p.default.yh.LOCATION?17:16;break;case 17:e.unshift(f.id),l=19;break;case 2:s=t!==p.default.yh.Ox&&i?this.urls[i]:this.Uo,u=this.Uo.gf,c=e?b.rl:b.TEMPORARY,l=1;break;case 1:l=s&&s.parent&&s.vn!==t?5:4;break;case 33:this.fP=p.default.kF.Mf,n&&(this.fP=p.default.kF.djb,s.Tw=n),this.dump(),l=42;break;case 11:l=(h=f.vn)===p.default.yh.lF?10:18;break;case 43:a000.N4L(1),d.warn(a000.J4L("Unable to find failure entity for URL ",i)),l=42;break;case 24:s.gf=c,function t(e){var i,n,r=!1;(e=e.parent)&&e.children&&((i={})[b.Ul]=[],i[b.rl]=[],i[b.TEMPORARY]=[],(n=e.children).forEach(function(t){t&&i[t.gf].push(t)}),0<i[b.Ul].length||(i[b.rl].length===n.length?e.gf!==b.rl&&(e.gf=b.rl,d.error("PERM failing :",p.default.yh.name[e.vn]+" "+e.id),r=!0):(e.gf===b.Ul&&(e.gf=b.TEMPORARY,d.error("TEMP failing :",p.default.yh.name[e.vn]+" "+e.id),r=!0),i[b.TEMPORARY].forEach(function(t){t.gf=b.Ul})),r&&t(e)))}(s),l=22;break;case 25:return;case 15:e.unshift("<url for "+f.stream.bitrate+">"),l=19;break;case 13:f=s,l=12;break;case 29:l=o===b.Ul?24:28;break;case 19:f=f.parent,l=12;break;case 3:l=c!==s.gf?9:42;break;case 16:l=h===p.default.yh.URL?15:19;break;case 7:t=(e?"PERM":"TEMP")+" failure reported for "+p.default.yh.name[t]+" at ",e=[],l=13}},t.prototype.L7a=function(t,e){for(var i=2;3!==i;)switch(i){case 1:o(t,e),function t(e){var i;(e=e.parent)&&0<e.children.length&&e.gf!==b.Ul&&((i={})[b.Ul]=[],i[b.rl]=[],i[b.TEMPORARY]=[],e.children.forEach(function(t){t&&i[t.gf].push(t)}),0<i[b.Ul].length&&(e.gf=b.Ul,t(e)))}(t),i=5;break;case 2:i=(t=this.Pl[t])?1:5;break;case 8:i=(t=this.Pl[t])?3:1;break;case 5:this.eP=null,this.fP=p.default.kF.Ida,i=3}},t.prototype.l$=function(){for(var t=2;1!==t;)switch(t){case 2:o(this.Uo,!1),t=1;break;case 4:o(this.Uo,-3),t=6}},t.prototype.Ln=function(t){for(var e,i=2;5!==i;)2===i&&(null!==(e=this.Lnb)&&void 0!==e&&e.call(this,t),i=5)},t.prototype.sk=function(){for(var t=2;1!==t;)2===t&&(this.OVb(u.zjb),t=1)},e=20;break;case 4:t.prototype.x8a=function(t){for(var e=2;5!==e;)switch(e){case 1:case 9:return t.parent.id;case 2:e=(t=this.urls[t])&&t.parent?1:5}},t.prototype.U7=function(t){for(var e=2;5!==e;)switch(e){case 1:return t.Pc.location;case 2:e=(t=this.urls[t])&&t.Pc?1:5}},t.prototype.b$a=function(t){for(var e=2;5!==e;)switch(e){case 1:return t.stream;case 2:e=(t=this.urls[t])?1:5}},t.prototype.AL=function(t){for(var o,e=2;11!==e;)switch(e){case 14:this.nA=t,this.Uo.children=t,this.dump(),e=11;break;case 2:o=this,t.locations.forEach(function(t){for(var e,i,n,r,a=2;8!==a;)switch(a){case 2:e=t.key,a=1;break;case 5:i=[],n=o.Kh.get(e),r=o.Uo,t={id:e,vn:p.default.yh.LOCATION,gf:b.Ul,uc:t.rank,level:t.level,weight:t.weight,Tw:void 0,parent:r,children:i,Pl:i,streams:{},wb:n},o.Hl[t.id]=t,r.children.push(t),a=8;break;case 1:a=o.Hl[e]?8:5}}),this.m2=a.default.time.ea(),this.nA.sort(function(t,e){return t.level-e.level||t.uc-e.uc}),t.servers.forEach(function(t){for(var e,i,n,r=2;6!==r;)switch(r){case 5:e=o.Hl[t.key],r=4;break;case 7:e.children.push(t),r=6;break;case 1:r=o.Pl[i]?6:5;break;case 4:r=e?3:6;break;case 2:i=t.id,r=1;break;case 3:n=[],t={id:i,vn:p.default.yh.lF,gf:b.Ul,Tw:void 0,parent:e,children:n,urls:n,name:t.name,type:t.type,uc:t.rank,location:e},o.Pl[t.id]=t,r=7}}),e=9;break;case 9:t.audio_tracks.forEach(function(t){for(var e=2;1!==e;)switch(e){case 2:o.i6a(t),e=1;break;case 4:o.i6a(t),e=5}}),t.video_tracks.forEach(function(t){for(var e=2;1!==e;)switch(e){case 2:o.i6a(t),e=1;break;case 4:o.i6a(t),e=8}}),(t=this.nA.filter(function(t){var e;return(e=t.Pl.every(function(t){return 0===t.urls.length}))&&(t.Pl.forEach(function(t){for(var e=2;1!==e;)2===e&&(o.Pl[t.id]=void 0,e=1)}),o.Hl[t.id]=void 0,t.parent=void 0,t.children.length=0,t.streams={}),!e})).forEach(function(t){for(var e=2;1!==e;)2===e&&(t.Pl.sort(function(t,e){return t.uc-e.uc}),e=1)}),e=14}},e=7}}(t.EventEmitter),e.Uca=i},function(t,e,i){var o,s,n,r,a,u,c,h,f;function l(t,e,i,n){this.config=t,this.mediaType=e,this.pc=i,this.console=n}_esm(e),e.jGa=void 0,o=i(22),s=i(5),n=i(808),r=i(809),a=i(810),u=i(811),c=i(812),h=i(813),f=i(814),l.prototype.append=function(t,e){var i,n=e.endOfStream,r=e.r8,a=e.eX;return void 0===this.track?this.vN(t.stream):this.track!==t.stream.track&&(s.assert(this.track.sa),s.assert(t.stream.track.sa),s.assert(1===this.mediaType||this.track.sa.equal(t.stream.track.sa)),this.track=t.stream.track),s.assert(void 0!==this.Ct),e={Ld:t,offset:null!==(i=t.bua)&&void 0!==i?i:o.T.Gb,Ue:this.config.v$},i=(e=this.Ct.reduce(function(t,e){return e.append(t,{endOfStream:n,r8:r,eX:a})},e)).Ld,e=e.offset,i.wa&&t.Bk(i.wa),e},l.prototype.reset=function(){this.Ct=this.track=void 0},l.prototype.vN=function(t){var e,i;this.track=t.track,this.Ct=[],0===this.mediaType&&(this.config.v$&&this.Ct.push(new a.hKa(this.config,t.track,this.console)),(i=this.hja(t)).equal(o.T.Gb)?this.config.fm&&t.uf&&this.opa(t.P.W)&&this.Ct.push(new h.oEa(this.config)):this.Ct.push(new n.pea(i)),this.config.zra||(this.console.log("MediaSplicer: NegativePtsGuard: "+i.Zd()+", "+(null===(e=t.uf)||void 0===e?void 0:e.Zd())),this.Ct.push(new u.DGa(this.config,t,this.console))),this.WKb()&&(this.config.ah||this.Ct.push(new f.jza(t,this.config,this.pc,this.console)),this.Ct.push(new r.MGa(this.config,t,this.console)),this.EYb(t)&&(s.assert(t.sa),this.Ct.push(this.Mvb(t.uf||o.T.Gb,t.sa,i)))))},l.prototype.opa=function(t){return this.config.opa||this.config.Q_a&&-1!==this.config.Q_a.indexOf(t)},l.prototype.hja=function(t){return n.pea.hja(this.config,t.uf,this.pc,this.console)},l.prototype.WKb=function(){return!this.config.WD},l.prototype.EYb=function(t){return this.config.A0b&&this.config.fm&&!!t.uf},l.prototype.Mvb=function(t,e,i){return new c.JLa(t.Qa(i),e,this.console)},e.jGa=l},function(t,e,i){var a,o;function n(t){this.uf=t}_esm(e),e.pea=void 0,a=i(22),o=i(20),n.hja=function(t,e,i,n){var r=a.T.Gb;return e&&(i=null==i?void 0:i.H9b,t.J1b&&void 0!==i&&0<=i?(t=new a.T(i,48e3),r=e.add(t),o.ga&&n.trace("Adjusting profile timestamp offset of "+e+" by DPI assumed delay of "+t+" for ASE applied offset of "+r+".")):t.fG&&(r=e)),r},n.prototype.append=function(t){var e=t.Ue;return{Ld:t.Ld,offset:t.offset.add(this.uf),Ue:e}},e.pea=n},function(t,e,i){var r,a,o,s;function u(t){return t.toString()+" (nrdp: "+t.yI+"ms)"}function n(t,e,i){this.console=i,this.offset=r.T.Gb,this.uf=t.fm?e.uf:void 0,s.assert(e.sa),this.sa=e.sa}_esm(e),e.MGa=void 0,r=i(22),a=i(236),o=i(20),s=i(5),n.prototype.append=function(t){var e=t.Ld,i=t.offset,n=t.Ue;return void 0!==this.Z0a&&(s.assert(void 0!==this.cqa),e.Vc.add(t.offset).equal(this.Z0a)?(t=this.Gtb(e,i.add(this.offset)).Y-this.cqa)<0?this.offset=this.offset.add(r.T.Ow):0===t?this.offset.lessThan(r.T.Gb)&&(this.offset=this.offset.add(r.T.Ow)):1===t&&!this.offset.greaterThan(r.T.Gb)||(this.offset=this.offset.Qa(r.T.Ow)):this.offset=r.T.Gb),this.cqa=this.Ftb(e,i.add(this.offset)).Y,this.Z0a=e.Pd.add(i),{Ld:e,offset:i.add(this.offset),Ue:n}},n.prototype.Gtb=function(t,e){var i,n;return t=this.VPa(t.Vc),i=a.vu(t).add(a.vu(e)),n=t.add(e).Qa(i),o.ga&&this.console.trace("NrdpRounding: content start "+u(t)+", timestamp offset: "+u(e)+", start rounding error: "+a.vu(t).toString()+", offset rounding error: "+a.vu(e).toString()+", total error: "+i.toString()+", expected nrdp value:"+n.Zd()+", ("+t.yI+e.yI+"ms), last fragment end nrdp: "+this.cqa),n},n.prototype.Ftb=function(t,e){var i,n,r=this.sa;return t=this.VPa(t.Pd),i=a.vu(t.Qa(r)).add(a.vu(r)).add(a.vu(e)),n=t.add(e).Qa(i),o.ga&&this.console.trace("NrdpRounding: content end: start of last frame:"+u(t.Qa(r))+", frame duration: "+u(r)+", offset: "+u(e)+", timestamp rounding error: "+a.vu(t.Qa(r)).toString()+", frame duration rouding error: "+a.vu(r).toString()+", offset rounding error: "+a.vu(e).toString()+", total rounding error: "+i.toString()+", expected nrdp value: "+n.Zd()+", ("+t.Qa(r).yI+r.yI+e.yI+"ms)"),n},n.prototype.VPa=function(t){return this.uf?t.Qa(this.uf):t},e.MGa=n},function(t,e,i){var o,s,u;function n(t,e,i){this.config=t,this.console=i,this.Zv=o.T.Gb,s.assert(e.sa),this.sa=e.sa,t=e.$d[0].profile,this.G8=this.lGb(t,this.sa),this.j8=this.jGb(t,this.sa)}_esm(e),e.hKa=void 0,o=i(22),s=i(5),u=i(20),n.prototype.append=function(t,e){var i,n,r=t.Ld,a=t.offset;return t=t.Ue,i=e.r8,e=e.eX,this.gta&&(n=this.$Ob(r,this.gta),r.wa&&this.Aia(n)?(u.ga&&this.console.trace("SeamlessAudio: dropping one first frame"),r.qla(1),this.Zv=n):(this.Zv=n.add(this.sa),this.YQa(this.Zv)||(u.ga&&this.console.trace("SeamlessAudio: cannot maintain seamlessness at "+r.xj.Zd()+" error would be "+this.Zv.Zd()+" (editing "+(r.wa?"":"not ")+"allowed)"),this.Zv=o.T.Gb,t=!1)),this.gta=void 0),(r.uq||r.zw)&&(s.assert(i,"SeamlessAudio.append(): mediaSplicePlayerTimestamp is undefined"),!r.wa||!e&&r.zw||(n=this.aPb(r,i,e)).Or(o.T.Gb)&&r.rla(1),this.gta=i),s.assert(this.YQa(this.Zv)),this.gqa=r.xe,{Ld:r,offset:a.add(this.Zv),Ue:t}},n.prototype.aPb=function(t,e,i){var n=i?this.Zv.add(t.xe.Qa(i)).Qa(this.sa):(n=t.xe.Qa(e),this.Zv.add(n).Qa(this.sa));return u.ga&&this.console.trace("SeamlessAudio: fragment end: "+t.xe.Zd()+", splice "+e.Zd()+", next start "+(null==i?void 0:i.Zd())+", error "+n.add(this.sa).Zd()+", error with frame drop "+n.Zd()+", is"+(this.Aia(n)?"":" not")+" within bounds of ["+this.G8.Zd()+" and "+this.j8.Zd()+")"),n},n.prototype.$Ob=function(t,e){var i;return s.assert(this.gqa),i=this.Zv.add(this.gqa.Qa(t.xj)).Qa(this.sa),u.ga&&this.console.trace("SeamlessAudio: fragment start: "+t.xj.Zd()+", splice "+e.Zd()+", last fragment end: "+this.gqa.Zd()+", error "+i.add(this.sa).Zd()+", error with frame drop "+i.Zd()+", is"+(this.Aia(i)?"":" not")+" within bounds of ["+this.G8.Zd()+" and "+this.j8.Zd()+")"),i},n.prototype.Aia=function(t){return t.lessThan(this.j8)&&t.Or(this.G8)},n.prototype.YQa=function(t){return t.lessThan(this.j8.add(o.T.Ow))&&t.Or(this.G8.Qa(o.T.Ow))},n.prototype.jGb=function(t,e){return"object"==typeof this.config.xva&&void 0!==this.config.xva[t]?(t=new o.T(this.config.xva[t],1e3).Zf(e.S).add(new o.T(1,e.S)),o.T.min(e,t)):e},n.prototype.lGb=function(t,e){var i;return"object"==typeof this.config.yva&&void 0!==this.config.yva[t]?(i=e.qm(-2),t=new o.T(this.config.yva[t],1e3).Zf(e.S).Qa(new o.T(1,e.S)),o.T.max(i,t)):new o.T(-12,1e3)},e.hKa=n},function(t,e,i){var a,n,o;function r(t,e,i){this.console=i,this.tY=!1,n.assert(e.sa,"NegativePtsGuard: stream.frameDuration must exist."),this.sa=e.sa,this.fm=t.fm,this.uf=null!==(e=e.uf)&&void 0!==e?e:a.T.Gb}_esm(e),e.DGa=void 0,a=i(22),n=i(5),o=i(20),r.prototype.append=function(t){var e,i,n,r;return this.tY?t:(e=t.Ld,i=t.offset,t=t.Ue,e.wa&&(n=e.Vc.Qa(this.fm?this.uf:a.T.Gb).add(i)).lessThan(a.T.Gb)&&(r=Math.ceil(n.PH(-1).qm(this.sa)),o.ga&&this.console.trace("NegativePtsGuard: dropping "+r+" frames on first fragment to avoid nagative pts, profile offset "+this.uf.Zd()+", request content start "+e.Vc.Zd()+", current timestamp offset "+i.Zd()+" => firstPlatformTimestamp "+n.Zd()+"."),e.qla(r)),this.tY=!0,{Ld:e,offset:i,Ue:t})},e.DGa=r},function(t,e,i){var o,s;function n(t,e,i){this.uf=t,this.sa=e,this.console=i}_esm(e),e.JLa=void 0,o=i(22),s=i(20),n.prototype.append=function(t,e){var i,n,r=t.Ld,a=t.offset;return t=t.Ue,i=e.endOfStream,e=e.r8,i&&e?(i=r.Vc.Qa(this.uf).add(a),n=r.Pd.Qa(this.uf).add(a),e=e.Qa(o.T.Ow),s.ga&&this.console.trace("TruncateEndOfStreamAudio: last fragment has adjusted times "+i.Zd()+"-"+n.Zd()+" vs media splice point at "+e.Zd()),i.add(this.sa).Or(e)?(s.ga&&this.console.trace("TruncateEndOfStreamAudio: dropping whole fragment"),r.pla()):n.Or(e)&&(e=Math.ceil(n.Qa(e).qm(this.sa)),r.wa?(s.ga&&this.console.trace("TruncateEndOfStreamAudio: drop "+e+" frames"),r.rla(e)):(s.ga&&this.console.trace("TruncateEndOfStreamAudio: fragment.edit is false, dropping whole fragment"),r.pla()))):i&&s.ga&&this.console.trace("TruncateEndOfStreamAudio: last fragment has no media splice point"),{Ld:r,offset:a,Ue:t}},e.JLa=n},function(t,e){function i(t){this.tY=!1,this.NYb=t.dKb}_esm(e),e.oEa=void 0,i.prototype.append=function(t){return t.Ld.wa&&(t.Ld.XXb(this.tY?0:this.NYb),this.tY=!0),t},e.oEa=i},function(t,e,i){var h,f;function n(t,e,i,n){this.config=e,this.pc=i,this.console=n,this.sa=t.sa}_esm(e),e.jza=void 0,h=i(382),f=i(9),n.prototype.append=function(t,e){var i,n,r=h.yna(this.config,this.pc),a=t.Ld,o=a.xe,s=a.xj,u=a.zw,c=t.Ue;return u=a.uq||u,t.Ld.wa&&u&&!c&&(c=a.Pd.Qa(a.Vc),a=Math.floor(c.qm(this.sa)),o=(u=null!==(i=e.eX)&&void 0!==i?i:o.Qa(this.sa.PH(2))).Qa(s),i=a,n=!1,e.eX&&(i=(e=this.KRa(c,o,o)).pva,n=e.L3a),r=u.Qa(f.T.Eb(r)),s=f.T.max(r.Qa(s),f.T.Gb),n||(i=(s=this.KRa(c,s,o)).pva,s.L3a&&(--i,this.sa.PH(i))),i<(this.config.VOb||1)?t.Ld.pla():0<a-i&&t.Ld.rla(a-i)),t},n.prototype.KRa=function(t,e,i){var n;return t=f.T.min(t,e),t=Math.floor(t.qm(this.sa)),e=this.sa.PH(t),i=i.Qa(e),n=0<t&&i.lessThan(f.T.Ow),{pva:t,$bc:e,r$b:i,L3a:n}},e.jza=n},function(t,e,i){var n,r,s,a,u,o,c,h,f,l,p,d,b,m,g;function v(){this.complete()}function y(t,e,i){var n;return void 0===i&&(i="unknown"),(n=g.call(this)||this).za=t,n.console=e,n.name=i,n.vnb=0,n.kga=!1,n.Mk=new b,n.e5=new r.Wh,n.Zl=new a.C0([],c.HSa(function(t,e){return t.ZO.Al(e.ZO)},function(t,e){return e.Ds.priority-t.Ds.priority},function(t,e){return t.Ds.id>e.Ds.id?1:t.Ds.id<e.Ds.id?-1:0})),n.GQa(t),n}_esm(e),e.nya=e.XR=void 0,n=i(2),r=i(17),s=i(22),a=i(237),u=i(5),o=i(20),c=i(816),h=n.__importDefault(i(6)),f=i(174),l=i(817),p=i(818),d=i(148),Object.defineProperties(v.prototype,{eJ:{get:function(){return this.lha},enumerable:!1,configurable:!0}}),Object.defineProperties(v.prototype,{H3a:{get:function(){return this.xnb},enumerable:!1,configurable:!0}}),Object.defineProperties(v.prototype,{Myb:{get:function(){return this.Hlb},enumerable:!1,configurable:!0}}),Object.defineProperties(v.prototype,{tva:{get:function(){return this.ipb},enumerable:!1,configurable:!0}}),v.prototype.set=function(t,e,i){this.Hlb=e===m.fO?0:h.default.time.ea(),this.xnb=t,this.ipb=e,o.ga&&u.assert(!this.lha,"Invalid replacement of timeout value"),this.lha=i},v.prototype.complete=function(){this.lha=void 0,this.set(s.T.fD,m.fO)},b=v,(i=m=m||{})[i.fO=0]="none",i[i.X2a=1]="microTask",i[i.setTimeout=2]="setTimeout",g=r.EventEmitter,n.__extends(y,g),Object.defineProperties(y.prototype,{wYb:{get:function(){return this.za.Zk},enumerable:!1,configurable:!0}}),y.prototype.CTa=function(t,e){return(t=new(t.bind.apply(t,n.__spread([void 0],e)))).id=this.vnb++,t.Prb(this),this.Oha(t),t},y.prototype.AG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.CTa(l.tEa,t)},y.prototype.vEb=function(){var t={hasSchedule:!!this.Mk.eJ,schedule:this.Mk.eJ&&{sleepTime:this.Mk.eJ.hUa,originalSleepTime:this.Mk.eJ.qRb,clockSkewAdjustments:this.Mk.eJ.c4a},nextWakeup:this.Mk.H3a.Y,timeScheduled:this.Mk.Myb,scheduleType:m[this.Mk.tva],numTasks:this.Zl.length,clock:{ir:this.za.Zk,ct:this.za.currentTime.Y,sp:this.za.speed}};return o.ga&&this.trace("audit",t),t},y.prototype.nU=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.CTa(p.AKa,t)},y.prototype.ayb=function(e,i,t){this.AG(function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,d.Jk.tJ(i)];case 1:return t.bd(),e(),[3,0];case 2:return[2]}})},t)},y.prototype.GQa=function(t){var e=this;this.yC(),this.e5.clear(),this.za=t,this.e5.on(t,"stopStart",function(){return e.JO()}),this.e5.on(t,"clockAdjusted",function(){return e.nX()}),this.e5.on(t,"speedChanged",function(){return e.cRb()}),this.nX(),this.emit("clockChanged")},y.prototype.cRb=function(){this.yC(),this.JO()},y.prototype.Nb=function(){this.reset()},y.prototype.reset=function(){this.yC(),this.Zl.clear()},y.prototype.nX=function(){var e=this,t=this.Zl.map(function(t){return t.Ds});this.yC(),this.Zl.clear(),t.forEach(function(t){return e.Oha(t,!1)}),this.JO()},y.prototype.Oha=function(t,e){var i;void 0===e&&(e=!0),i=t.W8(),t={Ds:t,ZO:this.Z$a(i),i$:i},u.assert(!this.Zl.contains(t)),this.Zl.push(t),e&&this.JO()},y.prototype.JO=function(){var t,e,i,n=this;o.ga&&this.trace("recheck schedule task count:"+this.Zl.length),this.wYb?this.kga?o.ga&&this.trace("already executing, bailing"):(e=this.Mk.H3a,(i=null!==(i=null===(t=this.Zl.Pw())||void 0===t?void 0:t.ZO)&&void 0!==i?i:s.T.fD).isFinite()&&i.a9(e)?(this.yC(!1),this.za.currentTime.Or(i)?(this.Mk.set(i,m.X2a),Promise.resolve().then(function(){n.Mk.tva===m.X2a&&(n.Mk.complete(),n.a8a())})):(o.ga&&this.trace("scheduling next wake up for:"+i.Y),t=function t(e,i,n,r){var a,o;return u.assert(e.Zk,"Current time: "+h.default.time.ea()+" cr: "+e.currentTime),u.assert(e.currentTime.isFinite()),a=n.Qa(e.currentTime),a=Math.max(Math.ceil(a.hI/e.speed),0),(o=null!=r?r:{id:void 0,hUa:a,c4a:0,qRb:a}).id=setTimeout(function(){n.Qa(e.currentTime).HN(s.T.Gb)?i():(o.c4a++,t(e,i,n,o))},a),o.hUa=a,o}(this.za,function(){n.Mk.complete(),n.a8a()},i),this.Mk.set(i,m.setTimeout,t))):i.isFinite()||this.Mk.tva!==m.setTimeout||this.yC(!1)):(o.ga&&this.trace("should check schedule is false, stopping"),this.yC())},y.prototype.a8a=function(){var t=0,e=null===(e=this.Zl.Pw())||void 0===e?void 0:e.i$;try{for(this.kga=!0;t++<1e4&&this.E0b(););}finally{this.kga=!1,this.yC(),1e4<t&&!this.EIb(e)?null!==(e=this.console)&&void 0!==e&&e.error("Task scheduler executed more than 10000 iterations in same tick"):this.JO()}},y.prototype.EIb=function(t){var e=null===(e=this.Zl.Pw())||void 0===e?void 0:e.i$;return!(t&&e&&t.timestamp.equal(e.timestamp)&&t.type===e.type)},y.prototype.E0b=function(){var t,e,i=null!==(e=null===(t=this.Zl.Pw())||void 0===t?void 0:t.ZO)&&void 0!==e?e:s.T.fD;if(o.ga&&this.trace("tryExecuteNextTask @"+this.za.currentTime.Y+", next wakeup at "+i),this.za.currentTime.Or(i)&&(t=this.Zl.pop())){e=t.Ds,o.ga&&this.trace("Running a task @"+this.za.currentTime.Y+", scheduled for time:"+i.Y+"Name:"+e.name);try{e.ax(),t.i$=e.W8(),t.ZO=this.Z$a(t.i$)}catch(t){throw this.console.error("Unhandled error from a task "+e.name+" occurred. Removing the task from future executions:"+t,{stack:t.stack}),e.Nb(),t}finally{t.ZO!==s.T.fD&&e.state===f.Ym.s$&&(u.assert(!this.Zl.contains(t)),this.Zl.push(t))}return!0}},y.prototype.nWb=function(t){u.assert(t.Yf===this),this.Mua(t,!1),this.Oha(t)},y.prototype.Mua=function(e,t){var i;void 0===t&&(t=!0),(i=this.Zl.find(function(t){return t.Ds===e}))&&this.AVb(i,t)},y.prototype.AVb=function(t,e){this.Zl.remove(t),e&&this.JO()},y.prototype.yC=function(t){void 0===t&&(t=!0),this.Mk.eJ&&(t&&this.emit("stopping"),clearTimeout(this.Mk.eJ.id),this.Mk.complete())},y.prototype.Z$a=function(t){return t.type===d.Dea.absolute?t.timestamp:t.timestamp.add(this.za.currentTime)},y.prototype.trace=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];null!==(t=this.console)&&void 0!==t&&t.trace.apply(t,n.__spread(["TaskScheduler("+this.name+"):"],e))},e.XR=y,e.nya=function(e,i,t){var n=void 0;return(t||e.za.Zk)&&e.za.currentTime.Or(i)?{promise:Promise.resolve()}:{promise:new Promise(function(t){n=e.nU(d.Jk.XP(i),t)}),Ds:n}}},function(t,e,i){var u,n,r;_esm(e),e.HSa=void 0,u=i(2),n=i(20),r=i(5),e.HSa=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];return n.ga&&r.assert(s.length),function(t,e){var i,n;try{for(var r=u.__values(s),a=r.next();!a.done;a=r.next())if(0!==(n=(0,a.value)(t,e)))return n}catch(t){var o={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return 0}}},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return(e=u.call(this,e,i)||this).JWb=t,e.reset(),e}_esm(e),e.tEa=void 0,n=i(2),r=i(22),a=i(5),o=i(174),s=i(148),u=o.Qea,n.__extends(c,u),c.prototype.reset=function(){var t,e;this.$c!==o.Ym.s$&&this.$c!==o.Ym.pending||null!==(e=null===(t=this.P1)||void 0===t?void 0:t.return)&&void 0!==e&&e.call(t),this.$c=o.Ym.pending,this.P1=this.JWb(),this.Dga=s.Jk.tJ(r.T.Gb)},c.prototype.Hm=function(){this.reset(),a.assert(this.Tv),this.Tv.nWb(this)},c.prototype.W8=function(){return this.Dga},c.prototype.og=function(){var t,e,i=this.P1.next();i.done?(this.Dga=s.Jk.mya,null!==(e=(t=this.P1).return)&&void 0!==e&&e.call(t)):this.Dga=i.value},c.prototype.Nb=function(){var t,e;null!==(e=(t=this.P1).return)&&void 0!==e&&e.call(t),u.prototype.Nb.call(this)},e.tEa=c},function(t,e,i){var n,r,a,o;function s(t,e,i){return(i=o.call(this,i)||this).wva=t,i.YT=e,i}_esm(e),e.AKa=void 0,n=i(2),r=i(174),a=i(148),o=r.Qea,n.__extends(s,o),s.prototype.W8=function(){return this.$c===r.Ym.pending?this.wva:a.Jk.mya},s.prototype.og=function(){this.YT()},e.AKa=s},function(t,e,i){var n,r;function a(t){this.N2=[],this.N2[n.default.Ta.Mb]=new r.default(t,n.default.Ta.Mb),this.N2[n.default.Ta.Wb]=new r.default(t,n.default.Ta.Wb)}_esm(e),e.NJa=void 0,t=i(2),n=t.__importDefault(i(28)),r=t.__importDefault(i(383)),a.prototype.Oqb=function(t,e,i){this.N2[t].add(e,i)},a.prototype.Yna=function(){var i=[];return this.N2.forEach(function(t){var e;t&&((e=t.get())&&0<e.length&&e.forEach(function(t){i.push(t)}),t.reset(!0))}),i},a.prototype.RCb=function(t){var e=this.Yna();return 0<(t.strmsel=e).length},i=a,e.NJa=i},function(t,e){_esm(e),e.YXa=void 0,e.YXa=function(t){var e=Math.floor(1e6*Math.random()),i=t.Koa,n=t.J6;return{Jr:t=0==e%t.Loa&&0<n.length,QU:t&&0==e%i}}},function(t,e){_esm(e),e.VSa=void 0,e.VSa=function(t,i){var n;return Array.isArray(t.TSa)?(n=t.Et?t.Et():Object.create(t),t.TSa.forEach(function(t){if(void 0!==t.TOb&&i.duration>=t.TOb&&t.config)for(var e in t.config)n[e]=t.config[e]}),n):t}},function(t,e,i){var r,u,c;_esm(e),e.xBa=void 0,r=i(2).__importStar(i(10)),u=i(125),c=i(5),t=function(){function t(t,e,i){for(var n=2;3!==n;)switch(n){case 2:this.tn=t,this.H=e,this.ai=i,n=4;break;case 4:n=3}}for(var e=2;7!==e;)switch(e){case 8:return t;case 2:t.prototype.Clb=function(t,e){for(var i,n,r=2;8!==r;)switch(r){case 2:n=(i=this).tn.I,r=1;break;case 1:0===this.OF&&this.tn.Cb.am("createDlTracksStart"),this.OF+=t.length,t=t.map(function(t){return i.LMa(t,e.J,e.Oz(),i.tn.Yl,n)}),u.lp.instance.og(),r=9;break;case 9:return t}},t.prototype.Olb=function(){for(var i,n,t=2;3!==t;)2===t&&(n=[],(i=this).tn.zb.Kf.forEach(function(t){for(var e=2;5!==e;)2===e&&(r.ia(t.If)||n.push(t.If),t.If=void 0,e=5)}),this.tn.FS&&(n.push(this.tn.FS),this.tn.FS=void 0),n.forEach(function(t){for(var e=2;5!==e;)2===e&&(t.Co||--i.OF,u.lp.instance.oM(t),e=5)}),t=3)},t.prototype.Kmb=function(){for(var t=2;1!==t;)switch(t){case 2:this.OF=0,t=1;break;case 4:this.OF=3,t=8}},t.prototype.DOa=function(t,e){for(var i,n,r=2;5!==r;)2===r&&((n=(i=this.tn.zb.Kf[t]).If)&&(n=e.yL(t,n),this.Nlb(t),i.If=this.LMa(t,e.J,e.Oz(),this.tn.Yl,this.tn.I),e.hva(n)),r=5)},t.prototype.LMa=function(t,e,i,n,r){for(var a=2;7!==a;)switch(a){case 2:var o,s=this;(o=u.lp.instance.Ht(t,e,!0,i,n,r)).Xg.on(o,"created",function(){for(var t=2;5!==t;)2===t&&(--s.OF,0===s.OF&&s.tn.Cb.am("createDlTracksEnd"),t=5)}),o.Xg.on(o,"networkfailing",function(){for(var t,e=2;8!==e;)switch(e){case 1:e=o.k5?5:8;break;case 2:r.ji&&s.ai.Bm("reportNetworkFailing: "+o),e=1;break;case 3:t.aq.ms(o.$U,void 0,o.ph,o.uj),t.Om(),e=8;break;case 5:c.assert(o.$U),t=s.tn.Ge.P,e=3}}),o.Xg.on(o,"error",function(){for(var t=2;5!==t;)2===t&&(r.ji&&s.ai.Bm("DownloadTrack fatal error"),s.tn.Ep("DownloadTrack fatal error",void 0,"NFErr_MC_StreamingFailure",o.ph,0,o.uj),t=5)}),o.on("transportreport",function(t){for(var e=2;1!==e;)switch(e){case 2:s.tn.emit("transportreport",t),e=1;break;case 4:s.tn.emit("",t),e=2}}),o.xb(),a=8;break;case 8:return o}},t.prototype.Nlb=function(t){for(var e,i=2;9!==i;)2===i&&((e=(t=this.tn.zb.Kf[t]).If).Co||--this.OF,u.lp.instance.oM(e),t.If=void 0,i=9)},e=8}}(),e.xBa=t},function(t,e,i){var n,r;function a(t){this.pG=t,this.state=new r.er(n.ma.zh),this.qj={}}_esm(e),e.Sya=void 0,n=i(16),r=i(9),a.prototype.getState=function(){return this.state.value},a.prototype.Ve=function(t){this.state.set(t)},a.prototype.addListener=function(t){this.state.addListener(t)},a.prototype.paused=function(){this.state.value===n.ma.Kc&&this.state.set(n.ma.hh)},a.prototype.v0a=function(){return this.state.value===n.ma.zh},a.prototype.sq=function(){return"function"==typeof this.pG.sq?this.pG.sq():this.state.value===n.ma.Kc},a.prototype.pg=function(){return this.state.value===n.ma.xd||this.state.value===n.ma.Of},a.prototype.w0a=function(){return this.state.value===n.ma.dj},a.prototype.x0a=function(){return this.state.value===n.ma.gr},a.prototype.Re=function(){return this.pG.Re()},a.prototype.Jo=function(){return"function"==typeof this.pG.Jo?this.pG.Jo():1},a.prototype.BV=function(){return this.pG.BV()},a.prototype.LY=function(t,e){this.qj[t]=e},a.prototype.Oo=function(t){return!!this.qj[t.J]||t.ii},e.Sya=a},function(t,e){function i(t,e,i){this.Drb=t,this.Ega=e,this.Ilb=i,this.Rfa=((i={})[0]=!1,i[1]=!1,i),this.reset()}_esm(e),e.JIa=void 0,i.prototype.Qy=function(){var e=this,t=this.Drb.filter(function(t){return!t.Z_a(e.Ilb())});0===t.length&&this.oga?this.Dnb():t.forEach(function(t){e.Rfa[t.mediaType]||(t.once("requestAppended",function(){e.Rfa[t.mediaType]=!1,e.Qy()}),e.Rfa[t.mediaType]=!0)})},i.prototype.reset=function(){var e=this;this.oga=!1,new Promise(function(t){e.Dnb=t}).then(function(){return e.Ega()})},i.prototype.ENb=function(){this.oga||(this.oga=!0,this.Qy())},e.JIa=i},function(t,e,i){var n;function r(t){this.console=t,this.HF=[],this.VB=[],n.ga&&this.console.trace("Received pending adoption "+this.Nl.length)}_esm(e),e.Eya=void 0,n=i(20),Object.defineProperties(r.prototype,{length:{get:function(){return this.HF.length},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{Nl:{get:function(){return this.VB},enumerable:!1,configurable:!0}}),r.prototype.BNb=function(t){-1!==(t=this.VB.indexOf(t))&&(n.ga&&this.console.trace("Marking request attached"),this.HF[t].W_a=!0,this.wab(t))},r.prototype.CNb=function(t){-1!==(t=this.VB.indexOf(t))&&(n.ga&&this.console.trace("Marking request completed"),this.HF[t].Pz=!0,this.wab(t))},r.prototype.BVb=function(i){var e=this,n=[];this.VB.forEach(function(t,e){i(t)&&n.unshift(e)}),n.forEach(function(t){e.VB.splice(t,1),e.HF.splice(t,1)})},r.prototype.push=function(t){this.VB.push(t),this.HF.push({W_a:!1,Pz:!1}),n.ga&&this.console.trace("Pushing pending request, "+this.length+" total")},r.prototype.$C=function(){return 0<this.length},r.prototype.wab=function(t){var e=this.HF[t];e.W_a&&e.Pz&&(e=this.VB[t],this.VB.splice(t,1),this.HF.splice(t,1),n.ga&&this.console.trace("Removing request, "+this.length+" left"),0===this.length&&n.ga&&this.console.trace("Removing last request, contentEndPts: "+e.Lc))},e.Eya=r},function(t,e,i){var n,r,a,o,s,m,u,g,v,c,y,h,w;function f(t,e){return(1===t.mediaType?0:1)-(1===e.mediaType?0:1)}function l(){return null!==h&&h.apply(this,arguments)||this}function p(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b){return(r=w.call(this)||this).ycc=t,r.I=e,r.P=n,r.Gp=a,r.a6=o,r.Zs=c,r.BS=h,r.sl=l,r.by=p,r.events=d,r.Rv=b,r.ee=new y([]),r.Xl=!1,r.KS=0,r.jS=r.mX.bind(r),r.H=m.wq(v.default,i,a.id&&a.id.length?"{"+a.id+"}":""),r.Kk=r.H.error.bind(r.H),r.Sb=r.H.warn.bind(r.H),r.jn=r.H.trace.bind(r.H),r.Sr=null!=u?u:g.T.Eb(r.O.Z),r.Mga=null==f?void 0:f.xe,null!==(f=r.by)&&void 0!==f&&f.addListener(r.jS),n&&s&&r.WJb(n,s),r}_esm(e),e.IEa=e.Tda=e.kjb=void 0,n=i(2),r=i(83),a=i(149),o=i(387),s=i(16),m=i(9),u=i(5),g=i(22),v=n.__importDefault(i(6)),t=i(102),c=i(42),h=i(239).bK,n.__extends(l,h),y=l,e.kjb=y,e.Tda={Ebb:f},w=r.kv,n.__extends(p,w),Object.defineProperties(p.prototype,{Eh:{get:function(){return this.Xl},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{O:{get:function(){return this.Gp},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Aw:{get:function(){return this.ee.every(function(t){return t.Aw})},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{wl:{get:function(){return this.ee.every(function(t){return t.wl})},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ut:{get:function(){return this.lq().reduce(function(t,e){return t+e.ut},0)},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ri:{get:function(){return this.lq().every(function(t){return t.ri()})},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{vg:{get:function(){return this.lq().map(function(t){return t.track})},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{S:{get:function(){return this.mt.S},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Wa:{get:function(){return this.mt.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ob:{get:function(){return this.mt.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{zj:{get:function(){return this.jg.Zf(this.S).vc},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Tr:{get:function(){return this.Sr.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{gI:{get:function(){return this.O.Mg.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{xO:{get:function(){return this.O.Uk.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{KM:{get:function(){var t=null===(t=this.O.O.hq)||void 0===t?void 0:t[0];return t&&this.Vc?g.T.Eb(Math.max(0,t[0]-this.Vc.Y-this.O.Mg.Y)):void 0},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{O7:{get:function(){return this.ee.reduce(function(t,e){return t&&e.xe?g.T.max(t,e.xe):e.xe||t},void 0)},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{jpa:{get:function(){return this.Tr.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Fe:{get:function(){return this.jg.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Rq:{get:function(){return this.mt.Rq},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{jg:{get:function(){return this.Zs},enumerable:!1,configurable:!0}}),p.prototype.kx=function(t){this.jg.equal(t)||(this.Zs=t)},p.prototype.yz=function(t){return(t=this.eb(t))?Promise.resolve(t.yz()):Promise.resolve(a.AsyncIterator.KXa())},p.prototype.LG=function(){this.lq().forEach(function(t){return t.LG()})},p.prototype.reset=function(){this.ee.forEach(function(t){t.reset()})},p.prototype.Df=function(){var t;this.Xl||(this.Xl=!0,null!==(t=this.XB)&&void 0!==t&&t.ed(),this.XB=void 0,this.ee.forEach(function(t){t.Df()}),null!==(t=this.by)&&void 0!==t&&t.removeListener(this.jS),this.events.removeAllListeners())},p.prototype.hW=function(){return!0},p.prototype.eb=function(t){return this.ee.get(t)},p.prototype.lq=function(t){return void 0===t&&(t=f),this.ee.items.slice().sort(t)},p.prototype.e6=function(){return this.ee.items},p.prototype.aN=function(t){return this.eb(t)},p.prototype.Gh=function(t,e){return(t=this.eb(t))?e?t.Gm:void 0===(e=t.Tp)?0:e-(t=this.BS()):0},p.prototype.OC=function(){var t,e=null===(i=this.eb(0))||void 0===i?void 0:i.rn,i=null===(t=this.eb(1))||void 0===t?void 0:t.rn;return{$n:null!==(t=null==i?void 0:i.Y)&&void 0!==t?t:0,vr:null!==(t=null==e?void 0:e.Y)&&void 0!==t?t:0,Ks:null!==(i=null==i?void 0:i.fa)&&void 0!==i?i:0,kC:null!==(e=null==e?void 0:e.fa)&&void 0!==e?e:0}},p.prototype.KV=function(t){var e;return(t=this.eb(t))&&null!==(e=t.Tp)&&void 0!==e?e:0},p.prototype.Om=function(t){return t=this.eb(t),u.assert(t),t.Om()},p.prototype.mX=function(t){s.No(t.newValue)&&this.qr()},p.prototype.vG=function(e){return this.ee.every(function(t){return t.vG(e)})},p.prototype.P5=function(t){return null!==(t=null===(t=this.ee.get(t))||void 0===t?void 0:t.HTa)&&void 0!==t?t:g.T.Gb},p.prototype.tk=function(t){this.Xl||(t.e3||u.assert(!t.ad),this.qr(),this.wl&&this.Kga()),this.Ut(t)},p.prototype.YH=function(t){this.I.T4&&this.qr(!0),this.TG(t)},p.prototype.XH=function(t){this.I.T4&&this.qr(!0),this.MC(t)},p.prototype.iwa=function(t){var e;return s.No((null===(e=this.by)||void 0===e?void 0:e.value)||s.Jc.ej)&&(!t||this.KS+this.I.z8<v.default.time.ea())},p.prototype.qr=function(t){void 0===t&&(t=!1),this.iwa(t)&&(this.KS=v.default.time.ea(),t={type:"checkBufferingProgress"},this.events.emit(t.type,t))},p.prototype.Kga=function(){var t={type:"branchStreamingComplete"};this.events.emit(t.type,t)},p.prototype.WJb=function(t,e){var i=this;this.$va(t),u.assert(t.W===this.O.W||isNaN(t.W)&&isNaN(this.O.W)),this.Zfa=[],t=null!=e?e:null===(e=this.a6)||void 0===e?void 0:e.call(this,t),u.assert(t,"tracks need to exist upon initialization"),t.forEach(function(t){var e;t=t.mediaType,e=new o.wda(t,i.I,i.H),i.Zfa[t]=e})},p.prototype.toJSON=function(){var t;return{segment:this.O.id,branchOffset:this.Fe,viewableId:this.Gp.W,contentStartPts:null===(t=this.Vc)||void 0===t?void 0:t.Y,contentEndPts:null===(t=this.Pd)||void 0===t?void 0:t.Y}},i=p,e.IEa=i,c.xf(t.rx,i),c.xf(t.kB,i)},function(t,e,i){var n;_esm(e),e.WUa=e.LKb=e.b0a=e.PYa=void 0,n=i(25),e.PYa=function(t,e){if((t=t.gb.O.Zw)&&0!==t.length)return n.ig(t,function(t){return t.Vc.Y<=e&&e<t.Pd.Y})},e.b0a=function(t,e){return e.index===t.ie.index||!(!(t=t.gb.O.Zw)||0===t.length)&&t.some(function(t){return t=t.Vc,e.Vc.HN(t)&&t.lessThan(e.Pd)})},e.LKb=function(t,e){return e.index===t.Hf.index||!(!(t=t.gb.O.Zw)||0===t.length)&&t.some(function(t){return t=t.Pd,e.Vc.lessThan(t)&&t.HN(e.Pd)})},e.WUa=function(t,e,i,n){var r,a,o,s,u;t=null===(r=e.wa)||void 0===r?void 0:r.start,r=null===(a=e.wa)||void 0===a?void 0:a.end,u=a=!1,(null!=n&&n.VKb||(null==n||!n.JKb)&&e.Vc.lessThan(i.Vc))&&((s=e.ima(i.Vc.Y))&&(s=(null!==(o=null===(o=e.wa)||void 0===o?void 0:o.start)&&void 0!==o?o:0)+s.il,t=Math.max(null!=t?t:0,s)),s=i.Vc.Y,a=!0),null!=n&&n.PKb||!e.Pd.greaterThan(i.Pd)||((s=e.ima(i.Pd.Y))&&(s=(null!==(n=null===(n=e.wa)||void 0===n?void 0:n.start)&&void 0!==n?n:0)+s.il,r=Math.min(null!=r?r:1/0,s),e.bO=e.index),s=i.Pd.Y,u=!0),void 0===t&&void 0===r||(e.Bk({start:t,end:r}),void 0!==s&&(!e.av||s>e.av)&&e.nP(s)),e.UXb(i.region,a,u)}},function(t,e,i){var n,u,c,h,a,s,o;function r(t,e,i,n,r){this.Rw=t,this.Mt=e,this.I=i,this.H=n,this.Sg=r}_esm(e),e.jIa=void 0,n=(t=i(2)).__importDefault(i(28)),u=n.default.Ta,c=n.default.kF,h=i(9),a=i(22),s=t.__importDefault(i(144)),o=t.__importDefault(i(6)),r.prototype.RPb=function(t){t={type:"requestCreated",request:t},h.Va(this.Mt,t.type,t)},r.prototype.QPb=function(t){var e=t.Pa.gb.O;t={type:"updateStreamingPts",mediaType:t.mediaType,position:{xa:e.id,offset:a.T.Eb(this.Rw.Uja-e.Z)},completePlayerStreamingTimestamp:a.T.Eb(this.Rw.Tp),trackIndex:t.stream.track.jC},h.Va(this.Mt,t.type,t)},r.prototype.Z3a=function(t,e,i){var n=this.Sg,r=this.Rw.kl.ug;r.Z8a(t),1===n&&this.I.t$&&(void 0===r.kqa?r.a9a(o.default.time.ea()):o.default.time.ea()-r.kqa>this.I.t$&&(t.bitrate!==r.g1a&&(o.default.storage.set("vb",t.bitrate),r.ZXb(t.bitrate)),r.a9a(o.default.time.ea()))),r.sW&&r.sW===t||(this.Rw.kl.xZb(e,r.sW,t),r.OXb(t),e=0,t.wb&&t.wb.confidence&&t.wb.Ra&&(e=t.wb.Ra.Ga),r={xa:this.Rw.gb.O.id,offset:a.T.Eb(i-this.Rw.gb.O.Z)},t={type:"streamSelected",nativetime:o.default.time.ea(),mediaType:n,streamId:t.id,manifestIndex:t.P.Pb,trackIndex:t.track.jC,streamIndex:t.Lf,movieTime:i,bandwidth:e,longtermBw:e,rebuffer:0,position:r},h.Va(this.Mt,t.type,t))},r.prototype.MPb=function(t,e,i){var n=e.P,r=n.ym,a=this.Rw.kl.ug,o=n.pLb(e),s=o.Wpa;o=o.qLb,i&&e.Pc&&!a.tW?(o=c.Ux,e.ws=c.name[o],this.Y3a(t,e.Pc,e.ws,e.location,e.bitrate),a.tW=e.Pc):!i&&e.Pc&&e.Pc!==a.tW&&(o=o?void 0===a.tW?c.Ux:r.fP===c.Ida?c.Mjb:c.Dba:c.Ljb,e.ws=c.name[o],this.Y3a(t,e.Pc,e.ws,e.location,e.bitrate),a.tW=e.Pc),a.FN||(o={type:"logdata",target:"startplay",fields:{}},this.Sg===u.Wb?o.fields.alocid=e.location:this.Sg===u.Mb&&(o.fields.locid=e.location),h.Va(this.Mt,o.type,o)),i&&e.location&&!a.FN?(o=c.Ux,e.ws=c.name[o],this.W3a(n.Pb,t,e.location,e.Aqa,e.Pc,e.HI,e.ws,e.Tw),a.FN=e.location):!i&&e.location&&e.location!==a.FN&&(o=s?void 0===a.FN?c.Ux:r.fP===c.Ida?c.hhb:c.Dba:c.ghb,e.ws=c.name[o],this.W3a(n.Pb,t,e.location,e.Aqa,e.Pc,e.HI,e.ws,e.Tw),e.Tw=void 0,a.FN=e.location),this.I.Ju||(e.b1a=e.location,e.e1a=e.Pc)},r.prototype.e9=function(t){t={type:"requestsPruned",requests:t},h.Va(this.Mt,t.type,t)},r.prototype.Y3a=function(t,e,i,n,r){var a=this.Sg===u.Mb?"video":"audio",o=s.default.instance().get();t={type:"serverSwitch",segmentId:t,mediatype:a,server:e,reason:i,location:n,bitrate:r,confidence:o.confidence},o.confidence&&(t.throughput=o.Ra.Ga),this.Rw.kl.ug.tW&&(t.oldserver=e),h.Va(this.Mt,t.type,t)},r.prototype.W3a=function(t,e,i,n,r,a,o,s){h.Va(this.Mt,"locationSelected",{type:"locationSelected",manifestIndex:t,segmentId:e,mediatype:this.Sg===u.Mb?"video":"audio",location:i,locationlv:n,serverid:r,servername:a,selreason:o,seldetail:s})},r.prototype.Fga=function(t,e){e={type:"lastSegmentPts",segmentId:t.id,pts:Math.floor(e)},t.QD||h.Va(this.Mt,e.type,e)},r.prototype.Bm=function(t){t={type:"managerdebugevent",message:"@"+o.default.time.ea()+", "+t},h.Va(this.Mt,t.type,t)},r.prototype.LDb=function(t){h.Va(this.Mt,"transportReport",t)},i=r,e.jIa=i},function(t,e,i){var n,u,r,a,o,s,c,h,f,l;function p(t,e,i,n,r,a,o,s){var u=l.call(this,t)||this;return u.I=e,u.H=i,u.gn=n,u.Vd=r,u.Sg=a,u.Dna=s,u.jbb=!0,u.Ee=new c.x_(u.H),u.Kk=u.H.error.bind(u.H),u.Sb=u.H.warn.bind(u.H),u.jn=u.H.trace.bind(u.H),u.KOa(),u.Dp=null==o?void 0:o.AG(function(){return u.SVb()},"pruner"),u}_esm(e),e.SJa=void 0,n=i(2),u=n.__importStar(i(10)),r=i(240),a=i(832),o=i(835),t=i(83),s=i(5),c=i(242),h=i(9),f=i(72),l=t.kv,n.__extends(p,l),Object.defineProperties(p.prototype,{console:{get:function(){return this.H},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{mediaType:{get:function(){return this.Sg},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{gb:{get:function(){return this.Vd},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ex:{get:function(){return 0<this.HA},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Cwa:{get:function(){return!this.QK},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{HA:{get:function(){return this.Ea.length},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Hs:{get:function(){return this.Ea.Hs},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{oUb:{get:function(){return this.Ee.count},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{fU:{get:function(){return this.Ea.complete.xe},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Tp:{get:function(){return this.Ea.DSa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Uja:{get:function(){return this.Ea.CSa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{jE:{get:function(){return this.Ea.xe},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Gm:{get:function(){return void 0===this.Ea.zd?0:this.Ea.me-this.Ea.zd},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{rn:{get:function(){return{fa:this.Ea.zC,Y:Math.max(this.Ea.DSa-this.Ea.zd,0)||0}},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{YL:{get:function(){return this.Ea.pvb},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{zC:{get:function(){return this.Ea.zC},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{ut:{get:function(){return this.Ea.fa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{KD:{get:function(){return this.smb()},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Wsa:{get:function(){return this.Ea.KJb},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{B6:{get:function(){return this.Ea.length>this.Ea.Hs},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Jp:{get:function(){return this.Ea.Jp},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{QLb:{get:function(){return this.GNa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{q5a:{get:function(){return this.Ea.length-this.$l},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{U:{get:function(){return this.Ea},enumerable:!1,configurable:!0}}),p.prototype.Df=function(){var t,e=this.Ea;setTimeout(function(){e.forEach(function(t){t.abort(),t.ed()})},1),this.KOa(),this.Ee.X4(),null!==(t=this.Dp)&&void 0!==t&&t.Nb()},p.prototype.reset=function(){this.Df(),this.Ee.J7a()},p.prototype.close=function(){this.Ee.X4()},p.prototype.F8a=function(){this.wMa=!0},p.prototype.Kna=function(){return{endMarked:void 0!==this.Ee.count,queueCount:this.Ee.count,isComplete:this.Ee.Pz,itemCount:this.Ee.ESa,continuousEndPts:this.Ee.fp().reduce(function(t,e){return e&&!e.done&&(e=e.value,Math.abs(e.Ema-t)<100||-1===t)?e.MDb:t},-1),sentinelItemCount:this.Ee.fp().filter(function(t){return t&&t.done}).length,processedCount:this.Ee.Ozb,rc:this.HA}},p.prototype.xyb=function(t,e,i){var n=this.I;return s.assert(!t.header),(t=n.EBb&&1===this.mediaType?new o.Vya(i,n,e.track,t,this.Ea,this.H):r.t_.create(i,n,e.track,t,this.Ea,!1,this.H,this.Dna)).xb(this),this.yy(t),t},p.prototype.erb=function(t){var e;return t.xb(this),t.e3=!0,this.yy(t),e=Promise.resolve(),t.complete?(this.wfa(t),this.gn.Z3a(t.stream,t.zd,t.fd),e=this.zaa(),this.Ut(t)):(t.active&&this.NM(t),t.wua&&this.MC(t)),e},p.prototype.yy=function(t){var e,i;this.Ea.qq(t),(null===(e=this.Dp)||void 0===e?void 0:e.state)===f.Ym.complete&&null!==(i=this.Dp)&&void 0!==i&&i.Hm(),this.wfa(t),t.uq&&(this.QK=!1)},p.prototype.yz=function(){return this.Ee.xEb()},p.prototype.tja=function(){this.$l===this.Ea.length&&this.wMa&&this.Ee.X4()},p.prototype.zaa=function(){var e,t,i=this,n=Promise.resolve(),r=this.Vd;if(!r.hW(this.Sg)||this.$l===this.Ea.length)return n;for(var a=this.I.TNb,o=0,s=[];this.$l<this.Ea.length;){if(e=this.Ea.get(this.$l)){if(this.Ea.rWa&&this.Ea.rWa.Wa<e.Wa)break;if(!e.iu())break;s.push(e),++o,u.Ba(this.zd)||(this.zd=e.zd)}if(++this.$l,!u.ia(a)&&a<=o)break}if(s.length){if(void 0!==this.Ee.count&&(this.Kk("tryToAtach() but requestQueue has sentinel:",this.Ee.count),this.Ee.J7a()),this.jbb)n=Promise.all(s.map(function(t){return i.Ee.enqueue(t).then(function(){return i.y6(t)})}));else for(e=0;e<s.length;e++)try{t=s[e],r.OGb(this.mediaType).jAb(t),this.y6(t)}catch(t){return this.$l-=s.length-e,Promise.reject(t)}this.tja()}return n},p.prototype.y6=function(t){this.GNa=t,this.BWa(t)},p.prototype.rT=function(e,t){var i,n=this,r=[];0!==this.Ea.Hs&&(i=this.Ea.i5a,this.Ea.Q0b.wwa(function(t){return!!(!u.ia(e)&&t.P.Pb!==e||t.uq||i>t.zd)||(t.s5&&(n.QK=!1),n.x1(t)?void r.unshift(t):(n.Sb("request abort failed:",t.toString()),!0))}),this.Tga(),r.length&&"function"==typeof t&&t(r))},p.prototype.h$=function(){this.Tga()},p.prototype.SVb=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:t.label=1;case 1:return this.Ea.length?(e=this.Ea.get(0),i=h.T.Eb(null!==(i=null===(i=this.I.rP)||void 0===i?void 0:i.Y)&&void 0!==i?i:0),i=i.add(e.xe),[4,f.Jk.XP(i)]):[3,3];case 2:return(t.bd(),this.Ea.complete.length<=1&&!e.uq)?[3,3]:(s.assert(e===this.Ea.get(0)),e.ef||this.x1(e),e=this.Ea.splice(0,1),0<this.$l&&this.$l--,this.gn.e9(e),[3,1]);case 3:return[2]}})},p.prototype.WX=function(e,i){var t,n=this,r=this.I,a=!1,o=0,s=this.Ea.some(function(t){return e<t.me?(a&&n.wfa(t),!0):(++o,void(t.ef||(n.Sb("pruning unappended request:",t&&t.toString()),r.ji&&n.gn.Bm("prune pts:"+e+" unappended request:"+(t&&t.toString())),t.s5&&(n.QK=!1,a=!0),n.x1(t,i)||n.Kk("MediaRequest.abort error:",t.ph))))});return 0<o&&(t=this.Ea.splice(0,o),this.$l-=Math.min(o,this.$l),this.gn.e9(t)),s},p.prototype.m6=function(t){var e,i,n;return void 0===t&&(t={gU:null,yO:null,zd:null,cl:0,bh:0,U:[]}),e=this.I,i=this.Ea,u.Ba(i.zd)&&(null===t.zd||i.zd<t.zd)&&(t.zd=i.zd),void 0!==(n=this.Tp)&&null===t.gU&&(t.gU=n),void 0!==(n=i.me)&&(null===t.yO||n>t.yO)&&(t.yO=n),t.cl+=i.cl,t.bh=e.qwa?t.bh+i.O6a:t.bh+i.zC,Array.prototype.unshift.apply(t.U,i.bd.U),t},p.prototype.Rt=function(t){if(this.Ea.length&&(t=this.Ea.fWa(t)))return t},p.prototype.cqb=function(t){var e,i,n=t.Pd;return t=t.fd,s.assert(n,"expected contentEndTimestamp to be defined"),s.assert(void 0!==t,"expected contentStartPts to be defined"),t=this.Ea.ema(t),i=this.Ea.get(t),s.assert(i&&void 0!==i.fd&&void 0!==i.Lc&&void 0!==i.index,"expected existing request to be defined with properties"),null!==(e=i.Pd)&&void 0!==e&&e.equal(n)?(this.rPa(t),[i.Lc,i.index+1]):(this.rPa(t-1),[i.fd,i.index])},p.prototype.Om=function(){var i=this,n=[];return this.Ea.forEach(function(t){var e=t.Txa();1===e?n.push(t):2===e&&i.gb.P.Nh("swapUrl failure")}),n},p.prototype.XH=function(t){t.kD&&t.iu()&&this.zaa(),this.MC(t)},p.prototype.tk=function(t){var e,i;t.kD&&!t.ef&&this.zaa(),(null===(e=this.Dp)||void 0===e?void 0:e.state)===f.Ym.complete&&null!==(i=this.Dp)&&void 0!==i&&i.Hm(),this.Ut(t)},p.prototype.Zha=function(t){var e=1===this.Sg?"v_":"a_",i=this.Ea,n=i.JM(t);return t=0<=n?i.get(n):void 0,(i=0<=n&&n+1<i.length?i.get(n+1):void 0)&&t?t.me!==i.zd?e+"rg":t.complete&&i.complete?e+"uk":e+"fd":e+"rm"},p.prototype.smb=function(){return this.Ea.Jp+this.Ea.Hs},p.prototype.KOa=function(){var t,e=void 0!==this.Ea&&0<this.Ea.length,i=this.Ea;this.Ea=new a.Qya(this.H,this),this.$l=0,this.Ee.clear(),this.GNa=void 0,(this.zd=null)!==(t=this.Dp)&&void 0!==t&&t.Hm(),this.wMa=this.QK=!1,e&&(t=i.map(function(t){return t}),this.gn.e9(t))},p.prototype.wfa=function(t){this.QK?t.s5=!1:this.QK=t.s5=!0},p.prototype.rPa=function(t){var e;for(t+=1;t<this.HA;t++)e=this.Ea.get(t),s.assert(e,"expected request to exist"),this.Ee.remove(e),e.aborted||(this.x1(e),e.ed());this.Tga()},p.prototype.x1=function(t,e){return!!t.abort()&&("function"==typeof e&&e(t),!0)},p.prototype.Tga=function(){var t,i,n,r=this;0!==this.Ea.length&&(i=[],n=0,this.Ea.gUb(function(t,e){e<r.$l&&++n,i.push(t)}),this.$l-=n,null!==(t=this.Dp)&&void 0!==t&&t.Hm(),this.gn.e9(i))},i=p,e.SJa=i},function(t,e,i){var n,c,h,f,l,r,p,d,b,m,g;function a(t,e,i,n,r,a,o,s){var u;return n=g.call(this,t,i,n,a,o,s)||this,r=p.Rm.prototype.toString.call(n)+(r?"(cache)":""),s={offset:i.offset,fa:i.Sra+8,responseType:0},n.push(new d.kQ(t,e,r+"(moof)",s,n,a,o)),s={offset:i.offset+s.fa,fa:i.fa-s.fa,responseType:m.pc&&!m.pc.wY.SR?0:1},n.mediaType===h.default.Ta.Mb&&n.wa&&(0<n.wa.start&&(u=n.iWa(n.wa.start))&&(s.offset=i.offset+u,s.fa=i.fa-u),n.wa.end<n.NC&&(u=n.iWa(n.wa.end))&&(s.fa-=i.fa-u)),n.push(new d.kQ(t,e,r+"(mdat)",s,n,a,o)),n}_esm(e),e.Nya=void 0,n=i(2),c=i(116),h=n.__importDefault(i(28)),t=n.__importDefault(i(6)),f=i(9),l=i(5),r=i(241),p=i(101),d=i(233),b=i(117),m=t.default.$q,g=r.wE,n.__extends(a,g),a.prototype.iu=function(){return!this.ef&&!!this.Ea.length&&this.Ea.every(function(t){return t.iu()})},a.prototype.eG=function(t){var e,i,n,r,a,o,s,u;return this.ef?{status:b.Ij.xx}:this.iu()?(e=!1,n=(i=this.Ea[0].response).slice(0,i.byteLength-8),i=(r=new DataView(i)).getUint32(n.byteLength),l.assert("mdat"===c.ko(r.getUint32(n.byteLength+4))),a=this.wa&&0<this.wa.start,r=this.wa&&this.wa.end<this.NC,this.wa&&(a||r)?(a&&(s=(o=new c.cr(this.H,this.stream,n)).Jua(this.wa.start,this.S)),r&&!1!==s&&(u=(o=new c.cr(this.H,this.stream,s?f.AC(s.Ld):n)).Nua(this.wa.end-this.wa.start,this.S)),(n=r?u:s)&&(e=t.appendBuffer(f.AC(n.Ld),f.vq(this)),s&&(i-=s.Yi),u&&(i-=u.Yi)),o=this.Wga()):e=t.appendBuffer(n,f.vq(this)),(e=e&&t.appendBuffer(c.bA(i-8),f.vq(this)))&&(e=t.appendBuffer(this.Ea[1].response,f.vq(this))),this.ef=e,this.kVb(),{status:e?b.Ij.xx:b.Ij.Mf,mk:o}):{status:b.Ij.Mf}},a.prototype.toString=function(){return"ID: "+this.mi()+":"+g.prototype.toString.call(this)},i=a,e.Nya=i},function(t,e,i){var o,a,s,u,c;_esm(e),e.Jcb=void 0,t=i(2),o=i(116),a=t.__importDefault(i(28)),s=i(9),i(5),u=t.__importDefault(i(6)),c=i(117),i=function(){var t=2;function e(){for(var t=2;1!==t;)2===t&&(t=1)}for(;3!==t;)switch(t){case 4:return e;case 2:e.prototype.eG=function(t,e,i){for(var n,r=2;10!==r;)switch(r){case 5:return{status:c.Ij.Mf};case 4:r=!this.wa||this.uq||this.zw?3:11;break;case 2:e=this.Oe,r=1;break;case 3:r=this.wa&&(this.uq||this.zw)?9:12;break;case 1:r=this.ef?5:4;break;case 9:t=(n=this.Vlb(t)).$,r=7;break;case 12:t=!!(this.mediaType===a.default.Ta.Wb&&e.WD&&i&&this.av&&i.me>=this.me&&this.Lc-this.av<this.av-this.fd)||t.appendBuffer(this.response,s.vq(this)),r=6;break;case 7:n=n.mk,r=6;break;case 6:return this.ef=!0,this.iY(),{status:t?c.Ij.xx:c.Ij.Mf,mk:n};case 11:t=(n=this.Ulb(t)).$,n=n.mk,r=6}},e.prototype.Ulb=function(t){var e,i,n;for(a=2;12!==a;)switch(a){case 4:a=i?3:13;break;case 2:i=!(r=!(e={cE:0})),this.wa&&(e.cE=this.wa.nwa),this.duration<=0&&(r=!(i=!1)),a=4;break;case 8:r=t.appendBuffer(s.AC(r.Ld),s.vq(this)),a=7;break;case 6:this.H.error("AseFragmentMediaRequest: Fragment edit failed for "+this.toString()+" from [ "+this.OM+"-"+this.B5+"]"),r=!0,a=13;break;case 9:var r,a=(r=(r=new o.cr(new u.default.Console("MP4","media|asejs"),this.stream,this.response)).Jua(this.wa.start,this.$N,e.cE))?8:6;break;case 13:return{$:r,mk:n};case 14:r=t.appendBuffer(this.response,s.vq(this)),a=13;break;case 7:n=this.Wga(e),a=13;break;case 3:a=this.wa&&(0<this.wa.start||e.cE)?9:14}},e.prototype.Vlb=function(t){for(var e,i,n,r=2;12!==r;)switch(r){case 5:r=e?4:13;break;case 2:i={cE:0},e=!0,0===this.duration&&(e=!1),r=5;break;case 4:r=this.wa&&this.wa.end<this.NC||i.cE?3:14;break;case 3:r=(e=(e=new o.cr(this.H,this.stream,this.response)).Nua(this.wa&&this.wa.end,this.S,i.cE))?9:6;break;case 8:n=this.Wga(i),r=7;break;case 14:t=t.appendBuffer(this.response,s.vq(this)),r=7;break;case 9:t=t.appendBuffer(s.AC(e.Ld),s.vq(this)),r=8;break;case 7:return{$:t,mk:n};case 13:t=!0,r=7;break;case 6:this.H.error("AseFragmentMediaRequest: Fragment edit failed for "+this.toString()+" from [ "+this.OM+"-"+this.B5+"]"),t=!0,r=7}},t=4}}(),e.Jcb=i,e.default=new i},function(t,e,i){var r,n,a,o,s,u,c;function h(t,e){var i=this,n=[new a.s_(t),new a.s_(t),new a.s_(t)];return i=c.call(this,n,function(t){return t.complete?i.empty||t.Wa<=i.qvb?0:1:t.active?1:2})||this,n=r.__read(n,3),i.Fi=n[0],i.$e=n[1],i.qt=n[2],i.sr=0,i.hfa=0,i.H=t,i.af=e,i}_esm(e),e.Qya=void 0,r=i(2),i(5),n=i(833),t=i(42),a=i(834),o=i(102),s=i(83),u=i(232),c=n.xAa,r.__extends(h,c),Object.defineProperties(h.prototype,{fa:{get:function(){return this.Fi.fa+this.$e.fa+this.qt.fa},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Q0b:{get:function(){return this.qt},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{active:{get:function(){return this.$e},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{complete:{get:function(){return this.Fi},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{O6a:{get:function(){return this.sr},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{zC:{get:function(){return this.Fi.fa},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{cl:{get:function(){return this.Fi.fa+this.$e.fa-this.sr},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{R0b:{get:function(){return this.qt.fa},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{first:{get:function(){return this.XDb()},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Po:{get:function(){return this.xsb()},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{tla:{get:function(){return(!this.Fi.empty||this.qt.empty||this.$e.empty?this:this.$e.Wa<this.qt.Wa?this.$e:this.qt).first},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{j1a:{get:function(){return(this.qt.empty||this.$e.empty?this:this.$e.ob<this.qt.ob?this.qt:this.$e).Po},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{rWa:{get:function(){return this.qt.first},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{S:{get:function(){return this.first&&this.first.S},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Wa:{get:function(){return this.tla&&this.tla.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{ob:{get:function(){return this.j1a&&this.j1a.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{zj:{get:function(){return this.first&&this.first.zj},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{pvb:{get:function(){return this.Fi.duration},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{KJb:{get:function(){return this.Lc-this.CSa||0},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{qvb:{get:function(){return this.Fi.empty?this.Wa:this.Fi.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{CSa:{get:function(){return this.Fi.empty?this.fd:this.Fi.Lc},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{DSa:{get:function(){return this.Fi.empty?this.zd:this.Fi.me},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{i5a:{get:function(){return this.$e.me||this.Fi.me},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Hs:{get:function(){return this.qt.length},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Jp:{get:function(){return this.$e.length},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{FSa:{get:function(){return this.Fi.length},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{bd:{get:function(){return this.Fi.concat(this.$e)},enumerable:!1,configurable:!0}}),Object.defineProperties(h.prototype,{Dr:{get:function(){return this.Bg},enumerable:!1,configurable:!0}}),h.prototype.wK=function(t){var e;t.aborted?++this.hfa:this.sr+=t.bytesReceived||0,this.empty?this.Bg=new u.lB(this,{}):t.Wa!==this.ob&&(t.Wa>this.Bg.ob?this.Bg.KY(this.Bg.ob):(t.Wa<this.Wa||t.Wa===this.Bg.ob)&&(e=t.ob,this.CDb(function(t,e){return t.Wa-e.Wa},function(t){e=t.Wa===e?t.ob:e}),e===Math.max(this.ob,t.ob)?this.Bg.Hja():this.Bg.KY(e))),t.$va(this)},h.prototype.oy=function(t){t.aborted?--this.hfa:this.sr-=t.bytesReceived,this.empty?this.Bg=void 0:t.Wa!==this.ob&&t.ob<=this.Bg.ob&&t.Wa>this.Bg.Wa&&this.Bg.KY(t.Wa),t.jSa()},h.prototype.push=function(t){return this.wK(t),c.prototype.push.call(this,t)},h.prototype.shift=function(){var t=c.prototype.shift.call(this);return t&&this.oy(t),t},h.prototype.pop=function(){var t=c.prototype.pop.call(this);return t&&this.oy(t),t},h.prototype.unshift=function(t){return this.wK(t),c.prototype.unshift.call(this,t)},h.prototype.qq=function(t){this.wK(t),c.prototype.qq.call(this,t)},h.prototype.remove=function(t){return!!c.prototype.remove.call(this,t)&&(this.oy(t),!0)},h.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];return n=c.prototype.splice.apply(this,r.__spread([t,e],i)),i.forEach(this.wK.bind(this)),n.forEach(this.oy.bind(this)),n},h.prototype.gUb=function(n){var r=this;this.reduce(function(t,e,i){return e.aborted&&(n&&n(e,i,r),0===t.length||t[0].end!==i?t.unshift({start:i,end:i+1}):t[0].end+=1),t},[]).forEach(function(t){return r.splice(t.start,t.end-t.start)})},h.prototype.ema=function(e){return this.gWa(function(t){return t.ema(e)})},h.prototype.JM=function(e){return this.gWa(function(t){return t.JM(e)})},h.prototype.fWa=function(t){return-1!==(t=this.JM(t))?this.get(t):void 0},h.prototype.ZWb=function(t){for(var e,i=[];t<this.length;)(e=this.get(t))&&i.push(e),t++;return i},h.prototype.qA=function(t){this.move(t),this.NM(t)},h.prototype.YH=function(t){this.sr+=t.bytesReceived-t.ks,this.TG(t)},h.prototype.tk=function(t){for(this.sr+=t.bytesReceived-t.ks;this.$e.first&&this.$e.first.complete&&(this.Fi.empty?this.$e.first===this.tla:this.$e.first.Wa===this.Fi.ob);)this.rYb();this.Ut(t)},h.prototype.tX=function(t,e,i){this.sr-=t.bytesReceived,++this.hfa,this.MM(t,e,i)},i=h,e.Qya=i,t.xf(s.kv,i,!1),t.xf(o.rx,i),t.xf(o.kB,i)},function(t,e,i){var l;function n(t,e){this.ud=t,this.IK=e,this.jy()}_esm(e),e.xAa=void 0,l=i(2),i(5),Object.defineProperties(n.prototype,{length:{get:function(){return this.lf},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{empty:{get:function(){return 0===this.lf},enumerable:!1,configurable:!0}}),n.prototype.XDb=function(){return this.Qg&&this.Qg.get(0)},n.prototype.xsb=function(){return this.CK&&this.CK.get(this.CK.length-1)},n.prototype.get=function(t){t<0&&(t+=this.length);for(var e=0;e<this.ud.length;++e)if(this.bi[e+1]>t)return this.ud[e].get(t-this.bi[e])},n.prototype.push=function(t){return this.ud[this.IK(t)].push(t),this.jy(),this.lf},n.prototype.shift=function(){var t;if(this.Qg)return t=this.Qg.shift(),this.jy(),t},n.prototype.pop=function(){var t;if(this.CK)return t=this.CK.pop(),this.jy(),t},n.prototype.unshift=function(t){return this.ud[this.IK(t)].unshift(t),this.jy(),this.lf},n.prototype.qq=function(t){var e=this.IK(t);this.ud[e].qq(t),this.jy()},n.prototype.remove=function(e){var t=this.ud.some(function(t){return t.remove(e)});return t&&this.jy(),t},n.prototype.splice=function(t,e){for(var i,n,r,a,o,s=[],u=2;u<arguments.length;u++)s[u-2]=arguments[u];u=[];for(var c,h=t+Math.max(0,e),f=0;f<this.ud.length&&(i=this.ud[f],n=this.bi[f],r=this.bi[f+1],!(t<r&&(a=t-n,n=Math.min(h-n,i.length),void 0===c&&0<a&&n<i.length?Array.prototype.push.apply(u,i.splice.apply(i,l.__spread([a,n-a],s))):(Array.prototype.push.apply(u,i.splice(a,n-a)),void 0===c&&(c=0<f&&0==a?f-1:f)),h<=(t=r))));++f);if(s.length&&void 0!==c){for(h=this.IK(s[0]);0<c&&h<c&&this.ud[c].empty;)--c;for(;s.length&&h===c&&(this.ud[c].push(s.shift()),s.length);)h=this.IK(s[0]);for(;s.length&&++c<this.ud.length&&this.ud[c].empty;)for(;s.length&&h===c&&(this.ud[c].push(s.shift()),s.length);)h=this.IK(s[0]);s.length&&(o=this.ud[c]).splice.apply(o,l.__spread([0,0],s))}return this.jy(),u},n.prototype.find=function(i){var n,r=this;return this.ud.some(function(t,e){return void 0!==(n=t.find(r.hC(i,e)))})?n:void 0},n.prototype.findIndex=function(t){for(var e,i=0;i<this.ud.length;++i)if(-1!==(e=this.ud[i].findIndex(this.hC(t,i))))return e+this.bi[i];return-1},n.prototype.indexOf=function(t){for(var e,i=0;i<this.ud.length;++i)if(-1!==(e=this.ud[i].indexOf(t)))return e+this.bi[i];return-1},n.prototype.map=function(i){var n=this,t=this.ud.map(function(t,e){return t.map(n.hC(i,e))});return Array.prototype.concat.apply([],t)},n.prototype.reduce=function(n,t){var r=this;return this.ud.reduce(function(t,e,i){return e.reduce(r.Ypb(n,i),t)},t)},n.prototype.forEach=function(i){var n=this;this.ud.forEach(function(t,e){t.forEach(n.hC(i,e))})},n.prototype.t5=function(t){for(var e=this.ud.length-1;0<=e;--e)this.ud[e].t5(this.hC(t,e))},n.prototype.some=function(i){var n=this;return this.ud.some(function(t,e){return t.some(n.hC(i,e))})},n.prototype.wwa=function(t){for(var e=this.ud.length-1;0<=e;--e)if(this.ud[e].wwa(this.hC(t,e)))return!0;return!1},n.prototype.every=function(i){var n=this;return this.ud.every(function(t,e){return t.every(n.hC(i,e))})},n.prototype.CDb=function(r,t){var e;for(var i,n=this,a=this.ud.map(function(){return 0}),o=this.ud.filter(function(t){return t.empty}).length;o<this.ud.length;)e=a.map(function(t,e){return t<n.ud[e].length?n.ud[e].get(t):void 0}),t((i=e)[e=i.reduce(function(t,e,i,n){return void 0!==e&&(void 0===t||r(e,n[t])<0)?i:t},void 0)],this.bi[e]+a[e],this),++a[e],a[e]===this.ud[e].length&&++o},n.prototype.move=function(t){return!!this.remove(t)&&(this.qq(t),!0)},n.prototype.rYb=function(){var t;this.ud[1].length&&(t=this.ud[1].shift(),this.ud[0].push(t),this.jy())},n.prototype.gWa=function(t){for(var e=-1,i=0;i<this.ud.length;++i)if(-1!==(e=t(this.ud[i]))){e+=this.bi[i];break}return e},n.prototype.toJSON=function(){return this.map(function(t){return t.toJSON()})},n.prototype.jy=function(){var t;this.lf=0,this.bi=[0],this.CK=this.Qg=void 0;for(var e=0;e<this.ud.length;++e)t=this.ud[e],this.lf+=t.length,this.bi.push(this.bi[this.bi.length-1]+t.length),!this.Qg&&t.length&&(this.Qg=t),t.length&&(this.CK=t)},n.prototype.hC=function(i,t){var n=this,r=this.bi[t];return function(t,e){return i(t,r+e,n)}},n.prototype.Ypb=function(n,t){var r=this,a=this.bi[t];return function(t,e,i){return n(t,e,a+i,r)}},e.xAa=n},function(t,e,i){var a,r,n,o;function s(t,e){this.Ma=[],this.Bg=void 0,this.Qc=0,this.H=t,e&&e.length&&(Array.isArray(e)?(this.Ma=e.slice(),this.eS(0,this.Ma.length)):e instanceof s&&(this.Ma=e.Ma.slice(),this.eS(0,this.Ma.length)))}_esm(e),e.s_=void 0,a=i(2),r=i(5),t=i(42),n=i(232),i=i(102),Object.defineProperties(s.prototype,{length:{get:function(){return this.Ma.length},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{empty:{get:function(){return 0===this.Ma.length},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{first:{get:function(){return this.Ma[0]},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Po:{get:function(){return this.Ma[this.Ma.length-1]},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Wa:{get:function(){return this.first&&this.first.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{ob:{get:function(){return this.Po&&this.Po.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{Dr:{get:function(){return this.Bg},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{fa:{get:function(){return this.Qc},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{S:{get:function(){return this.first&&this.first.S},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{zj:{get:function(){return this.first&&this.first.zj},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{U:{get:function(){return this.Ma},enumerable:!1,configurable:!0}}),s.prototype.lsb=function(){var t;0===this.Ma.length?(r.assert(void 0===this.Bg),r.assert(0===this.Qc)):(r.assert(this.Bg instanceof n.lB),r.assert("number"==typeof this.Qc),r.assert(void 0!==this.Dr&&this.Dr.Wa===this.Wa),t=this.Ma.reduce(function(t,e,i){return 0===i||e.Wa===t?e.ob:t},0),r.assert(this.Dr.ob===t),r.assert(this.Ma.reduce(function(t,e,i){return 0===i||e.Wa===t?e.ob:t},0)===this.Dr.ob),r.assert(this.Ma.reduce(function(t,e){return t+e.fa},0)===this.Qc))},s.prototype.get=function(t){return t<0&&(t+=this.Ma.length),this.Ma[t]},s.prototype.push=function(t){return this.Ma.push(t),this.eS(this.Ma.length-1),this.length},s.prototype.unshift=function(t){return this.Ma.unshift(t),this.eS(0,1),this.length},s.prototype.pop=function(){if(0!==this.Ma.length)return this.Vga(this.Ma.length-1),this.Ma.pop()},s.prototype.shift=function(){if(0!==this.Ma.length)return this.Vga(0),this.Ma.shift()},s.prototype.splice=function(t,e){for(var i,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t<0&&(t+=this.Ma.length),t<0&&(t=0),t>this.Ma.length&&(t=this.Ma.length),(void 0===e||e<0)&&(e=0),0<(e=Math.min(e,this.Ma.length-t))&&this.Vga(t,t+e),r=(i=this.Ma).splice.apply(i,a.__spread([t,e],n)),0<n.length&&this.eS(t,t+arguments.length-2),r},s.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.Ma.length),t<0&&(t+=this.Ma.length),t>=this.Ma.length?new s(this.H):(e>this.Ma.length&&(e=this.Ma.length),e<0&&(e+=this.Ma.length),new s(this.H,this.Ma.slice(t,e)))},s.prototype.qq=function(t){if(0===this.Ma.length||t.Wa>=this.ob)this.push(t);else if(t.ob<=this.Wa)this.unshift(t);else{for(var e,i=0,n=this.Ma.length-1;i<n-1;)e=Math.floor((n+i)/2),r.assert(e!==n&&e!==i),t.Wa>=this.Ma[e].ob?i=e:n=e;r.assert(i!==n),r.assert(this.Ma[i].ob<=t.Wa&&this.Ma[n].Wa>=t.ob),this.splice(n,0,t)}},s.prototype.remove=function(t){return!((t=this.Ma.indexOf(t))<0)&&(this.splice(t,1),!0)},s.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=t.map(function(t){return t.Ma}),new s(this.H,Array.prototype.concat.apply(this.Ma,t))},s.prototype.forEach=function(i){var n=this;this.Ma.forEach(function(t,e){return i(t,e,n)})},s.prototype.some=function(i){var n=this;return this.Ma.some(function(t,e){return i(t,e,n)})},s.prototype.every=function(i){var n=this;return this.Ma.every(function(t,e){return i(t,e,n)})},s.prototype.map=function(i){var n=this;return this.Ma.map(function(t,e){return i(t,e,n)})},s.prototype.reduce=function(n,t){var r=this;return this.Ma.reduce(function(t,e,i){return n(t,e,i,r)},t)},s.prototype.indexOf=function(t){return this.Ma.indexOf(t)},s.prototype.find=function(i){var n,r=this;return this.Ma.some(function(t,e){return i(t,n=e,r)})?this.Ma[n]:void 0},s.prototype.findIndex=function(i){var n,r=this;return this.Ma.some(function(t,e){return i(t,n=e,r)})?n:-1},s.prototype.filter=function(i){var n=this;return new s(this.H,this.Ma.filter(function(t,e){return i(t,e,n)}))},s.prototype.t5=function(t){for(var e=this.Ma.length-1;0<=e;--e)t(this.Ma[e],e,this)},s.prototype.wwa=function(t){for(var e=this.Ma.length-1;0<=e;--e)if(t(this.Ma[e],e,this))return!0;return!1},s.prototype.ema=function(t){if(this.empty||t<this.fd||t>=this.Lc)return-1;for(var e,i=0,n=this.Ma.length-1;i<n;){if(e=Math.floor((n+i)/2),t>=this.Ma[e].fd&&t<this.Ma[e].Lc){n=e;break}t<this.Ma[e].Lc?n=e-1:i=e+1}return n},s.prototype.JM=function(t){if(this.empty||t<this.zd||t>=this.me)return-1;for(var e,i=0,n=this.Ma.length-1;i<n;){if(e=Math.floor((n+i)/2),t>=this.Ma[e].zd&&t<this.Ma[e].me){n=e;break}t<this.Ma[e].me?n=e-1:i=e+1}return n},s.prototype.fWa=function(t){return 0<=(t=this.JM(t))?this.Ma[t]:void 0},s.prototype.V2=function(t){var e=this.Ma[t].ob;for(t+=1;t<this.Ma.length&&e===this.Ma[t].Wa;++t)e=this.Ma[t].ob;t<this.Ma.length?void 0===this.Bg?this.Bg=new n.lB(this,{ob:e}):this.Bg.KY(e):void 0===this.Bg?this.Bg=new n.lB(this,{}):this.Bg.Hja()},s.prototype.wK=function(t,e){for(var i=t;i<e;++i)this.Qc+=this.Ma[i].fa;void 0===this.Bg||0===t?this.V2(0):this.Bg.ob===this.ob?this.V2(t-1):this.Ma[t].Wa===this.Bg.ob&&this.V2(t)},s.prototype.oy=function(t,e){var i;for(0===t?(this.Bg=void 0,e<this.length&&this.V2(e)):(i=this.Bg).ob>this.Ma[t-1].ob&&(e<this.length?i.KY(this.Ma[t-1].ob):i.Hja());t<e;++t)this.Qc-=this.Ma[t].fa},s.prototype.eS=function(t,e){void 0===e&&(e=t+1),this.wK(t,e)},s.prototype.Vga=function(t,e){void 0===e&&(e=t+1),this.oy(t,e)},o=s,e.s_=o,t.xf(i.rx,o),t.xf(i.kB,o)},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a){return(e=f.call(this,t,n,r,e,a)||this).Slb=i,e.W1=l.EE.INIT,e.I8b=n.offset,e.qga=u.Rm.prototype.toString.call(e)+" multiple",e.mob=n.fa,e.pL(t.url,n.offset,8,0),e}_esm(e),e.Vya=void 0,n=i(2),r=i(116),a=i(5),n.__importDefault(i(6)),o=i(9),s=i(241),u=i(101),c=i(233),h=i(117),f=s.wE,n.__extends(l,f),Object.defineProperties(l.prototype,{data:{get:function(){return this.dn},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{fa:{get:function(){return this.mob},enumerable:!1,configurable:!0}}),l.prototype.tk=function(t){var e,i;switch(this.dn=this.W1===l.EE.INIT?t.response:o.AC(this.dn,t.response),t.iY(),this.W1){case l.EE.INIT:i=(e=new DataView(this.dn)).getUint32(0),e=e.getUint32(4),r.ko(e),this.pL(t.url,t.offset+t.fa,i,0),s.wE.prototype.tk.call(this,t),this.W1=l.EE.wFa;break;case l.EE.wFa:i=(e=new DataView(this.dn)).getUint32(this.GMa-8),e=e.getUint32(this.GMa-4),r.ko(e),this.pL(t.url,t.offset+t.fa,i-8,0),this.W1=l.EE.rFa,s.wE.prototype.tk.call(this,t);break;case l.EE.rFa:s.wE.prototype.tk.call(this,t);break;default:a.assert(!1)}},l.prototype.eG=function(t){return this.ef?{status:h.Ij.xx}:this.iu()?(this.ef=t.appendBuffer(this.dn,o.vq(this)),{status:this.ef?h.Ij.xx:h.Ij.Mf}):{status:h.Ij.Mf}},l.prototype.pL=function(t,e,i,n){t=new c.kQ(this.stream,this.Slb,this.qga+" ("+this.Ea.length+")",{J:this.J,mediaType:this.mediaType,Oa:this.Oa,bitrate:this.bitrate,offset:e,fa:i,url:t,location:this.location,Md:this.Md,responseType:n},this,this.Oe,this.H),this.push(t),this.GMa=this.Ea.reduce(function(t,e){return t+e.fa},0)},l.EE={INIT:0,wFa:1,rFa:2,name:["INIT","MOOF","MDAT"]},e.Vya=l},function(t,e,i){var o,s;function n(t,e){this.ah=t,this.console=e,this.FF=1/0,this.oS=this.y2=0,this.iPa=!1}_esm(e),e.HKa=void 0,o=i(382),s=i(22),n.prototype.MVb=function(){this.iPa=!0},n.prototype.eDb=function(t,e,i,n,r){var a;if(this.ah&&(a=t.U)){if(1===i)i=a.zn(Math.ceil(this.ah*t.sa.hI),void 0,!0),t=(a=t.Wk(i)).LU.qm(t.sa),a.Bk({start:0,end:this.ah-i*t}),this.FF=this.ah;else{for(void 0!==n.J9a?i=(e=n.J9a)*t.sa.Y:(i=o.yna(n,r)+Math.ceil(n.esb*t.sa.hI),s.T.Eb(i).qm(t.sa),i=e+i,e=Math.ceil(i/t.sa.hI)),i=a.zn(i,void 0,!0),r=n=0;r<i;++r)n+=(a=t.Wk(r)).LU.qm(t.sa);n=e-n,(a=t.Wk(i)).Bk({end:n}),this.FF=e}return a.j2a(),a}},n.prototype.MJb=function(t){this.oS+=t.z7a,this.console.warn("StallAtFrameCount, adding frames: "+t.z7a,"total frames: "+this.oS,"needed frames: "+this.FF)},n.prototype.wIb=function(){return this.console.trace("stallAtFrameCount.hasEnoughRequestedFrames:","requested: "+this.y2,"needed: "+this.FF),this.y2>=this.FF},n.prototype.vIb=function(){return this.oS>=this.FF},n.prototype.OJb=function(t,e){this.y2+=this.QC(t,e)},n.prototype.aCb=function(t,e,i){t.z7a=this.QC(e,i)},n.prototype.QC=function(t,e){return t.LU.qm(e.sa)},n.prototype.Qy=function(){return!!this.vIb()&&(this.iPa?(this.console.warn("StallAtFrameCount underflow reported, bufferingComplete = false"),!1):(this.console.warn("StallAtFrameCount bufferingComplete = true:",this.oS+" >= "+this.FF),!0))},e.HKa=n},function(t,e,i){var y,w,_,E,k,S,o,T,s,u,c;_esm(e),e.Lea=void 0,t=i(2),y=t.__importStar(i(10)),w=t.__importDefault(i(28)),_=t.__importDefault(i(6)),E=i(25),k=i(16),S=i(238),o=i(838),T=new _.default.Console("ASEJS_STREAM_SELECTOR","media|asejs"),s=[k.ma[k.ma.zh],k.ma[k.ma.xd],k.ma[k.ma.Of],k.ma[k.ma.Kc],k.ma[k.ma.hh],"checkBuffering"],u={first:i(840),random:i(841),optimized:i(175).default,roundrobin:i(845),selectaudio:i(392),selectaudioadaptive:i(846),default:i(175).default,lowest:i(847),highest:i(848),throughputthreshold:i(849),replay:i(850).default,checkdefault:i(852),testscript:i(853)},c={STARTING:"default",BUFFERING:"default",REBUFFERING:"default",PLAYING:"default",PAUSED:"default",checkBuffering:"checkdefault"},i=function(){function t(i,t,e,n){var r;for(a=2;6!==a;)switch(a){case 9:i=i||this.I.Mwa,this.yg=s.reduce(function(t,e){return t[e]=((u[i]||u[c[e]])[e]||u[c[e]][e]).bind(r),t},{}),n&&(this.Q4a=new o.oHa(t)),a=6;break;case 2:(r=this).gP=i,this.I=t,this.ug=e,a=3;break;case 3:var a=9}}for(var e=2;6!==e;)switch(e){case 8:Object.defineProperties(t.prototype,{pqa:{get:function(){return this.vga},enumerable:!1,configurable:!0}}),e=7;break;case 7:return t;case 2:t.prototype.Gva=function(t,e,i,n,r,a){for(var o,s,u,c,h,f,l,p,d,b,m,g,v=2;61!==v;)switch(v){case 47:v=o===k.ma.xd?46:45;break;case 25:v=(o=t.state)===k.ma.zh?24:47;break;case 38:v=s&&null!==s.Je?36:37;break;case 41:m=e[r],v=40;break;case 20:v=0<=b?16:19;break;case 12:v=0<c?11:16;break;case 42:v=0<=r?41:39;break;case 22:s=this.yg[k.ma[t.state]].call(this,d,t,e,b,n,!!r,m),v=21;break;case 13:c=(u=i.U).length,v=12;break;case 63:v=62;break;case 46:this.ug.N8a(w.default.h0.zh),v=22;break;case 64:v=o===k.ma.hh?22:63;break;case 30:v=r<e.length?29:44;break;case 50:return t.state!==k.ma.Kc&&t.state!==k.ma.hh?(e=S.K9(t.state),a=this.Qy(t.buffer,e,t.playbackRate,n,a),(s.Pe=a.complete)?s.D3=a.reason:(s.Pe=!1,s.wI=a.wI,s.tD=a.tD,s.progress=a.progress)):(s.Pe=!0,s.D3="playing"),t.wM&&(s.Ic=i.Ic,a=t&&t.Qd,e=n.U,s.ek=e&&void 0!==a&&!isNaN(a)&&0<=a&&a<e.length?e.Cj(a):i.Ic,s.gTb=n.Ra||0,s.iQb=n.wb&&n.wb.Ra&&n.wb.Ra.Ga||0,s.Yia=i.lm-i.Mc,s.xRa=i.bh,s.NSb=null!==(l=null===(l=null===(l=_.default.y$b)||void 0===l?void 0:l.call(_.default))||void 0===l?void 0:l[1===t.mediaType?1:0])&&void 0!==l?l:-1,s.tf=t.state,s.Jp=t&&t.Jp,s.Axa=p,s.v_b=_.default.time.ea()),s;case 45:v=o===k.ma.Of?46:65;break;case 3:y.Ba(b)&&b>=e.length&&(this.ug.NY(void 0),b=void 0),v=9;break;case 17:b=0<b?b-1:0===b?0:e.length-1,v=16;break;case 40:m.U&&m.U.length||(n=!0,s.ez.push(m.Oa)),v=39;break;case 65:v=o===k.ma.Kc?22:64;break;case 11:h=u[c-1].Oa,b=E.Mp(e,function(t){return t.Oa===h}),v=20;break;case 43:r=s.Je-1,v=42;break;case 8:f=this.ug.ou.bitrate,b=0<(b=E.Mp(e,function(t){return t.bitrate>f}))?b-1:0===b?0:e.length-1,v=14;break;case 44:v=n?39:43;break;case 2:i=null==t?void 0:t.buffer,p=_.default.time.ea(),d=this.I,b=this.ug.d1a,m=!1,y.Ba(b)&&t.state===k.ma.zh&&(this.ug.NY(void 0),b=void 0),v=3;break;case 29:m=e[r],v=28;break;case 23:this.ug.N8a(w.default.h0.zh),v=22;break;case 39:n||(s.ez=void 0),v=38;break;case 62:return T.error("Stream selector called with invalid player state "+k.ma[t.state]),null;case 21:v=s.Kg&&(s.ez=[],e.forEach(function(t,e){for(var i=2;4!==i;)2===i&&(t===s.Kg&&(s.Je=e),(!d.pBb||t.U&&t.U.length)&&!t.Y$||s.ez.push(t.Oa),t.Y$=!1,i=4)}),!s.ez.length)?35:38;break;case 36:void 0===s.f3a?this.ug.NY(s.Je):this.ug.NY(s.f3a),n=e[s.Je],s.reason&&(n.ws=s.reason,"min_fragment_vmaf"!==s.reason&&(n.Fva=s.fu,n.Jz=s.Jz,n.Lo=s.Lo,n.Mo=s.Mo)),this.Q4a&&(s.xu=this.Q4a.EGb({Qp:i.lm-i.Mc,hNb:e[0],Kg:n,F1b:e[s.Je+1]||n,a0b:e[e.length-1],tf:t.state,playbackRate:t.playbackRate,Qd:t.Qd})),y.Ba(b)&&n.bitrate<e[b].bitrate&&(this.rga=i.Ic),v=50;break;case 16:y.ia(b)&&(b=this.ug.d1a),void 0!==n&&this.Jta(e,!!t.Wr,t.buffer,n),t.state===k.ma.zh&&y.Ba(b)&&(t.state=k.ma.xd),t.state!==k.ma.zh&&void 0===b&&(t.state=k.ma.zh),v=25;break;case 28:m.U&&m.U.length||(n=!0,s.ez.push(m.Oa)),v=44;break;case 9:v=y.ia(b)&&t.state===k.ma.Kc&&(m=!0,void 0!==this.ug.ou)?8:13;break;case 32:v=d.A9a&&r>d.TW?31:39;break;case 24:this.vga=this.rga=void 0,v=23;break;case 31:r=s.Je+1,v=30;break;case 19:g=u[c-1].bitrate,b=E.Mp(e,function(t){return t.bitrate>g}),v=17;break;case 37:return null;case 14:this.ug.NY(b),v=13;break;case 35:r=i.lm-i.Mc,m=void 0,n=!1,v=32}},t.prototype.Qy=function(t,e,i,n,r){return this.yg.checkBuffering.call(this,t,e,i,n,r,this.I)},t.prototype.xZb=function(t,e,i){for(var n=2;1!==n;)2===n&&(y.ia(e)?this.rga=this.vga=void 0:e.bitrate<i.bitrate&&(this.vga=t),n=1)},e=4;break;case 4:t.prototype.Jta=function(t,i,n,r){for(var a,o,e=2;5!==e;)2===e&&(this.t5(t,function(t){for(var e=2;1!==e;)2===e&&(t.lu&&t.wb&&t.wb.confidence?(a!==t.wb&&(a=t.wb,i&&t.wb&&(t.wb.Wr=!0),o=0===(o=Math.floor(r(t.wb,n,t.track.P.Gw[0])))?1:o),t.Ra=o):t.Ra=void 0,e=1)}),e=5)},t.prototype.t5=function(t,e){for(var i,n=2;3!==n;)switch(n){case 1:n=0<=i?5:3;break;case 2:i=t.length-1,n=1;break;case 4:--i,n=1;break;case 5:e(t[i],i,t),n=4;break;case 14:++i,n=2}},Object.defineProperties(t.prototype,{L7:{get:function(){return this.rga},enumerable:!1,configurable:!0}}),e=8}}(),e.Lea=i},function(t,e,i){var n,a,r;function o(t){return h(t.Kg)}function s(t,i){var e,n,r,a;return i&&"object"==typeof i?(e=t.Kg,n=t.F1b,r=t.a0b,a={selectedFragmentBitrate:c(e,t.Qd)*t.playbackRate,upswitchFragmentBitrate:c(n,t.Qd)*t.playbackRate,maxFragmentBitrate:c(r,t.Qd)*t.playbackRate,selectedPeakBitrate:(e.iA||f(e)||0)*t.playbackRate,upswitchPeakBitrate:(n.iA||f(n)||0)*t.playbackRate,maxPeakBitrate:(r.iA||f(r)||0)*t.playbackRate,selectedAverageBitrate:f(e)*t.playbackRate,upswitchAverageBitrate:f(n)*t.playbackRate,maxAverageBitrate:h(e)*t.playbackRate,bufferLevelMs:t.Qp,observedThroughput:l(t.Kg)||0,predictedThroughput:(null==e?void 0:e.Ra)||0},t=i.offset||0,Object.keys(a).reduce(function(t,e){return t+(i[e]||0)*a[e]},t)):0}function u(t,e){var i,n,r,a;if(!Array.isArray(e.Eua)||e.Eua.length<1)return 0;for(i=Array.from(e.Eua).sort(function(t,e){return t.Qp-e.Qp}),n=-1,e=0;e<i.length;e++)if(i[e].Qp>=t.Qp){n=e;break}return-1===n?s(t,i[i.length-1].Oja):0===n?s(t,i[0].Oja):(r=i[n-1].Qp,e=s(t,i[n-1].Oja),a=i[n].Qp,i=s(t,i[n].Oja),(1-(t=Math.min((t.Qp-r)/(a-r),1)))*e+t*i)}function c(t,e){var i;return(void 0===e||null===(i=t.U)||void 0===i?void 0:i.get(e).gRa)||t.iA||0}function h(t){var e=null===(e=null==t?void 0:t.P)||void 0===e?void 0:e.Gw;return e&&e[t.mediaType]||0}function f(t){return(null==t?void 0:t.bitrate)||0}function l(t){return(null===(t=null===(t=null==t?void 0:t.wb)||void 0===t?void 0:t.Ra)||void 0===t?void 0:t.Ga)||0}function p(t){for(var e=2;4!==e;)2===e&&(this.I=t,this.algorithm=(r[this.I.FRb]||r.default).bind(this),e=4)}_esm(e),e.oHa=void 0,t=i(2).__importDefault(i(6)),n=i(16),a=i(839),new t.default.Console("ASEJS_PACERATE_SELECTOR","media|asejs"),r={maxStreamBitrate:o,static:function(t,e){return e.mZb},none:function(){return 0},regression:u,epsGreedy:function(t,e){return Math.min(u(t,e)||0,l(t.Kg))},default:o},p.prototype.gna=function(t,e,i){for(var n,r=2;8!==r;)switch(r){case 1:r=i?4:5;break;case 4:return a000.N4L(6),(e=Math.ceil(a000.J4L(e,i)))<(t=(this.I.Lja.mac||0)*((null===(n=t.hNb)||void 0===n?void 0:n.iA)||0))?0:e;case 5:return 0;case 2:r=1}},p.prototype.GYb=function(t,e){var i;return!(!e.Lja.Y9b||t.tf!==n.ma.zh&&t.tf!==n.ma.xd)&&!!((t=null===(e=t.Kg)||void 0===e?void 0:e.wb)&&t.confidence>=n.uda.Dx&&null!==(i=t.Ra)&&void 0!==i&&i.Ga)},p.prototype.EGb=function(t){for(var e,i,n,r=2;14!==r;)switch(r){case 1:r=i?4:5;break;case 2:e=new a.Lda({sP:0,$L:0,KO:0}),i=this.I.Lja,r=1;break;case 3:r=n&&t.Qd&&0==t.Qd%n?9:8;break;case 5:case 9:return e;case 8:e=0,r=7;break;case 4:n=this.I.P0b,r=3;break;case 7:return this.GYb(t,this.I)?e=l(t.Kg):t.Qp>=i.XW&&(e=this.algorithm(t,this.I)),new a.Lda({sP:this.gna(t,e,i.z6a[0]),KO:this.gna(t,e,i.z6a[2]),$L:this.gna(t,e,i.z6a[1])})}},i=p,e.oHa=i},function(t,e,i){var a;function n(t){this.sP=t.sP,this.$L=t.$L,this.KO=t.KO}_esm(e),e.Lda=void 0,a=i(2),Object.defineProperties(n.prototype,{A6a:{get:function(){return[this.sP,this.$L,this.KO]},enumerable:!1,configurable:!0}}),n.prototype.v7=function(){return this.A6a.some(function(t){return 0<t})},n.prototype.m2a=function(t,e,i,n){var r=8*t/Math.max(i-e,1);return!!this.v7()&&(t=this.A6a.map(function(t){return Math.abs(r-t)/t}),Math.min.apply(Math,a.__spread(t))<n)},e.Lda=n},function(t,e,i){var r,a,o,s;function n(t,e,i,n){if(r.ia(n))t=a(i);else if(o(i[n]))t=n;else if((t=a(i,n))<0)return null;return new s(t)}r=i(10),e=i(35),a=e.mma,o=e.tH,s=e.up,t.exports={STARTING:n,BUFFERING:n,REBUFFERING:n,PLAYING:n,PAUSED:n}},function(t,e,i){var n;function r(t,e,i){return(t=i.map(function(t,e){return t.lu?e:null}).filter(function(t){return null!==t})).length?new n(t[Math.floor(Math.random()*t.length)]):null}n=i(35).up,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(t,e,i){var l,p,d,u,b,m;_esm(e),e.A$=void 0,t=i(2),l=t.__importStar(i(10)),p=i(25),t=t.__importDefault(i(35)),d=i(390),u=i(391),b=t.default.assert,m=t.default.up,e.A$=void 0,function(){for(var t=2;5!==t;)2===t&&(e.A$=function(t,e,i,n,r,a,o){for(;;)return"playing"===t.Wia?u.bx.call(this,t,e,i,n,r,a,o):s.call(this,t,e,i,n)},t=5);function s(n,r,a,t){var o,s,e,u,c;for(i=2;20!==i;)switch(i){case 2:b(!l.ia(t),"Must have at least one selected stream"),o=a[t],s=o.bitrate,e=o,u=r.Qd,i=5;break;case 4:o=p.ig(a.slice(0,Math.min(t+(n.orb?2:1),a.length)).reverse(),f),i=3;break;case 5:i=o.Ra?4:14;break;case 3:i=void 0===o?9:6;break;case 8:var h="fallback_lowest_acceptable_stream",i=7;break;case 9:o=a[0],i=8;break;case 6:h="select_feasible_buffering",i=7;break;case 7:c=null==o?void 0:o.Ra,i=14;break;case 14:return e!==((t=new m).Kg=o)&&(t.reason=h,t.fu=c),d.k8(n,a,u,t),t}function f(t){for(var e,i=2;7!==i;)switch(i){case 4:return!1;case 5:i=!e||(t.bitrate>s?n.E1b:1)*t.bitrate*r.playbackRate>e?4:3;break;case 2:void 0!==u&&null!=o&&o.U&&d.l8(n,a,o.U.cx,u,u+1),e=t.Ra,i=5;break;case 3:return h="buff_lt_hist",c=e,!0}}}}()},function(t,e,i){var T;i(10),T=i(35).console,t.exports=function(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d){for(var b,m,g,v,y,w,_,E=a000,k=2;39!==k;)switch(k){case 44:w=t,k=43;break;case 18:E.Z4L(7),p*=E.J4L(S,1e3),E.Z4L(7),l*=E.J4L(S,1e3),k=16;break;case 42:k=(t=Math.max(o-i,0))<l&&t<w?41:34;break;case 27:b=v[s],m=g[s],k=26;break;case 6:E.Z4L(8),t=E.J4L(f,0,8,a),E.N4L(9),f=E.j4L(8,f,0),E.N4L(7),a=E.j4L(S,1e3),e<=s&&T.error("StreamingIndex: "+s+" >= fragmentsLength: "+e),k=11;break;case 2:var S=t.S;e=Math.min(t.length,e),g=t.vd,v=t.sizes,y=n-i,k=3;break;case 11:i+=t,0===o&&(i=0),E.Z4L(7),i*=E.J4L(S,1e3),E.Z4L(7),o*=E.J4L(S,1e3),k=18;break;case 30:h+=v[_],r+=g[++_],k=31;break;case 25:w=Math.max(b,c),k=24;break;case 26:k=h<b?25:42;break;case 23:i=r,h+=v[_],r+=t=g[++_],k=24;break;case 40:return{result:!0,EW:n/(S/1e3),St:!0};case 34:E.N4L(10),i+=E.j4L(f,b,0,a),o+=m,k=32;break;case 15:k=s<e?27:40;break;case 16:E.N4L(7),y*=E.J4L(S,1e3),k=15;break;case 29:++s,k=28;break;case 43:n=Math.min(t,n),k=15;break;case 28:k=u<=s&&y<t?40:44;break;case 21:return{result:!1,EW:t/(S/1e3),St:!1};case 35:E.Z4L(0),t=E.J4L(i,o),k=34;break;case 3:n=1/0,_=w=0,t=t.vd[0],E.N4L(11),r=E.j4L(1e3,t,r,S),k=6;break;case 24:k=h<w?23:22;break;case 32:h-=b,k=31;break;case 41:return{result:!1,EW:Math.min(t,n)/(S/1e3),St:!0};case 31:k=r<i&&_<s?30:29;break;case 22:k=!d&&(t=o-i)<p?21:35}}},function(t,e,i){var n,s,p,c,u,d,r,b,m,g,v;_esm(e),e.IKb=e.o8a=void 0,n=i(2),s=n.__importDefault(i(86)),p=n.__importStar(i(10)),c=i(25),u=i(365),d=n.__importDefault(i(6)),t=n.__importDefault(i(115)),i=n.__importDefault(i(35)),r=i.default.fPb,b=i.default.ptb,m=i.default.T3,g=i.default.up,v=t.default.mwa,t=(i=function(){function h(t,e,i,n,r,a){for(var o=2;5!==o;)switch(o){case 1:return(n=n<r&&t)?{m5:n}:{m5:n,reason:t?"no_valid_DelayTarget":i?"no_valid_VMAF":"no_valid_Bitrate"};case 2:t=i?t.sb>=a.uu&&t.sb<=a.G2a:t.bitrate>=a.Lw&&t.bitrate<=a.fA,o=1}}function a(a,o,t){var s=new g,u=Math.max(a.Lw,a.w8,o.zpa?a.Kra:-1/0);return s.Kg=c.ig(t.filter(function(t){return t.bitrate<=a.fA}).reverse(),function(t){var e;for(n=2;13!==n;)switch(n){case 2:i={Ra:t.Ra,em:t.wb&&t.wb.em,Dk:t.wb&&t.wb.Dk},n=1;break;case 1:n=t.bitrate>u?5:14;break;case 8:var i=l(t,r,a)<=e&&(s.fu=r,i&&(s.Lo=i.em||0,s.Mo=i.em&&i.Dk),s.reason="hist_bufftime",!0),n=7;break;case 5:t=t.bitrate*o.playbackRate,r=i.Ra,n=3;break;case 7:return i;case 6:i=!1,n=7;break;case 3:n=r?9:6;break;case 9:e=function(t,e){var i,n,r;for(i=2;13!==i;)switch(i){case 9:return n[n.length-1].d;case 5:i=0===r?4:3;break;case 2:i=t.Y6?1:14;break;case 1:n=t.Y6,r=c.Mp(n,function(t){return e<=t.r}),i=5;break;case 3:i=-1===r?9:8;break;case 4:return n[0].d;case 8:a000.Z4L(0),t=n[a000.j4L(1,r)],n=n[r],i=6;break;case 6:return Math.floor(t.d+(n.d-t.d)*(e-t.r)/(n.r-t.r));case 14:return t.$r}}(a,t),n=8;break;case 14:var r=i.Ra;i=t.bitrate*o.playbackRate<=r?(s.fu=r,i&&(s.Lo=i.em||0,s.Mo=i.em?i.Dk:void 0),s.reason="lt_hist_lte_minbitrate",!0):r?(s.fu=r,i&&(s.Lo=i.em||0,s.Mo=i.em?i.Dk:void 0),!(s.reason="hist_tput_lt_minbitrate")):(s.reason="no_historical_lte_minbitrate",!0),n=7}})||t[0],s}function f(t,e){for(var i,n,r=2;12!==r;)switch(r){case 7:r=(n=p.Ba(e.B$)&&0<=e.B$&&e.B$<=100&&!p.ia(t)&&!p.Bb(t))?6:14;break;case 2:(i=new g).Kg=t,t=i.Kg.wb||{},i.Mo=t.em&&t.Dk,i.Lo=t.em||0,t=s.default(i.Mo,{}),r=8;break;case 8:r=7;break;case 14:return n?(e=t.wj(e.B$/100)||i.Kg.Ra,i.fu=e,i.reason="hist_tdigest"):i.Kg.Ra&&(e=i.Kg.Ra,i.fu=e,i.reason="hist_throughput"),i;case 6:n=u.eLa.HGb(t),n=!!p.gd(n)&&(t.wj=n,!0),r=14}}function o(t,e,i){for(var n,r,a,o,s,u,c=2;19!==c;)switch(c){case 2:n=!!t.uu&&!!t.G2a&&i.every(function(t){return t.sb&&t.sb<=110}),r=null,a=i.length-1,c=1;break;case 5:r=f(o=i[a],t),s=l(o.bitrate*e.playbackRate,r.fu,t),u=function(t,e){var i,n=a000;for(o=2;9!==o;)switch(o){case 5:i=e.cP,o=4;break;case 7:n.Z4L(0);var r=n.J4L(11,14);n.Z4L(0);var a=n.j4L(5600,5950);t=m(t,r,a)%686,o=9;break;case 1:var o=0===e.cP.lastIndexOf("log",0)?5:3;break;case 4:return(i=e.p8a[i])&&2===i.length?1e3*(i[0]+i[1]*Math.log(1+t)):e.$r;case 2:n.N4L(12);r=n.J4L(4,50007,99986,35e4,7);n.N4L(0);a=n.J4L(6,1006);t=m(t,0,r)/a,o=1;break;case 3:return 0===e.cP.lastIndexOf("sigmoid",0)?(i=e.cP,(i=e.p8a[i])&&2===i.length?1e3*(i[0]+i[1]*v(t)):e.$r):e.$r;case 14:i=e.cP,o=9}}(r.fu,t),u=h(o,r.fu,n,s,u,t),c=8;break;case 1:c=0<=a&&(n?i[a].sb>=t.uu:i[a].bitrate>=t.Lw)?5:11;break;case 8:o=u.m5,u=u.reason,r.Jz=s,c=14;break;case 14:c=o?11:13;break;case 12:a--,c=1;break;case 13:r.reason=u,c=12;break;case 11:return p.Bb(r)&&(r=f(i[0],t)),p.Bb(r)&&((r=f(i[0],t)).reason="fallback_no_acceptable_stream"),r}}for(0;;)return{lpb:function(t,e,i,n){for(;;)return("historical"===t.gpa?function(t,e,i){for(n=2;7!==n;)switch(n){case 1:var n="number"!=typeof r?5:4;break;case 2:var r=d.default.storage.get("vb");n=1;break;case 5:return(t.uT?o:a)(t,e,i);case 4:return(t=new g).Kg=c.ig(i.slice().reverse(),function(t){return t.bitrate<=r})||i[0],t.reason="hist_bitrate",t}}:t.uT?o:a)(t,e,i)},Omb:h};function l(t,e,i){return t=b(i.tj,t*i.xra),r(t,e)}}()).Omb,e.o8a=i.lpb,e.IKb=t},function(t,e,i){var a,o,s,u;function n(t,e,i){var n,r=this.tga;return e=e.buffer.Ic,n="forward"===t.uWb,a.ia(r)?(r=n?o(i):o(i,i.length),this.uga=e,this.tga=r,new u(r)):(s(i[r])||(r=o(i,r),this.uga=e,this.tga=r),r<0?null:e>this.uga+t.H_b?(t=i.map(function(t,e){return t.lu?e:null}).filter(function(t){return null!==t})).length?(n?r=(t.indexOf(r)+1)%t.length:(r=t.indexOf(r)-1)<0&&(r=t.length-1),this.tga=t[r],this.uga=e,new u(t[r])):null:new u(r))}a=i(10),e=i(35),o=e.mma,s=e.tH,u=e.up,t.exports={STARTING:n,BUFFERING:n,REBUFFERING:n,PLAYING:n,PAUSED:n}},function(n,t,r){!function(){for(var m,t,g,v,y,s,w,_,u,c,e=2;4!==e;)2===e&&(m=r(10),g=(t=r(35)).console,v=t.debug,y=t.assert,s=r(86),w=t.tH,_=t.up,u=r(392),c=r(16).ma,n.exports={STARTING:function(t,e,i,n){for(var r,a=2;7!==a;)switch(a){case 5:var o={minInitAudioBitrate:t.WW,minHCInitAudioBitrate:t.VW,maxInitAudioBitrate:t.HW,minRequiredAudioBuffer:t.D8};v&&g.log("selectAudioStreamStarting: overriding config with "+JSON.stringify(r)),s(r,o),a=4;break;case 2:o=t,r=i[n||0].kh,a=1;break;case 4:return i=i[(t=u[c[c.zh]](o,e,i,n)).Je],v&&g.log("selectAudioStreamStarting: selected stream :"+i.bitrate+" kbps, profile :"+i.kh),t;case 1:a=(r=t&&t.FP&&0<=t.FP.indexOf(r))?5:4}},BUFFERING:i,REBUFFERING:i,PLAYING:i,PAUSED:i},e=4);function i(u,c,h,t){var e,i,f,n,l,r,a,o,s,p;for(d=2;32!==d;)switch(d){case 17:s--,d=11;break;case 5:d=u&&u.FP&&0<=u.FP.indexOf(f)?3:4;break;case 15:e=this.pqa,i=this.L7,d=27;break;case 26:v&&g.log("  Upswitch allowed. lastDownswitchPts = "+i+", lastUpswitchPts = "+e+", streamingPts = "+o.Ic),d=25;break;case 19:d=w(r)&&(0==s||r.bitrate*c.playbackRate*p.FUa<b)?18:17;break;case 8:d=l&&1<l.length?7:21;break;case 6:d=s<0?14:13;break;case 11:d=0<=s?10:21;break;case 13:d=s&&b<p.FUa*o*c.playbackRate?12:16;break;case 2:y(!m.ia(t),"Must have at least one selected stream"),f=h[t].kh,d=5;break;case 22:v&&g.log("  Upswitch not allowed. lastDownswitchPts = "+i+", lastUpswitchPts = "+e+", buffer level = "+r+"ms"),d=21;break;case 27:d=c.sq&&r>p.Zz&&(void 0===i||Number(e)>i||o.Ic-i>p.V7)?26:22;break;case 3:n=t,u.x$a.some(function(t){for(var i,e,n,r,a,o,s=2;9!==s;)switch(s){case 1:s=e?5:3;break;case 4:l=h.filter(function(t){var e=t.bitrate;return r<=e&&e<=a&&0<=i.indexOf(t.kh)&&e*n/8<o}).map(function(t){return t.Lf}),s=3;break;case 2:e=(i=t.profiles)&&0<=i.indexOf(f),s=1;break;case 5:n=(t=t.wX)&&t.D8||u.D8,r=t&&t.Uac||-1/0,a=t&&t.QN||1/0,o=c.buffer.ew,s=4;break;case 12:case 3:return e}}),d=8;break;case 12:v&&g.log("throughput for audio "+b+" kbps < "+p.FUa+"*"+o+" kbps, try to downswitch"),--s,d=11;break;case 16:var d=s<l.length-1&&b>p.Jab*o*c.playbackRate&&(v&&g.log("throughput for audio "+b+" kbps > "+p.Jab+"*"+o+" kbps"),r=(o=c.buffer).lm-o.Mc,a.U&&a.U.length)?15:21;break;case 10:o=l[s],r=h[o],d=19;break;case 23:n=o,d=21;break;case 7:o=(a=h[t]).bitrate,s=l.indexOf(t),b=a.Ra,p=u.jsb,d=6;break;case 18:n=o,d=21;break;case 4:return new _(t);case 25:d=++s<l.length?24:21;break;case 14:n=0,d=21;break;case 24:o=l[s],r=h[o],d=w(r)&&b>p.Jab*r.bitrate*c.playbackRate?23:25;break;case 21:var b=h[n];return n!==t&&v&&g.log((t<n?"up":"down")+"switching audio from "+a.bitrate+" kbps, to "+b.bitrate+" kbps"),v&&g.log("selectAudioStream: selected stream :"+b.bitrate+" kbps, profile :"+f+", audio throughput:"+b.Ra+"kbps, streamingPts :"+c.buffer.Ic),new _(n)}}}()},function(t,e,i){var n;function r(){return new n(0)}i(10),n=i(35).up,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(t,e,i){var n;function r(t,e,i){return new n(i.length-1)}i(10),n=i(35).up,t.exports={STARTING:r,BUFFERING:r,REBUFFERING:r,PLAYING:r,PAUSED:r}},function(n,t,r){!function(){for(var s,t,u,c,e=2;6!==e;)switch(e){case 2:s=r(10),e=1;break;case 8:n.exports={STARTING:t.STARTING,BUFFERING:t.BUFFERING,REBUFFERING:t.REBUFFERING,PLAYING:i,PAUSED:i},e=6;break;case 1:r(28),t=r(35),r(6),u=t.assert,c=t.up,t=r(175).default,e=8}function i(t,e,i,n){for(var r,a=2;12!==a;)switch(a){case 4:a000.N4L(13);var o=a000.J4L(20,9,18,18);n=i.length-o,a=3;break;case 2:u(!s.ia(n),"Must have at least one selected stream"),u(s.Ba(e.Qd),"player missing fragmentIndex"),e=c(n),a=4;break;case 8:a=r.wb&&r.wb.Ra&&r.bitrate<r.wb.Ra.Ga-t.E_b?7:6;break;case 9:r=i[n],a=8;break;case 14:return e.Je=0,e;case 3:a=-1<n?9:14;break;case 7:return e.Je=n,e;case 6:--n,a=3}}}()},function(t,e,i){_esm(e),t=i(851),e.default={PLAYING:t.bx,PAUSED:t.bx}},function(t,e,i){var E,n,k,S,T,A,O;_esm(e),e.bx=void 0,t=i(2),E=t.__importStar(i(10)),n=t.__importDefault(i(35)),k=t.__importDefault(i(175)),S=i(101),T=t.__importDefault(i(6)),A=n.default.assert,O=n.default.up,e.bx=void 0,function(){for(var t=2;5!==t;)2===t&&(e.bx=function(t,e,i,n,r,a,o){for(var s,u,c,h,f,l,p,d,b,m,g,v,y,w,_=2;66!==_;)switch(_){case 30:_=f.wb&&f.wb.tdigest?29:38;break;case 56:m+=1,_=55;break;case 52:_=g<Math.min(g+t.msb,d.length)?51:48;break;case 65:d=void 0,e.UT&&(d=T.default.time.ea()-e.UT),_=63;break;case 76:s=m,_=73;break;case 46:b+=d.get(g).duration,_=45;break;case 11:_=f===h?10:58;break;case 69:s=m,_=73;break;case 63:r.push({Qd:e.Qd,Kcc:d,Dac:b,$8b:v,Hcc:y,Jcc:l,Yia:a,o$b:o,t9b:p,hac:u.bitrate,iac:null!==(w=u.sb)&&void 0!==w?w:0,A9b:f.bitrate,B9b:null!==(w=f.sb)&&void 0!==w?w:0,gcc:h.bitrate,hcc:null!==(w=h.sb)&&void 0!==w?w:0,jD:s}),_=62;break;case 67:m--,_=71;break;case 61:c.QQa=r,_=60;break;case 45:g++,_=47;break;case 47:_=g<d.length?46:65;break;case 51:w=d.get(g),p.push({d:w.duration,b:w.fa}),_=49;break;case 21:m=0,_=35;break;case 57:_=f<h?56:72;break;case 70:_=u[m].f===h?69:68;break;case 54:_=void 0!==d?53:65;break;case 2:A(!E.ia(n),"Must have at least one selected stream"),A(E.Ba(e.Qd),"player missing fragmentIndex"),u=t.yZb,c=new O(n),h=null!==(s=e.Qd)&&void 0!==s?s:-1,_=3;break;case 49:g++,_=52;break;case 17:_=t.MBb?16:60;break;case 6:a000.N4L(0),(m=a000.j4L(s,h))<0&&(m=0),m>=u.length&&(m=u.length-1),f=u[m].f,_=11;break;case 74:m++,_=55;break;case 73:h=s,_=20;break;case 29:l=f.wb.tdigest,y.push(l.min),y.push(l.r9),y.push(l.Jl),y.push(l.uk),y.push(l.Kl),_=40;break;case 68:_=u[m].f<h?73:67;break;case 20:_=void 0!==h?19:59;break;case 3:s=u[0].f,_=9;break;case 58:s=void 0,_=57;break;case 7:return k.default.PLAYING.call(this,t,e,i,n,r,a,o);case 19:c.Je=u[h].BWb,_=18;break;case 72:--m,_=71;break;case 59:return k.default.PLAYING.call(this,t,e,i,n,r,a,o);case 75:_=u[m].f>h?73:74;break;case 60:return c;case 77:_=u[m].f===h?76:75;break;case 40:y.push(l.s9),_=39;break;case 38:l=void 0,f.wb&&f.wb.tputTrace&&(l=f.wb.tputTrace),p=[],d=f.U,b=0,_=54;break;case 9:m=u[u.length-1].f,_=8;break;case 8:_=h<s||m<h?7:6;break;case 55:_=m<u.length?77:73;break;case 24:o=e.buffer.ew-o.fa,u=i[n],h=i[n],_=21;break;case 53:g=e.Qd,_=52;break;case 71:_=0<=m?70:73;break;case 48:g=e.Qd,_=47;break;case 35:_=m<i.length?34:61;break;case 34:s=m<=n,v=void 0,y=[],(f=i[m]).wb&&f.wb.throughput&&(v=f.wb.throughput.Ga),_=30;break;case 10:h=m,_=20;break;case 62:m++,_=35;break;case 39:y.push(l.max),_=38;break;case 16:r=[],a=(a=e.buffer).lm-a.Mc,o=S.Rm.xTa(e.buffer.U),_=24;break;case 18:c.Kg=i[c.Je],_=17}},t=5)}()},function(e,t,i){!function(){for(var t=2;8!==t;)switch(t){case 4:var m=i(16).Jc;e.exports={checkBuffering:function(i,t,e,n,r,a){var o,s,u,c,h,f=a000;function l(t){return t=n.U.o5(i.Mc+t,void 0,!0),(s-i.cl)/(s+(t.offset+t.fa)-o)}for(b=2;37!==b;)switch(b){case 6:f.N4L(14);var p=f.J4L(4,13,59,7),p=a.tj*(c?a.vua:p);a.HBb&&n.wb&&n.wb.Aj&&n.wb.Aj.Ga>a.Kqa&&(p+=a.Qha+n.wb.Aj.Ga*a.fta),r&&(p+=r.It*a.Rha),b=12;break;case 7:return{complete:!1,tD:!0};case 44:b=0<d?43:42;break;case 35:p=n.U.vd(r),a=Math.min(r+Math.floor(a.eY/p),n.U.length-1),d=n.U.Sd(a),p=8*o*e/t-i.Mc,b=31;break;case 23:b=p<=u?22:39;break;case 24:o=n.U.Sd(r),b=23;break;case 16:b=n.U&&n.U.length?27:15;break;case 11:b=t?20:10;break;case 25:return{complete:!0,reason:"outofrange"};case 42:d=c.offset,b=41;break;case 30:b=r<a?29:40;break;case 29:c=n.U.get(a),f.N4L(15);var d=f.j4L(6,12,120)*d*e/t-c.Z-p,b=44;break;case 15:return t<c&&(p=Math.min(h,Math.max(a.eY*(c/t-1),p))),{complete:!1,wI:p,progress:0};case 12:p=h?Math.min(h,p):p,b=11;break;case 26:b=-1===r?25:24;break;case 20:s=0,i.U.forEach(function(t){for(var e=2;1!==e;)2===e&&(s+=t.Z+t.duration>i.Mc?t.fa:0,e=1)}),c=(e=Math.max(e,1))*n.bitrate,b=16;break;case 2:u=i.lm-i.Mc,c=t===m.Of,t=n.Ra||0,p=0,h=a.Zxa&&!c?a.wD:a.nra,h=Math.min(a.gA,h),b=3;break;case 3:b=h<=u?9:8;break;case 43:return{complete:!1,wI:p=Math.min(h,u+d),progress:l(p)};case 39:return 0<t&&t<c&&(p=Math.min(h,Math.max(a.eY*(c/t-1),p))),{complete:!1,wI:p,progress:l(p)};case 8:b=t<=a.Qqa&&(0<t||!a.Sla)?7:6;break;case 21:return{complete:!0,reason:"hightp"};case 10:return{complete:!1,wI:p};case 27:r=n.U.zn(i.Ic),b=26;break;case 9:return{complete:!0,reason:"maxsize"};case 22:b=t>c*a.l5?21:35;break;case 41:case 31:--a,b=30;break;case 40:return{complete:!0,reason:"norebuff"}}}},t=8;break;case 2:i(10),i(28),i(35),t=4}}()},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){return u=(s=i).map(function(t,e){return e}),null===o?(t=r(i),o=i[t].bitrate,new a(t)):i.length?void 0===(t=u.filter(function(t){return i[t].bitrate==o})[0])?(n.log("Defaulting to first stream due to unvalid bitrate requested: "+o),new a(u[0])):new a(t):null}e=i(35),i=i(6).default,n=e.console,r=e.mma,a=e.up,u=s=o=null,i.iub&&(i.iub.kl={xb:function(){u=s=o=null},Gva:function(t){o=t},B$b:function(){return{all:s,ibb:u}}}),t.exports={STARTING:c,BUFFERING:c,REBUFFERING:c,PLAYING:c,PAUSED:c}},function(t,e,i){var n,r,a,o,s,u,f,l,p,c;function h(t,e){for(var h,i=2;12!==i;)switch(i){case 3:h.Esb=s(t.xt.threshold||6e3,1,1e5),h.zsb=s(t.xt.gamma||1,.1,10),h.filter=t.xt.filter,h.PYb=!!t.xt.simpleScaling,t.xt.niqrfilter&&t.xt.niqrcurve&&(h.J3a=t.xt.niqrfilter,h.yPb=u(t.xt.niqrcurve,1,0,4)),i=14;break;case 14:return h;case 2:(h=c.call(this,t,e)||this).SD=function(t,e){return o.SD(h.config,t,e)},h.O9=function(t,e,i){for(var n,r,a,o,s,u,c=2;13!==c;)switch(c){case 8:return e=h.PYb?(e=f(h.KTa,o,1))*a+(o=f(h.JTa,o,1))*(1-a):f(p(h.KTa,h.JTa,a),o,1),void 0!==(t=h.J3a&&(null===(s=t[h.J3a])||void 0===s?void 0:s.hX))&&(s=l(h.yPb,t),e=Math.min(e*s,1)),a000.N4L(16),h.tUa(a000.J4L(1,e,u),i);case 2:i=null!=i?i:h.QN,u=null!==(r=null===(n=t.Ra)||void 0===n?void 0:n.Ga)&&void 0!==r?r:0,n=null!==(o=null===(a=t[h.filter])||void 0===a?void 0:a.Ga)&&void 0!==o?o:u,a=Math.pow(Math.max(1-n/h.Esb,0),h.zsb),o=e.lm-e.Mc,c=8}},Array.isArray(t.xt.curves)&&(h.KTa=u(t.xt.curves[0],0,0,1),h.JTa=u(t.xt.curves[1],0,0,1)),i=3}}_esm(e),e.NFa=void 0,t=(n=i(2)).__importDefault(i(115)),r=n.__importDefault(i(6)),a=i(245),o=i(246),s=t.default.T3,u=t.default.Pub,f=t.default.HVa,l=t.default.jCb,p=t.default.IWb,new r.default.Console("ASEJS_PREDICTOR","media|asejs"),c=a.CJ,n.__extends(h,c),i=h,e.NFa=i},function(t,e,i){var r,n,o;_esm(e),e.zKa=void 0,t=(r=i(2)).__importDefault(i(6)),n=i(245),o=i(246),new t.default.Console("ASEJS_PREDICTOR","media|asejs"),i=function(n){var t=2;function a(t,e){var r;for(i=2;9!==i;)switch(i){case 3:return r;case 2:(r=n.call(this,t,e)||this).SD=function(t,e){return o.SD(r.config,t,e)},r.O9=function(t,e,i){var n;return i=null!=i?i:r.QN,n=a.FYb(t,r.config),t=t.Ra?t.Ra.Ga*(100-r.AEb(e,n))/100|0:0,r.tUa(t,i)},i=4;break;case 4:var i=3}}for(;3!==t;)switch(t){case 2:r.__extends(a,n),a.FYb=function(t,e){var i=!!t.Wr;return e.$wa&&(null===(t=t.Ra)||void 0===t?void 0:t.Ga)<e.hU&&(i=!0),i},a.prototype.AEb=function(t,e){for(var i,n,r=2;3!==r;)switch(r){case 5:return Array.isArray(e)&&(n=o.GVa(e,t.lm-t.Mc,i.Fia)),n;case 2:i=this.config,n=e?i.$ja:i.Eia,e=e?i.aka:i.Gia,r=5}},t=4;break;case 14:case 4:return a}}(n.CJ),e.zKa=i},function(t,e){function i(t,e,i,n,r,a,o,s){this.gb=t,this.qRa=e,this.config=i,this.console=n,this.mediaType=r,this.Cb=a,this.Pa=o,this.ac=s,this.Xq=this.Vh=!1}_esm(e),e.EEa=void 0,i.prototype.VL=function(t,e){!this.gb.O.bv||this.ac.cL||this.ac.t2||(t-=this.gb.Fe,this.Vh&&!this.Xq&&t+this.config.O$a>=e&&0===this.Pa.KD&&0===this.Pa.Hs&&0===this.Pa.oUb&&((e=this.ac.Ge.P.Pb)+1<(t=this.ac.$M())||(this.qRa[this.mediaType].q$a||this.Cb.Fnb(this.mediaType),this.Xq=!0,this.qRa[this.mediaType].d9())))},e.EEa=i},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.CEa=void 0,n=i(2),r=i(20),t=i(394),a=i(388),o=t.xba,n.__extends(s,o),s.prototype.jAb=function(t){o.prototype.F7.call(this,{value:t})},s.prototype.Z_a=function(){return!0},s.prototype.zwa=function(){},s.prototype.F7=function(t){o.prototype.F7.call(this,t),t.done&&(t=this.ZB.p4,r.ga&&this.H.trace("Requests drained",{a9b:t&&t.O.id}),(t=t&&t.eb(this.Sg))&&t instanceof a.y0&&t.VL(this.Og.sna()||0))},i=s,e.CEa=i},function(t,e,i){var a,o,s;function n(t,e,i){this.H=t,this.hlb=e,this.Sg=i,this.O1=0,this.i2=!1,this.fS=[],this.zF=void 0,s.ga&&t.trace("BranchRequestIterator ["+this.Sg+"]: created")}_esm(e),e.Eza=void 0,a=i(2),o=i(149),s=i(20),Object.defineProperties(n.prototype,{Ryb:{get:function(){return this.O1},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{p4:{get:function(){return this.NMa},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{Zk:{get:function(){return this.i2},enumerable:!1,configurable:!0}}),Object.defineProperties(n.prototype,{ITa:{get:function(){return this.tl?this.tl.Pz?"Complete":this.tl.Xta?"WaitingForBranch":void 0!==this.zF&&0!==this.zF?"In Policy "+this.fS[this.zF].name:"WaitingForRequest":"Uninitialized;Prior:"+this.KNa},enumerable:!1,configurable:!0}}),n.prototype.next=function(){return a.__awaiter(this,void 0,void 0,function(){var e,i,n;return a.__generator(this,function(t){switch(t.label){case 0:return(e=this.tl)?(this.zF=void 0,[4,e.next()]):[3,6];case 1:i=t.bd(),n=0,t.label=2;case 2:return n<this.fS.length?(this.zF=n,[4,this.fS[n].process(i)]):[3,5];case 3:i=t.bd(),t.label=4;case 4:return n++,[3,2];case 5:return(this.zF=void 0,i.done||this.tl!==e)?[2,{done:!0}]:(this.O1++,i.value.sPa(),[2,{done:!1,value:i.value.value}]);case 6:return[2,o.AsyncIterator.boa()]}})})},n.prototype.lWb=function(){this.U9a(),this.IUb()},n.prototype.U9a=function(){var t;this.tl&&(this.KNa=this.ITa,(t=this.tl)&&t.Fh(),this.fS.forEach(function(t){return t.reset()}),t&&s.ga&&this.H.trace("BranchRequestIterator ["+this.Sg+"]: Disposing iterator that was on branch ",this.p4&&this.p4.O.id),this.i2=!1,this.zF=this.tl=void 0)},n.prototype.Mqb=function(t){this.fS.push(t)},n.prototype.IUb=function(){var n,t,r,e=this;this.i2||(n=this.H,t=this.hlb,r=this.Sg,this.O1=0,this.KNa=this.NMa=void 0,this.tl=o.flatten(o.map(t.YYa(),function(i){return a.__awaiter(e,void 0,void 0,function(){var e;return a.__generator(this,function(t){switch(t.label){case 0:return this.NMa=i,this.O1=0,s.ga&&n.trace("BranchRequestIterator ["+this.Sg+"]: new branch "+i.O.id),[4,i.yz(r)];case 1:return(e=t.bd())?[2,{value:e}]:(s.ga&&n.error("BranchRequestIterator ["+this.Sg+"]: skipping branch "+i.O.id),[2,{value:[]}])}})})},n),n),this.i2=!0)},e.Eza=n},function(t,e,i){var n,u,c;function r(t,e,i,n,r,a,o,s){this.mediaType=t,this.Fa=i,this.events=r,this.BZ=[],1===this.mediaType&&this.BZ.push(new c.rKa(t,e,i,n,r,a,o,s,2)),this.BZ.push(new u.RKa(t,e,i,n,r,a,o,"stream",1))}_esm(e),e.uJa=void 0,n=i(2),u=i(860),c=i(861),r.prototype.reset=function(){this.BZ.forEach(function(t){return t.reset()})},r.prototype.close=function(){this.BZ.forEach(function(t){return t.close()})},r.prototype.Li=function(t){return n.__read(this.BZ,1)[0].Li(t)},e.uJa=r},function(t,e,i){var n,r,a,o;function s(){return null!==o&&o.apply(this,arguments)||this}_esm(e),e.RKa=void 0,n=i(2),r=i(5),a=i(20),o=i(395).mea,n.__extends(s,o),s.prototype.jA=function(t){var e=t.stream,i=t.xj;t=t.xe,r.assert(void 0!==i),this.FPa(e,i,t)&&a.ga&&this.trace("stream "+e.id+", "+e.bitrate+"kbit/s @ "+i.Y+"ms")},s.prototype.aVa=function(t,e){var i=t.lJ,n=this.Fa.js(e);r.assert(void 0!==n),a.ga&&this.trace("emitStreamPresentingEvent @ "+t.timestamp.Y+"ms for "+(null==i?void 0:i.id)+", "+(null==i?void 0:i.bitrate)+"kbit/s"),this.events.emit("streamPresenting",{type:"streamPresenting",mediaType:this.mediaType,playerTimestamp:e,position:n,trackIndex:null===(n=null==i?void 0:i.track)||void 0===n?void 0:n.jC,streamIndex:null==i?void 0:i.Lf})},e.RKa=s},function(t,e,i){var n,r,a,o,c;function s(t,e,i,n,r,a,o,s,u){return(t=c.call(this,t,e,i,n,r,a,o,"segment",u)||this).hx=s,t}_esm(e),e.rKa=void 0,n=i(2),r=i(20),a=i(5),o=i(9),c=i(395).mea,n.__extends(s,c),s.prototype.jA=function(t){var e,i=t.xj;t=t.xe,a.assert(void 0!==i),e=null===(e=this.Fa.js(i))||void 0===e?void 0:e.xa,a.assert(void 0!==e),this.FPa(e,i,t)&&r.ga&&this.trace("segment "+e+" @ "+i.Y+"ms")},s.prototype.aVa=function(t,e){var i=t.lJ,n=this.Fa.js(e);a.assert(void 0!==n),r.ga&&this.trace("emitSegmentPresentingEvent @ "+t.timestamp.Y+"ms for segment "+i),n.xa!==i&&(r.ga&&this.console.warn("player position:",n,"not equal to trackedElement:",i),n={xa:i,offset:o.T.Gb}),t={type:"segmentPresenting",playerTimestamp:e,position:n},this.hx&&(t.metrics=this.hx.xna(i)),r.ga&&this.trace("segmentPresenting: "+JSON.stringify(t)),this.events.emit(t.type,t)},e.rKa=s},function(t,e,i){var r,a,n;function o(t,e,i){this.Yf=t,this.IOb=e,this.H=i}_esm(e),e.vCa=void 0,r=i(2),a=i(20),n=i(72),Object.defineProperties(o.prototype,{name:{get:function(){return"ExitZone"},enumerable:!1,configurable:!0}}),o.prototype.waitUntil=function(t){var e=(t=n.nya(this.Yf,t,!0)).promise;return this.Xpb=t.Ds,e},o.prototype.process=function(n){return r.__awaiter(this,void 0,void 0,function(){var e,i;return r.__generator(this,function(t){switch(t.label){case 0:return n.done?[3,2]:(e=n.value.value).sma?(i=e.xj.Qa(this.IOb),a.ga&&this.H.trace("["+e.mediaType+"] JIT: waiting until playertime >= "+i.Y,"to append next request "+e.toString()),[4,this.waitUntil(i)]):[3,2];case 1:t.bd(),a.ga&&this.H.trace("["+e.mediaType+"] JIT: now appending request "+e.toString()),t.label=2;case 2:return[2,n]}})})},o.prototype.reset=function(){var t;null!==(t=this.Xpb)&&void 0!==t&&t.Nb()},e.vCa=o},function(t,e){function i(t,e,i,n,r,a,o,s,u,c){var h=this;this.id=t,this.P=e,this.Z=i,this.wU=r,this.Bl=a,this.bv=o,this.hq=s,this.Wo=u,this.ae=c,this.kN=function(t){var e;return(null===(t=null===(e=h.Bl)||void 0===e?void 0:e[t])||void 0===t?void 0:t.q0b)||h.ae},this.Ha=n||1/0}_esm(e),e.lKa=void 0,Object.defineProperties(i.prototype,{W:{get:function(){return this.P.W},enumerable:!1,configurable:!0}}),i.prototype.vXa=function(){var t,i=this,e=Object.keys(this.Bl||{}).filter(function(t){var e;return!(null===(t=null===(e=i.Bl)||void 0===e?void 0:e[t])||void 0===t||!t.weight)});return e.length&&null!==(t=e.map(this.kN).reduce(function(t,e){return t===e?e:void 0}))&&void 0!==t?t:this.ae},i.prototype.toString=function(){return"segmentId: "+this.id+" playlistSegmentId: "+this.Wo+" viewableId: "+this.P.W+" pts: "+this.Z+"-"+this.Ha+" defaultKey: "+this.wU+" dests: "+JSON.stringify(this.Bl)+" terminal: "+!!this.bv},i.prototype.toJSON=function(){return{id:this.id,viewable:this.P.W,"startPts:":this.Z,endPts:this.Ha,defaultKey:this.wU,"dests:":this.Bl,terminal:!!this.bv,playlistSegmentId:this.Wo}},e.lKa=i},function(t,e,i){var h,b,m,g,v,y;_esm(e),e.Gya=void 0,t=i(2),h=t.__importStar(i(10)),b=i(176),m=t.__importDefault(i(865)),g=i(366),v=t.__importDefault(i(28)),y=t.__importDefault(i(6)),i=function(){var t;function e(e,t,i,n,r,a,o,s,u){var c,h,f;for(d=2;32!==d;)switch(d){case 2:this.H=t,this.fg=n,this.kc=s,this.MF=u,d=3;break;case 35:d=34;break;case 34:this.UK=new g.Eca(o,r,this.H),d=23;break;case 16:d=this.MF.Jr?15:27;break;case 27:this.lga=!1,d=26;break;case 19:void 0!==t&&void 0!==t.Jl&&void 0!==t.uk&&void 0!==t.Kl&&(f=(t.Kl-t.Jl)/t.uk),n=r.bX?v.default.Nf.Dx:v.default.Nf.pB,i&&i.confidence>=n&&i.Ra&&f&&this.Lmb(i,t,f),d=16;break;case 26:d=o&&1<o.length&&r.Ala?25:33;break;case 3:this.rb=e,this.Sb=this.H.warn.bind(this.H),this.jn=this.H.trace.bind(this.H),this.I=r,a000.N4L(17);var l=a000.J4L(10,7000184,1000017,8,16);this.PNa=0==Math.floor(l*Math.random())%r.Ria,this.bD=this.WZa=this.XZa=this.c4=this.Wr=void 0,d=12;break;case 15:try{for(c=2;4!==c;)2===c&&(h=new m.default(e,this.H,{bufferSize:y.default.Io()},r),this.fg.uqb(h),this.AOa=h,c=4)}catch(t){a000.Z4L(1),e.Cb.Kn(a000.j4L("Hindsight: Error when creating QoEEvaluator: ",t))}d=27;break;case 23:this.lga=this.UK.r7(),d=33;break;case 33:r.Waa&&(this.C2=this.B2=!1),d=32;break;case 25:var p,d="baseline"===(p=r.QIb)?24:22;break;case 24:this.UK=new g.Eca(o,r,this.H),d=23;break;case 22:d="LR"===p?21:35;break;case 21:this.UK=new g.wDa(o,r,this.H),d=23;break;case 12:this.bxa=this.v9a=this.w9a=this.axa=this.T4a=this.U4a=0,this.u2=b.eN(r,a),t=this.nNa(i),d=19}}for(t=2;27!==t;)switch(t){case 2:Object.defineProperties(e.prototype,{r7:{get:function(){return this.lga},enumerable:!1,configurable:!0}}),Object.defineProperties(e.prototype,{gua:{get:function(){return this.AOa},enumerable:!1,configurable:!0}}),t=5;break;case 5:e.prototype.O8a=function(t,e,i){for(var n=2;4!==n;)2===n&&(this.bD=t,h.ia(e)||(this.XZa=e),h.ia(i)||(this.WZa=i),n=4)},e.prototype.Kxa=function(t){for(var e=2;5!==e;)2===e&&(this.I=t,this.u2.Kxa(t),e=5)},e.prototype.mga=function(t,e,i,n){var r;for(a=2;7!==a;)switch(a){case 1:var a="iqr"===t?5:9;break;case 5:a=void 0!==n?4:3;break;case 2:r=this.I,a=1;break;case 9:a="avg"===t?8:3;break;case 8:return!e.Ra||e.Ra.Ga<r.hU;case 4:return!!(e.Ra&&i&&h.Ba(n)&&e.Ra.Ga<r.hU&&n>r.Ica);case 3:return!1}},t=9;break;case 9:e.prototype.eN=function(t){return 1===t?this.u2.O9:this.u2.SD},e.prototype.jP=function(t){for(var e=2;1!==e;)2===e&&(this.u2.jP(t),e=1)},e.prototype.lqb=function(t,e,i,n,r,a){for(var o,s=2;5!==s;)switch(s){case 3:o=this.I,s=3;break;case 2:o=this.I,s=1;break;case 1:o.Waa&&this.vob(e)||!i||!n||!(i=a?Math.min(i,n,a):Math.min(i,n))||(this.fg.get(),t=(n=this.rb.La).dw(n.Wc,t),e.track.ku()&&t>o.Qia&&i===r?(o.set?(o.set({pipelineEnabled:!0}),o.set({maxParallelConnections:1}),o.set({maxActiveRequestsPerSession:2}),o.set({maxPendingBufferLen:500})):(o.zq=!0,o.RN=1,o.Fw=2,o.g8=500),e.track.c$({type:e.track.config.type,connections:1,openRange:!1,pipeline:!0,socketBufferSize:o.UP,minRequestSize:o.YN}),this.axa++,o.Waa&&(this.B2=!0)):o.zq&&!e.ku()&&(t<o.Pia||i!==r)&&(o.set?(o.set({pipelineEnabled:!0}),o.set({maxParallelConnections:3}),o.set({maxActiveRequestsPerSession:3}),o.set({maxPendingBufferLen:12e3})):(o.zq=!0,o.RN=3,o.Fw=3,o.g8=12e3),e.track.c$({type:e.config.type,connections:3,openRange:!1,pipeline:!0,socketBufferSize:o.UP,minRequestSize:o.YN}),this.bxa++,o.Waa&&(this.C2=!0))),s=5}},e.prototype.oqb=function(t,e){for(var i,n,r,a=2;6!==a;)switch(a){case 9:a=void 0===n||n<i?8:7;break;case 2:i=this.I,a=1;break;case 1:a=this.PNa?5:6;break;case 7:this.bn.fqa=i,a=6;break;case 8:this.bn.FT[r]=t,this.bn.TZ[r]=e,a=7;break;case 5:void 0===this.bn&&(this.bn={startTime:y.default.time.ea(),FT:[],TZ:[],mqa:void 0,fqa:void 0}),i=Math.floor((y.default.time.ea()-this.bn.startTime)/i.ML),n=this.bn.fqa,r=this.bn.mqa?i-this.bn.mqa-1:i,a=9}},e.prototype.wQb=function(){for(var e,t,i=2;4!==i;)switch(i){case 1:i=this.MF.Jr?5:4;break;case 2:e=this.rb,i=1;break;case 5:try{for(t=2;1!==t;)2===t&&(this.fg.tVb(),this.AOa.ed(),t=1)}catch(t){a000.N4L(1),e.Cb.Kn(a000.j4L("Hindsight: Error during clean up: ",t))}i=4}},e.prototype.KQb=function(t){for(var e=2;1!==e;)2===e&&(this.I.yM&&t===v.default.Ta.Mb&&(this.bxa=this.axa=this.v9a=this.w9a=this.T4a=this.U4a=0),e=1)},e.prototype.IQb=function(t,e){for(var i=2;1!==i;)2===i&&(t===v.default.Ta.Mb&&(this.w2b=e),i=1)},t=11;break;case 19:e.prototype.TCb=function(t){for(var n,r,a,o,e,i,s,u=2;6!==u;)switch(u){case 3:a.confidence&&(e=a.Ra?a.Ra.Ga:0,i=a.Aj?a.Aj.Ga:0,s=a.gu?a.gu.Ga:0),u=9;break;case 2:r=(n=this).I,a=this.fg.get(),o=[],[v.default.Ta.Mb,v.default.Ta.Wb].forEach(function(t){for(var e,i=2;4!==i;)switch(i){case 2:i=n.kc(t)?1:4;break;case 9:i=n.kc(t)?4:3;break;case 1:void 0!==(e=n.rb.bZa(t))&&(t===v.default.Ta.Mb&&(r.yM&&(e.parallelDownloadMs=n.U4a,e.parallelDownloadBytes=n.T4a,e.singleDownloadMs=n.w9a,e.singleDownloadBytes=n.v9a,e.switchFromParallelToSingle=n.axa,e.switchFromSingleToParallel=n.bxa),a&&a.confidence&&a.Ra&&(e.asetput=a.Ra,e.aseiqr=a.hu,e.tdigest=a.Dk&&a.Dk.wz()||void 0),a&&a.avtp&&(e.avtp=a.avtp.Ga)),o.push(e)),i=4}}),t.stat=o,s=i=e=0,u=3;break;case 9:t.location={responseTime:i,httpResponseTime:s,bandwidth:e,confidence:a.confidence,name:this.w2b},this.PNa&&(t.bt={startTime:this.bn.startTime,audioMs:this.bn.FT,videoMs:this.bn.TZ},this.bn.FT=[],this.bn.TZ=[],this.bn.mqa=this.bn.fqa),u=7;break;case 7:"none"!==r.kE&&(t.isConserv=this.Wr,t.ccs=this.c4),u=6}},e.prototype.vob=function(t){for(var e,i=2;6!==i;)switch(i){case 5:return!0;case 2:e=this.I,i=1;break;case 8:return this.C2&&(this.C2=!1),!1;case 1:i=this.B2&&t.ku()?5:4;break;case 9:return!0;case 3:i=this.C2&&e.zq&&!t.ku()?9:8;break;case 4:this.B2&&(this.B2=!1),i=3}},e.prototype.nNa=function(t){for(e=2;4!==e;)switch(e){case 1:t=t.Dk,e=5;break;case 2:var e="tdigest"===this.I.Moa?1:3;break;case 6:t=t.Dk,e=6;break;case 3:e=9;break;case 5:return t;case 9:t=t.hu&&t.hu.A9,e=5}},e.prototype.Lmb=function(t,e,i){for(var n,r=2;3!==r;)2===r&&(n=this.I,this.mga(n.kE,t,e,i)?this.Wr=!0:this.Wr=!1,this.c4=0,this.mga(n.Mqa,t,e,i)&&(this.RKb=!0),r=3)},t=15;break;case 15:return e;case 11:e.prototype.vub=function(t){var e,i,n,r,a;for(o=2;6!==o;)switch(o){case 5:e=this.fg.get(),o=4;break;case 3:i=this.nNa(e),o=9;break;case 2:n=this.I,o=1;break;case 1:var o="none"!==n.kE&&!0!==this.Wr&&t.state<=n.mra?5:6;break;case 4:o="iqr"===n.kE?3:8;break;case 9:void 0!==i&&void 0!==i.Jl&&void 0!==i.uk&&void 0!==i.Kl&&(r=(i.Kl-i.Jl)/i.uk),o=8;break;case 8:a=n.bX?v.default.Nf.Dx:v.default.Nf.pB,e&&e.confidence>=a&&this.mga(n.kE,e,i,r)&&(this.Wr=!0,this.c4=t.state),o=6}},e.prototype.Kqb=function(t){for(var e=2;1!==e;)2===e&&(t.Wr=this.Wr,e=1)},e.prototype.SCb=function(i){for(var t,e,r,n,a=2;25!==a;)switch(a){case 2:var o,s={},u=this.I,c=this.rb;(o={type:"logdata",target:"startplay",fields:{}}).fields=s,Object.keys(i).forEach(function(t){for(var e=2;1!==e;)2===e&&(s[t]=i[t],e=1)}),t=this.fg.get(),a=3;break;case 8:s.isConserv=this.Wr,s.ccs=this.c4,s.isLowEnd=this.RKb,s.histdiscbw=this.bD,e=this.WZa,a=12;break;case 3:t&&t.Ra&&(t=t.Ra.Ga),s.actualbw=t,a=8;break;case 11:r=function(t){return h.Ba(t)?Number(t).toFixed(2):-1},a=10;break;case 12:a=e?11:16;break;case 27:c.mc&&(u=y.default.Io(),s.maxAudioBufferAllowedBytes=u[v.default.Ta.Wb],s.maxVideoBufferAllowedBytes=u[v.default.Ta.Mb]),c.emit(o.type,o),a=25;break;case 17:s.histtd=t,a=16;break;case 16:s.histage=this.XZa,u.Ala&&this.UK&&(s.ishighstable=this.lga,s.avg_avtp=this.UK.rsb,s.avg_ne=Number(this.UK.tsb).toFixed(4)),a=27;break;case 10:t=[r(e.min||void 0),r(e.r9||void 0),r(e.Jl||void 0),r(e.uk||void 0),r(e.Kl||void 0),r(e.s9||void 0),r(e.max||void 0)],n=[],e=h.isArray(e.Mi)&&e.Mi.reduce(function(t,e){for(var i,n=2;3!==n;)switch(n){case 5:return-1<i&&-1<e&&t.push({mean:i,n:e}),t;case 2:i=r(e.qg||void 0),e=r(e.n||void 0),n=5}},n),s.histtdc=e,a=17}},t=19}}(),e.Gya=i},function(t,e,i){var r,a,u;function n(t,e,i,n){this.rb=t,this.H=e,this.Kk=this.H.error.bind(this.H),this.Sb=this.H.warn.bind(this.H),this.jn=this.H.trace.bind(this.H),this.Dg=this.H.log.bind(this.H),this.Skb=new a,this.I=n,this.s2=[],this.J2=void 0,t=n.K6,r.call(this,t.numB*t.bSizeMs,t.bSizeMs),this.gga=!0}i(28),e=i(6).default,r=i(143),i(397),a=i(866),new e.Console("ASEJS_QOE_EVAL","media|asejs"),u=i(126).wJa||i(126),(n.prototype=Object.create(r.prototype)).add=function(t,e,i){this.J2||(this.J2=e),r.prototype.add.call(this,t,e,i)},n.prototype.MEb=function(){var e;if(0!==this.s2.length)return e=[],this.s2.forEach(function(t){t&&t.DL&&e.push(t.wz())}),e},n.prototype.ed=function(){this.s2=[]},n.prototype.CHb=function(){var i,n,t=this.get(this.I.K6.fillS);if((0===t[0]||null===t[0])&&(t.some(function(t,e){if(t)return i=t,n=e,!0}),i))for(var e=0;e<n;e++)t[e]=i;return t={trace:t,timestamp:this.J2,Iy:this.Hd},this.gga=!1,r.prototype.reset.call(this),this.gga=!0,this.J2=void 0,t},n.prototype.Pla=function(t){var e,i,n,r,a,o;if(t&&!t.DL){if((i=t.Nt.r0a)&&(t.uua=this.Zha(t),t.a$=!1),(e=this.CHb())&&e.trace&&e.trace.length){if((n=t.Dj.PD)<(r=e.timestamp))for(a=e.Iy,o=e.trace[0],n=Math.ceil((r-n)/a),e.timestamp=r-n*a,r=0;r<n;r++)e.trace.splice(0,0,o);e.trace.length&&e.trace.pop()}(t.VA=e).trace&&0===e.trace.length||void 0===e.timestamp||(e=this.vtb(t),t.z4a=e,i&&e&&(t.a$=e.jD),t.DL=!0,this.s2.push(t))}},n.prototype.vtb=function(t){var e,i,n,r;for(var a=this.I.J6,o={jD:!1,g7:!1,fBb:0},s=0;s<a.length;s++)if(e=a[s],i=this.Skb.create(e)){n=u.now(),r={};try{!function(t){for(var e,i,n=0;n<t.length;n++)if(e=t[n].reduce(function(t,e){return e.sb?t+1:t},0),void 0===i)i=e;else if(e!==i)throw Error("length of per-fragment vmafs mismatch across streams [ceil(log2(delta))="+Math.ceil(Math.log(i<e?e-i:i-e)*Math.LOG2E)+"]")}(t.nx),r=i(t)}catch(t){r.FM=t}r.grb=u.now()-n,o[e]=r,o.jD=o.jD||r.jD,o.g7=o.g7||r.g7,o.FM=o.FM||r.FM}return o},n.prototype.Zha=function(t){var e="";return(t=t.Nt).$n<1e3&&(e+=t.Nbb),t.vr<1e3&&(e=e+(""!==e?",":"")+t.uQa),1e3<=t.$n&&1e3<=t.vr&&(e="media"),e},t.exports=n},function(t,e,i){var n;function r(){}function a(e,i,n){return function(t){return t.GI=i,t.compare=n,e(t)}}n=i(867),(r.prototype.constructor=r).prototype.create=function(t){var e;switch(t){case"htwbr":break;case"htwbr-dlvmaf":e=a(n.PV,!1,n.zSa);break;case"htwbr-segvmaf":e=a(n.PV,!0,n.zSa);break;case"hvmafgr":case"hvmafgr-dlvmaf":e=a(n.PV,!1,n.Sja);break;case"hvmafgr-segvmaf":e=a(n.PV,!0,n.Sja);break;case"hvmafdp":case"hvmafdp-dlvmaf":e=a(n.dp,!1);break;case"hvmafdp-segvmaf":e=a(n.dp,!0);break;default:throw Error("Unrecognized hindsight algorithm")}return e},t.exports=r},function(t,e,i){var R,N,h,f,s,u,c,j,l,C,L;function M(t,e,i){return(e=t.nx[e][i]).fa+t.Dj.KT*e.duration/8}function D(t){var e,i,n,r,a=t.Dj,o=a.Lm,s=t.Nt,u=s.lw,c=[];for(s=u=Math.min(s.EH,u);o<=s;s--){if(L.update("backward step loop"),i=e=t.nx[0][s].Z-t.Dj.Z,s<u&&(R(void 0!==c[s+1],"expect solution[(fragIndex + 1)] !== undefined"),i=Math.min(c[s+1].startTime,i)),(r=B(n=M(t,0,s),i,t.VA,a.PD))<0)throw Error("Infeasible: reason throughput at min bitrate");c[(n={startTime:r,endTime:i,r4:i,GAb:e,dP:n,Je:0}).EWa=s]=n}for(a=0,s=o;s<=u;s++)a+=c[s].dP,c[s].gla=a;if(!U(t,c,o,u))throw Error("Infeasible: reason buffer capacity at min bitrate");return{jD:!0,dsa:0==c.length,Oq:c}}function U(t,e,i,n){for(var r,a,o,s,u,c,h,f,l,p;i<=n;i++){if(L.update("checkBuffer"),r=t,a=e,o=i,L.update("check buffer vacancy"),s=r.Dj,u=r.nx[s.cW],c=r.pRa,h=!0,r=r.jDb(Math.floor(a[o].startTime)+s.Z),f=s.Ks+a[o].gla,p=l=0,r.index<s.Lm){for(var d=0,b=s.QA;b<r.index;b++)d+=u[b].fa;for(l+=d,d=0,b=s.QA;b<r.index;b++)d+=u[b].duration;p+=d}else l+=s.Ks,p+=s.$n;for(d=0,b=s.Lm;b<r.index;b++)d+=a[b].dP;for(l+=d,d=0,b=s.Lm;b<r.index;b++)d+=u[a[b].EWa].duration;if(p+=d,r=f-l,((s=u[o].Z+u[o].duration-s.Z-p)>=c.gA||r>=c.Abb)&&(h=!1),a[o].xRa=r,a[o].Yia=s,!h)return}return 1}function p(t,e,i){return e=Math.min(t.length-1,e),t[e=Math.max(0,e)]*i/8}function B(t,e,i,n){var r,a=i.trace,o=+i.Iy,s=e+n-i.timestamp,u=Math.floor(+s/o);if(t<=(e=(s-u*o)/o*p(a,u,o)))r=s-+t/e*(s-u*o);else for(s=u;e<t;){if(L.update("find download start time"),--s<0)return-1;if(t<=e+(u=p(a,s,o))){r=(s+1)*o-(t=(t-e)/u*o);break}e+=u}return r+i.timestamp-n}R=i(5).assert,N=i(868),h=i(398).Ydb,f=i(398).Zdb,s=i(869).mfb,u=i(399).okb,c=i(247).Jza,j=i(237).C0,l=i(86).default,C=new(i(6).default.Console)("ASEJS_QOE_EVAL","media|asejs"),L=i(126).wJa||i(126),t.exports={PV:function(t){var e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A;C.debug("greedy DEBUG false"),L.Tva("greedy-"+(t.GI?"segvmaf":"dlvmaf")+": ");try{for(t.DH=[],e=t.nx,i=t.Dj,n=(v=t.Nt).lw,r=t.$d,n=Math.min(v.EH,n),o=i.Lm;o<=n;o++){for(s=new N,t.DH[o]=s,e[0][o].cja=e[0][o].fa,a=1;a<e.length;a++)e[a][o].cja=e[a][o].fa;for((u=e[a=0][o]).uD=1/0,u.Lf=a,a=1;a<e.length;a++)(u=e[a][o]).Lf=a,l=s.n7()?e[0][o]:s.eSb(),c=8*u.cja/u.duration,h=8*l.cja/l.duration,l=t.GI&&void 0!==u.sb?(f=u.sb,l.sb):(f=r[a].sb,r[l.Lf].sb),u.qu=c-h,u.uD=(f-l)/u.qu,isFinite(u.uD)&&(0<u.uD||a==e.length-1)&&0<u.qu&&s.enqueue(u)}for(o=i.Lm;o<=n;o++)for(i=[],p=[],d=[],b=t.DH[o].fp(),e=0;e<b.length;e++)u=b[e],i.push(u.qu.toFixed(2)),t.GI&&void 0!==u.sb?p.push(u.sb):p.push(r[u.Lf].sb),d.push(u.uD.toFixed(4));if((m=D(t)).dsa)return m;g=t.Dj,y=(v=t.Nt).lw,y=Math.min(v.EH,y),d=[];for(var O=g.Lm;O<=y;O++)t.DH[O].n7()||d.push(t.DH[O].nM());R(void 0!==t.compare,"playSegment.compare required for greedy");for(var I=new j(d,t.compare);0<I.length;){L.update("upgrade frags"),w=I.pop();t:if(y=g=void 0,d=m,p=w,_=(O=t).Dj,E=O.Nt,k=Math.min(E.EH,E.lw),S=JSON.parse(JSON.stringify(d.Oq)),R(p&&S[p.index].Je<p.Lf,"expect solution[targetFrag.index].selectedStreamIndex < targetFrag.streamIndex"),(g=S[y=p.index]).Je=p.Lf,g.dP=M(O,g.Je,y),g.startTime=B(g.dP,g.r4,O.VA,_.PD),(S[y]=g).startTime<0)T=!1;else{for(y=p.index-1;y>=_.Lm&&(g=S[y],A=S[y+1].startTime,!(g.r4<=A));y--)if(g.r4=A,g.startTime=B(g.dP,g.r4,O.VA,_.PD),(S[y]=g).startTime<0){T=!1;break t}for(var x=p.index+1;x<=k;x++)S[x].gla=S[x].dP+(x>O.Dj.Lm?S[x-1].gla:0);for(var P=p.index+1;P<=k;P++)if(S[P].startTime>S[p.index].GAb){k=P-1;break}T=!!U(O,S,p,Math.min(y+1,p.index))&&(d.Oq=S,!0)}T&&(t.DH[w.index].n7()||I.push(t.DH[w.index].nM()))}}finally{delete t.DH}for(k=E=_=T=w=I=0;k<m.Oq.length;k++)(S=m.Oq[k])&&(I+=((A=t.nx[S.Je][S.EWa]).sb||t.$d[S.Je].sb)*A.duration,w+=A.duration,T+=A.fa,_+=t.Dj.KT*A.duration/8,E+=A.duration*t.$d[S.Je].bitrate);return m.AUa=0<w?+I/w:0,m.zUa=w,m.yUa=T,m.vUa=_,m.xUa=0<w?+E/w:0,m.eA=L.nYa(),C.debug("Max heap used: "+Math.round(m.eA/1024/1024)+" MB"),m},Sja:function(t,e){if(t.uD<e.uD)return 1;if(t.uD>e.uD)return-1;if(t.qu>e.qu)return 1;if(t.qu<e.qu)return-1;if(t.index>e.index)return 1;if(t.index<e.index)return-1;throw Error("Invalid frag comparison")},zSa:function(t,e){if(t.qu>e.qu)return 1;if(t.qu<e.qu)return-1;if(t.index>e.index)return 1;if(t.index<e.index)return-1;throw Error("Invalid frag comparison")},dp:function(t){var e,i,n,r,a,o;return L.Tva("dp-"+(t.GI?"segvmaf":"dlvmaf")+": "),!1===(e=D(t)).jD||!0===e.dsa||(i=function(t){var e,i=t.nx,n=t.Dj,r=t.Nt,a=r.lw,o=t.$d,s=[];a=Math.min(r.EH,a);for(var u=0;u<i.length;u++){r=[];for(var c=n.Lm;c<=a;c++)L.update("get chunk map from play segment"),e=i[u][c],e=new h(e.fa,e.duration/1e3,(t.GI&&void 0!==e.sb?e:o[u]).sb),r.push(e);s.push(r)}return new f(s,!1)}(t),n=new s(i),r=function(t){t=t.Dj.U;for(var e,i=[],n=0;n<t.length;n++)L.update("get prebuffered chunks loop"),e=t[n],R(void 0!==e.sb,"expect frag.vmaf !== undefined"),e=new h(e.fa,e.duration/1e3,e.sb),i.push(e);return i}(t),r={U$a:function(t){var e=t.VA,i=t.Dj,n=t.Nt.Ha-i.Z;e.timestamp>i.PD&&C.error("expect playSegment.tput.timestamp <= playSegment.startState.playingStartTime but has "+e.timestamp+" and "+i.PD),t=[];for(var r,a=e.timestamp,o=0;o<e.trace.length;o++)a>=i.PD&&(t.push(e.trace[o]),r=e.trace[o]),a+=e.Iy,n-=e.Iy;for(;0<n;)t.push(r),n-=e.Iy;if(i=e.Iy,0===(e=t.length))e=[];else{for(i=[i/1e3];2*i.length<=e;)i=i.concat(i);i.length<e&&(i=i.concat(i.slice(0,e-i.length))),e=i}return new u(t,e,!1)}(t),OQa:t.Dj.KT,j3a:0,K2a:240,J2a:8*t.pRa.Abb/1e3,uRa:.5,bRa:new c(r),vVa:0,E$b:void 0,tZa:void 0,t6a:void 0,cQa:!0},r=function(t,e,i){R(t.mN()>=e.length,"expect chunk_map.get_n_epoch() >= stream_choices.length");for(var n,r=0,a=0,o=0;o<e.length;o++)L.update("calculate twvmaf"),R(e[o].f_a===o,"expect stream_choices[idx].i_epoch === idx"),n=t.Qk[e[o].P6][o],r+=(void 0!==i?i(n.quality):n.quality)*(n=n.Im),a+=n;return{AUa:r/a,zUa:1e3*a}}(i,n=n.ax(r),void 0),i=function(t,e,i){R(t.mN()>=e.length,"expect chunk_map.get_n_epoch() >= stream_choices.length");for(var n,r=0,a=0,o=i.Dj.KT,s=0,u=0,c=0;c<e.length;c++)L.update("calculate Bytes"),R(e[c].f_a===c,"expect stream_choices[idx].i_epoch === idx"),r+=(n=t.Qk[e[c].P6][c]).fa,a+=o*n.Im*1e3/8,s+=n.Im*i.$d[e[c].P6].bitrate,u+=n.Im;return{yUa:r,vUa:a,xUa:0<u?+s/u:0}}(i,n,t),a=[],o=t.Dj.Lm,n.forEach(function(t){a[o]={Je:t.P6},o++}),l(r,e),l(i,e),e.Oq=a,e.eA=L.nYa(),C.debug("Max heap used: "+Math.round(e.eA/1024/1024)+" MB")),e}}},function(t){var n;function e(t){if(this.Ag=r(t),this.Qg=this.lf=0,n(t)){for(var e=t.length,i=0;i<e;++i)this[i]=t[i];this.lf=e}}function r(t){if("number"!=typeof t){if(!n(t))return 16;t=t.length}return t=((t=Math.min(Math.max(16,t),1073741824))>>>0)-1,t|=t>>1,t|=t>>2,t|=t>>4,1+((t|=t>>8)|t>>16)}e.prototype.fp=function(){for(var t=this.lf,e=Array(t),i=this.Qg,n=this.Ag,r=0;r<t;++r)e[r]=this[i+r&n-1];return e},e.prototype.push=function(t){var e,i,n=arguments.length,r=this.lf;if(1<n){if((e=this.Ag)<r+n){for(var a=0;a<n;++a)this.D1(r+1),this[i=this.Qg+r&this.Ag-1]=arguments[a],r++,this.lf=r;return r}for(i=this.Qg,a=0;a<n;++a)this[i+r&e-1]=arguments[a],i++;return this.lf=r+n,r+n}return 0===n?r:(this.D1(r+1),this[a=this.Qg+r&this.Ag-1]=t,this.lf=r+1,r+1)},e.prototype.pop=function(){var t,e,i=this.lf;if(0!==i)return e=this[t=this.Qg+i-1&this.Ag-1],this[t]=void 0,this.lf=i-1,e},e.prototype.shift=function(){var t,e,i=this.lf;if(0!==i)return e=this[t=this.Qg],this[t]=void 0,this.Qg=t+1&this.Ag-1,this.lf=i-1,e},e.prototype.unshift=function(t){var e,i,n=this.lf,r=arguments.length;if(1<r){if((e=this.Ag)<n+r){for(var a=r-1;0<=a;a--)this.D1(n+1),e=this.Ag,this[i=(this.Qg-1&e-1^e)-e]=arguments[a],n++,this.lf=n,this.Qg=i;return n}for(i=this.Qg,a=r-1;0<=a;a--)this[i=(i-1&e-1^e)-e]=arguments[a];return this.Qg=i,this.lf=n+r,n+r}return 0===r?n:(this.D1(n+1),e=this.Ag,this[a=(this.Qg-1&e-1^e)-e]=t,this.lf=n+1,this.Qg=a,n+1)},e.prototype.eSb=function(){var t=this.lf;if(0!==t)return this[this.Qg+t-1&this.Ag-1]},e.prototype.get=function(t){var e;if(t===(0|t)&&(e=this.lf,t<0&&(t+=e),!(t<0||e<=t)))return this[this.Qg+t&this.Ag-1]},e.prototype.n7=function(){return 0===this.lf},e.prototype.clear=function(){for(var t=this.lf,e=this.Qg,i=this.Ag,n=0;n<t;++n)this[e+n&i-1]=void 0;this.Qg=this.lf=0},e.prototype.valueOf=e.prototype.toString=function(){return this.fp().toString()},e.prototype.enqueue=e.prototype.push,e.prototype.nM=e.prototype.shift,e.prototype.toJSON=e.prototype.fp,Object.defineProperty(e.prototype,"length",{get:function(){return this.lf},set:function(){throw new RangeError("")}}),e.prototype.D1=function(t){this.Ag<t&&this.fpb(r(1.5*this.Ag+16))},e.prototype.fpb=function(t){var e,i=this.Ag;if(this.Ag=t,i<(t=this.Qg)+(e=this.lf))for(t=t+e&i-1,e=0;e<t;++e)this[e+i]=this[e+0],this[e+0]=void 0},n=Array.isArray,t.exports=e},function(t,e,i){var K,V,G,J;function z(t,e,i){this.eRa=this.xlb(t,e,i)}function Y(){}function W(){}function X(){}function n(t){this.Iub=t}function Q(){}function Z(){}function $(){}function tt(){this.dla={}}K=i(5).assert,e=i(247).Jza,V=i(399).pkb,G=i(247).Bdb,new(i(6).default.Console)("ASEJS_QOE_EVAL","media|asejs"),J=i(126).wJa||i(126),(z.prototype.constructor=z).prototype.xlb=function(t,e,i){K(t<e,"expect min_buffer_sec < max_buffer_sec but got "+t+" and "+e),K(0<i,"expect buffer_step_sec > 0. but got "+i);for(var n=[];t<e;t+=i)n.push(t);return n[n.length-1]<e&&n.push(e),n},z.prototype.WC=function(t){return this.wmb(t,this.eRa)},z.prototype.wmb=function(t,e){if(0===(t=this.gAb(t,e)))throw new Y;if(t===e.length)throw new W;return t},z.prototype.gAb=function(t,e){if(K(0<e.length,"expect bins.length > 0 but got "+e.length),t<e[0])return 0;if(t>=e[e.length-1])return e.length;for(var i=1;i<e.length;i++)if(e[i-1]<=t&&t<e[i])return i;K(!1,"expect not coming here in digitize()")},z.prototype.u6=function(){return i=1,t=this.eRa.length-1,Array.apply(0,Array(t)).map(function(t,e){return e+i});var i,t},Y.prototype=Error(),W.prototype=Error(),X.prototype=Error(),(n.prototype.constructor=n).prototype.VERSION="0.5",n.prototype.teb=-20,n.prototype.seb=20,n.prototype.reb=void 0,n.prototype.meb=new e(void 0),n.prototype.oeb=0,n.prototype.neb=1,n.prototype.web=!1,n.prototype.qeb=!0,n.prototype.peb=!0,n.prototype.ueb=void 0,n.prototype.keb=!0,n.prototype.leb=0,n.prototype.ax=function(t){return K(void 0!==t.U$a,"expect recipe.time_varying_bandwidth !== undefined"),this.hpb(this.Iub,t.U$a,void 0!==t.j3a?t.j3a:this.teb,void 0!==t.K2a?t.K2a:this.seb,void 0!==t.J2a?t.J2a:this.reb,void 0!==t.bRa?t.bRa:this.meb,void 0!==t.vVa?t.vVa:this.oeb,void 0!==t.uRa?t.uRa:this.neb,void 0!==t.UYb?t.UYb:this.web,void 0!==t.ZHb?t.ZHb:this.qeb,void 0!==t.tZa?t.tZa:this.peb,void 0!==t.t6a?t.t6a:this.ueb,void 0!==t.cQa?t.cQa:this.keb,void 0!==t.OQa?t.OQa:this.leb)},n.prototype.hpb=function(t,e,i,n,r,a,o,s,u,c,h,f,l,p){var d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N;function j(t){return t[v]}for(y in J.Tva("dp: "),K(i<=a.xh,"expect min_buffer_sec <= bgn_buffer_queue.total_remain_sec"),K(a.xh<=n,"expect bgn_buffer_queue.total_remain_sec <= max_buffer_sec"),K(i<=o,"expect min_buffer_sec <= end_buffer_sec"),K(o<=n,"expect end_buffer_sec <= max_buffer_sec"),void 0!==r&&K(a.Sl<=r,"Need bgn_buffer_queue.total_remain_kb <= max_buffer_kb but has got "+a.Sl+" and "+r),d=new z(i,n,s),b=0,m=a,(s=new tt).put([0,d.WC(a.xh)],[b,m,void 0,void 0,e,void 0,void 0,void 0]),g=m=0,e=t.THb(),K(t.mN()==e.length,"expect chunk_map.get_n_epoch() == durations_sec.length"),v=-1,e){v+=1;for(var C=!0,L=t.Qk.map(j),M=d.u6(),D=0;D<M.length;D++)if(w=M[D],s.$pa([v,w]))for(var U=s.get([v,w]),B=U[0],F=U[1],q=U[4],H=0;H<L.length;H++){e=L[H],J.update("epoch-ibuf-chunk loop"),a=void 0!==f?f(e.quality):e.quality,_=q.Et();try{E=(U=this.cmb(F,e,_,p))[0],k=U[1],S=U[2],T=U[3],A=U[4],O=U[5]}catch(t){if(t instanceof V)continue;if(t instanceof Y){m+=1;continue}throw t}I=b=!1;try{if(x=d.WC(T.xh),c&&d.WC(E),h&&d.WC(k),void 0!==r)if(h){if(S.Sl>r)throw new X}else if(T.Sl>r)throw new X}catch(t){if(t instanceof Y)x=void 0,m+=1;else if(t instanceof W)l?b=!0:g+=1,x=void 0;else{if(!(t instanceof X))throw t;l?I=b=!0:g+=1,x=void 0}}try{if(b&&I){K(void 0!==r,"expect max_buffer_kb !== undefined"),P=h?S.Sl-r:T.Sl-r,K(0<=P,"pause dlnd kb cannot be -ve but is "+P);try{R=T.BSb(P)}catch(t){if(t instanceof G)throw new Y;throw t}_.k5a(R),A+=R,K(T.xh<n,"expect cur_buffer_queue.total_remain_sec < max_buffer_sec"),x=d.WC(T.xh)}else if(b&&!I){R=h?S.xh-n+1e-8:T.xh-n+1e-8,K(0<=R,"pause dlnd kb cannot be -ve but is "+R);try{T.E5a(R)}catch(t){if(t instanceof G)throw new Y;throw t}_.k5a(R),A+=R,K(i<=T.xh,"expect min_buffer_sec <= cur_buffer_queue.total_remain_sec"),K(T.xh<n,"cur_buffer_queue.total_remain_sec < max_buffer_sec"),x=d.WC(T.xh)}else R=0}catch(t){if(!(t instanceof Y)){if(t instanceof V)continue;throw t}m+=1,R=x=void 0}b=s.$pa([v+1,x])?s.get([v+1,x])[0]:-1/0,this.Ppb(T,x,e,a,w,v+1,b,s,B,H,_,A,O,R)&&(C=!1)}if(C){--v;break}}try{N=this.eNa(v+1,d.WC(o),s,u,d)}catch(t){if(!(t instanceof Q))throw t;try{N=this.eNa(v+1,d.WC(o),s,!u,d)}catch(t){if(t instanceof Q){if(g<m)throw new Z;throw new $}throw t}}for(w=N,i=[];-1<v;v--)b=(U=s.get([v+1,w]))[0],m=U[1],n=U[3],r=U[5],o=U[6],u=U[7],U=U[2],c=(e=t.Qk[U][v]).Bz(),a=e.quality,i.unshift({f_a:v,P6:U,info:{e9b:c,quality:a,Tia:m.xh,Sia:m.Sl,XUa:r,Ra:o,Zsa:u}}),w=n;return i},n.prototype.eNa=function(t,e,i,n,r){var a=!1,o=r.u6()[0];for(r=r.u6()[r.u6().length-1];;){if(e<o||r<e){a=!0;break}if(i.$pa([t,e]))break;e=n?e-1:e+1}if(a)throw new Q;return e},n.prototype.Ppb=function(t,e,i,n,r,a,o,s,u,c,h,f,l,p){return i=u+n*i.Im,void 0!==e&&o<i&&(s.put([a,e],[i,t,c,r,h,f,l,p]),!0)},n.prototype.cmb=function(t,e,i,n){var r,a,o;n=(e.Bz()+n)*e.Im,n/=i=i.OAb(n),r=t.xh-i,a=t.xh+e.Im,(o=t.Et()).add(e,void 0),(t=t.Et()).add(e,void 0);try{t.E5a(i)}catch(t){if(t instanceof G)throw new Y;throw t}return[r,a,o,t,i,n]},Q.prototype=Error(),Z.prototype=new Q,$.prototype=new Q,tt.prototype={Cxa:function(t){return t.join(",")},put:function(t,e){this.dla[this.Cxa(t)]=e},get:function(t){return this.dla[this.Cxa(t)]},$pa:function(t){return this.Cxa(t)in this.dla}},t.exports={mfb:n,M3b:z,m3b:Y,n3b:W}},function(t,e,i){var h,f,l,n,a,p;_esm(e),e.kKa=void 0,t=i(2),h=t.__importStar(i(10)),f=i(16),l=i(16),n=t.__importDefault(i(6)),a=i(217),p=i(396),i=function(){function t(t,e,i,n){for(var r=2;9!==r;)2===r&&(this.Za=t,this.H=e,this.kc=i,this.ai=n,r=9)}for(var e=2;13!==e;)switch(e){case 2:t.prototype.ss=function(t,e){for(var n,r,i,a,o,s,u=2;50!==u;)switch(u){case 16:return;case 39:this.Za.Zga(),n=this.Za.La.Wc.N3(t).EO,o.gsa(),u=36;break;case 36:r=this.Za.La.Wc,l.zf.forEach(function(t){for(var e,i=2;5!==i;)2===i&&(e=r.Rd(t),c.kc(t)&&c.Hob(e,n[t]),i=5)}),u=53;break;case 8:this.Za.La.K7a(),u=7;break;case 41:this.H.warn("after seeking, playerState no longer STARTING: "+this.Za.V.getState()),u=40;break;case 23:u=s<t?22:31;break;case 6:!o.P.sf.LW&&0<e&&(a=this.Za.cM(e,t)),this.Za.V.Ve(f.ma.dj),s=this.Za.Ge,u=12;break;case 19:u=this.Za.JMa(e)?15:18;break;case 24:s=this.Za.yr?this.Za.Pm?Math.min(s[0].Z,s[1].Z):s[0].Z:s[1].Z,u=23;break;case 53:this.Za.fT(),u=43;break;case 33:return;case 21:u=this.Za.T2(o.P.Pb+1)?31:35;break;case 27:return;case 31:this.Za.V.Ve(f.ma.zh),this.Za.Hwa(),u=29;break;case 18:this.WB={Pb:e,ek:t},this.Za.emit("seekDelayed"),u=16;break;case 51:this.H.warn("seek, no manifest at manifestIndex:",e),this.Za.emit("seekFailed"),u=50;break;case 29:this.Za.La.g_b(t,e),u=28;break;case 52:this.WB={Pb:e,ek:t},this.Za.emit("seekDelayed"),u=50;break;case 43:u=this.Za.V.v0a()?42:41;break;case 11:e<s.P.Pb&&o.P.sf.replace&&(o.P.sf.replace=!1),i=this.Za.La.Wc,l.zf.forEach(function(t){for(var e=2;1!==e;)2===e&&((t=i.Rd(t))&&c.Za.QOa(t),e=1)}),u=19;break;case 32:a=(t=s)+this.Za.La.Fe,u=31;break;case 26:s=this.Za.La.Wc.bV(o.Ha||1/0,o.P),u=25;break;case 28:u=(s=this.Za.Ge.P.Pb===e&&!this.Pmb(e)&&t===o.Z)?44:39;break;case 40:this.Za.emit("seekFailed"),u=50;break;case 15:u=this.Cr(p.Iba.Mma(e),!1,!0)?27:26;break;case 22:u=o.P.sf.Vg?21:32;break;case 44:l.zf.forEach(function(t){for(var e=2;1!==e;)2===e&&(c.Za.Pv[t].Hm(!0),e=1)}),u=43;break;case 42:return this.Za.emit("ptschanged",a),this.Za.emit("seek"),this.tT(e),t=s&&this.Za.zb.cy()?100:0,this.Za.H2(1,t),this.Za.Zj(),a;case 35:this.WB={Pb:o.P.Pb+1,ek:t},this.Za.emit("seekDelayed"),u=33;break;case 12:u=e!=s.P.Pb?11:26;break;case 7:u=(o=this.Za.qh(e))?6:51;break;case 25:u=s.length?24:52;break;case 2:var c=this;null!==(a=this.LNa)&&void 0!==a&&a.cancel(),o=this.Za.I,s=this.Za.V.Re(),a=t,o.ji&&this.ai.Bm("seek: "+t+" manifestIndex: "+e+" current manifest: "+this.Za.Ge.P.Pb+" media.currentPts: "+s+" playerState: "+this.Za.V.getState()),h.ia(e)&&(e=this.Za.Ge.P.Pb),u=8}},t.prototype.seek=function(t,e){var i=t;return h.ia(e)&&(e=this.Za.Ge.P.Pb),this.Za.La.K7a(),this.Za.qh(e).P.sf.LW||this.Za.cL||(i=this.Za.Dt(e,t)),this.ss(i,e)},t.prototype.Cr=function(t,e,i){for(var n,r,a=2;9!==a;)switch(a){case 4:return r?(this.Za.V.Ve(f.ma.dj),(t=this.Za.La.si.children[t])&&this.Za.emit("ptschanged",null!==(n=t.zd)&&void 0!==n?n:t.jpa),this.Za.V.Ve(f.ma.zh),this.Za.emit("seek"),t&&this.tT(t.P.Pb),this.Za.H2(1),this.Za.Zj(),this.Za.zb.cy()):i||(n=this.Za.La.hHb(t),this.ss(n)),r;case 1:a=e?5:4;break;case 2:r=this.Za.La.Cr(t,e),a=1;break;case 5:return r}},t.prototype.Pmb=function(t){return!!this.Za.qh(t).zT},t.prototype.tT=function(t){for(var i,e=2;4!==e;)switch(e){case 5:t.zT||(t.zT=!0,l.zf.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.Za.Pg[t].resume(),e=1)}),this.Za.fT()),e=4;break;case 2:t=(i=this).Za.qh(t),e=5}},t.prototype.Hob=function(t,e){for(var i,n,r,a=2;8!==a;)switch(a){case 5:t.dWb(),a=4;break;case 4:a=null!==(n=this.Za.Ah)&&void 0!==n&&n.$C()?3:9;break;case 2:i=this,r=t.mediaType,t.KI(e),a=5;break;case 3:this.Za.Ah.Nl.forEach(function(t){for(var e=2;1!==e;)switch(e){case 4:i.Za.$F(t,8),e=3;break;case 2:i.Za.$F(t,!1),e=1}}),this.Za.Ah=void 0,a=9;break;case 9:this.Za.IU.DOa(r,t.gb.P),a=8}},t.prototype.Tfa=function(){for(var t,e,i=2;4!==i;)switch(i){case 2:i=this.WB?1:4;break;case 1:t=this.WB.ek,e=this.WB.Pb,this.Za.qh(e)&&(this.WB=void 0,this.ss(t,e)),i=4}},e=7;break;case 7:return t.prototype.Vn=function(t){for(var r,e,i=2;7!==i;)switch(i){case 2:null!==(e=(r=this).LNa)&&void 0!==e&&e.cancel(),this.Za.Hwa(),i=4;break;case 4:return this.Za.La.si.Vn(t),l.zf.forEach(function(t){for(var e=2;9!==e;)switch(e){case 1:var i=r.Za.zb.Kf[t];r.Za.Jr&&(i.uwa=n.default.time.ea()),i.YP?i.Sb("skip: not resuming bufferManager, audio track switch in progress"):r.Za.Pg[t].resume(),function t(e,i){var n=2;for(;5!==n;)switch(n){case 2:e!==r.Za.La.si&&(e.tg?t(e.tg,i):r.H.error("skip: unexpected behaviour - a non-presenting branch doesn't have a previous branch")),n=1;break;case 1:(e=e.Rd(i))&&e.Vn(),n=5}}(r.Za.La.Wc,t),e=9;break;case 7:e=r.kc(t)?3:5;break;case 2:e=r.kc(t)?1:9}}),this.LNa=t=new a.pF(this.Za.SI()),t.Esa(function(){for(var t=2;5!==t;)2===t&&(r.Za.V.Ve(f.ma.Kc),r.Za.nT(),t=5)}).iva}},t.prototype.Li=function(t){for(var e,i,n,r=2;8!==r;)switch(r){case 4:return e=this.Za.Rt(t,0,!0),t=this.Za.Rt(t,1,!0),void 0!==e&&void 0!==t&&e.complete&&t.complete;case 1:r=t<(null!==(e=i.zd)&&void 0!==e?e:i.jpa)||n<=t?5:4;break;case 5:return!1;case 2:i=this.Za.La.si,n=0<Object.keys(i.O&&i.O.Bl||{}).length&&!i.Sk?i.me-this.Za.I.BD:i.me,r=1}},t}}(),e.kKa=i},function(t,e,i){var p,d,b;_esm(e),e.yBa=void 0,t=i(2),p=t.__importStar(i(10)),d=i(16),b=t.__importDefault(i(6)),i=function(){for(var t=2;18!==t;)switch(t){case 5:e.prototype.ZOa=function(){return!!(this.Sa.en()||this.Sa.V.x0a()||this.Sa.V.w0a())},e.prototype.I1=function(t){return!(this.ZOa()||this.Sa.zb.Kf[t.mediaType].YP||this.Sa.Zx.lC)},e.prototype.Zj=function(){for(var i,t,e=2;5!==e;)2===e&&(t=(i=this).Sa.I,!this.Sa.sOa||this.Sa.z2||this.Sa.L2||(this.Sa.z2=setTimeout(function(){for(var t=2;4!==t;)2===t&&(clearTimeout(i.Sa.z2),i.Sa.z2=void 0,i.XMa(),t=4)},t.nta),t.yM&&this.Sa.Pm&&(this.vF||(this.vF=setTimeout(function(){for(var t,e=2;3!==e;)2===e&&(clearTimeout(i.vF),i.vF=void 0,(t=i.Sa.La.Wc.Rd(1))&&i.rMa(t),e=3)},t.mqb)))),e=5)},e.prototype.rMa=function(t,e){for(var i,n,r,a,o=2;3!==o;)switch(o){case 2:i=t.mediaType,n=this.Sa.zb.Jw[i].AH,r=t.ug.sW,o=1;break;case 1:o=n&&r?5:3;break;case 7:o=n||r?4:5;break;case 5:(a=this.Sa.zb.Kf[i].If)&&(this.Sa.V.pg()||this.Sa.yg.lqb(i,a,n.bitrate,r.bitrate,t.TIb.bitrate,e)),o=3}},t=8;break;case 2:e.prototype.E1=function(){for(var t=2;1!==t;)2===t&&(this.vF&&(clearTimeout(this.vF),this.vF=void 0),t=1)},e.prototype.XMa=function(){for(var t,e,i,n,r=2;6!==r;)switch(r){case 1:void 0===this.Sa.Plb&&(this.Sa.Plb=!0,this.Sa.Cb.am("firstDriveStreaming")),e=(t=this.Sa.La).Wc.Rd(0),n=!(i=t.Wc.Rd(1))||i.Vh,(!e||e.Vh)&&n&&this.Sa.cL&&t.fvb((i||e).Lc),i=!i||i.Xq,r=9;break;case 2:r=this.Sa.Qi.kha||this.Sa.en()?6:1;break;case 9:e&&!e.Xq||!i||this.Sa.cL||(this.Sa.mc.Gf&&this.Sa.mc.Gf.Lp(!0,this.Sa.Yl.sessionId),this.Sa.Cb.$3a()),this.UMa(t.Wc),this.Kpb(),r=6}},t=5;break;case 20:return e.prototype.Kpb=function(){for(var t,e,i,n=2;5!==n;)2===n&&(t=this.Sa.I,i=(e=this.Sa.La).Wc,this.Sa.V.pg()||e.dw(i,1)<t.TW||i.P.yxa(),n=5)},e;case 8:e.prototype.UMa=function(t,e){for(var i,n,r,a,o,s=2;7!==s;)switch(s){case 5:s=o&&a?9:4;break;case 2:i=t.O,n=t.Rd(1),a=!(r=t.Rd(0))||r.Vh,o=!n||n.Vh,i.cs||this.Sa.La.Y8(t,i,t.P.sf.Vg&&0===t.P.Pb),s=5;break;case 4:this.Sa.Pm&&this.VMa(t,n,r),this.Sa.yr&&this.VMa(t,r,n),a=!r||r.Vh,s=(o=!n||n.Vh)&&a?9:3;break;case 3:return;case 9:this.Sa.V.pg()&&(this.H.warn("Still in buffering state while pipeline's are done"),this.Sa.zb.cy()),s=8;break;case 8:e||i.bv||t.P.sf.Vg||!this.qub(t)||((e=this.Sa.V.pg())&&this.Sa.I.Kka&&(this.Sa.fha(),e=!1),t.x5||this.Sa.La.XIb(t,e),t.IL(),t.rub()&&(e=Object.keys(t.children),this.Sa.I.P4&&1===e.length&&!t.children[e[0]].active&&this.Sa.La.W1a(t,e[0]),this.Tlb(t,i))),s=7}},e.prototype.Tlb=function(t,n){for(var e,i,r,a,o,s,u,c,h=2;23!==h;)switch(h){case 9:e=t.HK,i=n.Bl[e.O.id].weight,h=8;break;case 27:t.xfa=e.Gm,h=26;break;case 20:h=0===a.length?19:17;break;case 19:this.H.warn("No subbranch candidates to drive"),h=18;break;case 13:h=1<a.length?12:20;break;case 3:t.HK=void 0,h=8;break;case 7:r=[],a=[],p.mf(t.children,function(t,e){for(var i=2;5!==i;)2===i&&(0!==(e=n.Bl[e].weight)&&(e={weight:e,gb:t},t.xja(!0,!0)||a.push(e),r.push(e)),i=5)}),0===a.length?a=r:2<a.length&&(a.sort(function(t,e){return e.weight-t.weight}),a.length=2),h=13;break;case 18:return;case 4:h=Math.min(c[0]-t.xfa[0],c[1]-t.xfa[1])>=u.Hub?3:9;break;case 12:e=a.reduce(function(t,e){return e.Gm=e.gb.Gm,e.c3a=Math.min(e.Gm[0],e.Gm[1]),[t[0]+e.weight,t[1]+e.c3a]},[0,0]),o=e[0],s=e[1],h=10;break;case 8:h=e?26:7;break;case 2:u=this.Sa.I,h=1;break;case 17:e=a[0].gb,i=a[0].weight,t.HK=e,h=27;break;case 1:h=this.Sa.mc.Soa&&t.HK&&t.xfa?5:8;break;case 5:c=t.HK.Gm,h=4;break;case 26:e.ke||(e.ke={Z6:b.default.time.ea(),HA:0}),e.ke.weight=i,this.UMa(e,!0),h=23;break;case 10:0!==o&&0!==s?(p.mf(a,function(t){for(var e=2;4!==e;)2===e&&(t.M2b=t.weight/o,t.ctb=t.c3a/s,t.usage=t.ctb-t.M2b,e=4)}),a.sort(function(t,e){return t.usage-e.usage})):a.sort(function(t,e){return t=Math.min.apply(null,t.gb.Gm),e=Math.min.apply(null,e.gb.Gm),a000.N4L(0),a000.j4L(e,t)}),h=20}},e.prototype.VMa=function(t,e,i){for(var n,r,a,o,s,u=2;8!==u;)switch(u){case 3:var c=this.Sa.Ge;p.ia(c.UH)||(n.WD&&0===r&&p.ia(this.Sa.zb.Kf[1].xo)?e.Sb("drivePipeline, delaying audio until video actualStartPts determined"):(p.ia(e.Jn)&&(e.Jn=e.ie?e.ie.index:e.dma(e.Ic)),e.Hf&&e.Jn>e.Hf.index?t.P.sf.Vg&&p.ia(c.Ha)&&p.ia(t.Lc)||(e.Vh||this.Sa.QOa(e),(t=this.Sa.Ge.P.Pb)<this.Sa.$M()-1&&this.Sa.T2(t+1)):this.I1(e)&&(n.JBb&&!this.Sa.V.pg()&&e.GH<=0?e.f1b(n.nOb):this.slb(e,i)?(e.YLb=b.default.time.ea(),n=(i=this.Sa.zb.Xna(e)).Lf,p.ia(n)||(n=e.track.$d[n],this.rlb(e,n)||((r=n.Y5())?(e.SLb=n.bitrate,e.qNb(n,r,this.Sa.V.pg(),a.If,i.xu),this.q1b(n,s,o),t.ke&&++t.ke.HA):n.pE()))):this.Sa.V.pg()&&(e.jn("Still in buffering state while pipeline does not have vacancy"),this.Sa.zb.cy())))),u=8;break;case 1:u=e.Vh?8:5;break;case 2:n=this.Sa.I,r=e.mediaType,u=1;break;case 5:a=this.Sa.zb.Kf[r],o=this.Sa.zb.RA[r],s=this.Sa.zb.Jw[r],u=4;break;case 4:u=!a.If||void 0!==e.cI&&(e.KI(e.cI,e.fSb),void 0!==e.cI)?8:3}},t=14;break;case 14:e.prototype.q1b=function(t,e,i){for(var n=2;4!==n;)2===n&&(e.jqa=t.Pc,p.Ba(i.rw)||(i.n1b(t.ws,t.Jz||-1,t.bitrate),p.ia(t.Fva)||this.Sa.yg.O8a(t.Fva,t.Lo,t.Mo)),t.url&&(e.qqa=t.url),n=4)},e.prototype.rlb=function(t,e){var i=this.Sa.zb.Jw[t.mediaType];return!!(this.Sa.sOa&&e.Pc&&i.jqa&&e.Pc!==i.jqa&&(0<t.Pa.KD||0<t.Pa.Hs))},e.prototype.slb=function(t,e){for(var i,n,r,a=2;32!==a;)switch(a){case 34:case 7:return!1;case 13:a=f===d.ma.Kc&&l>s.gra&&!n.sf.Vg&&!i&&!n.KW||l&&h>Math.max(l*s.kra/100,s.NOb)?12:11;break;case 12:return!1;case 14:i=this.Sa.V.Oo(n),a=13;break;case 17:o=void 0,e&&(o=e.mediaType,r=b.default.Io()[o],o=s.H1b?this.Sa.La.X1a(c,o).bh/r:i/r),a=15;break;case 2:var o,s=this.Sa.I,u=t.mediaType,c=t.R7,h=this.Sa.V.Re(),f=this.Sa.V.getState(),l=this.Sa.La.dw(c,u);(o=t.Ic+c.Fe-h)<0&&(t.Sb("negative scheduledBufferLevel:",o,"floored to 0"),o=0),r=e?e.Ic:0,a=4;break;case 3:return!1;case 6:n=this.Sa.Ge.P,a=14;break;case 15:a=void 0===o||o<s.KNb?27:26;break;case 25:return!1;case 19:a=this.Sa.mc.Upa?18:17;break;case 4:a=null!==(n=t.ah)&&void 0!==n&&n.wIb()?3:9;break;case 33:return!(0<s.ru&&!c&&f+(e?i:0)>s.ru||void 0!==this.DMa&&l>this.DMa||1===u&&n.sf.Vg&&l>s.ira&&((e=this.Sa.mc.Qb.get()).confidence&&e.Ra&&e.Ra.Ga*t.YL>s.hra));case 20:a=e&&(i=this.Sa.La.mG(c,e.mediaType),r=t.Ic-r,this.kc(e.mediaType)&&!e.Vh&&r>=s.pra&&o>s.tj)?19:26;break;case 9:h=t.Pa.Wsa,a=8;break;case 35:h=1,t.Via<s.hA&&(h=s.hA),a=t.Pa.KD>=h?34:33;break;case 22:return!1;case 23:a=!p.ia(s.Fw)&&o>=s.Fw||t.YL+h>=Math.max(s.gA,this.Sa.mc.OA+s.psa*c.P.NNb[u])?22:21;break;case 11:f=this.Sa.La.mG(c,u),i=0,a=20;break;case 8:a=h>=s.g8?7:6;break;case 26:a=this.umb(u)>=s.D2a?25:24;break;case 24:o=this.Sa.La.c0b(),a=23;break;case 21:a=(c=this.Sa.V.pg())?35:33;break;case 18:case 27:return!1}},e.prototype.umb=function(i){return this.Sa.La.Kb.reduce(function(t,e){return t+e.aHb(i)},0)},e.prototype.qub=function(r){for(var a,o,s,t=2;4!==t;)switch(t){case 2:o=(a=this).Sa.La,s=!0,p.mf(r.O.Bl,function(t,e){for(var i,n=2;7!==n;)switch(n){case 2:n=(t=o.ue(e))?1:8;break;case 1:t=(e=t.P).sh[0],i=e.sh[1],t&&i&&t.stream.je&&i.stream.je||(s=!1),n=9;break;case 9:a.Sa.V.Oo(e)||(s=!1),n=7;break;case 8:r.Sb("invalid segment:",e,"in dests:",r.O.Bl),n=7}}),t=5;break;case 5:case 7:return s}},t=20}function e(t,e,i){for(var n=2;9!==n;)switch(n){case 2:this.Sa=t,this.H=e,this.kc=i,n=4;break;case 4:this.DMa=this.vF=void 0,n=9}}}(),e.yBa=i},function(t,e,i){var n,f,a,l;_esm(e),e.REa=void 0,n=i(170),f=i(16),a=i(16),l=i(9),t=function(){function t(t,e,i,n){for(var r=2;8!==r;)switch(r){case 2:this.ac=t,this.H=e,this.kc=i,r=4;break;case 4:this.MF=n,this.pOa=this.kha=!1,r=9;break;case 9:r=8}}for(var e=2;6!==e;)switch(e){case 4:return t.prototype.resume=function(){for(var t=2;5!==t;)2===t&&(this.kha=!1,this.ac.mg.Zj(),t=5)},t.prototype.close=function(){for(var t=2;6!==t;)switch(t){case 2:var e=this.ac.I;this.pOa=!0,this.stop(),this.ac.emit("close"),e.nVa&&(e=n.ux.instance().wb())&&(e={type:"logdata",target:"endplay",fields:{bridgestat:e}},l.Va(this.ac,e.type,e)),t=9;break;case 9:this.ac.mc.Gf&&this.ac.mc.Gf.Lp(!0,this.ac.Yl.sessionId,!0),this.ac.Cb.$3a(),this.ac.h7a(),t=6}},t.prototype.flush=function(){for(var t,e,i,n,r,a,o,s,u,c=2;16!==c;)switch(c){case 14:e&&e.length&&(n.activeRequests=JSON.stringify(e)),n.aseApiVersion=this.ac.dG,s.lVa&&(t=u.i6())&&(t.bytesRequestedPacingVideo&&(n.bytesRequestedPacingVideo=t.bytesRequestedPacingVideo,n.estimatedBytesPacedVideo=t.estimatedBytesPacedVideo,n.bytestotalVideo=t.bytestotalVideo,n.pacedAvtpVideo=t.pacedAvtpVideo),t.bytesRequestedPacingAudio&&(n.bytesRequestedPacingAudio=t.bytesRequestedPacingAudio,n.estimatedBytesPacedAudio=t.estimatedBytesPacedAudio,n.bytestotalAudio=t.bytestotalAudio,n.pacedAvtpAudio=t.pacedAvtpAudio),t.pacedAvtp&&(n.pacedAvtp=t.pacedAvtp)),c=11;break;case 20:s.UU&&(r&&r["throughput-sw"]&&r["throughput-sw"].Ga&&this.ac.Xu.Bqb({avtp:r["throughput-sw"].Ga,variance:r["throughput-sw"].aj}),this.ac.Xu.vqb(a,null===(o=r.avtp)||void 0===o?void 0:o.GC),o=this.ac.Xu.aFb(),s=this.ac.Xu.kHb(),o&&(o.n=s,o={type:"logdata",target:"endplay",fields:{ibef:o}},l.Va(this.ac,o.type,o),this.ac.Xu.save())),c=19;break;case 1:c=u?5:19;break;case 8:t=u.MXa(),e=u.tPa,c=7;break;case 6:for(var h in t)t.hasOwnProperty(h)&&(n["ne"+h]=Number(t[h]).toFixed(6),a["ne"+h]=+n["ne"+h]);c=14;break;case 11:s.S4&&(u=u.Z5())&&(n.initial_avtp=u.pH,n.initial_dltime=u.GC,n.initial_responses_audio=u.H_a,n.initial_responses_video=u.I_a,n.initial_tput_samples=u.jO,n.initial_1sec_tput_samples=u.hO),Object.keys(n).length&&(n={type:"logdata",target:"endplay",fields:n},l.Va(this.ac,n.type,n)),c=20;break;case 7:c=t?6:14;break;case 17:try{for(i=2;1!==i;)2===i&&(this.ac.c5(f.ma.gr),i=1)}catch(t){a000.Z4L(1),this.ac.Cb.Kn(a000.j4L("Hindsight: Error evaluating QoE at stopping: ",t))}c=16;break;case 5:n={},a={},(r=u.get())&&r.avtp&&r.avtp.Ga&&(n.avtp=r.avtp.Ga,n.dltm=r.avtp.GC,a.avtp=n.avtp),r&&r.cdnavtp&&(n.cdnavtp=r.cdnavtp,n.activecdnavtp=r.activecdnavtp),u.flush(),c=8;break;case 2:s=this.ac.I,u=this.ac.mc.Qb,c=1;break;case 19:this.ac.Cb.fOa(),c=18;break;case 18:c=this.MF.Jr?17:16}},t.prototype.en=function(){return this.pOa||this.ac.La.jk},t;case 2:t.prototype.play=function(){for(var i,t=2;5!==t;)2===t&&((i=this).en()?this.H.warn("play called after pipelines already shutdown"):(this.ac.V.Ve(f.ma.Kc),this.ac.tpb(),this.ac.zb.Kf.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.kc(t.mediaType)&&(t.YP?t.Sb("play: not resuming bufferManager, audio track switch in progress"):(i.ac.Pg[t.mediaType].resume(),i.ac.Pv[t.mediaType].resume())),e=1)}),this.ac.nT(),this.ac.emit("play")),t=5)},t.prototype.stop=function(){for(var i,t,e,n,r=2;6!==r;)switch(r){case 2:t=(i=this).ac.V.x0a(),e=this.ac.V.w0a(),this.ac.V.Ve(f.ma.gr),this.ac.E1(),r=4;break;case 4:t||e||this.ac.La.si.fE(!1,this.ac.V),n=this.ac.La.Wc,a.zf.forEach(function(t){for(var e=2;5!==e;)switch(e){case 2:e=(t=n.Rd(t))?1:5;break;case 1:t.Vh=!1,e=5}}),a.zf.forEach(function(t){for(var e=2;1!==e;)2===e&&((t=i.ac.Pg[t])&&t.pause(),e=1)}),r=7;break;case 7:this.ac.emit("stop"),r=6}},t.prototype.suspend=function(){for(var t=2;1!==t;)switch(t){case 4:this.kha=-9,t=6;break;case 2:this.kha=!0,t=1}},e=4}}(),e.REa=t},function(t,e,i){var a,o,s,u,O,I;_esm(e),e.LGa=void 0,t=i(2),a=t.__importStar(i(10)),o=i(142),s=t.__importDefault(i(28)).default.Ta,u=t.__importDefault(i(6)),O=i(9),I=i(5),i=function(){var t;function e(t,e){for(var i=2;4!==i;)2===i&&(this.ab=t,this.H=e,i=4)}for(t=2;38!==t;)switch(t){case 2:e.prototype.am=function(t){for(var e=2;5!==e;)2===e&&(t={type:"startEvent",event:t,time:u.default.time.ea()},O.Va(this.ab,t.type,t),e=5)},e.prototype.Rnb=function(){for(var t,e=2;5!==e;)2===e&&(t={type:"openComplete"},O.Va(this.ab,t.type,t),e=5)},e.prototype.Snb=function(t,e,i,n,r){for(var a=2;1!==a;)2===a&&(this.ab.I.lAb||(t={type:"ptsStarts",manifestIndex:t,mediaType:e,movieId:n,streamId:i,ptsStarts:r.P9a()},O.Va(this.ab,t.type,t)),a=1)},e.prototype.Inb=function(t,e){for(var i=2;5!==i;)2===i&&(t={type:"headerCacheHit",movieId:t,streamId:e},O.Va(this.ab,t.type,t),i=5)},t=3;break;case 23:e.prototype.Anb=function(i,n){for(var r,t=2;5!==t;)2===t&&(r=this,setTimeout(function(){for(var t,e=2;5!==e;)2===e&&(t={type:"audioTrackSwitchComplete",trackId:i,trackIndex:n},O.Va(r.ab,t.type,t),e=5)},0),t=5)},e.prototype.Enb=function(t){for(var e,i=2;4!==i;)2===i&&(e={type:"bufferingStarted",time:u.default.time.ea(),percentage:t||0},O.Va(this.ab,e.type,e),this.sga=t||0,i=4)},e.prototype.Cnb=function(){for(var t,e,i,n,r,a=2;3!==a;)2===a&&(t=this.ab.I,e=u.default.time.ea(),i=this.ab.La.Wc,n=this.ab.Pm?1:0,r=i.eb(n),i=i.Gh(n),(t=Math.min(Math.max(Math.round(100*(r.tD?(e-this.ab.qfa)/t.vA:r.progress||i/t.tj)),this.sga),99))!=this.sga&&(e={type:"buffering",time:e,percentage:t},O.Va(this.ab,e.type,e),this.sga=t),a=3)},e.prototype.Ega=function(){for(var t,e,i,n,r,a=2;8!==a;)2===a&&(n=(i=this.ab.La.Wc).eb(0),r=i.eb(1),this.gOa(),e=(t=this.ab.Pm?this.ab.zb.RA[s.Mb]:this.ab.zb.RA[s.Wb]).WT,i={type:"bufferingComplete",time:u.default.time.ea(),actualStartPts:e,aBufferLevelMs:i.Gh(0),vBufferLevelMs:i.Gh(1),selector:(r||n).gP,initBitrate:t.rw,skipbackBufferSizeBytes:this.ab.mc.dE},this.ab.yg.SCb({initSelReason:t.Kz,initSelectionPredictedDelay:t.Jz,buffCompleteReason:t.zt,hashindsight:this.ab.Jr,hasasereport:!!this.ab.ns,bcVBufferLevelMs:i.vBufferLevelMs,bcABufferLevelMs:i.aBufferLevelMs}),O.Va(this.ab,i.type,i),a=8)},e.prototype.gOa=function(){var t,e,i;for(o=2;12!==o;)switch(o){case 1:o=this.ab.en()?12:5;break;case 5:a=(r=this.ab.La.Wc).Gh(0),t=r.Gh(1),this.ab.yg.oqb(a,t),e=(e=this.ab.mc.Qb.get()).confidence?e.Ra.Ga:0,o=8;break;case 2:i=this.ab.I,o=1;break;case 8:var n,r,a={type:"updateBufferLevel",abuflbytes:(n=this.ab.La).mG(r,0),vbuflbytes:r=n.mG(r,1),totalabuflmsecs:a,totalvbuflmsecs:t,currentBandwidth:e},o=14;break;case 14:t>i.d3a&&this.ab.mc.Gf&&this.ab.mc.Gf.Lp(!0,this.ab.Yl.sessionId),O.Va(this.ab,a.type,a),o=12}},e.prototype.anb=function(t){for(var e=2;7!==e;)switch(e){case 5:e=a.ia(this.eL)?8:4;break;case 2:e=a.ia(t)?7:1;break;case 8:this.eL=t,e=7;break;case 4:var i=t.WVa-this.eL.WVa,n=t.TZa-this.eL.TZa,r=t.F4a-this.eL.F4a;(4194304<i||4194304<r)&&this.H.warn("memoryUsage at time: "+u.default.time.ea()+", fastMallocDelta: "+i+", jsHeapDelta: "+n+", osAllocatorDelta: "+r),e=9;break;case 1:a.Ba(t.kZ),e=5;break;case 9:a.Ba(t.kZ)&&a.Ba(this.eL.kZ)&&(4194304<(i=t.kZ-this.eL.kZ)&&this.H.warn("memoryUsage at time: "+u.default.time.ea(),", systemDelta: "+i)),e=8}},t=32;break;case 13:e.prototype.Vnb=function(t,e,i){for(var n=2;4!==n;)2===n&&(i=i?this.vmb(t.id,i):void 0,t={type:"segmentPresenting",segmentId:t.id,contentOffset:e,metrics:i,playlistSegment:t.QD,manifestIndex:t.P.Pb},O.Va(this.ab,t.type,t),n=4)},e.prototype.Tnb=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"segmentAppended",segmentId:t.id,metrics:e},t.QD||O.Va(this.ab,e.type,e),i=5)},e.prototype.Unb=function(t,e,i){for(var n=2;5!==n;)2===n&&(t={type:"segmentComplete",mediaType:t,manifestIndex:e,segmentId:i.id},O.Va(this.ab,t.type,t),n=5)},t=10;break;case 26:e.prototype.Gnb=function(t){for(var e=2;5!==e;)2===e&&(t={type:"firstRequestAppended",manifestIndex:t.Pa.gb.P.Pb,mediatype:t.mediaType,time:u.default.time.ea()},O.Va(this.ab,t.type,t),e=5)},e.prototype.Knb=function(t,e){for(var i=2;5!==i;)2===i&&(t={type:"initialAudioTrack",trackId:e,trackIndex:t},O.Va(this.ab,t.type,t),i=5)},e.prototype.Bnb=function(t,e){for(var i=2;3!==i;)2===i&&(t=t.cA,e=e.cA,e={type:"audioTrackSwitchStarted",oldLangCode:t.language,oldNumChannels:t.channels,newLangCode:e.language,newNumChannels:e.channels,sourceBufferReset:void 0},O.Va(this.ab,e.type,e),i=3)},t=23;break;case 20:e.prototype.Nnb=function(t,e,i,n,r){for(var a=2;5!==a;)2===a&&(t={type:"manifestRange",index:t,manifestOffset:e,startPts:Math.floor(i),endPts:Math.floor(n),maxPts:Math.floor(r)},O.Va(this.ab,t.type,t),a=5)},e.prototype.iOa=function(t){for(var e=2;5!==e;)2===e&&(t={type:"maxBitrates",audio:t[0],video:t[1]},O.Va(this.ab,t.type,t),e=5)},e.prototype.Onb=function(t,e){for(var i,n=2;3!==n;)2===n&&(i=this.ab.I,t={type:"manifestSelected",index:t,replace:e.P.sf.replace,ptsStarts:e.EO,streamingOffset:e.Z+e.Cw},i.ji&&(e="notifyManifestSelected: "+JSON.stringify(t),i.ji&&this.Bm(e)),O.Va(this.ab,t.type,t),n=3)},e.prototype.Mnb=function(t,e,i,n,r){for(var a=2;4!==a;)2===a&&(t={type:"manifestPresenting",index:t.Pb,pts:Math.floor(e),movieId:t.J,replace:t.sf.replace,contentOffset:i},null!=n&&null!=r&&(t.previousMovieId=n,t.previousIndex=r),O.Va(this.ab,t.type,t),a=4)},t=16;break;case 10:e.prototype.Fga=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"lastSegmentPts",segmentId:t.id,pts:Math.floor(e)},t.QD||O.Va(this.ab,e.type,e),i=5)},t=20;break;case 16:e.prototype.Wnb=function(t,e,i,n){for(var r,a=2;3!==a;)2===a&&(r=t.mediaType,o.Qm.kq(r),t={type:"streamPresenting",startPts:Math.floor(e),contentStartPts:Math.floor(i),mediaType:r,manifestIndex:n,trackIndex:t.track.jC,streamIndex:t.Lf},O.Va(this.ab,t.type,t),a=3)},e.prototype.aob=function(t){for(var e=2;5!==e;)2===e&&(t={type:"videoLooped",offset:t},O.Va(this.ab,t.type,t),e=5)},e.prototype.Znb=function(t,e,i,n,r){for(var a=2;4!==a;)2===a&&(e={type:"updateStreamingPts",mediaType:t,manifestIndex:e,trackIndex:i,movieTime:Math.floor(n),segmentId:r},o.Qm.kq(t),O.Va(this.ab,e.type,e),a=4)},t=26;break;case 3:e.prototype.Hnb=function(t,e,i,n,r){for(var a,o=2;3!==o;)2===o&&(a=this.ab.wNa,this.ab.wNa=void 0,t={type:"headerCacheDataHit",movieId:t,audio:e,audioFromMediaCache:n,video:i,videoFromMediaCache:r,actualStartPts:a&&a.xo,headerCount:a&&a.pN,stats:a&&a.ec},O.Va(this.ab,t.type,t),o=3)},e.prototype.Pnb=function(t,e,i,n){for(var r=2;5!==r;)2===r&&(t={type:"maxPosition",index:t,endPts:e,maxPts:i,maxSeekPts:n},O.Va(this.ab,t.type,t),r=5)},e.prototype.Ynb=function(t,e,i,n,r,a,o){for(var s=2;3!==s;)switch(s){case 2:void 0===o&&(o=!1),t={type:"error",error:t,errormsg:e,networkErrorCode:i,httpCode:n,nativeCode:r,manifestIndex:a,temporaryFailure:o},s=5;break;case 5:this.H.error("notifyStreamingError: "+JSON.stringify(t)),O.Va(this.ab,t.type,t),s=3}},e.prototype.o2=function(t,e){for(var i=2;5!==i;)2===i&&(e={type:"segmentStarting",segmentId:t.id,contentOffset:e,maxBitrates:{audio:t.P.Gw[0],video:t.P.Gw[1]}},t.QD||O.Va(this.ab,e.type,e),i=5)},e.prototype.Gga=function(t){for(var e,i=2;5!==i;)2===i&&(e={type:"segmentAborted",segmentId:t.id},t.QD||O.Va(this.ab,e.type,e),i=5)},e.prototype.vmb=function(n,t){for(var e=2;12!==e;)switch(e){case 2:var i,r={segment:n,srcsegment:t.S$,srcoffset:t.wP,seamlessRequested:t.Ue,atRequest:{},discard:{}};(i=t.ke[n])?r.atRequest={weight:i.weight,abuflmsec:i.Br.vr,vbuflmsec:i.Br.$n,abuflbytes:i.Br.kC,vbuflbytes:i.Br.Ks}:void 0!==(i=this.ab.La.XYa(t.S$,n))&&(r.atRequest.weight=i),a.mf(t.ke,function(t,e){for(var i=2;1!==i;)2===i&&(e!=n&&(r.discard[e]={weight:t.weight,abuflmsec:t.Br.vr,vbuflmsec:t.Br.$n,abuflbytes:t.Br.kC,vbuflbytes:t.Br.Ks}),i=1)}),i=t.Ue?t.SV?"seamless":"long":t.B3a?"long":t.Vn?"skip":"reset",r.transitionType=i,t.Uka||(r.delayToTransition=t.C4),i="seamless"===i?0:u.default.time.ea()-t.startTime,e=7;break;case 7:return r.durationOfTransition=i,r.atTransition=t.oab,r.srcsegmentduration=this.ab.La.gHb(t.S$),r}},t=13;break;case 32:e.prototype.$nb=function(){for(var t,e=2;3!==e;)2===e&&(this.ab.I.WMb&&u.default.memory.IFb(this.anb.bind(this)),t={type:"streamingstat",time:u.default.time.ea(),playbackTime:this.ab.V.Re()},this.ab.yg.TCb(t),O.Va(this.ab,t.type,t),e=3)},e.prototype.fOa=function(){for(var t=2;4!==t;)switch(t){case 2:t=this.ab.ns?1:4;break;case 9:t=this.ab.ns?4:7;break;case 1:var e={type:"asereport"};this.ab.ns.RCb(e)&&O.Va(this.ab,e.type,e),t=4}},e.prototype.znb=function(){for(var t,e=2;5!==e;)2===e&&(t={type:"asereportenabled"},O.Va(this.ab,t.type,t),e=5)},e.prototype.Jnb=function(t){for(var e,i=a000,n=2;6!==n;)switch(n){case 2:n=t?1:6;break;case 7:O.Va(this.ab,a.type,a),n=6;break;case 1:var r,a={type:"hindsightreport"};for(S in r=this.ab.I.J6){var o=r[S],s=0,u=0,c=0,h=0,f=0,l=0,p=void 0,d=void 0,b=!1,m=-1,g=-1,v=-1,y=-1,w=-1,_=-1;for(e in t)void 0===(d=t[e]).nd&&(p=(p=d.sols)&&p[o])&&(b=!0,c+=p.dlvdur,s+=p.dltwbr*p.dlvdur,u+=p.dlvmaf*p.dlvdur),l+=d.pbdur,h+=d.pbtwbr*d.pbdur,f+=d.pbvmaf*d.pbdur,p=d.rr,d=d.ra;switch(0<l&&(m=+h/l,y=+f/l),b&&(0<c&&(g=+s/c,w=+u/c),0<c+l&&(v=+(s+h)/(c+l),_=+(u+f)/(c+l))),o){case"htwbr":a.htwbr=v,a.hptwbr=g,a.pbtwbr=m,p&&(a.rr=p,a.ra=d);break;case"hvmaftb":a.hvmaftb=_,a.hpvmaftb=w,a.pbvmaftb=y,p&&(a.rrvmaftb=p,a.ravmaftb=d);break;case"hvmafgr":a.hvmafgr=_,a.hpvmafgr=w,a.pbvmafgr=y,p&&(a.rrvmafgr=p,a.ravmafgr=d);break;case"hvmafdp":a.hvmafdp=_,a.hpvmafdp=w,a.pbvmafdp=y,p&&(a.rrvmafdp=p,a.ravmafdp=d)}}n=4;break;case 4:n=this.ab.QU||this.ab.$w?3:9;break;case 8:for(var E in t)if(void 0!==(r=t[E]).E9a)for(o in r.E9a)if(void 0!==(p=r.E9a[o]).$$){var k,S,T,A;for(k in(S=void 0!==r.GWa)||(console.error("expect report.fragmentsPrebuffered !== undefined"),I.assert(S,"expect report.fragmentsPrebuffered !== undefined")),S=[],r.GWa)s=r.GWa[k],S.push({fa:s.fa,Im:s.duration/1e3,quality:s.sb});for(T in S=p.$$.length===p.HWa.length,s="expect sol.strmsel.length === sol.fragsel.length but got "+p.$$.length+" and "+p.HWa.length,S||(console.error(s),I.assert(S,s)),S=[],s=0,p.$$)c=p.$$[T],u=p.HWa[T],i.Z4L(1),s=c=i.j4L(s,c),S.push({icc:c,Lcc:p.XUa[T],Q9b:p.Ra[T],Tia:p.Tia[T],Sia:p.Sia[T],tRa:p.tRa[T],u9b:{fa:u.fa,Im:u.duration/1e3,quality:u.sb||p.$d[c].sb,ncc:u.Lf,v9b:u.Me},L6a:0,Nbc:0,Zsa:p.Zsa[T]});for(A in p=[],S=0,r.VA.trace)s=r.VA.trace[A],i.N4L(1),S=s=i.J4L(S,s),p.push(s)}n=7;break;case 3:a.report=t,n=9;break;case 9:n=this.ab.$w?8:7}},t=28;break;case 39:return e;case 28:e.prototype.Fnb=function(t){for(var e=2;5!==e;)switch(e){case 3:t={type:"",mediaType:t},e=4;break;case 2:t={type:"endOfStream",mediaType:t},e=1;break;case 1:O.Va(this.ab,t.type,t),e=5}},e.prototype.Kn=function(t){for(var e=2;1!==e;)2===e&&(this.ab.emit("aseexception",{type:"aseexception",msg:t}),e=1)},e.prototype.NPb=function(t,e,i,n){for(var r=2;5!==r;)2===r&&(t={type:"maxvideobitratechanged",time:u.default.time.ea(),spts:n,maxvb_old:t,maxvb:e,reason:i},this.ab.emit("maxvideobitratechanged",t),r=5)},t=42;break;case 42:e.prototype.$3a=function(){for(var t,e=2;3!==e;)switch(e){case 1:this.Cpb=!0,t={type:"streamerend",time:u.default.time.ea()},O.Va(this.ab,t.type,t),e=3;break;case 2:e=!this.Cpb&&this.ab.I.X3a?1:3}},e.prototype.UPb=function(t){for(var e=2;5!==e;)2===e&&(t={type:"streamSelectionAugmentData",augmentData:t,fragmentIndex:t[0].Qd},O.Va(this.ab,t.type,t),e=5)},e.prototype.Bm=function(t){for(var e=2;5!==e;)2===e&&(t={type:"managerdebugevent",message:"@"+u.default.time.ea()+", "+t},O.Va(this.ab,t.type,t),e=5)},t=39}}(),e.LGa=i},function(t,e,i){var n,d,r,o,a,s,b,u,c,m,h,f,l,p,g,v;_esm(e),e.pDa=void 0,n=i(2),t=i(17),d=n.__importStar(i(10)),i(5),i(222),r=i(240),o=i(378),a=i(83),i(369),i(384),s=i(125),b=n.__importDefault(i(28)),i(235),u=i(875),c=n.__importDefault(i(124)),i(16),m=n.__importDefault(i(6)),i(176),i(244),i(243),i(99),h=new m.default.Console("HEADERCACHE","media|asejs"),i=new m.default.Console("MEDIACACHE","media|asejs"),f=m.default.JJ,l=h.trace.bind(h),i.trace.bind(i),p=h.warn.bind(h),g=h.error.bind(h),v=h.info.bind(h),i=function(a){function t(t,e,i,n){for(var r=2;25!==r;)switch(r){case 15:return t.Yl=i,t;case 2:(t=a.call(this)||this).jn=l,t.Kk=g,r=4;break;case 13:t.SNa=e.y4,t.Sv=[],r=11;break;case 11:t.Q1=!1,t.NK=[],t.RF={},r=19;break;case 4:t.Sb=p,t.E8b=v,t.d2=Object.create(null),t.po=e,t.dg=Object.create(null),t.wF=0,t.so=[],r=13;break;case 19:t.rha=(t.po.$xa||t.po.aya)&&0<(t.po.EU||(m.default.options||{}).WN||0),t.DF=t.po.sra,t.Vj=void 0,t.rha&&(t.po.EU||(e=(m.default.options||{}).WN||0,t.po.set?t.po.set({EU:e}):t.po.EU=(m.default.options||{}).WN||0),t.Vj=new u.XFa(t.po,m.default,t),t.Vj.xb(t,n).then(function(){for(var t=2;1!==t;)switch(t){case 4:l(""),t=6;break;case 2:l("Media cache initialized"),t=1}}).catch(function(t){for(var e=2;1!==e;)switch(e){case 4:g("",t),e=2;break;case 2:g("Media cache did not initialize",t),e=1}})),r=15}}for(var e=2;39!==e;)switch(e){case 11:t.prototype.tk=function(t){for(var e=2;1!==e;)2===e&&(this.ad(t)?this.jRb(t):this.kRb(t),e=1)},t.prototype.uX=function(t){for(var e=2;5!==e;)2===e&&(p("_onError: ",t.toString()),this.F1(t),e=5)},t.prototype.jRb=function(e){for(var i,t=2;9!==t;)switch(t){case 2:i=this,e.I_b=e.rf,this.Okb(e),t=4;break;case 4:d.ia(e.KIb)||e.KIb(e.I_b),this.apb(e,function(){for(var t=2;1!==t;)2===t&&(d.ia(e)||(d.ia(e.Am)||e.Am.RZa--,i.F1(e)),t=1)}),t=9}},e=19;break;case 16:t.prototype.cnb=function(){for(var i,t=2;5!==t;)2===t&&(!(i=this).Q1&&0<this.NK.length&&(this.NK.forEach(function(t){for(var e=2;1!==e;)2===e&&(i.Xga(t.NIb,t.Ed),e=1)}),this.NK=[]),t=5)},t.prototype.KMa=function(t,e){for(var i,n=2;8!==n;)switch(n){case 2:i=t.stream.mediaType,this.Sv.length<2&&this.MMa(),n=5;break;case 5:return(e=new o.vba(t.stream,e,this.Sv[i],t,this,!0,h)).Ph=t.Ph,e.Gf=this,e}},t.prototype.Alb=function(t,e){for(var i,n=2;8!==n;)switch(n){case 2:i=t.stream.mediaType,this.Sv.length<2&&this.MMa(),n=5;break;case 5:return(e=r.t_.create(t.stream,e,this.Sv[i].track,t,this,!0,h)).Ph=t.Ph,e.Gf=this,e}},t.prototype.F1=function(t){for(var e,i=2;9!==i;)switch(i){case 3:e&&0===e.RZa&&0===e.qU&&(this.npb(e,t.rf),e.Ph&&this.Vj&&(e.ec.Oac||(this.DF?this.Vj.HWb(e):this.Vj.hP("savetodisk",{g8a:e.ec.Fs})))),i=9;break;case 2:this.ad(t)&&delete this.d2[t.Oa],this.ad(t)||delete t.response,t.ed(),e=this.dg[t.J]||t.Am,i=3}},t.prototype.inb=function(t,e,i){for(var n,r,a=2;8!==a;)switch(a){case 2:n=t.x4,e.Ph&&this.Vj&&(t.O2a?n=t.O2a:t.x2a&&0<t.x2a&&(n=2e3*t.x2a)),a=5;break;case 5:a=0<n?4:3;break;case 3:return r=i&&i.length<t.$Ta?i.length:t.$Ta,function(t){var e=a000;return e.Z4L(18),e.J4L(r,t)};case 4:return function(t,e){return a000.N4L(18),a000.J4L(n,e)}}},t.prototype.Xga=function(t,e){for(var i,n,r,a,o,s,u,c,h,f,l,p=2;53!==p;)switch(p){case 8:p=h?7:53;break;case 54:h.Wka&&!d.ia(h.xo)&&(t=h.Wka,delete h.Wka,this.Xga(t,h.xo)),p=53;break;case 21:r=u=0,n=(i=a&&a.mediaType)===b.default.Ta.Mb?c.F8:c.x8,p=34;break;case 34:c=i===b.default.Ta.Mb?c.ROb:c.KOb,p=33;break;case 29:a000.Z4L(1),i=a000.j4L(l,1),p=28;break;case 14:h.Wka=t,p=13;break;case 28:p=i<f.length&&(a.fa<n||a.duration<c)?44:42;break;case 43:++i,p=28;break;case 5:this.NK.push({NIb:t,Ed:e}),p=4;break;case 1:p=this.Q1?5:9;break;case 7:p=t.mediaType===b.default.Ta.Wb?6:11;break;case 37:a=void 0,p=36;break;case 6:p=void 0===h.xo?14:12;break;case 33:p=l<(f&&f.length||0)&&!o(r,u)?32:54;break;case 3:this.NK.shift(),p=4;break;case 36:++l,p=33;break;case 25:void 0===h.data&&(h.data={}),void 0===h.data[s]&&(h.data[s]=[]),p=23;break;case 42:d.ia(h.xo)&&(h.xo=a.Z),a.Ph&&(a.responseType=0),p=40;break;case 26:c.ji&&(e="@"+m.default.time.ea()+", headerCache requestData: movieId: "+o+", streamId: "+s+", pts: "+e+", startPts: "+a.Z,this.emit("managerdebugevent",{message:e})),p=25;break;case 39:++r,u+=a.duration,p=37;break;case 4:p=this.NK.length>c.JIb?3:53;break;case 16:a.Ph=t.Ph,(r=a.jma(e))&&(a.mediaType===b.default.Ta.Wb&&!c.zra&&r.Ed<(c.fm&&!c.fG&&u.uf?Math.floor(u.uf.Y):0)&&(++r.il,r.Ed+=a.sa.Y),0<r.il&&a.Bk({start:r.il})),p=26;break;case 18:a=t.stream.Wk(l),p=17;break;case 44:a.f3(f.get(i)),a.bO=i+1,l=i,p=43;break;case 23:e=h.data[s],o=this.inb(c,t,f),p=21;break;case 20:p=-1===l||void 0===l?19:18;break;case 30:p=d.ia(f)||a.wa?42:29;break;case 2:o=t.J,s=t.Oa,u=t.stream,c=t.Oe,p=1;break;case 32:void 0===a&&(a=t.stream.Wk(l)),p=void 0!==a?31:36;break;case 12:e=h.xo,p=11;break;case 31:a.Ph=t.Ph,p=30;break;case 13:return;case 9:h=this.dg[o]||t.Am,p=8;break;case 17:p=d.ia(a)?25:16;break;case 19:g("no proper fragment found to request data at pts",e),p=53;break;case 11:t.mediaType===b.default.Ta.Wb&&c.fm&&!c.fG&&u.uf&&(e=Math.max(u.U&&u.U.Cj(0)||0,e+u.uf.Y)),l=(f=t.stream.U)&&f.zn(e),p=20;break;case 40:t.Ph&&this.Vj&&t.NW&&t.NW[s]&&void 0!==a.Z&&t.NW[s][a.Z]||((i=this.Alb(a,t.Oe)).Ph&&(i.Am=t.Am),i.oO(),++h.qU,e.push(i)),p=39}},t.prototype.Okb=function(t){for(var e=2;1!==e;)switch(e){case 4:this.tMa(t,t.Am),e=6;break;case 2:this.tMa(t,t.Am),e=1}},e=22;break;case 28:t.prototype.Xmb=function(i,t){for(var n,e,r,a=2;8!==a;)switch(a){case 9:return Promise.reject("Media cache is not enabled");case 2:n=this,a=1;break;case 1:a=this.Vj?5:9;break;case 5:e=void 0,r=!1,this.Vj.k0a(this.dg[i])?(e=Promise.resolve(this.dg[i]),r=!0):e=this.Vj.LMb(i),a=3;break;case 3:return e.then(function(e){return!d.ia(e)&&n.Vj?n.Vj.HMb(i,t,e).then(function(t){return t&&(r||(n.dg[i]=e,++n.wF,n.vfa(),n.so.push(e),n.so.sort(n.g6a)),n.uMa(i,t)),n.dg[i]}):Promise.resolve(void 0)})}},t.prototype.uMa=function(t,e){for(var r,i,a,n,o=2;7!==o;)switch(o){case 1:o=e?5:7;break;case 9:r=e.data,Object.keys(r).forEach(function(i){for(var t,n,e=2;9!==e;)2===e&&(t=r[i],d.ia(a.data)&&(a.data={}),d.ia(a.data[i])&&(a.data[i]=[]),n=a.data,t.forEach(function(t){for(var e=2;1!==e;)2===e&&(n[i].push(t),e=1)}),e=9)}),o=7;break;case 2:i=this,o=1;break;case 3:o=e.data?9:7;break;case 5:a=this.dg[t],n=e.headers,a&&n&&Object.keys(n).forEach(function(t){for(var e=2;1!==e;)switch(e){case 2:i.Nkb(n[t],a),e=1;break;case 4:i.Nkb(n[t],a),e=3}}),o=3}},t.prototype.g6a=function(t,e){return e.priority-t.priority},t.prototype.j6a=function(t){for(var e,i,n,r=2;11!==r;)switch(r){case 5:for(n in t.data)0<(e=t.data[n]).length&&(i[e[0].mediaType]={Oa:n,header:t.headers[n],data:e});i.xo=t.xo,i.pN=t.pN,i.ec=t.ec,i.rw=t.rw,i.Kz=t.Kz,i.bD=t.bD,r=14;break;case 14:return i.Lo=t.Lo,i.Mo=t.Mo,i;case 1:r=t&&t.data?5:11;break;case 2:i={},r=1}},e=41;break;case 19:t.prototype.kRb=function(i){for(var n,t,r,a,e=2;8!==e;)switch(e){case 2:n=this,t=i.J,r=this.dg[t]||i.Am,e=1;break;case 1:e=r?5:8;break;case 5:this.po.ji&&(t="@"+m.default.time.ea()+", headerCache dataComplete: movieId: "+t+", streamId: "+i.Oa+", pts: "+i.Z+", remaining: "+(r.qU-1),this.emit("managerdebugevent",{message:t})),e=i.Ph&&0===i.responseType&&this.Vj&&!this.DF?4:9;break;case 4:a=m.default.time.now(),this.Vj.FWb(i,r,function(t){for(var e=2;4!==e;)2===e&&(t||d.ia(r)||(t=m.default.time.ea()-a,d.ia(r.ec)&&(r.ec={}),d.ia(r.ec.Fs)&&(r.ec.Fs=0),r.ec.Fs+=t),--r.qU,n.F1(i),e=4)}),e=8;break;case 9:--r.qU,n.F1(i),e=8}},t.prototype.MMa=function(){for(var t=2;1!==t;)2===t&&(0===this.Sv.length&&(this.Sv=[s.lp.instance.Ht(0,void 0,!1,!1,this.Yl,this.po),s.lp.instance.Ht(1,void 0,!1,!1,this.Yl,this.po)],this.Sv.forEach(function(t){return t.xb()}),f.og()),t=1)},t.prototype.RMa=function(){for(var t,e=2;4!==e;)2===e&&(t=this.Sv,this.Sv=[],t.forEach(function(t){for(var e=2;1!==e;)switch(e){case 2:s.lp.instance.oM(t),e=1;break;case 4:s.lp.instance.oM(t),e=8}}),e=4)},e=16;break;case 2:n.__extends(t,a),Object.defineProperties(t.prototype,{cache:{get:function(){return this.dg},enumerable:!1,configurable:!0}}),t.prototype.Yzb=function(){for(var t=2;5!==t;)2===t&&(this.flush(),this.RMa(),t=5)},t.prototype.Gaa=function(t){for(var e=2;5!==e;)2===e&&(this.Yl=t,this.Sv.forEach(function(){}),e=5)},t.prototype.Lp=function(t,e,i){for(var n,r,a=2;9!==a;)switch(a){case 1:a=(n[e]=t)?5:4;break;case 4:i&&delete n[e],r?(this.Q1=!1,this.cnb()):this.Q1=!0,a=9;break;case 2:n=this.RF,r=t,a=1;break;case 5:for(var o in n)n.hasOwnProperty(o)&&!1===n[o]&&(r=!1);a=4}},e=9;break;case 9:t.prototype.flush=function(){for(var t,e=2;8!==e;)switch(e){case 3:this.so=[],this.po.ji&&(t="@"+m.default.time.ea()+", headerCache flush: ",this.emit("managerdebugevent",{message:t})),e=8;break;case 2:for(var i in this.tWa(),this.d2)(t=this.d2[i]).abort();this.dg=Object.create(null),this.wF=0,e=3}},t.prototype.list=function(){return this.so},t.prototype.BW=function(t,e){for(var i=2;4!==i;)switch(i){case 2:i=(t=this.dg[t])?1:4;break;case 9:i=(t=this.dg[t])?0:6;break;case 1:i=(e=t.headers[e])?5:4;break;case 5:case 7:return e}},e=6;break;case 22:t.prototype.Nkb=function(t,e){for(var i=2;1!==i;)2===i&&(this.tMa(t,e),i=1)},e=21;break;case 6:t.prototype.fNb=function(t,e){var i,n;return(n=(i=this).eNb(t))||!this.Vj?Promise.resolve(n):(this.DF?this.Ymb(t,e):this.Xmb(t,e)).then(function(t){return i.j6a(t)})},t.prototype.eNb=function(t){return this.j6a(this.dg[t])},t.prototype.tWa=function(){var t,n,e,i;function r(t){for(var e=2;1!==e;)switch(e){case 2:t.jSa(),e=1;break;case 4:t.jSa(),e=3}}for(t=2;4!==t;)if(2===t){for(e in n=0,this.dg)if((i=this.dg[e]).data){for(var a in i.data)i.headers[a]||g("missing headerEntry for streamId:",a,"in entry:",i),function(t,e){for(var i=2;1!==i;)2===i&&(t&&t.data&&t.data[e].forEach(function(t){for(var e=2;5!==e;)2===e&&(t.abort(),n+=t.bytesReceived,e=5)}),i=1)}(i,a),i.data[a].forEach(r),delete i.data[a];delete i.data}this.Xob(n),t=4}},t.prototype.qA=function(t){for(var e,i=2;5!==i;)2===i&&((e=this.dg[t.J])&&(this.ad(t)?d.ia(e.ec.OIb)&&!d.ia(t.loadTime)&&(e.ec.OIb=t.loadTime):d.ia(e.ec.U5a)&&!d.ia(t.loadTime)&&(e.ec.U5a=t.loadTime)),i=5)},e=11;break;case 21:t.prototype.tMa=function(t,e){for(var i,n=2;4!==n;)switch(n){case 1:n=(e=this.dg[t.J]||e)?5:4;break;case 5:e.Vqb||e.Ph&&!this.DF||(e.Vqb=!0,++this.wF),e.headers||(e.headers={}),e.headers[i]=t,this.po.PBb&&(e.pN||(e.pN=0),++e.pN),this.vfa(),n=4;break;case 2:i=t.Oa,n=1;break;case 9:i=t.Oa,n=8}},t.prototype.vfa=function(){function t(t){for(var e=2;5!==e;)2===e&&(t.abort(),i+=t.bytesReceived,e=5)}for(var e,i,n,r=2;12!==r;)switch(r){case 5:r=this.wF>this.SNa?4:13;break;case 1:r=this.wF<=this.SNa?12:5;break;case 2:i=0,r=1;break;case 4:r=(e=this.so.shift())?3:5;break;case 9:r=e.data?8:7;break;case 8:for(var a in e.data)e.data[a].forEach(t),delete e.data[a];r=7;break;case 3:n=e.J,r=9;break;case 14:this.Uob(n),r=5;break;case 13:this.Vob(i),r=12;break;case 7:delete this.dg[n],--this.wF,r=14}},t.prototype.Vob=function(t){for(var e=2;1!==e;)2===e&&(0!==t&&(t={type:"discardedBytes",bytes:t},this.emit(t.type,t)),e=1)},e=33;break;case 33:t.prototype.Xob=function(t){for(var e=2;1!==e;)2===e&&(0!==t&&(t={type:"flushedBytes",bytes:t},this.emit(t.type,t)),e=1)},t.prototype.Uob=function(t){for(var e=2;5!==e;)2===e&&(t={type:"cacheEvict",movieId:t},this.emit(t.type,t),e=5)},t.prototype.apb=function(t,e){for(var i,n=2;3!==n;)2===n&&(i=t.Oe,d.ia(t.TVb)||this.Xga(t,t.TVb),!this.Vj||!t.Ph||this.DF||d.ia(t.NW)||t.NW[t.Oa]&&t.NW[t.Oa].header?e():this.Vj.GWb(t,e),i.Yxa||0!==Object.keys(this.d2).length||this.RMa(),n=3)},t.prototype.npb=function(t,e){for(var i=2;4!==i;)2===i&&(t.ec.eTb=e,t={type:"prebuffstats",movieId:t.J,stats:{prebuffstarted:t.ec.U5a,prebuffcomplete:t.ec.eTb}},this.emit(t.type,t),i=4)},t.prototype.Ymb=function(i,t){for(;;){var n=this;return this.Vj?this.Vj.IMb(i,t).then(function(t){for(var e=2;5!==e;)switch(e){case 2:e=t&&t.Am?1:5;break;case 1:return n.dg[i]=t.Am,++n.wF,n.vfa(),n.so.push(t.Am),n.so.sort(n.g6a),n.uMa(i,t),n.cache[i]}}):Promise.reject("Media cache is not enabled")}},e=28;break;case 41:return t.prototype.ad=function(t){return!!t.ad},t}}(a.kv),e.pDa=i,c.default(t.EventEmitter.prototype,i.prototype)},function(t,e,i){var H,n,s,K,x,c,V,P;_esm(e),e.XFa=void 0,H=i(2),n=i(17),s=H.__importStar(i(876)),K=H.__importStar(i(10)),i(5),x=i(240),c=i(9),t=i(42),V=H.__importStar(i(887)),P=V.sFa,i=function(){for(var t=2;18!==t;)switch(t){case 3:e.prototype.GWb=function(i,n){for(var r,t,a,e,o,s,u=2;13!==u;)switch(u){case 4:u=i.stream.je&&!K.ia(i.stream.U)?3:14;break;case 2:r=this,t=[i.J,i.Oa,P.Qfb].join("."),a=this.ro.time.ea(),e=V.WXa(i),(o={})[t+"."+P.gda]={Kq:e,Gc:P.PE},o[t+"."+P.qgb]={Kq:c.AC(i.Wg.map(function(t){return t.data})),Gc:P.PE},u=4;break;case 3:e={timescale:i.stream.U.S,startTicks:i.stream.U.jl,offset:i.stream.U.Sd(0)},s=i.stream.U.cx,o[t+"."+P.ACa]={Kq:e,Gc:P.PE},u=7;break;case 7:o[t+"."+P.Hfb]={Kq:s.sizes.buffer,Gc:P.PE},u=6;break;case 6:o[t+"."+P.Gfb]={Kq:s.vd.buffer,Gc:P.PE},u=14;break;case 14:this.oo.f8a(P.Yq,o,function(t){for(var e=2;5!==e;)2===e&&(t||(t=r.ro.time.ea()-a,i.Am&&(K.ia(i.Am.ec.Fs)&&(i.Am.ec.Fs=0),i.Am.ec.Fs+=t)),n(),e=5)}),u=13}},e.prototype.FWb=function(t,i,n){for(var e,r,a,o,s,u=2;14!==u;)switch(u){case 3:(e={})[a+"."+P.gda]={Kq:t,Gc:P.PE},K.ia(s)||(e[a+"."+P.whb]={Kq:s,Gc:P.PE}),this.oo.f8a(P.Yq,e,function(t){for(var e=2;5!==e;)2===e&&(t?o.H.warn("Failed to save fragment",t):(t=o.ro.time.ea()-r,K.ia(i.ec.Fs)&&(i.ec.Fs=0),i.ec.Fs+=t),n(),e=5)}),u=14;break;case 5:r=this.ro.time.ea(),a=[t.J,t.Oa,t.fd].join("."),t=V.wna(t),u=3;break;case 1:u=s instanceof ArrayBuffer?5:6;break;case 2:o=this,s=t.response,u=1;break;case 6:n(Error("Unable to save fragment because response is not an ArrayBuffer")),u=14}},e.prototype.HWb=function(n){for(var r,t,e,i,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O=2;20!==O;)switch(O){case 9:T.headers=r,O=8;break;case 4:r={},Object.keys(n.headers).forEach(function(t){for(var e,i=2;5!==i;)2===i&&(e=V.UXa(n.headers[t]),r[t]=e,i=5)}),O=9;break;case 5:O=n.headers?4:8;break;case 7:A={},t=n.data,e=Object.keys(n.data);try{for(i=2;6!==i;)switch(i){case 1:i=u.done?6:5;break;case 5:o=t[a=u.value],e={},i=3;break;case 3:i=o?9:7;break;case 8:A[a]=e,i=7;break;case 2:u=(s=H.__values(e)).next(),i=1;break;case 7:u=s.next(),i=1;break;case 9:try{for(c=2;7!==c;)switch(c){case 5:h=l.value,c=4;break;case 2:_=void 0,l=(f=H.__values(o)).next(),c=1;break;case 3:p=V.wna(h),c=9;break;case 4:c=h instanceof x.t_&&h.response instanceof ArrayBuffer&&!K.ia(h.fd)?3:8;break;case 8:l=f.next(),c=1;break;case 1:c=l.done?7:5;break;case 9:e[h.fd]={mediaType:p.mediaType,streamId:p.streamId,movieId:p.movieId,bitrate:p.bitrate,location:p.location,serverId:p.serverId,saveToDisk:p.saveToDisk,offset:p.offset,bytes:p.bytes,timescale:p.timescale,startTicks:p.startTicks,durationTicks:p.durationTicks,response:h.response},c=8}}catch(t){_={error:t}}finally{for(d=2;1!==d;)if(2===d){try{for(b=2;1!==b;)2===b&&(l&&!l.done&&(E=f.return)&&E.call(f),b=1)}finally{for(m=2;5!==m;)switch(m){case 2:m=_?1:5;break;case 1:throw _.error;case 3:m=_?0:9}}d=1}}i=8}}catch(t){var I={error:t}}finally{for(g=2;1!==g;)if(2===g){try{for(v=2;1!==v;)2===v&&(u&&!u.done&&(w=s.return)&&w.call(s),v=1)}finally{for(y=2;5!==y;)switch(y){case 3:y=I?5:7;break;case 2:y=I?1:5;break;case 1:throw I.error}}g=1}}O=13;break;case 12:I={lifespan:259200},this.hnb&&(I.convertToBinaryData=!0),this.oo.save(P.Yq,n.J,T,I,function(t){for(var e=2;1!==e;)2===e&&(t||k.hP("savetodisk",{g8a:k.ro.time.ea()-S}),e=1)}),O=20;break;case 8:O=n&&n.data?7:12;break;case 2:S=(k=this).ro.time.ea(),T={},A=V.uYa(n),T.movieEntry=A,O=5;break;case 13:T.data=A,O=12}},e.prototype.k0a=function(t){return!(K.ia(t)||K.Bb(t)||K.ia(t.ec)||K.Bb(t.ec)||K.ia(t.J)||K.Bb(t.J)||K.ia(t.priority)||K.Bb(t.priority))},e.prototype.hP=function(t,e){for(var i=2;9!==i;)switch(i){case 2:var n={type:"mediacachestats",operation:t};"savetodisk"===t&&(n.saveTime=e.g8a),"mediacachelookup"===t&&(n.lookupTime=e.Y7,n.dataFound=e.q4),n.oneObject=this.DF,i=3;break;case 3:this.Xlb&&this.emit("mediacache",n),i=9}},t=14;break;case 2:e.prototype.xb=function(a,e){for(;;){var o=this;return this.rha?this.ht=new Promise(function(n,r){for(var t=2;1!==t;)2===t&&((null!=e?e.vN:function(t){return s.vN(o.ro,o.I,t)})(function(t){for(var e,i=2;4!==i;)2===i&&(e=(o.oo=t).En,(t=t.rH)?r(t):e?(o.oYb(a),n()):r(Error("Media cache did not initialize")),i=4)}),t=1)}):(this.ht=Promise.reject("Media cache is disabled"),this.ht.catch(function(){})),this.ht}},e.prototype.LMb=function(u){var c=this,e=[P.xFa,u].join("."),i=this.ro.time.ea();return this.ht.then(function(){return new Promise(function(s){for(var t=2;1!==t;)2===t&&(c.oo.YX(P.Yq,e,function(t){for(var o,e=2;3!==e;)switch(e){case 2:e=!t||t.length<=0?1:5;break;case 1:s(),c.hP("mediacachelookup",{Y7:c.ro.time.ea()-i,q4:!1}),e=3;break;case 5:o=t[0],c.oo.read(P.Yq,o,function(t,e){for(var i,n,r,a=2;14!==a;)switch(a){case 1:a=K.ia(e)?9:5;break;case 2:t&&c.H.warn("Reading movie entry "+o+" failed",t),a=1;break;case 4:try{for(i=2;1!==i;)2===i&&(n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))),i=1)}catch(t){}a=9;break;case 5:a=e instanceof ArrayBuffer?4:3;break;case 3:n={priority:e.priority,movieId:e.movieId,saveToDisk:e.saveToDisk,firstSelectedStreamBitrate:e.firstSelectedStreamBitrate,initSelectionReason:e.initSelectionReason,histDiscountedThroughputValue:e.histDiscountedThroughput,histTdigest:e.histTdigest,histAge:e.histAge,headerCount:e.headerCount,dataRequestCount:e.dataRequestCount,headerRequestCount:e.headerRequestCount,stats:e.stats},a=9;break;case 9:K.ia(n)||(r=V.zna(n)),a=7;break;case 7:K.ia(r)||K.Bb(r)||(r.ec=r.ec||{},r.headers=r.headers||{}),a=6;break;case 6:c.k0a(r)?s(r):(c.jpb(u),s()),a=14}}),e=3}}),t=1)})})},e.prototype.HMb=function(a,i,o){for(var s,u,t=2;9!==t;)switch(t){case 1:t=this.ht?4:5;break;case 5:return Promise.reject("Media cache is not enabled");case 2:s=this,t=1;break;case 7:s=this,t=7;break;case 14:return Promise.reject("");case 4:return u=this.ro.time.ea(),this.ht.then(function(){return new Promise(function(r){for(var t=2;1!==t;)2===t&&(s.oo.YX(P.Yq,a,function(t){for(var e=2;5!==e;)2===e&&(t=t.reduce(function(t,e){var i;for(n=2;9!==n;)switch(n){case 1:var n=-1!==i.indexOf("drmHeader.__embed__")?5:4;break;case 2:i=e.substr(0,e.lastIndexOf(".")),n=1;break;case 6:n=-4==i.indexOf("")?7:9;break;case 5:return t;case 4:return t[i]?t[i].push(e):t[i]=[e],t}},{}),s.lUb(t,i).then(function(t){for(var e=2;8!==e;)switch(e){case 1:return r();case 2:e=void 0===o||void 0===t?1:5;break;case 5:var i=s.ro.time.ea()-u,n=!1;K.ia(t)||K.ia(t.data)||!K.Jh(t.data)?s.H.trace("No content data found for "+a,o):n=!0,s.hP("mediacachelookup",{Y7:i,q4:n}),r(t),e=8}},function(){for(var t=2;1!==t;)switch(t){case 4:r(),t=7;break;case 2:r(),t=1}}),e=5)}),t=1)})})}},e.prototype.IMb=function(i,n){var r,a=(r=this).ro.time.ea();return this.ht.then(function(){return r.Qmb(i)}).then(function(t){for(var e=2;5!==e;)switch(e){case 1:return r.Nob(i.toString(),n,a);case 2:e=t?1:4;break;case 4:r.hP("mediacachelookup",{Y7:r.ro.time.ea()-a,q4:!1}),e=5;break;case 8:return r.Nob(i.toString(),n,a)}})},t=3;break;case 14:e.prototype.lUb=function(e,i){var n=this,t=Object.keys(e).map(function(t){return n.Oxb(e[t])});return Promise.all(t).then(function(t){return t.sort(function(t,e){return t.ad===e.ad?0:t.ad?-1:1}),V.Ana(n.I,n.H,n.af,t,i)})},e.prototype.Oxb=function(e){var u,c,i=this,h={};return new Promise(function(r,o){for(var s,t=2;5!==t;)2===t&&(i.oo.Z9(P.Yq,e,function(t,a){for(var e=2;1!==e;)if(2===e){try{for(n=2;19!==n;)switch(n){case 3:n=u instanceof ArrayBuffer?9:7;break;case 14:n=V.Bpa(s)?13:12;break;case 20:s=V.Pma(c,{response:h.response}),n=6;break;case 5:Object.keys(a).map(function(e){for(var t,i,n,r=2;3!==r;)switch(r){case 2:t=e.substr(e.lastIndexOf(".")+1),r=1;break;case 5:try{for(i=2;5!==i;)2===i&&(n=new Uint8Array(a[e]),c=JSON.parse(String.fromCharCode.apply(null,n)),i=5)}catch(t){c=a[e]}r=3;break;case 1:r=t===P.gda?5:4;break;case 4:t===P.ACa?u=a[e]:h[t]=a[e],r=3}}),n=4;break;case 6:n=s.ad?14:11;break;case 8:return o(i);case 7:s=V.Qma(c,h,u),n=6;break;case 1:return o(t);case 9:var i="Header fragments was an array buffer, is invalid type "+s.Oa,n=8;break;case 4:n=V.d0a(c)?3:20;break;case 13:return i="Missing or invalid header data parts for stream "+s.Oa,o(i);case 2:n=t||void 0===a?1:5;break;case 11:n=V.Apa(s)?10:12;break;case 12:r(s),n=19;break;case 10:return i="Missing or invalid media data parts for stream "+s.Oa,o(i)}}catch(t){o(t)}e=1}}),t=5)})},e.prototype.Nob=function(U,B,F){var q=this;return new Promise(function(L,M){for(var D,t=2;5!==t;)2===t&&(q.oo.read(P.Yq,U,function(t,e){for(var i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R=2;4!==R;)switch(R){case 17:D=V.Ana(q.I,q.H,q.af,e,B),R=16;break;case 16:void 0!==D&&(D.Am=t),R=15;break;case 5:M(t),R=4;break;case 20:C=A.data,O=Object.keys(C),R=18;break;case 13:R=A.headers?12:10;break;case 1:R=t?5:3;break;case 12:i=Object.keys(A.headers),R=11;break;case 18:try{for(n=2;8!==n;)switch(n){case 1:n=a.done?8:5;break;case 9:a=r.next(),n=1;break;case 2:a=(r=H.__values(O)).next(),n=1;break;case 5:w=a.value,o=Object.keys(C[w]);try{for(s=2;7!==s;)switch(s){case 2:x=void 0,c=(u=H.__values(o)).next(),s=1;break;case 1:s=c.done?7:5;break;case 5:h=C[w][c.value],h=V.Pma(h,h),s=4;break;case 3:var N="Missing or invalid media data parts for stream "+h.Oa;return M(N);case 9:e.push(h),s=8;break;case 8:c=u.next(),s=1;break;case 4:s=V.Apa(h)?3:9}}catch(t){x={error:t}}finally{for(f=2;1!==f;)if(2===f){try{for(l=2;1!==l;)2===l&&(c&&!c.done&&(P=u.return)&&P.call(u),l=1)}finally{for(p=2;5!==p;)switch(p){case 3:p=x?3:9;break;case 2:p=x?1:5;break;case 1:throw x.error}}f=1}}n=9}}catch(t){var j={error:t}}finally{for(d=2;1!==d;)if(2===d){try{for(b=2;1!==b;)2===b&&(a&&!a.done&&(I=r.return)&&I.call(r),b=1)}finally{for(m=2;5!==m;)switch(m){case 2:m=j?1:5;break;case 1:throw j.error}}d=1}}R=17;break;case 7:R=A.movieEntry?6:15;break;case 11:try{for(g=2;12!==g;)switch(g){case 2:y=(v=H.__values(i)).next(),g=1;break;case 5:w=y.value,_=A.headers[w],g=4;break;case 14:e.push(E),g=13;break;case 7:g=V.Bpa(E)?6:14;break;case 1:g=y.done?12:5;break;case 13:y=v.next(),g=1;break;case 3:N="Header fragments was an array buffer, is invalid type "+_.streamId,g=9;break;case 6:return N="Missing or invalid header data parts for stream "+E.Oa,M(N);case 8:E=V.Qma(_,_,_.fragments),g=7;break;case 9:return M(N);case 4:g=_.fragments instanceof ArrayBuffer?3:8}}catch(t){var C={error:t}}finally{for(k=2;1!==k;)if(2===k){try{for(S=2;1!==S;)2===S&&(y&&!y.done&&(O=v.return)&&O.call(v),S=1)}finally{for(T=2;5!==T;)switch(T){case 9:throw C.error;case 2:T=C?1:5;break;case 1:throw C.error;case 3:T=C?6:9}}k=1}}R=10;break;case 15:q.hP("mediacachelookup",{Y7:q.ro.time.ea()-F,q4:!0}),L(D),R=4;break;case 6:t=V.zna(A.movieEntry),e=[],R=13;break;case 3:R=K.ia(e)?9:8;break;case 10:R=A.data?20:17;break;case 8:A=e[U],R=7;break;case 9:L(),R=4;break;case 2:R=1}}),t=5)})},t=11;break;case 11:return e.prototype.Qmb=function(n){for(;;){var e=this;return this.ht?this.ht.then(function(){return new Promise(function(i){for(var t=2;1!==t;)2===t&&(e.oo.YX(P.Yq,n.toString(),function(t){for(var e=2;1!==e;)2===e&&(t&&0!==t.length&&1===t.length&&t[0]===n.toString()?i(!0):i(!1),e=1)}),t=1)})}):Promise.reject("Media cache is not enabled")}},e.prototype.jpb=function(t){var e,i,n;function r(t){for(var e=2;1!==e;)2===e&&(i.oo.delete(P.Yq,t),e=1)}for(e=2;4!==e;)2===e&&(i=this,n=t.toString(),this.oo.YX(P.Yq,[P.xFa,t].join("."),a),this.oo.YX(P.Yq,n,a),e=4);function a(t){for(var e=2;1!==e;)switch(e){case 2:t.map(r),e=1;break;case 4:t.map(r),e=9}}},e.prototype.oYb=function(i){for(var t,e=2;4!==e;)2===e&&((t=new n.Wh).on(this.oo,"mediacache",function(t){for(var e=2;4!==e;)switch(e){case 1:t.keys||t.items.map(function(t){return t.key}),e=5;break;case 2:e=t.keys||t.items?1:5;break;case 5:i.emit("mediacache",t),e=4}}),t.on(this.oo,"mediacache-error",function(t){for(var e=2;5!==e;)2===e&&(t.type="error",i.emit("mediacache",t),e=5)}),e=4)},e}function e(t,e,i){for(var n=2;12!==n;)switch(n){case 4:this.DF=t.sra||!1,this.hnb=t.N2a||!1,this.I=t,this.ro=e,n=7;break;case 2:this.H=new e.Console("MEDIACACHE","media|asejs"),this.rha=(t.$xa||t.aya)&&0<(t.EU||(e.options||{}).WN||0),this.Xlb=t.CBb||!1,n=4;break;case 7:this.af=i,this.ht=Promise.reject("Media cache has not been initiaized"),this.ht.catch(function(){}),n=12}}}(),e.XFa=i,t.xf(n.EventEmitter,i)},function(t,e,r){var a,o,s=r(10),u=[],c=!1;t.exports={vN:function(t,e,i){var n;return c?s.gd(i)&&(a.En||a.rH?setTimeout(function(){i(a)},0):u.push(i)):(c=!0,(n=r(127)).bW(t),o=new n.Console("MEDIACACHE","media|asejs"),a=new(r(401))(e,function(t){t&&o.warn("Failed to initialize MediaCache",t),s.gd(i)&&setTimeout(function(){i(a)},0),u.map(function(t){setTimeout(function(){t(a)},0)})})),a},n$b:function(t,i){a=new(r(401))(t,function(t,e){t&&o.warn("Failed to initialize MediaCache",t),s.gd(i)&&setTimeout(function(){i(e)},0)})}}},function(t,e,i){var r,a,o,s,u;function c(t){this.jr=t,this.context=t.context,this.T3a="NULLCONTEXT"===t.context}r=i(10),a=i(127),o=new a.Console("DISKCACHE","media|asejs"),s={context:"NULLCONTEXT",read:function(t,e,i,n,r){r("MediaCache is not supported")},remove:function(t,e,i){i("MediaCache is not supported")},create:function(t,e,i,n){n("MediaCache is not supported")},append:function(t,e,i,n){n("MediaCache is not supported")},query:function(t,e,i){i([])}},c.prototype.XF=function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=t[t.length-1];(t=t.slice(1,t.length-1)).push(function(t){i(null,t)});try{if(this.T3a)throw Error("Media Cache not supported");e.apply(this.jr,t)}catch(t){i(t)}},c.prototype.query=function(t,e,i,n){try{if(this.T3a)throw Error("Media Cache not supported");this.jr.query(t,e,function(t){i(null,t)},n)}catch(t){i(t)}},c.prototype.read=function(t,e,i,n,r){this.XF(this.jr.read,t,e,i,n,r)},c.prototype.remove=function(t,e,i){this.XF(this.jr.remove,t,e,i)},c.prototype.create=function(t,e,i,n){this.XF(this.jr.create,t,e,i,n)},c.prototype.append=function(t,e,i,n){this.XF(this.jr.append,t,e,i,n)},c.prototype.info=function(t){this.XF(this.jr.info,t)},c.prototype.validate=function(t){this.XF(this.jr.validate,t)},c.prototype.flush=function(t){this.XF(this.jr.flush,t)},c.prototype.clear=function(){this.jr.clear()},t.exports={Rxb:function(t){var e,i,n=t.K9b||"NRDMEDIADISKCACHE";0!==(u=t.EU||0)||r.ia(a.options)||r.ia(a.options.WN)||(u=a.options.WN),t=u;try{if(!(i=a.storage.sAb)||!r.Jh(i))throw o.warn("Failed to get disk store contexts from platform"),"Platform does not support disk store";if(i=i[n])o.warn("Disk store exists, returning"),e=new c(i);else{if(r.ia(a.storage)||!r.gd(a.storage.iTa)||a.options&&0===a.options.WN)throw o.warn("Platform doesn't support creating disk store contexts"),"Platform doesn't support creating disk store contexts";if(o.warn("Disk store context doesn't exist, creating with size "+t),!(i=a.storage.iTa({context:n,size:t,encrypted:!0,signed:!0}))||!i.valid)throw"Failed to create disk store context";e=new c(i)}}catch(t){o.warn("Exception creating disk store context - returning NullContext (noops)",t),e=new c(s)}return e},iFb:function(){return u},v4b:c}},function(t,e,o){var h,f,c,l,s,u,p,d,b;function m(){}function g(t,e,i,n,r){var a=h.gd(n)?n:m;this.Ov=t,this.Ag=i.ew,this.ty=0,this.bmb=i.mCb||"NONE",this.ey=h.ia(r)||h.Bb(r)?0:r,this.De={},this.dt=i.Nac||f.storage.AR,this.Hv=e,this.xL=s.create(this.Hv,i.Tyb*this.ey,this.Ov),this.on=this.addEventListener=b.addEventListener,this.removeEventListener=b.removeEventListener,this.emit=this.Va=b.Va,this.uNa=y(this,g.Le.REPLACE),this.Cmb=y(this,g.Le.gMa),this.QF,this.QF=i.rbb?o(883):o(884),this.Hv.query(this.dt,this.yq(""),function(t,r){var e;t?a(t):(e=this.xL.rna(),t=Object.keys(r).filter(function(t){return t!==e&&u.BN(t)}).map(this.wxa.bind(this)),this.Z9(t,function(t,n){Object.keys(n).map(function(t){var e,i=n[t];(this.De[u.j5(t)]=i).fva&&1<Object.keys(i.fva).length?(e=0,Object.keys(i.fva).forEach(function(t){r[this.yq(t)]&&h.Ba(r[this.yq(t)].size)&&(e+=r[this.yq(t)].size)}.bind(this)),t=u.j5(t),this.De[t].size=e):(t=u.j5(t),r[this.yq(t)]&&(this.De[t].size=r[this.yq(t)].size))}.bind(this)),v(this.Hv,this.dt,this.Ov,function(t,e){this.ty=e,t?a(t):a(null,this)}.bind(this))}.bind(this)))}.bind(this))}function v(t,e,i,n){var r=h.gd(n)?n:m;t.query(e,i,function(t,i){t?r(t):(t=Object.keys(i).reduce(function(t,e){return t+(i[e].size||0)},0),r(null,t))})}function y(u,c){return function(e,r,a,o,s){return function(t,i){var n;t?(r||u.Va(g.Le.Mf,{itemKey:e,error:t}),a(t)):(n={Ok:0,duration:0,items:[],time:f.time.now()},Object.keys(i.actions).map(function(t){var e=i.actions[t];t={key:u.wxa(e.E7),al:t},e.$?(n.Ok+=e.Ok,t.D7=e.Ok,h.Ba(e.duration)&&(n.duration+=e.duration)):t.error=e.error,n.items.push(t)}),t=h.gd(o)?o():0,0<s&&(n.jM=s-t),v(u.Hv,u.dt,u.Ov,function(t,e){t?a(t):(u.ty=e,n.An=u.Ag-e,r||u.Va(c,d.oXa(n)),a(null,n))}))}}}function w(t,e){return 0<e&&e<=t}h=o(10),f=o(127),c=o(249),e=o(86),l=new f.Console("MEDIACACHE","media|asejs"),s=o(879),u=o(402),p=o(128),d=o(250),b=o(403).EventEmitter,e({Le:{gMa:"writeitem",REPLACE:"replaceitem",Mca:"journalupdate",Mf:"mediacache-error"}},g),g.prototype.pGb=function(){return this.Ov},g.prototype.wxa=function(t){return t.slice(this.Ov.length+1)},g.prototype.lna=function(){return Object.keys(this.De).filter(function(t){return void 0===(t=u.Ima(this.De[t]))||t.JSa()<=0}.bind(this))},g.prototype.BGb=function(){return Object.keys(this.De).reduce(function(t,e){var i=this.De[e];return i&&i.creationTime<t.creationTime?{resourceKey:e,creationTime:i.creationTime}:t}.bind(this),{resourceKey:null,creationTime:f.time.now()}).Sbc},g.prototype.uFb=function(){var t;return"FIFO"===this.bmb&&(t=this.BGb()),t},g.prototype.Lzb=function(r){var a=h.gd(r)?r:m;this.bYa(function(t){var n,i=this.De,e=Object.keys(i).reduce(function(e,t){return(t=i[t]).resourceIndex&&Object.keys(t.resourceIndex).forEach(function(t){e.push(t)}),e},[]);(t=t.filter(function(t){return!u.BN(t)&&e.indexOf(t)<0}))&&0<t.length?(n=this,t=f.Promise.all(t.map(function(t){return new f.Promise(function(e,i){n.delete(t,function(t){t?i(t):e()})})})).then(function(){a(void 0,{Aua:!0})},function(t){a(t,{Aua:!1})}),d.Uw(t)):r(void 0,{Aua:!1})}.bind(this))},g.prototype.yUb=function(n,t,r){var a,o=h.gd(t)?t:m;t=this.yq(n),a=f.time.now(),this.Hv.read(this.dt,t,0,-1,function(t,e){var i;if(t)o(t);else if(e&&e.$&&e.value){h.gd(r)||(r=this.QF.uV(p.Zq.BE),u.BN(n)?r=this.QF.uV(p.Zq.L0):(t=this.De[n],!h.ia(t)&&h.Ba(t.resourceIndex[n])?(t=t.resourceIndex[n],h.ia(t)&&(t=p.Zq.BE),r=this.QF.uV(t)):l.warn("Metadata is undefined or does not contain a resource format for key",n,":",t)));try{i=r(e.value)}catch(t){return o(c.jK.Uq(t.message))}e={duration:f.time.now()-a},this.De[n]&&h.Ba(this.De[n].size)&&(e.Ky=h.Ba(this.De[n].size)?this.De[n].size:0),o(null,i,e)}else o(c.jK.Uq(e.error))}.bind(this))},g.prototype.read=function(t,e,i){this.yUb(t,e,i)},g.prototype.Z9=function(t,e,i){var o,s,n=h.gd(e)?e:m;"[object Array]"!==Object.prototype.toString.call(t)?n(c.jK.Uq("item keys must be an array")):(o={},s=[],t=f.Promise.all(t.map(function(a){return new f.Promise(function(n,r){var t;i&&!h.ia(i[a])&&(t=this.QF.uV(i[a])),this.read(a,function(t,e,i){t?((e={})[a]=t,r(e)):(o[a]=e,s.push({duration:i.duration,Ky:i.Ky}),n())},t)}.bind(this))}.bind(this))).then(function(){var t={};0<s.length&&(t=s.reduce(function(t,e){return h.Ba(e.duration)&&(t.duration+=e.duration),h.Ba(e.Ky)&&(t.Ky+=e.Ky),t},{duration:0,Ky:0})),n(null,o,t)},function(t){n(t)}),d.Uw(t))},g.prototype.write=function(t,e,i,n,r){var a,o,s;i=h.gd(i)?i:m,a=this.yq(t),o="function"==typeof r?r():0,s=p.joa(e),(s=this.QF.Sna(s)(e)).byteLength+this.ty>=this.Ag?i(c.DJ):w(s.byteLength+o,this.ey)?i(c.w1):this.xL.save(this.dt,a,e,this.Cmb(t,n,i,r,this.ey),s.byteLength)},g.prototype.replace=function(e,i,t,n,r){var a,o=h.gd(t)?t:m,s=this.yq(e),u=0;"function"==typeof r&&(u=r()),t=p.joa(i),a=this.QF.Sna(t)(i),(t=(this.De[e]||{}).size||0)<=0&&this.De[e]?this.FYa([e],function(t){l.trace("Replacing key",e,"which exists:",!!this.De[e],this.De[e]||void 0,"and has size",t,"with",i,"with size",a.byteLength,"plus _used",this.ty,"vs capacity",this.Ag),a.byteLength-t+this.ty>=this.Ag?o(c.DJ):w(a.byteLength-t+u,this.ey)?o(c.w1):this.xL.replace(this.dt,s,i,this.uNa(e,n,o,r,this.ey),a.byteLength)}.bind(this)):(l.trace("Replacing key",e,"which exists:",!!this.De[e],this.De[e]||void 0,"and has size",t,"with",i,"with size",a.byteLength,"plus _used",this.ty,"vs capacity",this.Ag),a.byteLength-t+this.ty>=this.Ag?o(c.DJ):w(a.byteLength-t+u,this.ey)?o(c.w1):this.xL.replace(this.dt,s,i,this.uNa(e,n,o,r,this.ey),a.byteLength))},g.prototype.GVb=function(t,e,r,a){var o=h.gd(e)?e:m;"[object Object]"!==Object.prototype.toString.call(t)?o(c.v1.Uq("items must be a map of keys to objects")):(e=f.Promise.all(Object.keys(t).map(function(n){return new f.Promise(function(i){this.replace(n,t[n],function(t,e){i(t?{error:t,Kq:n}:e)},!0,a)}.bind(this))}.bind(this))).then(function(t){var i,e,n;try{i=Number.MAX_VALUE,e=t.reduce(function(e,t){return t.error||(e.Ok+=t.Ok,h.Ba(t.duration)&&(e.duration+=t.duration),!h.ia(t.An)&&t.An<i&&(i=t.An),t.items.map(function(t){e.items.push({key:t.key,al:t.al,D7:t.D7,$Mb:t.$Mb,duration:t.duration})}),i<Number.MAX_VALUE&&(e.An=i)),e},{Ok:0,items:[],time:f.time.now(),duration:0}),0<this.ey&&(e.jM=this.ey-a()),n=t.filter(function(t){return!h.ia(t.error)}),n=d.sZa(n),r||(n?n.forEach(function(t){this.Va(g.Le.Mf,t)}.bind(this)):this.Va(g.Le.REPLACE,d.oXa(e))),o(n,e)}catch(t){o(t)}}.bind(this),function(t){r||this.Va(g.Le.Mf,t),o(t)}.bind(this)),d.Uw(e))},g.prototype.delete=function(t,e){var i=h.gd(e)?e:m;this.Hv.remove(this.dt,this.yq(t),function(t,e){t?i(t):e&&e.$?v(this.Hv,this.dt,this.yq(""),function(t,e){t?i(t):(this.ty=e,i())}.bind(this)):i(c.xeb.Uq(e.error))}.bind(this))},g.prototype.bYa=function(i){this.query("",function(t,e){t?(l.error("Failed to get keys",t),i([])):i(e)})},g.prototype.query=function(t,e){var i=h.gd(e)?e:m,n=this.xL.rna();this.Hv.query(this.dt,this.yq(t),function(t,e){t?i(t):i(null,Object.keys(e).filter(function(t){return t!==n}).map(this.wxa.bind(this)))}.bind(this))},g.prototype.yq=function(t){return this.Ov+"."+t},g.prototype.clear=function(t){var i=h.gd(t)?t:m;this.bYa(function(t){var e=f.Promise.all(t.map(function(e){return new f.Promise(function(t){e&&this.delete(e,function(){t()})}.bind(this))}.bind(this))).then(function(){i(t)},function(t){this.Va(g.Le.Mf,t),i([],t)}.bind(this));d.Uw(e)}.bind(this))},g.prototype.FYa=function(e,t){var n=h.gd(t)?t:m,r=(e||[]).map(function(t){return this.yq(t)}.bind(this));this.Hv.query(this.dt,this.Ov,function(t,i){t?(l.error("failed to get persisted size for keyset ",e,t),n(0)):(t=Object.keys(i).filter(function(t){return 0<=r.indexOf(t)}).reduce(function(t,e){return t+(i[e].size||0)},0),n(t))}.bind(this))},g.prototype.KEb=function(t){return this.xL.eXa(t)},g.prototype.constructor=g,t.exports=g},function(t,e,i){var f,y,w,n,_,E,k,r;function S(t,e,i){var b,m,c,h;function g(t,n,r,a){t.info.call(t,function(t,e){var i;if(t)a(t);else{try{i=e.values[this.context].entries[n][r].size}catch(t){i=-1}-1<i?a(null,i):this.validate(function(t,e){t?a(t):(e[r]&&(i=e[r].size),a(null,i))})}}.bind(t))}function v(t,e,i,n,r,a){n.qq(i.time,i);for(var o,s,u,c,h,f,l,p=i.time-864e5,d=n.Pw();d&&!isNaN(d.time)&&d.time<p;)d=n.nM(),b(0-(d.fa||0)),d=n.Pw();n=n.fp().map(function(t){return t.time+";"+t.fa}),o=t,s=e,u=Array.prototype.join.call(n,"|"),e=i.fa,c=i.time,f=a,(h=r)?h.actions||(h.actions={}):h={actions:{}},b(e),l=y.time.now(),e=new k(function(i,n){o.create(y.storage.AR,s,u,function(t,e){t?n(t):i(e)})}).then(function(i){i.$?g(o,y.storage.AR,s,function(t,e){t?f(t):(m(e),b(e),h.actions[S.h_.Mca]={$:!0,time:c,Ok:e,E7:s,B6a:i,duration:y.time.now()-l},h.An=i.An,f(null,h))}):(h.actions[S.h_.Mca]={$:!1,E7:s,error:i.error},f(null,h))},function(t){f(t)}),_.Uw(e)}if(!t.jr.valid)return r;this.QMa=f.ia(e)||f.Bb(e)?0:e,this.Jfa=t,this.pga=this.kS=0,this.cT=new n,this.sob=i||"default",this.ZK=this.sob+".NRDCACHEJOURNALKEY",b=function(t){return isNaN(t)||(this.kS+=t),this.kS}.bind(this),m=function(t){return isNaN(t)||(this.pga+=t),this.pga}.bind(this),this.rna=function(){return this.ZK},this.save=function(t,e,i,n){var o,s,u,c,h,f,l,p,d,r=y.time.now();o=this.Jfa,s=this.ZK,u=t,c=e,i=i,h=0<=this.QMa,f=this.cT,l=r,p=n,d=y.time.now(),o.append(u,c,i,function(t,r){var a;t?(E.error("Failed to save item "+c,t),p(t)):r.$?(a=r.An,g(o,u,c,function(t,e){var i,n;t?p(t):(t={time:l,fa:e||0},i={An:a,actions:{}},n=y.time.now()-d,i.actions[S.h_.Gjb]={$:!0,time:l,Ok:e,E7:c,B6a:r,duration:n},h?v(o,s,t,f,i,p):(b(e),p(null,i)))})):p(w.v1.Uq(r.error||"Failed to save item"))})},this.replace=function(t,e,i,n){var o,s,u,c,h,f,l,p,d,r=y.time.now();o=this.Jfa,s=this.ZK,u=t,c=e,i=i,h=0<=this.QMa,f=this.cT,l=r,p=n,d=y.time.now(),o.create(u,c,i,function(t,r){var a;t?E.error("Failed to replace item",c,t):r.$?(a=r.An,g(o,u,c,function(t,e){var i,n;t?p(t):(t={time:l,fa:e||0},i={An:a,actions:{}},n=y.time.now()-d,i.actions[S.h_.REPLACE]={$:!0,time:l,Ok:e,E7:c,B6a:r,duration:n},h?v(o,s,t,f,i,p):(b(e),p(null,i)))})):p(w.v1.Uq(r.error||"Failed to create item"))})},this.eXa=function(t){var e,i=this.kS;t-=864e5;for(var n=this.cT.fp(),r=0;r<n.length;r++)(e=n[r]).time<t&&!isNaN(e.fa)&&(i-=e.fa);return i},h=(c=this).Jfa,c.kS=0,h.read(y.storage.AR,c.ZK,0,-1,function(t,e){var i,n,r,a=[],o=0,s=!0;if(t)E.error("Failed to compile records",t);else if(e.$){t=String.fromCharCode.apply(null,new Uint8Array(e.value)),e=(t=String.prototype.split.call(t,"|")).reduce(function(t,e){return t+(e.length+40)},0),b(e),a=t.map(function(t){return t=t.split(";"),{time:Number(t[0]),fa:Number(t[1])}});try{if(!isNaN(a.reduce(function(t,e){return t+e.fa},0))){s=!1;for(var u=y.time.now()-864e5;o<a.length;o++)(i=a[o]).time<u||(c.cT.qq(i.time,i),b(i.fa))}}catch(t){}}s&&(r=c,(n=h)&&f.gd(n.remove)&&n.jr.valid&&n.remove(y.storage.AR,r.ZK,function(t,e){if(t)E.error("Failed to delete old journal key",t);else try{e&&(f.ia(e.error)||e.error.some(function(t){return"NFErr_FileNotFound"===t.a$b}))&&v(n,r.ZK,{time:0,fa:0},r.cT,0,function(){})}catch(t){}}))})}f=i(10),y=i(127),w=i(249),n=i(880),e=i(86),_=i(250),E=new y.Console("DISKWRITEMANAGER","media|asejs"),k=y.Promise,e({h_:{Gjb:"saveitem",REPLACE:"replaceitem",Mca:"journalupdate"}},S),r={save:function(t,e,i,n){n(w.tFa)},replace:function(t,e,i,n){n(w.tFa)},rna:function(){return""},eXa:function(){return 0}},S.prototype.constructor=S,t.exports={create:function(t,e,i){return new S(t,e,i)},D6b:r}},function(t){function e(t){if(!(this instanceof e))return new e(t);if(void 0===t)this.cn=function(t,e){return t<=e};else{if("function"!=typeof t)throw Error("heap comparator must be a function");this.cn=t}this.Bp=[]}function h(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}e.prototype.clear=function(){this.Bp=[]},e.prototype.qq=function(t,e){this.Bp.push({priority:t,value:e}),t=this.Bp,e=this.cn;for(var i=t.length-1,n=0===i?null:Math.floor((i-1)/2);null!==n&&e(t[i].priority,t[n].priority);)h(t,i,n),n=0===(i=n)?null:Math.floor((i-1)/2)},e.prototype.remove=function(){var t;if(0!==this.Bp.length)return t=this.Bp[0],h(this.Bp,0,this.Bp.length-1),this.Bp.pop(),function t(e,i){var n=e.Bp,r=e.cn,a=2*i+1,o=2*i+2,s=n[i],u=n[a],c=n[o];u&&r(u.priority,s.priority)&&(!c||r(u.priority,c.priority))?(h(n,i,a),t(e,a)):c&&r(c.priority,s.priority)&&(h(n,i,o),t(e,o))}(this,0),t.value},e.prototype.Pw=function(){if(0!==this.Bp.length)return this.Bp[0].value},e.prototype.enqueue=e.prototype.qq,e.prototype.nM=e.prototype.remove,e.prototype.n7=function(){return 0===this.Bp.length},e.prototype.fp=function(){return this.Bp.map(function(t){return t.value})},t.exports=e},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ad?(this.Ad={},this.Ad[t]=[e],!0):void 0===(i=this.Ad[t])?(this.Ad[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ad?this.Ad[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ad&&(void 0!==(i=this.Ad[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ad[t]:i.splice(e,1),!0)))},Va:i,emit:i,removeAllListeners:function(t){return this.Ad&&(void 0===t?delete this.Ad:delete this.Ad[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){var n,r=i(10),a=i(128),o={};o[a.Zq.BE]=function(t){return t},o[a.Zq.f1]=function(t){return t=t||new ArrayBuffer(0),String.fromCharCode.apply(null,new Uint8Array(t))},o[a.Zq.L0]=function(t){var e=t||new ArrayBuffer(0);t="",e=new Uint8Array(e);for(var i=0;i<e.byteLength;i++)t+=String.fromCharCode(e[i]);return JSON.parse(t)},(n={})[a.Zq.BE]=function(t){return t},n[a.Zq.f1]=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e},n[a.Zq.L0]=function(t){return r.ia(t)||r.Bb(t)?t:n[a.Zq.f1](JSON.stringify(t))},t.exports={uV:function(t){return o[t]||o[a.Zq.BE]},Sna:function(t){return n[t]||n[a.Zq.BE]}}},function(t,e,i){function n(t){return t}function r(){return n}i(10),t.exports={uV:r,Sna:r}},function(t,e,i){var c;function h(t,e){return t.length>e.length?1:e.length>t.length?-1:0}c=i(128),t.exports={rAb:function a(o,s){var u,t,e=[];return c.Jh(s)?((t={})[o]=u={},e.push(t),e=Object.keys(s).reduce(function(t,e){var i,n=s[e],r={};return c.j7(n)?(r[i=o+".__embed__."+e]=n,t.push(r)):c.Jh(n)?(n=a(i=o+".__sub__."+e,n),u[e]=n[0][i],t=t.concat(n.slice(1))):u[e]=n,t},e)):((t={})[o]=s,e.push(t)),e},hKb:function(t){var e,i,n,r=Object.keys(t).map(function(t){return t.split(".")});r.sort(h),i=(e=r[0]).length,e=t[e.join(".")];for(var a=1;a<r.length;a++)for(var o=!1,s=!1,u=e,c=i;c<r[a].length;c++)switch(n=r[a][c]){case"__metadata__":break;case"__sub__":s=!0;break;case"__embed__":o=!0;break;default:s?(u=u[n],s=!1):o&&(u[n]=t[r[a].join(".")],o=!1)}return e},OKb:function(t){return t&&(0<=t.indexOf("__sub__")||0<=t.indexOf("__embed__"))}}},function(t,e,i){var s,u;s=i(128),u=i(86),t.exports={Wvb:function(t){var e,i,n=u(t,{});n=function i(n,r,a){return Object.keys(n).forEach(function(t){var e;s.j7(n[t])?(e=n[t],r.push(e),n[t]={j7:!0,offset:a.yka,byteLength:e.byteLength},a.yka+=e.byteLength):s.Jh(n[t])&&i(n[t],r,a)}),n}(n,t=[],{yka:0}),n=JSON.stringify(n),e=new ArrayBuffer(n.length+4),(i=new DataView(e)).setUint32(0,n.length);for(var r=4,a=0,o=n.length;a<o;a++)i.setUint8(r,n.charCodeAt(a)),r++;return t=[e].concat(t),function(){var t=Array.prototype.concat.apply([],arguments),e=t.reduce(function(t,e){return t+e.byteLength},0),i=new Uint8Array(e);return t.reduce(function(t,e){return i.set(new Uint8Array(e),t),t+e.byteLength},0),i.buffer}.apply(null,t)},Vvb:function(t){for(var e=new DataView(t,0,4).getInt32(0),i=new Uint8Array(t,4,e),n="",r=0;r<i.byteLength;r++)n+=String.fromCharCode(i[r]);return e=4+e,function n(r,a,o){return Object.keys(r).forEach(function(t){var e,i;s.Jh(r[t])&&(r[t].j7?(e=r[t],i=o+e.offset,r[t]=a.slice(i,i+e.byteLength)):r[t]=n(r[t],a,o))}),r}(n=JSON.parse(n),t,e)}}},function(t,e,i){var n,f,l,a,p;function o(t){return{mediaType:t.mediaType,streamId:t.Oa,movieId:t.J,bitrate:t.bitrate,location:t.location,serverId:t.Md,saveToDisk:!0,offset:t.offset,bytes:t.fa,timescale:t.S,frameDuration:t.stream.sa&&t.stream.sa.vc,encrypted:t.Tk,initSegments:1<t.Wg.length?t.Wg.map(function(t){return{fi:t.Qd,s:t.data.byteLength,e:!!t.Tk}}):void 0}}_esm(e),e.Apa=e.Bpa=e.d0a=e.uYa=e.UXa=e.WXa=e.wna=e.Ana=e.zna=e.Pma=e.Qma=e.sFa=void 0,n=i(2).__importStar(i(10)),f=i(888),l=i(379),a=i(9),p=i(22),e.sFa={xFa:"movieEntry",Qfb:"header",gda:"metadata",qgb:"headerData",w5b:"headerMetadata",Hfb:"sizes",Gfb:"durations",ACa:"fragments",whb:"response",Yq:"billboard",PE:{lifespan:259200}},e.Qma=function(t,e,i){var n,r=e.headerData;return i&&e.sizes instanceof ArrayBuffer&&e.durations instanceof ArrayBuffer&&(n={jl:i.startTicks,offset:i.offset,S:i.timescale,sizes:new Uint32Array(e.sizes),vd:new Uint32Array(e.durations)}),{ad:!0,mediaType:t.mediaType,J:t.movieId,Oa:t.streamId,bitrate:t.bitrate,location:t.location,Md:t.serverId,fa:t.bytes,offset:t.offset,Coa:r,W6:t.initSegments,Tk:t.encrypted,S:t.timescale,sa:t.frameDuration,Ph:t.saveToDisk,U:n}},e.Pma=function(t,e){var i,n,r;return e=e.response,i=t.startTicks,n=t.durationTicks,void 0!==i&&void 0!==n&&(r=i+n),{ad:!1,mediaType:t.mediaType,J:t.movieId,Oa:t.streamId,bitrate:t.bitrate,location:t.location,Md:t.serverId,fa:t.bytes,offset:t.offset,response:e,S:t.timescale,Wa:t.startTicks,Lt:n,Ph:t.saveToDisk,ob:r}},e.zna=function(t){return{priority:t.priority,J:t.movieId,headers:{},pN:0,qU:0,RZa:0,Ph:t.saveToDisk,ec:t.stats,rw:t.firstSelectedStreamBitrate,Kz:t.initSelectionReason,bD:t.histDiscountedThroughputValue,Mo:t.histTdigest,Lo:t.histAge,xo:void 0}},e.Ana=function(o,s,u,t,c){var e,h={headers:{},data:{}};return t.forEach(function(t){var e,i,n=t.mediaType;if(n=c&&c.ww(n,t.Oa),e=[],t.ad)if(!Array.isArray(t.W6)||t.W6.length<2)e.push({Qd:0,data:t.Coa});else for(var r=0,a=0;a<t.W6.length;++a)i=t.W6[a],e.push({Qd:i.fi,data:t.Coa.slice(r,r+i.s),Tk:i.e}),r+=i.s;n?(t.U&&n.h9(e,t.S,t.sa?new p.T(t.sa,t.S):void 0,t.U),t.ad&&n&&n.je?(void 0===h.headers&&(h.headers={}),h.headers[t.Oa]=new l.u_(n,{fa:t.fa,offset:t.offset,Wg:e,Tk:t.Tk},s)):t.response instanceof ArrayBuffer&&void 0!==n.U&&void 0!==t.Wa&&void 0!==t.S&&void 0!==t.ob&&(void 0!==(e=n.U.o5(new p.T(t.Wa,t.S).Y))&&(n=new f.Oya(n,{S:t.S,Wa:t.Wa,ob:t.ob,index:e.index,offset:t.offset,fa:t.fa},t.response,u,o,s),void 0===h.data&&(h.data={}),h.data[t.Oa]||(h.data[t.Oa]=[]),h.data[t.Oa].push(n)))):s.warn("Failed to load data from disk because the AseStream was missing from the stream map streamId: "+t.Oa+" movieId: "+t.J)}),n.ia(h.data)||(e=h.data,Object.keys(e).forEach(function(t){e[t].sort(function(t,e){return t.Wa-e.Wa})})),h},e.wna=function(t){return{mediaType:t.mediaType,streamId:t.Oa,movieId:t.J,bitrate:t.bitrate,location:t.location,serverId:t.Md,saveToDisk:!0,offset:t.offset,bytes:t.fa,timescale:t.S,startTicks:t.Wa,durationTicks:t.Lt}},e.WXa=o,e.UXa=function(t){var e,i,n,r=o(t);return t.stream.je&&t.stream&&t.stream.U&&(e={timescale:t.stream.U.S,startTicks:t.stream.U.jl,offset:t.stream.U.Sd(0)},n=(i=t.stream.U.cx).sizes.buffer,i=i.vd.buffer),{mediaType:r.mediaType,streamId:r.streamId,movieId:r.movieId,bitrate:r.bitrate,location:r.location,serverId:r.serverId,saveToDisk:!0,offset:r.offset,bytes:r.bytes,timescale:r.timescale,frameDuration:r.frameDuration,headerData:a.AC(t.Wg.map(function(t){return t.data})),initSegments:r.initSegments,encrypted:t.Tk,fragments:e,sizes:n,durations:i}},e.uYa=function(t){return{priority:t.priority,movieId:t.J,saveToDisk:t.Ph,firstSelectedStreamBitrate:t.rw,initSelectionReason:t.Kz,histDiscountedThroughputValue:t.bD,histTdigest:t.Mo,histAge:t.Lo}},e.d0a=function(t){return!n.has(t,"startTicks")},e.Bpa=function(t){return!(t.Coa&&t.S&&t.U&&void 0!==t.U.jl&&void 0!==t.U.offset&&void 0!==t.U.vd&&t.U.vd.length&&void 0!==t.U.sizes&&t.U.sizes.length)},e.Apa=function(t){return void 0===t.fa||void 0===t.offset||void 0===t.S||void 0===t.Wa||void 0===t.Lt}},function(t,e,i){var n,r,o,s;function a(t,e,i,n,r,a){return n=s.call(this,t,e,n,r,a)||this,e.fa=i.byteLength,o.Rm.xb(n,t,e),n.lL=i,n.llb=e.fa,n}_esm(e),e.Oya=void 0,n=i(2),r=i(9),t=i(42),o=i(101),s=i(234).AJ,n.__extends(a,s),Object.defineProperties(a.prototype,{ad:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{ku:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{rf:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{status:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{uj:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{ph:{get:function(){},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{active:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{complete:{get:function(){return!0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{response:{get:function(){return this.lL},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{OMb:{get:function(){return!0},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{readyState:{get:function(){},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{url:{get:function(){return"disk://"},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{aborted:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{HM:{get:function(){return""},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{wua:{get:function(){return!1},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{bytesReceived:{get:function(){return this.llb},enumerable:!1,configurable:!0}}),a.prototype.iu=function(){return!0},a.prototype.eG=function(t){return this.ef=t.appendBuffer(this.response,r.vq(this)),{$:this.ef}},a.prototype.mi=function(){return-1},a.prototype.abort=function(){return!0},a.prototype.ed=function(){},a.prototype.daa=function(){return!1},i=a,e.Oya=i,t.xf(o.Rm,i)},function(t,e,s){var d,b,i,m,u,r,g,v,a,c;_esm(e),e.uKa=void 0,d=s(2),t=s(17),b=s(67),i=d.__importDefault(s(6)),m=s(16),u=s(251),r=s(9),g=s(5),v=s(957),a=s(356),(c=new i.default.Console("ASEJS","media|asejs")).trace.bind(c),t=function(o){for(var t=2;17!==t;)switch(t){case 2:d.__extends(p,o),Object.defineProperties(p.prototype,{Qb:{get:function(){return this.Ka.Qb},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{In:{get:function(){return this.Ka.In},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Kh:{get:function(){return this.Ka.Kh},enumerable:!1,configurable:!0}}),p.prototype.xb=function(t,e,i,n,r,a,o,s){for(var u=2;5!==u;)2===u&&(this.Ka.Sva({audio:t,video:e,ria:o,hya:s},{Y:n,fa:r}),this.Ka.open(this.config,this.mE),u=5)},t=9;break;case 9:p.prototype.OY=function(t,e,i){for(var n=2;1!==n;)2===n&&(this.Ka.Sva({total:t},{Y:e,fa:i}),n=1)},p.prototype.createSession=function(t,e,i,n,r,a,o,s,u,c){for(var h,f,l=2;19!==l;)switch(l){case 6:u=f.Ca.qa[f.Ca.Yd].Jb,f=[this.JV(h,f.Ca,i,u)],c[1]&&f.push(this.JV(h,c[1].Ca,i,u)),l=12;break;case 2:this.console.trace("creating session"),this.Ka.Qb.reset(),h=Number(t.movieId),l=4;break;case 4:u=this.t6(h,r.ba),this.MA[u]={mja:function(){},ba:r.ba,equals:function(t){return!(t.W!==h||r.ba!==t.ba&&t.ba&&r.ba)},Ot:!1,hv:Promise.resolve({oa:t,ii:!!n.ii,Bd:m.s8(!!n.GT,!!n.sE),config:s}),W:h},l=9;break;case 9:s.jz&&this.Ka.aE(this.MA[u],{ds:r.ds,ba:r.ba,HC:r.HC}),f=(c=this.qyb(h,t,s.M5a,s,r,c||p.Bzb,n))[0],l=6;break;case 12:return g.assert(void 0===n.Ha,"endPts is not supported"),this.P7=new v.vKa(this.console,this,t,c,e,f,n,r,a,o,s),s.wr||s.RH||this.Ly(),this.P7}},t=7;break;case 20:return p.prototype.t6=function(t,e){return a000.Z4L(5),a000.J4L(t,e,"-")},p.Bzb="s0",p;case 7:p.prototype.JV=function(t,e,i,n){for(;;)return e.qa[e.Yd].Jb===n?(t=a.gka(e,t,r.T.Eb(i)),g.assert(t,"invalid start position relative to playgraph"),t):{xa:e.Yd,offset:r.T.Gb}},p.prototype.lx=function(a,o,s){return d.__awaiter(this,void 0,void 0,function(){var n,r;return d.__generator(this,function(t){for(var e,i=2;3!==i;)switch(i){case 2:i=0===(e=t.label)?1:9;break;case 1:return r=this.Cn.bind(this,s.ba),n=this.t6(a,s.ba),r=r(a),g.assert(void 0!==r,"Can not update viewable. Viewable not found "+n),[4,r.hv];case 5:return r=t.bd(),this.MA[n]={mja:function(){},ba:s.ba,equals:function(t){return!(t.W!==a||s.ba!==t.ba&&t.ba&&s.ba)},Ot:!1,hv:Promise.resolve({oa:o,ii:r.ii,Bd:r.Bd,config:r.config}),W:a},[4,this.Ka.lx(this.MA[n])];case 4:return t.bd(),[2];case 9:i=1===e?5:8;break;case 8:i=2===e?4:3}})})},p.prototype.qyb=function(t,e,n,r,i,a,o){for(var s,u,c,h,f=2;7!==f;)switch(f){case 8:return h;case 2:var l,p=this;(l=e.choiceMap)?(t=b.xC(l,{config:r}),this.console.trace("Generated playgraph from choicemap.")):t=b.NI(t,a,o.GT||o.sE?o.sE?["video"]:["audio"]:["audio","video"]),f=5;break;case 9:Object.keys(s).forEach(function(t,e){for(var i=2;9!==i;)switch(i){case 2:a000.Z4L(20),g.assert(a000.J4L(0,e),"Currently only one parallel graph is supported"),e=s[t],g.assert(e.Bd&&1===e.Bd.length&&"audio"===e.Bd[0],"Currently parallel graph can only be media type [audio]"),i=4;break;case 4:t=b.xC(l,d.__assign(d.__assign({},s[t]),{config:r})),h.push(p.Ka.aG(t,n,u,{Cn:c})),i=9}}),f=8;break;case 4:f=l&&l.HRb?3:8;break;case 3:s=l.HRb,f=9;break;case 5:u=Object.create(r,{iz:{value:i.HC},DDb:{value:i.HL}}),c=this.Cn.bind(this,i.ba),h=[this.Ka.aG(t,n,u,{Cn:c})],f=4}},p.prototype.Wub=function(){for(var t=2;1!==t;)switch(t){case 4:this.Qb.lP(1),t=2;break;case 2:this.Qb.lP(null),t=1}},t=12;break;case 12:p.prototype.Cn=function(t,e){return this.MA[this.t6(e,t)]},p.prototype.zVb=function(t){for(var e,i,n=2;13!==n;)switch(n){case 2:this.Wub(),e=this.t6(t.W,t.ba),(i=this.MA[e])&&(i.Ot=!0),this.Ka.Qu(t.pa),t.Fa&&this.Ka.LO(t.Fa),t.Ig&&this.Ka.Qu(t.Ig),n=8;break;case 8:t.vj&&this.Ka.LO(t.vj),t===this.P7&&delete this.P7,this.Ka.Kua(this.MA[e]),delete this.MA[e],n=13}},p.prototype.Nb=function(){for(var t=2;9!==t;)switch(t){case 4:g.assert(void 0===this.P7,"Attempt to destruct ShimManager with latest session still defined"),this.Ka.close(),t=9;break;case 2:g.assert(0===this.Ka.OD.length,"Attempted to destruct ShimManager with playgraphs present in ASE"),g.assert(0===this.Ka.L5a.length,"Attempted to destruct ShimManager with players present in ASE"),g.assert(0===Object.keys(this.MA).length,"Attempted to destruct ShimManager with session config active"),t=4}},t=20}function p(t,e,i,n){for(var r,a=2;11!==a;)switch(a){case 14:return r.Ka=u.bH(),r;case 8:t=s(404),r.console=c,r.console.trace("nf-ase shim version:",t,"DEBUG:",!1),a=14;break;case 2:(r=o.call(this)||this).config=t,r.Ly=e,r.Lp=i,r.mE=n,r.MA={},a=8}}}(t.EventEmitter),e.uKa=t},function(t,e,u){var c,h,a,f,o,s,l,n,p,d,b,m,g,v,i,y,w,r,_,E,k,S,T,A,O,I,x,P,R,N,j,C;function L(t){this.H=t,this.events=new h.EventEmitter,this.$c=a.Os.CLOSED,this.Vv=[],this.RY=[],this.VS=[],this.Cp=[],this.CMa={},this.G2={},this.Qwa=a.lQ.default,this.Hpb=new r.IB({wu:this,source:"engine",xD:10,console:t})}_esm(e),e.Dya=void 0,c=u(2),h=u(17),a=u(354),f=u(222),o=u(891),s=u(218),l=u(16),u(213),n=u(892),p=u(407),d=u(932),b=u(400),m=u(25),g=u(5),v=u(385),i=u(933),y=u(934),w=u(935),r=u(118),_=u(253),E=u(936),k=u(72),S=u(252),T=u(9),A=c.__importDefault(u(6)),O=u(937),I=u(938),x=u(939),P=u(940),R=u(54),N=u(415),j=u(951),C=u(952),Object.defineProperties(L.prototype,{Gu:{get:function(){return g.assert(this.my),this.my},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{state:{get:function(){return this.$c},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{L5a:{get:function(){return this.VS},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{OD:{get:function(){return this.Cp.map(function(t){return t.Ca})},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{PSb:{get:function(){return this.Cp},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{Qb:{get:function(){return this.cJ(),this.Sy.Qb},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{In:{get:function(){return this.cJ(),this.Sy.In},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{Kh:{get:function(){return this.cJ(),this.Sy.Kh},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{z2b:{get:function(){return this.Vv.length},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{E3:{get:function(){return this.CMa},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{QI:{get:function(){return this.G2},enumerable:!1,configurable:!0}}),Object.defineProperties(L.prototype,{tOb:{get:function(){return this.YNa||(this.YNa=this.Dtb())},enumerable:!1,configurable:!0}}),L.prototype.open=function(t,e,i,n){var r=this;return this.$c!==a.Os.OPEN&&(this.I=t,this.Ls=new k.XR(new S.k1({Zk:!0,currentTime:function(){return T.T.Eb(A.default.time.ea())},speed:1}),this.H,"Engine Scheduler"),this.sNa=new o.SCa(this.H,t),this.$B=new d.TJa(this.C7.bind(this),t),this.Sy=s.GJ.DYa(t,e),this.$c=a.Os.OPEN,t=Object.create(t,{jrb:{value:t.RH||t.wr}}),this.my=N.EV(t),i&&this.my.TXb(i),n&&this.my.Zva(n),this.N5a=new j.cJa({Pk:function(){r.$c!==a.Os.CLOSED&&r.$B.Pk("playgraphOpportunity")}}),this.ZNa=new x.mGa(function(){return r.f6()},function(){return r.g6().global},this.H),this.wyb(),!0)},L.prototype.aG=function(t,e,i,r,n){var a,o,s=this;return void 0===n&&(n=!0),this.cJ(),a=Object.create(i,{rP:{value:this.QI}}),n&&(i=this.Gu.Nub(t,a))?(i.cbb(e),i):(t=[t,e,a,L.vPb++,this.Qb,this.WO.bind(this,r),function(t,e){var i,n=r.Cn(t);return null==(t=null===(i=m.ig(s.Vv,function(t){return t.ZL.equals(n)}))||void 0===i?void 0:i.P)?void 0:t.yn(a,e)},function(t){return s.$B.Pk(t)},n?this.Gu.Mub.bind(this.Gu):function(){},this.f6.bind(this)],(o=this.I.wla?(e=u(953)).hTa.apply(e,c.__spread([{}],t)):new(p.w_.bind.apply(p.w_,c.__spread([void 0],t)))).Ji(new y.KKa(o)),o.Ji(new w.dLa(o.Cu)),o.D1a.Ji(new P.aza(o)),this.py.OO.forEach(function(t){return o.Ji(t)}),this.N5a.aG(o),(t=new h.Wh).on(o.events,"requestsPruned",this.YVb.bind(this)),t.on(o.events,"weightUpdated",this.Psa.bind(this)),t.on(o.events,"underflow",this.sk.bind(this,o)),this.Cp.push({Ca:o,Xg:t,hY:0}),this.Psa(),o)},L.prototype.sk=function(t){null!=(t=this.ZNa.QDb(t))&&t.F4||this.Gu.reset()},L.prototype.Qu=function(e){this.N5a.Qu(e),this.Cp=this.Cp.filter(function(t){return t.Ca!==e||(t.Xg.clear(),!1)}),e.Nb(),this.Psa()},L.prototype.JPa=function(t,e){var i;return this.cJ(),i=e.Bd,t=new n.Wya(t,void 0===i?[0,1]:i,c.__assign({rP:null!==(i=null!==(i=e.rP)&&void 0!==i?i:this.G2)&&void 0!==i?i:{}},e)),this.VS.push(t),t},L.prototype.LO=function(e){this.cJ(),this.VS=this.VS.filter(function(t){return t!==e}),e.Nb()},L.prototype.Sva=function(t,e){this.CMa=t,this.G2=e,this.YNa=void 0},L.prototype.aE=function(e,t){var i=null===(i=m.ig(this.Vv,function(t){return t.ZL.equals(e)}))||void 0===i?void 0:i.P;i?i.aE(c.__assign(c.__assign({},t),{Kn:this.jsa.bind(this)})):this.RY.push({Jbb:e,t9a:t})},L.prototype.Kua=function(e){this.RY=this.RY.filter(function(t){return!t.Jbb.equals(e)})},L.prototype.close=function(){this.$c!==a.Os.CLOSED&&(this.oVb(),g.assert(0===this.Vv.length,"Unexpected viewable lease after Playgraph destruction."),this.nVb(),this.RY=[],delete this.Sy,this.$c=a.Os.CLOSED,this.Ls.Nb())},L.prototype.aYb=function(t){this.Qwa=t,this.$B.Pk("streamingModeChanged")},L.prototype.Ho=function(){return this.py.Ho()},L.prototype.wyb=function(){this.py=new R.wea(this.I),this.py.Ji(new O.kCa(this)),this.py.Ji(new E.VJa(this.Qb,this.$B)),this.py.Ji(new i.gCa(this.Qb)),this.py.Ji(new _.HB(this.Hpb)),this.py.Ji(new _.HB(this.$B.tq)),this.py.Ji(new _.HB(this.sNa.zi)),this.py.Ji(new _.HB(this.ZNa.zi))},L.prototype.jsa=function(){},L.prototype.lx=function(r){return c.__awaiter(this,void 0,void 0,function(){var e,i,n;return c.__generator(this,function(t){switch(t.label){case 0:return g.assert(r,"ase.updateViewable(): Viewable config not found."),e=m.ig(this.Vv,function(t){return!0!==t.ZL.Ot&&t.ZL.equals(r)}),g.assert(e,"ase.updateViewable(): Viewable entry not found."),[4,e.tE];case 1:return n=t.bd(),n=(i=n).lx,[4,r.hv];case 2:return n.apply(i,[t.bd()]),[2]}})})},L.prototype.WO=function(t,i){var n,e=this,r=t.Cn(i);return g.assert(r,"ase.requestViewable(): Viewable config not found."),(n=m.ig(this.Vv,function(t){return!0!==t.ZL.Ot&&t.ZL.equals(r)}))||(n={ZL:r,tE:c.__awaiter(e,void 0,void 0,function(){var e;return c.__generator(this,function(t){switch(t.label){case 0:return[4,r.hv];case 1:return e=t.bd(),e=this.oU(i,r,e),[2,n.P=e]}})}),P:void 0,dMb:new v.BEa(function(t){t()&&e.i7a(n)},T.wq(A.default,this.H,""+i))},this.Vv.push(n)),{get P(){return null==n?void 0:n.P},tE:n.tE,Q7:n.dMb.vy()}},L.prototype.i7a=function(e){var t,i;g.assert(e,"expected viewableEntry to exist"),t=e.P,i=e.tE,t?t.Nb():i.then(function(t){t.Nb()}),this.Vv=this.Vv.filter(function(t){return t!==e})},L.prototype.oU=function(t,e,i){var n,r,a,o,s;function u(t){n.events.emit("logdata",t)}return(n=this).cJ(),r=i.oa,a=i.ii,o=void 0===(o=i.Bd)?l.zf:o,i=i.config,s=[new b.oda(0),new b.oda(1)],r={oa:r,config:i,ii:a,Bd:o,F5:void 0,Qb:this.Sy.Qb,Kh:this.Sy.Kh,EVa:{Pr:function(){return n.$B.Pk("networkFailureReset")},Nh:this.Nh.bind(this,t),Fn:this.Fn.bind(this,t),Ln:u},QZa:{Ln:u,IV:void 0,SC:function(t){return s[t]},l7:function(){return!0},Gf:void 0,Ol:void 0,qh:void 0,aD:void 0},VO:{yy:this.yy.bind(this),qI:this.qI.bind(this)},QI:this.G2,Pb:0,Wo:void 0,L2a:{xpa:!1,t0a:!1},iX:function(){}},t=new f.zba(t,r),i.jz&&(r=(null===(i=m.ig(this.RY,function(t){return t.Jbb.equals(e)}))||void 0===i?void 0:i.t9a)||{},this.Kua(e),t.aE(c.__assign(c.__assign({},r),{Kn:this.jsa.bind(this)}))),t},L.prototype.C7=function(){var t,e;return g.assert(this.state===a.Os.OPEN),t=this.g6(),e=this.hN(),this.sNa.u4a(t,e)},L.prototype.hN=function(){var e=this,t=null!==(i=this.I.nTb)&&void 0!==i?i:this.Cp.every(function(t){return!t.Ca.E6}),i=m.flatten(this.Cp.map(function(e){return e.Ca.hN().map(function(t){return e.Ca.E6||1===e.hY||(t.gH=e.hY),t})}));return this.Qwa===a.lQ.disabled?i=[]:this.Qwa===a.lQ.gNb&&(i=i.filter(function(t){return e.I.gra>=t.Cs-t.Er})),t||(t=i.filter(function(t){return 1===(null!==(t=t.gH)&&void 0!==t?t:1)})).length&&(i=t),t=this.Vv.reduce(function(t,e){return e.P?c.__spread(t,e.P.hN()):t},[]),m.flatten(c.__spread(i,t))},L.prototype.cJ=function(){if(this.$c===a.Os.CLOSED)throw Error("Engine CLOSED")},L.prototype.oVb=function(){var t,e;try{for(var i=c.__values(this.Cp),n=i.next();!n.done;n=i.next())(e=n.value).Xg.clear(),this.Qu(e.Ca)}catch(t){var r={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}},L.prototype.nVb=function(){var t;try{for(var e=c.__values(this.VS),i=e.next();!i.done;i=e.next())this.LO(i.value)}catch(t){var n={error:t}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(n)throw n.error}}},L.prototype.Nh=function(e,i,n,r,a,o,s){var u;return void 0===s&&(s=!1),u=!1,this.KYa(e).forEach(function(t){s&&!l.No(t.Cf.value)||(t.Nh(i,e,n,r,a,o,s),u=!0)}),u},L.prototype.Fn=function(t){return this.KYa(t).some(function(t){return t.Fn()})},L.prototype.KYa=function(e){return this.Cp.filter(function(t){return t=t.Ca.Ca,""+e==""+t.qa[t.Yd].W}).map(function(t){return t.Ca})},L.prototype.g6=function(){var n=new I.PCa;return this.Cp.forEach(function(t){var e,i=t.Ca;t=t.hY,(e=i.g6()).gH=t,n.add(i.id,e)}),n},L.prototype.f6=function(){return this.tOb},L.prototype.Dtb=function(){var t,e=C.LRa(this.I,this.E3);return{total:((t={})[1]=this.E3.video||1/0,t[0]=this.E3.audio||1/0,t.total=this.E3.total||1/0,t),Gwa:e}},L.prototype.yy=function(t){this.$B.yy(t)},L.prototype.qI=function(t){this.$B.qI(t)},L.prototype.Psa=function(){var e=this.OD.reduce(function(t,e){return Math.max(e.weight,0)+t},0);this.Cp.forEach(function(t){t.hY=t.Ca.weight<=0?0:t.Ca.weight/e})},L.prototype.YVb=function(){},L.vPb=0,c.__decorate([r.bc({methodName:"open"})],L.prototype,"open",null),c.__decorate([r.bc({methodName:"addPlaygraph",context:function(t){return{playgraphCount:null!==(t=null===(t=t.j4a.Cp)||void 0===t?void 0:t.length)&&void 0!==t?t:0}}})],L.prototype,"aG",null),c.__decorate([r.bc({methodName:"removePlaygraph",context:function(t){return{playgraphCount:t.j4a.Cp.length}}})],L.prototype,"Qu",null),c.__decorate([r.bc({methodName:"close"})],L.prototype,"close",null),c.__decorate([r.bc({methodName:"setStreamingMode",xr:!0})],L.prototype,"aYb",null),c.__decorate([r.bc({methodName:"notifyAseException",xr:!0})],L.prototype,"jsa",null),c.__decorate([r.bc({methodName:"updateViewable"})],L.prototype,"lx",null),c.__decorate([r.bc({methodName:"requestViewable"})],L.prototype,"WO",null),c.__decorate([r.bc({methodName:"removeViewable"})],L.prototype,"i7a",null),c.__decorate([r.bc({methodName:"createViewable"})],L.prototype,"oU",null),c.__decorate([r.bc({methodName:"issueRequestOpportunity",pm:!0,return:!0})],L.prototype,"C7",null),c.__decorate([r.bc({methodName:"reportStreamingFailure",xr:!0})],L.prototype,"Nh",null),e.Dya=L},function(t,e,i){var m,g,v,y,n,w,_;function r(t,e){this.H=t,this.config=e,this.h1a=0,this.zi=new n.IB({xD:10,wu:this,source:"GraphStreamingProcess"})}_esm(e),e.SCa=void 0,m=i(2),g=i(213),v=i(25),y=i(16),n=i(118),w=m.__importDefault(i(6)),_=i(405),r.prototype.u4a=function(t,e){var i,n,r,a,o,s,u,c,h,f=!1,l=[];if(0<e.length){r=(n=this.YYb(e)).some(function(t){return 1===_.NRa(t)&&y.No(t.Cf)}),a=n.slice(),o=[!1,!1];try{for(var p=m.__values(n),d=p.next();!d.done;d=p.next())if((s=d.value).mD&&"global"!==o[s.mediaType])if(u=s.F0a(t,null!==(h=s.gH)&&void 0!==h?h:1),(c=g.J6a(u.reason))&&(o[s.mediaType]=c,v.zQa(a,s)),u.result){if(h=function(t,e){return t.filter(function(t){return t.groupId===e.groupId}).reduce(v.e3a(function(t){return t.sA}),e).sA}(a,s),this.Bub(s,r,h)){if(h=s.J0a(),this.Fqa(l,s,h.reason),h.Gn&&(this.h1a=w.default.time.ea()),f=h.Gn)break}else if(this.Fqa(l,s,"concurrencyCheck"),!c)break}else this.Fqa(l,s,u.reason)}catch(t){var b={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(b)throw b.error}}}return this.zi.wy({streamableCount:e.length,streamableReasons:l,lastSuccessfulIssueRequestMs:this.h1a}),f},r.prototype.YYb=function(t){return this.ITb(t).sort(function(t,e){return t.priority-e.priority}).map(function(t){return t.zZb})},r.prototype.ITb=function(t){var e=this;return t.map(function(t){return{priority:-_.MRa(e.config,t,e.H),zZb:t}})},r.prototype.Fqa=function(t,e,i){this.zi.enabled&&t.push(this.wHb(i,e))},r.prototype.wHb=function(t,e){return{mediaType:e.mediaType,reason:t,bufferingState:e.Cf,currentPlayerMs:e.Er,pathCompletePlayerMs:e.sA,streamingPlayerMs:e.Cs}},r.prototype.Bub=function(t,e,i){return this.config.VT&&(e||y.No(t.Cf))?this.Cub(t,i):this.Dub(t,i)},r.prototype.Eub=function(t){return t.Cs<=t.sA},r.prototype.Dub=function(t,e){return t.Cs-(t.Er>e?t.Er:e)<=Math.max(this.config.Lra,Math.min((t.sA-t.Er)*this.config.Nwa,this.config.XNb))},r.prototype.Cub=function(t,e){var i,n;return void 0===this.config.VT||(i=this.config.VT,n=t.Er+i,t.Cs<=n||this.Eub(t)&&n<=e&&t.Cs-e<i)},m.__decorate([n.bc({methodName:"onRequestOpportunity",pm:!0})],r.prototype,"u4a",null),e.SCa=r},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function p(t,e,i){var n=l.call(this)||this;return n.V=t,n.Bd=e,n.Qv=i,n.KU=[],n.Qfa=new r.Wh,n.H=new s.default.Console("ASEJS","media|asejs"),n.Qfa.on(n.V,"underflow",function(){return n.sk()}),n.mS=new f.KIa(t),n.Qfa.on(n.V,"skipped",function(){return n.qX()}),n.Rv=new u.XR(n.mS,n.H,"player"),n.pya=new a.l1,n}_esm(e),e.Wya=void 0,n=i(2),r=i(17),a=i(9),o=i(5),s=n.__importDefault(i(6)),u=i(72),c=i(25),h=i(893),t=i(406),f=i(895),l=t.hea,n.__extends(p,l),Object.defineProperties(p.prototype,{hx:{get:function(){var t;return null===(t=this.Dh)||void 0===t?void 0:t.hx},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Cu:{get:function(){return this.Rv},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{Kb:{get:function(){var t;return null!==(t=null===(t=this.Dh)||void 0===t?void 0:t.rz())&&void 0!==t?t:[]},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{pa:{get:function(){var t;return null===(t=this.Dh)||void 0===t?void 0:t.pa},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{za:{get:function(){return this.mS},enumerable:!1,configurable:!0}}),Object.defineProperties(p.prototype,{TA:{get:function(){var t;return!(null===(t=this.Dh)||void 0===t||!t.TA)},enumerable:!1,configurable:!0}}),p.prototype.LY=function(t){-1===this.KU.indexOf(t)&&this.KU.push(t),this.Dh&&this.Dh.oX(t),this.events.emit("drmReady",{viewableId:t})},p.prototype.Uva=function(t){-1!==(t=this.KU.indexOf(t))&&this.KU.splice(t,1)},p.prototype.Oo=function(e){var t;return-1!==this.KU.indexOf(e)||!(null===(t=c.ig(this.Kb,function(t){return t.P.W===e}))||void 0===t||!t.P.ii)},p.prototype.reset=function(){var t;this.pya=new a.l1,l.prototype.reset.call(this),this.IF=void 0,null!==(t=this.Dh)&&void 0!==t&&t.reset()},p.prototype.vY=function(t){var e;l.prototype.vY.call(this,t),null!==(e=this.Dh)&&void 0!==e&&e.vY(t)},p.prototype.oG=function(){var t;null!==(t=this.Dh)&&void 0!==t&&t.oG()},p.prototype.pause=function(t){this.TI(t),l.prototype.pause.call(this,null!=t?t:this.Bd)},p.prototype.resume=function(t){var e;null!==(e=this.Dh)&&void 0!==e&&e.resume(t),l.prototype.resume.call(this,null!=t?t:this.Bd)},p.prototype.Nb=function(){this.kt=this.F6()?this.Ko():void 0,this.Dh&&this.$ka(this.Dh.pa),this.mS.Nb(),this.Rv.Nb(),this.Qfa.clear(),l.prototype.Nb.call(this)},p.prototype.WM=function(){var t,e;if(null!==(t=this.Dh)&&void 0!==t&&t.HTb){if(t=this.V.Mc,this.za.Zk){if(this.IF){if(this.IF.greaterThan(t))return t=this.IF.Qa(t),this.pya.push(t.Y),this.IF;if(this.Kb.length&&(e=this.Dh.bMb)&&e.lessThan(t))return this.events.emit("logdata",{type:"logdata",target:"endplay",ic:{clockdrift:{type:"count"}}}),this.IF}this.IF=t}return t}return l.prototype.WM.call(this)},p.prototype.Jo=function(){var t=this.V.playbackRate;return void 0===t&&(t=l.prototype.Jo.call(this)),t},p.prototype.F6=function(){return!!this.kt||0<this.Kb.length},p.prototype.Ko=function(){return this.kt||(o.assert(0<this.Kb.length,"Could not find presenting branch. Player has no branches."),this.si)},p.prototype.$ka=function(t){o.assert(t===this.pa),null!==(t=this.Dh)&&void 0!==t&&t.Nb(),this.Dh=void 0},p.prototype.q3=function(t,e){return this.kt=void 0,(e=l.prototype.q3.call(this,t,e))&&(this.Dh=new h.iza(t,this,this.H,t.config,this.Qv,this.events,this.Bd,this.Rv,this.TB,this.SB),this.TI(this.qO)),e},p.prototype.Hla=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e=this.Dh,o.assert(e),t.forEach(function(t){return e.$Bb(t)})},p.prototype.Li=function(t){var e,i,n;return!!this.Dh&&(!!(e=this.H5(t))&&(i=e.O,n=a.T.Eb(this.Qv.BD),!(i.Uk.Qa(n).lessThan(t)||!e.vG(t))&&this.Dh.Li(t)))},p.prototype.sk=function(){var t,e,i=this.Ug;o.assert(this.pa),e=this.js(i),o.assert(e),null!==(t=this.Dh)&&void 0!==t&&t.sk(),null!=(t=this.H5(i))&&t.P.sk(),this.pa.sk(e)},p.prototype.qX=function(){this.IF=void 0},p.prototype.Sma=function(){var t;return null===(t=this.Dh)||void 0===t?void 0:t.Sma()},p.prototype.TI=function(t){var e;null!==(e=this.Dh)&&void 0!==e&&e.TI(t)},p.prototype.qxa=function(t){return o.assert(this.pa&&this.Dh),l.prototype.qxa.call(this,t)},i=p,e.Wya=i},function(t,e,i){var f,a,o,l,s,p,n,r,d,u,b;function c(t,e,i,n,r,a,o,s,u,c){var h=this;this.pa=t,this.V=e,this.H=i,this.I=n,this.Qv=r,this.Zh=a,this.Bd=o,this.Cu=s,this.TB=u,this.SB=c,this.C1=!1,this.fNa=new p.yKa,this.Hga=this.rQb.bind(this),this.hj=new l.x_(this.H),this.hx=new b.xLa(this.H,t),this.myb(this.hx),this.sl&&(this.Bob=this.Rma(this.RGb()),this.gnb=p.er.oya(this.sl.map(function(t){return t.jA}),function(t){return t.every(function(t){return t})},function(t){return h.TB.set(t)}),this.jlb=new d.zda(this.sl.map(function(t){return t.qW}),function(t){return p.T.min.apply(p.T,f.__spread(t))},function(t){h.SB.set(t)},p.T.Eb(-1/0))),this.Dp=s.AG(function(){return h.Ysb()},"branchPruner")}_esm(e),e.iza=void 0,f=i(2),a=i(394),o=f.__importDefault(i(6)),l=i(242),i(16),s=i(236),p=i(9),n=i(25),r=i(72),d=i(215),u=i(5),b=i(894),c.prototype.Ysb=function(){var e,i,n;return f.__generator(this,function(t){switch(t.label){case 0:return this.hj.ESa?(n=f.__read(this.hj.oaa(),1),e=n[0],i=null!==(n=null===(i=this.Qv.rP)||void 0===i?void 0:i.Y)&&void 0!==n?n:0,n=e.O7||e.xe,i=n.add(p.T.Eb(i+1e3)),[4,r.Jk.XP(i)]):[3,2];case 1:return t.bd(),this.hj.remove(e),e.events.removeListener("branchEdited",this.Hga),e.Df(),[3,0];case 2:return[2]}})},Object.defineProperties(c.prototype,{HTb:{get:function(){var t;return!(null===(t=this.Bob)||void 0===t||!t.jA.value)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{TA:{get:function(){var t;return!(null===(t=this.sl[0])||void 0===t||!t.TA)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{bMb:{get:function(){return this.C1?p.T.max.apply(p.T,f.__spread(this.sl.map(function(t){return null===(t=t.Vrb)||void 0===t?void 0:t.c1a}).filter(n.Z8))):void 0},enumerable:!1,configurable:!0}}),c.prototype.rQb=function(){var t;this.Dp.Hm(),t=this.sl.filter(function(t){return t.vKb}).map(function(t){return t.mediaType}),this.TI(t),this.resume(t)},c.prototype.$Bb=function(t){u.assert(-1===this.hj.oaa().indexOf(t),"Branch "+t.O.id+" is already in the collection, cannot re-queue"),t.events.addListener("branchEdited",this.Hga),this.hj.enqueue(t),this.Dp.state===r.Ym.complete&&this.Dp.Hm(),t.O.bv&&this.hj.X4(),this.C1||this.tDb(t)},c.prototype.oX=function(e){this.sl.forEach(function(t){t.oX(e)})},c.prototype.reset=function(){this.sl.forEach(function(t){t.reset()}),this.C1=!1,this.fNa.removeAllListeners(),this.oG()},c.prototype.vY=function(t){null!=(t=this.Rma(t))&&t.reset()},c.prototype.oG=function(){var e=this;this.hj.oaa().forEach(function(t){return t.events.removeListener("branchEdited",e.Hga)}),this.hj.clear(),this.Dp.Hm()},c.prototype.resume=function(e){this.sl.forEach(function(t){void 0!==e&&-1===e.indexOf(t.mediaType)||t.resume()})},c.prototype.TI=function(e){this.sl.forEach(function(t){return(void 0===e||-1!==e.indexOf(t.mediaType))&&t.stop()})},c.prototype.sk=function(){this.H.trace("attached-player: onUnderflow")},c.prototype.YYa=function(){return this.hj.getIterator()},c.prototype.NFb=function(){return this.rz()[0]},c.prototype.rz=function(){return this.hj.oaa()},c.prototype.myb=function(i){var n,r=this;if(this.am("createMediaSourceStart"),this.Qv.CV?n=this.Qv.CV():(n=new o.default.MediaSource(this.V.V)).pc||(n.pc=o.default.MediaSource.pc),1!==n.readyState)this.Ep("exception in init","NFErr_MC_StreamingInitFailure");else{if(this.am("createMediaSourceEnd"),!(this.eg=n).b3(this.Bd))throw this.H.trace("Error:",n.error),this.Ep("error creating source buffers","NFErr_MC_StreamingInitFailure"),n.error;this.sl=n.sourceBuffers.filter(function(t){return 0<=r.Bd.indexOf(t.mediaType)}).map(function(t){var e=new s.Jba(r.H,t.mediaType,n,t,r.I,!0,{Re:function(){return r.V.Ug.Y},Oo:function(t){return r.V.Oo(t.W)}},r.Cu);return e.addListener("error",function(t){return r.Ep(t.errorstr)}),e.addListener("logdata",function(t){return r.Zh.emit("logdata",t)}),new a.xba(e,t.mediaType,r,r.I,r.H,r.V,r.Qv,r.Cu,i)})}},c.prototype.Nb=function(){this.gnb.clear(),this.jlb.clear(),this.sl.forEach(function(t){return t.Nb()}),this.Qv.CV||this.eg.Yp(),this.oG(),this.Dp.Nb()},c.prototype.Li=function(e){return this.sl.every(function(t){return t.Li(e)})},c.prototype.Sma=function(){return{sUb:this.rz(),HSb:this.sl}},c.prototype.tDb=function(t){var i=this;this.C1=!0,t.vg.forEach(function(t){var e=i.Rma(t.mediaType);void 0!==e&&i.fNa.once(t.qma,function(t){return e.uDb(t)})}),t.Vc?this.bVa():t.events.once("branchNormalized",function(){return i.bVa()})},c.prototype.bVa=function(){var t=this.NFb();t&&(u.assert(t.xj),this.Zh.emit("ptsChanged",{initialTimestamp:t.xj}))},c.prototype.Rma=function(e){return n.ig(this.sl,function(t){return t.mediaType===e})},c.prototype.RGb=function(){return-1!==this.Bd.indexOf(1)?1:0},c.prototype.am=function(t){t={type:"startEvent",event:t,time:o.default.time.ea()},this.Zh.emit(t.type,t)},c.prototype.Ep=function(t,e){this.pa.Nh(t,void 0,e)},e.iza=c},function(t,e,i){var d,r;function n(t,e){this.H=t,this.jL=e}_esm(e),e.xLa=void 0,d=i(2).__importDefault(i(6)),r=i(35),n.prototype.fE=function(t,e,i,n,r){var a,o;void 0===r&&(r=!1),a=t.O,o=this.pmb(a),this.lT={startTime:d.default.time.ea(),$Yb:t,ZYb:i.Y,$Ab:e,ae:this.bGb(n,e),r0b:this.GHb(n,r),Uka:r,Ue:n,cSa:o,uPb:this.tGb(a,i)}},n.prototype.xna=function(t){var e,i,n,r,a,o,s,u,c,h,f,l,p;if(this.lT&&0!==Object.keys(this.lT.cSa).length&&t===this.lT.$Ab){for(p in i=(e=this.lT).cSa,n=e.uPb,r=e.Uka,a=e.Ue,o=e.$Yb,s=e.ZYb,u=e.startTime,c=e.ae,e=e.r0b,this.lT=void 0,h=this.$fa(t).Br,f=this.qEb(o.O.id,t,i),h=this.QNa(f.weight,h),l={},i)p!==t&&(l[p]=i[p].details);return i=d.default.time.ea()-u,{segment:t,srcsegment:o.O.id,srcsegmentduration:o.uaa.Y,srcoffset:this.qHb(o,s,a,r),seamlessRequested:a,atRequest:f,atTransition:h,discard:l,transitionType:c,transitionTypeAtRequest:e,delayToTransition:this.cFb(i,a,r),durationOfTransition:a?0:i,nextExitPositionAtRequest:n}}},n.prototype.qEb=function(t,e,i){var n={};return(i=i[e])?n=i.details:(r.assert(this.jL),n.weight=null===(e=null===(t=this.jL.Ca.qa[t].next)||void 0===t?void 0:t[e])||void 0===e?void 0:e.weight),n},n.prototype.cFb=function(t,e,i){var n;return i||(n=e?t:0),n},n.prototype.tGb=function(t,e){var i,n=t.Mg.add(e);return null!==(t=t.Zw)&&void 0!==t&&t.some(function(t){n.lessThan(t.Vc)&&(i=t.Vc.Y)}),i},n.prototype.qHb=function(t,e,i,n){return i||n?t.uaa.Y:e},n.prototype.bGb=function(t,e){return t?"seamless":this.$fa(e).SV?"reset":"long"},n.prototype.GHb=function(t,e){return t||e?"lazy":"immediate"},n.prototype.pmb=function(n){var r=this,a={};return n.oA.forEach(function(t){var e=n.xPb[t],i=r.$fa(t).Br;a[t]={details:r.QNa(e,i)}}),a},n.prototype.$fa=function(t){var e,i;return t=null==(e=0<(t=this.jL.Wma(t)).length?t[0]:void 0)?void 0:e.OC(),e&&t?(i=e.EZa(0)&&!t.vr,e=e.EZa(1)&&!t.$n,{SV:!i&&!e,Br:t}):{SV:!1,Br:{$n:0,vr:0,Ks:0,kC:0}}},n.prototype.QNa=function(t,e){return{weight:t,vbuflmsec:e.$n,abuflmsec:e.vr,vbuflbytes:e.Ks,abuflbytes:e.kC}},e.xLa=n},function(t,e,i){var n;function r(t){var e=this;this.V=t,this.nga=!1,this.EF=new n.Wh,this.EF.on(t,"paused",function(){return e.n9()}),this.EF.on(t,"playing",function(){return e.n9(!0)}),this.EF.on(t,"underflow",function(){return e.n9()}),this.EF.on(t,"skipped",function(){return e.qX()}),this.EF.on(t,"clockAdjusted",function(){return e.nX()}),this.EF.on(t,"playbackRateChanged",function(){return e.OQb()})}_esm(e),e.KIa=void 0,n=i(17),t=i(42),Object.defineProperties(r.prototype,{currentTime:{get:function(){return this.XOa||this.V.Mc},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{Zk:{get:function(){return this.nga},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{speed:{get:function(){var t;return null!==(t=this.V.playbackRate)&&void 0!==t?t:1},enumerable:!1,configurable:!0}}),r.prototype.n9=function(t){void 0===t&&(t=!1),t!==this.nga&&(this.XOa=(this.nga=t)?void 0:this.V.Mc),this.emit("stopStart",{type:"stopStart"})},r.prototype.qX=function(){this.XOa=void 0,this.nX()},r.prototype.nX=function(){this.emit("clockAdjusted",{type:"clockAdjusted"})},r.prototype.OQb=function(){this.emit("speedChanged",{type:"speedChanged"})},r.prototype.Nb=function(){this.n9(),this.EF.clear()},i=r,e.KIa=i,t.xf(n.EventEmitter,i)},function(t,e,i){var a;function n(t,e,i,n){this.W=t,this.WO=e,this.Nsa=i,this.Osa=n}_esm(e),e.Gza=void 0,a=i(2),Object.defineProperties(n.prototype,{P:{get:function(){var t;return null===(t=this.ZZ)||void 0===t?void 0:t.P},enumerable:!1,configurable:!0}}),n.prototype.Nb=function(){var t;this.P&&(this.P.Ixa(this.gb),this.Osa(this.P)),null!==(t=this.ZZ)&&void 0!==t&&t.Q7.release(),this.ZZ=void 0},n.prototype.xb=function(r){return a.__awaiter(this,void 0,void 0,function(){var e,i,n;return a.__generator(this,function(t){switch(t.label){case 0:return this.gb=r,i=this.WO(this.W),n=i.tE,e=i.P,i=i.Q7,this.ZZ={Q7:i,P:e},e?(this.F_a(e,r,!1),[2,e]):[4,n];case 1:return n=t.bd(),this.F_a(n,r,!0),[2,n]}})})},n.prototype.F_a=function(t,e,i){this.ZZ&&((this.ZZ.P=t).Cua(e),this.Nsa(e,t,i))},e.Gza=n},function(t,e,i){var o,p,d,a,n,r,s,u,b,c,m,h;function f(t,e){return(1===t.mediaType?0:1)-(1===e.mediaType?0:1)}function l(t,e,i,n,r,a,o,s,u,c,h,f){var l=this;this.I=t,this.H=e,this.C9=i,this.Gp=n,this.a6=r,this.Sr=a,this.Zs=o,this.BS=s,this.parent=u,this.by=c,this.Rv=h,this.YZ=f,this.$c=m.Lba,this.S2=[],this.Lz=new b.bK,this.x7a=0,this.Fsa=function(){!l.Eh&&l.C6&&(l.P.eu.HD("onHeaderFragments",l.Fsa),l.a7.resolve())},this.events=new p.EventEmitter,this.cs=new d.EQ,this.a7=new d.EQ,null!==(f=this.parent)&&void 0!==f&&f.xe&&(this.Zs=this.parent.xe.Qa(this.Gp.Mg))}_esm(e),e.Cza=e.Fza=e.Ohb=void 0,o=i(2),p=i(17),d=i(9),a=i(22),t=i(102),n=i(42),r=i(898),s=i(5),u=i(900),b=i(239),c=i(20),e.Ohb={Ebb:f},(h=m=e.Fza||(e.Fza={}))[h.Lba=0]="CREATED",h[h.Mza=1]="CANCELLED",Object.defineProperties(l.prototype,{state:{get:function(){return this.$c},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Eh:{get:function(){return this.$c===m.Mza},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{O:{get:function(){return this.Gp},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Aw:{get:function(){var t;return!(null===(t=this.yd)||void 0===t||!t.Aw)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{wl:{get:function(){var t;return!(null===(t=this.yd)||void 0===t||!t.wl)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{ut:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.ut)&&void 0!==t?t:0},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{ri:{get:function(){var t;return!(null===(t=this.yd)||void 0===t||!t.ri)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{D2b:{get:function(){return this.cs.promise},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{vg:{get:function(){return this.S2},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{VV:{get:function(){var t;return!(null===(t=this.YZ)||void 0===t||!t.P)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{C6:{get:function(){return!!this.vg.length&&this.S2.every(function(t){return t.je})},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{P:{get:function(){return s.assert(this.YZ.P,"viewable should be available"),this.YZ.P},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{S:{get:function(){var t;return(null===(t=this.yd)||void 0===t?void 0:t.S)||this.Sr.S},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Wa:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.Wa)&&void 0!==t?t:this.Sr.vc},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{ob:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.ob)&&void 0!==t?t:this.O.Uk.vc},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{zj:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.zj)&&void 0!==t?t:this.jg.Zf(this.S).vc},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Tr:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.Tr)&&void 0!==t?t:null===(t=this.Sr)||void 0===t?void 0:t.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{KM:{get:function(){var t=null===(t=this.O.O.hq)||void 0===t?void 0:t[0];return t&&this.Vc?a.T.Eb(Math.max(0,t[0]-this.Vc.Y-this.O.Mg.Y)):a.T.Gb},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{gI:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.gI)&&void 0!==t?t:this.O.Mg.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{xO:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.xO)&&void 0!==t?t:this.O.Uk.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{O7:{get:function(){var t;return null===(t=this.yd)||void 0===t?void 0:t.O7},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{jg:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.jg)&&void 0!==t?t:this.Zs},enumerable:!1,configurable:!0}}),Object.defineProperties(l.prototype,{Rq:{get:function(){var t;return null!==(t=null===(t=this.yd)||void 0===t?void 0:t.Rq)&&void 0!==t?t:this.O.Uk.Qa(this.Sr||this.O.Mg)},enumerable:!1,configurable:!0}}),l.prototype.xb=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return this.Eh?[2]:(c.ga&&this.H.log("AseBranch {"+this.O.id+"} awaiting viewable"),[4,this.YZ.xb(this)]);case 1:return(t.bd(),c.ga&&this.H.log("AseBranch {"+this.O.id+"} viewable available, branch "+(this.Eh?"cancelled":"active")),this.Eh)?[2]:(s.assert(this.a6,"tracks need to exist upon initialization"),this.S2=this.a6(this.P).sort(f),this.P8a(this.Sr),[4,this.YVa()]);case 2:return t.bd(),c.ga&&this.H.log("AseBranch {"+this.O.id+"} have headers"),this.Eh?[2]:this.parent?[4,this.parent.D2b]:[3,4];case 3:if(t.bd(),this.Eh)return[2];t.label=4;case 4:return this.normalize(),[2]}})})},l.prototype.YVa=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(){return this.C6?this.a7.resolve():(this.P.eu.on("onHeaderFragments",this.Fsa),this.events.emit("needsRequest")),[2,this.a7.promise]})})},l.prototype.normalize=function(){this.Eh||(this.yd=new r.KGa(this,this.I,this.H,this.P,this.C9,this.Gp,this.Sr,this.Lz.items,this.Zs,this.BS,this.parent,this.by,this.events,this.Rv),this.vla(this.yd.FC),this.cs.resolve(this.yd))},l.prototype.update=function(t){var e;this.Gp=t,null!==(e=this.yd)&&void 0!==e&&e.update(t)&&this.vla(!0)},l.prototype.kx=function(t){var e;this.Zs=t,null!==(e=this.yd)&&void 0!==e&&e.kx(t)},l.prototype.yz=function(i){return o.__awaiter(this,void 0,void 0,function(){var e;return o.__generator(this,function(t){switch(t.label){case 0:return[4,this.cs];case 1:return[2,null==(e=t.bd())?void 0:e.yz(i)]}})})},l.prototype.LG=function(){var t;null!==(t=this.yd)&&void 0!==t&&t.LG()},l.prototype.reset=function(){var t;null!==(t=this.yd)&&void 0!==t&&t.reset()},l.prototype.Df=function(){var t;this.$c=m.Mza,this.VV&&this.P.eu.HD("onHeaderFragments",this.Fsa),null!==(t=this.yd)&&void 0!==t&&t.Df(),this.Lz.forEach(function(t){return t.cancel()}),this.YZ.Nb()},l.prototype.hW=function(t){var e;return!(null===(e=this.yd)||void 0===e||!e.hW(t))},l.prototype.eb=function(t){var e;return null===(e=this.yd)||void 0===e?void 0:e.eb(t)},l.prototype.EZa=function(e){return this.vg.some(function(t){return t.mediaType===e})},l.prototype.lq=function(t){var e;return void 0===t&&(t=f),null!==(t=null===(e=this.yd)||void 0===e?void 0:e.lq(t))&&void 0!==t?t:[]},l.prototype.uHb=function(t){var e;return(null===(e=this.eb(t))||void 0===e?void 0:e.kl.ug)||(null===(t=this.Lz.get(t))||void 0===t?void 0:t.kl.ug)},l.prototype.e6=function(){var t;return this.C6?null!==(t=null===(t=this.yd)||void 0===t?void 0:t.e6())&&void 0!==t?t:[]:this.Lz.items},l.prototype.aN=function(t){var e;return(null===(e=this.yd)||void 0===e?void 0:e.aN(t))||this.Lz.get(t)},l.prototype.Gh=function(t,e){var i;return(null===(i=this.yd)||void 0===i?void 0:i.Gh(t,e))||0},l.prototype.OC=function(){var t;return(null===(t=this.yd)||void 0===t?void 0:t.OC())||{}},l.prototype.KV=function(t){var e;return(null===(e=this.yd)||void 0===e?void 0:e.KV(t))||this.Tr.Y},l.prototype.bE=function(n,r,a){return o.__awaiter(this,void 0,void 0,function(){var e,i;return o.__generator(this,function(t){switch(t.label){case 0:return(this.S2=n.sort(f),this.P8a(r),this.ri)?(s.assert(this.yd),e=this.Lz.filter(function(t){return t.track.je}).items,i=this.yd.Vab(e,r,a),e=i.CU,i=i.FC,e&&this.vla(i),this.C6?[3,2]:(this.a7=new d.EQ,this.cs=new d.EQ,c.ga&&this.H.log("AseBranch {"+this.O.id+"} setTracks waiting for headers"),[4,this.YVa()])):[3,2];case 1:if(t.bd(),this.Eh)return[2];this.yd.Vab(this.Lz.items,r,a),c.ga&&this.H.log("AseBranch {"+this.O.id+"} setTracks pipelines updated"),this.cs.resolve(this.yd),this.events.emit("needsRequest"),t.label=2;case 2:return[2]}})})},l.prototype.P8a=function(n){var r=this;this.Lz=new b.bK(this.vg.map(function(e){var t,i=r.Lz.find(function(t){return t.track===e});return i||(++r.x7a,i=new u.tDa(r,e,(null==n?void 0:n.add(r.jg))||a.T.Gb,r.I,r.H,null===(t=r.parent)||void 0===t?void 0:t.uHb(e.mediaType),r.C9,function(){0==--r.x7a&&r.events.emit("requestQueuesCreated")})),i}))},l.prototype.Om=function(t){var e;return(null===(e=this.yd)||void 0===e?void 0:e.Om(t))||[]},l.prototype.mX=function(t){var e;return null===(e=this.yd)||void 0===e?void 0:e.mX(t)},l.prototype.vG=function(t){var e;return!(null===(e=this.yd)||void 0===e||!e.vG(t))},l.prototype.P5=function(t){return this.yd?this.yd.P5(t):a.T.Gb},l.prototype.zxa=function(t){var e;return!(null===(e=this.yd)||void 0===e||!e.zxa(t))},l.prototype.vla=function(t){t={type:"branchNormalized",segmentContentStart:this.O.Mg,branchContentStart:this.Vc,branchContentEnd:this.Pd,didNormalizeSegment:t},this.events.emit(t.type,t),c.ga&&this.H.trace("branchNormalized:",t)},l.prototype.toJSON=function(){var t;return(null===(t=this.yd)||void 0===t?void 0:t.toJSON())||{}},i=l,e.Cza=i,n.xf(t.rx,i),n.xf(t.kB,i)},function(t,e,i){var r,o,n,a,s,u,c,h,b,f,m,g,v,l,y,w;function p(t,e){return(1===t.mediaType?0:1)-(1===e.mediaType?0:1)}function d(t,e,i,n,r,a,o,s,u,c,h,f,l,p){var d=w.call(this,n)||this;return d.gb=t,d.I=e,d.P=n,d.C9=r,d.Gp=a,d.Zs=u,d.BS=c,d.parent=h,d.by=f,d.events=l,d.Rv=p,d.ee=new y.bK([]),d.Xl=!1,d.KS=0,d.jS=d.mX.bind(d),m.assert(n.W===d.O.W||isNaN(n.W)&&isNaN(d.O.W)),d.console=b.wq(v.default,i,a.id&&a.id.length?"{"+a.id+"}":""),d.Sr=null!=o?o:g.T.Eb(d.O.Z),d.Mga=null==h?void 0:h.xe,null!==(h=d.by)&&void 0!==h&&h.addListener(d.jS),t=d.oTa(s,d.Sr,!!d.parent).FC,d.FC=t,d}_esm(e),e.KGa=e.Tda=void 0,r=i(2),o=i(389),n=i(83),a=i(149),s=i(387),u=i(16),c=i(408),h=i(899),b=i(9),f=i(25),m=i(5),g=i(22),v=r.__importDefault(i(6)),t=i(102),l=i(42),y=i(239),e.Tda={Ebb:p},w=n.kv,r.__extends(d,w),Object.defineProperties(d.prototype,{Eh:{get:function(){return this.Xl},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{O:{get:function(){return this.Gp},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{Aw:{get:function(){return this.ee.every(function(t){return t.Aw})},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{wl:{get:function(){return this.ee.every(function(t){return t.wl})},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{ut:{get:function(){return this.lq().reduce(function(t,e){return t+e.ut},0)},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{ri:{get:function(){return this.lq().every(function(t){return t.ri()})},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{vg:{get:function(){return this.gb.vg},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{S:{get:function(){return this.mt.S},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{Wa:{get:function(){return this.mt.Wa},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{ob:{get:function(){return this.mt.ob},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{zj:{get:function(){return this.jg.Zf(this.S).vc},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{Tr:{get:function(){return this.Sr.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{gI:{get:function(){return this.O.Mg.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{xO:{get:function(){return this.O.Uk.add(this.jg)},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{O7:{get:function(){return this.ee.reduce(function(t,e){return t&&e.xe?g.T.max(t,e.xe):e.xe||t},void 0)},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{jpa:{get:function(){return this.Tr.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{Fe:{get:function(){return this.jg.Y},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{Rq:{get:function(){return this.mt.Rq},enumerable:!1,configurable:!0}}),Object.defineProperties(d.prototype,{jg:{get:function(){return this.Zs},enumerable:!1,configurable:!0}}),d.prototype.Vab=function(t,e,i){var n;return void 0===e&&(e=null!==(n=this.Vc)&&void 0!==n?n:this.Sr),this.oTa(t,e,i)},d.prototype.update=function(t){var e,i=t.Uk.a9(this.Gp.Uk);return this.Gp=t,!(!i||!this.XB)&&(t=(i=r.__read(this.XB.EVb(t,t.Uk),2))[0],i=i[1],m.assert(t&&i,"branch.update: lastFragment should be defined"),null!==(e=this.eb(0))&&void 0!==e&&e.truncate(t),null!==(t=this.eb(1))&&void 0!==t&&t.truncate(i),this.events.emit("branchEdited",{type:"branchEdited"}),!0)},d.prototype.kx=function(t){this.jg.equal(t)||(this.Zs=t)},d.prototype.yz=function(i){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.resolve()];case 1:return t.bd(),(e=this.eb(i))?[2,e.yz()]:[2,a.AsyncIterator.KXa()]}})})},d.prototype.LG=function(){this.lq().forEach(function(t){return t.LG()})},d.prototype.rT=function(){this.ee.forEach(function(t){return t.rT()})},d.prototype.reset=function(){this.ee.forEach(function(t){t.reset()})},d.prototype.Df=function(){var t;this.Xl||(this.Xl=!0,null!==(t=this.XB)&&void 0!==t&&t.ed(),this.XB=void 0,this.ee.forEach(function(t){t.Df()}),null!==(t=this.by)&&void 0!==t&&t.removeListener(this.jS),this.events.removeAllListeners())},d.prototype.hW=function(){return!0},d.prototype.eb=function(t){return this.ee.get(t)},d.prototype.lq=function(t){return void 0===t&&(t=p),this.ee.items.slice().sort(t)},d.prototype.e6=function(){return this.ee.items},d.prototype.aN=function(t){return this.eb(t)},d.prototype.Gh=function(t,e){return(t=this.eb(t))?e?t.Gm:void 0===(e=t.Tp)?0:e-(t=this.BS()):0},d.prototype.OC=function(){var t,e=null===(i=this.eb(0))||void 0===i?void 0:i.rn,i=null===(t=this.eb(1))||void 0===t?void 0:t.rn;return{$n:null!==(t=null==i?void 0:i.Y)&&void 0!==t?t:0,vr:null!==(t=null==e?void 0:e.Y)&&void 0!==t?t:0,Ks:null!==(i=null==i?void 0:i.fa)&&void 0!==i?i:0,kC:null!==(e=null==e?void 0:e.fa)&&void 0!==e?e:0}},d.prototype.KV=function(t){var e;return(t=this.eb(t))&&null!==(e=t.Tp)&&void 0!==e?e:0},d.prototype.Om=function(t){return(null==(t=this.eb(t))?void 0:t.Om())||[]},d.prototype.mX=function(t){u.No(t.newValue)&&this.qr()},d.prototype.vG=function(e){return this.ee.every(function(t){return t.vG(e)})},d.prototype.P5=function(t){return null!==(t=null===(t=this.ee.get(t))||void 0===t?void 0:t.HTa)&&void 0!==t?t:g.T.Gb},d.prototype.zxa=function(t){var e,i,n=this.mt.PLb;return!!n&&(!!(e=f.ig(t,function(t){return n.Y<=t.Vc.Y}))&&(t=!1,e=(i=r.__read(c.Pua(this.I,this.ee,e.Vc),2))[0],(i=i[1])&&(this.eb(1).truncate(i),t=!0),e&&(this.eb(0).truncate(e),t=!0),t&&(e={type:"branchEdited"},this.events.emit(e.type,e)),t))},d.prototype.tk=function(t){this.Xl||(t.e3||m.assert(!t.ad),this.qr(),this.wl&&this.Kga()),this.Ut(t)},d.prototype.YH=function(t){this.I.T4&&this.qr(!0),this.TG(t)},d.prototype.XH=function(t){this.I.T4&&this.qr(!0),this.MC(t)},d.prototype.oTa=function(t,i,e){var n=this,r=new y.bK,a=!1;return t.forEach(function(e){var t=n.ee.find(function(t){return t.track===e.track});void 0===t?(a=!0,t=new s.wda(e.mediaType,n.I,n.console),(t=new o.Sda(n,n.I,n.console,n.C9,n.gb,e.track,i,e.kl,t,!0,void 0,e.l0b(),n.Rv)).events.on("lastRequestIssued",function(){return n.Aw&&n.events.emit("lastRequestIssued",{type:"lastRequestIssued"})})):(n.ee.remove(t),t.rT()),r.add(t)}),this.ee.forEach(function(t){return t.Df()}),this.ee=r,a?this.normalize(i,e):{CU:!1,FC:!1}},d.prototype.normalize=function(t,e){var i;return null!==(i=this.XB)&&void 0!==i&&i.ed(),this.XB=new h.iIa({console:this.console,config:this.I,P:this.P,O:this.O,el:this.ee,Vc:t,Pd:null!==(i=this.O.Uk)&&void 0!==i?i:void 0!==this.O.Ha?g.T.Eb(this.O.Ha):void 0,splice:e}),this.mt=this.ee.TX,t=(e=this.XB.normalize()).CU,e=e.FC,t&&this.Mga&&(this.Zs=this.Mga.Qa(this.Vc)),{CU:t,FC:e}},d.prototype.iwa=function(t){var e;return u.No((null===(e=this.by)||void 0===e?void 0:e.value)||u.Jc.ej)&&(!t||this.KS+this.I.z8<v.default.time.ea())},d.prototype.qr=function(t){void 0===t&&(t=!1),this.iwa(t)&&(this.KS=v.default.time.ea(),t={type:"checkBufferingProgress"},this.events.emit(t.type,t))},d.prototype.Kga=function(){var t={type:"branchStreamingComplete"};this.events.emit(t.type,t)},d.prototype.toJSON=function(){var t;return{segment:this.O.id,branchOffset:this.Fe,viewableId:this.Gp.W,contentStartPts:null===(t=this.Vc)||void 0===t?void 0:t.Y,contentEndPts:null===(t=this.Pd)||void 0===t?void 0:t.Y}},i=d,e.KGa=i,l.xf(t.rx,i)},function(t,e,i){var n,r,a;function o(t){var e=this,i=t.console,n=t.config,r=t.P,a=t.el,o=t.O,s=t.Vc,u=t.Pd;t=t.splice,this.dW=this.XL=!1,this.WRa=function(){e.XL||e.Vha()&&e.fsa()},this.console=i,this.config=n,this.el=a,this.P=r,this.O=o,this.Vc=s,this.Pd=u,this.splice=t}_esm(e),e.iIa=void 0,n=i(2),r=i(408),a=i(5),o.prototype.xb=function(t){if(this.XL)throw Error("Cannot call init() after cleanup");if(this.dW)throw Error("Cannot call init() twice");this.dW=!0,this.r4a=t,this.P.eu.addListener("onHeaderFragments",this.WRa),this.Vha()&&this.fsa()},o.prototype.normalize=function(){if(this.XL)throw Error("Cannot call normalize() after cleanup");if(this.dW)throw Error("Cannot call init() / normalize() twice");return this.dW=!0,a.assert(this.Vha()),this.fsa()},o.prototype.EVb=function(t,e){return a.assert(this.dW,"expected to be called init() before renormalize"),this.O=t,this.Pd=e,t=r.Pua(this.config,this.el,this.Pd),this.Y8(),t},o.prototype.ed=function(){this.XL||(this.XL=!0,this.r4a=void 0,this.P.eu.removeListener("onHeaderFragments",this.WRa))},o.prototype.fsa=function(){var t,e,i;return this.XL?{CU:!1,FC:!1}:(e=this.EPb(),i=!1,this.O&&!this.O.cs&&(i=this.Y8()),null!==(t=this.r4a)&&void 0!==t&&t.call(this,e,i),this.ed(),{CU:e,FC:i})},o.prototype.Vha=function(){return this.el.every(function(t){return t.track.je})},o.prototype.EPb=function(){var t=n.__read(r.P3a(this.config,this.el,this.Vc,this.Pd,this.splice),2),e=t[0];return t[1]||void 0===this.el.get(1)&&e},o.prototype.Y8=function(){var t,e,i;return a.assert(this.O),a.assert(!this.O.cs),t=this.el.TX,void 0!==(e=r.R3a(this.config,t,this.O.Mg))&&void 0!==t.Pd&&(t=t.Pd,i=this.config.Xxa&&"immediate"!==this.O.ae?r.k2a(this.console,this.O,this.el):[],this.O.normalize(e,t,i),!0)},e.iIa=o},function(t,e,i){var n,r,a,o,s;function u(t,e,i,n,r,a,o,s){this.gb=t,this.track=e,this.U$=i,this.config=n,this.console=r,this.events=o,this.YQb=s,this.Jn=0,this.c6a=this.wl=!1,this.kl=this.yyb(a)}_esm(e),e.tDa=void 0,n=i(393),r=i(125),a=i(243),o=i(244),s=i(5),Object.defineProperties(u.prototype,{mediaType:{get:function(){return this.track.mediaType},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{xa:{get:function(){return this.gb.O.id},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{$g:{get:function(){return this.gb.$g},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{fU:{get:function(){return this.U$},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{jE:{get:function(){return this.U$},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{KM:{get:function(){return this.gb.KM},enumerable:!1,configurable:!0}}),Object.defineProperties(u.prototype,{If:{get:function(){return this.Ee||(this.Ee=this.Ht())},enumerable:!1,configurable:!0}}),u.prototype.mD=function(){return this.track.N8},u.prototype.Ur=function(){return this.track.je},u.prototype.ri=function(){return!1},u.prototype.TXa=function(){return{U:[],x9:0,cl:0}},u.prototype.l0b=function(){var t;return s.assert(this.Ur()),t=this.If,this.Ee=void 0,t},u.prototype.vab=function(t){return(t=t.pE(this.If))?{Gn:t,reason:"success"}:{Gn:t,reason:"pipelineTryIssueHeaderRequest"}},u.prototype.cancel=function(){this.Ee&&(this.gb.P.yL(this.mediaType,this.Ee),r.lp.instance.oM(this.Ee),this.Ee.removeAllListeners(),this.Ee=void 0)},u.prototype.yyb=function(t){var e,i=0===this.mediaType?this.config.NQa:this.config.Mwa;return(t=new a.Kea(t)).PY(this.track),e=this.config,new o.Lea(i,this.config,t,0===this.mediaType?e.xla:e.yla)},u.prototype.Ht=function(){var e=this,t=n.Ht(this.mediaType,this.track.P,this.config,this.console,function(t){return e.events.emit("transportReport",t)},function(){});return t.on("created",this.YQb),t},e.tDa=u},function(t,e){function i(t,e){this.H=t,this.Zh=e,this.Owa=!1}_esm(e),e.TKa=void 0,i.prototype.Nh=function(t,e,i,n,r,a,o){void 0===o&&(o=!1),this.Owa||(o||(this.Owa=!0),t={type:"error",error:null!=i?i:"NFErr_MC_StreamingFailure",errormsg:t,networkErrorCode:n,httpCode:r,nativeCode:a,viewableId:e,temporaryFailure:o},this.H.error("notifyStreamingError:",t),this.Zh.emit("error",t))},i.prototype.Fn=function(){return this.Owa},e.TKa=i},function(t,e,i){var n,r,a,o,s,u;function c(t){var e=u.call(this)||this;return e.pa=t,e.Kb=[],e.mS=new s.k1({Zk:!1,currentTime:function(){return e.vm?e.Ug:a.T.fD},speed:1}),e}_esm(e),e.Uda=void 0,n=i(2),r=i(5),a=i(9),o=i(20),s=i(252),u=i(406).hea,n.__extends(c,u),Object.defineProperties(c.prototype,{za:{get:function(){return this.mS},enumerable:!1,configurable:!0}}),c.prototype.q3=function(t,e){var i=!this.pa;return i&&(this.pa=t,this.Efa=null!=e&&e.vm?e.Ug:void 0),i},c.prototype.oG=function(){this.Kb=[],this.Efa=void 0},c.prototype.$ka=function(t){o.ga&&r.assert(this.pa===t),this.pa=void 0,this.oG()},c.prototype.Hla=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=this.Kb).push.apply(t,n.__spread(e))},c.prototype.WM=function(){return this.Efa||u.prototype.WM.call(this)},c.prototype.Oo=function(){return!1},c.prototype.TI=function(){},e.Uda=c},function(t,e,i){var n;function r(t){this.eb=t}_esm(e),e.kIa=void 0,n=i(54),Object.defineProperties(r.prototype,{mj:{get:function(){return"PipelineReporter"},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{enabled:{get:function(){return!0},enumerable:!1,configurable:!0}}),r.prototype.Ho=function(t){var e,i;if((t=t.Qi)===n.de.Zn||t===n.de.$p)return t={},e=this.eb(1),i=this.eb(0),e&&(t.videoPipelineSummary=this.o$a(e)),i&&(t.audioPipelineSummary=this.o$a(i)),t},r.prototype.o$a=function(t){var e,i=t.Pa.U;return{actualStartPlayerTimestamp:null===(e=i.xj)||void 0===e?void 0:e.Y,actualPartialPlayerTimestamp:i.i5a,actualCompletePlayerTimestamp:null===(e=t.Dha)||void 0===e?void 0:e.Y,segmentId:t.xa,contentStartMs:null===(e=t.Vc)||void 0===e?void 0:e.Y,contentEndMs:null===(e=t.Pd)||void 0===e?void 0:e.Y,streamingPlayerMs:t.jE.Y,isStreamable:t.mD(),isNormalized:t.ri(),isDoneStreaming:t.Ur(),trackNeedsHeaderRequest:t.track.N8,completedRequests:i.FSa,activeRequests:t.Pa.Jp,unsentRequests:t.Pa.Hs,bytes:{current:i.fa,received:i.O6a,partial:i.cl,completed:i.zC,unsent:i.R0b}}},e.kIa=r},function(t,e,i){var r,n,a,o;function s(t){this.OSb=t}_esm(e),e.QIa=void 0,r=i(2),n=i(20),a=i(54),o=i(410),Object.defineProperties(s.prototype,{mj:{get:function(){return"playgraph-branch-audit"},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{ED:{get:function(){return"paudit"},enumerable:!1,configurable:!0}}),Object.defineProperties(s.prototype,{enabled:{get:function(){return n.ga},enumerable:!1,configurable:!0}}),s.prototype.Ho=function(t){var n;if((t=t.Qi)===a.de.$p||t===a.de.Zn)return n={},this.OSb.forEach(function(t,e){var i=o.Vma(t);n[e]=r.__assign({probabilities:t.$g.map(function(t){return{duration:t.duration,immediate:t.dD,seamless:t.Ue}})},i)}),n},e.QIa=s},function(t,e){function i(t,e,i){this.Yf=t,this.H=e,this.events=i,this.OO=[]}_esm(e),e.iFa=void 0,i.prototype.Ji=function(t){var e=this;this.OO.push(t),this.Yf.ayb(function(){e.sab(t,{zKb:!0})},t.FRa,t.ow)},i.prototype.jMb=function(t){var e=this,i={Qi:t};this.OO.forEach(function(t){e.sab(t,i)})},i.prototype.sab=function(e,t){var i,n;try{n=(i=e.og(t)).event,i.o9a&&this.events.emit(e.ow,n)}catch(t){this.H.error("Error generating event for "+e.ow,t)}},e.iFa=i},function(t,e,i){var s,u,c,n;_esm(e),e.js=e.rZa=e.C0a=void 0,s=i(9),u=i(5),c=i(20),e.C0a=function(t,e){if(void 0===(t=t.qa[e.xa]))return!1;if(void 0===t.Ob||null===t.Ob)throw Error("Cannot validate graph position without endTimeMs");return t=t.Ob-t.Jb,0<=e.offset.Y&&e.offset.Y<t},n=s.T.Eb(100),e.rZa=function(t,e){if(t===e)return!0;if(t&&e&&t.xa===e.xa){if(t.offset===e.offset)return!0;if(t=s.T.abs(t.offset.Qa(e.offset)),n.greaterThan(t))return!0}return!1},e.js=function(t,e,i){var n,r,a,o=e.pa;if(e=e.ZJb,void 0===i&&(i={}),a=o.Ca,a=(o=o.navigator).ue(null!==(n=null==e?void 0:e.id)&&void 0!==n?n:a.Yd),(n=null!==(r=null==e?void 0:e.WWb)&&void 0!==r?r:a.Mg).greaterThan(t))return i.B9a?{offset:t.Qa(n),xa:a.id}:void 0;for(o=(e=o.xLb(a)).next();!o.done;){if(o=(r=o.value).Uk.Qa(r.Mg),(n=(a=n).add(o)).greaterThan(t))return t=t.Qa(a),c.ga&&u.assert(t.Or(s.T.Gb)&&t.lessThan(o)),{xa:r.id,offset:t};if((o=e.next()).done&&i.C9a)return{xa:r.id,offset:t.Qa(a)}}}},function(t,e,i){var p,s,u,f,a,d,h;function n(t,e,i,n,r){this.config=t,this.TYb=e,this.navigator=i,this.events=n,this.console=r,t=a.eN(this.config),this.X5a=[t.SD,t.O9]}_esm(e),e.RCa=void 0,t=i(2),p=i(16),s=t.__importDefault(i(35)).default.tH,u=t.__importDefault(i(144)),f=t.__importDefault(i(6)),a=i(176),d=i(25),h=i(5),n.prototype.aXb=function(t,e,i,n,r,a,o){var s,u,c,h,f,l=[];return this.s5a(r.track)?(c=(u=(s=r.kl).ug).ou,0===(h=a?a.wn(r.track.$d,t):r.track.$d).length&&null!=a&&a.Utb?{stream:void 0,vP:l,reason:"allStreamsFiltered"}:(c&&!c.track.equals(r.track)&&(c=this.hDb(c,h)),0===r.mediaType&&c&&!this.yYb(u,c)?{stream:c,vP:l}:(t=this.nyb(t===p.Jc.xd?p.ma.xd:t===p.Jc.Of?p.ma.Of:t===p.Jc.VR?p.ma.xd:t===p.Jc.ej?p.ma.Kc:p.ma.zh,e,n,r,!!o),(s=s.Gva(t,h,void 0,this.X5a[r.mediaType],!0,r.track.P.aq))?(s.reason&&(f={reason:s.reason,Fva:s.fu,Jz:s.Jz,Lo:s.Lo,Mo:s.Mo},this.wja(r.mediaType,h,i)),this.kBb(r.mediaType,s,h),c=h[s.Je],u.Z8a(c),null!==(u=s.ez)&&void 0!==u&&u.length&&(l=s.ez.map(function(e){return d.ig(h,function(t){return t.id===e})}).filter(d.Z8)),i=s.xu,void 0!==f?{stream:c,vP:l,cXb:f,xu:i}:{stream:c,vP:l,xu:i}):{stream:c,vP:l,reason:"streamSelectionFailure"}))):{stream:c,vP:l,reason:"locationSelectionFailure"}},n.prototype.yja=function(t,e,i,n,r,a,o){var s,u,c;return p.No(e)?a.c6a?a.CRb?(h.assert(a.K4a),a.K4a):(u=(s=a.kl).ug,i=this.bXa(a,i),c=u.ou,(u=i.lm-i.Mc)<this.config.tj||void 0===c?{complete:!1,sC:u,reason:"preBuf"}:0===a.mediaType?{complete:!0,sC:u,reason:"audio"}:(t=t.$Ra(a.mediaType))?{complete:!0,sC:u,reason:t}:(this.s5a(a.track),s.Jta([c],!1,i,this.X5a[a.mediaType]),!(e=s.Qy(i,e,r,c,{It:o})).complete&&n?{complete:!0,reason:"prebufferTimeLimit",sC:u}:(e.sC=u,e))):{complete:!1,reason:"unknown"}:{complete:!0,reason:"playing"}},n.prototype.kBb=function(t,e,i){this.events.emit("streamSelection",{type:"streamSelection",mediaType:t,result:e,streamList:i})},n.prototype.jBb=function(t,e,i,n){t={type:"maxVideoBitrateChanged",time:f.default.time.ea(),streaming:n,maxvb_old:t,maxvb:e,reason:i},this.events.emit(t.type,t)},n.prototype.hDb=function(e,t){var i=t[0];return t.filter(function(t){return t.lu}).every(function(t){return t.bitrate<=e.bitrate&&(i=t)}),i},n.prototype.yYb=function(t,e){return 0<this.config.FP.length||(!(t=t.FN)||t!==e.location)},n.prototype.s5a=function(t){return t.P.ym.LZ(t.P.W,t.$d)},n.prototype.bXa=function(t,e){for(var i,n,r,a=e.Qa(this.TYb),o=[],s=t,u=e,c=0,h=!0;s&&(i=s.TXa(a),h||s.wl);)0<i.U.length&&(u=i.U[0].xj,void 0===n&&(n=i.U[i.U.length-1].xe,r=i.x9>=i.U.length?n:i.U[i.x9].xj),o=i.U.concat(o),c+=i.cl),s=this.navigator.parent(s),h=!1;return{ew:f.default.Io()[t.mediaType],Z:Math.floor(u.Y),Mc:e.Y,Ic:Math.floor(null!==(t=null==n?void 0:n.Y)&&void 0!==t?t:e.Y),lm:Math.floor((r||e).Y),bh:o.reduce(function(t,e){return t+e.fa},0),cl:c,FWa:o.length,U:o}},n.prototype.nyb=function(t,e,i,n,r){var a=this.bXa(n,e),o=1===n.mediaType?this.config.RZ:this.config.ET,s=u.default.instance();return{state:t,sq:t===p.ma.Kc,Qd:n.Jn,playbackRate:i,buffer:a,kla:o,K1a:!1,wM:r,Jp:null==s?void 0:s.Jp,mediaType:n.mediaType,Mc:e.Y,Wr:!1,zpa:!1,b$:0}},n.prototype.wja=function(t,e,i){var n,r;if(1===t){t="manifest";for(var a=0,o=e.length-1;0<=o;--o){if(r=(n=e[o]).bitrate,s(n)){a=Math.max(a,r);break}this.config.bZ&&!n.St?t="bc":n.ju?n.Ez&&(t="hf"):t="av"}this.H2a!==a&&(this.jBb(this.H2a,a,t,i),this.H2a=a)}},i=n,e.RCa=i},function(t,e,i){var E,k;function l(t,e,i,n,r){var a,o,s,u,c,h,f,l,p,d,b=t.console,m=t.S0b,g=t.Ni,v=t.aWb,y=t.vAb,w=t.Ora,_=t.Mia;if(t=t.zRb,s=(o=r||{complete:!0,Rq:0}).root,u=o.complete,c=o.kqb,h=o.B7a,o=o.Rq,f=(h=void 0===h?0:h)<v.length&&v[h]===e.id,l=n&&g.get(n.id),p=((g=(p=r&&n&&l!==e.id?void 0!==l?{Ue:0}:n.Etb(e.id):{Ue:1}).Ue)+(d=void 0===(p=p.dD)?0:p))*(null!==(a=null==r?void 0:r.KTb)&&void 0!==a?a:1),k&&b.trace("reevaluateBranches: visiting "+e.id+", distance: "+i+", probability: "+p+", predecessor: "+(null==n?void 0:n.id)+", decision: "+l+", predecessorComplete: "+u+", isOnRequiredPath: "+f+", requiredPathIndex: "+h+", activeDistance: "+c+", seamless "+g+", immediate "+d+", predecessor sum of: successor weights="+(null==n?void 0:n.Vwa)+", immediate weights= "+(null==n?void 0:n.aaa)),l=0===(a=null!==(m=null===(l=m[e.id])||void 0===l?void 0:l.shift())&&void 0!==m?m:e.duration.Y),!f){if(0===p)return{Raa:!1};if(!u&&0===d&&_<o)return t.JC=Math.min(t.JC||1/0,o-_),{Raa:!1};if(!l&&y<=i&&p<1||!1===s&&p<w)return{Raa:!1}}return h<v.length&&E.assert(v[h]===e.id,""),r=null!==(s=null==r?void 0:r.$g)&&void 0!==s?s:[],n&&g<1&&(r=0===d?r.concat([{Ue:g}]):(s=(null===(v=null===(w=n.O.hq)||void 0===w?void 0:w[0])||void 0===v?void 0:v[0])||0,w=Math.max(0,n.duration.Y-s),k&&b.trace("reevaluateBranches: immediate: "+n.duration.Y+", "+s+", "+w),r.concat([{Ue:g,dD:d,duration:w}]))),t.A7a.push({O:e,Fu:null==n?void 0:n.id,$g:r}),i=u?i+e.duration.Y:c,k&&b.trace("reevaluateBranches: added "+e.id+", visiting successors, active distance: "+i+" probabilities: "+JSON.stringify(r)),{Raa:!0,state:{root:!n,complete:l,KTb:p,$g:r,kqb:i,B7a:h+1,Rq:o+a}}}_esm(e),e.e0b=e.C2b=e.d$=void 0,E=i(5),k=i(20).ga&&!1,e.d$=function(t,e,i,n,r,a,o,s,u){var c,h={A7a:[]},f=(null===(f=i.Uk)||void 0===f?void 0:f.Qa(i.Mg).Y)||0;return 0<a.length&&E.assert(i.id===a[0],"First segment of required path (if it exists) must equal reevaluateBranches start segment."),k&&t.trace("reevaluateBranches: starting at "+i.id+" requiredPath: "+JSON.stringify(a)),c={console:t,S0b:n,Ni:r,aWb:a,vAb:o.Y+f,Ora:s,Mia:u.Y,zRb:h},e.B2b(i,function(t,e,i,n){return l(c,t,e,i,n)}),h},e.C2b=l,e.e0b=function(t,e){!function e(i,n,r,a){a("reevaluateBranches: "+Array(r+1).join(" ")+i.O.id+" ("+JSON.stringify(i.$g)+")"),n.filter(function(t){return t.Fu===i.O.id}).forEach(function(t){return e(t,n,r+1,a)})}(t[0],t,0,e)}},function(t,e,i){var n,r;function a(t){this.Ca=t,this.qa={}}_esm(e),e.$Ia=void 0,n=i(2),r=i(409),a.prototype.ue=function(t){var e=this.qa[t];if(void 0===e){if(void 0===(e=this.Ca.qa[t]))throw Error("Segment not found ("+t+")");e=new r.eJa(t,e,this.Ca.ae),this.qa[t]=e}return e},a.prototype.hFb=function(t){var e=this;return t.O.next?Object.keys(t.O.next).map(function(t){return e.ue(t)}):[]},a.prototype.xLb=function(e){var i;return n.__generator(this,function(t){switch(t.label){case 0:return[4,e];case 1:t.bd(),i=e,t.label=2;case 2:return i.O.Qe?[4,i=this.ue(i.O.Qe)]:[3,4];case 3:return t.bd(),[3,2];case 4:return[2]}})},a.prototype.yIb=function(t,e){return r.e0a(t.kN(e))},a.prototype.Ai=function(i){var n=this;Object.keys(i).forEach(function(t){var e;return null===(e=n.ue(t))||void 0===e?void 0:e.Ai(i[t])})},e.$Ia=a},function(t,e,i){var h,f,n;_esm(e),e.IRa=e.QSa=void 0,h=i(2),f=i(25),n=i(911),e.QSa=function(i){return new n.rBa(function(e){return Object.keys(e.O.next||{}).map(function(t){return{m2b:t=i.ue(t),weight:null!==(t=null===(t=e.Uk)||void 0===t?void 0:t.Qa(e.Mg).Y)&&void 0!==t?t:1/0}})})},e.IRa=function(s,u){var e=Object.keys(s.qa),c=Object.keys(u.qa),t=c.filter(function(t){return-1===e.indexOf(t)}),i=e.filter(function(t){return-1===c.indexOf(t)}),n=e.filter(function(t){var e,i,n,r,a,o=-1!==c.indexOf(t)&&(o=s.qa[t],t=u.qa[t],!(o.Qe===t.Qe&&o.Ob===t.Ob&&o.Jb===t.Jb&&o.ae===t.ae&&o.W===t.W&&(r=null!==(e=o.hq)&&void 0!==e?e:[],a=null!==(e=t.hq)&&void 0!==e?e:[],!r.some(function(t,e){return 0!==f.vt(t,null!==(e=a[e])&&void 0!==e?e:[]).length})&&r.length===a.length)&&(i=null!==(r=o.next)&&void 0!==r?r:{},n=null!==(r=t.next)&&void 0!==r?r:{},!(t=Object.keys(i)).some(function(t){var e;return(null===(e=i[t])||void 0===e?void 0:e.ae)!==(null===(e=n[t])||void 0===e?void 0:e.ae)||(null===(e=i[t])||void 0===e?void 0:e.weight)!==(null===(t=n[t])||void 0===t?void 0:t.weight)})&&(r=Object.keys(n),0===h.__spread(f.vt(t,r),f.vt(r,t)).length))));return o});return{Uqb:t,MO:i,mub:n,L0b:f.vt(e,h.__spread(n,t,i))}}},function(t,e,i){var n,r,a,o;function s(t){this.bBb=t,this.kya=!1,this.Saa=new a.sea,this.Ww=new a.sea,this.hQa=new o.rea}_esm(e),e.rBa=void 0,n=i(5),r=i(237),a=i(912),o=i(411),s.prototype.B2b=function(t,i){var s,u,c;u=(s=this).bBb,c=this.hQa,n.assert(!this.kya),this.kya=!0,this.Saa.clear(),this.Ww.clear(),c.set(t,{rM:0,state:{root:!1,complete:!0,B7a:0,Rq:0}});for(var h=new r.C0([t],function(t,e){return c.get(t).rM-c.get(e).rM}),f=this;!h.empty;)!function(){var n,r,a=h.pop(),t=c.get(a),e=t.Fu,o=t.rM;t=t.state,f.Saa.has(a)||(f.Saa.add(a),e=i(a,o,e,t),n=e.Raa,r=e.state,u(a).forEach(function(t){var e,i=t.m2b;!s.Saa.has(i)&&(t=o+t.weight,n)&&(s.Ww.has(i)?t<(e=s.hQa.get(i)).rM&&(e.rM=t,e.Fu=a,e.state=r,h.JTb(i)):(s.Ww.add(i),c.set(i,{rM:t,Fu:a,state:r}),h.push(i)))}))}();this.kya=!1},e.rBa=s},function(t,e){var i,n,r;function a(t){return void 0!==(null==t?void 0:t.qMa)}function o(t){return(a(t)?t:Object.defineProperties(t,{qMa:{value:{},configurable:!1,enumerable:!1}})).qMa}function s(){this.F$=0,this.id=r=(r+1)%n}_esm(e),e.sea=void 0,n=null!==(i=Number.MAX_SAFE_INTEGER)&&void 0!==i?i:1e9,r=Date.now()%n,s.prototype.add=function(t){return o(t)[this.id]=this.F$,this},s.prototype.has=function(t){return a(t)&&o(t)[this.id]===this.F$},s.prototype.delete=function(t){return!!this.has(t)&&!(o(t)[this.id]=void 0)},s.prototype.clear=function(){return this.F$=(this.F$+1)%n,this},e.sea=s},function(t,e,i){var n,h,f,r;function a(t){return{value:t.gb,parent:t.Fu}}function o(){this.Kb=new n.AGa,this.Gs=new r.ALa}_esm(e),e.RIa=void 0,n=i(9),h=i(25),f=i(5),r=i(914),Object.defineProperties(o.prototype,{empty:{get:function(){return this.Kb.empty},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{size:{get:function(){return this.Kb.size},enumerable:!1,configurable:!0}}),o.prototype.reset=function(){var t=this.Kb.values();this.Kb.clear(),this.Gs.clear(),t.forEach(function(t){return t.Df()})},o.prototype.rz=function(t){return this.Kb.get(t)},o.prototype.has=function(t){return this.Kb.has(t)},o.prototype.hV=function(t){this.Gs.hV(t)},o.prototype.Ina=function(t){return this.Gs.parent(t)},o.prototype.UEb=function(t){return this.Gs.children(t)},o.prototype.voa=function(t){return this.Gs.voa(t)},o.prototype.Hua=function(t){var e;this.Kb.delete(t.O.id,t)&&(e=this.Gs.children(t),this.Gs.root===t?0===e.length?this.Gs.clear():(f.assert(1===e.length,"cannot remove the root branch with multiple successors"),this.Gs.HVb(e[0])):(f.assert(0===e.length,"cannot remove non-root branch with successors"),this.Gs.remove(t)))},o.prototype.forEach=function(i){var n=this;this.Kb.forEach(function(t,e){return i(t,e,n)})},o.prototype.reduce=function(n,t){var r=this;return this.Kb.reduce(function(t,e,i){return n(t,e,i,r)},t)},o.prototype.map=function(i){var n=this;return this.Kb.map(function(t,e){return i(t,e,n)})},o.prototype.filter=function(i){var n=this;return this.Kb.filter(function(t,e){return i(t,e,n)})},o.prototype.JHb=function(){var n={};return this.forEach(function(t,e){var i;(t=t.Rq)&&(null!==(i=n[e])&&void 0!==i?i:n[e]=[]).push(t.Y)}),n},o.prototype.Y0b=function(t,e){var i=this;return t=this.FNb(t,e).target,t=(e=this.Gs.CUb(t.map(a))).MO,e=e.n7a,t.forEach(function(t){return i.Kb.delete(t.O.id,t)}),{MO:t,n7a:e.map(function(t){return t.value})}},o.prototype.FNb=function(t,s){var u,c;return u=this,c=[],{target:t.reduce(function(t,e,i){var n,r,a,o;return f.assert(0===i||e.Fu),e.Fu&&!(r=null===(n=h.yQa(t,function(t){return t.gb.O.id===e.Fu}))||void 0===n?void 0:n.gb)?(f.assert(void 0!==h.ig(c,function(t){return t.O.id===e.Fu}),"predecessorSegmentId "+e.Fu+" specified without previously specifying predecessor requiredBranch."),c.push(e)):((n=null!=(n=h.ig(u.rz(e.O.id),function(t){return u.Gs.parent(t)===r||0===i}))?n:(o=r,(a=s((a=e).O.id,o))&&u.Kb.set(a.O.id,a),a)).$g=e.$g,t.push({gb:n,Fu:r}),null!=n&&n.VV&&n.update(e.O)),t},[])}},e.RIa=o},function(t,e,i){var n,a,o;function r(){this.K=new n.rea}_esm(e),e.ALa=void 0,n=i(411),a=i(5),o=i(25),Object.defineProperties(r.prototype,{empty:{get:function(){return!this.IA},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{root:{get:function(){var t;return null===(t=this.IA)||void 0===t?void 0:t.value},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{values:{get:function(){var e=[];return this.hV(function(t){return!!e.push(t)}),e},enumerable:!1,configurable:!0}}),r.prototype.has=function(t){return!!this.K.get(t)},r.prototype.parent=function(t){return t=this.K.get(t),a.assert(t,"Attempted to find the parent of a node not in the tree"),null===(t=t.parent)||void 0===t?void 0:t.value},r.prototype.children=function(t){return t=this.K.get(t),a.assert(t,"Attempted to find the children of a node not in the tree"),t.children?t.children.map(function(t){return t.value}):[]},r.prototype.voa=function(t){return t=this.K.get(t),a.assert(t,"Attempted to find the children of a node not in the tree"),void 0!==t.children&&0<t.children.length},r.prototype.add=function(t,e){var i;return a.assert(!this.K.get(t),"Attempted to add a value to tree that is already present"),i={value:t},void 0===this.IA?(a.assert(void 0===e,"a parent cannot be specified when the tree is empty"),this.IA=i):(a.assert(void 0!==e,"a parent must be specified when the tree is non-empty"),e=this.K.get(e),a.assert(e,"Parent value does not exist in tree"),this.LQa(i,e)),this.K.set(t,i),this},r.prototype.remove=function(t){return t=this.K.get(t),a.assert(t,"Attempted to remove a node not in the tree"),this.removeNode(t),this},r.prototype.removeNode=function(t){var e=this;this.xma(function(t){return e.K.delete(t)},t.value),void 0===t.parent?this.IA=void 0:this.detach(t)},r.prototype.move=function(t,e){return t=this.K.get(t),e=this.K.get(e),a.assert(t,"cannot move a value that is not in the tree"),a.assert(e,"cannot move a value to a parent value not in the tree"),a.assert(t.parent,"cannot move the root node"),a.assert(!this.uKb(t,e),"cannot move a node below itself or one of its decendants"),t.parent!==e&&(this.detach(t),this.LQa(t,e)),this},r.prototype.HVb=function(t){var e,i=this;t=this.K.get(t),a.assert(t,"cannot replant at a value that is not in the tree"),e=[],this.detach(t),this.xma(function(t){return i.K.delete(t),e.unshift(t),!0}),this.IA=t},r.prototype.clear=function(){return this.IA&&this.remove(this.IA.value),this},r.prototype.vWa=function(t,e){var i=this;t=this.K.get(t),a.assert(t,"cannot iterate children of a value not in the tree"),null!==(t=t.children)&&void 0!==t&&t.forEach(function(t){return e(t.value,i)})},r.prototype.hV=function(e,t){var i=this;a.assert(!this.empty||void 0===t,"cannot iterate from a value on an empty tree"),this.empty||(t=null!=t?t:this.IA.value,e(t,this)&&this.vWa(t,function(t){return i.hV(e,t)}))},r.prototype.xma=function(e,t){var i=this;a.assert(!this.empty||void 0===t,"cannot iterate from a value on an empty tree"),this.empty||(t=null!=t?t:this.IA.value,this.vWa(t,function(t){return i.xma(e,t)}),e(t,this))},r.prototype.CUb=function(t){var e,i,n,r=this;return a.assert(0===(n=t).length||void 0===n[0].parent&&n.every(function(e,t){return 0===t||o.Mp(n,function(t){return t.value===e.parent})<t}),"entries must be in topological order"),0===t.length?(e=this.values,i=[],this.clear()):(i=t.filter(function(t){return r.has(t.value)&&t.parent!==r.parent(t.value)}),e=this.values.filter(function(e){return-1===o.Mp(t,function(t){return t.value===e})}),this.clear(),t.forEach(function(t){return r.add(t.value,t.parent)})),{MO:e,n7a:i}},r.prototype.LQa=function(t,e){var i;(null!==(i=(t.parent=e).children)&&void 0!==i?i:e.children=[]).push(t)},r.prototype.detach=function(t){var e;a.assert(t.parent,"cannot detach the root"),a.assert(void 0!==t.parent.children,"logic error: parent node does not have children"),e=t.parent.children.indexOf(t),a.assert(0<=e,"logic error: node does not appear in the children of its parent"),t.parent.children.splice(e,1),t.parent=void 0},r.prototype.uKb=function(t,e){for(;void 0!==e;){if(e===t)return!0;e=e.parent}return!1},e.ALa=r},function(t,e,i){var n,l,p,u,d,b,c,m;function r(t,e,i,n,r,a,o){var s=this;void 0===o&&(o=500),this.H=t,this.config=e,this.Qb=i,this.events=n,this.Lla=r,this.Yf=a,this.gtb=o,this.Pta=this.yl=0,this.t8=[],this.a5={It:0},this.state=new u.er(p.Jc.dj),this.tf=new u.er(p.ma.zh),this.zi=new c.IB({xD:10,wu:this,source:"BufferStateTracker",Sha:function(){return{isBuffering:s.pg,alwaysRunUnderflowTimer:s.config.BL}}})}_esm(e),e.Kza=void 0,n=i(2),l=n.__importDefault(i(6)),p=i(16),u=i(9),d=i(22),b=i(5),c=i(118),m=i(72),Object.defineProperties(r.prototype,{It:{get:function(){return this.a5.It},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{pg:{get:function(){return p.No(this.state.value)},enumerable:!1,configurable:!0}}),r.prototype.Gaa=function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){0===t.mediaType&&(e.vRa=n.__assign(n.__assign({},e.vRa),{audio:{trackId:t.trackId,trackIndex:t.oE}}))})},r.prototype.x4a=function(t){this.set(p.Jc.dj),this.SI(t,p.Jc.xd)},r.prototype.f9=function(){this.a5.It++},r.prototype.rX=function(t){this.config.BL||void 0===this.Uz&&this.pg&&this.tka(),this.Uz={cD:t.httpCode,ph:t.errorCode,uj:t.nativeCode}},r.prototype.o9=function(){this.Uz=void 0,this.config.BL||this.D4()},r.prototype.sk=function(t){this.pg||(this.SI(t,p.Jc.Of),this.pg&&(this.Uz||this.config.BL)&&this.tka())},r.prototype.fRb=function(t,e){this.state.value!==p.Jc.xd&&this.SI(t,p.Jc.VR),this.Gaa(e)},r.prototype.DQb=function(t,e){var i=this;this.config.ftb&&this.pg&&(-1===this.t8.indexOf(t)&&this.t8.push(t),2===this.t8.length&&Promise.resolve().then(function(){i.pg&&void 0!==i.dx&&i.Pe("memoryLimit",e.zZ,e.AZ)}))},r.prototype.vXb=function(t,e){b.assert(this.state.value===p.Jc.xd&&void 0===this.dx),this.dx=t,e&&(this.events.emit("initialAudioTrack",{type:"initialAudioTrack",trackId:e.trackId,trackIndex:e.oE}),this.Gaa(e))},r.prototype.IXb=function(t,e,i){b.assert(this.pg),this.kpa=null!=t?t:this.kpa,this.eW=null!=e?e:this.eW,void 0===this.c7?this.c7=i:void 0!==(null==i?void 0:i.reason)&&(this.c7.reason=i.reason)},r.prototype.Pe=function(t,e,i){b.assert(this.pg&&void 0!==this.dx&&void 0===this.iG&&void 0===this.Maa&&void 0===this.X2),this.iG=t,this.Maa=e,this.X2=i,this.Rp=100,this.iSa(),this.D4(),null!==(i=this.Aja)&&void 0!==i&&i.Nb(),this.state.value===p.Jc.Of&&(this.Pta=l.default.time.ea()),this.Q4(),this.set(p.Jc.ej),this.X2=this.Maa=this.iG=this.c7=this.eW=this.kpa=this.dx=void 0},r.prototype.stop=function(){var t;this.set(p.Jc.dj),this.iSa(),this.D4(),null!==(t=this.Aja)&&void 0!==t&&t.Nb()},r.prototype.zja=function(e,i,t,n){var r,a,o,s,u,c,h,f=this;b.assert(this.pg),null!==(r=this.Aja)&&void 0!==r&&r.Nb(),this.state.value===p.Jc.Of&&l.default.time.ea()<this.Pta+this.config.Nra?(a=this.config.Nra-(l.default.time.ea()-this.Pta),this.Aja=this.Yf.nU(m.Jk.tJ(d.T.Eb(a)),function(){f.zja(e,i,t,n)})):(r=t.aN(0),o=t.aN(1),s=l.default.time.ea()-this.yl,(r||o)&&(c=(u=function(t){return t?t.mD()||t.Ur()?n.yja(f.state.value,e,s>=f.config.vA,i,t,f.It):{complete:!1,reason:"selecteeNotStreamable"}:{complete:!0,reason:"noSelectee"}})(r),u=u(o),h=function(t){return{reason:t.reason,complete:t.complete,bl:null!==(t=t.sC)&&void 0!==t?t:0}},this.zi.wy({as:h(c),vs:h(u),bt:s}),(h=o?u:c).q2b=o&&u.sC||0,h.Yrb=r&&c.sC||0,c.complete&&u.complete?(h.complete=!0,this.Pe(null!==(a=h.reason)&&void 0!==a?a:"unknown",null!==(a=h.q2b)&&void 0!==a?a:0,null!==(a=h.Yrb)&&void 0!==a?a:0)):(h.complete=!1,this.wtb(h),this.zi.wy({bp:this.Rp}))))},r.prototype.wtb=function(t){var e,i=t.progress;i=t.tD?(l.default.time.ea()-this.yl)/this.config.vA:i||(null!==(e=t.sC)&&void 0!==e?e:0)/this.config.tj,(t=Math.min(Math.max(Math.round(100*i),null!==(i=this.Rp)&&void 0!==i?i:0),99))!=this.Rp&&(this.Rp=t)},r.prototype.SI=function(t,e){b.assert(e===p.Jc.xd||void 0!==t),this.dx=t,this.Rp=0,this.b9=void 0,this.a5.It=0,this.t8=[],t=this.state.value===p.Jc.xd||this.state.value===p.Jc.Of,this.yl=l.default.time.ea(),this.set(e),t||(this.iBb(),this.eYb())},r.prototype.set=function(t){switch(this.state.set(t),t){case p.Jc.dj:this.tf.set(p.ma.dj);break;case p.Jc.xd:case p.Jc.VR:this.tf.set(p.ma.xd);break;case p.Jc.Of:this.tf.set(p.ma.Of);break;case p.Jc.ej:this.tf.set(p.ma.Kc)}},r.prototype.iBb=function(){b.assert(this.events&&void 0!==this.Rp),this.b9=this.Rp,this.events.emit("bufferingStarted",{type:"bufferingStarted",time:l.default.time.ea(),percentage:this.Rp})},r.prototype.eYb=function(){var t=this;this.isa=setInterval(function(){return t.hBb()},this.gtb)},r.prototype.iSa=function(){this.isa&&(clearInterval(this.isa),this.isa=void 0)},r.prototype.hBb=function(){this.pg&&this.events&&void 0!==this.Rp&&this.Rp!==this.b9&&this.events.emit("buffering",{type:"buffering",time:l.default.time.ea(),percentage:this.Rp})&&(this.b9=this.Rp)},r.prototype.Q4=function(){var t;b.assert(this.events&&this.dx&&void 0!==this.iG&&void 0!==this.X2&&void 0!==this.Maa),this.b9=this.Rp,this.events.emit("bufferingComplete",n.__assign({type:"bufferingComplete",time:l.default.time.ea(),actualStartPosition:this.dx,reason:this.iG,aBufferLevelMs:this.X2,vBufferLevelMs:this.Maa,selector:this.kpa,initBitrate:this.eW,initSelReason:null===(t=this.c7)||void 0===t?void 0:t.reason,skipbackBufferSizeBytes:this.occ},this.vRa))},r.prototype.tka=function(){var t=this;this.config.kbb&&(!this.$A||this.$A.state!==m.Ym.complete&&this.$A.state!==m.Ym.pM?void 0===this.$A&&(this.$A=this.Yf.AG(function(){return t.Cab()},"underflow")):this.$A.Hm())},r.prototype.D4=function(){this.$A&&(this.$A.state!==m.Ym.pM&&this.$A.Nb(),this.$A=void 0)},r.prototype.Cab=function(){var e,i;return n.__generator(this,function(t){switch(t.label){case 0:return e=this.config.c8,this.H.trace("BufferingStateTracker: starting underflow timer: "+e+"ms"),[4,m.Jk.tJ(d.T.Eb(e))];case 1:t.bd(),t.label=2;case 2:return this.pg?(i=this.Qb.X0a||0,i=l.default.time.ea()-i,e<=i?(this.H.trace("Forcing streaming failure, "+i+"ms since data received"),this.Lla.hRb(this.Uz),[2]):(this.H.trace("BufferingStateTracker: network activity, wait "+(e-i)+"ms"),[4,m.Jk.tJ(d.T.Eb(e-i))])):[3,4];case 3:return t.bd(),[3,2];case 4:return[2]}})},n.__decorate([c.bc({methodName:"onTemporaryNetworkError",pm:!0})],r.prototype,"rX",null),n.__decorate([c.bc({methodName:"onUnderflow",pm:!0})],r.prototype,"sk",null),n.__decorate([c.bc({methodName:"bufferingComplete",pm:!0})],r.prototype,"Pe",null),n.__decorate([c.bc({methodName:"stop",pm:!0})],r.prototype,"stop",null),n.__decorate([c.bc({methodName:"checkStreamingBufferingComplete",pm:!0})],r.prototype,"zja",null),n.__decorate([c.bc({methodName:"createUnderflowTask",pm:!0})],r.prototype,"tka",null),n.__decorate([c.bc({methodName:"destroyUnderflowTask",pm:!0})],r.prototype,"D4",null),n.__decorate([c.bc({methodName:"onUnderflowTimeout",pm:!0})],r.prototype,"Cab",null),e.Kza=r},function(t,e,i){var a;_esm(e),e.IVa=void 0,a=i(25),e.IVa=function(t,n){var r=[];return t=t.filter(function(t){return t.VV}).map(function(t){var e=n(t.P),i=a.vt(e,t.vg).map(function(t){return t.mediaType});return r=a.m3(r,i),{gb:t,vg:e}}),{nub:r,Zsb:t}}},function(t,e,i){var n,r,a;function o(){}_esm(e),e.oKa=void 0,n=i(2),r=i(22),a=i(5),e.oKa=(o.QHb=function(t){var e,i;if(t.ri)return i=(t=n.__read(t.vg,2))[1],t=null===(e=t[0].gp)||void 0===e?void 0:e.Uk,e=null===(i=null==i?void 0:i.gp)||void 0===i?void 0:i.Uk,a.assert(t),{y2b:t,A2b:i=e?r.T.min(t,e):t}},o)},function(t,e,i){var o,n,r,a,s;function u(t,e,i,n,r,a){this.Yf=t,this.Ls=e,this.config=i,this.qQb=n,this.Cf=r,this.console=a,this.Pfa=new o.Wh}_esm(e),e.Dza=void 0,o=i(17),n=i(9),r=i(72),a=i(20),s=i(16),u.HEb=function(t){var e;return null!==(e=t.xe)&&void 0!==e?e:t.xO},u.BFb=function(t){var e=t.O,i=t.eO;return e.Qe||(i.length?i:t.oA)[0]},u.prototype.oxa=function(t,e){var i,n,r=this,a=t.O;this.reset(),a.bv||a.oA.length<=1&&(null===(i=a.Zw)||void 0===i||!i.length)||(i=(n=this.xtb(t)).wva,e=e.lessThan(n.AJb),this.KWb(a,e?i:void 0),e&&this.Pfa.on(t.events,"branchEdited",function(){r.oxa(t,r.Yf.za.currentTime)}))},u.prototype.hSa=function(){var t;null!==(t=this.UTa)&&void 0!==t&&t.Nb(),this.UTa=void 0},u.prototype.reset=function(){this.hSa(),this.Pfa.clear()},u.prototype.xtb=function(t){var e,i;return t=u.HEb(t),e=n.T.Eb(this.config.BD),i=n.T.Eb(this.config.UOb+this.config.YW),e=t.Qa(e),{AJb:s.No(this.Cf.value)?t.Qa(i):e,wva:e}},u.prototype.KWb=function(t,e){var i=this;this.hSa(),this.UTa=e?this.Yf.nU(r.Jk.XP(e),function(){return i.U1a(t)},"scheduled branch decision"):this.Ls.nU(r.Jk.F2b,function(){return i.U1a(t)},"immediate branch decision")},u.prototype.U1a=function(t){var e;this.Pfa.clear(),e=u.BFb(t),a.ga&&this.console.trace("BranchDecisionMaker making decision for "+t.id+", decision is "+e),this.qQb(t.id,e,!0)},e.Dza=u},function(t,e,i){var r;_esm(e),e.$Wa=void 0,r=i(920),e.$Wa=function(t,n){return t.reduce(function(e,t){var i=n(t);return t.lq().forEach(function(t){return e.Kha(t.mediaType,t.ut,!i)}),e},new r.ZIa)}},function(t,e,i){var n;function r(){this.Dr=new n.wR,this.DU=new n.wR}_esm(e),e.ZIa=void 0,n=i(412),Object.defineProperties(r.prototype,{total:{get:function(){var t=new n.wR;return t.add(this.Dr),t.add(this.DU),t},enumerable:!1,configurable:!0}}),r.prototype.add=function(t){this.Dr.add(t.Dr),this.DU.add(t.DU)},r.prototype.Kha=function(t,e,i){(i?this.DU:this.Dr).Kha(t,e)},e.ZIa=r},function(t,e){_esm(e),e.eZa=void 0,e.eZa=function(t,i){return t.reduce(function(t,e){return t+e.P5(i).Y},0)}},function(t,e,i){var o,s;_esm(e),e.fTa=void 0,o=i(2),s=i(16),e.fTa=function(t){var e,i;function n(t){s.No(t.newValue)&&!s.No(t.oldValue)?(null!=i&&i.Nb(),i=e.nU.apply(e,o.__spread(r))):null!=i&&i.Nb()}for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];a=t.Qf,e=t.Ls,a.state.addListener(n),n({oldValue:s.Jc.dj,newValue:a.state.value})}},function(t,e,i){var s,u;function c(e,i){return Object.keys(e.OD).map(function(t){return e.OD[t]}).filter(function(t){return void 0===t.gH||1===t.gH}).reduce(function(t,e){return t+e.Dr[i]},0)}function n(t,e,i){this.Ca=t,this.console=e,this.nna=i}_esm(e),e.SKa=void 0,s=i(16),u=i(20),n.prototype.Vtb=function(t,e,i){var n,r=i&&this.Ca.config.U1b,a=this.Ca.config.Wxa||r,o=this.nna();return r&&(r=t.global,(n={})[0]=r[0]-c(t,0),n[1]=r[1]-c(t,1),r=n),n=r,o=this.$Ra(e)||this.yub(t)||this.wub(t,o,n)||this.xub(t,o,n,e),n=s.tua(o),!o||n&&!a?(u.ga&&this.console.log("canIssueRequest "+this.Ca.id+" ["+e+"] static limit: "+i+", usage: "+JSON.stringify(t)+", success "+o),{result:!0,reason:o}):(u.ga&&this.console.log("canIssueRequest "+this.Ca.id+" ["+e+"] static limit: "+i+", usage: "+JSON.stringify(t)+", failed "+o),{result:!1,reason:o})},n.prototype.$Ra=function(t){var e=this.Ca.config.gA;if(this.Ca.qFb(t)>=(e||1/0))return"mediaDurationLimit"},n.prototype.yub=function(t){return t.OD[this.Ca.id].total.total>(this.Ca.f6()||1/0)?"playgraphMemoryLimit":void 0},n.prototype.wub=function(t,e,i){return t=t.global,i?i[0]+i[1]>(e.Gwa.total||1/0)?"staticMemoryLimit":void 0:t.total>(e.total.total||1/0)?"globalMemoryLimit":void 0},n.prototype.xub=function(t,e,i,n){var r=t.global;return i?(u.ga&&this.console.log("checkRequestByMediaTypeMemory ["+n+"]: using static limit "+e.Gwa[n]+", usage: "+i+" (global: "+r[n]+"  - certain contiguous: "+c(t,n)+")"),i[n]>(e.Gwa[n]||1/0)?1===n?"staticVideoMemoryLimit":"staticAudioMemoryLimit":void 0):r[n]>(e.total[n]||1/0)?1===n?"globalVideoMemoryLimit":"globalAudioMemoryLimit":void 0},e.SKa=n},function(t,e){function i(t){this.console=t,this.Eja()}_esm(e),e.TIa=void 0,i.prototype.get=function(t){return this.w4[t]||this.Ni[t]},i.prototype.set=function(t,e){void 0===this.Ni[t]&&(this.Ni[t]=e)},i.prototype.AXb=function(t,e){void 0===this.get(t)&&(this.w4[t]=e)},i.prototype.clear=function(t){this.w4[t]=void 0,this.Ni[t]=void 0},i.prototype.Tub=function(t){var e;this.Ni=((e={})[t]=this.Ni[t],e),this.w4={}},i.prototype.Eja=function(){this.Ni={},this.w4={}},e.TIa=i},function(t,e,i){var n,r,a;function o(t){this.ax=t,this.$c=a.Lba,this.hE={},this.ZY={}}_esm(e),e.VIa=e.OE=void 0,n=i(2),r=i(5),(i=a=e.OE||(e.OE={}))[i.Lba=0]="CREATED",i[i.Aea=1]="STARTED",i[i.PR=2]="REQUEST_ISSUED",i[i.Bx=3]="EVALUATED",Object.defineProperties(o.prototype,{state:{get:function(){return this.$c},enumerable:!1,configurable:!0}}),o.prototype.start=function(){var n=this;this.$c!==a.Aea&&(this.RW(a.Aea),[a.Bx,a.PR].forEach(function(e){var i=new Promise(function(t){r.assert(n.ZY&&n.hE,"state promises should be defined"),n.ZY[e]=t,n.hE[e]=i})}),this.ax(),this.RW(a.Bx))},o.prototype.RW=function(t){this.$c=t,!this.ZY||null!=(t=this.ZY[t])&&t()},o.prototype.Nb=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return this.$c!==a.Aea?[3,2]:(r.assert(this.hE,"state resolves should be defined"),[4,this.hE[a.Bx]]);case 1:t.bd(),t.label=2;case 2:return this.ZY=this.hE=void 0,[2]}})})},o.prototype.Uaa=function(e,i){n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:if(this.$c===a.Bx)return[3,6];switch(r.assert(this.hE,"state promises should be defined"),e){case a.Bx:return[3,1];case a.PR:return[3,3]}return[3,5];case 1:return[4,this.hE[a.Bx]];case 2:return t.bd(),[3,6];case 3:return[4,this.hE[a.PR]];case 4:return t.bd(),[3,6];case 5:return[3,6];case 6:return null!=i&&i(),[2]}})})},e.VIa=o},function(t,e,i){var r,a;_esm(e),e.zRa=void 0,r=i(254),a=i(928),e.zRa=function(){return function(n){var t,i,e;for(e in t={},i=r.map(n.i2a),n.$7a)!function(e){t[e]=function(t){return i({rules:[{xWb:e,config:t}]})}}(e);return t.qbc=i({rules:[],irb:!0}),t.$u=i({rules:[],$u:!0}),{qzb:t,Zbc:n,fUb:function(t,e,i){return a.uTa(t,e,i,n.$7a,n.i2a)}}}}},function(t,e,i){(function(T,A){var O;O={},function(){var t,o,e,n,s,i,u,r,a,c,h;function f(i,n){return function(t,e){"function"!=typeof i[t]&&Object.defineProperty(i,t,{configurable:!0,writable:!0,value:e}),n&&n(t,e)}}function l(t,e,i){var n=h.get(t);if(g(n)){if(!i)return;n=new a,h.set(t,n)}if(g(t=n.get(e))){if(!i)return;t=new a,n.set(e,t)}return t}function p(t,e,i){return!g(e=l(e,i,!1))&&!!e.has(t)}function d(t,e,i){if(!g(e=l(e,i,!1)))return e.get(t)}function b(e,t){var i,n,r=[];if(g(e=l(e,t,!1)))return r;if(!_(t=E(e=e.keys(),s)))throw new TypeError;if(!v(e=t.call(e)))throw new TypeError;for(t=0;;){if(!(i=!(i=e.next()).done&&i))return r.length=t,r;i=i.value;try{r[t]=i}catch(t){try{(n=e.return)&&n.call(e)}finally{throw t}}t++}}function m(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function g(t){return void 0===t}function v(t){return"object"==typeof t?null!==t:"function"==typeof t}function y(t){return"symbol"==typeof(t=function(t,e){var i;switch(m(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}if(e=3===e?"string":5===e?"number":"default",void 0!==(i=E(t,n))){if(v(t=i.call(t,e)))throw new TypeError;return t}t:{if("string"===("default"===e?"number":e)){if(_(e=t.toString)&&!v(e=e.call(t)))break t;e=t.valueOf}else{if(_(e=t.valueOf)&&!v(e=e.call(t)))break t;e=t.toString}if(!_(e)||v(e=e.call(t)))throw new TypeError}return e}(t,3))?t:""+t}function w(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function _(t){return"function"==typeof t}function E(t,e){if(null!=(t=t[e])){if(!_(t))throw new TypeError;return t}}function k(t){var e,i=Object.getPrototypeOf(t);return"function"!=typeof t||t===r||i!==r||null==(e=(e=t.prototype)&&Object.getPrototypeOf(e))||e===Object.prototype||"function"!=typeof(e=e.constructor)||e===t?i:e}function S(t){return t.Jkb=void 0,delete t.Jkb,t}e="object"==typeof A?A:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=f(O),void 0===e.Reflect?e.Reflect=O:i=f(e.Reflect,i),t=i,o=Object.prototype.hasOwnProperty,e="function"==typeof Symbol,n=e&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",s=e&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",e="function"==typeof Object.create,i={__proto__:[]}instanceof Array,u={create:e?function(){return S(Object.create(null))}:i?function(){return S({__proto__:null})}:function(){return S({})},has:(i=!e&&!i)?function(t,e){return o.call(t,e)}:function(t,e){return e in t},get:i?function(t,e){return o.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},r=Object.getPrototypeOf(Function),a=(e="object"==typeof T&&T.CVa&&"true"===T.CVa.REFLECT_METADATA_USE_MAP_POLYFILL)||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var n,i,e;function r(t){return t}function a(t,e){return e}function o(t,e){return[t,e]}return n={},i=[],e=function(){function t(t,e,i){this.Me=0,this.bf=t,this.Bf=e,this.mpb=i}return t.prototype["@@iterator"]=function(){return this},t.prototype[s]=function(){return this},t.prototype.next=function(){var t,e=this.Me;return 0<=e&&e<this.bf.length?(t=this.mpb(this.bf[e],this.Bf[e]),e+1>=this.bf.length?(this.Me=-1,this.Bf=this.bf=i):this.Me++,{value:t,done:!1}):{value:void 0,done:!0}},t.prototype.throw=function(t){throw 0<=this.Me&&(this.Me=-1,this.Bf=this.bf=i),t},t.prototype.return=function(t){return 0<=this.Me&&(this.Me=-1,this.Bf=this.bf=i),{value:t,done:!0}},t}(),function(){function t(){this.bf=[],this.Bf=[],this.Dv=n,this.$s=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this.bf.length},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return 0<=this.gy(t,!1)},t.prototype.get=function(t){return 0<=(t=this.gy(t,!1))?this.Bf[t]:void 0},t.prototype.set=function(t,e){return t=this.gy(t,!0),this.Bf[t]=e,this},t.prototype.delete=function(t){var e,i=this.gy(t,!1);if(0<=i){for(e=this.bf.length,i+=1;i<e;i++)this.bf[i-1]=this.bf[i],this.Bf[i-1]=this.Bf[i];return this.bf.length--,this.Bf.length--,t===this.Dv&&(this.Dv=n,this.$s=-2),!0}return!1},t.prototype.clear=function(){this.bf.length=0,this.Bf.length=0,this.Dv=n,this.$s=-2},t.prototype.keys=function(){return new e(this.bf,this.Bf,r)},t.prototype.values=function(){return new e(this.bf,this.Bf,a)},t.prototype.entries=function(){return new e(this.bf,this.Bf,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[s]=function(){return this.entries()},t.prototype.gy=function(t,e){return this.Dv!==t&&(this.$s=this.bf.indexOf(this.Dv=t)),this.$s<0&&e&&(this.$s=this.bf.length,this.bf.push(t),this.Bf.push(void 0)),this.$s},t}()}():Map,c=e||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this.Rg=new a}return Object.defineProperty(t.prototype,"size",{get:function(){return this.Rg.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this.Rg.has(t)},t.prototype.add=function(t){return this.Rg.set(t,t),this},t.prototype.delete=function(t){return this.Rg.delete(t)},t.prototype.clear=function(){this.Rg.clear()},t.prototype.keys=function(){return this.Rg.keys()},t.prototype.values=function(){return this.Rg.values()},t.prototype.entries=function(){return this.Rg.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[s]=function(){return this.keys()},t}():Set,h=new(e||"function"!=typeof WeakMap?function(){var r,i;function e(){var t,e;do{(t="function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(16)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(16)):a(new Uint8Array(16),16):a(Array(16),16))[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<16;++n)4!==n&&6!==n&&8!==n||(i+="-"),(e=t[n])<16&&(i+="0"),i+=e.toString(16).toLowerCase()}while(t="@@WeakMap@@"+i,u.has(r,t));return r[t]=!0,t}function n(t,e){if(!o.call(t,i)){if(!e)return;Object.defineProperty(t,i,{value:u.create()})}return t[i]}function a(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}return r=u.create(),i=e(),function(){function t(){this.jt=e()}return t.prototype.has=function(t){return void 0!==(t=n(t,!1))&&u.has(t,this.jt)},t.prototype.get=function(t){return void 0!==(t=n(t,!1))?u.get(t,this.jt):void 0},t.prototype.set=function(t,e){return n(t,!0)[this.jt]=e,this},t.prototype.delete=function(t){return void 0!==(t=n(t,!1))&&delete t[this.jt]},t.prototype.clear=function(){this.jt=e()},t}()}():WeakMap),t("decorate",function(t,e,i,n){var r;if(g(i)){if(!w(t))throw new TypeError;if("function"!=typeof e)throw new TypeError;for(i=t.length-1;0<=i;--i)if(!g(n=(0,t[i])(e))&&null!==n){if("function"!=typeof n)throw new TypeError;e=n}return e}if(!w(t))throw new TypeError;if(!v(e))throw new TypeError;if(!v(n)&&!g(n)&&null!==n)throw new TypeError;null===n&&(n=void 0),i=y(i);for(var a=t.length-1;0<=a;--a)if(!g(r=(0,t[a])(e,i,n))&&null!==r){if(!v(r))throw new TypeError;n=r}return n}),t("metadata",function(n,r){return function(t,e){var i;if(!v(t))throw new TypeError;if(i=!g(e)){t:switch(m(e)){case 3:case 4:i=!0;break t;default:i=!1}i=!i}if(i)throw new TypeError;l(t,e,!0).set(n,r)}}),t("defineMetadata",function(t,e,i,n){if(!v(i))throw new TypeError;g(n)||(n=y(n)),l(i,n,!0).set(t,e)}),t("hasMetadata",function(t,e,i){if(!v(e))throw new TypeError;return g(i)||(i=y(i)),function t(e,i,n){if(p(e,i,n))return!0;i=k(i);return null!==i&&t(e,i,n)}(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!v(e))throw new TypeError;return g(i)||(i=y(i)),p(t,e,i)}),t("getMetadata",function(t,e,i){if(!v(e))throw new TypeError;return g(i)||(i=y(i)),function t(e,i,n){if(p(e,i,n))return d(e,i,n);i=k(i);if(null!==i)return t(e,i,n)}(t,e,i)}),t("getOwnMetadata",function(t,e,i){if(!v(e))throw new TypeError;return g(i)||(i=y(i)),d(t,e,i)}),t("getMetadataKeys",function(t,e){if(!v(t))throw new TypeError;return g(e)||(e=y(e)),function t(e,i){var n,r;n=b(e,i);e=k(e);if(null===e)return n;i=t(e,i);if(i.length<=0)return n;if(n.length<=0)return i;e=new c;for(var a=[],o=0;o<n.length;o++)r=n[o],e.has(r)||(e.add(r),a.push(r));for(n=0;n<i.length;n++)r=i[n],e.has(r)||(e.add(r),a.push(r));return a}(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!v(t))throw new TypeError;return g(e)||(e=y(e)),b(t,e)}),t("deleteMetadata",function(t,e,i){var n;if(!v(e))throw new TypeError;return g(i)||(i=y(i)),!(g(n=l(e,i,!1))||!n.delete(t))&&(0<n.size||((t=h.get(e)).delete(i),0<t.size||h.delete(e),!0))})}()}).call(this,i(248),i(194))},function(t,e,i){var c,n,s,u;function h(i,n,t){for(var r,e,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return(r=t())&&(a=a.map(function(t,e){return e=u.V2a(r.Era,r.Fb[e]),s.b8a(i,t,n,e)})),(e=i.ZDb).call.apply(e,c.__spread([void 0],a))}_esm(e),e.$Db=e.uTa=void 0,c=i(2),n=i(254),s=i(929),u=i(930),e.uTa=function(t,r,a,o,e){var s={},u=n.jYa(e);return new Proxy(t,{get:function(t,e){var i,n;return e in r?r[e]:s[e]||("function"==typeof(i=t[e])?(n=u.bind(null,t,e),t=h.bind(t,c.__assign({ZDb:i.bind(t)},a),o,n),s[e]=t):i)},set:function(t,e,i){return e in r?r[e]=i:(t[e]=i,delete s[e]),!0}})},e.$Db=h},function(t,e,i){var o,s,u;_esm(e),e.b8a=void 0,o=i(2),s=i(5),u=i(414),e.b8a=function(i,e,n,t){var r,a;return t&&(r=t.irb,a=t.$u,t=t.rules.map(function(t){return[n[t.xWb],t.config]}),r||s.assert(e,"Param is null"),r=t.filter(function(t){return(t=o.__read(t,2))[0].lLb(e,t[1])}),a&&s.assert(r.length,"No rules matched for "+e),r.length)?r.reduce(function(t,e){return(e=o.__read(e,2))[0].xNb(t,u.A0.CAb,i,e[1])},e):e}},function(t,e,i){var n,r;_esm(e),e.V2a=void 0,n=i(2),r=i(25),e.V2a=function(t,e){var i;if(t||e)return i=null!=t&&t.rules&&null!=e&&e.rules?r.m3(t.rules,e.rules):(null==t?void 0:t.rules)||(null==e?void 0:e.rules),n.__assign(n.__assign(n.__assign({},t),e),{rules:i})}},function(t,e){_esm(e),e.GIb=e.o0a=e.vm=void 0,e.vm=function(t){return!(null==t||!t.position)},e.o0a=function(t){return!(null==t||!t.xa||null==t||!t.offset)},e.GIb=function(t){return!(null==t||!t.xa)}},function(t,e,i){var n,r,a,o,s;_esm(e),e.TJa=void 0,n=i(2),r=i(5),a=n.__importDefault(i(6)),o=i(118),s=i(9),t=function(){function t(t,e){for(var i,n=2;14!==n;)switch(n){case 3:this.console=new a.default.Console("ASEJS_REQUEST_PACER","media|asejs"),this.uva=!1,n=7;break;case 2:(i=this).C7=t,this.config=e,this.GF=0,n=3;break;case 7:this.tq=new o.IB({wu:this,source:"RequestPacer",Sha:function(){return{numOutstanding:i.GF}},xD:10}),this.v7a=new s.l1,n=14}}for(var e=2;13!==e;)switch(e){case 5:t.prototype.yy=function(t){for(var e=2;4!==e;)2===e&&(this.tq.wy({mediaType:t.mediaType,contentStartPts:t.fd,contentEndPts:t.Lc}),this.GF++,r.assert(this.GF<=this.config.b8,"More than maxAllowedOutstandingRequests are outstanding"),e=4)},t.prototype.qI=function(t){for(var e=2;3!==e;)2===e&&(this.tq.wy({mediaType:t.mediaType,contentStartPts:t.fd,contentEndPts:t.Lc}),this.GF--,r.assert(0<=this.GF,"Received remove request when there are no requests outstanding"),this.Pk("removeRequest"),e=3)},t.prototype.aSa=function(t){for(var e,i,n,r=2;9!==r;)switch(r){case 1:this.v7a.push(i),r=5;break;case 4:n++,r=5;break;case 6:this.v7a.push(i),r=4;break;case 5:r=this.GF<e&&this.C7()?4:3;break;case 2:e=this.config.b8,i=a.default.time.ea()-t,n=0,r=1;break;case 3:this.tq.xT("requestOpportunityRunnerComplete",{requestsIssued:n,scheduledMs:t,timeSinceScheduled:i},!0),r=9}},e=9;break;case 2:Object.defineProperties(t.prototype,{aQb:{get:function(){return this.GF},enumerable:!1,configurable:!0}}),t.prototype.Pk=function(){for(var e,i,t=2;9!==t;)switch(t){case 2:e=this,t=1;break;case 6:t=~this.uva?3:1;break;case 1:t=this.uva?9:5;break;case 5:this.uva=!0,i=a.default.time.ea(),Promise.resolve().then(function(){for(var t=2;5!==t;)2===t&&(e.uva=!1,e.aSa(i),t=5)}),t=9}},e=5;break;case 9:n.__decorate([o.bc({methodName:"checkRequestOpportunity",pm:!0,xr:!0})],t.prototype,"Pk",null),n.__decorate([o.bc({methodName:"addRequest",pm:!0})],t.prototype,"yy",null),n.__decorate([o.bc({methodName:"removeRequest",pm:!0})],t.prototype,"qI",null),e=6;break;case 6:return n.__decorate([o.bc({methodName:"checkRequestOpportunityRunner",pm:!0})],t.prototype,"aSa",null),t}}(),e.TJa=t},function(t,e,i){var n;function r(t){this.Qb=t}_esm(e),e.gCa=void 0,n=i(54),Object.defineProperties(r.prototype,{mj:{get:function(){return"EndplayFieldsReporter"},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{enabled:{get:function(){return!0},enumerable:!1,configurable:!0}}),r.prototype.Ho=function(t){var e;if(t.Qi===n.de.$p&&this.Qb){if(t={},(e=this.Qb.get())&&e.avtp&&e.avtp.Ga&&(t.avtp=e.avtp.Ga,t.dltm=e.avtp.GC),e&&e.cdnavtp&&(t.cdnavtp=e.cdnavtp,t.activecdnavtp=e.activecdnavtp),(e=this.Qb.i6())&&(e.bytesRequestedPacingVideo&&(t.bytesRequestedPacingVideo=e.bytesRequestedPacingVideo,t.estimatedBytesPacedVideo=e.estimatedBytesPacedVideo,t.bytestotalVideo=e.bytestotalVideo,t.pacedAvtpVideo=e.pacedAvtpVideo),e.bytesRequestedPacingAudio&&(t.bytesRequestedPacingAudio=e.bytesRequestedPacingAudio,t.estimatedBytesPacedAudio=e.estimatedBytesPacedAudio,t.bytestotalAudio=e.bytestotalAudio,t.pacedAvtpAudio=e.pacedAvtpAudio),e.pacedAvtp&&(t.pacedAvtp=e.pacedAvtp)),(e=this.Qb.Z5())&&(t.initial_avtp=e.pH,t.initial_dltime=e.GC,t.initial_responses_audio=e.H_a,t.initial_responses_video=e.I_a,t.initial_tput_samples=e.jO,t.initial_1sec_tput_samples=e.hO),this.Qb.flush(),e=this.Qb.MXa())for(var i in e)e.hasOwnProperty(i)&&(t["ne"+i]=Number(e[i]).toFixed(6));return t}},e.gCa=r},function(t,e,i){var n;function r(t){t.events.on("streamSelection",this.Lsa.bind(this))}_esm(e),e.KKa=void 0,n=i(54),r.prototype.Lsa=function(t){0===t.mediaType&&void 0===this.G_a?this.G_a=t:1===t.mediaType&&void 0===this.J_a&&(this.J_a=t)},Object.defineProperties(r.prototype,{mj:{get:function(){return"StartplayFieldsReporter"},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{enabled:{get:function(){return!0},enumerable:!1,configurable:!0}}),r.prototype.Ho=function(t){var e;if(t.Qi===n.de.ap)return{histdiscbw:null==(t=null!==(e=this.J_a)&&void 0!==e?e:this.G_a)?void 0:t.result.fu,histage:null==t?void 0:t.result.Lo}},e.KKa=r},function(t,e,i){var n,r,a;function o(t){this.Yf=t,this.B1=[],this.reset()}_esm(e),e.dLa=void 0,t=i(2),n=i(17),r=i(20),a=t.__importDefault(i(6)),Object.defineProperties(o.prototype,{mj:{get:function(){return"task-audit"},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{ED:{get:function(){return"tsched"},enumerable:!1,configurable:!0}}),Object.defineProperties(o.prototype,{enabled:{get:function(){return r.ga},enumerable:!1,configurable:!0}}),o.prototype.reset=function(){var t,e=this;null!==(t=this.PK)&&void 0!==t&&t.clear(),this.PK=new n.Wh,this.PK.on(this.Yf,"clockChanged",function(){e.reset(),e.nV("initial")}),this.PK.on(this.Yf,"stopping",function(){e.nV("stopping")}),this.PK.on(this.Yf.za,"clockAdjusted",function(){e.nV("clockAdjusted")}),this.PK.on(this.Yf.za,"stopStart",function(){e.nV("stopStart")}),this.PK.on(this.Yf.za,"speedChanged",function(){e.nV("speedChanged")})},o.prototype.nV=function(t){this.B1.push({reason:t,audit:this.Yf.vEb(),time:a.default.time.ea()}),5<this.B1.length&&this.B1.shift()},o.prototype.Ho=function(){return this.B1},i=o,e.dLa=i},function(t,e,i){var n;function r(t,e){this.Qb=t,this.w7a=e}_esm(e),e.VJa=void 0,n=i(54),Object.defineProperties(r.prototype,{mj:{get:function(){return"RequestsReporter"},enumerable:!1,configurable:!0}}),Object.defineProperties(r.prototype,{enabled:{get:function(){return!0},enumerable:!1,configurable:!0}}),r.prototype.Ho=function(t){var e;if((t=t.Qi)===n.de.$p||t===n.de.Zn||void 0===t)return t={numOutstandingRequests:this.w7a.aQb,requestOpportunityDelayStats:this.w7a.v7a},(e=this.Qb.tPa)&&e.length&&(t.activeRequests=JSON.stringify(e)),t},e.VJa=r},function(t,e){function i(t){this.W4=t,this.ED="engine",this.enabled=!0}_esm(e),e.kCa=void 0,Object.defineProperties(i.prototype,{mj:{get:function(){return this.ED},enumerable:!1,configurable:!0}}),i.prototype.Ho=function(){var t=this.W4.PSb.map(function(t){var e=t.Ca;return{id:e.id,weight:e.weight,relativeWeight:t.hY}});return{prefetcher:this.W4.Gu.getStats(),playgraphs:t,viewables:this.W4.z2b,players:this.W4.L5a.length}},e.kCa=i},function(t,e,i){var n,r;function a(){this.global=new r.wR,this.OD={}}_esm(e),e.PCa=void 0,n=i(5),r=i(412),a.prototype.add=function(t,e){n.assert(void 0===this.OD[t],"Cannot add new memory object for playgraph"),this.OD[t]=e,this.global.add(e.Dr),this.global.add(e.DU)},e.PCa=a},function(t,e,i){var p,d,b,n;function r(t,e,i){this.nna=t,this.EFb=e,this.H=i,this.zi=new n.IB({wu:this,console:i,source:"MemoryDeadlockProtector",xD:5})}_esm(e),e.mGa=void 0,p=i(2),d=i(20),b=i(405),n=i(118),r.prototype.QDb=function(t){var e,i=t.config,n=i.tj+(null!==(e=null===(r=i.rP)||void 0===r?void 0:r.Y)&&void 0!==e?e:0),r=this.uIb(n,t);return d.ga&&this.H.debug("MDP: has prebuf: "+r),r?{F4:!0}:(r=(e=this.Htb(i)).BRb,e=e.c2b,r&&e?(d.ga&&this.H.debug("MDP: utilizing "+Math.round(100*e)+"%"),e>=i.rOb?this.I7a(t,r):{F4:!0}):{F4:!1})},r.prototype.I7a=function(t,e){var i,n,r,a,o,s,u;this.zi.wy({o:e}),r=t.V,t=t.Kb,a=r.Kb,r=r.wH;for(var c=0;c<a.length;c++)if(!a[c].wl){r=a[c],a=a.slice(0,c+1);break}if(c=!1,o=[{mediaType:0,tC:0},{mediaType:1,tC:0}],null==r||!r.wl){t=t.map(function(t){return t}).filter(function(t){return-1===a.indexOf(t)}).sort(function(t,e){return b.ija(t)-b.ija(e)});try{for(var h=p.__values(t),f=h.next();!f.done&&(u=(s=f.value).OC(),o[0].tC+=null!==(n=u.kC)&&void 0!==n?n:0,o[1].tC+=null!==(n=u.Ks)&&void 0!==n?n:0,d.ga&&this.H.debug("Resetting discontiguous branch "+s.O.id,u),s.reset(),!(c=o.every(function(t){return t.tC>=e[t.mediaType].tC})));f=h.next());}catch(t){var l={error:t}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(l)throw l.error}}}return{F4:c,p$b:o}},r.prototype.Htb=function(t){var i,n,r,a;return t.sOb?(i=this.EFb(),n=this.nna().total,r=t.qOb,t=[a=0,1].map(function(t){var e=i[t]-n[t]*r;return a=Math.max(0<n[t]?i[t]/n[t]:0,a),{tC:Math.max(0,e),mediaType:t}}),{c2b:a,BRb:t}):{}},r.prototype.uIb=function(i,t){var n,e=!1;return null!=(t=t.E6?t.V:void 0)&&t.YJb&&(e=t.si.lq().map(function(t){return t.mediaType}),n=t.XEb(),e=e.every(function(t){var e;if(0===t)t=null!==(e=n.vr)&&void 0!==e?e:0;else{if(1!==t)throw Error("Unsupported media type:"+t);t=null!==(e=n.$n)&&void 0!==e?e:0}return i<=t})),e},p.__decorate([n.bc({methodName:"resetDiscontiguousBranches",return:!0,pm:!0})],r.prototype,"I7a",null),e.mGa=r},function(t,e,i){var n,r,a,o,s;function u(t){var e,i=this;this.Ca=t,this.ow="aseReport",this.FRa=n.T.fD,this.qo=!1,0!=Math.floor(1e6*Math.random())%t.config.GL&&!t.config.DDb||(this.FRa=n.T.Eb(t.config.n3),this.Ca.HL=!0,(e=[])[r.default.Ta.Mb]=new o.default(t.config,r.default.Ta.Mb),e[r.default.Ta.Wb]=new o.default(t.config,r.default.Ta.Wb),this.iha=e,this.Ca.events.on("openComplete",function(){return i.open()}))}_esm(e),e.aza=void 0,t=i(2),n=i(9),r=t.__importDefault(i(28)),a=i(25),o=t.__importDefault(i(383)),s=i(54),u.prototype.open=function(){this.Ca.HL&&!this.qo&&(this.qo=!0,this.Ca.events.emit("aseReportEnabled",{type:"asereportenabled"}),this.Ca.events.on("streamSelection",this.Lsa.bind(this)))},u.prototype.Lsa=function(t){this.iha[t.mediaType].add(t.result,t.streamList)},u.prototype.Yna=function(){var t=a.flatten(this.iha.map(function(t){return t.get()}).filter(function(t){return void 0!==t}));return this.iha.forEach(function(t){return t.reset(!0)}),t},u.prototype.og=function(t){var e=t.Qi;return t=t.zKb,this.Ca.HL&&this.qo&&(t||e===s.de.$p)&&(e=this.Yna())&&e.length?{o9a:!0,event:{type:"asereport",strmsel:e}}:{o9a:!1,event:{type:"asereport",strmsel:[]}}},i=u,e.aza=i},function(t,e,i){var u,o,n,c,s,h,f,l,p,r,d,b,a,m,g,v,y,w;function _(t,e,i,n,r){void 0===n&&(n=new m.hBa),void 0===r&&(r=new a.gBa),this.yVa=t,this.config=e,this.U6a=n,this.Fm=[],this.Z5a=[],this.px=[],this.ec={O0a:0,P0a:0,L0a:0,aja:0,M0a:0,N0a:0,bja:0},this.events=new o.EventEmitter,this.H=c.wq(b.default,i,"PREFETCH"),this.KPa(new g.KAa(e)),this.KPa(new w.sKa(e)),this.H8a({mH:e.jTb}),this.Zva(r),this.UJb()}_esm(e),e.nJa=void 0,u=i(2),o=i(17),n=i(16),c=i(9),s=i(942),h=i(25),f=i(5),l=i(943),p=i(20),r=i(99),d=i(944),b=u.__importDefault(i(6)),a=i(945),m=i(946),g=i(947),v=i(255),y=i(949),w=i(950),Object.defineProperties(_.prototype,{kTb:{get:function(){return this.Fm.map(function(t){return t.context})},enumerable:!1,configurable:!0}}),_.prototype.TXb=function(t){p.ga&&f.assert(t,"Reconciliation strategy is undefined"),this.U6a=t},_.prototype.KPa=function(t){this.Z5a.unshift(t)},_.prototype.f9a=function(t){p.ga&&this.H.debug("Wish list changed",{hbc:t.length}),this.px=t,this.Wta()},_.prototype.reset=function(){var t,e,i,n;if(this.config.sTb)try{for(var r=u.__values(this.Fm),a=r.next();!a.done;a=r.next())e=(n=a.value).Ca,i=n.H7,n=n.context,e&&(e.Df(),i.Iua(function(t){return"segmentNormalized"!==t.ow}),n=v.n6(n.Nd,e.Ca),e.ZD(n))}catch(t){var o={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}else this.f9a([])},_.prototype.H8a=function(t){p.ga&&this.H.debug("Budget changed",{rbc:this.TT,gbc:t}),this.TT=t,this.Wta()},_.prototype.Nub=function(t,e){var i,n,r,a;return(e=this.U6a.iDb(this.Fm,{Ca:t,Vi:e}))&&(n=this.px.indexOf(e.context.Nd),p.ga&&this.H.debug("Claiming item: "+v.oq(e.context.Nd.key),{em:b.default.time.ea()-e.jaa,buffer:null===(i=e.Ca)||void 0===i?void 0:i.Gh(c.T.Gb)}),this.tM(e.context,{Zpa:!!e.Ca}),e.Ca&&(i=e.Ca,r=e.context,a=e.ns,y.lJa.IVb(i,e.H7,this.H),t=v.n6(r.Nd,t),a.EWb(null!==(t=i.OV(t))&&void 0!==t?t:c.T.Gb,n),i.Mab({mH:this.config.ru||1/0}),this.events.emit("itemClaimed",{type:"itemClaimed",wishListItem:e.context.Nd,videoBytesBuffered:e.Ca.tw().Ks,audioBytesBuffered:e.Ca.tw().kC}))),this.config.jrb||this.reset(),null==e?void 0:e.Ca},_.prototype.Mub=function(){},_.prototype.getStats=function(){var i=b.default.time.ea();return{wishListLength:this.px.length,prefetchList:this.kTb.length,contents:this.Fm.map(function(t){var e;return{id:v.oq(t.context.Nd.key),buffer:null===(e=t.Ca)||void 0===e?void 0:e.Gh(c.T.Gb),pId:null===(e=t.Ca)||void 0===e?void 0:e.id,budget:{inMemoryBytes:t.context.K0a.mH},weight:t.context.M9,age:i-t.jaa,timeOpened:i-(null!==(e=t.J_b)&&void 0!==e?e:0),state:n.Jc[null!==(t=null===(t=t.Ca)||void 0===t?void 0:t.Cf.value)&&void 0!==t?t:n.Jc.dj]}}),aggregated:{itemsRequested:this.ec.O0a,itemsStarted:this.ec.P0a,itemsClaimed:this.ec.L0a,bytesClaimed:this.ec.aja,itemsCompleted:this.ec.M0a,itemsDiscarded:this.ec.N0a,bytesDiscarded:this.ec.bja}}},_.prototype.tM=function(a,o){var s;void 0===o&&(o={}),u.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return u.__generator(this,function(t){switch(t.label){case 0:return(n=u.__assign({Zpa:!1,T0a:!1},o),r=n.Zpa,e=n.T0a,i=h.ig(this.Fm,function(t){return t.context===a}))?(this.Fm.splice(this.Fm.indexOf(i),1),e||(n=this.px.length,this.px=this.px.filter(function(t){return t!==a.Nd}),p.ga&&this.H.info("Dropping items from wishlist",n-this.px.length),this.px.length>=n&&p.ga&&this.H.warn("Unable to filter out wishlist item",this.px.map(function(t){return t.key}),a.Nd.key)),p.ga&&this.H.debug("Dropping playgraph",{em:b.default.time.ea()-i.jaa,buffer:null===(s=i.Ca)||void 0===s?void 0:s.Gh(c.T.Gb),W:v.oq(a.Nd.key),Obc:!r,d$b:!e}),r?[3,2]:(r=this.Qu(i),i.Ca?[4,r]:[3,2])):[3,3];case 1:t.bd(),t.label=2;case 2:this.Wta(),t.label=3;case 3:return[2]}})})},_.prototype.Zva=function(t){return f.assert(t,"Playgraph resolver is undefined"),this.Ata=t,this},_.prototype.UJb=function(){var i=this;this.events.on("prefetchComplete",function(){return i.ec.M0a++}),this.events.on("prefetchStarted",function(){return i.ec.P0a++}),this.events.on("itemQueued",function(){return i.ec.O0a++}),this.events.on("itemClaimed",function(t){var e;i.ec.L0a++,i.ec.aja+=(null!==(e=t.s2b)&&void 0!==e?e:0)+(null!==(t=t.$rb)&&void 0!==t?t:0)}),this.events.on("itemDropped",function(t){var e;i.ec.N0a++,i.ec.bja+=(null!==(e=t.s2b)&&void 0!==e?e:0)+(null!==(t=t.$rb)&&void 0!==t?t:0)})},_.prototype.Wta=function(){var t,n=this,r=s.qAa.pKb({R2b:this.px,UHb:this.TT},this.Z5a.map(function(t){return t.JRa.bind(t)})).Fm,e=h.vt(r,this.Fm,function(t,e){return v.isEqual(t.Nd.key,e.context.Nd.key)}),i=h.vt(this.Fm,r,function(t,e){return v.isEqual(t.context.Nd.key,e.Nd.key)}),a=h.vt(this.Fm,i);p.ga&&this.H.debug("Re-evaluated prefetch items. new:"+e.length+", evict: "+i.length+", update: "+e.length),i=i.map(function(t){var e=t.context.Nd.key;return p.ga&&n.H.debug("Releasing playgraph",v.oq(e)),n.Qu(t).then(function(){n.events.emit("itemEvicted",{type:"itemEvicted",wishListItem:t.context.Nd})})}),t=a.map(function(i){return u.__awaiter(n,void 0,void 0,function(){var e;return u.__generator(this,function(t){switch(t.label){case 0:return e=h.ig(r,function(t){return v.isEqual(t.Nd.key,i.context.Nd.key)}),f.assert(e,"Couldn't find the requested item context"),i.context=e,[4,i.zta];case 1:return e=t.bd(),h.ig(this.Fm,function(t){return t===i})&&(this.tQa(i.context,e),this.events.emit("itemReevaluated",{type:"itemReevaluated",wishListItem:i.context.Nd})),[2]}})})}),e=e.map(function(t){var e=n.ryb(t);return n.events.emit("itemQueued",{type:"itemQueued",wishListItem:t.Nd}),e}),this.Fm=u.__spread(a,e),a=e.map(function(t){return t.zta}),a=i.concat(t).concat(a),Promise.all(a)},_.prototype.Qu=function(i){var t=this;return i.zta.then(function(e){return u.__awaiter(t,void 0,void 0,function(){return u.__generator(this,function(t){switch(t.label){case 0:return p.ga&&this.H.debug("Removing prefetch playgraph",{size:e.Gh(c.T.Gb)}),i.d5.clear(),[4,this.yVa()];case 1:return t.bd().Qu(e),this.events.emit("itemDropped",{type:"itemDropped",wishListItem:i.context.Nd,videoBytesBuffered:e.tw().Ks,audioBytesBuffered:e.tw().kC}),[2]}})})})},_.prototype.oyb=function(o){return u.__awaiter(this,void 0,void 0,function(){var e,i,n,r,a=this;return u.__generator(this,function(t){switch(t.label){case 0:return e=o.context,i=v.oq(e.Nd.key),p.ga&&this.H.debug("Creating playgraph",i),[4,this.Ata.g2a(e)];case 1:return r=t.bd(),[4,e.Nd.Gj.Cn(i).hv];case 2:return(n=t.bd()).oa.Ovb?(this.tM(e,{Zpa:!0}),[2,Promise.reject("contentPlaygraph viewable:\n                "+n.oa.J+" is not supported with prefetching")]):[4,this.yVa()];case 3:return n=t.bd(),r=n.aG(r,e.M9,e.Vi,e.Nd.Gj,!1),o.d5.addListener(r.events,"error",function(t){p.ga&&a.H.debug("Prefetch playgraph resulted in error",t.b$b),a.tM(e)}),[2,r]}})})},_.prototype.lRb=function(e,t){var i,n,r;function a(t){p.ga&&i.H.debug("Viewable "+(t?"superseded":"expired"),v.oq(e.context.Nd.key)),e.tac=!0,i.tM(e.context,{T0a:!t})}i=this,n=e.context,r=v.oq(n.Nd.key),this.tQa(n,t),t.open(),t.bE({us:function(e,t){var i=e.recommendedMedia;return i?h.Mp(t,function(t){return t.new_track_id===i.pn}):h.Mp(t,function(t){return t.track_id===e.defaultTrackOrderList[0].audioTrackId})}},{us:function(e,t){var i=e.recommendedMedia;return i?h.Mp(t,function(t){return t.new_track_id===i.VP}):h.Mp(t,function(t){return t.track_id===e.defaultTrackOrderList[0].videoTrackId})}}),t.ZD(v.n6(n.Nd,t.Ca)),(t=n.Nd.Gj.Cn(r)).events&&(e.d5.addListener(t.events,"viewableEvicted",function(){a(!0)}),e.d5.addListener(t.events,"viewableExpired",function(){a(!1)})),t.Ot&&(p.ga&&this.H.warn("Viewable churn encountered during prefetcher (expired on initialization)",r),this.tM(e.context)),this.events.emit("prefetchStarted",{type:"prefetchStarted",wishListItem:e.context.Nd})},_.prototype.tQa=function(t,e){var i;e.cbb(t.M9),e.Mab(t.K0a),i=(t=t.vZb).video,e.M$(new r.mF(t.audio,!0),new r.mF(i,!0))},_.prototype.ryb=function(i){var n=this,r=new l.mJa,a={context:i,jaa:b.default.time.ea(),d5:new o.Wh,ns:r};return a.zta=this.oyb(a).then(function(e){return u.__awaiter(n,void 0,void 0,function(){var t=this;return u.__generator(this,function(){try{return(a.Ca=e).Ji(r),r.Trb(e),a.H7=new d.sCa(e.events,{AYb:function(t){var e=t.ow;switch(e){case"buffering":return!1;case"bufferingStarted":a.H7.Iua(function(t){return"bufferingComplete"===t.ow||"updateStreamingPts"===t.ow});case"openComplete":case"updateStreamingPts":case"bufferingComplete":a.H7.Iua(function(t){return t.ow===e});default:return!0}}}),e.events.on("bufferingComplete",function(){t.events.emit("prefetchComplete",{type:"prefetchComplete",wishListItem:i.Nd})}),this.lRb(a,e),a.J_b=b.default.time.ea(),[2,e]}catch(t){throw p.ga&&this.H.error("Exception occurred creating playgraph",t),this.tM(a.context),t}})})}).catch(function(t){return p.ga&&n.H.error("Rejection ocurred while creating playgraph",t),t}),a},e.nJa=_},function(t,e){function i(){}_esm(e),e.qAa=void 0,e.qAa=(i.pKb=function(t,n){var r;return r=0,function t(e){return((i=r++)>=n.length?function(){throw Error("The last delegate in the chain should not invoke next() nextDelegateIndex "+i)}:n[i])(e,t);var i}(t)},i)},function(t,e,i){var n,r;function a(){this.creationTime=n.default.time.ea(),this.ic={isPrefetchItem:!0,prefetchClaimDurationMs:0,prefetchedVideoMs:0,prefetchedAudioMs:0}}_esm(e),e.mJa=void 0,n=i(2).__importDefault(i(6)),r=i(54),a.prototype.Trb=function(t){this.Ca=t},a.prototype.EWb=function(t,e){var i;t=null===(i=this.Ca)||void 0===i?void 0:i.Gh(t),this.ic={isPrefetchItem:!0,prefetchedVideoMs:t.AZ,prefetchedAudioMs:t.zZ,prefetchClaimDurationMs:n.default.time.ea()-this.creationTime,prefetchRank:e}},Object.defineProperties(a.prototype,{mj:{get:function(){return"PrefetchReporter"},enumerable:!1,configurable:!0}}),Object.defineProperties(a.prototype,{enabled:{get:function(){return!0},enumerable:!1,configurable:!0}}),a.prototype.Ho=function(t){if(t.Qi===r.de.ap)return this.ic},e.mJa=a},function(t,e,i){var a,n;function r(t,e){void 0===e&&(e={}),this.cq=t,this.options=e,this.OG=[],this.gW=new n(t,this.yqb.bind(this))}function o(t,e){var r=this;this.cq=t,this.YT=e,this.gW=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return!!r.YT.apply(r,a.__spread([t],i))&&(e=r.E4a).call.apply(e,a.__spread([r.cq,t],i))},this.E4a=this.cq.emit,this.S_a()}_esm(e),e.sCa=void 0,a=i(2),r.prototype.yqb=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n={ow:t,xr:n},null!==(e=null===(e=(i=this.options).AYb)||void 0===e?void 0:e.call(i,n,this.OG))&&void 0!==e&&!e||this.OG.push(n),null===(i=null===(e=(i=this.options).kcc)||void 0===e?void 0:e.call(i,n))||void 0===i||i},r.prototype.Iua=function(i){this.OG=this.OG.filter(function(t,e){return!i(t,e)})},r.prototype.Rua=function(){var i=this;this.gW.Eab(),this.OG.forEach(function(t){var e;(e=i.cq).emit.apply(e,a.__spread([t.ow],t.xr))}),this.gW.S_a()},Object.defineProperties(r.prototype,{length:{get:function(){return this.OG.length},enumerable:!1,configurable:!0}}),r.prototype.clear=function(){this.OG=[]},r.prototype.Nb=function(){this.gW.Eab()},e.sCa=r,o.prototype.S_a=function(){this.cq.emit=this.gW},o.prototype.Eab=function(){this.cq.emit=this.E4a},n=o},function(t,e,i){var o,s,u;function n(){}_esm(e),e.gBa=void 0,o=i(2),s=i(67),u=i(255),n.prototype.g2a=function(a){return o.__awaiter(this,void 0,void 0,function(){var e,i,n,r;return o.__generator(this,function(t){switch(t.label){case 0:return(e=a.Nd.key,u.nW(e))?(i=e.W,r=a.Nd.Gj.Cn(i),[4,Promise.resolve(r.hv)]):[3,2];case 1:return n=t.bd(),(r=n.oa).Bo?[2,s.xC(r.Bo,{config:n.config})]:[2,s.NI(i,"ps0")];case 2:return[2,e.Ca]}})})},e.gBa=n},function(t,e,i){var n,r,a;function o(){}_esm(e),e.hBa=void 0,n=i(2),r=i(5),a=i(255),o.oq=function(t){var e,i=t.qa;return t=t.Yd,e=i[t].W,Object.keys(i).forEach(function(t){return r.assert(i[t].W===e)}),i[t].W},o.prototype.iDb=function(t,e){var i=Object.keys(e.Ca.qa).length;return n.__read(t.filter(function(t){return o.oq(e.Ca)===a.oq(t.context.Nd.key)&&(1===i||i===Object.keys(null!==(t=null===(t=t.Ca)||void 0===t?void 0:t.Ca.qa)&&void 0!==t?t:{}).length)}),1)[0]},e.hBa=o},function(t,i,e){var a,o;function n(t){this.config=t}_esm(i),i.KAa=i.OAa=void 0,a=e(99),o=e(948),i.OAa=625e3,n.prototype.JRa=function(t){var e=this.config.y4,n=(this.config.O2a||this.config.x4)*i.OAa/1e3,r=Math.floor(t.UHb.mH/n);return{Fm:t.R2b.sort(function(t,e){return t.priority-e.priority}).slice(0,e).map(function(t,e){var i=t.key.config;return{K0a:{mH:r-1<e?0:n},Nd:t,M9:1,Vi:i,vZb:{audio:[a.BC(i),new o.Hea],video:[a.CC(i),new o.Hea]}}})}},i.KAa=n},function(t,e,i){var n;function r(){}_esm(e),e.Hea=void 0,n=i(16),r.prototype.wn=function(t,e){return e===n.Jc.ej?[]:t},e.Hea=r},function(t,e,i){var n;function r(){}_esm(e),e.lJa=void 0,n=i(20),e.lJa=(r.IVb=function(t,e,i){t.events.once("opening",function(){n.ga&&i.log("Replaying "+e.length+" events from prefetched playgraph"),e.Rua(),e.Nb()})},r)},function(t,e){function i(t){this.config=t}_esm(e),e.sKa=void 0,i.prototype.JRa=function(t,e){var i,n=this;return t=e(t),i=t.Fm.map(function(t){return t.Nd.priority}).sort(),t.Fm.forEach(function(t){t.M9=n.config.mTb/(2<<i.lastIndexOf(t.Nd.priority))}),t},e.sKa=i},function(t,e){function i(t){var e=this;t=t.Pk,this.hH=function(){e.Pk()},this.Pk=t}_esm(e),e.cJa=void 0,i.prototype.aG=function(t){t.events.on("requestsPruned",this.hH)},i.prototype.Qu=function(t){t.events.removeListener("requestsPruned",this.hH)},e.cJa=i},function(t,e){function a(t,e,i,n){return t&&e?Math.min(t-e*i,t-n):(t||1/0)-n}_esm(e),e.LRa=void 0,e.LRa=function(t,e){var i=a(e.audio,e.ria,t.ZSa,t.XSa),n=a(e.video,e.hya,t.ZSa,t.YSa),r={};return r[0]=i,r[1]=n,r.total=(e.total||1/0)-t.XSa-t.YSa,r}},function(t,e,i){var a,o,s,u,c;_esm(e),e.hTa=void 0,a=i(2),o=i(407),s=i(954),u=i(955),c=i(413),e.hTa=function(t){for(var e,i,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return e=(r=a.__assign({qjb:o.w_,Nfb:s.QCa},t)).qjb,i=r.Nfb,r=u.v4a(n[5]),n[5]=r.WO,n=new(e.bind.apply(e,a.__spread([void 0],n))),e={Jla:new i,mvb:n},r=new u.DAa(e,r.PZb),c.yta.fUb(n,r,e)}},function(t,e){function i(){}_esm(e),e.QCa=void 0,i.prototype.DAb=function(t){return t},i.prototype.Iab=function(t){return t},e.QCa=i},function(t,e,i){var n,r;_esm(e),e.v4a=e.DAa=void 0,n=i(2),r=i(956),t=function(t,e){var i=this;this.iRb=e,this.events=r.rTa(t),this.iRb(function(t){var e=t.tE;return n.__awaiter(i,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,e];case 1:return t.bd(),[2]}})})})},e.DAa=t,e.v4a=function(t){var n=[];return{WO:function(e){var i=t(e);return n.forEach(function(t){return t({W:e,tE:i.tE})}),i},PZb:function(t){n.push(t)}}}},function(t,e,i){var o,s;_esm(e),e.rTa=void 0,o=i(2),s=i(17),e.rTa=function(n){var r,a=n.mvb;return r=s.EventEmitter,o.__extends(t,r),t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return n.Jla.Iab,r.prototype.emit.call(this,t,e[0])},t.prototype.subscribe=function(i){var t,n=this;this.listeners(i).length||(t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.emit.apply(n,o.__spread([i],t))},this.Sfa[i]=t,a.events.addListener(i,t))},t.prototype.addListener=function(t,e){return this.subscribe(t),r.prototype.addListener.call(this,t,e),this},t.prototype.removeListener=function(t,e){return r.prototype.removeListener.call(this,t,e),this.listeners(t)||(a.events.removeListener(t,this.Sfa[t]),delete this.Sfa[t]),this},t.prototype.on=function(t,e){return this.addListener(t,e),this},t.prototype.once=function(n,r){var a;return(a=this).addListener(n,function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.removeListener(n,t),r.apply(void 0,o.__spread(e))}),this},t.prototype.OX=function(t,e){return this.subscribe(t),r.prototype.OX.call(this,t,e),this},t.prototype.b6a=function(n,r){var a;return(a=this).OX(n,function t(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.removeListener(n,t),r.apply(void 0,o.__spread(e))}),this},new t;function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.Sfa={},t}}},function(t,e,i){var p,d,n,a,r,b,m,g,o,s,v,y,w,_,u,E,k,S,T;function c(t,e,i,n,r,a,o,s,u,c,h){var f,l=T.call(this)||this;return l.console=t,l.Ro=e,l.PS=i,l.tL=r,l.WY=a,l.hw=s,l.V=c,l.config=h,l.nr=!1,l.gS=!1,l.kt=void 0,l.Pe=function(){var t,e,i,n;null!==(t=l.FK)&&void 0!==t&&t.clear(),t=l.klb,n=l.oob,g.assert(t),l.Ig&&g.assert(n),l.ul.value!==b.ma.gr&&l.ul.value!==b.ma.dj&&(null!==(e=l.Fa)&&void 0!==e&&e.vm?(e=null===(i=null===(i=l.Ro.Ka.Qb.get())||void 0===i?void 0:i.Ra)||void 0===i?void 0:i.Ga,l.pa.FZ("startplay",v.de.ap),l.qaa.xT("emitBufferingComplete",{}),E.Q4(l,t,l.Fa.Ug,e,n,l.pa.HL)):l.console.error("Shim received buffering complete but player has no position (player "+(l.Fa?"":"un")+"defined, state "+l.ul.value+")"))},l.JT=function(){var t,e;l.qaa.xT("audioTrackSwitchComplete",{}),g.assert(void 0!==l.hn),t=l.PS.audio_tracks[l.hn],e=l.hn,l.hn=void 0,E.$Ua(l,t,e),null!==(e=l.lX)&&void 0!==e&&e.call(l),l.lX=void 0},g.assert(n.length<=2,"Ase session shim suports a maximum of 1 parallel graph."),t=(i=p.__read(n,2))[0],i=i[1],l.Gi=new d.Wh,l.W=t.Ca.qa[a[0].xa].W,l.ul=new m.er(b.ma.zh),l.dB=new y.rF(l.console),l.pa=t,l.Ig=i,n.forEach(function(t){var e=t.CC(l.dB),i=t.BC();t.M$(i,e)}),l.I9b=!1,l.qUa=!1,E.h2a(l.console,e,l,t,i),f=S++,l.qaa=new w.IB({wu:l,source:"ShimSession",console:l.console,xD:50,Sha:function(){return{shimId:f}}}),l.pa.Ji(new _.HB(l.qaa)),l.xbb=void 0!==(null===(t=null===(i=(t=l.V).BV)||void 0===i?void 0:i.call(t))||void 0===t?void 0:t.X),l.Cd=k.RQa(c),e=l.dTa({Bd:l.e2a(l.pa.Ca.Bd),CV:l.h6.bind(l)}),l.Fa=e,l.Ig&&(l.vj=l.dTa({Bd:l.e2a(l.Ig.Ca.Bd),CV:l.h6.bind(l)})),l.Fa.events.on("segmentPresenting",function(){l.kt=l.oNa()}),l.on("streamerend",function(){return l.BZb()}),l.X8a(),l}_esm(e),e.vKa=void 0,p=i(2),d=i(17),n=p.__importStar(i(10)),a=i(16),r=i(216),b=i(16),m=i(9),g=i(5),o=i(22),s=i(217),v=i(54),y=i(99),w=i(118),_=i(253),u=p.__importDefault(i(6)),E=i(958),k=i(959),S=0,T=d.EventEmitter,p.__extends(c,T),Object.defineProperties(c.prototype,{J:{get:function(){return this.W},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{ba:{get:function(){return this.hw.ba},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{mediaSourceId:{get:function(){return 0},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Xg:{get:function(){return this.Gi},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{Ge:{get:function(){return{X$b:{1:{U:{Ha:1/0}}}}},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{addEventListener:{get:function(){return this.addListener.bind(this)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{removeEventListener:{get:function(){return this.removeListener.bind(this)},enumerable:!1,configurable:!0}}),Object.defineProperties(c.prototype,{iJ:{get:function(){return void 0!==this.hn},enumerable:!1,configurable:!0}}),c.prototype.DMb=function(){var t,e=this,i=null===(i=null===(t=(i=this.V).BV)||void 0===t?void 0:t.call(i))||void 0===i?void 0:i.X;g.assert(i,"video element is not defined"),i.addEventListener("play",function(){return e.jPa()}),i.addEventListener("pause",function(){return e.Xj()})},c.prototype.BZb=function(){this.Ro.Lp(!0,this.hw.sessionId)},c.prototype.QP=function(t,e){var i;this.pa.Ai(((i={})[t]=e,i))},c.prototype.open=function(){var t,e,i,n=this;this.nr||(this.nr=!0,this.Ro.Lp(this.config.wr,this.hw.sessionId),i=new Promise(function(t){setTimeout(t,0)}).then(function(){n.emit("openComplete",{type:"openComplete"})}),this.pa.open(),null!==(t=this.Ig)&&void 0!==t&&t.open(),this.pa.ZD(this.WY[0]),g.assert(this.Fa,"asePlayer should be defined on session.open"),this.WY[1]&&(t=this.pa.ZC(this.WY[0]),g.assert(t,"ShimSession.open(): Graph position did not map a valid content timestamp"),null!==(e=this.Ig)&&void 0!==e&&e.ZD(this.WY[1],t.wG)),E.f2a(this.Ro,this,this.Fa,this.console),this.ul.set(b.ma.xd),i.then(function(){n.Sq(n.Pe)}),this.pa.nia(this.Fa),this.Ig&&(g.assert(this.vj,"parallelPlayer should be defined on session.open"),this.Ig.nia(this.vj)),this.xbb&&this.DMb())},c.prototype.h6=function(){return this.sj||(this.sj=new u.default.MediaSource(this.Cd),this.sj.pc||(this.sj.pc=u.default.MediaSource.pc)),this.sj},c.prototype.dTa=function(t){return void 0===t&&(t={}),t=p.__assign({BD:this.config.BD,vta:this.config.vta},t),this.Ro.Ka.JPa(this.Cd,t)},c.prototype.e2a=function(t){return t?null==t?void 0:t.map(function(t){return"video"===t?1:0}):[0,1]},c.prototype.close=function(){this.nr&&(this.nr=!1),this.Ro.Lp(!0,this.hw.sessionId,!0)},Object.defineProperties(c.prototype,{dG:{get:function(){return"1.5"},enumerable:!1,configurable:!0}}),c.prototype.flush=function(){var t;this.nr&&this.ul.value!==b.ma.dj&&this.ul.value!==b.ma.gr&&this.stop(),this.pa.FZ("endplay",v.de.$p),this.pa.Df(),null!==(t=this.Ig)&&void 0!==t&&t.Df(),this.Ro.Kh.save(),this.Ro.In.save()},c.prototype.paused=function(){this.xbb||this.Xj()},c.prototype.Xj=function(){this.ul.value===b.ma.Kc&&(this.ul.set(b.ma.hh),this.Cd.emit("paused",{type:"paused",Ed:this.Cd.Mc}))},c.prototype.jPa=function(){this.ul.value===b.ma.hh&&(this.ul.set(b.ma.Kc),this.Cd.emit("playing",{type:"playing",Ed:this.Cd.Mc}))},c.prototype.ed=function(){var t;this.nr&&this.ul.value!==b.ma.dj&&this.ul.value!==b.ma.gr&&this.stop(),this.Ro.zVb(this),this.nr&&this.close(),this.$x&&(clearInterval(this.$x),this.$x=void 0),null!==(t=this.FK)&&void 0!==t&&t.clear(),this.Fa&&this.Ro.Ka.LO(this.Fa),this.vj&&this.Ro.Ka.LO(this.vj),null!==(t=this.sj)&&void 0!==t&&t.Yp()},c.prototype.suspend=function(){},c.prototype.resume=function(){},c.prototype.play=function(){var t=this;this.pa.state!==r.Jj.CLOSED&&(g.assert(this.Fa,"ShimSession.play(), expected asePlayer to exist."),this.Fa.resume(this.gS?[1]:void 0),this.Ig&&(g.assert(this.vj,"ShimSession.play(), expected parallelPlayer to exist."),this.vj.resume(this.gS?[1]:void 0)),this.ul.set(b.ma.Kc),this.Cd.emit("playing",{type:"playing",Ed:this.Cd.Mc}),this.emit("play"),this.$x||(this.$x=setInterval(function(){return t.HPb()},this.config.ML)))},c.prototype.stop=function(){this.ul.set(b.ma.gr),g.assert(this.Fa,"ShimSession.stop(), expected asePlayer to exist."),this.Fa.pause(),this.Ig&&(g.assert(this.vj,"ShimSession.stop(), expected parallelPlayer to exist."),this.vj.pause()),this.Cd.emit("paused",{type:"paused",Ed:this.Cd.Mc}),this.emit("stop")},c.prototype.gz=function(t){var e,i;void 0===e&&(e=!0),this.Fa?(t=parseInt(t),n.isFinite(t)&&(e?(this.Fa.LY(t),null!==(i=this.vj)&&void 0!==i&&i.LY(t)):(this.Fa.Uva(t),null!==(i=this.vj)&&void 0!==i&&i.Uva(t)))):this.fail("Must call open prior to drmReady")},c.prototype.D6=function(){var t;return!(!this.Fa||!this.Fa.vm)&&((t=this.Fa.Oo(this.pa.Ca.qa[this.Fa.nj.xa].W))&&this.Ig&&this.vj?this.vj.Oo(this.Ig.Ca.qa[this.vj.nj.xa].W):t)},c.prototype.Zn=function(){this.ul.set(b.ma.Of),this.Cd.emit("underflow",{type:"underflow",Ed:this.Cd.Mc}),this.Sq(this.Pe)},c.prototype.c6=function(t){var e=v.de.ap;switch(t){case"intrplay":e=v.de.Zn;break;case"endplay":e=v.de.$p}return t=this.pa.c6(e),p.__assign(p.__assign({},t),{aseApiVersion:this.dG})},c.prototype.sta=function(){this.Cd.emit("playbackRateChanged",{type:"playbackRateChanged",Ed:this.Cd.Mc})},c.prototype.Vn=function(){var t=this.Cd.Re(),t={type:"skipped",pts:o.T.Eb(t)};return this.Cd.emit(t.type,t),new s.pF(Promise.resolve()).iva},c.prototype.jja=function(t,e){return e=this.Qna(e||0,t),null===(t=this.pa.yn(e,t))||void 0===t?void 0:t.fd},c.prototype.Dt=function(t,e){var i=new o.T(e,1e3);return(i=this.pa.js(i,{C9a:!0,B9a:!0}))?this.pa.Ca.qa[i.xa].Jb+Number(i.offset.Y.toFixed(0)):this.fail("convertPlayerPtsToContentPts failed to convert manifestIndex "+t+", playerPts: "+e)},c.prototype.cM=function(t,e){return t={xa:t=this.Qna(t||0,e),offset:new o.T(e-this.pa.Ca.qa[t].Jb,1e3)},(t=this.pa.OV(t))?t.Y:e},c.prototype.f7=function(){var t={},e=null===(i=this.pa)||void 0===i?void 0:i.tw(),i=this.Ig?this.Ig.tw():e;return e&&(t.vbuflmsec=e.totalvbuflmsecs,t.vbuflbytes=e.vbuflbytes),i&&(t.abuflmsec=i.totalabuflmsecs,t.abuflbytes=i.abuflbytes),t},c.prototype.M5=function(){return{Fe:0}},c.prototype.Ko=function(){var t;return null!==(t=this.kt)&&void 0!==t?t:null!==(t=this.Fa)&&void 0!==t&&t.F6()?this.oNa():{id:this.WY[0].xa,Fe:0,fd:0,Lc:1/0,me:1/0,zd:0}},c.prototype.oNa=function(){var t,e,i,n;return g.assert(this.Fa,"attempted to get presenting branch information with no player"),g.assert(this.Fa.F6(),"attempted to get presenting branch information but player has no branches"),e=(t=this.Fa.Ko()||{}).O,i=t.jg,n=t.xO,t=t.gI,{id:e.id,Fe:null!==(i=null==i?void 0:i.Y)&&void 0!==i?i:0,fd:null!==(i=null==e?void 0:e.Mg.Y)&&void 0!==i?i:0,Lc:null!==(e=null==e?void 0:e.Uk.Y)&&void 0!==e?e:1/0,me:null!==(n=null==n?void 0:n.Y)&&void 0!==n?n:1/0,zd:null!==(t=null==t?void 0:t.Y)&&void 0!==t?t:0}},c.prototype.h7a=function(){this.IH("removeSession")},c.prototype.ss=function(t,e){return void 0===e&&(e=0),g.assert(!this.Ig,"Seeking with dual playgraphs not supported."),e=this.Qna(e,t),this.Ro.Lp(this.config.wr,this.hw.sessionId),t={xa:e,offset:o.T.Eb(t-this.pa.Ca.qa[e].Jb)},this.kt=void 0,this.pa.ZD(t),g.assert(this.Fa),this.Fa.resume(),this.ul.set(b.ma.xd),this.Sq(this.Pe),t=this.pa.rva(t),g.assert(t,"Valid position must be provided for seek"),t.offset.Y},c.prototype.seek=function(t,e){return t=this.Dt(e,t),this.ss(t,e)},c.prototype.Cr=function(t,e,i){var n=this.Ko().id,r=this.pa.bN(n,t);return e?r.zbb?void 0!==r.cO?(this.pa.wi(n,t,!1,e),r.cO===t):(this.pa.wi(n,t,!1,e),!0):(this.console.warn("chooseNextSegment, seamless transition, invalid destination: "+t+" for current segment: "+n),!1):void 0!==r.cO?(i||this.ss(r.fd,0),!1):(r.NL?(g.assert(this.Fa),this.Fa.reset(),this.pa.wi(n,t,!1,e),this.Fa.resume(),this.ul.set(b.ma.xd),this.Sq(this.Pe)):i||this.ss(r.fd,0),!!r.NL)},c.prototype.AL=function(){this.IH("addManifest")},c.prototype.tT=function(){return this.IH("activateManifest")},c.prototype.l4a=function(){this.HMa()},c.prototype.eaa=function(t){var i,n,e,r=this.Ig?this.vj:this.Fa,a=t.pn;return g.assert(!this.Ig,"ShimSesssion: Parallel graph does not support track switches."),void 0===this.hn&&(!!(t=this.PS.audio_tracks).some(function(t,e){if(t.track_id===a)return i=t,n=e,!0})&&(t=t[this.tL[0]],this.hn=n,(e=null==r?void 0:r.TA)?this.HMa():(this.gS=!0,null!=r&&r.pause([0]),this.emit("audioTrackSwitchStarted",{type:"audioTrackSwitchStarted",oldLangCode:t.language,oldNumChannels:t.channels,newLangCode:i.language,newNumChannels:i.channels,sourceBufferReset:e})),!0))},c.prototype.Lq=function(t,e){this.dB.Lq(t,e)},c.prototype.Li=function(t){return!!this.Fa&&this.Fa.Li(o.T.Eb(t))},c.prototype.c5=function(){this.IH("evaluateQoE")},c.prototype.Hwa=function(){this.IH("stopBuffering")},c.prototype.SI=function(){return this.IH("startBuffering")},c.prototype.bZa=function(){return this.IH("getStreamingStatistics")},c.prototype.fail=function(t){this.emit("error",{type:"error",error:"NFErr_MC_StreamingFailure",errormsg:t,manifestIndex:0})},c.prototype.Qna=function(t,e){return 0!==t?this.fail("Unexpected manifestIndex: "+t+", single viewable playback only supports manifestIndex: 0"):this.dV(e)},c.prototype.dV=function(t){var e,i,n,r,a,o,s=this.pa.Ca,u=[];for(o in g.assert(0<=t,"contentPts must be 0 or greater for segmentId lookup"),s.qa)i=(e=s.qa[o]).Jb,e=e.Ob,n=t<Number(null!=e?e:1/0),i<=t&&n?u.push(o):(i=Math.min(Math.abs(t-i),Math.abs(t-e)),(void 0===r||i<r)&&(r=i,a=o));return g.assert(u.length<=1,"Overlapped segments detected in branching, this is not supported"),t=u[0]||a,g.assert(void 0!==t,"segmentId from contentPts lookup failed"),t},c.prototype.HPb=function(){var t=null===(e=this.pa)||void 0===e?void 0:e.tw(),e=this.Ig?this.Ig.tw():t;t&&e&&this.emit("updateBufferLevel",{type:"updateBufferLevel",abuflbytes:e.abuflbytes,vbuflbytes:t.vbuflbytes,totalabuflmsecs:e.totalabuflmsecs,totalvbuflmsecs:t.totalvbuflmsecs,currentBandwidth:t.currentBandwidth})},c.prototype.IH=function(t){return this.fail("Method not implemented "+t)},c.prototype.HMa=function(){g.assert(void 0!==this.hn),this.tL[0]=this.hn,this.X8a(),this.Sq(this.JT)},c.prototype.X8a=function(){var t=this;this.Ig?(this.pa.bE({us:function(){}},{us:function(){return t.tL[1]}}),this.Ig.bE({us:function(){return t.tL[0]}},{us:function(){}})):this.pa.bE({us:function(){return t.tL[0]}},{us:function(){return t.tL[1]}}),this.gS&&((this.Ig?this.vj:this.Fa).resume([0]),this.gS=!1)},c.prototype.uXb=function(t){this.klb=t},c.prototype.PXb=function(t){this.oob=t},c.prototype.Sq=function(t){var e,r=this;t!==this.JT&&void 0!==this.hn?this.lX=t:(null!==(e=this.FK)&&void 0!==e&&e.clear(),!this.Ig&&this.Fa?this.FK=m.er.oya([this.pa.Cf,this.Fa.qW],function(t){var e=(t=p.__read(t,2))[1];return t[0]===a.Jc.ej&&(null===(t=r.Fa)||void 0===t?void 0:t.vm)&&e.greaterThan(r.Fa.Ug)},this.eTa(t)):this.Fa&&(this.FK=m.er.oya([this.pa.Cf,this.Fa.qW,this.Ig.Cf,this.vj.qW],function(t){var e=(t=p.__read(t,4))[1],i=t[2],n=t[3];return t[0]===a.Jc.ej&&(null===(t=r.Fa)||void 0===t?void 0:t.vm)&&e.greaterThan(r.Fa.Ug)&&i===a.Jc.ej&&(null===(i=r.vj)||void 0===i?void 0:i.vm)&&n.greaterThan(r.vj.Ug)},this.eTa(t))))},c.prototype.eTa=function(e){var i=this;return function(t){t&&(null!==(t=i.FK)&&void 0!==t&&t.clear(),i.FK=void 0,Promise.resolve().then(e))}},p.__decorate([w.bc({methodName:"updateChoiceMapEntry",xr:!0})],c.prototype,"QP",null),p.__decorate([w.bc({methodName:"open"})],c.prototype,"open",null),p.__decorate([w.bc({methodName:"close"})],c.prototype,"close",null),p.__decorate([w.bc({methodName:"paused"})],c.prototype,"Xj",null),p.__decorate([w.bc({methodName:"unpaused"})],c.prototype,"jPa",null),p.__decorate([w.bc({methodName:"cleanup"})],c.prototype,"ed",null),p.__decorate([w.bc({methodName:"suspend"})],c.prototype,"suspend",null),p.__decorate([w.bc({methodName:"resume"})],c.prototype,"resume",null),p.__decorate([w.bc({methodName:"play"})],c.prototype,"play",null),p.__decorate([w.bc({methodName:"stop"})],c.prototype,"stop",null),p.__decorate([w.bc({xr:!0,methodName:"drmReady"})],c.prototype,"gz",null),p.__decorate([w.bc({methodName:"underflow"})],c.prototype,"Zn",null),p.__decorate([w.bc({methodName:"getLogdataReport"})],c.prototype,"c6",null),p.__decorate([w.bc({methodName:"skipped"})],c.prototype,"Vn",null),p.__decorate([w.bc({methodName:"seekByContentPts"})],c.prototype,"ss",null),p.__decorate([w.bc({methodName:"seek"})],c.prototype,"seek",null),p.__decorate([w.bc({methodName:"chooseNextSegment",xr:!0})],c.prototype,"Cr",null),p.__decorate([w.bc({methodName:"onAudioTrackSwitchStarted"})],c.prototype,"l4a",null),p.__decorate([w.bc({methodName:"switchTracks"})],c.prototype,"eaa",null),e.vKa=c},function(t,e,i){var l,p;function d(e,t,i){var n=Array.isArray(i)?i[0]:i,r=Array.isArray(i)?i[1]:i;t.on(n,function(t){e.emit(r,l.__assign(l.__assign({},t),{type:r}))})}_esm(e),e.$Ua=e.Q4=e.f2a=e.h2a=void 0,l=i(2),p=i(20),e.h2a=function(n,t,r,e,i){var a,o,s,u,c,h;function f(t,e){d(r,t,e)}t=i?[e,i]:[e],[["aseReport","asereport"],["aseReportEnabled","asereportenabled"],"buffering",["debug","managerdebugevent"],"endOfStream","lastSegmentPts","locationSelected","segmentAborted","startEvent",["transportReport","transportreport"]].forEach(function(t){return f(e.events,t)}),i?(f(i.events,"initialAudioTrack"),o="streamerEnd",s=i,u=function(t){r.emit("streamerend",l.__assign(l.__assign({},t),{type:"streamerend"}))},e.events.once(o,function(t){(c=t)&&h&&u(c,h)}),s.events.once(o,function(t){h=t,c&&h&&u(c,h)})):(f(e.events,["streamerEnd","streamerend"]),f(e.events,"initialAudioTrack")),e.events.on("logdata",function(t){r.emit("logdata",l.__assign(l.__assign({},t),{fields:l.__assign(l.__assign({},t.fields),{aseApiVersion:r.dG})}))}),a=!0,e.events.on("bufferingStarted",function(t){r.iJ&&a?a=!1:(r.qaa.xT("bufferingStarted",{}),r.emit("bufferingStarted",t))}),e.events.on("bufferingComplete",function(t){r.iJ?a=!0:r.uXb(t)}),null!=i&&i.events.on("bufferingComplete",function(t){r.iJ||r.PXb(t)}),e.events.on("maxVideoBitrateChanged",function(t){r.emit("maxvideobitratechanged",l.__assign(l.__assign({},t),{type:"maxvideobitratechanged",tcc:t.streaming.Y}))}),e.events.on("error",function(t){t=l.__assign(l.__assign({},t),{manifestIndex:0}),r.emit("error",t)}),r.on("error",function(){}),e.events.on("segmentComplete",function(t){r.emit("segmentComplete",{type:"segmentComplete",mediaType:t.mediaType,manifestIndex:0,segmentId:t.segmentId})}),e.events.on("segmentNormalized",function(t){var e=Math.floor(t.viewableContentEnd.Y);r.emit("maxPosition",{type:"maxPosition",index:0,endPts:e,maxPts:e,maxSeekPts:Math.floor(t.viewableEarliestContentEnd.Y)}),r.emit("manifestRange",{type:"manifestRange",index:0,manifestOffset:0,startPts:0,endPts:e,maxPts:e})}),e.events.on("segmentStarting",function(t){r.emit("maxBitrates",{type:"maxBitrates",audio:t.maxBitrates.audio,video:t.maxBitrates.video}),r.emit("segmentStarting",t)}),t.forEach(function(i){i.events.on("serverSwitch",function(t){r.emit("serverSwitch",{type:"serverSwitch",segmentId:t.segmentId,mediatype:t.mediatype,server:t.server,reason:t.reason,location:t.location,bitrate:t.bitrate,confidence:t.confidence,throughput:t.throughput,oldserver:t.oldserver})}),i.events.on("streamSelected",function(t){var e=i.ZC(t.position);r.emit("streamSelected",{type:"streamSelected",nativetime:t.nativetime,mediaType:t.mediaType,streamId:t.streamId,manifestIndex:0,trackIndex:t.trackIndex,streamIndex:t.streamIndex,movieTime:e.wG.Y,bandwidth:t.bandwidth,longtermBw:t.longtermBw,rebuffer:t.rebuffer})}),i.events.on("updateStreamingPts",function(t){var e=r.J;p.ga&&n.trace("converting updateStreamingPts, movieId:",e),r.emit("updateStreamingPts",{type:"updateStreamingPts",mediaType:t.mediaType,manifestIndex:0,trackIndex:t.trackIndex,segmentId:t.position.xa,movieTime:Math.floor(t.completePlayerStreamingTimestamp.Y)})})})},e.f2a=function(t,r,e,n){[["debug","managerdebugevent"],"segmentAppended","startEvent","logdata"].forEach(function(t){return d(r,e.events,t)}),e.events.on("streamPresenting",function(t){var e=t.playerTimestamp.Y,i=r.pa.ZC(t.position);void 0===i?n.warn("ShimSession cannot map streamPresenting: "+JSON.stringify(t)):r.emit("streamPresenting",{type:"streamPresenting",startPts:Math.floor(e),contentStartPts:Math.floor(i.wG.Y),mediaType:t.mediaType,manifestIndex:0,trackIndex:t.trackIndex,streamIndex:t.streamIndex})}),e.events.on("segmentPresenting",function(t){var e=r.pa.ZC(t.position),i=t.playerTimestamp.Qa(e.wG),n=t.position.xa;r.qUa||(r.emit("manifestPresenting",{type:"manifestPresenting",index:0,pts:t.playerTimestamp.Y,movieId:e.W.toString(),replace:!1,contentOffset:i.Y}),r.qUa=!0),r.emit("segmentPresenting",{type:"segmentPresenting",segmentId:n,contentOffset:i.Y,metrics:t.metrics})}),e.events.on("ptsChanged",function(t){r.emit("ptschanged",t.initialTimestamp.Y),r.Cd.emit("skipped")})},e.Q4=function(t,e,i,n,r,a){i=i.Y,r=null!=r?r:e,t.emit("logdata",{type:"logdata",target:"startplay",fields:{hasasereport:!!a,hashindsight:!1,buffCompleteReason:e.reason,actualbw:n,initSelReason:null!==(n=e.initSelReason)&&void 0!==n?n:"unknown",bcVBufferLevelMs:e.vBufferLevelMs,bcABufferLevelMs:r.aBufferLevelMs}}),t.emit("ptschanged",i),t.emit("bufferingComplete",{type:"bufferingComplete",time:e.time,actualStartPts:i,aBufferLevelMs:r.aBufferLevelMs,vBufferLevelMs:e.vBufferLevelMs,selector:e.selector,initBitrate:e.initBitrate,skipbackBufferSizeBytes:e.skipbackBufferSizeBytes})},e.$Ua=function(t,e,i){t.emit("audioTrackSwitchComplete",{type:"audioTrackSwitchComplete",trackId:e.track_id,trackIndex:i})}},function(t,e,i){var n,r,a;_esm(e),e.RQa=void 0,t=i(2),n=i(17),r=t.__importDefault(i(124)),a=i(9),e.RQa=function(t){return t.Kkb||(r.default(n.EventEmitter.prototype,t),Object.defineProperties(t,{Kkb:{value:!0},Mc:{get:function(){return new a.T(this.Re(),1e3)}},playbackRate:{get:function(){return Math.max("function"==typeof this.Jo?this.Jo():1,.01)}}})),t}},function(t,e){_esm(e),e.Hvb={Lw:["minInitVideoBitrate",-1/0],Kra:["minHCInitVideoBitrate",-1/0],fA:["maxInitVideoBitrate",1/0],WW:["minInitAudioBitrate",-1/0],VW:["minHCInitAudioBitrate",-1/0],HW:["maxInitAudioBitrate",1/0],w8:["minAcceptableVideoBitrate",-1/0],SW:["minAcceptableVMAF",0],HOb:["minAcceptableVMAFRebufferScalingFactor",0],Jra:["minAllowedVideoBitrate",-1/0],HNb:["maxAllowedVideoBitrate",1/0],KH:["minAllowedVmaf",-1/0],n2a:["maxAllowedVmaf",1/0],CP:["streamFilteringRules",{enabled:!1,profiles:["playready-h264mpl40-dash"],action:"keepLowest"}],U4:["enableResolutionVMAFStreamFilter",!1],hta:["percentCapTitlesForResolutionVMAFStreamFilter",100],o$:["resolutionVMAFCappingRuleList",[]],h_a:["ignoreUserFilterOnEmptyResult",!0],XW:["minRequiredBuffer",2e4],D8:["minRequiredAudioBuffer",0],tj:["minPrebufSize",5800],z8:["minCheckBufferingCompleteInterval",200],T4:["enableMoreFrequentBufferingCompleteCheck",!1],Nra:["minimumBufferingCompleteInterval",1e4],j$:["requireDownloadDataAtBuffering",!1],y_a:["indicatorForDownloadDataAtBuffering","oncomplete"],k$:["requireSetupConnectionDuringBuffering",!1],vua:["rebufferingFactor",1],$r:["maxBufferingTime",2e3],Zxa:["useMaxPrebufSize",!0],wD:["maxPrebufSize",4e4],nra:["maxRebufSize",1/0],ICb:["fastRebufferRecoveryThreshold",1/0],HCb:["fastRebufferRecoverBwThrehold",3e3],Y6:["initialBitrateSelectionCurve",null],D_a:["initSelectionLowerBound",-1/0],E_a:["initSelectionUpperBound",1/0],haa:["throughputPercentForAudio",15],Eia:["bandwidthMargin",0],Gia:["bandwidthMarginCurve",[{m:20,b:15e3},{m:17,b:3e4},{m:10,b:6e4},{m:5,b:12e4}]],Asb:["bandwidthMarginCurveAudio",{min:.7135376,max:.85,Py:76376,scale:18862.4,gamma:3.0569}],Fia:["bandwidthMarginContinuous",!1],Bsb:["bandwidthMarginForAudio",!0],$wa:["switchConfigBasedOnInSessionTput",!0],$ja:["conservBandwidthMargin",20],hU:["conservBandwidthMarginTputThreshold",6e3],aka:["conservBandwidthMarginCurve",[{m:25,b:15e3},{m:20,b:3e4},{m:15,b:6e4},{m:10,b:12e4},{m:5,b:24e4}]],w$a:["switchAlgoBasedOnHistIQR",!1],kE:["switchConfigBasedOnThroughputHistory","iqr"],mra:["maxPlayerStateToSwitchConfig",-1],Mqa:["lowEndMarkingCriteria","iqr"],Ica:["IQRThreshold",.5],Moa:["histIQRCalcToUse","simple"],xt:["bandwidthManifold",{curves:[{min:.05,max:.82,Py:7e4,scale:178e3,gamma:1.16},{min:0,max:.03,Py:15e4,scale:16e4,gamma:3.7}],threshold:14778,gamma:2.1,niqrcurve:{min:1,max:1,center:2,scale:2,gamma:1},filter:"throughput-sw",niqrfilter:"throughput-iqr",simpleScaling:!0}],ru:["maxTotalBufferLevelPerSession",0],VZa:["highWatermarkLevel",3e4],cab:["toStableThreshold",3e4],naa:["toUnstableThreshold",0],swa:["skipBitrateInUpswitch",!1],qya:["watermarkLevelForSkipStart",8e3],Goa:["highStreamRetentionWindow",9e4],Nqa:["lowStreamTransitionWindow",51e4],Ioa:["highStreamRetentionWindowUp",5e5],Pqa:["lowStreamTransitionWindowUp",1e5],Hoa:["highStreamRetentionWindowDown",6e5],Oqa:["lowStreamTransitionWindowDown",0],Foa:["highStreamInfeasibleBitrateFactor",.5],Zz:["lowestBufForUpswitch",9e3],V7:["lockPeriodAfterDownswitch",15e3],Rqa:["lowWatermarkLevel",15e3],$z:[["lowestWaterMarkLevel","lowestWatermarkLevel"],3e4],Sqa:["lowestWaterMarkLevelBufferRelaxed",!1],xra:["mediaRate",1.5],i8:["maxTrailingBufferLen",15e3],ET:["audioBufferTargetAvailableSize",262144],RZ:["videoBufferTargetAvailableSize",1048576],I2a:["maxVideoTrailingBufferSize",8388608],p2a:["maxAudioTrailingBufferSize",393216],l5:["fastUpswitchFactor",3],VVa:["fastUpswitchFactorWithoutHeaders",3],Yla:["fastDownswitchFactor",3],gA:["maxMediaBufferAllowed",27e4],Zac:["minMediaBufferLen",1e4],qwa:["simulatePartialBlocks",!0],u9a:["simulateBufferFull",!0],bka:["considerConnectTime",!0],Zja:["connectTimeMultiplier",1],M1a:["lowGradeModeEnterThreshold",12e4],N1a:["lowGradeModeExitThreshold",9e4],s2a:["maxDomainFailureWaitDuration",3e4],o2a:["maxAttemptsOnFailure",18],LVa:["exhaustAllLocationsForFailure",!0],y2a:["maxNetworkErrorsDuringBuffering",20],c8:["maxBufferingTimeAllowedWithNetworkError",6e4],BL:["alwaysRunUnderflowTimer",!0],TVa:["fastDomainSelectionBwThreshold",2e3],I$a:["throughputProbingEnterThreshold",4e4],J$a:["throughputProbingExitThreshold",34e3],z1a:["locationProbingTimeout",1e4],aWa:["finalLocationSelectionBwThreshold",1e4],G$a:["throughputHighConfidenceLevel",.75],H$a:["throughputLowConfidenceLevel",.4],zqa:["locationStatisticsUpdateInterval",6e4],SMb:["locationSelectorPersistFailures",!0],mVa:["enablePerfBasedLocationSwitch",!1],Cac:["maxRateMaxFragmentGroups",4500],nta:["pipelineScheduleTimeoutMs",2],hA:["maxPartialBuffersAtBufferingStart",2],NOb:["minPendingBufferLen",3e3],g8:["maxPendingBufferLen",6e3],FBb:["enableNginxRateLimit",!1],X8:["nginxSendingRate",4e4],JBb:["enableRequestPacingToken",!1],nOb:["mediaRequestPacingSpeed",2],ipa:["initialMediaRequestToken",2e4],a8:["maxActiveRequestsSABCell100",2],A2a:["maxPendingBufferLenSABCell100",500],G7a:["resetActiveRequestsAtSessionInit",!0],xla:["enableCprAudio",!1],yla:["enableCprVideo",!1],Lja:["clientPacingParams",{enableAdaptiveInitialThroughput:!1,minRequiredBuffer:3e4,rateDiscountFactors:[2,2,3],lowestAllowedRateFactor:1}],mZb:["staticPacingRateKbps",0],FRb:["paceRateSelectorAlgorithm","default"],lVa:["enablePaceReportLogging",!1],P0b:["unpacedFragmentInterval",0],wJb:["ignorePacedRequestsThroughput",!1],vJb:["ignoreInferredPacedRequestsThroughput",!1],t9:["pacedThresholdPct",.1],Eua:["regressionAlgoPacingCoefficients",[{bufferLevelMs:0,coefficients:{selectedFragmentBitrate:0,upswitchFragmentBitrate:0,maxFragmentBitrate:0,selectedAverageBitrate:0,upswitchAverageBitrate:0,maxAverageBitrate:2,selectedPeakBitrate:0,upswitchPeakBitrate:0,maxPeakBitrate:0,bufferLevelMs:0,observedThroughput:0,predictedThroughput:0,offset:0}},{bufferLevelMs:3e4,coefficients:{selectedFragmentBitrate:0,upswitchFragmentBitrate:0,maxFragmentBitrate:0,selectedAverageBitrate:1,upswitchAverageBitrate:0,maxAverageBitrate:0,selectedPeakBitrate:0,upswitchPeakBitrate:0,maxPeakBitrate:0,bufferLevelMs:0,observedThroughput:0,predictedThroughput:0,offset:0}}]],S4:["enableInitialTputLogging",!1],ora:["maxResponsesInitialTput",6],pra:["maxStreamingSkew",2e3],KNb:["maxBufferOccupancyForSkewCheck",1/0],H1b:["useBufferOccupancySkipBack",!0],kra:["maxPendingBufferPercentage",10],D2a:["maxRequestsInBuffer",120],G6:["headerRequestSize",4096],Ola:["estimateHeaderSize",!0],J$b:["headerCacheEstimateHeaderSize",!1],RH:["neverWipeHeaderCache",!1],T1b:["useSidxInfoFromManifestForHeaderRequestSize",!1],UVa:["fastPlayHeaderRequestSize",0],SN:["maxRequestSize",0],YN:["minRequestSize",65536],TW:["minBufferLenForHeaderDownloading",1e4],A9a:["smartHeaderPreDownloading",!1],pBb:["enableAllHeadersPreDownloading",!1],vbc:["onlyAllowPtsUpdatePolling",!1],OOb:["minVideoBufferPoolSizeForSkipbackBuffer",33554432],XO:["reserveForSkipbackBufferMs",15e3],psa:["numExtraFragmentsAllowed",2],zq:["pipelineEnabled",!0],RN:["maxParallelConnections",3],Q1b:["usePipelineForAudio",!1],P1b:["usePipelineDetectionForAudio",!1],D9a:["socketReceiveBufferSize",0],s3:["audioSocketReceiveBufferSize",32768],UP:["videoSocketReceiveBufferSize",65536],tbb:["usePipelineDetectionForVideo",!1],SOb:["minVideoSocketReceiveBufferSize",65536],Doa:["headersSocketReceiveBufferSize",32768],pYb:["shareDownloadTracks",!0],qYb:["shareOpenRangeTracks",!1],kAb:["disableHeaderDownloadTracks",!1],Mra:["minTimeBetweenHeaderRequests",void 0],Faa:["updatePtsIntervalMs",1e3],Ria:["bufferTraceDenominator",0],ML:["bufferLevelNotifyIntervalMs",2e3],Rwa:["streamingStatusIntervalMs",2e3],vA:["prebufferTimeLimit",6e4],y8:["minBufferLevelForTrackSwitch",2e3],HBb:["enablePenaltyForLongConnectTime",!1],fta:["penaltyFactorForLongConnectTime",2],Kqa:["longConnectTimeThreshold",200],Qha:["additionalBufferingLongConnectTime",2e3],Rha:["additionalBufferingPerFailure",8e3],eY:["rebufferCheckDuration",6e4],jVa:["enableLookaheadHints",!1],J1a:["lookaheadFragments",2],jz:["enableOCSideChannel",!0],Sta:["probeRequestTimeoutMilliseconds",3e4],Jbc:["probeRequestConnectTimeoutMilliseconds",8e3],M0:["OCSCBufferQuantizationConfig",{lv:5,mx:240}],KBb:["enableSCByteRangeHints",!1],Pab:["updateDrmRequestOnNetworkFailure",!0],r2a:["maxDiffAudioVideoEndPtsMs",1e3],Fzb:["deferAseHeaderCache",!1],dUa:["deferAseScheduling",!1],O$a:["timeBeforeEndOfStreamBufferMark",6e3],ira:["maxFastPlayBufferInMs",2e4],hra:["maxFastPlayBitThreshold",2e8],gra:["maxBufferingCompleteBufferInMs",1/0],ftb:["bufferingCompleteOnMemoryLimit",!1],x8:["minAudioMediaRequestSizeBytes",0],F8:["minVideoMediaRequestSizeBytes",0],JNb:["maxAudioMediaRequestSizeBytes",1/0],ZNb:["maxVideoMediaRequestSizeBytes",1/0],QNb:["maxMediaRequestSizeBytesInFraction",1],Kw:["minAudioMediaRequestDuration",0],lA:["minVideoMediaRequestDuration",0],B8:["minMediaRequestDuration",0],INb:["maxAudioMediaRequestDuration",1/0],YNb:["maxVideoMediaRequestDuration",1/0],e8:["maxMediaRequestDuration",1/0],Wha:["allowFirstRequestAggregation",!1],KOb:["minAudioMediaRequestDurationCache",0],ROb:["minVideoMediaRequestDurationCache",0],EBb:["enableMultiFragmentRequest",!1],obb:[["useHeaderCache","usehc"],!0],Yxa:[["useHeaderCacheData","usehcd"],!0],y4:["defaultHeaderCacheSize",4],$Ta:["defaultHeaderCacheDataCount",4],x4:["defaultHeaderCacheDataPrefetchMs",0],JIb:["headerCacheMaxPendingData",6],K$b:["headerCachePriorityLimit",5],PZa:["headerCacheAdoptBothAV",!1],R1b:["usePipelineForBranchedAudio",!0],Hub:["childBranchBatchedAmount",1e4],BD:["minimumTimeBeforeBranchDecision",2e3],UOb:["minimumAppendedMediaBeforePlayback",5e3],Bbc:["parallelBranchesDuringBuffering",!1],TNb:["maxRequestsToAttachOnBranchActivation",void 0],YW:["minimumJustInTimeBufferLevel",3e3],yBb:["enableJustInTimeAppends",!1],fVa:["enableDelayedSeamless",!1],g9b:["branchEndPtsIntervalMs",250],xJb:["ignorePtsJustBeforeCurrentSegment",!1],u2a:["maxFragsForFittableOnBranching",300],XRb:["pausePlaylistAtEnd",!0],mqb:["adaptiveParallelTimeoutMs",1e3],yM:["enableAdaptiveParallelStreaming",!1],Qia:["bufferThresholdToSwitchToSingleConnMs",45e3],Pia:["bufferThresholdToSwitchToParallelConnMs",35e3],mBb:["enableAPSForBranching",!1],Waa:["waitForPendingConnAdaptation",!1],Yra:["networkFailureResetWaitMs",2e3],Xra:["networkFailureAbandonMs",6e4],h8:["maxThrottledNetworkFailures",5],gaa:["throttledNetworkFailureThresholdMs",200],Qqa:["lowThroughputThreshold",400],Sla:["excludeSessionWithoutHistoryFromLowThroughputThreshold",!1],H_b:["timeAtEachBitrateRoundRobin",1e4],uWb:["roundRobinDirection","forward"],hJb:["httpsConnectErrorAsPerm",!1],s3a:["mp4ParsingInNative",!1],ji:["enableManagerDebugTraces",!1],$1a:["managerDebugMessageInterval",1e3],Z1a:["managerDebugMessageCount",20],X3a:["notifyManifestCacheEom",!0],PBb:["enableUsingHeaderCount",!1],F9a:["sourceBufferInOrderAppend",!0],WD:["requireAudioStreamToEncompassVideo",!1],ZPa:["allowAudioToStreamPastVideo",!1],cTa:["countGapInBuffer",!1],$Pa:["allowCallToStreamSelector",!1],rRa:["bufferThresholdForAbort",2e4],Mwa:["ase_stream_selector","optimized"],NQa:["audiostreamSelectorAlgorithm","selectaudioadaptive"],gpa:["initBitrateSelectorAlgorithm","default"],Wia:["bufferingSelectorAlgorithm","default"],yZb:["streamSelectionTrace",[{f:60,s:5},{f:61,s:3},{f:62,s:2},{f:63,s:0}]],oVa:["enableThroughputTraceResearchData",!1],K$a:["throughputTraceParam",{numB:3600,bSizeMs:2e3,fillS:"last",fillHl:1e3}],$w:["researchEnvironmentEnabled",!1],MBb:["enableStreamSelectionAugmentData",!1],msb:["augmentDataNumOfChunks",30],RTa:["ase_ls_failure_simulation",""],Gka:["ase_dump_fragments",!1],Ika:["ase_location_history",0],Jka:["ase_throughput",0],TTa:["ase_simulate_verbose",!1],ah:["stallAtFrameCount",void 0],J9a:["stallAtFrameCountAudio",void 0],cra:["marginPredictor","simple"],kbb:["useBackupUnderflowTimer",!0],zPb:["noDuplicateUnderflowTimer",!1],Xcc:["useManifestDrmHeader",!0],Ycc:["useOnlyManifestDrmHeader",!0],Zra:["networkMeasurementGranularity","video_location"],qPb:["netIntrStoreWindow",36e3],fbc:["minNetIntrDuration",8e3],hmb:["fastHistoricBandwidthExpirationTime",10368e3],Gmb:["bandwidthExpirationTime",5184e3],gmb:["failureExpirationTime",86400],rOa:["historyTimeOfDayGranularity",4],dmb:["expandDownloadTime",!0],qnb:["minimumMeasurementTime",500],pnb:["minimumMeasurementBytes",131072],Dob:["throughputMeasurementTimeout",2e3],Cob:["initThroughputMeasureDataSize",262144],$mb:["historicBandwidthUpdateInterval",2e3],onb:["minimumBufferToStopProbing",1e4],O8b:["throughputPredictor","ewma"],zva:["secondThroughputEstimator","slidingwindow"],k8a:["secondThroughputMeasureWindowInMs",3e5],N8b:["throughputMeasureWindow",5e3],P8b:["throughputWarmupTime",5e3],M8b:["throughputIQRMeasureWindow",1e3],y8b:["IQRBucketizerWindow",15e3],v2a:["maxIQRSamples",100],g3a:["minIQRSamples",5],J8b:["connectTimeHalflife",10],D8b:["responseTimeHalflife",10],ANa:["historicThroughputHalflife",14400],zNa:["historicResponseTimeHalflife",100],yNa:["historicHttpResponseTimeHalflife",100],xDa:["HistoricalTDigestConfig",{maxc:25,rc:"ewma",c:.5,hl:7200}],dOa:["minReportedNetIntrDuration",4e3],L8b:["throughputBucketMs",500],B8b:["bucketHoltWintersWindow",2e3],Wlb:["enableFilters","throughput-ewma throughput-sw throughput-iqr throughput-tdigest avtp entropy".split(" ")],emb:["experimentalFilter",["throughput-wssl"]],Ufa:["filterDefinitionOverrides",{}],Llb:["defaultFilter","throughput-ewma"],kpb:["secondaryFilter","throughput-sw"],OK:["defaultFilterDefinitions",{"throughput-ewma":{type:"discontiguous-ewma",mw:5e3},"throughput-sw":{type:"slidingwindow",mw:3e5},"throughput-wssl":{type:"wssl",mw:5e3,max_n:20},"throughput-iqr":{type:"iqr",mx:100,mn:5,bw:15e3,iv:1e3},"throughput-iqr-history":{type:"iqr-history"},"throughput-location-history":{type:"discrete-ewma",hl:14400},"respconn-location-history":{type:"discrete-ewma",hl:100},"throughput-tdigest":{type:"tdigest",maxc:25,c:.5,b:1e3,w:15e3,mn:6},"throughput-tdigest-history":{type:"tdigest-history",maxc:25,rc:"ewma",c:.5,hl:7200},"respconn-ewma":{type:"discrete-ewma",hl:10},avtp:{type:"avtp"},entropy:{type:"entropy",mw:2e3,sw:6e4,mins:1,in:"none",hdl:[150,230,352,539,825,1264,1936,2966,4543,6958],uhdl:[150,230,352,539,825,1264,1936,2966,4543,6958,10657,16322,25e3]}}],Bla:["enableWsslEstimate",!1],Fac:["maxWsslRequestSize",131072],Eac:["maxWsslRequestRatio",.2],acb:["wsslAggregationMethod","max"],UU:["enableSessionHistoryReport",!0],ula:["earlyStageEstimatePeriod",1e4],i1a:["lateStageEstimatePeriod",3e4],f8:["maxNumSessionHistoryStored",10],E8:["minSessionHistoryDuration",3e5],QIb:["highAndStableModelName","baseline"],Ala:["enableHighAndStablePredictor",!1],C8:["minNumSessionHistory",5],c9b:["baselineHighAndStableThreshold",{bwThreshold:2e4,nethreshold:.15}],I6:["highAndStableLRModelParams",{probThresh:.5,lrParams:{lrMeans:{avtp_b:.6717527000068912,avtp_kurtosis:-.32272653860208733,avtp_last:18162.25923773571,avtp_mean:18374.85489469472,avtp_niqr:.36157000863524086,avtp_p1:15217.082220651864,avtp_p25:16255.438250827538,avtp_p50:18018.48498809834,avtp_p75:20633.64785646099,avtp_p99:23493.017531706773,avtp_skew:-.15988915479533752,avtp_std:3494.2469335662795,fracAbove20Mbps:.36069774394324833,fracBelow20p:.44509094302767843,hour_current:14.88892246562775,intercept:0,neuhd_b:.19944416382669086,neuhd_kurtosis:-.3831651109303816,neuhd_last:.18607356003210967,neuhd_mean:.18446011173649746,neuhd_p1:.08973105578594363,neuhd_p25:.11425784546899986,neuhd_p50:.16178032426296476,neuhd_p75:.24808260501822446,neuhd_p99:.3802747624363075,neuhd_skew:.5015094291572232,neuhd_std:.11460618864890261,session_ct:9.244559018608745},lrStd:{avtp_b:.2163710864106512,avtp_kurtosis:1.3411069011423224,avtp_last:15614.28989483334,avtp_mean:15019.534079778174,avtp_niqr:1.5102894334298487,avtp_p1:13558.687640161155,avtp_p25:14056.082157854784,avtp_p50:14989.029847375388,avtp_p75:16706.411995109334,avtp_p99:19150.29672591333,avtp_skew:.8845810368911663,avtp_std:3980.545705351505,fracAbove20Mbps:.43529176129377334,fracBelow20p:.3274979541369119,hour_current:5.5716567906096826,intercept:1,neuhd_b:2.3749059625699656,neuhd_kurtosis:1.2291306781983045,neuhd_last:.16618636811434156,neuhd_mean:.10880818013405419,neuhd_p1:.11470893745650394,neuhd_p25:.11090914485422533,neuhd_p50:.11733552791484116,neuhd_p75:.1358051961745428,neuhd_p99:.18492685125890918,neuhd_skew:.7361251697238183,neuhd_std:.07376059312467607,session_ct:1.9982003410777347},lrWeights:{avtp_b:-.4168110388005385,avtp_kurtosis:-.008309418872795704,avtp_last:.9636719412610095,avtp_mean:.4596368266505147,avtp_niqr:.004794244204030071,avtp_p1:.04179963884288828,avtp_p25:-.05971214541667236,avtp_p50:-.06609686988077124,avtp_p75:-.021163989843701936,avtp_p99:-.5012233043639935,avtp_skew:.04960520099458782,avtp_std:-.04377297768250326,fracAbove20Mbps:1.4353872225089277,fracBelow20p:.536611494372919,hour_current:-.02151363764568746,intercept:-2.454070409461966,neuhd_b:-.010631811493285886,neuhd_kurtosis:.0392239159548721,neuhd_last:-.26007106077057324,neuhd_mean:-.14989131456288793,neuhd_p1:.03395316119601572,neuhd_p25:-.03267433155107594,neuhd_p50:.016260475942198947,neuhd_p75:.09080546760249925,neuhd_p99:.07570542703705993,neuhd_skew:-.0072781558054514205,neuhd_std:-.06708762681381578,session_ct:.010263062689577421}}}],RIb:["highAndStableParams",{minRequiredBuffer:1e4,bandwidthMarginCurve:[{m:10,b:15e3},{m:5,b:3e4},{m:0,b:12e4}]}],Jha:["addHeaderDataToNetworkMonitor",!0],Bwa:["startMonitorOnLoadStart",!1],Tua:["reportFailedRequestsToNetworkMonitor",!1],B9:["periodicHistoryPersistMs",0],t$:["saveVideoBitrateMs",0],bX:["needMinimumNetworkConfidence",!0],Jia:["biasTowardHistoricalThroughput",!1],WMb:["logMemoryUsage",!1],Ju:["probeServerWhenError",!0],Ay:["allowSwitchback",!0],mI:["probeDetailDenominator",100],d8:["maxDelayToReportFailure",300],wr:["allowParallelStreaming",!1],Qac:["mediaPrefetchDisabled",!1],d3a:["minBufferLevelToAllowPrefetch",5e3],v$:["seamlessAudio",!1],ccc:["seamlessAudioProfiles",[]],dcc:["seamlessAudioProfilesAndTitles",{}],xva:["seamlessAudioMaximumSyncError",void 0],yva:["seamlessAudioMinimumSyncError",void 0],P_a:["insertSilentFrames",0],opa:["insertSilentFramesOnSeek",!1],Q_a:["insertSilentFramesOnSeekForTitles",[]],dKb:["insertSilentFramesOnSeekCount",3],m$b:["forceDiscontinuityAtTransition",!0],Xwa:["supportAudioResetOnDiscontinuity",void 0],YZb:["supportAudioEasingOnDiscontinuity",void 0],cBb:["editCompleteFragments",!0],VOb:["minimumAudioFramesPerFragment",1],fG:["applyProfileTimestampOffset",!1],fm:["applyProfileStreamingOffset",!0],l6a:["profileTimestampOffsets",{"heaac-2-dash":{64:{ticks:-3268,timescale:48e3},96:{ticks:-3352,timescale:48e3}},"heaac-2hq-dash":{128:{ticks:-3352,timescale:48e3}}}],gsb:["audioProfilesNonSyncSamples",["xheaac-dash"]],A0b:["truncateEndOfStreamAudio",!1],J1b:["useDpiAssumedAacEncoderDelay",!0],zra:["mediaSourceSupportsNegativePts",!1],XN:["minAudioPtsGap",void 0],esb:["audioOverlapGuardSampleCount",2],nVa:["enableRecordJSBridgePerf",!1],Nca:["JSBridgeTDigestConfig",{maxc:25,c:.5}],E_b:["throughputThresholdSelectorParam",0],E1b:["upswitchDuringBufferingFactor",2],orb:["allowUpswitchDuringBuffering",!1],TSa:["contentOverrides",void 0],fka:["contentProfileOverrides",void 0],Loa:["hindsightDenominator",0],Koa:["hindsightDebugDenominator",0],J6:["hindsightAlgorithmsEnabled",[]],K6:["hindsightParam",{numB:1/0,bSizeMs:1e3,fillS:"last",fillHl:1e3}],pQa:["appendMediaRequestOnComplete",!1],Vaa:["waitForDrmToAppendMedia",!1],u5:["forceAppendHeadersAfterDrm",!1],Kka:["declareBufferingCompleteAtSegmentEnd",!1],Fw:["maxActiveRequestsPerSession",void 0],uqa:["limitAudioDiscountByMaxAudioBitrate",!1],$ha:["appendFirstHeaderOnComplete",!0],bZ:["strictBufferCapacityCheck",!1],GL:["aseReportDenominator",0],n3:["aseReportIntervalMs",3e5],waa:["translateToVp9Draft",!1],FP:["switchableAudioProfiles",[]],hsb:["audioProfilesOverride",[{profiles:["ddplus-5.1-dash","ddplus-5.1hq-dash"],override:{maxInitAudioBitrate:256,audioBwFactor:5.02}},{profiles:["ddplus-atmos-dash"],override:{maxInitAudioBitrate:448}}]],x$a:["switchableAudioProfilesOverride",[{profiles:["ddplus-5.1-dash","ddplus-5.1hq-dash"],override:{maxInitAudioBitrate:192}},{profiles:["ddplus-atmos-dash"],override:{minInitAudioBitrate:448,maxInitAudioBitrate:448,minAudioBitrate:448}}]],jsb:["audioSwitchConfig",{upSwitchFactor:5.02,downSwitchFactor:3.76,lowestBufForUpswitch:16e3,lockPeriodAfterDownswitch:16e3}],G2a:["maxStartingVideoVMAF",110],uu:["minStartingVideoVMAF",1],uT:["activateSelectStartingVMAF",!1],B$:["selectStartingVMAFTDigest",-1],cP:["selectStartingVMAFMethod","fallback"],p8a:["selectStartingVMAFMethodCurve",{log_p50:[6.0537,-.8612],log_p40:[5.41,-.7576],log_p20:[4.22,-.867],sigmoid_1:[11.0925,-8.0793]}],tA:["perFragmentVMAFConfig",{enabled:!1,simulatedFallback:!1,fallbackBound:12}],lAb:["disablePtsStartsEvent",!0],yua:["recordFirstFragmentOnSubBranchCreate",!0],N2a:["mediaCacheConvertToBinaryData",!1],sra:["mediaCacheSaveOneObject",!1],l2a:["markRequestActiveOnFirstByte",!1],P4:["earlyAppendSingleChildBranch",!0],aB:["useNativeDataViewMethods",!0],I1b:["useCorrectDrainingAmounts",!0],TU:["enableNewAse",!1],Iaa:["useNewApi",!1],E4:["aseDiagnostics",[{mj:"queue-audit",enabled:!0},{mj:"task-audit",enabled:!0},{mj:"trace-ShimSession",enabled:!0},{mj:"trace-engine",enabled:!0},{mj:"trace-RequestPacer",enabled:!0},{mj:"trace-BufferStateTracker",enabled:!0},{mj:"trace-GraphStreamingProcess",enabled:!0},{mj:"trace-AsePlaygraph",enabled:!0},{mj:"playgraph-branch-audit",enabled:!0}]],Xsb:["branchDistanceThreshold",6e4],b8:["maxAllowedOutstandingRequests",4],Lra:["minStreamableConcurrencyWindow",3e3],XNb:["maxStreamableConcurrencyWindow",1/0],Nwa:["streamableConcurrencyFactor",.3],VT:["bufferingConcurrencyWindow",7800],Mia:["branchCreationThreshold",12e4],R4:["enableDiscontiguousBuffering",!1],Ama:["forceImmediateTransitionTypeForTitles",[]],zma:["forceImmediateTransitionExitZone",0],ZSa:["contiguousBufferMultiplier",3],XSa:["contiguousBufferMinimumAudio",1048576],YSa:["contiguousBufferMinimumVideo",8388608],jTb:["prefetchBudgetInBytes",0],N6a:["rebufferRiskHalfLife",1e4],Wxa:["useBufferSizeLimiter",!1],U1b:["useStaticBufferSizeLimiter",!1],mTb:["prefetchWeightBudget",32],Ora:["minimumDownstreamBranchProbability",.075],Xxa:["useExitZones",!0],nTb:["prefetchWhilePlaying",!0],sTb:["prefetcherSoftReset",!0],M5a:["playgraphDefaultWeight",65520],Gzb:["delayNotificationOfEoS",!1],sOb:["memDeadlockShouldCheckMemory",!0],rOb:["memDeadlockOverageThreshold",.9],qOb:["memDeadlockMaxUtilizationPercentage",.5],vta:["playerPtsPadding",1],UW:["minFragmentVmaf",void 0],wla:["enableCombinedPlaygraphs",!1]},e.oj=e.Hvb},function(t,e,i){var n,r,a,o;function s(t,e,i,n,r){return o.call(this,s.console,t,e,i,n,r)||this}_esm(e),e.cr=e.ar=e.dr=e.bA=e.j1=void 0,n=i(2),r=i(116),Object.defineProperties(e,{ar:{enumerable:!0,get:function(){return r.ar}}}),Object.defineProperties(e,{cr:{enumerable:!0,get:function(){return r.cr}}}),Object.defineProperties(e,{bA:{enumerable:!0,get:function(){return r.bA}}}),Object.defineProperties(e,{j1:{enumerable:!0,get:function(){return r.j1}}}),a=n.__importDefault(i(6)),o=r.dr,n.__extends(s,o),Object.defineProperties(s,{console:{get:function(){return this.H||(this.H=new a.default.Console("MP4","media|asejs"))},enumerable:!1,configurable:!0}}),e.dr=s},function(t,e,i){var r;e=i(177),r=i(963),i=e(function(n,t,e){return r(function(t,e,i){return n(e,i)},t,e)}),t.exports=i},function(t,e,i){var a,o;e=i(177),a=i(416),o=i(964),i=e(function n(r,t,e){return o(function(t,e,i){return a(e)&&a(i)?n(r,e,i):r(t,e,i)},t,e)}),t.exports=i},function(t,e,i){var a;e=i(177),a=i(256),i=e(function(t,e,i){var n,r={};for(n in e)a(n,e)&&(r[n]=a(n,i)?t(n,e[n],i[n]):e[n]);for(n in i)a(n,i)&&!a(n,r)&&(r[n]=i[n]);return r}),t.exports=i},function(t,e,i){e=i(417),i=i(974)([e,i=i(984)]),t.exports=i},function(t){t.exports=function(t){return"function"==typeof t["@@transducer/step"]}},function(t){t.exports=function(t,e){for(var i=0,n=e.length,r=[];i<n;)t(e[i])&&(r[r.length]=e[i]),i+=1;return r}},function(t,e,i){var n,r;e=i(130),n=i(419),r=i(969),i=e(function(t){return!!n(t)||!(!t||"object"!=typeof t||r(t))&&(1===t.nodeType?!!t.length:0===t.length||0<t.length&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))}),t.exports=i},function(t){t.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},function(t){var e=(i.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},i.prototype["@@transducer/result"]=function(t){return t},i.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},i);function i(t){this.f=t}t.exports=function(t){return new e(t)}},function(t,e,i){var n=i(258);e=i(59)(function(t,e){return n(t.length,function(){return t.apply(e,arguments)})}),t.exports=e},function(t,e,i){var n,r;function a(t,e){this.e_=e,this.f=t}e=i(59),n=i(420),a.prototype["@@transducer/init"]=n.xb,a.prototype["@@transducer/result"]=n.result,a.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.e_["@@transducer/step"](t,e):t},r=a,i=e(function(t,e){return new r(t,e)}),t.exports=i},function(t,e,i){var n=i(256),r=Object.prototype.toString;t.exports=function(){return"[object Arguments]"===r.call(arguments)?function(t){return"[object Arguments]"===r.call(t)}:function(t){return n("callee",t)}}},function(t,e,i){var n;e=i(130),n=i(975),i=e(function(t){return n(function(){return Array.prototype.slice.call(arguments,0)},t)}),t.exports=i},function(t,e,i){var r,a,o,s,u;e=i(59),r=i(422),a=i(423),o=i(977),s=i(978),u=i(983),i=e(function(t,n){return a(u(o,0,s("length",n)),function(){var e=arguments,i=this;return t.apply(i,r(function(t){return t.apply(i,e)},n))})}),t.exports=i},function(t,e,i){var c,h;c=i(258),h=i(178),t.exports=function a(o,s,u){return function(){for(var t,e=[],i=0,n=o,r=0;r<s.length||i<arguments.length;)r<s.length&&(!h(s[r])||arguments.length<=i)?t=s[r]:(t=arguments[i],i+=1),e[r]=t,h(t)||--n,r+=1;return n<=0?u.apply(this,e):c(n,a(o,e,u))}}},function(t,e,i){e=i(59)(function(t,e){return t<e?e:t}),t.exports=e},function(t,e,i){var n,r;e=i(59),n=i(979),r=i(981),i=e(function(t,e){return n(r(t),e)}),t.exports=i},function(t,e,i){var n,r,a,o,s,u;e=i(59),n=i(418),r=i(422),a=i(257),o=i(980),s=i(423),u=i(421),i=e(n(["fantasy-land/map","map"],o,function(i,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return s(n.length,function(){return i.call(this,n.apply(this,arguments))});case"[object Object]":return a(function(t,e){return t[e]=i(n[e]),t},{},u(n));default:return r(i,n)}})),t.exports=i},function(t,e,i){var n,r;function a(t,e){this.e_=e,this.f=t}e=i(59),n=i(420),a.prototype["@@transducer/init"]=n.xb,a.prototype["@@transducer/result"]=n.result,a.prototype["@@transducer/step"]=function(t,e){return this.e_["@@transducer/step"](t,this.f(e))},r=a,i=e(function(t,e){return new r(t,e)}),t.exports=i},function(t,e,i){var n;e=i(59),n=i(982),i=e(function(t,e){return n([t],e)}),t.exports=i},function(t,e,i){e=i(59)(function(t,e){for(var i=0;i<t.length;){if(null==e)return;e=e[t[i]],i+=1}return e}),t.exports=e},function(t,e,i){i=i(177)(i=i(257)),t.exports=i},function(t,e,i){var n,r=i(985);e=i(59),n=i(417),i=e(function(t,e){return n(r(t),e)}),t.exports=i},function(t){t.exports=function(t){return function(){return!t.apply(this,arguments)}}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E;_esm(e),e.YZa=void 0,t=i(0),n=i(428),r=i(987),a=i(430),o=i(988),s=i(424),u=i(1013),c=i(438),h=i(1015),f=i(425),l=i(1016),p=i(426),d=i(1017),b=i(442),m=i(261),g=i(1018),v=i(439),y=i(1019),w=i(1020),_=i(427),E=i(1022),e.YZa=new t.rd(function(t){t(n.rDa).to(r.qDa).aa(),t(a.vDa).to(o.uDa).aa(),t(s.dDa).to(u.cDa).aa(),t(c.fDa).to(h.eDa).aa(),t(v.pAa).to(y.oAa).aa(),t(f.OIa).to(l.NIa).aa(),t(p.Jea).to(d.PKa),t(b.nR).to(w.mR),t(_.qR).to(E.pR),t(m.xca).to(g.yDa)})},function(t,e,i){var n,r,a,o;function s(t,e){this.gJb=t,this.log=e.ib("HeaderFetcherImpl")}_esm(e),e.qDa=void 0,t=i(1),n=i(0),r=i(7),a=i(429),o=i(87),s.prototype.download=function(t){var i,n,r,a,o;return i=this,n=t.urls,r=t.offset,a=t.length,o=0,this.IUa(n[o].url,r,a).catch(function t(e){if(o<n.length-1)return o++,i.IUa(n[o].url,r,a).catch(t);throw e})},s.prototype.IUa=function(t,e,i){return this.gJb.download({url:t,withCredentials:!1,responseType:o.ResponseType.ddb,EC:"hls_headers",Js:!0,offset:e,length:i},{F2a:1})},i=s,i=t.__decorate([n.R(),t.__param(0,n.l(a.BDa)),t.__param(1,n.l(r.qb))],i),e.qDa=i},function(t,e,i){var n,r,a;function o(t){this.ta=t.ib("HeaderParserImpl")}_esm(e),e.uDa=void 0,t=i(1),n=i(0),r=i(262),i=i(7),o.prototype.parse=function(t,e,i){if((t=new r.dr(this.ta,{mediaType:t},e,["sidx"]).parse()).Cm&&t.U)return this.f3(t.U,i)},o.prototype.f3=function(i,n){var r=0,a=0,o=0,s=i.offset,u=[];return i.vd.forEach(function(t,e){a+=t,o+=i.sizes[e],(1e3*a/i.S>=n||e===i.vd.length-1)&&(u.push({duration:a/i.S,Z:r/i.S,byteOffset:s,otb:o}),r+=a,s+=o,o=a=0)}),u},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.qb))],a),e.uDa=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=1===this.version?this.Wi([{creationTime:"int64"},{modificationTime:"int64"},{S:"int32"},{duration:"int64"}]):this.Wi([{creationTime:"int32"},{modificationTime:"int32"},{S:"int32"},{duration:"int32"}]),!0},a.Xb="mvhd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.Xb="trak",a.Na=!0,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;return this.Ac(),t=(t=1===this.version?[{creationTime:"int64"},{modificationTime:"int64"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int64"}]:[{creationTime:"int32"},{modificationTime:"int32"},{trackId:"int32"},{offset:32,type:"offset"},{duration:"int32"}]).concat({offset:64,type:"offset"},{cMb:"int16"},{prb:"int16"},{volume:"int16"},{offset:16,type:"offset"},{offset:288,type:"offset"},{width:"int32"},{height:"int32"}),this.ic=this.Wi(t),this.ic.f0b=!!(1&this.flags),this.ic.g0b=!!(2&this.flags),this.ic.h0b=!!(4&this.flags),this.ic.i0b=!!(8&this.flags),this.u.console.trace("Finished parsing track box"),!0},a.Xb="tkhd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=this.Wi(1===this.version?[{A5:"int64"}]:[{A5:"int32"}]),!0},a.Xb="mehd",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.ic=this.Wi([{$Ib:"int32"},{o2b:"int32"}]),!0},a.Xb="pasp",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.ic=this.Wi([{dtb:"int32"},{maxBitrate:"int32"},{Bia:"int32"}]),!0},a.Xb="btrt",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){for(this.u.Ml(),this.u.Ml(),this.rG=[];this.u.offset<=this.byteOffset+this.byteLength-4;)this.rG.push(this.u.Ml());return!0},a.Xb="ftyp",a.Na=!1,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),r=i(88),a=i(33).Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.ic=this.Wi([{dTb:"int32"},{RV:"int32"},{offset:96,type:"offset"},{name:"string"}]),this.ic.RV=r.ko(this.ic.RV),!0},o.Xb="hdlr",o.Na=!1,e.default=o},function(t,e,i){var n,r,a,o,s,u;function c(){return null!==u&&u.apply(this,arguments)||this}_esm(e),n=i(23),r=i(104),a=i(264),o=i(179),t=i(33),s=i(105),u=t.Dc,n.__extends(c,u),c.prototype.parse=function(){return this.Ac(),this.sm=this.u.ya(),!0},c.prototype.Qt=function(t){var e=Object.keys(this.Ua);return e.length&&(e=e[0],this.Ua[e].length&&((e=this.Ua[e][0])instanceof o.default?this.sa=new a.T(e.qz,e.samplerate):e instanceof s.default&&(e=e.Ua[r.XE])&&e.length&&(1e3!==(e=e[0].ic).cz&&1001!==e.cz||0!=e.VH%1e3?this.u.console.warn("Unexpected frame rate in NetflixFrameRateBox: "+e.VH+"/"+e.cz):this.sa=new a.T(e.cz,e.VH)),this.sa&&(t.sa=this.sa))),!0},c.prototype.mY=function(t){void 0!==this.Ua[t]&&0!==this.Ua[t].length&&(this.la.dh(this.sm-1,this.byteOffset+12),t=this.Ua[t][0],this.Ie(t.byteLength,t.byteOffset))},c.Xb="stsd",c.Na=!0,i=c,e.default=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Kma=this.u.zc(2),this.Nia=this.u.zc(5),this.Oia=this.u.zc(3),this.zha=this.u.zc(3),this.u.zc(1),this.u.zc(5),this.u.zc(5),!0},a.Xb="dac3",e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;this.ssa=7&this.u.Yc(),this.Uwa=[];for(var e=0;e<this.ssa;e++)0<(t={Kma:this.u.zc(2),Nia:this.u.zc(5),Oia:this.u.zc(5),zha:this.u.zc(3),fMb:this.u.zc(1),rsa:this.u.zc(4)}).rsa?t.jub=this.u.zc(9):this.u.zc(1),this.Uwa.push(t);return!0},a.Xb="dec3",e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33),a=r.Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.zY=this.u.Ml(),r.ga&&this.u.console.trace("SchemeTypeBoxTranslator: "+this.zY),"cenc"===this.zY&&(this.u.offset-=4,r.ga&&this.u.console.trace("SchemeTypeBoxTranslator: writing type piff at offset "+this.u.offset),this.la.b_("piff")),this.u.ya(),!0},o.Xb="schm",o.Na=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){var t;return this.u.mb(),this.qba=this.u.mb(),this.u.mb(),this.u.mb(),this.u.mb(),this.VY=this.LF(31&this.u.mb()),this.LF(this.u.mb()),this.yA=this.VY.length?this.VY[0][0]:this.qba,this.YS=this.u.offset,this.startOffset+this.length<this.u.offset&&(100===this.yA||110===this.yA||122===this.yA||144===this.yA)&&(this.u.mb(),this.u.mb(),this.LF(this.u.mb())),0<(t=this.startOffset+this.length-this.YS)&&this.Ie(t,this.YS),!0},a.prototype.LF=function(t){for(var e,i=[],n=0;n<t;++n)e=this.u.Yc(),i.push(this.u.CA(e));return i},a.Xb="avcC",a.Na=!1,e.default=a},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(179).default,n.__extends(a,r),a.prototype.Qt=function(){var t=this.Cl("esds");return(t=t&&t.jca.Cl(5))&&(this.qz=t.qz),!0},a.Xb="mp4a",a.Na=!0,e.default=a},function(t,e,i){var n,r,a;function o(){return null!==a&&a.apply(this,arguments)||this}_esm(e),n=i(23),r=i(266),a=i(33).Dc,n.__extends(o,a),o.prototype.parse=function(){return this.Ac(),this.jca=r.IQ.bY(this.u),!0},o.Xb="esds",o.Na=!1,e.default=o},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),t=i(104),i=i(33),t=t.XE,r=i.Dc,n.__extends(a,r),a.prototype.parse=function(){return this.Ac(),this.ic=this.Wi([{VH:"int32"},{cz:"int16"}]),!0},a.Xb=t,a.Na=!1,i=a,e.default=i},function(t,e,i){var n,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),r=i(33).Dc,n.__extends(a,r),a.prototype.parse=function(){var t,e,i,n,r;return this.Ac(),e=(t=this.Wi([{kJ:"int32"},{zU:"int32"},{$y:"int32"},{bz:"int32"},{az:"int32"}])).kJ,i=t.zU,n=t.$y,r=t.az,t=t.bz,this.ic={trackId:e,yzb:i,Zy:n,zzb:r,Azb:t},this.kJ=e,this.zU=i,this.$y=n,this.bz=t,this.az=r,!0},a.Xb="trex",a.Na=!1,e.default=a},function(t,e,i){var r,a,o,s,u,n,c,h,f,l,p,d;function b(t,e,i,n,r,a){this.console=t,this.stream=e,this.Oh=n,this.Pha=r,this.view=i instanceof ArrayBuffer?new DataView(i):new DataView(i.data,i.offset,i.length),this.config=a||{},this.FZa=f.fna()}_esm(e),r=i(23),a=i(1007),o=i(270),s=i(150),u=i(264),n=i(33),t=i(433),c=i(434),h=i(436),f=i(151),l=i(263),p=i(104),d=i(437),b.path=function(t,e){return e.reduce(function(t,e){return t&&t.Ua[e]&&t.Ua[e][0]},t)},b.vna=function(t){return t&&t.rG&&-1!==t.rG.indexOf("mcl0")?"mcl0":void 0},b.fma=function(t,e){var i,n;for(s.assert("mcl0"===t,"Unsupported McClearen brand"),t=(i=e.U).vd,e=new u.T(120,1).Zf(i.S).vc,n=0,i=i.jl;n<t.length&&i<e;)i+=t[n++];return n},b.prototype.parse=function(t){var e=this.sva();return e.done?(e=this.view.buffer.slice(this.view.byteOffset,this.view.byteOffset+e.offset),this.view=new DataView(e),(t=this.Ssa(t)).done?this.dka():(this.console.error("Parse error: "+t.error),{Cm:!1,parseError:t.error||"unknown mp4 parse error"})):e.cX?{Cm:!1,SPa:e.cX}:(this.console.error("Scan error: "+e.error),{Cm:!1,parseError:e.error||"unknown mp4 scan error"})},b.prototype.xn=function(t){return n.Dc.xn(this,t)},b.prototype.Cl=function(t){return n.Dc.Cl(this,t)},b.prototype.sva=function(){var t=new d.Dca(this.Oh,this.Pha?[p.Nx,p.Mx]:[],this.config&&this.config.w_b||["moof",p.zR],this.config&&this.config.AX),e=r.__assign(r.__assign({},this.config),{bI:!1});return new h.zE(b.CI,t,this.view,this.console,e).parse()},b.prototype.Ssa=function(t){var e,i=new d.DQ(this.view.byteLength),n=Object.create(l.xq.Ua);return this.config&&((this.config.w9||this.config.vaa||this.config.eE)&&a(l.xq.AI,n),this.config.waa&&a(l.xq.sxa,n),this.config.vaa&&a(l.xq.CZ,n)),e=r.__assign(r.__assign({},this.config),{bI:!0}),this.tc=new h.zE(n,i,this.view,this.console,e),(t=this.tc.parse(t)).done&&(this.Ua=this.tc.Ua),t},b.prototype.dka=function(){var t,e,i,n={Cm:!0},r=b.path(this,["moov"]),a=b.path(r,["trak","mdia","minf","stbl","stsd"]);if(this.config.w9){if(!a)return{Cm:!1,parseError:"Missing sample descriptions"};n.sa=a.sa,n.CWb=a.Ua}if((t=(t=b.path(a,["encv","sinf","schi"]))&&(b.path(t,["tenc"])||b.path(t,[p.ER])))&&(n.sVa={Nvb:t.pj,vH:t.vH,FLb:!1}),(t=b.path(r,["trak","mdia","mdhd"]))&&(n.S=t.S),(t=b.path(r,["mvex","trex"]))&&(n.Zy=t&&t.ic.Zy),n.Zy&&n.S&&(n.sa=new u.T(n.Zy,n.S)),(t=b.path(this,["sidx"]))&&(e=(e=b.path(this,[p.Nx]))&&e.qra,i=(i=b.path(this,[p.Mx]))&&i.di,n.U=t.U,n.NH=e,n.di=i),(e=this.Ua.vmaf&&this.Ua.vmaf[0])&&(n.Th=e.Th),this.config.T7a){if(!r)return{Cm:!1,parseError:"Missing movie box"};this.trim(r.byteOffset+r.byteLength),this.config.eE&&a&&1<a.sm&&t&&(n.Wg=this.eE(a,t)),void 0===n.Wg&&(r=this.tc.hz?o.concat(this.tc.wa()):this.view.buffer,n.Wg=[{Qd:0,data:r}])}return n.Cm=!0,n.BX=this.tc.offset,n},b.prototype.trim=function(t){var e=this.view.buffer.slice(this.view.byteOffset,this.view.byteOffset+Math.min(t,this.view.byteLength));this.tc.trim(t),this.view=new DataView(e)},b.prototype.eE=function(t,e){var i,n=Object.keys(t.Ua),r=n.filter(function(t){return"encv"!==t});if(!(n.length<2||r.length===n.length||0===r.length)&&(n=b.path(this,["ftyp"]),i=b.vna(n)))return n=[],this.tc.eua(),t.mY("encv"),n.push({Qd:0,Tk:!1,data:o.concat(this.tc.wa())}),this.tc.Dta(),t.mY(r[0]),t=b.fma(i,e),n.push({Qd:t,Tk:!0,data:o.concat(this.tc.wa())}),n},b.CI={},i=b,(e.dr=i).CI[p.YE]=t.default,i.CI[p.ZE]=c.default},function(t){t.exports=function t(e,i){var n;e.__proto__&&e.__proto__!==Object.prototype&&t(e.__proto__,i),Object.getOwnPropertyNames(e).forEach(function(t){void 0!==(n=Object.getOwnPropertyDescriptor(e,t))&&Object.defineProperty(i,t,n)})}},function(t,e,i){var n,r,a,o,s,u;function c(t){t?(this.Jf=t.Jf.slice(),this.eh=t.eh.slice(),this.Sd=t.Sd.slice(),this.trim=t.trim):(this.Jf=[],this.eh=[],this.Sd=[])}function h(t,e,i){return(t=u.call(this,t,e,i)||this).NU=[],t.lb=new s,t}_esm(e),n=i(23),r=i(150),a=i(270),o=i(88),t=i(1009),Object.defineProperties(c.prototype,{empty:{get:function(){return 0===this.Jf.length&&0===this.eh.length&&0===this.Sd.length},enumerable:!0,configurable:!0}}),s=c,u=t.Zea,n.__extends(h,u),h.fia=function(t,e){if(e.offset+e.size<=t.byteLength)switch(e.size){case 1:t.setUint8(e.offset,e.value);break;case 2:e.Zu?t.setInt16(e.offset,e.value):t.setUint16(e.offset,e.value);break;case 4:e.Zu?t.setInt32(e.offset,e.value):t.setUint32(e.offset,e.value);break;case 8:r.assert(!e.Zu),t.setUint32(e.offset,Math.floor(e.value/4294967296)),t.setUint32(e.offset+4,4294967295&e.value);break;default:r.assert(!1)}},Object.defineProperties(h.prototype,{hz:{get:function(){return!this.lb.empty},enumerable:!0,configurable:!0}}),h.prototype.fB=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:1}),void 0===e&&(this.offset+=1)},h.prototype.sya=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:2,Zu:!1}),void 0===e&&(this.offset+=2)},h.prototype.dh=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:4,Zu:!1}),void 0===e&&(this.offset+=4)},h.prototype.tya=function(t,e){this.lb.eh.push({offset:void 0!==e?e:this.offset,value:t,size:8,Zu:!1}),void 0===e&&(this.offset+=8)},h.prototype.b_=function(t){this.dh(o.pS(t))},h.prototype.vJ=function(t,e){this.lb.Sd.push({offset:this.offset,xl:t,value:e}),this.offset+=4},h.prototype.Ie=function(t,e,i){this.lb.Jf.push({offset:e,remove:t,$a:i})},h.prototype.Ru=function(t,e,i,n){this.lb.Jf.push({offset:i,remove:t,replace:e,$a:n})},h.prototype.trim=function(t){this.lb.trim=t},h.prototype.eua=function(){this.NU.push(new s(this.lb))},h.prototype.Dta=function(){this.lb=this.NU.pop()||new s},h.prototype.wa=function(){var e,t,i,n,r,a,o=this;return 0===this.lb.Jf.length&&0===this.lb.eh.length&&0===this.lb.Sd.length?[void 0===this.lb.trim?this.view.buffer:this.view.buffer.slice(0,this.lb.trim)]:(this.lb.Jf.sort(function(t,e){return t.offset-e.offset}),this.lb.eh.sort(function(t,e){return t.offset-e.offset}),this.eva(),e=this.cma(),t=this.view.buffer.slice(0,e),i=new DataView(t),this.lb.eh.forEach(h.fia.bind(void 0,i)),this.Nxa(i),this.Lxa(i),n=[],r=void 0!==this.lb.trim?Math.min(this.lb.trim,this.view.byteLength):this.view.byteLength,a=0,this.lb.Jf.filter(function(t){return t.offset<=r}).forEach(function(t){t.offset>a&&(n.push(i.buffer.slice(a,t.offset)),t.offset>i.byteLength&&i!==o.view&&(i=o.view,n.push(i.buffer.slice(e,t.offset)))),t.replace&&n.push(t.replace),a=t.offset+t.remove}),a<e&&n.push(t.slice(a)),a<r&&n.push(this.view.buffer.slice(Math.max(t.byteLength,a),r)),n)},h.prototype.cma=function(){var e=[],t=this.lb.eh[this.lb.eh.length-1],i=this.lb.Sd[this.lb.Sd.length-1];return t&&e.push(t.offset+t.size),i&&e.push(i.offset+4),this.lb.Jf.filter(function(t){return t.$a}).forEach(function(t){return e.push(t.$a.byteOffset+4)}),t=Math.max.apply(void 0,e),void 0!==this.lb.trim?Math.min(t,this.lb.trim):t},h.prototype.eva=function(){this.lb.Jf=this.lb.Jf.reduce(function(t,e){var i,n;return 0===t.length?t.push(e):(n=(i=t[t.length-1]).offset+i.remove,e.offset>=n?t.push(e):e.offset+e.remove>n&&(r.assert(i.$a===e.$a),i.remove+=e.offset+e.remove-n,e.replace&&(i.replace=i.replace?a.concat(i.replace,e.replace):e.replace))),t},[])},h.prototype.Nxa=function(a){var o=this;this.lb.Sd.forEach(function(i){var n,t,e=a,r=i.offset;o.lb.Jf.some(function(t){return!!(t.offset<=i.offset&&t.replace&&t.offset+t.replace.byteLength>=i.offset+4)&&(e=new DataView(t.replace),r=i.offset-t.offset,!0)}),n=i.xl+(void 0!==i.value?i.value:e.getInt32(r)),t=o.lb.Jf.reduce(function(t,e){return e.offset>i.xl&&e.offset<n?t+(e.remove-(e.replace?e.replace.byteLength:0)):t},0),e.setInt32(r,n-i.xl-t)})},h.prototype.Lxa=function(i){this.lb.Jf.forEach(function(t){var e=(t.remove||0)-(t.replace?t.replace.byteLength:0);if(0!=e)for(t=t.$a;t;)i.setUint32(t.byteOffset,i.getUint32(t.byteOffset)-e),t=t.parent})},t=h,e.Yea=t},function(t,e,i){var r,n;function a(t,e,i){this.view=t,this.console=e,this.config=i,this.view=t,this.console=e,this.Hn=this.Hy=this.offset=0}_esm(e),r=i(151),i(151),n=i(88),a.prototype.cna=function(t){return new DataView(this.view.buffer,this.view.byteOffset+this.offset,t)},a.prototype.zc=function(t){for(;this.Hn<t;)this.Hy=(this.Hy<<8)+this.mb(),this.Hn+=8;return this.Hn-=t,this.Hy>>>this.Hn&(1<<t)-1},a.prototype.mb=function(){var t=this.view.getUint8(this.offset);return this.offset+=1,t},a.prototype.Yc=function(t){return t=this.view.getUint16(this.offset,t),this.offset+=2,t},a.prototype.ya=function(t){return t=this.view.getUint32(this.offset,t),this.offset+=4,t},a.prototype.pI=function(){var t=this.view.getInt32(this.offset,void 0);return this.offset+=4,t},a.prototype.cta=function(t,e){var i=this.view.getUint32(this.offset+(t?4:0),t);return t=this.view.getUint32(this.offset+(t?0:4),t),e||0==(4278190080&i)||this.console.warn("Warning: read unsigned value > 56 bits"),4294967296*i+t},a.prototype.Td=function(t,e){return t=this.cta(t,e),this.offset+=8,t},a.prototype.dta=function(t,e){var i=this.view.getInt32(this.offset+(t?4:0),t);return t=this.view.getUint32(this.offset+(t?0:4),t),e||0==(4278190080&(0<i?i:-i))||this.console.warn("Warning: read signed value > 56 bits"),4294967296*i+t},a.prototype.rua=function(){var t=this.dta(void 0,void 0);return this.offset+=8,t},a.prototype.Ml=function(){return n.ko(this.ya())},a.prototype.EA=function(){var t,e,i,n,r,a;function o(t,e){return("000000"+t.toString(16)).slice(2*-e)}return t=this.ya(!0),e=this.Yc(!0),i=this.Yc(!0),n=this.Yc(),r=this.Yc(),a=this.ya(),[o(t,4),o(e,2),o(i,2),o(n,2),o(r,2)+o(a,4)].join("-")},a.prototype.oua=function(t){var e=this.view.byteOffset+this.offset;return this.view.buffer.slice(e,e+t)},a.prototype.mua=function(t){var e=[];if(0===t)return"";t=t||Number.MAX_SAFE_INTEGER;for(var i=this.mb();0!==i&&0<=--t;)e.push(i),i=this.mb();return String.fromCharCode.apply(null,e)},a.prototype.CA=function(t){var e,i;return void 0===e&&(e=1),void 0===i&&(i=!0),this.Mh(this.config.aB&&r.moa||r.nq,1,t,e,i)},a.prototype.kua=function(t,e,i){var n;return void 0===e&&(e=2),void 0===i&&(i=!0),void 0===n&&(n=!1),this.Mh(this.config.aB&&r.koa||r.zz,2,t,e,i,n)},a.prototype.BA=function(t,e,i){var n;return void 0===e&&(e=4),void 0===i&&(i=!0),void 0===n&&(n=!1),this.Mh(this.config.aB&&r.loa||r.$t,4,t,e,i,n)},a.prototype.pua=function(){for(var t=this.mb(),e=127&t;128&t;)e=e<<7|127&(t=this.mb());return e},a.prototype.Mh=function(t,e,i,n,r,a){return void 0===r&&(r=!0),void 0===a&&(a=!1),t=t(this.view,this.offset,i,n,a),this.offset=r||!n||n===e?this.offset+i*(n||e):this.offset+e,t},e.Zea=a},function(t,e,i){var w,r,n,a;function o(t,e,i,n){r.call(this,t,e,i,n)}function s(t,e,i){r.call(this,t,e,i,void 0)}w=i(104),r=i(271).ar,n=i(435),a=i(88).pS,o.prototype=Object.create(r.prototype),(s.prototype=Object.create(o.prototype)).aga=function(t,e){return"string"==typeof e?n[e]:e&&n.reset[t]||n.xwa[t]},s.prototype.Jua=function(t,e,i){return this.wa(t,e,!1,i,void 0)},s.prototype.Nua=function(t,e,i){return this.wa(t,e,!0,i,void 0)},s.prototype.wa=function(t,e,i,n,r){var a,o,s,u,c,h,f,l,p,d,b,m,g,v;function y(t){return o=a[t],void 0!==(s=o.Rh("traf"))&&void 0!==s.ck&&void 0!==(f=s.Rh("tfdt"))?void 0!==(u=s.Rh("trun")):void 0}if(!this.parse().done)return!1;if(!(a=this.Ua.moof)||0===a.length)return!1;if(void 0!==t)for(c=t,t=0;t<a.length;++t){if(!y(t,this.tc.console.trace))return!1;if(u.Lb>c||i&&u.Lb===c)break;c-=u.Lb}else if(!y(t=i?a.length-1:0,this.tc.console.trace))return!1;if(i&&t<a.length-1?(h=a[t+1],this.tc.Ie(this.Uyb-h.startOffset,h.startOffset)):!i&&0<t&&this.tc.Ie(o.startOffset,0),void 0===(h=s.Rh("tfhd")))return!1;if(f=s.Rh("tfdt"),l=u.Lb,p=s.Rh("saiz"),d=s.Rh("saio"),b=s.Rh(w.DR),m=s.Rh("sbgp"),!(!p&&!d||p&&d))return!1;if(g=s.Rh("sdtp"),this.Ua.mdat&&t<this.Ua.mdat.length)v=this.Ua.mdat[t];else if(t!==a.length-1)return!1;if(void 0===c&&(c=i?u.Lb:0),u.wa(s,h,v||this.tc,e,c,s.ck,i))u.hz&&(!i&&f&&f.wa(u.vwa),p&&d&&(p.wa(u.Nq,i),d.wa(b?0:p.zI,s.ck,i)),b&&b.wa(u.Nq,i),g&&g.wa(u.Nq,l,i),m&&m.wa(u.Nq,i));else if(i){if(0===u.Nq)return!1}else{if(t===a.length-1)return!1;this.tc.Ie(a[t+1].startOffset-o.startOffset,o.startOffset)}return n&&(e=this.aga(this.stream.profile,r))&&u.Qua(s,h,v,i,n,e),n=(i=this.tc.wa()).reduce(function(t,e){return t+e.byteLength},0),i={Ld:i,length:n,Qn:this.tc.view.byteLength},u.hz&&!v&&(i.Hq=s.ck+u.Hq,i.Yi=u.Yi),i},t.exports={cr:s,bA:function(t){var e=new ArrayBuffer(8),i=new DataView(e);return i.setUint32(0,t+8),i.setUint32(4,a("mdat")),e}}},function(t,e,i){var n,s,r;function a(){return null!==r&&r.apply(this,arguments)||this}_esm(e),n=i(23),t=i(271),s=i(270),r=t.ar,n.__extends(a,r),a.prototype.wa=function(t){var e,r,a,o=this;return!!this.parse().done&&(!(!(e=this.Ua.moov)||0===e.length)&&(!!(r=e[0].Cl("tenc"))&&(a=new Uint8Array(r.pj),t.forEach(function(t){for(var e=t.from,i=!0,n=0;n<e.length;n++)if(a[n]!==e[n]){i=!1;break}i&&o.tc.Ru(t.from.length,t.to,r.vH)}),s.concat(this.tc.wa()))))},i=a,e.WJ=i},function(t,e){_esm(e),(t=e.Pj||(e.Pj={}))[t.Wb=0]="AUDIO",t[t.Mb=1]="VIDEO"},function(t,e,i){var n,o,r,a,s,u,c,h,f,l,p,d;function b(t,e,i){this.yU=e,this.Gc=t.filter(function(t){return t.Bxa[c.Zm.u1]}).map(function(t){return{track:t,stream:t.Bxa[c.Zm.u1],id:t.MUa[c.Zm.u1]}}),i||(this.Gc=this.Gc.filter(function(t){return t.track.sg===e}))}function m(t,e,i){var n;this.$I=e,this.uu=i,n=t[0],this.jJ=n.streams.map(function(t){return{track:n,qN:t.K9a,stream:t}})}function g(t,e,i,n,r){function a(t,e){return t.bitrate>e.bitrate?t:e}this.log=t,this.$I=i,this.yU=n,this.jJ=e.map(function(t){var e=t.streams.reduce(a);return{track:t,qN:e.PA?e.PA.offset+e.PA.size:void 0,stream:e}}),r||(this.jJ=this.jJ.filter(function(t){return t.track.sg===n}))}function v(t,e,i,n,r,a){this.LIb=t,this.MIb=e,this.USb=i,this.dub=n,this.jH=r,this.Wf=a,this.ta=a.ib("HLSPlaylistBuilderImpl")}_esm(e),e.mkb=e.ykb=e.Kcb=e.cDa=void 0,t=i(1),n=i(0),o=i(262),r=i(428),a=i(430),s=i(3),u=i(41),c=i(44),h=i(438),f=i(439),l=i(261),p=i(7),d=i(1014),v.prototype.gi=function(t,n){var e,i,r,a=this,o=t.$b;return t=this.sEb(o,n),i=this.OHb(o,n),r=null!==(r=null===(e=o.fY)||void 0===e?void 0:e.KP)&&void 0!==r?r:o.tZ.find(function(t){return t.id===(null===(t=o.z4)||void 0===t?void 0:t[0].m$a)}).sg,e=new b(o.tZ,r,this.jH.Xha),Promise.all([t,i,e]).then(function(t){var e,i=nt(t);return t=i.next().value,e=i.next().value,i=i.next().value,t={audio:t.getMetadata(),video:e.getMetadata(),text:i.getMetadata(),YTa:t.dna(),Czb:i.dna(),duration:o.duration,Pl:o.Pl},e=a.dub.REb(t),n("h_s"),{vNb:a.USb.transform(t,e),gub:e,wZb:t}})},v.prototype.OHb=function(t,e){var i=new m(t.eB,this.jH.ZZa,this.jH.uu);return this.GUa(i.jJ,o.Pj.Mb,e).then(function(t){return i.Vva(t),i})},v.prototype.sEb=function(e,t){var i=null!==(i=null===(i=e.fY)||void 0===i?void 0:i.pn)&&void 0!==i?i:e.gG.find(function(t){return t.id===(null===(t=e.z4)||void 0===t?void 0:t[0].pn)}).sg,n=new g(this.ta,e.gG,this.jH.Kw,i,this.jH.Xha);return this.GUa(n.jJ,o.Pj.Wb,t).then(function(t){return n.Vva(t),n})},v.prototype.Vsa=function(t,e,i,n){if(t=this.MIb.parse(e,t,i))return t;this.ta.error("Failed to parse headers",{type:e===o.Pj.Wb?"audio":"video",downloadableId:n.stream.Gr})},v.prototype.GUa=function(t,n,r){var a=this;return Promise.all(t.map(function(e,i){return e.qN?a.LIb.download({urls:e.stream.urls,offset:0,length:e.qN}).then(function(t){return r("h_"+(0===n?"A":"V")+"_"+i+"_s"),a.Vsa(t,n,n==o.Pj.Wb?a.jH.Kw:a.jH.lA,e)}).catch(function(){r("h_"+e.track.ml[0]+"_"+i+"_f"),a.ta.warn("Failed to download and parse headers for "+e.stream.Gr)}):void a.ta.warn("Stream data offset is missing",{downloadableId:e.stream.Gr})}))},i=v,i=t.__decorate([n.R(),t.__param(0,n.l(r.rDa)),t.__param(1,n.l(a.vDa)),t.__param(2,n.l(h.fDa)),t.__param(3,n.l(f.pAa)),t.__param(4,n.l(l.xca)),t.__param(5,n.l(p.qb))],i),e.cDa=i,g.prototype.Vva=function(i){var n=this;if(!i.find(function(t){return void 0!==t}))throw u.qd.Wbb(s.M.ZDa,s.L.hda);this.Gc=this.jJ.map(function(t,e){if(e=i[e])return{track:t.track,stream:t.stream,U:e,$I:n.$I}}).filter(d.Mpa)},g.prototype.getMetadata=function(){return this.Gc},g.prototype.dna=function(){var t,e=this;return!this.Gc.find(function(t){return t.track.sg===e.yU})&&0<this.Gc.length?(t=this.Gc[0].track.sg,this.log.warn("Did not find metadata for audio track "+this.yU+", falling back to "+t),t):this.yU},e.Kcb=g,m.prototype.Vva=function(i){var t,n=this;if(!i.find(function(t){return void 0!==t}))throw u.qd.Wbb(s.M.ZDa,s.L.ida);t=this.jJ.map(function(t,e){if(e=i[e])return{track:t.track,stream:t.stream,U:e,$I:n.$I}}).filter(d.Mpa),this.Gc=this.DGb(t)},m.prototype.getMetadata=function(){return this.Gc},m.prototype.DGb=function(t){var e,i,n=this;return t.sort(function(t){return t.stream.bitrate}),-1!==(e=t.findIndex(function(t){return(null!==(t=t.stream.sb)&&void 0!==t?t:0)>=n.uu}))&&e!==t.length-1&&(i=t[e],t.splice(e,1),t.push(i)),t.reverse(),t},e.ykb=m,b.prototype.dna=function(){return this.yU},b.prototype.getMetadata=function(){return this.Gc},e.mkb=b},function(t,e){_esm(e),e.Mpa=void 0,e.Mpa=function(t){return null!=t}},function(t,e,i){var n,r,d,a,o,b;function s(t){this.ta=t.ib("HLSPlaylistTransformerImpl"),this.x2b=a.eca.Up(),this.fsb=o.dca.Up()}_esm(e),e.eDa=void 0,t=i(1),n=i(0),r=i(7),d=i(131),a=i(440),o=i(441),b=[0,1],s.prototype.transform=function(t,u){var c,h=this,f=["#EXTM3U","#EXT-X-VERSION:8","#EXT-X-INDEPENDENT-SEGMENTS"],l=t.text,e=t.audio,i=t.video,o=t.duration,p=t.YTa,s=t.Czb;return l.forEach(function(a){b.forEach(function(t){var e=0===t,i=a.stream,n=a.track,r=u.get(a.id);e=e?r.DO:r.w$,i=h.AHb({url:e.url,duration:o/1e3,size:i.size,km:"Manifest for subtitles "+n.language+' stream "'+n.qD+'", '+n.sg+", cdn "+e.Sp}),h.ta.trace("Text variant manifest",i.join("\n")),t=h.BHb({groupId:t,name:n.qD,tpa:n.sg===s,rq:n.q7,wKb:n.ml===d.vp.fba,language:n.language,uri:h.Z7(i)}),f.push(t)})}),e.forEach(function(s){b.forEach(function(t){var e=0===t,i=s.stream,n=s.track,r=s.U,a=s.$I,o=u.get(i.Gr);e=e?o.DO:o.w$,i=h.tYa({url:e.url,qN:i.PA.offset+i.PA.size,U:r,A$a:Math.floor(a/1e3),km:"Manifest for audio "+n.language+' stream "'+n.qD+'", '+n.sg+", cdn "+e.Sp}),h.ta.trace("Audio variant manifest",i.join("\n")),t=h.tEb({groupId:t,language:n.language,name:n.qD,tpa:n.sg===p,uri:h.Z7(i)}),f.push(t)})}),c=this.fsb[e[0].track.profile],i.forEach(function(s){b.forEach(function(t){var e=0===t,i=s.stream,n=s.track,r=s.U,a=s.$I,o=u.get(i.Gr);o=e?o.DO:o.w$,e=0<l.length,n=h.tYa({url:o.url,qN:i.PA?i.PA.offset+i.PA.size:i.K9a,U:r,A$a:Math.floor(a/1e3),km:"Manifest for video bitrate "+i.bitrate+", stream "+n.sg+", cdn "+o.Sp}),h.ta.trace("Video variant manifest",n.join("\n")),t=h.PHb({groupId:t,NT:1e3*i.bitrate,ssb:1e3*i.bitrate,XKb:0<=i.xG.indexOf("-hdr-")||0<=i.xG.indexOf("-dv5-"),framerate:(i.JWa/i.IWa).toFixed(3),xI:i.D7a+"x"+i.E7a,t2b:h.x2b[i.xG],bsb:c,y_b:e}),f.push(t),t=h.Z7(n),f.push(""+t)})}),this.ta.trace("Primary manifest",f.join("\n")),this.Z7(f)},s.prototype.tEb=function(t){var e=t.tpa;return["#EXT-X-MEDIA:TYPE=AUDIO",'GROUP-ID="group_'+t.groupId+'"','CHANNELS="2"','LANGUAGE="'+t.language+'"','NAME="'+t.name+'"',"DEFAULT="+(e?"YES":"NO"),"AUTOSELECT="+(e?"YES":"NO"),'URI="'+t.uri+'"'].join(", ")},s.prototype.tYa=function(t){var i=["#EXTM3U","# "+t.km,"#EXT-X-VERSION:8","#EXT-X-TARGETDURATION:"+t.A$a,"#EXT-X-MEDIA-SEQUENCE:0","#EXT-X-PLAYLIST-TYPE:VOD",'#EXT-X-DEFINE:NAME="U", VALUE="'+t.url+'"','#EXT-X-MAP:URI="{$U}",BYTERANGE="'+t.qN+'@0"',"#EXT-X-PROGRAM-DATE-TIME:2021-07-20T08:19:00.000-07:00"];return t.U.forEach(function(t,e){i.push("#EXTINF:"+t.duration.toFixed(3)+","+t.Z.toFixed(3)),i.push("#EXT-X-BYTERANGE:"+t.otb+"@"+t.byteOffset),i.push("{$U}&fi="+e)}),i.push("#EXT-X-ENDLIST"),i},s.prototype.PHb=function(t){var e=t.groupId,i=["#EXT-X-STREAM-INF:BANDWIDTH="+t.NT,"AVERAGE-BANDWIDTH="+t.ssb,"VIDEO-RANGE="+(t.XKb?"PQ":"SDR"),"FRAME-RATE="+t.framerate,'AUDIO="group_'+e+'"',"RESOLUTION="+t.xI,'CODECS="'+t.t2b+","+t.bsb+'"'];return t.y_b&&i.push('SUBTITLES="subs_'+e+'"'),i.join(", ")},s.prototype.AHb=function(t){var e=t.duration;return["#EXTM3U","# "+t.km,"#EXT-X-VERSION:8","#EXT-X-TARGETDURATION:"+Math.floor(e),"#EXT-X-MEDIA-SEQUENCE:0","#EXT-X-PLAYLIST-TYPE:VOD",'#EXT-X-DEFINE:NAME="U", VALUE="'+t.url+'"','#EXT-X-MAP:URI="{$U}"',"#EXT-X-PROGRAM-DATE-TIME:2021-07-20T08:19:00.000-07:00","#EXTINF:"+e.toFixed(3),"#EXT-X-BYTERANGE:"+t.size+"@0","{$U}","#EXT-X-ENDLIST"]},s.prototype.BHb=function(t){var e=t.tpa,i=t.language,n=t.uri;return e=["#EXT-X-MEDIA:TYPE=SUBTITLES",'GROUP-ID="subs_'+t.groupId+'"','NAME="'+t.name+'"',"DEFAULT="+(e?"YES":"NO"),"AUTOSELECT="+(e?"YES":"NO"),"FORCED="+(t.rq?"YES":"NO")],t.wKb&&e.push('CHARACTERISTICS="public.accessibility.transcribes-spoken-dialog,public.accessibility.describes-music-and-sound"'),e.push('LANGUAGE="'+i+'"'),e.push('URI="'+n+'"'),e.join(", ")},s.prototype.Z7=function(t){return"data:application/vnd.apple.mpegurl;charset=utf-8,"+encodeURIComponent(t.join("\n"))},i=s,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb))],i),e.eDa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){var i;(i=this).p5a=e,this.ata=e(),this.ta=t.ib("PlayerPlaydataMonitorImpl"),o.ve.addListener(o.El,function t(){i.ata.then(function(t){i.ta.trace("Unloading PBO Playdata Services"),t.close()}),o.ve.removeListener(o.El,t)})}_esm(e),e.NIa=void 0,t=i(1),n=i(0),r=i(7),a=i(153),o=i(60),s=i(15),u.prototype.ap=function(e,i){this.ata.then(function(t){t.ap(i,!0,function(t){return e.close(t)}),t.Dwa(i),e.addEventListener(s.Da.Bta,function(){e.sq()&&t.t8a(i).catch(function(t){(t=t.wO)&&e.close(t)})}),e.addEventListener(s.Da.Rl,function(){t.E$(i).catch(function(t){(t=t.wO)&&e.close(t)})}),e.addEventListener(s.Da.gm,function(){t.E$(i).catch(function(t){(t=t.wO)&&e.close(t)})})})},u.prototype.$Y=function(e){return this.ata.then(function(t){return t.V9a(),t.$Y(e).catch()})},i=u,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.IR))],i),e.NIa=i},function(t,e,i){var n,r,a,o;function s(t){this.Dra={},this.V6={},this.K7=-1,this.Swa=new a.dc(null),this.Mta=new a.dc(null),this.ta=t.ib("StreamChangeDetector")}_esm(e),e.PKa=void 0,t=i(1),n=i(0),r=i(47),a=i(80),i=i(7),s.prototype.xb=function(t,e,i){var n=this;t.forEach(function(e){e.stream.urls.forEach(function(t){n.Dra[t.url]=[e,t.Sp]})}),this.Pka=e,this.uzb=i,new PerformanceObserver(function(t){n.b1b(t.getEntries())}).observe({entryTypes:["resource"],buffered:!1})},s.prototype.J8a=function(t){var e,i,n;if(this.Pka&&(i=this.W5(t))!==this.K7){for(this.K7=i;0<=i&&!this.V6[i];)i--;e=(n=nt(null!==(e=this.V6[i])&&void 0!==e?e:[this.Pka,this.uzb])).next().value,n=n.next().value,this.ta.debug("Setting time to "+t+", using metadata from fragment "+i+" for "+r.T2a(e.track.type)+" track with bitrate "+e.stream.bitrate+" from cdn "+n),i=(t=e.U[this.K7]).Z,this.Mta.set({stream:e,im:{startTime:Math.floor(1e3*i),endTime:Math.floor(1e3*(i+t.duration))},wC:n})}},s.prototype.W5=function(t){var e,i,n,r=this.Pka.U,a=0;if((t/=1e3)>=r[e=r.length-1].Z)return e;for(;a<=e;)if(t<(n=r[i=a+Math.floor((e-a)/2)]).Z)e=i-1;else{if(!(t>=n.Z+n.duration))return i;a=i+1}return r.length-1},s.prototype.b1b=function(t){var r=this;t.filter(function(t){return"video"===t.initiatorType}).forEach(function(t){var e,i,n=t.name.indexOf("&fi=");0<n&&(e=t.name.substring(0,n),n=Number(t.name.substring(n+4)),r.Dra[e]&&(t=(i=nt(r.Dra[e])).next().value,i=i.next().value,e&&!Number.isNaN(n)&&t&&(r.V6[n]&&(r.K7=-1),r.V6[n]=[t,i],e=t.U[n].Z,r.Swa.set(t,{nG:Math.floor(1e3*e),wC:i}))))})},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(i.qb))],o),e.PKa=o},function(t,e,i){var n,r,a,o;function s(t){return r.Ze.call(this,t,"HlsConfigImpl")||this}_esm(e),e.yDa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),i=i(45),T(s,r.Ze),it.Object.defineProperties(s.prototype,{R5a:{configurable:!0,enumerable:!0,get:function(){return!0}},Kw:{configurable:!0,enumerable:!0,get:function(){return 16e3}},lA:{configurable:!0,enumerable:!0,get:function(){return 4e3}},ZZa:{configurable:!0,enumerable:!0,get:function(){return 1e4}},uu:{configurable:!0,enumerable:!0,get:function(){return 80}},Xha:{configurable:!0,enumerable:!0,get:function(){return!1}}}),o=s,t.__decorate([i.config(i.dd,"playsInline")],o.prototype,"R5a",null),t.__decorate([i.config(i.hD,"minAudioMediaRequestDuration")],o.prototype,"Kw",null),t.__decorate([i.config(i.hD,"minVideoMediaRequestDuration")],o.prototype,"lA",null),t.__decorate([i.config(i.hD,"hlsVideoMediaRequestTargetDuration")],o.prototype,"ZZa",null),t.__decorate([i.config(i.hD,"minStartingVideoVMAF")],o.prototype,"uu",null),t.__decorate([i.config(i.dd,"allowMultipleAudioTextTracks")],o.prototype,"Xha",null),o=t.__decorate([n.R(),t.__param(0,n.l(a.Wl))],o),e.yDa=o},function(t,e,i){var n,r;function a(t){this.ta=t.ib("CdnPartitionerImpl")}_esm(e),e.oAa=void 0,t=i(1),n=i(0),i=i(7),a.prototype.REb=function(t){var o,s,u,e,i,n,r;function a(t,i,e){var n,r,a=t.map(function(t){return t.Sp});a.sort(function(t,e){return i[t]-i[e]}),1===a.length?u.set(e,{DO:t[0],w$:t[0]}):((n=a.find(function(t){return o.has(t)}))||((n=a.find(function(t){return!s.has(t)}))?o.add(n):n=a[0]),(r=a.find(function(t){return s.has(t)&&t!==n}))||((r=a.find(function(t){return!o.has(t)&&t!==n}))?s.add(r):r=a.find(function(t){return t!==n})),u.set(e,{DO:t.find(function(t){return t.Sp===n}),w$:t.find(function(t){return t.Sp===r})}))}return o=new Set,s=new Set,u=new Map,e=t.video,i=t.audio,n=t.text,r=t.Pl.reduce(function(t,e){return t[e.id]=e.uc,t},{}),e.forEach(function(t){a((t=t.stream).urls,r,t.Gr)}),i.forEach(function(t){a((t=t.stream).urls,r,t.Gr)}),n.forEach(function(t){var e,i;t.track.lD&&!t.track.q7||(e=t.track,i=t.id,a(t=Object.entries(t.stream.jw).map(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,{Sp:Number(t),url:e}}),e=e.QRa.reduce(function(t,e){return t[e.id]=e.uc,t},{}),i))}),u},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.qb))],r),e.oAa=r},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.Wf=t,this.Yz=e,this.Vf=i,this.yc=n,this.Aa=r}_esm(e),e.mR=void 0,t=i(1),n=i(0),r=i(18),a=i(7),o=i(49),s=i(180),u=i(89),c=i(1021),h.prototype.create=function(t){return new c.oR(this.Wf,this.Yz,this.Vf,this.Aa,this.yc,t)},i=h,i=t.__decorate([n.R(),t.__param(0,n.l(a.qb)),t.__param(1,n.l(u.Ix)),t.__param(2,n.l(o.Um)),t.__param(3,n.l(s.Yca)),t.__param(4,n.l(r.jd))],i),e.mR=i},function(t,e,i){var s,u,c,h,f,n,l;function r(t,e,i,n,r,a){var o=this;this.Yz=e,this.Vf=i,this.Aa=n,this.yc=r,this.Gra=this.iD=this.qY=0,this.yH=!1,this.zD=function(){var t=o.IX();t.prstate=o.xz(),t.paustate=o.j.lW(),t.midplayseq=o.Gra++,o.yc.sN(t),o.Hc(s.cd.zD,void 0,l.Ae|l.Ys,t)},this.ei=function(){o.Hc(s.cd.iRa,void 0,l.Ae|l.kp,{})},this.Rl=function(t){o.nqa=o.getTime(),o.oqa=t.oldValue},this.HT=function(t){o.aqa=t.oldValue},this.y9=function(t){t!=o.yH&&(o.Fwa(o.yH,t),o.yH=t)},this.Fwa=function(t,e){var i=o.j.va;t={newstate:e?"Paused":"Playing",oldstate:t?"Paused":"Playing"},o.yc.pq(t,i.oe.value&&i.oe.value.stream,i.jf.value&&i.jf.value.stream),o.Hc(s.cd.T9a,void 0,l.Ae,t)},this.UY=function(t){o.Hc(s.cd.I9a,void 0,l.Ae,{speedold:Math.floor(1e3*t.oldValue),speed:Math.floor(1e3*t.newValue)})},this.UA=function(t){var e,i,n=o.j.va,r=n.jc.value;(t.newValue||r&&r.Vr()&&!r.rq())&&(i={},t=null!==(e=t.newValue)&&void 0!==e?e:r,i.newtrackinfo=t?{trackId:t.trackId,bcp47:t.Wd,lang:t.Wd,downloadableId:t.Bc,rank:t.uc,isImageBased:t.kk}:{},e=o.oqa,i.oldtrackinfo=e?{trackId:e.trackId,bcp47:e.Wd,lang:e.Wd,downloadableId:e.Bc,rank:e.uc,isImageBased:e.kk}:{},i.switchDelay=u.Sf(o.getTime()-o.nqa),o.yc.pq(i,n.oe.value&&n.oe.value.stream,n.jf.value&&n.jf.value.stream),o.Hc(s.cd.W$a,void 0,l.Ae,i))},this.ota=function(t,e){var i=o.j.va;t={waittime:u.Sf(t),abortedevent:"resumeplay",resumeplayreason:e},o.yc.pq(t,i.We.value,i.jh.value),o.Hc(s.cd.H9,void 0,l.Ae|l.kp,t)},this.$O=function(t,e,i){t={playdelay:u.Sf(t),reason:i,intrplayseq:o.iD-1,skipped:e},"repos"===i&&(t.prstate=!0===o.j.yj.value?"playing":"paused"),o.Hc(s.cd.$O,void 0,l.Ae|l.Ws,t)},this.uia=function(){var t,e,i,n=o.j.va.oc.value,r=o.j.va.jh.value.Bc;n=n?{trackId:n.trackId,bcp47:n.Wd,lang:n.Wd,downloadableId:r,rank:n.uc}:{},e=o.Tz,i=null===(t=o.aqa)||void 0===t?void 0:t.Bc,t=e?{trackId:e.trackId,bcp47:e.Wd,lang:e.Wd,downloadableId:i,rank:e.uc}:{},o.Hc(s.cd.PQa,void 0,l.Ae,{switchdelay:u.Sf(o.getTime()-o.bqa),newtrackinfo:n,oldtrackinfo:t,oldAudioDownloadableId:i,newAudioDownloadableId:r})},this.gm=function(t){o.bqa=o.getTime(),o.Tz=t.oldValue},this.pta=function(){var t,e=o.j.va,i={abortedevent:"startplay",trackid:e.Fj,prstate:o.xz(),paustate:o.j.lW()};try{(t=c.dH())&&(i.pdltime=t),u.Zb(i,e.pd,{prefix:"sm_"})}catch(t){}o.yc.U6(i,e),o.yc.tN(i,e.xg.value),o.yc.pq(i,e.We.value,e.jh.value),o.nH(i),o.Hc(s.cd.H9,void 0,l.Ae|l.Ys|l.kp,i)},this.WL=function(t,e,i,n){t={moff:u.Go(i),moffms:u.Sf(i),vbitrate:e.bitrate,vbitrateold:t.bitrate,vdlid:e.Bc,vdlidold:t.Bc,vheight:e.height,vheightold:t.height,vwidth:e.width,vwidthold:t.width,bw:n},o.Hc(s.cd.WL,void 0,0,t)},this.QO=function(t,e,i){t={moffold:u.Go(t),reposseq:o.qY++,prstate:o.xz(),paustate:o.j.lW()},o.yc.pq(t,i&&i.stream,e&&e.stream),o.Hc(s.cd.QO,void 0,l.Ae,t)},this.gE=function(t){var e,i=t.va,n={playdelaysdk:u.Sf(o.j.XT()),applicationPlaydelay:u.Sf(o.j.eja()),playdelay:u.Sf(o.j.gja()),trackid:i.Fj,bookmark:u.Sf(i.aw||0),pbnum:i.index};o.j.ei&&(n.blocked=o.j.ei),n.initvbitrate=o.j.eW,o.yc.apa(n),o.yc.n_a(n),n.esnSource=null===(e=pt._cad_global.device)||void 0===e?void 0:e.b5,o.x_a(n,i),n.pdltime=c.dH(),u.Zb(n,i.pd,{prefix:"sm_"}),n.ttTrackFields=null===(e=i.jc.value)||void 0===e?void 0:e.Ri,o.yc.j_a(n,i.oc.value),o.yc.tN(n,i.xg.value),n.packageId=null===(e=i.oa)||void 0===e?void 0:e.$b.Vo,o.yc.sN(n),o.yc.U6(n,i),o.nH(n),o.Hc(s.cd.gE,t.li,l.Ae|l.Ws|l.Ys|l.DE|l.kp,n)},this.MG=function(){var t,e,i=o.j,n=i.va;i=i.li,(t=o.IX()).paustate=!o.j.sq(),t.muted=o.j.Dpa(),t.endreason=i?"error":o.j.vpa()?"ended":"stopped",i&&i&&h.kca(i.errorCode)&&(e="info"),o.yc.tN(t,n.xg.value),o.yc.sN(t),o.nH(t),o.Hc(s.cd.MG,i,l.Ae|l.Ws|l.Ys|l.DE|l.kp,t,e)},this.Oua=function(t,e,i){var n=o.j.va.jf;t={moff:u.Go(i),moffms:u.Sf(i),vdlidold:t.Bc,vbitrateold:t.bitrate},o.yc.pq(t,e,n.value&&n.value.stream),o.Hc(s.cd.k7a,void 0,0,t)},this.xz=function(){var t=o.j.yb.value;return t===f.cb.Kc?"playing":t===f.cb.hh?"paused":t===f.cb.Wq?"ended":"waiting"},this.ta=t.ib("LogblobBuilderImpl"),this.j=a}_esm(e),e.oR=void 0,s=i(272),u=i(24),c=i(50),h=i(3),f=i(15),n=i(4),r.prototype.getTime=function(){return this.Aa.Yb().da(n.ja)},r.prototype.x_a=function(t,e){var i;(e=null===(i=e.xg.value)||void 0===i?void 0:i.streams)&&(t.maxbitrate=c.iQ(e.map(function(t){return t.bitrate})),t.maxresheight=c.iQ(e.map(function(t){return t.height})))},r.prototype.nH=function(t){t.cachedManifest="notcached",t.cachedLicense="notcached",t.usedldl="false"},r.prototype.IX=function(){var t,e=this.j.va,i=e.Ll,n={totaltime:u.Go(i.jN()),totalcontenttime:u.Go(i.hoa()),reposcount:this.qY,intrplaycount:this.iD};return n.playqualvideo=JSON.stringify({numskip:0,numlowqual:0}),(t=e.We.value)&&(n.videofr=t.framerate.toFixed(3)),(t=i.Tma())&&(n.abrdel=t),(t=i.JZa()&&i.YWa())&&(n.tw_vmaf=t),(i=i.WWa())&&u.Zb(n,i),n.rbfrs=this.iD,this.x_a(n,e),n},r.prototype.Hc=function(t,e,i,n,r){var a=this,o=this.j.va;this.Fha(n,e,i),e=r||(e?"error":"info"),n=this.Yz.Gt(t,e,n,o),this.Vf.Hc(n),"error"!==e&&t!==s.cd.MG||this.Vf.flush(!1).catch(function(){a.ta.debug("Failed to flush the logblobs")})},r.prototype.Fha=function(t,e,i){var n=this.j.va;this.yc.m_a(t,n),i&l.Ae&&this.yc.t_a(t,n),i&l.Ws&&this.yc.v_a(t,n),i&l.Ys&&this.yc.w_a(t,this.j.Dn()),e&&i&l.DE&&this.yc.p_a(t,n,e),i&l.kp&&this.yc.apa(t)},e.oR=r,(e=l=l||{})[e.Ae=1]="MOFF",e[e.Ws=2]="PRESENTEDSTREAMS",e[e.Ys=4]="SCREEN",e[e.DE=8]="FATALERROR",e[e.kp=16]="BROWSERINFO"},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.Vf=t,this.config=e,this.za=i,this.Aa=n,this.Iqa=r}_esm(e),e.pR=void 0,t=i(1),n=i(0),r=i(18),a=i(38),o=i(13),s=i(49),u=i(442),c=i(1023),h.prototype.create=function(t){return new c.rR(t,this.Vf,this.config,this.Aa,this.Iqa.create(t))},i=h,i=t.__decorate([n.R(),t.__param(0,n.l(s.Um)),t.__param(1,n.l(o.Zc)),t.__param(2,n.l(a.Uh)),t.__param(3,n.l(r.jd)),t.__param(4,n.l(u.nR))],i),e.pR=i},function(t,e,i){var n,o,s;function r(t,e,i,n,r){var a=this;this.j=t,this.Vf=e,this.config=i,this.Aa=n,this.kb=r,this.bU=function(){a.kg(),a.j.va.ci.removeListener(a.UA),a.j.va.jc.removeListener(a.kb.Rl),a.j.va.oc.removeListener(a.gm),a.j.va.jh.removeListener(a.kb.HT),a.j.yj.removeListener(a.Q5a),a.j.RO.removeListener(a.wk),a.j.va.oe.removeListener(a.PX),a.j.yb.removeListener(a.fw),a.j.yb.removeListener(a.UL),a.j.va.We.removeListener(a.VZ),a.j.va.playbackRate.removeListener(a.kb.UY),a.j.removeEventListener(s.Da.closed,a.bU),a.j.removeEventListener(s.Da.x3,a.kb.ei)},this.UL=function(){a.j.yb.value===s.cb.Kc&&(a.j.yb.removeListener(a.UL),a.Cq())},this.UA=function(t){a.uA&&a.kb.UA(t)},this.wk=function(t){a.uA&&void 0!==t.newValue&&(a.qs&&a.jp&&a.kb.ota(a.getTime()-a.jp,a.qs),a.qs="repos",a.kb.QO(t.newValue,a.j.va.jf.value,a.j.va.oe.value),a.jp=a.getTime(),o.Rf(a.fw))},this.Q5a=function(t){a.uA&&a.kb.y9(!t.newValue)},this.gm=function(t){t.oldValue&&(a.Tz=t.oldValue,a.kb.gm(t),a.qs="repos",a.jp=a.getTime(),o.Rf(a.fw))},this.fw=function(){var t;a.jp&&a.j.yb.value!==s.cb.Pf&&(t=a.getTime()-a.jp,a.kb.$O(t,!1,a.qs),a.Tz&&a.Tz!=a.j.va.oc.value&&a.kb.uia(),a.jp=void 0,a.qs=void 0)},this.Cq=function(){a.uA||(a.uA=!0,a.kb.gE(a.j),a.hpa(),a.config().b7&&(a.Mz=pt.setTimeout(function(){a.Vf.flush(!1).catch(function(){return a.log.warn("failed to flush log batcher on initialLogFlushTimeout")}),a.Mz=void 0},a.config().b7)))},this.kg=function(){a.Mz&&(pt.clearTimeout(a.Mz),a.Mz=void 0),a.JZ&&a.JZ(),a.uA?a.kb.MG():a.j.li?a.kb.gE(a.j):a.kb.pta()},this.VZ=function(t){t.oldValue&&t.om&&t.om.nG&&a.kb.WL(t.oldValue,t.newValue,t.om.nG,t.om.NT)},this.PX=function(t){var e;t.newValue&&(e=t.newValue.stream,a.zH!=e&&(a.zH&&a.kb.Oua(a.zH,e,t.newValue.im.startTime),a.zH=e))},this.T$()}_esm(e),e.rR=void 0,n=i(4),o=i(61),s=i(15),r.prototype.T$=function(){this.j.addEventListener(s.Da.closed,this.bU),this.j.addEventListener(s.Da.x3,this.kb.ei),this.j.va.ci.addListener(this.UA),this.j.va.jc.addListener(this.kb.Rl),this.j.va.oc.addListener(this.gm),this.j.va.jh.addListener(this.kb.HT),this.j.yj.addListener(this.Q5a),this.j.RO.addListener(this.wk),this.j.va.oe.addListener(this.PX),this.j.yb.addListener(this.fw),this.j.yb.addListener(this.UL),this.j.va.We.addListener(this.VZ),this.j.va.playbackRate.addListener(this.kb.UY)},r.prototype.getTime=function(){return this.Aa.Yb().da(n.ja)},r.prototype.hpa=function(){var t,e=this,i=[];this.config().Z2a&&(this.config().$2a.forEach(function(t){i.push(pt.setTimeout(e.kb.zD,t))}),this.config().v8&&(t=pt.setInterval(this.kb.zD,this.config().v8)),this.JZ=function(){i.forEach(function(t){pt.clearTimeout(t)}),t&&pt.clearInterval(t)})},e.rR=r},function(t,e,i){var n,r,a,o;_esm(e),e.bJ=void 0,t=i(0),n=i(1025),r=i(1026),a=i(443),o=i(444),e.bJ=new t.rd(function(t){t(o.mLa).to(n.lLa),t(a.jLa).$i(new r.iLa),t(o.kLa).wf(function(t){return function(){return t.$a.get(o.mLa)}})})},function(t,e,i){var n,r,a,o;function s(t){this.config=t,this.rwa=r.Gb,this.tP=[]}_esm(e),e.lLa=void 0,t=i(1),n=i(0),r=i(52),a=i(4),i=i(443),s.prototype.Zt=function(){for(var t,e;0<this.tP.length;)e=this.tP.shift(),this.xPa(e);return t=(e=void 0===this.HU||void 0===this.HG?a.Gb:this.HG.Qa(this.HU)).G0a()?0:this.rwa.da(r.yE)/e.da(a.ja),{hxa:Math.floor(t),P9b:e.da(a.ja)}},s.prototype.qqb=function(t){for(this.rwa=this.rwa.add(t.size),this.tP.push(t.LAb),this.tP.sort(function(t,e){return t.start.Al(e.start)});this.tP.length>this.config.MAb;)t=this.tP.shift(),this.xPa(t)},s.prototype.xPa=function(t){void 0===this.HU&&(this.HU=t.start),void 0!==this.HG&&this.HG.Al(t.start)<0&&(this.HU=this.HU.add(t.start.Qa(this.HG))),(void 0===this.HG||this.HG.Al(t.end)<0)&&(this.HG=t.end)},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(i.jLa))],o),e.lLa=o},function(t,e,i){function n(t){this.MAb=void 0===t?10:t}_esm(e),e.iLa=void 0,t=i(1),i=i(0),n=t.__decorate([i.R()],n),e.iLa=n},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T;_esm(e),e.sn=void 0,t=i(0),n=i(26),r=i(13),a=i(1028),o=i(154),s=i(155),u=i(1029),c=i(273),h=i(1030),f=i(445),l=i(446),p=i(1031),d=i(274),b=i(11),m=i(451),g=i(1035),v=i(452),y=i(1036),w=i(276),_=i(1037),E=i(453),k=i(39),S=i(450),T=i(1038),e.sn=new t.rd(function(t){t(s.TR).to(u.CKa).aa(),t(n.yx).to(a.iBa).aa(),t(c.sEa).to(h.rEa).aa(),t(l.iAa).to(p.hAa).aa(),t(c.mIa).$i({isTypeSupported:b.$E&&b.$E.isTypeSupported}),t(d.D_).$i(pt.cast||null),t(d.jAa).$i(pt.castReceiverEme||null),t(f.xCa).nE(function(t){return{vFb:function(){return t.$a.get(k.KR)}}}),t(o.IJ).nE(function(t){return t.$a.get(r.Zc)}),t(m.WFa).to(g.TFa).aa(),t(S.SFa).to(T.RFa).aa(),t(v.VFa).to(y.UFa).aa(),t(w.oca).to(_.wCa).aa(),t(E.tJa).$i(pt)})},function(t,e,i){var r,n,a,o,s,u;function c(t,e,i){this.config=t,this.PRa=e,this.vSb=i,this.ZTb=this.tyb()}_esm(e),e.iBa=void 0,t=i(1),r=i(26),n=i(154),a=i(0),o=i(44),s=i(445),i=i(446),c.prototype.gZa=function(t){return this.TWa().hZa(t)},c.prototype.iZa=function(t){return this.au().hZa(t)},c.prototype.TWa=function(){return this.pia&&this.pia.type==this.config().qia||(this.pia=this.PRa.Dxb(this.config().qia)),this.pia},c.prototype.au=function(){return this.Oaa&&this.Oaa.type==this.config().Paa||(this.Oaa=this.PRa.Iyb(this.config().Paa),this.Oaa.Hha(this.vSb.vFb())),this.Oaa},c.prototype.JFb=function(t){var e;if(!t||!t.length)return r.se.g0;t=this.lDb(t);for(var i=[r.se.RR,r.se.g0,r.se.pK,r.se.Ex,r.se.Qs,r.se.iB,r.se.Xx,r.se.Hj],n=i.length;n--;)if(e=i[n],(0,this.ZTb[e])(t))return e;return r.se.RR},c.prototype.fx=function(t){return this.au().fx(t)},c.prototype.Ny=function(t){return this.au().Ny(t)},c.prototype.Wt=function(){return this.au().Wt()},c.prototype.T5=function(){return this.au().T5()},c.prototype.fZ=function(){return this.au().fZ()},c.prototype.dZ=function(){return this.TWa().dZ()},c.prototype.caa=function(){return this.au().caa()},c.prototype.gZ=function(){return this.au().gZ()},c.prototype.SM=function(t){return this.au().SM(t)},c.prototype.cN=function(){return this.au().cN()},c.prototype.j6=function(){return this.au().j6()},c.prototype.lDb=function(t){var e={};return t.filter(function(t){return"video"===t.type}).forEach(function(t){e[t.kh]=""}),Object.keys(e)},c.prototype.tyb=function(){var t={};return t[r.se.Hj]=function(t){return t.some(function(t){return-1<t.indexOf("av1")})},t[r.se.iB]=function(t){return t.some(function(t){return-1<t.indexOf("hpl")})},t[r.se.Xx]=function(t){return t.some(function(t){return-1<t.indexOf("vp9")})},t[r.se.Qs]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-dv")})},t[r.se.Ex]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-hdr")})},t[r.se.pK]=function(t){return t.some(function(t){return-1<t.indexOf("hevc-main10-L")||-1<t.indexOf("hevc-main-L")})},t[r.se.g0]=function(t,e){var i={};for(t.forEach(function(t){return i[t]=1}),e=(t=nt(e)).next();!e.done;e=t.next())if(i[e.value])return!0;return!1}.bind(null,[o.N.FE]),t[r.se.RR]=function(){return!0},t},u=c,u=t.__decorate([a.R(),t.__param(0,a.l(n.IJ)),t.__param(1,a.l(i.iAa)),t.__param(2,a.l(s.xCa))],u),e.iBa=u},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){this.sn=t,this.jb=e,this.i$a=i,this.Vpb="video/mp4; codecs={0}",this.dlb="audio/mp4; codecs={0}",t=this.sn.SM(r.se.Qs),this.Upb=o.Gd.DTa(t)}_esm(e),e.CKa=void 0,t=i(1),r=i(26),a=i(0),o=i(110),s=i(27),u=i(201),c=i(447),h=i(12),f.prototype.l4=function(t){return t=this.sn.JFb(t),t=this.jb.EG(t)?t:r.se.RR,this.i$a.format(this.Vpb,this.Upb[t])},f.prototype.i4=function(t){return 0===t.length?this.i$a.format(this.dlb,o.Gd.g_):(t=c.lza[t[0].kh]||n.zya)===n.zya?h.$J:t===n.zcb?h.vFa:h.uFa},(i=n=f).zya="AAC",i.zcb="XHEAAC",i=n=t.__decorate([a.R(),t.__param(0,a.l(r.yx)),t.__param(1,a.l(s.bg)),t.__param(2,a.l(u.Mea))],i),e.CKa=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){this.config=t,this.bUa=e,this.cast=i}_esm(e),e.rEa=void 0,t=i(1),n=i(0),r=i(273),a=i(154),o=i(26),s=i(274),u=i(275),c.prototype.tTa=function(){switch(this.config().Paa){case o.gj.Oba:return s.Pba.kka(this.bUa,this.cast);case o.gj.Lx:return u.uB.kka(this.config);default:return this.bUa}},i=c,i=t.__decorate([n.R(),t.__param(0,n.l(a.IJ)),t.__param(1,n.l(r.mIa)),t.__param(2,n.l(s.D_))],i),e.rEa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w;function _(t,e,i,n,r,a,o,s,u,c,h){this.A0a=t,this.cast=e,this.config=i,this.Oc=n,this.za=r,this.is=a,this.pk=o,this.Yr=s,this.platform=u,this.Uc=c,this.Iw=h}_esm(e),e.hAa=void 0,t=i(1),n=i(0),r=i(26),a=i(273),o=i(154),s=i(274),u=i(1032),c=i(1033),h=i(181),f=i(449),l=i(48),p=i(38),d=i(27),b=i(1034),m=i(70),g=i(7),v=i(34),y=i(36),i=i(450),_.prototype.Dxb=function(t){var e=this.A0a.tTa();return t!==r.nv.Lx?new f.V_(this.config,e,this.Iw):new u.rGa(this.config,e,this.is,this.platform,this.Iw)},_.prototype.Iyb=function(t){var e=this.A0a.tTa();switch(t){case r.gj.Oba:t=new s.Pba(this.config,e,this.is,this.cast,this.Iw);break;case r.gj.FJ:t=new b.sAa(this.config,e,this.is,this.pk,this.Yr,this.za,this.Iw);break;case r.gj.Lx:t=new c.AFa(this.config,e,this.is,this.Oc,this.za,this.Yr,this.Uc,this.Iw,this.pk);break;default:t=new h.ao(this.config,e,this.is,this.Iw)}return t},w=_,w=t.__decorate([n.R(),t.__param(0,n.l(a.sEa)),t.__param(1,n.l(s.D_)),t.__param(2,n.l(o.IJ)),t.__param(3,n.l(l.Qj)),t.__param(4,n.l(p.Uh)),t.__param(5,n.l(d.bg)),t.__param(6,n.l(m.Vs)),t.__param(7,n.l(g.qb)),t.__param(8,n.l(v.Hk)),t.__param(9,n.l(y.Ci)),t.__param(10,n.l(i.SFa))],w),e.hAa=w},function(t,e,i){var a,n,o,s,r;function u(t,e,i,n,r){return(t=s.V_.call(this,t,e,r)||this).is=i,t.platform=n,t.type=a.nv.Lx,t}_esm(e),e.rGa=void 0,a=i(26),n=i(44),o=i(109),s=i(449),r=i(275),T(u,s.V_),u.prototype.dZ=function(){return Promise.resolve(this.config().PU&&this.My(o.Hb.Qx,"avc1,mp4a",["audio-endpoint-codec=DD+JOC"]))},u.prototype.Up=function(){var t={};return t[n.ze.GE]="mp4a.40.2",t[n.ze.HE]="mp4a.40.2","browser"===this.platform.bla?this.config().PU&&(t[n.ze.xQ]={Ef:"avc1",keySystem:o.Hb.Qx,features:["audio-endpoint-codec=DD+JOC"]},t[n.ze.yQ]={Ef:"avc1",keySystem:o.Hb.Qx,features:["audio-endpoint-codec=DD+JOC"]}):(this.config().eVa&&(t[n.ze.xQ]="ec-3"),this.config().dVa&&(t[n.ze.Rba]="ec-3"),this.config().PU&&(t[n.ze.yQ]={Ef:"avc1",keySystem:o.Hb.Qx,features:["audio-endpoint-codec=DD+JOC"]})),t},u.prototype.$Va=function(t){var r=this;return t=t.filter(function(t){for(var e,i=nt(r.Ku),n=i.next();!n.done;n=i.next())if(n.value.test(t))return!0;for(n=(i=nt(r.Rn)).next();!n.done;n=i.next())if(n.value.test(t))return!1;if(t=r.Zta[t],i=[],e=o.Hb.Qx,t)return r.is.Ip(t)?n=t:(i=t.features,n=t.Ef,e=t.keySystem),r.My(e,n,i)}),Promise.resolve(t)},u.prototype.My=function(t,e,i){return t=r.uB.j4(t,e,i),this.Ny(t)},e.rGa=u},function(t,e,i){var n,c,h,r,p,a,o,s,u,f,l,d,b,m,g,v,y,w,_,E,k;function S(t,e,i,n,r,a,o,s,u){return(t=c.ao.call(this,t,e,i,s)||this).Oc=n,t.za=r,t.Yr=a,t.Uc=o,t.Iw=s,t.pk=u,t.type=h.gj.Lx,t.vQ="hvc1",t.Hdb="avc1",t.B5a={},t.log=t.Yr.ib("MicrosoftVideoCapabilityDetector"),t.gZb(),t.eZ&&t.config().zOb?t.OUa=t.Uxb():(t.OUa=Promise.resolve(""),t.config().BOb?t.Zxb():t.config().AOb&&t.Yxb()),t}_esm(e),e.AFa=void 0,n=i(44),c=i(181),h=i(26),t=i(111),r=i(109),p=i(4),a=i(328),o=i(110),s=i(275),u=i(63),f=i(182),l="decode-res-x=1920 decode-res-y=1080 decode-bpc=8 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8".split(" "),d="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8".split(" "),b="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=3840 display-res-y=2160 display-bpc=8".split(" "),m="decode-res-x=1920 decode-res-y=1080 decode-bpc=10 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8 hdr=1".split(" "),g="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8 hdr=1".split(" "),v="decode-res-x=1920 decode-res-y=1080 decode-bpc=10 decode-bitrate=5800 decode-fps=30 display-res-x=1920 display-res-y=1080 display-bpc=8 hdr=1 ext-profile=dvhe.05".split(" "),y="decode-res-x=3840 decode-res-y=2160 decode-bpc=10 decode-bitrate=16000 decode-fps=30 display-res-x=2560 display-res-y=1440 display-bpc=8 hdr=1 ext-profile=dvhe.05".split(" "),w=["hdcp=1"],_=["hdcp=2"],E=new t.FB,k=new a.Fba,T(S,c.ao),S.prototype.SM=function(t){return t===h.se.Qs&&this.config().K1b?o.Gd.NQ:c.ao.prototype.SM.call(this,t)},S.prototype.fx=function(t){switch(t){case h.Mj.NE:return this.t$a();case h.Mj.uv:return this.VX;default:return Promise.resolve(!1)}},S.prototype.Wt=function(){var t;return(t=this).keySystem||(this.keySystem=this.config().hp?this.pk.vw().then(function(t){return t.keySystem}):t.eZ?t.kJb?t.t$a().then(function(t){return Promise.resolve(t?r.Hb.Ud:r.Hb.gF)}):Promise.resolve(r.Hb.gF):t.d_b?Promise.resolve(r.Hb.gF):Promise.resolve(r.Hb.Qx)),this.keySystem},S.prototype.T5=function(){return this.OUa},S.prototype.fZ=function(){return Promise.resolve({result:this.s$a(),reason:"is-type-supported"})},S.prototype.gZ=function(){return this.eZ&&this.v$a()?this.VX:Promise.resolve(!1)},S.prototype.caa=function(){return Promise.resolve(this.r$a()).then(function(t){return{result:t,reason:"isTypeSupportedWithFeatures"}})},S.prototype.Hha=function(t){this.Aq=t,Object.assign(this.Aq,this.B5a),t.itshwdrm=this.eZ,t.itsqhd=this.u$a(),t.itshevc=this.v$a(),t.itshdr=this.s$a(),t.itsdv=this.r$a(),t.itsav1=this.a_b(),this.Qxa()},S.prototype.wT=function(t,e){(this.Aq||this.B5a)[t]=e},S.prototype.cN=function(){var e=this;return this.fx(h.Mj.uv).then(function(t){return t?e.lU(h.Mj.uv):e.fx(h.Mj.NE).then(function(t){return t?e.lU(h.Mj.NE):e.lU(void 0)})})},S.prototype.j6=function(){return this.config().hp?Promise.resolve(void 0):this.Wt().then(function(t){return t===r.Hb.Ud?{DEVICE_SECURITY_LEVEL:"3000"}:void 0})},S.prototype.mz=function(r){var a=this;return this.Wt().then(function(t){var e,i,n;return!a.Npa(t,r)&&(!!(e=a.Zta[r])&&(i=[],a.is.Ip(e)?n=e:(i=e.features,n=e.Ef,t=e.keySystem),a.My(t,n,i)))})},S.prototype.Up=function(){var t=c.ao.prototype.Up.call(this);return t[n.N.bS]=t[n.N.rK]=t[n.N.qK]=t[n.N.s1]={Ef:"vp09.00.11.08.02",keySystem:r.Hb.Ud,features:l},t[n.N.j0]=t[n.N.i0]={Ef:"hev1.2.6.L90.B0",keySystem:r.Hb.Ud,features:d},t[n.N.l0]=t[n.N.k0]={Ef:"hev1.2.6.L93.B0",keySystem:r.Hb.Ud,features:d},t[n.N.n0]=t[n.N.m0]={Ef:"hev1.2.6.L120.B0",keySystem:r.Hb.Ud,features:d},t[n.N.p0]=t[n.N.o0]={Ef:"hev1.2.6.L123.B0",keySystem:r.Hb.Ud,features:d},t[n.N.$Q]=t[n.N.ZQ]={Ef:"hev1.2.6.L150.B0",keySystem:r.Hb.Ud,features:d},t[n.N.bR]=t[n.N.aR]={Ef:"hev1.2.6.L153.B0",keySystem:r.Hb.Ud,features:d},t[n.N.PQ]=t[n.N.OQ]={Ef:"hev1.2.6.L90.B0",keySystem:r.Hb.Ud,features:m},t[n.N.RQ]=t[n.N.QQ]={Ef:"hev1.2.6.L93.B0",keySystem:r.Hb.Ud,features:m},t[n.N.SQ]=t[n.N.SJ]={Ef:"hev1.2.6.L120.B0",keySystem:r.Hb.Ud,features:m},t[n.N.UQ]=t[n.N.TQ]={Ef:"hev1.2.6.L123.B0",keySystem:r.Hb.Ud,features:g},t[n.N.WQ]=t[n.N.VQ]={Ef:"hev1.2.6.L150.B0",keySystem:r.Hb.Ud,features:g},t[n.N.YQ]=t[n.N.XQ]={Ef:"hev1.2.6.L153.B0",keySystem:r.Hb.Ud,features:g},t[n.N.K_]=t[n.N.J_]={Ef:"hev1.2.6.L90.B0",keySystem:r.Hb.Ud,features:v},t[n.N.M_]=t[n.N.L_]={Ef:"hev1.2.6.L93.B0",keySystem:r.Hb.Ud,features:v},t[n.N.N_]=t[n.N.AQ]={Ef:"hev1.2.6.L120.B0",keySystem:r.Hb.Ud,features:v},t[n.N.P_]=t[n.N.O_]={Ef:"hev1.2.6.L123.B0",keySystem:r.Hb.Ud,features:y},t[n.N.R_]=t[n.N.Q_]={Ef:"hev1.2.6.L150.B0",keySystem:r.Hb.Ud,features:y},t[n.N.T_]=t[n.N.S_]={Ef:"hev1.2.6.L153.B0",keySystem:r.Hb.Ud,features:y},t[n.N.l_]={Ef:"av01.0.04M.10",keySystem:r.Hb.Ud,features:l},t[n.N.m_]={Ef:"av01.0.05M.10",keySystem:r.Hb.Ud,features:l},t[n.N.n_]={Ef:"av01.0.08M.10",keySystem:r.Hb.Ud,features:l},t[n.N.o_]={Ef:"av01.0.09M.10",keySystem:r.Hb.Ud,features:l},t[n.N.p_]={Ef:"av01.0.12M.10",keySystem:r.Hb.Ud,features:b},t[n.N.q_]={Ef:"av01.0.13M.10",keySystem:r.Hb.Ud,features:b},t},S.prototype.My=function(t,e,i){return t=s.uB.j4(t,e,i),this.Ny(t)},S.prototype.u$a=function(){return this.My(r.Hb.Ud,this.vQ,d)},S.prototype.s$a=function(){return this.My(r.Hb.Ud,this.vQ,m)},S.prototype.r$a=function(){return this.My(r.Hb.Ud,this.vQ,v)},S.prototype.a_b=function(){return this.My(r.Hb.Ud,o.Gd.Hj,l)},S.prototype.v$a=function(){return this.My(r.Hb.Ud,this.vQ,b)},S.prototype.t$a=function(){var e=this;return this.VX.then(function(t){return t?Promise.resolve(t):e.n6a})},S.prototype.Qxa=function(){this.Aq&&(this.Aq.itshdcp=JSON.stringify({hdcp1:this.KZa,time1:this.M$a-this.N9a,hdcp2:this.LZa,time2:this.N$a-this.O9a}))},S.prototype.gZb=function(){var e=this;this.eZ?(this.VX=this.LYa(this.config().Y2a,this.config().DOb,function(){var t=e.HFb();return["maybe"!==t,t]}).then(function(t){return"probably"===t}),this.n6a=this.VX.then(function(t){return!!t||e.LYa(e.config().Y2a,e.config().COb,function(){var t=e.GFb();return["maybe"!==t,t]}).then(function(t){return"probably"===t})})):(this.n6a=Promise.resolve(!0),this.VX=Promise.resolve(!1))},S.prototype.LYa=function(a,o,s){var u=this;return new Promise(function(i){var n,r,t=nt(s()),e=t.next().value;if(t=t.next().value,e)return i(t);n=u.Oc.u$(p.Nc(a),function(){var t=nt(s()),e=t.next().value;t=t.next().value,e&&(n.cancel(),r.cancel(),i(t))}),r=u.Oc.zk(p.Nc(o),function(){n.cancel(),r.cancel(),i("timeout")})})},S.prototype.GFb=function(){var t=s.uB.j4(r.Hb.gF,this.Hdb,w).split("|");return this.KZa=s.uB.Ywa(t[0],t[1]),this.M$a=this.za.ff.da(p.ja),this.N9a=this.N9a||this.M$a,this.Qxa(),this.KZa},S.prototype.HFb=function(){var t=s.uB.j4(r.Hb.Ud,this.vQ,_).split("|");return this.LZa=s.uB.Ywa(t[0],t[1]),this.N$a=this.za.ff.da(p.ja),this.O9a=this.O9a||this.N$a,this.Qxa(),this.LZa},S.prototype.Uxb=function(){var e=this;return this.nka(r.Hb.Ud,'<PlayReadyCDMData type="DriverInfo"><DriverInfo version="1.0"><ServerCert>'+u.Fda+"</ServerCert></DriverInfo></PlayReadyCDMData>").then(function(t){return e.log.debug("DriverInfo: "+t),t}).catch(function(t){throw e.wT("itsDriverInfo","exception"),e.log.error("DriverInfo exception",t),t})},S.prototype.Yxb=function(){var i=this;this.nka(r.Hb.Qx,'<PlayReadyCDMData type="HardwareInfo"><HardwareInfo version="1.0"></HardwareInfo></PlayReadyCDMData>').then(function(t){var e=String.fromCharCode.apply(void 0,i.Uc.decode(t));return i.wT("itsHardwareInfo",e),i.log.debug("HardwareInfo: "+e),t}).catch(function(t){throw i.wT("itsHardwareInfo","exception"),i.log.error("HardwareInfo exception",t),t})},S.prototype.Zxb=function(){var i=this;this.nka(r.Hb.Qx,'<PlayReadyCDMData type="ResetHardwareDRMDisabled"><ResetHardwareDRMDisabled version="1.0"></ResetHardwareDRMDisabled></PlayReadyCDMData>').then(function(t){var e=String.fromCharCode.apply(void 0,i.Uc.decode(t));return i.wT("itsHardwareReset",e),i.log.debug("ResetHardwareDRMDisabled: "+e),t}).catch(function(t){throw i.wT("itsHardwareReset","exception"),i.log.error("ResetHardwareDRMDisabled exception",t),t})},S.prototype.nka=function(h,f){var l=this;return new Promise(function(i,n){var t,e,r;function a(e){try{u(e.target,"Unexpectedly got an mskeyerror event: 0x"+k.UG(e&&e.target&&e.target.error&&e.target.error.Dcc||0,4))}catch(t){u(e.target,t)}}function o(t){u(t.target,"Unexpectedly got an mskeyadded event")}function s(e){var t;try{t=l.Wla(e.message,"PlayReadyKeyMessage","Challenge"),c(e.target),i(t)}catch(t){u(e.target,t)}}function u(t,e){l.log.error("PlayReadyChallenge error",{cdmData:f}),c(t),n(e)}function c(t){t.removeEventListener("mskeymessage",s),t.removeEventListener("mskeyadded",o),t.removeEventListener("mskeyerror",a),r&&r.cancel()}try{t=new Uint8Array(E.g$a(f)),(e=new pt.MSMediaKeys(h).createSession("video/mp4",new Uint8Array(0),t)).addEventListener("mskeymessage",s),e.addEventListener("mskeyadded",o),e.addEventListener("mskeyerror",a),r=l.Oc.zk(p.Nc(1e3),function(){u(e,Error("timeout"))})}catch(t){n(t)}})},S.prototype.Wla=function(t,e){for(var i,n,r,a=1;a<arguments.length;++a);for(a="",n=t.length,i=0;i<n;i++)0<(r=t[i])&&(a+=String.fromCharCode(r));for(n="\\s*(.*)\\s*",i=arguments.length-1;0<i;i--){if(r=arguments[i],a.search(r)<0)return;n="[\\s\\S]*<"+(r="(?:[^:].*:|)"+r)+"[^>]*>"+n+"</"+r+">[\\s\\S]*"}if(a=a.match(new RegExp(n)))return a[1]},S.prototype.Npa=function(e,i){return[f.Xe.iB,f.Xe.Xx].some(function(t){return t.test(i)})&&this.config().Fra&&![r.Hb.gF,r.Hb.rIa].some(function(t){return t===e})},it.Object.defineProperties(S.prototype,{kJb:{configurable:!0,enumerable:!0,get:function(){return this.config().uBb&&(!this.config().EOb||this.u$a())}},eZ:{configurable:!0,enumerable:!0,get:function(){try{return this.Ny(r.Hb.Ud+"|"+o.Gd.Ira)}catch(t){return!1}}},d_b:{configurable:!0,enumerable:!0,get:function(){try{return this.Ny(r.Hb.gF)}catch(t){return!1}}}}),e.AFa=S},function(t,e,i){var s,u,n,r,a;function o(t,e,i,n,r,a,o){return(t=s.ao.call(this,t,e,i,o)||this).pk=n,t.Yr=r,t.za=a,t.Iw=o,t.type=u.gj.FJ,t.log=t.Yr.ib("ChromeVideoCapabilityDetector"),t}_esm(e),e.sAa=void 0,s=i(181),u=i(26),n=i(4),r=i(63),a=i(182),T(o,s.ao),o.prototype.fx=function(t){return t!==u.Mj.uv?Promise.resolve(!1):this.b_b},o.prototype.cN=function(){var e=this;return this.fx(u.Mj.uv).then(function(t){return t?u.Mj.uv:void 0}).then(function(t){return e.lU(t)})},o.prototype.Hha=function(t){this.Aq=t},o.prototype.mz=function(e){var i=this;return this.config().Fra?this.pk.vw().then(function(t){return!i.Npa(r.d6(t),e)&&s.ao.prototype.mz.call(i,e)}):s.ao.prototype.mz.call(this,e)},o.prototype.sLb=function(t){return!(null===(t=t.getConfiguration().videoCapabilities)||void 0===t||!t.some(function(t){return(null==t?void 0:t.robustness)===r.TJ}))},o.prototype.Wab=function(){var t;this.Aq&&(t=this.MZa&&this.OZa&&this.MZa.Qa(this.OZa).da(n.ja),this.Aq.itshdcp=JSON.stringify({hdcp2:this.cu,time2:t}))},o.prototype.Npa=function(t,e){return[a.Xe.iB,a.Xe.Xx].some(function(t){return t.test(e)})&&this.config().Fra&&t===r.TJ},it.Object.defineProperties(o.prototype,{mediaKeys:{configurable:!0,enumerable:!0,get:function(){return this.R2a||(this.R2a=this.pk.vw().then(function(t){return t.createMediaKeys()})),this.R2a}},b_b:{configurable:!0,enumerable:!0,get:function(){var i=this;return this.Zwa||(this.config().vBb?this.Zwa=Promise.all([this.pk.vw(),this.mediaKeys]).then(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,i.sLb(t)?e&&e.getStatusForPolicy?(i.OZa=i.za.ff,e.getStatusForPolicy({minHdcpVersion:"2.2"}).then(function(t){return i.MZa=i.za.ff,i.cu=t,i.log.trace("hdcpStatus: "+i.cu),"usable"===i.cu})):(i.cu="not available",i.log.trace("hdcpStatus: "+i.cu),!1):(i.cu="not HW_SECURE_DECODE",i.log.trace("hdcpStatus: "+i.cu),!1)}).catch(function(t){return i.cu="exception",i.log.error("Exception in supportsHdcpLevel",{hdcpStatus:i.cu},t),!1}).then(function(t){return i.Wab(),t}):(this.cu="not enabled",this.log.trace("hdcpStatus: "+this.cu),this.Wab(),this.Zwa=Promise.resolve(!1))),this.Zwa}}}),e.sAa=o},function(t,e,i){var n,r;function a(t){this.navigator=t,this.P2a="mediaCapabilities"in this.navigator&&"decodingInfo"in this.navigator.mediaCapabilities}_esm(e),e.TFa=void 0,t=i(1),n=i(0),i=i(39),a.prototype.$la=function(t){return this.P2a?this.navigator.mediaCapabilities.decodingInfo({type:"media-source",video:{contentType:t.contentType,width:t.width,height:t.height,bitrate:t.bitrate,framerate:t.framerate}}).then(function(t){return{supported:t.supported,smooth:t.smooth,powerEfficient:t.powerEfficient}}):Promise.reject("MediaCapabilities not supported")},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.eK))],r),e.TFa=r},function(t,e,i){var n,r,a;function o(t,e){this.mediaCapabilities=t,this.log=e.ib("MediaCapabilities")}_esm(e),e.UFa=void 0,t=i(1),n=i(451),r=i(7),i=i(0),o.prototype.$la=function(t){var e,i=this,n={pc:void 0};return this.mediaCapabilities.P2a&&(e={contentType:'video/mp4; codecs="avc1.640028"',width:t.width,height:t.height,bitrate:1e3*t.bitrate,framerate:24},this.mediaCapabilities.$la(e).then(function(t){return n.pc=Object.assign(Object.assign({},t),e)}).catch(function(t){return i.log.error("Error calling MediaCapabilities API",t)})),n},a=o,a=t.__decorate([i.R(),t.__param(0,i.l(n.WFa)),t.__param(1,i.l(r.qb))],a),e.UFa=a},function(t,e,i){var n,r,a;function o(t){this.BTb=t}_esm(e),e.wCa=void 0,t=i(1),n=i(0),r=i(276),i=i(453),o.prototype.NCb=function(){var i={YU:r.oB.vkb},t=this.BTb.PresentationRequest;return t&&(new t("https://netflix.com").getAvailability()||Promise.reject()).then(function(t){var e;i.YU=t.value?r.oB.sJa:r.oB.Cya,i.YU===r.oB.Cya&&(e=function(){t.value&&(i.YU=r.oB.sJa),t.removeEventListener("change",e)},t.addEventListener("change",e))}).catch(function(){i.YU=r.oB.Error}),i},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.tJa))],a),e.wCa=a},function(t,e,i){var n,r,p,a,o,s,u,c;function h(t,e,i,n){this.config=t,this.navigator=e,this.Yr=i,this.yD=n,this.type=r.gj.qv,this.MQa={},this.Dbb={},this.log=this.Yr.ib("MediaCapabilityDetector"),this.MQa=this.Cxb(),this.Dbb=this.Hyb()}_esm(e),e.RFa=void 0,t=i(1),n=i(0),r=i(26),p=i(44),a=i(7),o=i(39),s=i(70),u=i(154),c=i(63),h.prototype.mz=function(e){var i=this;return this.yD.vw().then(function(t){return i.ZCb(e,t)}).catch(function(){return!1})},h.prototype.NKb=function(t){return!!t.colorGamut||!!t.hdrMetadataType||!!t.transferFunction},h.prototype.ypa=function(){return pt.matchMedia("(dynamic-range: high)").matches},h.prototype.ZCb=function(t,e){var i,n,r,a=this;try{if(i={type:"media-source"},n=this.MQa[t],r=this.Dbb[t],n)i.audio=n;else{if(!r)return Promise.resolve(!1);if(i.video=r,this.NKb(r)&&!this.ypa())return Promise.resolve(!1);e&&(i.keySystemConfiguration=this.ZFb(e))}return this.navigator.mediaCapabilities.decodingInfo(i).then(function(t){var e;return t.configuration||(t.configuration=i),(e=a.kLb(i,t))?a.log.trace("mediaCapabilities.decodingInfo: "+JSON.stringify(t)):a.log.warn("mediaCapabilities.decodingInfo: "+JSON.stringify(t)),e}).catch(function(t){return a.log.error("mediaCapabilities.decodingInfo failed",t),!1})}catch(t){return this.log.error("mediaCapabilitiesIsTypeSupported failed",t),Promise.resolve(!1)}},h.prototype.ZFb=function(t){return this.keySystemConfiguration||(this.keySystemConfiguration={keySystem:t.keySystem},(t=c.d6(t))&&(this.keySystemConfiguration.video={robustness:t})),this.keySystemConfiguration},h.prototype.Cxb=function(){var t={},e={contentType:"audio/mp4; codecs=mp4a.40.2"};return t[p.ze.GE]=e,t[p.ze.aDa]=e,t[p.ze.HE]=e,t[p.ze.tF]=e,e={contentType:"audio/mp4; codecs=ec-3"},t[p.ze.xQ]=e,t[p.ze.Rba]=e,t[p.ze.yQ]=e,t},h.prototype.Hyb=function(){var t,e,i,n,r,a,o={},s={contentType:'video/mp4; codecs="hev1.2.4.L120.B0"'},u={contentType:'video/mp4; codecs="dvh1.05.04"'},c={width:1920,height:1080},h={width:3840,height:2160},f=Object.assign(Object.assign({},c),{bitrate:12e6,framerate:30}),l=Object.assign(Object.assign({},c),{bitrate:2e7,framerate:60});return c=Object.assign(Object.assign({},h),{bitrate:25e6,framerate:30}),h=Object.assign(Object.assign({},h),{bitrate:4e7,framerate:60}),t={hdrMetadataType:"smpteSt2086",colorGamut:"rec2020",transferFunction:"pq"},e={hdrMetadataType:"smpteSt2094-10",colorGamut:"rec2020",transferFunction:"pq"},i=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="avc1.640028"'}),f),o[p.N.TCa]=i,o[p.N.LQ]=i,o[p.N.MQ]=i,o[p.N.sca]=i,i=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="vp09.02.31.10.01"'}),f),o[p.N.s1]=i,o[p.N.qK]=i,o[p.N.rK]=i,o[p.N.bS]=i,i=Object.assign(Object.assign({},s),f),n=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L123.B0"'}),l),r=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L150.B0"'}),c),a=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="hev1.2.4.L153.B0"'}),h),o[p.N.i0]=i,o[p.N.k0]=i,o[p.N.m0]=i,o[p.N.o0]=n,o[p.N.ZQ]=r,o[p.N.aR]=a,o[p.N.j0]=i,o[p.N.l0]=i,o[p.N.n0]=i,o[p.N.p0]=n,o[p.N.$Q]=r,o[p.N.bR]=a,i=Object.assign(Object.assign(Object.assign({},s),f),t),n=Object.assign(Object.assign(Object.assign({},s),l),t),r=Object.assign(Object.assign(Object.assign({},s),c),t),s=Object.assign(Object.assign(Object.assign({},s),h),t),o[p.N.OQ]=i,o[p.N.QQ]=i,o[p.N.SJ]=i,o[p.N.TQ]=n,o[p.N.VQ]=r,o[p.N.XQ]=s,o[p.N.PQ]=i,o[p.N.RQ]=i,o[p.N.SQ]=i,o[p.N.UQ]=n,o[p.N.WQ]=r,o[p.N.YQ]=s,s=Object.assign(Object.assign(Object.assign({},u),f),e),t=Object.assign(Object.assign(Object.assign({},u),l),e),i=Object.assign(Object.assign(Object.assign({},u),c),e),u=Object.assign(Object.assign(Object.assign({},u),h),e),o[p.N.J_]=s,o[p.N.L_]=s,o[p.N.AQ]=s,o[p.N.O_]=t,o[p.N.Q_]=i,o[p.N.S_]=u,o[p.N.K_]=s,o[p.N.M_]=s,o[p.N.N_]=s,o[p.N.P_]=t,o[p.N.R_]=i,o[p.N.T_]=u,f=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.08M.10"'}),f),l=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.09M.10"'}),l),c=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.12M.10"'}),c),h=Object.assign(Object.assign({},{contentType:'video/mp4; codecs="av01.0.13M.10"'}),h),o[p.N.Aya]=f,o[p.N.Bya]=f,o[p.N.l_]=f,o[p.N.m_]=f,o[p.N.n_]=f,o[p.N.o_]=l,o[p.N.p_]=c,o[p.N.q_]=h,o},h.prototype.kLb=function(t,e){return t.video&&this.config().aTb?e.supported&&e.powerEfficient:e.supported},i=h,i=t.__decorate([n.R(),t.__param(0,n.l(u.IJ)),t.__param(1,n.l(o.eK)),t.__param(2,n.l(a.qb)),t.__param(3,n.l(s.Vs))],i),e.RFa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g;_esm(e),e.storage=void 0,t=i(0),n=i(454),r=i(79),a=i(183),o=i(1040),s=i(457),u=i(1041),c=i(456),h=i(184),f=i(1042),l=i(1044),p=i(1045),d=i(1046),b=i(79),m=i(458),g=i(1048),e.storage=new t.rd(function(t){t(a.CGa).wf(function(){return function(){return pt.localStorage}}),t(a.HDa).wf(function(){return function(){return pt.indexedDB}}),t(m.oGa).to(g.nGa).aa(),t(b.jB).to(d.Kya).aa(),t(s.TEa).to(u.SEa).aa(),t(n.w0).to(l.hEa).aa(),t(h.jEa).to(f.iEa).aa(),t(r.OKa).to(o.HAa).aa(),t(h.GDa).to(f.FDa).aa(),t(h.Kca).to(f.kEa).aa(),t(c.JAa).to(p.IAa).aa()})},function(t,e,i){var n,r,a,o,s;function u(t,e,i){this.Xo=e,this.config=i,this.ta=t.ib(o.Iea)}_esm(e),e.HAa=void 0,t=i(1),n=i(0),r=i(7),a=i(64),o=i(455),i=i(456),u.prototype.validate=function(t){return this.config.enabled?this.config.timeout?this.Xo.Jq(this.config.timeout,this.CUa(t)):this.CUa(t):Promise.resolve()},u.prototype.CUa=function(n){var r=this;return new Promise(function(e,i){return n.save("indexdb-test","true",!0).then(function(){return n.load("indexdb-test").then(function(t){"true"!==t.value&&i(),r.ta.debug("save/load test passed"),n.remove("indexdb-test").then(function(){e()}).catch(function(){r.ta.error("Failed to remove testValue"),e()})})}).catch(function(t){return i(t)})})},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.Rx)),t.__param(2,n.l(i.JAa))],s),e.HAa=s},function(t,e,i){var n,o,r;function a(t){this.ND=t}_esm(e),e.SEa=void 0,t=i(1),n=i(0),o=i(3),i=i(183),a.prototype.load=function(r){var a=this;return new Promise(function(t,e){var i,n;try{if(i=a.ND.getItem(r)){if("{"===(n=i)[0])try{n=JSON.parse(i)||i}catch(t){}t({key:r,value:n})}else e({na:o.L.EB})}catch(t){e({na:o.L.dKa,cause:t})}})},a.prototype.save=function(i,n,r){var a=this;return new Promise(function(t,e){if(r&&a.ND.getItem(i))t(!1);else try{"string"==typeof n?a.ND.setItem(i,n):a.ND.setItem(i,JSON.stringify(n)),t(!0)}catch(t){e({na:o.L.eKa,cause:t})}})},a.prototype.remove=function(i){var n=this;return new Promise(function(t,e){try{n.ND.removeItem(i),t()}catch(t){e({na:o.L.Bea,cause:t})}})},a.prototype.loadAll=function(){return Promise.reject("Not supported")},a.prototype.removeAll=function(){return Promise.reject("Not supported")},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.aib))],r),e.SEa=r},function(t,e,i){var n,r,a,o,u,s,c,h,f,l,p,d;function b(t,e,i,n,r,a){this.config=e,this.sU=i,this.Wn=n,this.j2b=r,this.ll=a,this.ta=t.ib(s.Iea)}function m(t,e){this.config=t,this.uZ=e}function g(t,e,i,n,r){this.config=e,this.uZ=i,this.ll=r,this.ta=t.ib(s.Iea),this.sU=new Promise(function(t,e){var i;try{(i=n())?t(i):e({na:u.L.IDa})}catch(t){e({na:u.L.v0,cause:t})}})}_esm(e),e.kEa=e.iEa=e.FDa=void 0,t=i(1),n=i(0),r=i(7),a=i(1043),o=i(183),u=i(3),s=i(455),c=i(454),h=i(64),f=i(79),l=i(71),p=i(184),d=i(62),g.prototype.create=function(){return this.Eka||(this.Eka=this.dM()),this.Eka},g.prototype.Yp=function(i){var n=this;return this.Eka=null,this.uZ.Jq(this.config.timeout,new Promise(function(t,e){i.close(),n.delete(i.name).then(function(){t()}).catch(function(t){e(t)})})).catch(function(t){return t instanceof h.hr?Promise.reject({na:u.L.v0}):t.na?Promise.reject(t):Promise.reject({na:u.L.v0,cause:t})})},g.prototype.delete=function(r){var t=this;return this.uZ.Jq(this.config.timeout,new Promise(function(i,n){t.sU.then(function(t){var e=t.deleteDatabase(r);e.onsuccess=function(){i()},e.onerror=function(){n({na:u.L.v0,cause:e.error})}}).catch(function(t){n(t)})}))},g.prototype.dM=function(){var o,s=this;return this.uZ.Jq(this.config.timeout,new Promise(function(r,a){if(s.config.pwa)return a({na:s.config.pwa});s.sU.then(function(n){return s.ll.mark(d.Rj.igb),(o=n.open(s.config.name,s.config.version))?(o.onblocked=function(){s.ll.mark(d.Rj.fgb),a({na:u.L.bgb})},o.onupgradeneeded=function(){var t;s.ll.mark(d.Rj.pgb),t=o.result;try{t.createObjectStore(s.config.kX,{keyPath:"name"})}catch(t){s.ta.error("Exception while creating object store",t)}},o.onsuccess=function(t){var e,i;s.ll.mark(d.Rj.ogb);try{if(i=(e=t.target.result).objectStoreNames.length,s.ta.trace("objectstorenames length ",i),0===i){s.ta.error("invalid indexedDb state, deleting"),s.ll.mark(d.Rj.hgb);try{e.close()}catch(t){}return n.deleteDatabase(s.config.name),void setTimeout(function(){a({na:u.L.agb})},1)}}catch(t){s.ta.error("Exception while inspecting indexedDb objectstorenames",t)}r(o.result)},void(o.onerror=function(){s.ll.mark(d.Rj.ggb),s.ta.error("IndexedDB open error",o.error),a({na:u.L.cgb,cause:o.error})})):a({na:u.L.JDa})}).catch(function(t){a(t)})})).catch(function(t){if(t instanceof h.hr){try{o&&o.readyState&&s.ll.mark("readyState-"+o.readyState)}catch(t){}if(s.config.l3&&o&&"done"===o.readyState){if(s.e2b(o))return s.ll.mark(d.Rj.mgb),Promise.resolve(o.result);s.ll.mark(d.Rj.lgb)}return s.ll.mark(d.Rj.kgb),Promise.reject({na:u.L.egb})}return t.na?Promise.reject(t):(s.ll.mark(d.Rj.jgb),s.ta.error("IndexedDB open exception occurred",t),Promise.reject({na:u.L.dgb,cause:t}))})},g.prototype.e2b=function(t){try{return 0<t.result.objectStoreNames.length}catch(t){this.ll.mark(d.Rj.ngb),this.ta.error("failed to check open request state",t)}return!1},i=g,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(c.w0)),t.__param(2,n.l(h.Rx)),t.__param(3,n.l(o.HDa)),t.__param(4,n.l(l.oF))],i),e.FDa=i,m.prototype.create=function(t){return Promise.resolve(new a.gEa(this.config,this.uZ,t))},i=m,i=t.__decorate([n.R(),t.__param(0,n.l(c.w0)),t.__param(1,n.l(h.Rx))],i),e.iEa=i,b.prototype.create=function(){return this.storage?Promise.resolve(this.storage):(this.mU||(this.mU=this.dM(this.j2b)),this.mU)},b.prototype.dM=function(t){var a=this;return t=void 0===t?[]:t,new Promise(function(n,r){a.ll.mark(d.Rj.Ujb),a.sU.create().then(function(i){a.Wn.create(i).then(function(e){Promise.all(t.map(function(t){return t.validate(e)})).then(function(){a.storage=e,n(a.storage)}).catch(function(t){a.ta.debug("DB validation failed, cause: "+t),a.config.sWa?(a.ta.debug("Fixing corrupt DB"),a.sU.Yp(i).then(function(){a.ta.error("Invalid database deleted, creating new database."),a.dM().then(function(t){a.ta.error("Invalid database successfully recreated."),a.storage=t,n(a.storage)})}).catch(function(t){a.ta.error("Couldn't delete invalid database."),r(t)})):(a.ta.debug("Ignoring invalid DB due to config"),a.storage=e,n(a.storage))})}).catch(function(t){r(t)})}).catch(function(t){r(t)})})},i=b,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(c.w0)),t.__param(2,n.l(p.GDa)),t.__param(3,n.l(p.jEa)),t.__param(4,n.OH(f.OKa)),t.__param(5,n.l(l.oF))],i),e.kEa=i},function(t,e,i){var o,n,u;function r(t,e,i){this.config=t,this.Xo=e,this.ND=i}function c(t,e){this.reason=t,this.cause=e}_esm(e),e.gEa=e.FJa=void 0,o=i(3),n=i(64),(i=u=e.FJa||(e.FJa={}))[i.vda=0]="NoData",i[i.Error=1]="Error",i[i.oK=2]="Timeout",r.prototype.load=function(n){var t=this;return new Promise(function(e,i){t.g5("get",!1,n).then(function(t){e({key:n,value:t})}).catch(function(t){var e=o.L.dKa;switch(t.reason){case u.vda:e=o.L.EB;break;case u.oK:e=o.L.Vjb}i({na:e,cause:t.cause})})})},r.prototype.save=function(e,n,r){var a=this;return new Promise(function(t,i){a.g5(r?"add":"put",!0,{name:e,data:n}).then(function(){t(!r)}).catch(function(t){var e=o.L.eKa;t.reason===u.oK&&(e=o.L.Yjb),i({na:e,cause:t.cause})})})},r.prototype.remove=function(e){var n=this;return new Promise(function(t,i){n.g5("delete",!0,e).then(function(){t()}).catch(function(t){var e=o.L.Bea;t.reason===u.oK&&(e=o.L.cKa),i({na:e,cause:t.cause})})})},r.prototype.removeAll=function(){var e=this;return new Promise(function(t,i){e.g5("clear",!0,"").then(function(){t()}).catch(function(t){var e=o.L.Bea;t.reason===u.oK&&(e=o.L.cKa),i({na:e,cause:t.cause})})})},r.prototype.loadAll=function(){var a=this;return this.Xo.Jq(this.config.timeout,new Promise(function(e,i){var n,t,r;a.config.owa?i(new c(a.config.owa)):(n=[],t=a.ND.transaction(a.config.kX,"readonly"),r=t.objectStore(a.config.kX).openCursor(),t.onerror=function(){i(new c(u.Error,r.error))},r.onsuccess=function(t){if(t=t.target.result)try{n.push({key:t.value.name,value:t.value.data}),t.continue()}catch(t){i(new c(u.Error,t))}else e(n)},r.onerror=function(){i(new c(u.Error,r.error))})})).catch(function(t){return t instanceof n.hr?Promise.reject(new c(u.oK,t)):t instanceof c?Promise.reject(t):Promise.reject(new c(u.Error,t))})},r.prototype.g5=function(r,a,o){var s=this;return this.Xo.Jq(this.config.timeout,new Promise(function(i,n){var t=s.ND.transaction(s.config.kX,a?"readwrite":"readonly"),e=t.objectStore(s.config.kX)[r](o);t.onerror=function(){n(new c(u.Error,e.error))},e.onsuccess=function(t){var e;if("get"==r)try{(e=t.target.result)?i(e.data):n(new c(u.vda))}catch(t){n(new c(u.vda,t))}else i(void 0)},e.onerror=function(){n(new c(u.Error,e.error))}})).catch(function(t){return t instanceof n.hr?Promise.reject(new c(u.oK,t)):t instanceof c?Promise.reject(t):Promise.reject(new c(u.Error,t))})},e.gEa=r},function(t,e,i){var n,r,a,o,s;function u(t,e){return(t=a.Ze.call(this,t,"IndexedDBConfigImpl")||this).config=e,t.version=1,t.kX="namedatapairs",t}_esm(e),e.hEa=void 0,t=i(1),n=i(0),r=i(45),a=i(46),o=i(40),i=i(37),T(u,a.Ze),it.Object.defineProperties(u.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"netflix.player"+(this.config.nw?"Test":"")}},timeout:{configurable:!0,enumerable:!0,get:function(){return this.config.Jwa}},l3:{configurable:!0,enumerable:!0,get:function(){return this.config.l3}},pwa:{configurable:!0,enumerable:!0,get:function(){return 0}},owa:{configurable:!0,enumerable:!0,get:function(){return 0}},sWa:{configurable:!0,enumerable:!0,get:function(){return!0}}}),s=u,t.__decorate([r.config(r.ZA,"simulateIdbOpenError")],s.prototype,"pwa",null),t.__decorate([r.config(r.ZA,"simulateIdbLoadAllError")],s.prototype,"owa",null),t.__decorate([r.config(r.dd,"fixInvalidDatabase")],s.prototype,"sWa",null),s=t.__decorate([n.R(),t.__param(0,n.l(i.Wl)),t.__param(1,n.l(o.Tm))],s),e.hEa=s},function(t,e,i){var n,r;function a(t){this.config=t}_esm(e),e.IAa=void 0,t=i(1),n=i(0),i=i(40),it.Object.defineProperties(a.prototype,{timeout:{configurable:!0,enumerable:!0,get:function(){return this.config.Jwa}},enabled:{configurable:!0,enumerable:!0,get:function(){return this.config.D$a}}}),r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.Tm))],r),e.IAa=r},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n){this.ta=t,this.config=e,this.pJb=i,this.Bra=n,this.tG={mem:{storage:this.Bra,key:"mem"}},this.iE=this.config.iE}function f(t,e,i,n){this.Wf=t,this.Wn=e,this.Bra=i,this.config=n}_esm(e),e.rba=e.Kya=void 0,t=i(1),n=i(0),r=i(3),a=i(184),o=i(7),s=i(458),u=i(1047),i=i(40),f.prototype.create=function(){return this.mU||(this.mU=this.dM()),this.mU},f.prototype.dM=function(){return this.trb=new h(this.Wf.ib("AppStorage"),this.config,this.Wn,this.Bra),this.trb.create()},c=f,c=t.__decorate([n.R(),t.__param(0,n.l(o.qb)),t.__param(1,n.l(a.Kca)),t.__param(2,n.l(s.oGa)),t.__param(3,n.l(i.Tm))],c),e.Kya=c,h.prototype.create=function(){var e=this;return this.$xb().then(function(t){if(!e.Wtb(t,e.config.$V))throw e.BPb(t);return e})},h.prototype.load=function(t){var n=this;return new Promise(function(e,i){n.rV(t).storage.load(t).then(function(t){e(t)}).catch(function(t){i(t)})})},h.prototype.save=function(t,n,r){var a=this;return new Promise(function(e,i){a.rV(t).storage.save(t,n,r).then(function(t){e(t)}).catch(function(t){i(t)})})},h.prototype.remove=function(i){var n=this;return new Promise(function(t,e){n.rV(i).storage.remove(i).then(function(){t()}).catch(function(t){e(t)})})},h.prototype.removeAll=function(){var i=this;return new Promise(function(t,e){i.a7a("mem").then(function(){return i.a7a("idb")}).catch(function(t){return Promise.reject(t)}).then(function(){t()}).catch(function(t){i.ta.error("remove all failed"),e(t)})})},h.prototype.loadAll=function(){var e=this,i=[];return this.r1a("mem").then(function(t){return i=i.concat(t),e.r1a("idb")}).catch(function(t){return e.hLb(t)||e.ta.error("IndexedDb.LoadAll exception",t),[]}).then(function(t){return i=i.concat(t)}).catch(function(t){throw e.ta.error("load all failed",t),t})},h.prototype.$xb=function(){var e=this;return this.pJb.create().then(function(t){e.tG.idb={storage:t,key:"idb"}}).catch(function(t){return e.ta.error("idb failed to load",t),t||{na:r.L.Vl}})},h.prototype.Wtb=function(t,e){return!!(!t||t&&e)},h.prototype.BPb=function(t){var e="";return t&&(e+=t.na),{na:e}},h.prototype.a7a=function(t){return(t=this.tG[t])?t.storage.removeAll():Promise.resolve()},h.prototype.r1a=function(t){return(t=this.tG[t])?t.storage.loadAll():Promise.resolve([])},h.prototype.fDb=function(t){for(var e in this.iE)if(t.startsWith(e))return this.iE[e];return this.iE[u.veb]},h.prototype.rV=function(t){var e,i=this;return this.fDb(t).every(function(t){return!i.tG[t]||(e=i.tG[t],!1)}),e||(this.ta.error("component not found for storageKey",{rZb:t,Z8b:Object.keys(this.tG),rules:this.iE}),e=this.tG.mem),this.ta.trace("component found for key",{storageKey:t,componentKey:e.key}),e},h.prototype.hLb=function(t){return(t&&(t.na||t.errorSubCode))===r.L.EB},e.rba=h},function(t,e){_esm(e),e.veb="__default_rule_key__"},function(t,e,i){var n,r,a;function o(t){this.Wf=t,this.QH={},this.ta=this.Wf.ib("MemoryStorage")}_esm(e),e.nGa=void 0,t=i(1),n=i(0),r=i(3),i=i(7),o.prototype.load=function(t){var e;return this.QH.hasOwnProperty(t)?(e=this.QH[t],this.ta.debug("Storage entry loaded",{key:t}),Promise.resolve({key:t,value:e})):(this.ta.debug("Storage entry not found",{key:t}),Promise.reject({na:r.L.EB}))},o.prototype.save=function(t,e,i){return i&&this.QH.hasOwnProperty(t)?Promise.resolve(!1):(this.QH[t]=e,Promise.resolve(!0))},o.prototype.remove=function(t){return delete this.QH[t],Promise.resolve()},o.prototype.loadAll=function(){var t=Object.entries(this.QH).map(function(t){var e=nt(t);return{key:t=e.next().value,value:e=e.next().value}});return Promise.resolve(t)},o.prototype.removeAll=function(){return this.QH={},Promise.resolve()},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.qb))],a),e.nGa=a},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.KL=void 0,t=i(0),n=i(459),r=i(460),a=i(461),o=i(1050),s=i(1051),u=i(1052),e.KL=new t.rd(function(t){t(n.zza).to(o.yza).aa(),t(r.xza).to(s.uza).aa(),t(a.wza).to(u.vza).aa()})},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.A3=e,this.jb=i,this.Rsb=n,this.config=r,this.ta=t.ib("Bookmark")}_esm(e),e.yza=void 0,t=i(1),n=i(0),r=i(460),a=i(461),o=i(7),s=i(27),u=i(4),i=i(13),h.prototype.Yqb=function(t){var e=t.bb.playbackState&&t.bb.playbackState.currentTime,i=this.WEb(t.J);if(e=this.jb.EG(e)?u.Nc(e):i,this.jb.Gg(e))this.ta.info("Overriding bookmark",{From:t.oJ.da(u.ja),To:e.da(u.ja)}),t=Object.assign({},t,{oJ:e});else if(this.tJb(t))return this.ta.trace("Ignoring bookmark because it's too close to beginning"),u.vh(0);return t.oJ.Fpa()?(this.ta.trace("Ignoring bookmark because it's negative"),u.vh(0)):this.sJb(t)?(this.ta.trace("Ignoring bookmark because it's too close to end"),u.vh(0)):this.rJb(t)?(this.ta.trace("Ignoring bookmark because it's too close to the end to start decoding"),u.vh(0)):t.oJ},h.prototype.tJb=function(t){return t.oJ.Al(this.ona(t))<0},h.prototype.ona=function(t){return this.kRa(this.A3.ona(),t.D9)},h.prototype.sJb=function(t){return 0<t.oJ.Al(this.pna(t))},h.prototype.pna=function(t){var e=t.bb.Fl?this.A3.LFb():this.A3.pna();return t.D9.Qa(this.kRa(e,t.D9))},h.prototype.rJb=function(t){return 0<t.oJ.Al(this.tFb(t))},h.prototype.tFb=function(t){var e=t.bb.Fl?this.config().A4a:this.config().$H;return t.D9.Qa(u.Nc(e))},h.prototype.WEb=function(t){var e;if(t=this.A3.Uma()[t],e=-1,this.jb.Ip(t)?e=parseInt(t):this.jb.Ii(t)&&(e=t),this.jb.yT(e))return u.Nc(e)},h.prototype.kRa=function(t,e){return this.Rsb.FZb(t,e)},c=h,c=t.__decorate([n.R(),t.__param(0,n.l(o.qb)),t.__param(1,n.l(r.xza)),t.__param(2,n.l(s.bg)),t.__param(3,n.l(a.wza)),t.__param(4,n.l(i.Zc))],c),e.yza=c},function(t,e,i){var n,r;function a(t){this.config=t}_esm(e),e.uza=void 0,t=i(1),n=i(0),i=i(13),a.prototype.ona=function(){return this.PC().Ssb},a.prototype.pna=function(){return this.PC().Tsb},a.prototype.LFb=function(){return this.PC().Usb},a.prototype.Uma=function(){return this.PC().jRa},a.prototype.PC=function(){return this.config()},r=a,r=t.__decorate([n.R(),t.__param(0,n.l(i.Zc))],r),e.uza=r},function(t,e,i){var n,r,a;function o(t){this.jb=t}_esm(e),e.vza=void 0,t=i(1),n=i(0),r=i(27),a=i(4),o.prototype.FZb=function(t,e){var i=parseFloat(t),n=0;return"%"===t[t.length-1]&&this.jb.Ii(i)?n=Math.round(i*e.da(a.ja)/100):(t=parseInt(t),this.jb.yT(t)&&(n=t)),a.Nc(Math.min(n,e.da(a.ja)))},i=o,i=t.__decorate([n.R(),t.__param(0,n.l(r.bg))],i),e.vza=i},function(t,e,i){var n,r;_esm(e),e.ERa=void 0,t=i(0),n=i(462),r=i(1054),e.ERa=new t.rd(function(t){t(n.Qza).to(r.Pza).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a){this.config=t,this.DD=i,this.profile=n,this.xaa=r,this.ZT=a,this.log=e.ib("CDMAttestedDescriptor"),this.jXa(h.wv.MR)}_esm(e),e.Pza=void 0,t=i(1),n=i(0),r=i(13),a=i(7),o=i(156),s=i(277),u=i(94),c=i(166),h=i(40),f=i(57),l.prototype.jXa=function(t){var e=this;return this.xaa.O$(t)?this.config().qBb?this.hXa().then(function(t){return t?Promise.resolve(void 0):(e.l1a||(e.l1a=e.ZT.Tna(f.Xh.eo)),e.l1a)}).catch(function(t){e.log.error("Failed to generate challenge",t)}).then(function(t){return null!=t&&t.ac.close(),null==t?void 0:t.rja}).then(function(t){return Promise.all([Promise.resolve(t),e.hXa()])}).then(function(t){var e;if(t=nt(t),e=t.next().value,!t.next().value)return e}):this.DD().then(function(t){t.$W.removeServiceToken("cad")}):Promise.resolve(void 0)},l.prototype.hXa=function(){var e=this;return this.DD().then(function(t){return(t=t.$W.getServiceTokens(e.profile))&&t.find(function(t){return"cad"===t.name})})},i=l,i=t.__decorate([n.R(),t.__param(0,n.l(r.Zc)),t.__param(1,n.l(a.qb)),t.__param(2,n.l(o.yR)),t.__param(3,n.l(u.OR)),t.__param(4,n.l(s.r1)),t.__param(5,n.l(c.C_))],i),e.Pza=i},function(t,e,n){var i,r,a,o,s,u,c,h,f,l,p,d;_esm(e),e.b2a=void 0,t=n(0),i=n(260),r=n(1056),a=n(463),o=n(1063),s=n(466),u=n(467),c=n(469),h=n(1064),f=n(157),l=n(1065),p=n(471),d=n(1066),e.b2a=new t.rd(function(t){t(a.HFa).to(o.GFa).aa(),t(i.kda).to(r.IFa).aa(),t(s.PIa).$i(function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];return i=n(279).nF,new(Function.prototype.bind.apply(i,[null].concat(G(e))))}),t(u.uLa).$i(function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];return i=n(475).fAa,new(Function.prototype.bind.apply(i,[null].concat(G(e))))}),t(c.LFa).wf(function(){return function(t){return new h.MFa(t)}}),t(f.tR).to(l.EFa).aa(),t(p.DFa).to(d.CFa).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d;function b(t,e,i,n,r){this.Wf=t,this.config=e,this.xta=i,this.txa=n,this.taa=r}_esm(e),e.IFa=void 0,t=i(1),n=i(0),r=i(7),a=i(463),o=i(1057),s=i(1058),u=i(1059),c=i(1060),h=i(1061),f=i(1062),l=i(466),p=i(467),i=i(468),b.prototype.create=function(t){var e=this.Wf.ib("ManifestParser",t),i=new o.nAa(e,this.config);return new u.JFa(i,new s.gLa(e,this.config,t,i,this.xta),new c.ELa(e,t,this.txa),new h.kza(e,this.config,t,this.taa),new f.dMa(e,this.taa))},d=b,d=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.HFa)),t.__param(2,n.l(l.PIa)),t.__param(3,n.l(i.CLa)),t.__param(4,n.l(p.uLa))],d),e.IFa=d},function(t,e,i){var u,a,o;function n(t,e){this.log=t,this.config=e}_esm(e),e.nAa=void 0,u=i(129),a=i(278),o=i(21),n.prototype.Tsa=function(t,i,e){var n,r=this,a=this.config.pja,o=this.config.oja,s=(t=nt(u.yu(function(t){return(!a.length||0<=a.indexOf(t.id))&&o.indexOf(t.id)<0},t||[]))).next().value;if(t.next().value.forEach(function(t){return r.log.warn("Cdn is not allowed",{Id:t.id})}),(n=s.map(function(e){var t=(i?i.find(function(t){return t.key===e.key}):void 0)||{};return{id:e.id,name:e.name,uc:e.uc,type:e.type,yqa:e.key,cac:e.Q1a,location:{id:t.key,uc:t.uc,level:t.level,weight:t.weight,hi:[]}}})).sort(function(t,e){return t.uc-e.uc}),n.forEach(function(e){return e.location.hi=n.filter(function(t){return t.yqa===e.yqa})}),this.log.trace("Transformed cdns",{Count:n.length}),e&&!n.length)throw Error("no valid cdns");return n},n.prototype.lJb=function(t,e,i,n){var r=t.filter(function(e){return-1!==i.findIndex(function(t){return t.id===e.id})}).map(function(t){return{D4a:!0,Pc:t}}).concat(i.map(function(t){return{D4a:!1,Pc:t}})).sort(function(t,e){return t.Pc.uc===e.Pc.uc?t.D4a?-1:1:t.Pc.uc-e.Pc.uc}).map(function(t,e){return a.PN(t.Pc).uc=e+1,t.Pc});return t=e.filter(function(e){return-1!==n.findIndex(function(t){return t.key===e.key})}).concat(n).map(function(e){var t=r.findIndex(function(t){return t.key===e.key});return o.hb(-1!==t),t=r[t],a.PN(e).uc=t.uc,e}),e=this.Tsa(r,t,!0),{mXb:r,RMb:t,hi:e}},e.nAa=n},function(t,e,i){var o,n,s,r;function a(t,e,i,n,r){this.log=t,this.config=e,this.j=i,this.R3=n,this.xta=r}_esm(e),e.gLa=void 0,o=i(44),n=i(11),s=i(131),r=i(464),a.prototype.h5a=function(r,t){var a=this;return t=t.map(function(t){var e,i,n=a.n0b(t);return t.lD||!t.oi||n&&0<n.length||a.log.error("track without downloadables",a.eGb(t)),e={},i=[],0<n.length&&((e=n[0]).profile==o.Zm.cK&&(e=a.$Wb(n)),i=a.R3.Tsa(t.QRa,void 0,!1)),t=a.xta(a.j,t.sg,t.id,null!==(n=t.uc)&&void 0!==n?n:-1,null===(n=t.oi)||void 0===n||n,r,e.Bc,e.urls||{},i,t.language,t.qD,s.p1[t.ml.toLowerCase()]||s.vp.gK,t.XI,t.variant,t.oI.toUpperCase(),e.profile,a.kGb(e)||{},t.lD,t.q7,t.t7,t.du),a.log.trace("Transformed timed text track",t),t}),this.log.trace("Transformed timed text tracks",{Count:t.length}),t},a.prototype.M_b=function(t){var e=this,i=this.config.Cma;if(i){if(t=nt(t.filter(function(t){return t.Wd==i||t.trackId==i})).next().value)return t}else if(this.j.w5&&(t=nt(t.filter(function(t){return t.trackId==e.j.w5})).next().value))return t},a.prototype.n0b=function(t){var i=this,n=t.MUa;return(t=Object.entries(t.Bxa||{}).map(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,{Bc:n[t],profile:t,size:e.size||0,priority:i.mFb(t,e),offset:e.Hra||0,nSb:e.width,w5a:e.height,urls:e.jw}})).sort(function(t,e){return t.priority-e.priority}),t},a.prototype.mFb=function(t,e){var i,n=this.config.dv.indexOf(t);return e=e.size,i=this.config.JP,t===o.Zm.Uba&&0<i&&i<e?this.config.dv.length+1:0<=n?n:this.config.dv.length},a.prototype.kGb=function(t){if(t.profile===o.Zm.cK)return{offset:t.offset,length:t.size,xI:{width:t.nSb,height:t.w5a}}},a.prototype.$Wb=function(t){var e=this.config.Voa||r.Nea.NYa(),i=nt(t.filter(function(t){return t.profile===o.Zm.cK}).filter(function(t){return t.w5a===e})).next().value;return i||(this.log.warn("none of the downloadables match the intended resolution",{screenHeight:n.yv.height,intendedResolution:e}),t[0])},a.prototype.eGb=function(t){return{isNone:t.lD,isForced:t.q7,bcp47:t.language,id:t.sg}},e.gLa=a},function(t,e,i){var u;function n(t,e,i,n,r){this.R3=t,this.dxa=e,this.w0b=i,this.v3=n,this.Ibb=r}_esm(e),e.JFa=void 0,u=i(278),n.prototype.f5a=function(t){var e,i,n,r,a=t.$b,o=null!==(c=null===(u=a.S3)||void 0===u?void 0:u.ds)&&void 0!==c?c:"",s=!!a.fY,u=this.R3.Tsa(a.Pl,a.Hl,!0),c=this.dxa.h5a(o,a.tZ);return t=this.w0b.TRb(a.z0b),e=s?this.v3.W4a(o,a.gG,c):this.v3.ORb(o,a.gG,a.media,c),o=this.Ibb.URb(o,a.eB),i=o[0],n=this.v3.ksb(e)||e.find(function(t){return s?t.trackId===a.fY.pn:t.Nz===a.z4[0].pn})||e[0],r=this.dxa.M_b(n.Qh)||c.find(function(t){return s?t.trackId===a.fY.KP:t.Nz===a.z4[0].m$a})||n.Qh[0],{Lu:this.Ibb.QRb(a.eB),hi:u,Ki:e,ip:o,Qh:c,XA:t,Ti:a.Ti,qXb:a.avb,oD:a.UV,rm:a.rm,tzb:a.gG.findIndex(function(t){return t.sg==n.trackId}),Dzb:a.eB.findIndex(function(t){return t.sg==i.trackId}),A4:i,vU:n,xU:r}},n.prototype.mJb=function(e,n,t){var r,a=this,i=this.R3.lJb(e.$b.Pl,e.$b.Hl,t.$b.Pl,t.$b.Hl),o=i.mXb,s=i.RMb;return i=i.hi,u.PN(e.$b).Pl=o,u.PN(e.$b).Hl=s,n.hi=i,r=null!==(i=null===(s=t.$b.S3)||void 0===s?void 0:s.ds)&&void 0!==i?i:"",s=(t=t.$b).gG,t.tZ.forEach(function(t){var i;t.oi&&(i=a.o7a(e.$b.tZ,n.Qh,t,function(t){return a.dxa.h5a(r,[t])[0]}))&&n.Ki.forEach(function(t){var e;-1!==(e=(t=t.Qh).findIndex(function(t){return t.trackId===i.trackId}))&&(t[e]=i)})}),s.forEach(function(t){t.oi&&a.o7a(e.$b.gG,n.Ki,t,function(t){return a.v3.W4a(r,[t],n.Qh)[0]})}),{oa:e,Rc:n}},n.prototype.o7a=function(t,e,i,n){var r=t.findIndex(function(t){return t.sg===i.sg}),a=-1!==r?t[r]:void 0,o=e.findIndex(function(t){return t.trackId===i.sg}),s=-1!==o?e[o]:void 0;if(a&&!a.oi&&s&&!s.oi)return n=n(i),t[r]=i,e[o]=n},e.JFa=n},function(t,e){function i(t,e,i){this.log=t,this.j=e,this.txa=i}_esm(e),e.ELa=void 0,i.prototype.TRb=function(t){var e=this;return 0===(t=(t||[]).filter(function(t){return t.urls&&0<t.urls.length}).map(function(t){return e.txa(e.j,t.id,t.height,t.width,t.sSb,t.tSb,t.size,t.du,{unknown:t.urls[0]})})).length&&this.log.warn("There are no trickplay tracks"),t.sort(function(t,e){return t.size-e.size}),this.log.trace("Transformed trick play tracks",{Count:t.length}),t},e.ELa=i},function(t,e,i){var r,a,u,o,s;function n(t,e,i,n){return(t=a.vR.call(this,t,n)||this).config=e,t.j=i,t}_esm(e),e.kza=void 0,r=i(447),a=i(465),u=i(129),o=i(90),s=i(131),T(n,a.vR),n.prototype.W4a=function(e,t,i){var n=this,r=this.config.baa;if(!(t=t.filter(function(t){var e,i=t.lD||!t.oi||t.streams&&0<t.streams.length;return i||n.log.warn("Audio track is missing streams",n.q6(t)),(e=0===r.length||0<=r.indexOf(t.ml))||n.log.warn("Audio track is not supported",n.q6(t)),i&&e})).length)throw Error("no valid audio tracks");return t=t.map(function(t){return n.V4a(e,t,n.oEb(t,i))}),this.log.trace("Parsed audio tracks",{Count:t.length}),t},n.prototype.ORb=function(e,t,i,n){var r,a,o=this,s=nt(u.yu(function(t){return t.lD},t));if(t=s.next().value,s=s.next().value,r=(s=nt(u.yu(function(t){return t.streams&&0<t.streams.length},s))).next().value,s.next().value.forEach(function(t){return o.log.warn("Audio track is missing streams",o.q6(t))}),a=this.config.baa,r=(s=nt(u.yu(function(t){return 0===a.length||0<=a.indexOf(t.ml)},r))).next().value,s.next().value.forEach(function(t){return o.log.warn("Audio track is not supported",o.q6(t))}),!(t=[].concat(G(r),G(t)).map(function(t){return o.V4a(e,t,o.aGb(t.sg,i,n))})).length)throw Error("no valid audio tracks");return this.log.trace("Transformed audio tracks",{Count:t.length}),t},n.prototype.ksb=function(t){var e=this,i=this.config.yma;if(i){if(t=nt(t.filter(function(t){return t.Wd==i||t.trackId==i})).next().value)return t}else if(this.j.v5&&(t=nt(t.filter(function(t){return t.trackId==e.j.v5})).next().value))return t},n.prototype.V4a=function(t,e,i){var n=e.ml;return(t={type:o.Ei.audio,XI:e.XI,variant:e.variant,trackId:e.sg,Nz:e.NP,ml:s.p1[n.toLowerCase()]||s.vp.gK,oI:n,Fg:t,Wd:e.language,displayName:e.qD+" - "+(e.codecName||"HE-AAC"),uc:null!==(n=e.uc)&&void 0!==n?n:-1,oi:null===(n=e.oi)||void 0===n||n,channels:e.channels,q9b:e.channels,Qh:i,Ri:{Bcp47:e.language,TrackId:e.sg},streams:[],isNative:e.isNative,Vr:e.lD,hZ:e.hZ}).streams=this.nab(e.streams,t),this.log.trace("Transformed audio track",t,{StreamCount:t.streams.length,AllowedTimedTextTracks:t.Qh.length}),t.hvb=r.lza[null===(e=t.streams[0])||void 0===e?void 0:e.kh],t},n.prototype.q6=function(t){return{language:t.qD,bcp47:t.language,type:t.ml}},n.prototype.oEb=function(e,t){return t.filter(function(t){if(0<=e.pAb.indexOf(t.Nz))return!1;if(e.cUa){if(e.cUa!==t.Nz&&(t.Vr()||t.rq()))return!1}else if(e.oQb){if(t.Vr()||t.rq())return!1}else if(t.rq())return!1;return!0})},n.prototype.aGb=function(e,t,i){return t.filter(function(t){return t.vg.Wb===e}).map(function(t){return t.vg.Xm}).map(function(e){return i.find(function(t){return t.trackId===e})}).filter(Boolean)},e.kza=n},function(t,e,i){var r,n,a,o;function s(t,e){return n.vR.call(this,t,e)||this}_esm(e),e.dMa=void 0,r=i(129),n=i(465),a=i(90),o=i(131),T(s,n.vR),s.prototype.URb=function(i,t){var n=this,e=(t=nt(r.yu(function(t){return t.streams&&0<t.streams.length},t))).next().value;if(t.next().value.forEach(function(t){return n.log.warn("Video track is missing streams",{trackId:t.sg})}),!(t=e.map(function(t){var e=t.ml;return(e={type:a.Ei.video,trackId:t.sg,Nz:t.NP,ml:o.p1[e.toLowerCase()]||o.vp.gK,oI:e,Fg:i,streams:[],Ri:{},Iu:t.Iu}).streams=n.nab(t.streams,e),n.log.trace("Transformed video track",{StreamCount:e.streams.length}),e})).length)throw Error("No valid video tracks");return this.log.trace("Transformed video tracks",{Count:t.length}),t},s.prototype.QRb=function(t){var e=t.map(function(t){return t.Iu}).filter(Boolean),e=[].concat.apply([],G(e)).map(function(t){return t.fa});return t=t.map(function(t){return t.nla}).filter(Boolean).map(function(t){return t.fa}),0<e.length?e:t},e.dMa=s},function(t,e,i){var n,r,a,o,s,u;function c(t,e){return(t=r.Ze.call(this,t,"ManifestParserConfigImpl")||this).oj=e,t}_esm(e),e.GFa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(45),s=i(108),u=i(52),T(c,r.Ze),it.Object.defineProperties(c.prototype,{baa:{configurable:!0,enumerable:!0,get:function(){return[]}},yma:{configurable:!0,enumerable:!0,get:function(){return""}},pja:{configurable:!0,enumerable:!0,get:function(){return[]}},oja:{configurable:!0,enumerable:!0,get:function(){return[]}},Cma:{configurable:!0,enumerable:!0,get:function(){return""}},Voa:{configurable:!0,enumerable:!0,get:function(){return 0}},JP:{configurable:!0,enumerable:!0,get:function(){return this.oj.JP.da(u.ov)}},dv:{configurable:!0,enumerable:!0,get:function(){return this.oj.dv}}}),i=c,t.__decorate([o.config(o.cZ,"supportedAudioTrackTypes")],i.prototype,"baa",null),t.__decorate([o.config(o.string,"forceAudioTrack")],i.prototype,"yma",null),t.__decorate([o.config(o.Exa,"cdnIdWhiteList")],i.prototype,"pja",null),t.__decorate([o.config(o.Exa,"cdnIdBlackList")],i.prototype,"oja",null),t.__decorate([o.config(o.string,"forceTimedTextTrack")],i.prototype,"Cma",null),t.__decorate([o.config(o.ZA,"imageSubsResolution")],i.prototype,"Voa",null),t.__decorate([o.config(o.ZA,"timedTextSimpleFallbackThreshold")],i.prototype,"JP",null),t.__decorate([o.config(o.cZ,"timedTextProfiles")],i.prototype,"dv",null),i=t.__decorate([n.R(),t.__param(0,n.l(a.Wl)),t.__param(1,n.l(s.fF))],i),e.GFa=i},function(t,e){function i(t){this.Rc=t,this.ub=JSON.stringify(this.hGb())}_esm(e),e.MFa=void 0,i.prototype.hGb=function(){var t=[];return(!this.Rc.hi||this.Rc.hi.length<=0)&&t.push({error:"No CDN."}),this.Rc.vU||t.push({error:"No default audio track.",foundTracks:this.mna(this.Rc.Ki)}),this.Rc.A4||t.push({error:"No default video track.",foundTracks:this.mna(this.Rc.ip)}),this.Rc.xU||t.push({error:"No default subtitle track.",foundTracks:this.mna(this.Rc.Qh)}),t},i.prototype.mna=function(t){return t&&0<t.length?t.map(function(t){return t.trackId}):"No tracks found."},e.MFa=i},function(t,e,i){var n,r,a,o,s;function u(t,e){this.kMb=t,this.sNb=e}_esm(e),e.EFa=void 0,t=i(1),n=i(0),r=i(470),a=i(471),o=i(41),s=i(3),u.prototype.create=function(t){var e;if(t&&!this.QKb(t)){if(this.UKb(t))throw o.qd.T2b(s.M.sR,s.L.Zjb,t);return(e=this.kMb()).EPa(t.links),this.sNb.BM(t),{$b:t,lk:e,i0a:!1,h0a:!1}}},u.prototype.UKb=function(t){return"type"in t&&"muxed"===t.type},u.prototype.QKb=function(t){return"runtime"in t&&!!t.runtime},i=u,i=t.__decorate([n.R(),t.__param(0,n.l(r.IHa)),t.__param(1,n.l(a.DFa))],i),e.EFa=i},function(t,e,i){var n,r;function a(t){this.bCb=t,this.tNb={Eo:"drmType",T9b:"drmVersion",expiration:"expiration",J:"movieId",Vo:"packageId",duration:"duration",Ti:"playbackContextId",z4:["defaultTrackOrderList",{TN:"mediaId",VP:"videoTrackId",m$a:"subtitleTrackId",pn:"audioTrackId",Hbc:"preferenceOrder"}],X9b:["eligibleABTestMap",{$m:r.$m}],b9b:["badgingInfo",{M9b:"dolbyDigitalAudio",I$b:"hdrVideo",N9b:"dolbyVisionVideo",Qcc:"ultraHdVideo","3dVideo":"3dVideo",L9b:"dolbyAtmosAudio",V8b:"assistiveAudio",bcc:"sdVideo",H$b:"hdVideo"}],type:"type",Y8b:["audioTextShortcuts",{id:"id",pn:"audioTrackId",Fcc:"textTrackId"}],Cbc:"partiallyHydrated",B2a:"maxRecommendedAudioRank",C2a:"maxRecommendedTextRank",rm:"drmContextId",tIb:"hasDrmProfile",sIb:"hasClearProfile",UV:"hasDrmStreams",woa:"hasClearStreams",Hl:["locations",{uc:"rank",level:"level",weight:"weight",key:"key"}],links:["links",{}],Pl:["servers",{id:"id",name:"name",type:"type",uc:"rank",Q1a:"lowgrade",zAb:["dns",{host:"host",qKb:"ipv4",rKb:"ipv6",FDb:"forceLookup"}],key:"key"}],gG:["audio_tracks",{type:"type",XI:"subType",variant:"variant",ml:"trackType",sg:"new_track_id",NP:"track_id",$Tb:"profileType",oZb:"stereo",profile:"profile",channels:"channels",language:"language",oub:"channelsFormat",hZ:"surroundFormatLabel",qD:"languageDescription",pAb:"disallowedSubtitleTracks",cUa:"defaultTimedText",isNative:"isNative",lD:"isNoneTrack",streams:["streams",{Gr:"downloadable_id",size:"size",xG:"content_profile",ml:"trackType",bitrate:"bitrate",Qz:"isDrm",urls:["urls",{Sp:"cdn_id",url:"url"}],sPb:"new_stream_id",type:"type",channels:"channels",oub:"channelsFormat",hZ:"surroundFormatLabel",language:"language",X8b:"audioKey",cPb:["moov",{size:"size",offset:"offset"}],zs:["sidx",{size:"size",offset:"offset"}],PA:["ssix",{size:"size",offset:"offset"}],Xn:"tags"}],hvb:"codecName",oI:"rawTrackType",id:"id",uc:"rank",oi:"hydrated",oQb:"offTrackDisallowed"}],eB:["video_tracks",{ml:"trackType",sg:"new_track_id",type:"type",NP:"track_id",tIb:"hasDrmProfile",sIb:"hasClearProfile",UV:"hasDrmStreams",woa:"hasClearStreams",Cz:"groupName",streams:["streams",{Gr:"downloadable_id",size:"size",xG:"content_profile",ml:"trackType",PUa:"drmHeaderId",bitrate:"bitrate",Qz:"isDrm",urls:["urls",{Sp:"cdn_id",url:"url"}],sPb:"new_stream_id",type:"type",Ebc:"peakBitrate",hAb:"dimensionsCount",iAb:"dimensionsLabel",y5a:"pix_w",x5a:"pix_h",E7a:"res_w",D7a:"res_h",Pyb:"crop_x",Qyb:"crop_y",Oyb:"crop_w",Nyb:"crop_h",JWa:"framerate_value",IWa:"framerate_scale",K9a:"startByteOffset",sb:"vmaf",cPb:["moov",{size:"size",offset:"offset"}],zs:["sidx",{size:"size",offset:"offset"}],PA:["ssix",{size:"size",offset:"offset"}],GI:["segmentVmaf",{offset:"offset",sb:"vmaf"}],Xn:"tags"}],$Tb:"profileType",oZb:"stereo",profile:"profile",hAb:"dimensionsCount",iAb:"dimensionsLabel",rcc:["snippets",{$m:[r.$m,{qcc:"snippetSpec",Jb:"startTimeMs",Ob:"endTimeMs"}]}],nla:["drmHeader",{fa:"bytes",Gub:"checksum",PUa:"drmHeaderId",pj:"keyId",xI:["resolution",{height:"height",width:"width"}]}],Iu:["prkDrmHeaders",{fa:"bytes",Gub:"checksum",PUa:"drmHeaderId",pj:"keyId",xI:["resolution",{height:"height",width:"width"}]}],Tt:"flavor",R$b:"ict",maxWidth:"maxWidth",maxHeight:"maxHeight",qSb:"pixelAspectX",rSb:"pixelAspectY",yac:"maxCroppedWidth",xac:"maxCroppedHeight",zac:"maxCroppedX",Aac:"maxCroppedY",Hac:"max_framerate_value",Gac:"max_framerate_scale",minWidth:"minWidth",minHeight:"minHeight",Wac:"minCroppedWidth",Vac:"minCroppedHeight",Xac:"minCroppedX",Yac:"minCroppedY",Hg:["license",{hMb:"licenseResponseBase64",Kbc:"providerSessionToken",fcc:"secureStopExpected",S9b:"drmSessionId",links:["links",{}]}]}],S3:["cdnResponseData",{II:"sessionABTestCell",ds:"pbcid"}],Bo:["choiceMap",{Yd:"initialSegment",type:"type",W:"viewableId",qa:["segments",{$m:[r.$m,{Jb:"startTimeMs",Ob:"endTimeMs",next:["next",{$m:[r.$m,{weight:"weight"}]}],Qe:"defaultNext",hq:"exitZones"}]}]}],Ovb:["contentPlaygraph",{Ca:["playgraph",{Yd:"initialSegment",qa:["segments",{$m:[r.$m,{W:"viewableId",Jb:"startTimeMs",Ob:"endTimeMs",next:["next",{$m:[r.$m,{weight:"weight"}]}],Qe:"defaultNext"}]}]}],vcc:["startIdent",{S$b:"identToken",W:"viewableId"}]}],media:["media",{id:"id",vg:["tracks",{Wb:"AUDIO",Xm:"TEXT",Mb:"VIDEO"}]}],fY:["recommendedMedia",{VP:"videoTrackId",pn:"audioTrackId",KP:"timedTextTrackId"}],tZ:["timedtexttracks",{ml:"trackType",sg:"new_track_id",type:"type",XI:"subType",variant:"variant",oI:"rawTrackType",qD:"languageDescription",language:"language",id:"id",lD:"isNoneTrack",q7:"isForcedNarrative",MUa:["downloadableIds",{}],QRa:["cdnlist",{id:"id",name:"name",type:"type",uc:"rank",Q1a:"lowgrade",zAb:["dns",{host:"host",qKb:"ipv4",rKb:"ipv6",FDb:"forceLookup"}],key:"key"}],Bxa:["ttDownloadables",{$m:[r.$m,{id:"id",size:"size",Ecc:"textKey",G$b:"hashValue",F$b:"hashAlgo",bac:"isImage",Hra:"midxOffset",a3a:"midxSize",height:"height",width:"width",jw:["downloadUrls",{}],urls:["urls",{url:"url",Sp:"cdn_id"}]}]}],t7:"isLanguageLeftToRight",du:"headIdentDuration",uc:"rank",oi:"hydrated"}],z0b:["trickplays",{Gr:"downloadable_id",size:"size",urls:"urls",id:"id",interval:"interval",tSb:"pixelsAspectY",sSb:"pixelsAspectX",width:"width",height:"height",du:"headIdentDuration"}],Tbb:["watermarkInfo",{opacity:"opacity",id:"id",anchor:"anchor"}],R9b:"dpsid",Fl:"isBranching",adc:"viewableType",nD:"isSupplemental",avb:"clientIpAddress",Vcc:"urlExpirationDuration",sac:"manifestExpirationDuration",wcc:["steeringAdditionalInfo",{xcc:"steeringId",S8b:"additionalGroupNames",zcc:["streamingClientConfig",{}]}]}}_esm(e),e.CFa=void 0,t=i(1),n=i(0),r=i(209),a.prototype.BM=function(t){this.bCb.BM(t,this.tNb)},i=a,i=t.__decorate([n.R(),t.__param(0,n.l(r.mCa))],i),e.CFa=i},function(t,e){_esm(e),e.BTa=void 0,e.BTa=function(e,t,i,n){return{TGb:function(){var t=e.Fna();return n.du&&(t+=n.du),t},ta:t,request:i,qf:!1}}},function(t,e,i){var n,r,a,o,s;function u(t,e){var i;return(t=n.EventEmitter.call(this)||this).content="",t.entries=[],r.hb("videoSize"in e&&"xml"in e&&!!e.xml,"Subtitle options didn't contain XML data"),"videoSize"in e&&"xml"in e&&(t.content=null!==(i=e.xml)&&void 0!==i?i:"",t.cB=e.videoSize),t}_esm(e),e.LEa=void 0,n=i(17),r=i(21),a=i(14),o=i(30),s=i(1069),T(u,n.EventEmitter),u.prototype.WG=function(t){var e;if(o.Xc(t)&&o.Xc(this.duration)&&t<this.duration&&this.entries&&(e=this.tPb||this.entries[Math.floor(t*this.K_b)]||this.entries[0]),e){for(;e&&e.endTime<t;)e=e.next;for(;e&&e.previous&&e.previous.endTime>=t;)e=e.previous;this.tPb=e}return e?[e]:[]},u.prototype.iN=function(i,n){var t=[];try{t=this.entries.filter(function(t){var e=nt([t.startTime,t.endTime]);return t=e.next().value,e=e.next().value,i<=t&&t<=n||t<=i&&i<=e})}catch(t){}return t},u.prototype.Mr=function(t,e){return this.iN(t,e).reduce(function(t,e){return t+e.blocks.length},0)},u.prototype.start=function(){var t,e=this;this.content?s.e5a(this.content,this.cB.width/this.cB.height,a.config.kxa,a.config.kaa).then(function(t){e.duration=t&&Math.max.apply(Math,G(t.map(function(t){return t.endTime})))||0,e.K_b=t&&t.length/e.duration||0,e.entries=t,e.emit("ready")}).catch(function(t){e.emit("error",t)}):((t=Error("Subtitle content was empty")).errorDetails="Subtitle content was empty",this.emit("error",t))},u.prototype.pause=function(){},u.prototype.stop=function(){},u.prototype.cua=function(){throw Error("Method not implemented.")},u.prototype.Is=function(){throw Error("Method not implemented.")},u.prototype.NA=function(){throw Error("Method not implemented.")},u.prototype.wi=function(){throw Error("Method not implemented.")},u.prototype.Ai=function(){throw Error("Method not implemented.")},e.LEa=u},function(t,e,i){var o,s;_esm(e),e.e5a=void 0,o=i(1070),s=i(280),e.e5a=function(t,n,r,a){return new Promise(function(e,i){s.vya(t,function(t){t.$?o.X4a(t.object,n,r,a,function(t){t.$?e(t.entries):i(t)}):i(t)})})}},function(t,X,e){var Q,Z,$,tt,et,i,o,it,h,f,nt,rt,w,at,ot,r,_,l,p;function st(t){if(Z.Sz(t)){if("#"==(t=t.toLowerCase())[0]){if(7==t.length)return t;if(4==t.length)return"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]}return X.b5a[t]}}function ut(t,e,i){if(0<=(e=e[t])||(e=parseFloat(t)),0<=e)return et.np(e,i)}function ct(t,e){var i=t.length,n=t[i-1];if("t"===n)return parseFloat(t)*e|0;if("s"===n)return"m"===t[i-2]?0|parseFloat(t):parseFloat(t)*$.pl|0;if((t=t.match(r))&&4<=t.length)return(3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseFloat(t[3]))*$.pl|0;throw Error("dfxp-badtime")}function ht(t,e,i,n,r){var a,o,s,u,c,h,f,l=void 0;if(t)for(i=(a=t.style)?i[a]:void 0,n=(a=t.region)?n[a]:void 0,a=r.length,o=0;o<a;o++)if(void 0===(c=t[u=r[o]])&&i&&(c=i[u]),void 0===c&&n&&(c=n[u]),void 0!==c&&c!==e[u]){if(!l)for(l={},s=0;s<a;s++)void 0!==(f=e[h=r[s]])&&(l[h]=f);l[u]=c}return l||e}function ft(t,h,f,l,p,d,b,m,g){var v,y;return y=0,function t(e,i,n){var r,a,o=e[tt.Fk],s=o.style||i.style||"",u=o.region||i.region||"",c=s||u?f[r=s+"/"+u]:h;if(c||(c=h,a=Z.pP(l),Z.Zb(a,p[s]),c=E(c,a,b,m,g),f[s+"/"]=c,u&&(Z.Zb(a,d[u]),Z.Zb(a,p[s]),c=E(c,a,b,m,g),f[r]=c)),!n)t:{for(n=w.length;n--;)if(void 0!==o[w[n]]){n=!0;break t}n=void 0}for(n&&(c=E(c,o=ht(o,i,p,d,at),b,m,g)),i=(e=e[tt.bQ])&&e.length,s=0;s<i;s++)u=e[s],Z.Jh(u)?_.test(u[tt.cQ])?y++:t(u,o,n):(v.push({text:u,lineBreaks:y,style:c}),y=0)}(t,l,!(v=[])),0<y&&v.push({text:"",lineBreaks:y,style:h}),v}function lt(t,e,i,n,r,a,o,s){var u,c;i&&(i=h[i]||"top",t.verticalAlignment!==i&&(t.verticalAlignment=i)),n&&(i=f[n]||"left",t.horizontalAlignment!==i&&(t.horizontalAlignment=i)),r?((u=s[r])?(n=u.marginLeft,i=u.marginTop):(u={sm:0,marginLeft:n=b((c=r.split(" "))[0],o.x)||0,marginTop:i=b(c[1],o.y)||0,arb:n*e.soa+e.QV,crb:i*e.fya+e.Naa},s.sm<30&&(s.sm++,s[r]=u)),t.marginLeft=u.arb,t.marginTop=u.crb):(i=n=0,(u=s.default)||(s.default=u={sm:0})),a&&((r=u[a])||(r={brb:(1-(n+(b((c=a.split(" "))[0],o.x)||0)))*e.soa+e.QV,$qb:(1-(i+(b(c[1],o.y)||0)))*e.fya+e.Naa},u.sm<30&&(u.sm++,u[a]=r)),t.marginRight=r.brb,t.marginBottom=r.$qb)}function pt(t,e,i,n){var r,a,o,s,u=ut(i.characterSize||e.characterSize,X.c5a,2)||1,c=(c=t.fontSize)&&l.test(c)?Z.op(Z.He(c),25,200):void 0;return u*=c/100||1,(c=t.textOutline)&&"none"!=c&&(r=c.split(" "),o=p.test(r)?(a=0,t.color):(a=1,st(r[0])),s=d(r[a]),r=d(r[a+1])),{characterStyle:i.characterStyle||X.d5a[t.fontFamily]||e.characterStyle,characterSize:u*n,characterColor:st(i.characterColor||t.color||e.characterColor),characterOpacity:ut(Z.X3(i.characterOpacity,t.opacity,e.characterOpacity),X.v9,1),characterEdgeAttributes:i.characterEdgeAttributes||c&&("none"===c?X.$4a:r?X.Usa:X.a5a)||e.characterEdgeAttributes,characterEdgeColor:st(i.characterEdgeColor||o||e.characterEdgeColor),characterEdgeWidth:s,characterEdgeBlur:r,characterItalic:"italic"===t.fontStyle,characterUnderline:"underline"===t.textDecoration,backgroundColor:st(i.backgroundColor||t.backgroundColor||e.backgroundColor),backgroundOpacity:ut(Z.X3(i.backgroundOpacity,t.opacity,e.backgroundOpacity),X.v9,1)}}function E(i,t,e,n,r){var a;return t=pt(t,e,n,r),o.te(t,function(t,e){e!==i[t]&&((a=a||et.dF(i))[t]=e)}),a||i}function d(t){return t=Z.He(t),i.Rz(t,0,100)?t:0}function b(t,e){var i=t[t.length-1];return"%"===i?Z.op(.01*parseFloat(t),0,1):"c"===i?Z.op(Z.He(t)/e,0,1):void 0}function dt(i){o.te(i,function(t,e){0<=t.toLowerCase().indexOf("color")&&(i[t]=st(e))})}_esm(X),X.Z4a=X.Y4a=X.Usa=X.a5a=X.JRb=X.KRb=X.$4a=X.b5a=X.v9=X.c5a=X.d5a=X.X4a=void 0,Q=e(21),Z=e(30),$=e(12),tt=e(158),et=e(11),i=e(19),o=e(24),X.X4a=(it=1,h={before:"top",center:"center",after:"bottom"},f={left:"left",start:"left",center:"center",right:"right",end:"right"},nt={id:it++,verticalAlignment:"bottom",horizontalAlignment:"center",marginTop:.1,marginLeft:.1,marginRight:.1,marginBottom:.1},rt={id:it++,verticalAlignment:"top",horizontalAlignment:"left",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0},w="fontFamily fontSize fontStyle textDecoration color opacity backgroundColor textOutline".split(" "),at=w.concat(["style","region"]),ot=["region","textAlign","displayAlign","extent","origin"],r=/^([0-9]+):([0-9]+):([0-9.]+)$/,_=/^br$/i,l=/^[0-9]{1,3}%$/,p=/^[0-9]/,function(t,e,i,n,r){var a,m,g,o,v,y,w,s,_,E,k,S,T,A,u,c,O,I,x,P,R,N,j,C,h,f,l,p,d,b,L,M,D,U,B,F,q,H,K,V,G,J;function z(){var s,u,t,e,i,n,r;function a(t,e){for(var i,n,r=[],a={},o=u.length;o--;)a[n=(i=u[o]).region.id]||(a[n]=1,r.unshift(i));(i=s[s.length-1])&&i.endTime==t&&Z.Bt(i.blocks,r)?i.endTime=e:s.push({id:it++,startTime:t,endTime:e,blocks:r})}try{if(!I.length)return void Y({$:!0,entries:[]});for(Z.AQa(I,"startTime"),s=[],u=[],t=I[0],e=I[0].startTime,i=1;u.length||t;){for(;!u.length||t&&t.startTime==e;)u.push(t),e=t.startTime,t=I[i++];if(r=function(t){for(var e=t.length,i=t[--e].endTime;e--;)i=et.np(t[e].endTime,i);return i}(u),!t||r<=t.startTime)for(a(e,r),e=r,n=u.length;n--;)u[n].endTime<=e&&u.splice(n,1);else a(e,t.startTime),e=t.startTime,u.push(t),t=I[i++]}for(i=s.length;i--;)s[i].index=i,s[i].previous=s[i-1],s[i].next=s[i+1]}catch(t){return void Y({na:Z.L.d0,ub:Z.wd(t)})}Y({$:!0,entries:s})}function Y(t){setTimeout(function(){a.abort=Z.ql,r(t)},1)}a={abort:function(){C&&clearTimeout(C)}};try{if(U=t[tt.Fk],m=$.pl/(Z.He(U.tickRate)||1),H=e,G=(q=U).pixelAspectRatio,J={QV:0,soa:1,Naa:0,fya:1},2<=(q=(q.extent||"640px 480px").split(" ")).length&&(G=(G||"").split(" "),K=parseFloat(q[0])*(parseFloat(G[0])||1),V=parseFloat(q[1])*(parseFloat(G[1])||1)),G=(K=0<K&&0<V?K/V:1280/720)/(H=H||1280/720),.01<et.SE(H-K)&&(K<=H?(J.QV=(1-G)/2,J.soa=G):Q.hb(!1,"not implemented")),g=J,o=Z.Zb(rt,{marginLeft:g.QV,marginTop:g.Naa,marginRight:g.QV,marginBottom:g.Naa}),v={},y={},w={},K=t.head,H=t.body,_=(J=(G=U).cellResolution)&&(2<=(J=J.split(" ")).length&&(D=Z.He(J[0]),J=Z.He(J[1]),0<D&&0<J))?{x:D,y:J}:(J=G.extent)&&2<=(J=J.split(" ")).length&&(D=Z.He(J[0]),U=Z.He(J[1]),(G=G.pixelAspectRatio)&&(J=G.split(" "),B=Z.He(J[0]),F=Z.He(J[1])),D&&U&&1.5<D*(B||1)/(U*(F||1)))?X.Z4a:X.Y4a,E=1/_.y*g.fya,k=Z.Zb({characterStyle:"PROPORTIONAL_SANS_SERIF",characterColor:"#EBEB64",characterEdgeAttributes:X.Usa,characterEdgeColor:"#000000",characterSize:1},i,{pA:!0}),S=n||{},T={sm:0},K){if(c=K.styling)for(s=c.style;s;)dt(A=s[tt.Fk]),v[A.id]=A,s=s[tt.uE];if(c=K.layout)for(var W=c.region;W;){for(h=(A=W[tt.Fk]).id,u=Z.pP(v[A.style]),u=Z.Zb(u,A),s=W.style;s;)Z.Zb(u,s[tt.Fk]),s=s[tt.uE];dt(u),y[h]=u,w[h]=(f=g,l=o,p=_,d=T,M=L=b=void 0,b=(h=u).displayAlign,L=h.textAlign,M=h.origin,h=h.extent,lt(l=Z.pP(l),f,b,L,M,h,p,d),l.id=it++,l),W=W[tt.uE]}}c=H.div,O=c.p,I=[],x={},x=ht(H[tt.Fk],x,v,y,at),x=ht(c[tt.Fk],x,v,y,at),P={},P=ht(H[tt.Fk],P,v,y,ot),P=ht(c[tt.Fk],P,v,y,ot),R=pt(x,k,S,E),Z.Zb(R,{windowColor:st(S.windowColor||k.windowColor),windowOpacity:ut(Z.X3(S.windowOpacity,k.windowOpacity),X.v9,1),cellResolution:_},{pA:!0}),N={},c.p=void 0,c[tt.bQ]=[]}catch(t){return void Y({na:Z.L.d0,ub:Z.wd(t)})}return j=et.HJ(),C=setTimeout(function t(){var e,i,n,r,a,o,s,u,c,h,f,l,p,d,b;try{for(;O;)if(A=O[tt.Fk],i=(e=I).push,n=it++,r=ct(A.begin,m),a=ct(A.end,m),o=void 0,s=w,u=g,c=_,h=T,b=O[tt.Fk],f=(d=ht(O[tt.Fk],P,v,y,ot)).region,l=b.displayAlign,p=d.textAlign,d=b.origin,b=b.extent,f||l||p||d||b?((o=s[f])?o=et.dF(o):l||d||b?(o=et.dF(rt)).id=it++:o=et.dF(nt),lt(o,u,l,p,d,b,c,h)):o=nt,i.call(e,{id:n,startTime:r,endTime:a,region:o,textNodes:ft(O,R,N,x,v,y,k,S,E)}),O=O[tt.uE],100<et.HJ()-j)return j=Date.now(),void(C=setTimeout(t,1))}catch(t){return void Y({na:Z.L.d0,ub:Z.wd(t)})}C=setTimeout(z,1)},1),a}),X.d5a={default:"PROPORTIONAL_SANS_SERIF",monospaceSansSerif:"MONOSPACED_SANS_SERIF",monospaceSerif:"MONOSPACED_SERIF",proportionalSansSerif:"PROPORTIONAL_SANS_SERIF",proportionalSerif:"PROPORTIONAL_SERIF",casual:"CASUAL",cursive:"CURSIVE",smallCapitals:"SMALL_CAPITALS",monospace:"MONOSPACED_SANS_SERIF",sansSerif:"PROPORTIONAL_SANS_SERIF",serif:"PROPORTIONAL_SERIF"},X.c5a={SMALL:.5,MEDIUM:1,LARGE:2},X.v9={NONE:0,SEMI_TRANSPARENT:.5,OPAQUE:1},X.b5a={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",magenta:"#ff00ff",green:"#00ff00",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",cyan:"#00ffff",orange:"#ffa500",pink:"#ffc0cb"},X.$4a="NONE",X.KRb="RAISED",X.JRb="DEPRESED",X.a5a="UNIFORM",X.Usa="DROP_SHADOW",X.Y4a={x:40,y:19},X.Z4a={x:52,y:19}},function(t,e,i){var u,r,a,o,s;function n(t,i){var e,n=s.call(this)||this;if(n.Xj=!0,n.HS=[],n.Nv=0,e=t.qf||!1,n.Ja=t.ta||console,n.NF=t.request,n.hy=t.TGb,n.Tg=null,n.Xj=!0,n.HS=[],n.XS=i.profile,n.vl=i.url,n.KF=i.Ed,n.WS=i.preferences,n.sS=i.oj,n.Nv=n.KF||0,t={url:n.vl,request:n.NF,Ed:n.KF,xml:i.xml,preferences:n.WS,oj:n.sS,ta:n.Ja,qf:e,bufferSize:i.bufferSize,tu:i.tu,aua:i.aua||0,sRa:i.sRa},"nflx-cmisc"===n.XS)t.offset=i.Hra,t.size=i.a3a,t.y$=i.y$,t.cVa=i.cVa,n.kd=new a(t);else{if(!(-1<["simplesdh","dfxp-ls-sdh"].indexOf(n.XS)&&"function"==typeof r))throw Error("SubtitleManager: "+n.XS+" is an unsupported profile");n.kd=new r(t)}return n.kd.on("ready",function(){var t,e=!!i.XQa;n.Ja.info("ready event fired by subtitle stream"),n.emit("ready"),t=n.kd.WG.bind(n.kd),n.Tg=new o(n.hy,t,function(){return n.Xj},n.Ja,i),"dfxp-ls-sdh"===n.XS&&"function"==typeof r&&n.Tg.on("stagesubtitle",n.bZb.bind(n)),n.Tg.on("showsubtitle",n.lwa.bind(n)),n.Tg.on("removesubtitle",n.Lua.bind(n)),n.Tg.on("underflow",n.Zn.bind(n)),n.Tg.on("bufferingComplete",n.Pe.bind(n)),e&&(n.Ja.info("autostarting subtitles"),setTimeout(function(){n.Is(n.hy())},10))}),n.kd.on("error",n.emit.bind(n,"error")),n}_esm(e),e.ikb=void 0,u=i(1),t=i(114),r=i(1072),a=i(1077),o=i(1084),s=t.EventEmitter,u.__extends(n,s),n.prototype.start=function(){this.kd.start()},n.prototype.cua=function(){this.Xj||(this.Xj=!0,this.tVa(this.Nv))},n.prototype.Is=function(t){!this.Xj&&1e4<Math.abs(t-this.Nv)&&(this.Ja.warn("Detected an unexpected pts jump larger than",1e4,"at",t,". If this is a seamless segment transition then the ptsShift API","should have been called before the pts change was reflected."),this.cua()),this.Nv=t,this.Xj&&(this.Xj=!1,this.dZb(t)),null!==this.Tg&&(this.c1b(t),this.Tg.Is(t))},n.prototype.stop=function(){var t;return this.Ja.info("stop called"),this.Xj||this.pause(),this.kd.removeAllListeners(["ready"]),null!==this.Tg&&this.Tg.stop(),t=this.HS.reduce(function(t,e){return t.s9a+=e.QY,t.h5+=e.i5||0,t.lKb.push(e),t},{s9a:0,h5:0,lKb:[]}),"object"==typeof this.kd&&this.kd.close(),this.Ja.info("metrics: "+JSON.stringify(t)),t},n.prototype.pause=function(){var t=this.hy();this.Xj?this.Ja.warn("pause called on subtitle manager, but it was already paused!"):(this.Ja.info("pause called at "+t),this.Xj=!0,this.tVa(t)),null!==this.Tg&&this.Tg.pause()},n.prototype.iN=function(t,e){return"function"==typeof this.kd.iN?this.kd.iN(t,e):[]},n.prototype.Mr=function(t,e){return this.kd.Mr(t,e)},n.prototype.WG=function(t){return this.kd.WG(t)},n.prototype.NA=function(t){var e;function i(){e.Ja.info("bufferingComplete from setStreamStartPosition"),e.emit("bufferingComplete")}"function"==typeof(e=this).kd.NA?this.kd.NA(t,i):i()},n.prototype.wi=function(t,e){"function"==typeof this.kd.wi&&this.kd.wi(t,e)},n.prototype.Ai=function(t,e){"function"==typeof this.kd.Ai&&this.kd.Ai(t,e)},n.prototype.bna=function(){return this.HS[this.HS.length-1]},n.prototype.lwa=function(t){var e,i,n,r=0;if(this.Ja.info("show subtitle called at "+this.hy()+" for displayTime "+t.displayTime),this.emit("showsubtitle",t),(i=this.bna()).qP||(i.qP={}),"dfxp-ls-sdh"===this.XS)try{for(var a=u.__values(t.blocks),o=a.next();!o.done;o=a.next())n=o.value,i.qP[n.id]||(r++,i.qP[n.id]=!0)}catch(t){var s={error:t}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(s)throw s.error}}else i.qP[t.id]||(r++,i.qP[t.id]=!0);i.QY+=r},n.prototype.Lua=function(t){this.Ja.info("remove subtitle called at "+this.hy()+" for remove time "+(t.displayTime+t.duration)),this.emit("removesubtitle",t)},n.prototype.bZb=function(t){this.Ja.info("stage subtitle called at "+this.hy()+" for displayTime "+t.displayTime),this.emit("stagesubtitle",t)},n.prototype.Zn=function(){this.Ja.info("underflow fired by the subtitle timer"),this.emit("underflow")},n.prototype.Pe=function(){this.Ja.info("bufferingComplete fired by the subtitle timer"),this.emit("bufferingComplete")},n.prototype.dZb=function(t){this.Ja.info("creating a new subtitle interval at "+t),this.HS.push({Z:t,QY:0})},n.prototype.c1b=function(t){var e=this.bna();e&&(e.hqa=t)},n.prototype.tVa=function(t){var e;this.Ja.info("ending subtitle interval at "+t),(e=this.bna())&&(e.Ha=t,e.Ha<e.Z&&(this.Ja.warn("correcting for interval where endPts is smaller than startPts"),e.Z=0<e.Ha?e.Ha-1:0),e.i5=this.kd.Mr(e.Z,e.Ha),delete e.qP,e.i5>e.QY&&e.hqa&&e.Ha-e.hqa<500&&(e.i5=this.kd.Mr(e.Z,e.hqa)),this.Ja.info("showed "+e.QY+" during this interval"),this.Ja.info("expected "+e.i5+" for this interval"))},i=n,e.ikb=i,e.default=i},function(t,e,i){var o,h,f,a,s,l,p,d,u;function n(t){var e=t.preferences,i=t.oj,n=t.Ed,r=t.xml,a=t.ta;if(!t.xml&&!t.request)throw Error("FullTextStream requires either a 'request' function or the 'xml' data");o.call(this),this.Me=this.dga=null,this.WS="object"==typeof e?t.preferences:{},this.sS="object"==typeof i?t.oj:{},this.eC="number"==typeof n?t.Ed:0,this.YF="string"==typeof r?t.xml:"",this.Ja="object"==typeof a?t.ta:u,this.NF=t.request,this.vl=t.url,this.KB=[],this.Nv=this.eC,this.Tg=null,this.Oga=this.COa=!1,this.elb=t.aua||0}function r(t,e){return t&&"object"==typeof t[e]&&null!==t[e]?t[e]:{}}function c(t,e){return!(t===e||t&&0===Object.keys(t).length&&e&&0===Object.keys(e).length)}function b(){var i,e,n,r,a,o,s,u,c=this,t=c.YF.indexOf("<p");-1<t?(i=c.YF.slice(0,t),e=i,n=function(t,e){null!==t?(t.L$b=i,c.emit("error",t)):(c.dga=e,c.Me=new f(c.YF,e.tickRate),m.call(c,c.eC))},r=h.tc(!0),a={},o=[],s=null,u=[],r.onerror=function(t){n(t,null)},r.onend=function(){n(null,a)},r.onclosetag=function(){o.pop()},r.onopentag=function(t){var e=t.attributes,i=t.name,n=a.regions,r=a.styles;o.push(t),"tt"===i?a=function(t){var e;"string"==typeof(t=g(t,p)).extent?(e=t.extent.split(" ").map(function(t){return parseInt(t,10)}),t.width=e[0],t.height=e[1]):(t.width=1280,t.height=720);return t.aspectRatio=t.width/t.height,"string"==typeof t.cellResolution?(e=t.cellResolution.split(" ").map(function(t){return parseInt(t,10)}),t.cellResolution={},t.cellResolution.x=e[0],t.cellResolution.y=e[1]):t.cellResolution={x:52,y:19},t}(e):"body"===i?void 0!==e.style&&(a.defaultStyle=e.style,u.push(e.style)):"style"===i&&v(o,"styling")?r[e["xml:id"]]=g(e,l):"style"===i&&v(o,"region")?"string"==typeof(t=Object.keys(e)[0])&&(n[s][t.slice(4)]=e[t]):"region"===i&&v(o,"layout")&&(n[s=e["xml:id"]]=g(e,d))},setTimeout(function(){var t;for(r.write(e);0<o.length&&!r.error;)t=y(o).name,r.write("</"+t+">");r.close()},10)):c.emit("error",Error("paragraph tag not found when searching for '<p'; could not build index"))}function m(t){var e,i,n=this,o=n.dga,s=0,u=[],c=o.defaultStyle?[o.defaultStyle]:[];n.Ja.info("parsing the next 5 entries..."),e=n.Me.uGb(t),n.Ja.info(e),(i=h.tc(!0)).onerror=function(t){t.xml=e,n.emit("error",t)},i.onend=function(){var i=n.KB.reduce(function(t,e){return e=e.blocks.reduce(function(t,e){return t.concat([e.id])},[]),t.concat(e)},[]);u.forEach(function(t){var e;-1===i.indexOf(t.id)&&(e=t&&t.blocks&&t.blocks.filter(function(t){return 0<t.textNodes.length}))&&0<e.length&&(t.blocks=e,n.KB.push(t))}),n.Oga=!1,n.COa||(n.COa=!0,n.emit("ready"))},i.ontext=function(t){""===t.trim()&&!t.match(/ +/)||y(y(u).blocks).textNodes.push({text:t.match(/ +/)?t:t.trim(),style:y(c),lineBreaks:s}),s=0},i.onclosetag=function(){void 0!==i.tag.attributes.style&&c.pop()},i.onopentag=function(t){var e,i,n,r=t.attributes,a=t.name;t=o.tickRate,"p"===a?(s=0,a=r["xml:id"],r.style&&c.push(r.style),e=Math.floor(parseInt(r.begin)/t*1e3),0===u.length||y(u).displayTime!==e?(e=u.push,i={},n=parseInt(r.begin)/t,t=parseInt(r.end)/t,i.id=a,i.startTime=Math.floor(1e3*n),i.endTime=Math.floor(1e3*t),i.style=r.style,i.region=r.region,i.displayTime=i.startTime,i.duration=i.endTime-i.startTime,i.extent=r["tts:extent"]||null,i.origin=r["tts:origin"]||null,i.latestEndSoFar=i.endTime<0?0:i.endTime,i.blocks=[{textNodes:[],region:i.region,id:a,extent:i.extent,origin:i.origin}],e.call(u,i)):y(u).blocks.push({textNodes:[],region:r.region,id:a,extent:r["tts:extent"]||null,origin:r["tts:origin"]||null})):"span"===a?c.push(r.style):"br"===a&&s++},i.write("<entries>").write(e).write("</entries>").close()}function g(e,t){var i={};return t.forEach(function(t){void 0!==e["tts:"+t]?i[t]=e["tts:"+t]:void 0!==e["ttp:"+t]&&(i[t]=e["ttp:"+t])}),i.styles={},i.regions={},i}function v(t,e){for(var i=t.length-1;0<=i;i--)if(t[i].name===e)return 1}function y(t){if(!Array.isArray(t))throw Error("last called on non-array: "+t);return t[t.length-1]}function w(i,t){var n=this,r=i.styles||{};return{startTime:t.startTime,id:t.id,endTime:t.endTime,displayTime:t.displayTime,duration:t.duration,blocks:t.blocks.map(function(t){var e=a.vyb(i,t);return{textNodes:t.textNodes.map(function(t,e){return{lineBreaks:e.lineBreaks,text:e.text,style:s.Ayb(t[e.style]||{},this.sS,this.WS),id:e.id}}.bind(n,r)),region:e,id:t.id}})}}o=i(114).EventEmitter,h=i(1073),f=i(1074),a=i(1075),s=i(1076),l="color fontSize fontWeight fontStyle textAlign fontFamily backgroundColor textDecoration textOutline".split(" "),p=["cellResolution","pixelAspectRatio","tickRate","timeBase","extent"],d=["backgroundColor","displayAlign","extent","origin"],u={info:function(){}},e=Object.create(o.prototype),(n.prototype=e).start=function(){var i=this;i.Ja.info("incremental text stream created, starting at pts "+i.eC),i.YF?b.call(i):i.NF({url:i.vl},function(t,e){i.YF=e,b.call(i)})},e.WG=function(t){var e,i,n,r,a,o=this;for(t<o.Nv-o.elb&&(o.KB=[]),e=o.KB,i=0<e.length?e[e.length-1].startTime:t,o.Nv=t,!o.Tg&&o.KB.length<5&&!o.Oga&&(o.Ja.info("buffer size: "+o.KB.length+"; minimum: 5"),o.Oga=!0,o.Tg=setTimeout(function(){o.Tg=null,m.call(o,i+1)},10));0<e.length&&e[0].endTime<t;)e.shift();return r=t,a=(n=e).filter(function(t){return t.startTime<=r&&r<=t.endTime}),e=(0<(n=n.filter(function(t){return t.startTime>r})).length?a.concat([n[0]]):a).map(w.bind(o,o.dga)),t<o.Me.$Cb()&&0===e.length&&(e=null),e},e.Mr=function(t,e){return this.Me?this.Me.Mr(t,e):0},e.close=function(){},e.Ucc=function(t){var e=r(t,"preferences");return t=r(t,"defaults"),!(!c(e,this.WS)&&!c(t,this.sS))&&(this.WS=e,this.sS=t,!0)},t.exports=n},function(t,e){!function(h){var f,n,l,p,d,b,m,g,r,a,o,v,y,w,s,u;function c(){}function _(t,e){if(!(this instanceof _))return new _(t,e);for(var i=0,n=f.length;i<n;i++)this[f[i]]="";this.q=this.c=this.vn=this.textNode="",this.oRa=h.dda,this.Pn=e||{},this.Pn.O1a=this.Pn.O1a||this.Pn.lac,this.Lqa=this.Pn.O1a?"toLowerCase":"toUpperCase",this.Xn=[],this.closed=this.cU=this.aP=!1,this.tag=this.error=null,this.$u=!!t,this.S3a=!(!t&&!this.Pn.S3a),this.state=w.Bba,this.Ax=(this.f$a=this.Pn.f$a)?Object.create(h.Fkb):Object.create(h.Ax),this.nC=[],this.Pn.f_&&(this.qk=Object.create(o)),(this.saa=!1!==this.Pn.position)&&(this.position=this.line=this.dU=0),this.onready&&this.onready(void 0)}function E(t,e){var i;if(!(this instanceof E))return new E(t,e);c.apply(this),this.ly=new _(t,e),this.readable=this.writable=!0,(i=this).ly.onend=function(){i.emit("end")},this.ly.onerror=function(t){i.emit("error",t),i.ly.error=null},n.forEach(function(e){Object.defineProperty(i,"on"+e,{get:function(){return i.ly["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i.ly["on"+e]=t;i.on(e,t)},enumerable:!0,configurable:!1})})}function t(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function k(t,e){return"[object RegExp]"===Object.prototype.toString.call(t)?e.match(t):t[e]}function S(t,e,i){t.textNode&&T(t),t[e]&&t[e](i)}function T(t){t.textNode=A(t.Pn,t.textNode),t.textNode&&t.ontext&&t.ontext(t.textNode),t.textNode=""}function A(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function O(t,e){return T(t),t.saa&&(e+="\nLine: "+t.line+"\nColumn: "+t.dU+"\nChar: "+t.c),e=Error(e),t.error=e,t.onerror&&t.onerror(e),t}function I(t){return t.aP&&!t.cU&&x(t,"Unclosed root tag"),t.state!==w.Bba&&t.state!==w.Cba&&t.state!==w.Xm&&O(t,"Unexpected end"),T(t),t.c="",t.closed=!0,t.onend&&t.onend(void 0),_.call(t,t.$u,t.Pn),t}function x(t,e){if("object"!=typeof t||!(t instanceof _))throw Error("bad call to strictFail");t.$u&&O(t,e)}function P(t,e){var i=t.indexOf(":")<0?["",t]:t.split(":"),n=i[0];return i=i[1],e&&"xmlns"===t&&(n="xmlns",i=""),{prefix:n,local:i}}function R(t){var e,i,n;if(t.$u||(t.ij=t.ij[t.Lqa]()),-1!==t.nC.indexOf(t.ij)||t.tag.attributes.hasOwnProperty(t.ij))return t.ij=t.jj="";t.Pn.f_?(i=(e=P(t.ij,!0)).local,"xmlns"===e.prefix&&("xml"===i&&t.jj!==r?x(t,"xml: prefix must be bound to "+r+"\nActual: "+t.jj):"xmlns"===i&&t.jj!==a?x(t,"xmlns: prefix must be bound to "+a+"\nActual: "+t.jj):(e=t.tag,n=t.Xn[t.Xn.length-1]||t,e.qk===n.qk&&(e.qk=Object.create(n.qk)),e.qk[i]=t.jj)),t.nC.push([t.ij,t.jj])):(t.tag.attributes[t.ij]=t.jj,S(t,"onattribute",{name:t.ij,value:t.jj})),t.ij=t.jj=""}function N(e,t){var i,n,r,a,o,s,u;if(e.Pn.f_){i=e.tag,n=P(e.tagName),i.prefix=n.prefix,i.local=n.local,i.uri=i.qk[n.prefix]||"",i.prefix&&!i.uri&&(x(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),i.uri=n.prefix),n=e.Xn[e.Xn.length-1]||e,i.qk&&n.qk!==i.qk&&Object.keys(i.qk).forEach(function(t){S(e,"onopennamespace",{prefix:t,uri:i.qk[t]})}),n=0;for(var c=e.nC.length;n<c;n++)a=(r=e.nC[n])[0],o=r[1],u=""!=(r=(s=P(a,!0)).prefix)&&i.qk[r]||"",o={name:a,value:o,prefix:r,local:s.local,uri:u},r&&"xmlns"!=r&&!u&&(x(e,"Unbound namespace prefix: "+JSON.stringify(r)),o.uri=r),e.tag.attributes[a]=o,S(e,"onattribute",o);e.nC.length=0}e.tag.fac=!!t,e.aP=!0,e.Xn.push(e.tag),S(e,"onopentag",e.tag),t||(e.state=e.S3a||"script"!==e.tagName.toLowerCase()?w.Xm:w.kK,e.tag=null,e.tagName=""),e.ij=e.jj="",e.nC.length=0}function j(e){var t,i,n;if(e.tagName){if(e.Ak){if("script"!==e.tagName)return e.Ak+="</"+e.tagName+">",e.tagName="",void(e.state=w.kK);S(e,"onscript",e.Ak),e.Ak=""}t=e.Xn.length,i=e.tagName,e.$u||(i=i[e.Lqa]());for(var r=i;t--&&e.Xn[t].name!==r;)x(e,"Unexpected close tag");if(t<0)x(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">";else{for(e.tagName=i,i=e.Xn.length;i-- >t;){n=e.tag=e.Xn.pop(),e.tagName=e.tag.name,S(e,"onclosetag",e.tagName),n.qk;r=e.Xn[e.Xn.length-1]||e,e.Pn.f_&&n.qk!==r.qk&&Object.keys(n.qk).forEach(function(t){S(e,"onclosenamespace",{prefix:t,uri:n.qk[t]})})}0===t&&(e.cU=!0),e.tagName=e.jj=e.ij="",e.nC.length=0}}else x(e,"Weird empty close tag."),e.textNode+="</>";e.state=w.Xm}for(w in h.tc=function(t,e){return new _(t,e)},h.x7b=_,h.y7b=E,h.yTa=function(t){return new E(t,void 0)},h.dda=65536,f="comment sgmlDecl textNode tagName doctype procInstName procInstBody entity attribName attribValue cdata script".split(" "),h.Le="text processinginstruction sgmldeclaration doctype comment attribute opentag closetag opencdata cdata closecdata error end ready script opennamespace closenamespace".split(" "),Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(e);return i}),_.prototype={end:function(){I(this)},write:function(t){var e,i,n,r,a,o;if(this.closed)return O(this,"Cannot write after close. Assign an onready handler.");if(null===t)return I(this);if(this.error)throw this.error;for(var s,u=0;this.c=s=t.charAt(u++);)switch(this.saa&&(this.position++,"\n"===s?(this.line++,this.dU=0):this.dU++),this.state){case w.Bba:if(this.state=w.Cba,"\ufeff"===s)continue;case w.Cba:"<"===s?(this.state=w.yda,this.Ewa=this.position):k(l,s)||(x(this,"Non-whitespace before first tag."),this.textNode=s,this.state=w.Xm);continue;case w.Xm:if(this.aP&&!this.cU){for(var c=u-1;s&&"<"!==s&&"&"!==s;)(s=t.charAt(u++))&&this.saa&&(this.position++,"\n"===s?(this.line++,this.dU=0):this.dU++);this.textNode+=t.substring(c,u-1)}"<"!==s||this.aP&&this.cU&&!this.$u?(k(l,s)||this.aP&&!this.cU||x(this,"Text data outside of root node."),"&"===s?this.state=w.Oea:this.textNode+=s):(this.state=w.yda,this.Ewa=this.position);continue;case w.kK:"<"===s?this.state=w.WJa:this.Ak+=s;continue;case w.WJa:"/"===s?this.state=w.Kba:(this.Ak+="<"+s,this.state=w.kK);continue;case w.yda:"!"===s?(this.state=w.zea,this.ys=""):k(l,s)||(k(v,s)?(this.state=w.QGa,this.tagName=s):"/"===s?(this.state=w.Kba,this.tagName=""):"?"===s?(this.state=w.mHa,this.U9=this.nI=""):(x(this,"Unencoded <"),this.Ewa+1<this.position&&(s=Array(this.position-this.Ewa).join(" ")+s),this.textNode+="<"+s,this.state=w.Xm));continue;case w.zea:(this.ys+s).toUpperCase()===m?(S(this,"onopencdata"),this.state=w.z_,this.hm=this.ys=""):"--"===this.ys+s?(this.state=w.B_,this.ys=this.km=""):(this.ys+s).toUpperCase()===g?(this.state=w.H_,(this.doctype||this.aP)&&x(this,"Inappropriately located doctype declaration"),this.ys=this.doctype=""):">"===s?(S(this,"onsgmldeclaration",this.ys),this.ys="",this.state=w.Xm):(k(p,s)&&(this.state=w.ZJa),this.ys+=s);continue;case w.ZJa:s===this.q&&(this.state=w.zea,this.q=""),this.ys+=s;continue;case w.H_:">"===s?(this.state=w.Xm,S(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=s,"["===s?this.state=w.Vba:k(p,s)&&(this.state=w.WAa,this.q=s));continue;case w.WAa:this.doctype+=s,s===this.q&&(this.q="",this.state=w.H_);continue;case w.Vba:this.doctype+=s,"]"===s?this.state=w.H_:k(p,s)&&(this.state=w.VAa,this.q=s);continue;case w.VAa:this.doctype+=s,s===this.q&&(this.state=w.Vba,this.q="");continue;case w.B_:"-"===s?this.state=w.Uza:this.km+=s;continue;case w.Uza:"-"===s?(this.state=w.Tza,(this.km=A(this.Pn,this.km))&&S(this,"oncomment",this.km),this.km=""):(this.km+="-"+s,this.state=w.B_);continue;case w.Tza:">"!==s?(x(this,"Malformed comment"),this.km+="--"+s,this.state=w.B_):this.state=w.Xm;continue;case w.z_:"]"===s?this.state=w.Nza:this.hm+=s;continue;case w.Nza:"]"===s?this.state=w.Oza:(this.hm+="]"+s,this.state=w.z_);continue;case w.Oza:">"===s?(this.hm&&S(this,"oncdata",this.hm),S(this,"onclosecdata"),this.hm="",this.state=w.Xm):"]"===s?this.hm+="]":(this.hm+="]]"+s,this.state=w.z_);continue;case w.mHa:"?"===s?this.state=w.Kda:k(l,s)?this.state=w.Jda:this.U9+=s;continue;case w.Jda:if(!this.nI&&k(l,s))continue;"?"===s?this.state=w.Kda:this.nI+=s;continue;case w.Kda:">"===s?(S(this,"onprocessinginstruction",{name:this.U9,body:this.nI}),this.U9=this.nI="",this.state=w.Xm):(this.nI+="?"+s,this.state=w.Jda);continue;case w.QGa:k(y,s)?this.tagName+=s:(this.$u||(this.tagName=this.tagName[this.Lqa]()),c=this.Xn[this.Xn.length-1]||this,e=this.tag={name:this.tagName,attributes:{}},this.Pn.f_&&(e.qk=c.qk),this.nC.length=0,">"===s?N(this):"/"===s?this.state=w.N0:(k(l,s)||x(this,"Invalid character in tag name"),this.state=w.yJ));continue;case w.N0:">"===s?(N(this,!0),j(this)):(x(this,"Forward-slash in opening tag not followed by >"),this.state=w.yJ);continue;case w.yJ:if(k(l,s))continue;">"===s?N(this):"/"===s?this.state=w.N0:k(v,s)?(this.ij=s,this.jj="",this.state=w.k_):x(this,"Invalid attribute name");continue;case w.k_:"="===s?this.state=w.gba:">"===s?(x(this,"Attribute without value"),this.jj=this.ij,R(this),N(this)):k(l,s)?this.state=w.xya:k(y,s)?this.ij+=s:x(this,"Invalid attribute name");continue;case w.xya:if("="===s)this.state=w.gba;else{if(k(l,s))continue;x(this,"Attribute without value"),this.jj=this.tag.attributes[this.ij]="",S(this,"onattribute",{name:this.ij,value:""}),this.ij="",">"===s?N(this):k(v,s)?(this.ij=s,this.state=w.k_):(x(this,"Invalid attribute name"),this.state=w.yJ)}continue;case w.gba:if(k(l,s))continue;k(p,s)?(this.q=s,this.state=w.jba):(x(this,"Unquoted attribute value"),this.state=w.kba,this.jj=s);continue;case w.jba:if(s!==this.q){"&"===s?this.state=w.hba:this.jj+=s;continue}R(this),this.q="",this.state=w.yya;continue;case w.yya:k(l,s)?this.state=w.yJ:">"===s?N(this):"/"===s?this.state=w.N0:k(v,s)?(x(this,"No whitespace between attributes"),this.ij=s,this.jj="",this.state=w.k_):x(this,"Invalid attribute name");continue;case w.kba:if(!k(b,s)){"&"===s?this.state=w.iba:this.jj+=s;continue}R(this),">"===s?N(this):this.state=w.yJ;continue;case w.Kba:if(this.tagName)">"===s?j(this):k(y,s)?this.tagName+=s:this.Ak?(this.Ak+="</"+this.tagName,this.tagName="",this.state=w.kK):(k(l,s)||x(this,"Invalid tagname in closing tag"),this.state=w.Rza);else{if(k(l,s))continue;k(v,s)?this.tagName=s:this.Ak?(this.Ak+="</"+s,this.state=w.kK):x(this,"Invalid tagname in closing tag.")}continue;case w.Rza:if(k(l,s))continue;">"===s?j(this):x(this,"Invalid characters in closing tag");continue;case w.Oea:case w.hba:case w.iba:switch(this.state){case w.Oea:i=w.Xm,n="textNode";break;case w.hba:i=w.jba,n="attribValue";break;case w.iba:i=w.kba,n="attribValue"}";"===s?(c=this[s=n],r=(e=this.vn).toLowerCase(),a="",e=this.Ax[e]||this.Ax[r]||("#"===(e=r).charAt(0)&&(a="x"===e.charAt(1)?(e=e.slice(2),(o=parseInt(e,16)).toString(16)):(e=e.slice(1),(o=parseInt(e,10)).toString(10))),e=e.replace(/^0+/,""),a.toLowerCase()!==e?(x(this,"Invalid character entity"),"&"+this.vn+";"):String.fromCodePoint(o)),this[s]=c+e,this.vn="",this.state=i):k(d,s)?this.vn+=s:(x(this,"Invalid character entity"),this[n]+="&"+this.vn+s,this.vn="",this.state=i);continue;default:throw Error(this,"Unknown state: "+this.state)}if(this.position>=this.oRa){for(t=Math.max(h.dda,10),s=u=0,i=f.length;s<i;s++){if(t<(n=this[f[s]].length))switch(f[s]){case"textNode":T(this);break;case"cdata":S(this,"oncdata",this.hm),this.hm="";break;case"script":S(this,"onscript",this.Ak),this.Ak="";break;default:O(this,"Max buffer length exceeded: "+f[s])}u=Math.max(u,n)}this.oRa=h.dda-u+this.position}return this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){T(this),""!==this.hm&&(S(this,"oncdata",this.hm),this.hm=""),""!==this.Ak&&(S(this,"onscript",this.Ak),this.Ak="")}},n=h.Le.filter(function(t){return"error"!==t&&"end"!==t}),(E.prototype=Object.create(c.prototype,{constructor:{value:E}})).write=function(t){return this.ly.write(t.toString()),this.emit("data",t),!0},E.prototype.end=function(t){return t&&t.length&&this.write(t),this.ly.end(),!0},E.prototype.on=function(e,t){var i=this;return i.ly["on"+e]||-1===n.indexOf(e)||(i.ly["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),c.prototype.on.call(i,e,t)},p="'\"",d="0124356789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ#",b=(l="\r\n\t ")+">",m="[CDATA[",g="DOCTYPE",o={xml:r="http://www.w3.org/XML/1998/namespace",f_:a="http://www.w3.org/2000/xmlns/"},l=t(l),t("0124356789"),t("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,p=t(p),d=t(d),b=t(b),w=0,h.DB={Bba:w++,Cba:w++,Xm:w++,Oea:w++,yda:w++,zea:w++,ZJa:w++,H_:w++,WAa:w++,Vba:w++,VAa:w++,U3b:w++,B_:w++,Uza:w++,Tza:w++,z_:w++,Nza:w++,Oza:w++,mHa:w++,Jda:w++,Kda:w++,QGa:w++,N0:w++,yJ:w++,k_:w++,xya:w++,gba:w++,jba:w++,yya:w++,kba:w++,hba:w++,iba:w++,Kba:w++,Rza:w++,kK:w++,WJa:w++},h.Fkb={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},h.Ax={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(h.Ax).forEach(function(t){var e="number"==typeof(e=h.Ax[t])?String.fromCharCode(e):e;h.Ax[t]=e}),h.DB)h.DB[h.DB[w]]=w;function e(){var t,e,i=[],n=-1,r=arguments.length;if(!r)return"";for(var a="";++n<r;){if(t=Number(arguments[n]),!isFinite(t)||t<0||1114111<t||u(t)!=t)throw RangeError("Invalid code point: "+t);t<=65535?i.push(t):(e=55296+((t-=65536)>>10),t=t%1024+56320,i.push(e,t)),(n+1==r||16384<i.length)&&(a+=s.apply(null,i),i.length=0)}return a}w=h.DB,String.fromCodePoint||(s=String.fromCharCode,u=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:e,configurable:!0,writable:!0}):String.fromCodePoint=e)}(e)},function(t){function e(t,e){for(var i,n,r,a=[],o=t.indexOf("<p"),s=-1;(i={}).WYb=o,n=t.indexOf("begin=",o)+7,r=t.indexOf("end=",o)+5,n=Math.floor(parseInt(t.substr(n,25),10)/e*1e3),s=s<(r=Math.floor(parseInt(t.substr(r,25),10)/e*1e3))?r:s,i.startTime=n,i.endTime=r,i.latestEndSoFar=s,i.DVa=t.indexOf("/p>",o)+3,o=i.DVa,a.push(i),o=t.indexOf("<p",o),-1!==o;);this.V1=a,this.YF=t}e.prototype.$Cb=function(){return this.V1[this.V1.length-1].endTime},e.prototype.Mr=function(e,i){return this.V1.filter(function(t){return t.startTime<=i&&t.endTime>=e}).length},e.prototype.uGb=function(e){for(var t="",i=this.V1.filter(function(t){return t.startTime<=e&&e<t.endTime||t.startTime>=e}),n=4;n+1<i.length&&i[n+1].startTime===i[4].startTime;)n++;return 0<(i=i.slice(0,n+1)).length&&(t=this.YF.slice(i[0].WYb,i[i.length-1].DVa)),t},t.exports=e},function(t,e,i){var u,n,c;function h(t){return"string"!=typeof t?null:n[t]}function f(t){return t.split(" ").map(function(t){return.01*parseFloat(t)})}u=i(474),t.exports={vyb:function(t,e){var i,n,r,a=e.textNodes[0]||{},o=t.regions,s=t.styles;return t=t.aspectRatio,o=o&&o[e.region]?o[e.region]:{},a=s&&s[a.style]?s[a.style]:{},s=f(u(e.extent,o.extent,"80% 80%")),i=f(u(e.origin,o.origin,"10% 10%")),e=Object,n=(1-(t/=1280/720))/2,r=i[0],i=i[1],s=e.create.call(e,{marginLeft:r*t+n,marginTop:i,marginRight:(1-(r+s[0]))*t+n,marginBottom:1-(i+s[1])}),1<Object.keys(o).length?s.verticalAlignment=h(u(a.displayAlign,o.displayAlign,"before")):s.verticalAlignment=h(u(a.displayAlign,"after")),o=u(a.textAlign,o.textAlign,"center"),s.horizontalAlignment="string"!=typeof o?null:c[o],s}},n={before:"top",center:"center",after:"bottom"},c={left:"left",start:"start",center:"center",right:"right",end:"end"}},function(t,e,i){var g,v,n,y,w,_,E;function k(t){return"string"!=typeof t||"#"===t[0]&&7===t.length?t:"#"===t[0]&&4===t.length?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:n[t.toLowerCase()]}function S(t){var e=(t||"").split(" "),i=/^[0-9]/.test(e),n=i?0:1;return{color:t=i?"#000000":k(e[0]),width:0<(i=parseInt(e[n]))?i:0,blur:0<(e=parseInt(e[1+n]))?e:0}}g=i(474),t.exports={Ayb:function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b=g(i.characterSize,e.characterSize,"MEDIUM"),m=t.fontFamily;return m=g(i.characterStyle,"string"!=typeof m?null:y[m],e.characterStyle,"PROPORTIONAL_SANS_SERIF"),n=parseInt(t.fontSize,10)/100||1,r="underline"===t.textDecoration,a="italic"===t.fontStyle,o=v[g(i.O2b,e.O2b,"OPAQUE")],s=v[g(i.characterOpacity,e.characterOpacity,"OPAQUE")],u=v[g(i.backgroundOpacity,t.opacity,e.backgroundOpacity,"OPAQUE")],c=k(g(i.characterColor,t.color,e.characterColor,"#ffffff")),h=k(g(i.backgroundColor,t.backgroundColor,e.backgroundColor,null)),f=k(g(i.Vbb,t.Vbb,e.Vbb,null)),l=g(i.characterEdgeAttributes,e.characterEdgeAttributes,null),n*=w[b]||1,p=1,_[b]&&(p=_[b][m]||1),n*=1/19*p,p=0,E[b]&&(p=E[b][m]||0),b=p,p="string"!=typeof(p=t.textOutline)?null:S(p).width,p=g(p,0),d="string"!=typeof(d=t.textOutline)?null:S(d).blur,d=g(d,0),i=i.characterEdgeColor,t="string"!=typeof(t=t.textOutline)?null:S(t).color,{characterUnderline:r,characterItalic:a,characterStyle:m,windowOpacity:o,characterOpacity:s,backgroundOpacity:u,characterColor:c,backgroundColor:h,windowColor:f,characterEdgeAttributes:l,characterSize:n,characterTracking:b,characterEdgeWidth:p,characterEdgeBlur:d,characterEdgeColor:k(g(i,t,e.characterEdgeColor,"#000000"))}}},v={NONE:0,SEMI_TRANSPARENT:.5,OPAQUE:1},n={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",magenta:"#ff00ff",green:"#00ff00",lime:"#00ff00",olive:"#808000",yellow:"#ffff00",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff",cyan:"#00ffff",orange:"#ffa500",pink:"#ffc0cb",transparent:null},y={default:"PROPORTIONAL_SANS_SERIF",monospaceSansSerif:"MONOSPACED_SANS_SERIF",monospaceSerif:"MONOSPACED_SERIF",proportionalSansSerif:"PROPORTIONAL_SANS_SERIF",proportionalSerif:"PROPORTIONAL_SERIF",casual:"CASUAL",cursive:"CURSIVE",smallCapitals:"SMALL_CAPITALS",monospace:"MONOSPACED_SANS_SERIF",sansSerif:"PROPORTIONAL_SANS_SERIF",serif:"PROPORTIONAL_SERIF"},w={SMALL:.5,MEDIUM:1,LARGE:2},_={MEDIUM:{MONOSPACED_SANS_SERIF:1.37,MONOSPACED_SERIF:1.15},SMALL:{MONOSPACED_SANS_SERIF:1.37,MONOSPACED_SERIF:1.15}},E={MEDIUM:{MONOSPACED_SANS_SERIF:2,MONOSPACED_SERIF:2},SMALL:{MONOSPACED_SANS_SERIF:1,MONOSPACED_SERIF:1}}},function(t,e,i){var n,r,u,c,h,f;function a(t){n.call(this),this.vl=t.url,this.NF=t.request,this.KF=t.Ed||0,this.Ja=t.ta,this.Hi=this.pr=null,t.tu?this.pr=t.tu:(this.Ne=t.offset,this.oL=t.size),this.cm,this.Lga=t}n=i(114).EventEmitter,r=i(1078),u=i(1079),c=i(1080),h=i(159),f=a.events={thb:"midxready",Njb:"sidxready",yjb:"ready",Mf:"error"},(a.prototype=Object.create(n.prototype)).constructor=a,Object.defineProperties(a.prototype,{zp:{get:function(){return this.cm&&this.cm.Cka}}}),a.prototype.start=function(){this.pr?(this.Ja.warn("midx was prefectched and provided"),this.$Ma(this.pr)):this.Qlb(this.Ne,this.oL,this.Fob.bind(this))},a.prototype.close=function(){},a.prototype.iN=function(t,e){return this.cm&&this.cm.Zna(t,e)},a.prototype.Mr=function(t,e){return(t=this.iN(t,e))?t.length:t},a.prototype.NA=function(t,e){this.Ja.debug("setStreamStartPosition: buffering subtitles at pts "+t),this.KF=t,this.cm?this.cm.NA(t,e):e&&e()},a.prototype.WG=function(t){var e,i,n;return!this.cm||t>h.zFb(this.pr)?[]:(this.cm&&this.cm.lla(t),e=this.zp.zs,i=this.zp.index,n=[],(i=h.Xc(i)&&this.Hi[i+1])&&i.entries.length||e&&!(t>e.endTime)?(e&&e.images.length&&(n=this.lNa(e,t,[])),n.length<2&&i&&i.images.length&&(e=this.lNa(i,t,n),n.push.apply(n,e)),this.cm.jwa(t)?null:h.PSa(n)):[])},a.prototype.Ai=function(t,e){this.cm&&this.cm.Ai(t,e)},a.prototype.wi=function(t,e){this.cm&&this.cm.wi(t,e)},a.prototype.Qlb=function(t,e,i){this.Ja.debug("downloading midx..."),this.xNa(t,e,"binary",i)},a.prototype.Rlb=function(t,e,i){this.Ja.debug("downloading sidx..."),this.xNa(t,e,void 0,i)},a.prototype.xNa=function(t,e,i,n){this.NF({url:this.vl,offset:t,size:e,responseType:i},n)},a.prototype.Fob=function(t,e){if(t)this.emit(f.Mf,h.wV(t,"midxdownloaderror"));else try{this.pr=new r(e),this.$Ma(this.pr)}catch(t){this.emit(f.Mf,h.wV(t,"midxparseerror"))}},a.prototype.$Ma=function(t){var e=t.entries.reduce(function(t,e){return t+e.size},0);e?(this.emit(f.thb,t),this.Rlb(t.startOffset,e,this.Iob.bind(this,t))):this.emit(f.Mf,h.wV({},"nosidxfoundinmidx"))},a.prototype.Iob=function(i,t,n){var r,a,o,s=this;if(t)s.emit(f.Mf,h.wV(t,"sidxdownloaderror"));else{a=r=0,s.Hi=[];try{o=0,i.entries.forEach(function(t){var e=new u(n,r,i.fpa,s.Ja,a,a+t.duration,o);s.Hi.push(e),t.LYb=e,a=e.Eq,r+=t.size,o++})}catch(t){return void s.emit(f.Mf,h.wV(t,"sidxparseerror"))}s.emit(f.Njb,s.Hi),this.cm=new c(s.Lga,i,s.Hi),t=s.KF,s.Lga&&s.Lga.y$||(t=Math.max(s.KF-1e4,0)),this.cm.lla(t,function(t){t&&s.Ja.error("initial sidx download failed"),s.emit(f.yjb)})}},a.prototype.lNa=function(t,e,i){for(var n,r,a=t.entries,o=0,s=a.length,u=[],c=this.pr;o<s;){if((r=a[o]).displayTime<=e)r.displayTime+r.duration>=e&&u.push(h.ska(r,t.images[o].data,c));else{if((n=u.length&&u[u.length-1]||i.length&&i[i.length-1])&&n.displayTime>e&&n.displayTime!==r.displayTime)break;n.lH!==r.lH&&u.push(h.ska(r,t.images[o].data,c))}o++}return u},t.exports=a},function(t,e,i){var a,o;function s(t,e){this.duration=t,this.size=e,this.LYb=void 0}a=i(281),o=i(159),t.exports=function(t){var e;t=new a(t),this.identifier=t.nua(4),o.assert("midx"===this.identifier),this.version=t.Fq(4),o.assert(0===this.version),this.fpa=t.Mh(36),this.creationTime=t.IO(),this.Vo=t.IO(),this.J=t.IO(),this.rWb=t.uh(),this.sWb=t.uh(),this.language=t.Mh(16),t.Mh(16),this.startOffset=t.IO(),this.sm=t.uh();for(var i=[],n=0,r=0;r<this.sm;r++)e=new s(t.Fq(4),t.uh()),i.push(e),n+=e.duration;this.entries=i,this.endTime=n}},function(t,e,i){var u,c;function h(t,e,i,n,r,a,o,s){this.displayTime=t,this.duration=e,this.nRb=i,this.oRb=n,this.RYb=r,this.SYb=a,this.lH=o,this.Uoa=s}function n(t,e,i,n,r,a,o){var s=0;for((t=new u(t)).position=e,this.Ja=n,this.identifier=t.nua(4),c.assert("sidx"===this.identifier,n),this.fpa=t.Mh(36),c.ovb(this.fpa,i,n),this.duration=t.Fq(4),this.sm=t.uh(),this.Xw=r,this.Eq=a,this.index=o||0,this.entries=[],this.images=[],this.$ga=0;s<this.sm;)e=new h(t.Fq(4),t.Fq(4),t.uh(),t.uh(),t.uh(),t.uh(),t.IO(),t.Fq(4)),s++,this.entries.push(e);this.entries.length&&(this.startTime=this.entries[0].displayTime,this.endTime=this.entries[this.entries.length-1].displayTime+this.entries[this.entries.length-1].duration)}u=i(281),c=i(159),n.prototype.NJb=function(){this.$ga++},n.prototype.rzb=function(){var t=0;return this.$ga--,this.$ga<1?this.images&&0<this.images.length&&(t+=c.Vna([this]),this.images=[]):this.Ja.debug("Not cleaning up shared sidx with range",this.Xw,"-",this.Eq),t},t.exports=n},function(t,e,i){var r,n;function a(t,e){var i;if(t=t||0,e)for(var n in e.qa)if(t>=((i=e.qa[n]).Jb||0)&&(!i.Ob||t<i.Ob))return n}function o(t,e){return t&&e&&e.qa[t]}function s(t,e,i){var n;this.Ja=t.ta,this.Hi=i,this.bC=this.vlb(t.y$),this.ih=[],n=i&&i[i.length-1],this.Nv=n&&(n.endTime||n.Eq),this.Og=new r(t,e,i),t=a(t.Ed||0,this.bC),this.lo=this.dy(t)}r=i(1081),n=i(1083),Object.defineProperties(s.prototype,{Cka:{get:function(){return this.Og.Cka}}}),s.prototype.Zna=function(t,e){return this.Og&&this.Og.Zna(t,e)},s.prototype.lla=function(t,e){if(this.Og.yXb(t),this.kPa(t),!this.bC&&this.Nv&&t>this.Nv)e&&e();else if(t=this.WMa(t,this.lo,2,e),this.bC&&0<this.lo.I3a.length)e&&e();else if(this.bC&&this.lo.zN&&t){this.ih.length<2&&this.Blb(this.lo),e=Math.ceil(2/(this.ih.length-1));for(var i=0;i<this.ih.length&&t&&i<3;i++)t=this.ih[i],t=this.WMa(t.startTime,t,e)}},s.prototype.jwa=function(t){return!!this.Og.jwa(t)&&(this.Og.frb(),this.lla(t),!(this.lo.zN=!1))},s.prototype.NA=function(t,e){var i;this.kPa(t),this.ih.forEach(function(t){t.zN=!1}),i=this.lo.Tn&&this.lo.Tn[0],this.Og.NA(t,i&&i.index),(t=this.Og.mHb(t))&&t.length?this.Og.KUa(t,e):e&&e()},s.prototype.wi=function(t,e){var i;this.Ja.debug("Set next segment to",e,"for segment",t),(t=this.dNa(t)||this.dy(t)).q8a=e,i=this,t.gX=t.gX.filter(function(t){return t.id===e||(i.Hfa(t),!1)})},s.prototype.Ai=function(t,e){var i=o(t,this.bC);Object.keys(i.next).forEach(function(t){i.next[t].weight=e[t]||0})},s.prototype.vlb=function(t){var e,i={};if(t=(t||{}).qa)for(var n in i.qa={},t)e=t[n]||{},i.qa[n]={Jb:e.Jb,Ob:e.Ob,Qe:e.Qe,next:this.ulb(e.next)};return i},s.prototype.ulb=function(t){var e,i={};for(e in t)i[e]={weight:(t[e]||{}).weight};return i},s.prototype.kPa=function(t){var e,i;(this.bC&&this.lo.startTime>t||this.lo.endTime&&this.lo.endTime<t)&&(e=this.lo,(i=a(t,this.bC))?(this.Ja.debug("Switching segments from",this.lo.id,"to",i,"at pts",t),this.lo=this.dNa(i)||this.dy(i),this.Hfa(e)):this.Ja.debug("The pts is outside of the current segment but not in a new one yet"))},s.prototype.dy=function(t){return this.Ja.debug("SegmentManager: creating segment",t),t=new n(t,o(t,this.bC),this.Hi,this.Ja),this.ih.push(t),this.Ja.debug("SegmentManager: segment contains",t.Tn.length,"sidxes"),t},s.prototype.Hfa=function(e){var t;e&&e!==this.lo&&(this.Ja.debug("SegmentManager: deleting segment",e.id),e.gX.forEach(this.Hfa.bind(this)),this.ih=this.ih.filter(function(t){return t!==e}),t=e.eSa(),this.Og.lVb(t&&t.size||0,t&&t.Tn))},s.prototype.dNa=function(t){for(var e,i=0;t&&i<this.ih.length;i++)if(t===(e=this.ih[i]).id)return e},s.prototype.Blb=function(t){var e,i=t.q8a;if(i&&""!==i)t.gX.push(this.dy(i));else for(var n in i=t.I3a){if(!(e=i[n])||!e.weight)break;t.gX.push(this.dy(n))}},s.prototype.WMa=function(t,i,e,n){return!i||i.zN?(this.Ja.debug("Done driving segment",i&&i.id),!0):this.Og.Stb?(this.Ja.debug("Drive streaming of segment",i.id,"from pts",t),0===(e=(t=this.Og.nHb(t,i,e))&&t.length||0)?(this.Ja.debug("Segment is fully downloaded",i&&i.id),i.zN=!0,n&&n(),!0):(this.Ja.debug("Downloading",e,"sidxes in segment",i.id),this.Og.KUa(t,function(t,e){t&&(i.zN=!1),n&&n(t,e)}))):(this.Ja.debug("Throttling buffering in quiet period"),!1)},t.exports=s},function(t,e,i){var n,c;function h(t,e,i){return e&&(!e.entries.length&&t>e.Xw||t>e.endTime)&&i.entries.length&&t<i.endTime}function r(t,e,i){this.PF=this.Gv=0,this.enb=t.bufferSize||4194304,this.zp=new f,this.JF,this.BF=t.qf,this.Ja=t.ta,this.pr=e,this.Hi=i,this.uo=new n(t),this.ZF=new o(this.Hi.length,t.cVa),this.$S=new a(t.sRa)}function a(t){this.Ylb=0!==t,this.on=!1,this.Tj=t||3e3,this.Tg}function o(t,e){(this.enabled=e)&&(this.Tn=Array.apply(null,Array(t)).map(function(){return"-"}))}function f(t,e){this.zs=t,this.index=e}n=i(1082),c=i(159),f.prototype.reset=function(){this.index=this.zs=void 0},o.prototype.da=function(t){this.enabled&&t<this.Tn.length&&(this.Tn[t]="x")},o.prototype.G4a=function(t){this.enabled&&t<this.Tn.length&&(this.Tn[t]="-")},o.prototype.toString=function(){return this.enabled&&"|"+this.Tn.join("")+"|"},a.prototype.start=function(){var t;this.Ylb&&((t=this).on=!0,this.Tg=setTimeout(function(){t.on=!1,t.Tg=void 0},this.Tj))},a.prototype.stop=function(){this.on=!1,clearTimeout(this.Tg),this.Tg=void 0},Object.defineProperties(r.prototype,{Cka:{get:function(){return this.zp}},Stb:{get:function(){return!this.$S.on}}}),r.prototype.OS=function(){this.ZF.enabled&&this.Ja.debug("Buffer: "+this.ZF.toString())},r.prototype.cpb=function(t){this.PF+=t,this.Ja.debug("Reserved buffer size is",this.Gv+this.PF,"after reserving",t)},r.prototype.Mpb=function(t){this.PF-=t,this.Ja.debug("Reserved buffer size is",this.Gv+this.PF,"after unreserving",t)},r.prototype.tlb=function(t){this.Gv+=t,this.Ja.debug("Buffer size is",this.Gv,"after claiming",t)},r.prototype.GOa=function(t){this.Gv-=t,this.Ja.debug("Buffer size is",this.Gv,"after clearing",t)},r.prototype.lVb=function(t,e){var i;this.GOa(t),i=this,e&&this.ZF.enabled&&(e.forEach(function(t){i.ZF.G4a(t.index)}),this.OS())},r.prototype.jwa=function(t){var e=this.jmb(t);return c.i_a(e)&&c.QZb(t,e)},r.prototype.yXb=function(t){var e=this.qNa(t);(!e||e.index)!==(!this.zp||this.zp.index)&&(this.JF=this.zp.zs,e?(this.BF&&this.Ja.debug("Current sidx is index",e.index),this.zp=e):(this.BF&&this.Ja.debug("Current sidx is out of range"),this.zp.reset())),this.JF&&"number"==typeof this.JF.index&&(t<this.JF.Xw-35e3||t>this.JF.Eq+35e3)&&(this.yfa(this.JF.index),this.JF=void 0,this.OS())},r.prototype.NA=function(t,e){for(var i,n=this.Hi&&this.Hi.length;e<n;e++)(i=this.Hi[e])&&((i.endTime||i.Eq)>=t-1e4&&(i.endTime||i.Eq)<t+3e5||this.yfa(e));this.$S.stop(),this.OS()},r.prototype.frb=function(){var t,e;for(this.Ja.debug("executing aggressive cleanup"),t=this.Hi&&this.Hi.length,e=0;e<t;e++)e===this.zp.index&&(e+=2),this.yfa(e);this.$S.stop(),this.OS()},r.prototype.mHb=function(t){var e,i,n=[],r=this.qNa(t);if(!r)return this.zp.reset(),n;for(e=t+1e4,r=(this.zp=r).index,i=this.Hi[r];r<this.Hi.length&&e>i.Xw;r++,i=this.Hi[r])c.i_a(i)&&c.RZb(t,e,i)&&n.push(i);return n},r.prototype.KUa=function(i,n){var r,t,e,a,o,s;if(!i||!i.length)return n&&n(null),!0;if(this.uo.US&&2<=Object.keys(this.uo.US).length&&!this.$S.on&&(this.Ja.debug("Enabling buffering quiet period"),this.$S.start()),r=this,t=i[0],e=i[i.length-1],0<t.entries.length&&(a=t.entries[0].lH,o=t.entries[t.entries.length-1]),0<e.entries.length&&(c.Xc(a)||(a=e.entries[0].lH),o=e.entries[e.entries.length-1]),!a)return n&&n(null),!0;if(s=o.lH+o.Uoa-a,t=c.hna(a,s),this.uo.US[t])this.Ja.debug("The request for",t,"is already pending. Not requesting again"),n&&n();else{if(!this.Dmb(c.Vna(i)))return this.Ja.debug("Not enough space in buffer to download all of the imaages in the list"),n&&n(),!1;this.Ja.debug("Reserving",s,"bytes for subtitle request",i[0].Xw,i[i.length-1].Eq),this.cpb(s),this.uo.JAb(i,a,s,function(t,e){r.Ja.debug("Claiming reserved space.  Expected",s,"received",e),r.ZF.enabled&&(i.forEach(function(t){r.ZF.da(t.index)}),r.OS()),r.Mpb(s),r.tlb(e),n&&n(t)})}return!0},r.prototype.Zna=function(t,e){var i,n=this.pr,r=this.pNa(t,e,this.Hi);if(!r||0===r.length)return[];i=[],e=function(t,e,i){var n=i.displayTime<=t&&t<=i.displayTime+i.duration;return t<=i.displayTime&&i.displayTime<=e||n}.bind(null,t,e);for(var a=0;a<r.length;a++)t=r[a],i=i.concat(t.entries.filter(e));return i=i.map(function(t){return c.ska(t,null,n)}),c.PSa(i)},r.prototype.nHb=function(t,e,i){return this.pNa(t,e.endTime,e.Tn,i,!0)},r.prototype.pNa=function(t,e,i,n,r){var a,o,s,u;if(e&&e<t||t<0)this.Ja.error("invalid range startPts: "+t+", endPts: "+e);else if(a=i&&i.length||0,o=[],i&&0!==a){if(s=i[0].duration,u=i[0].Xw,c.Xc(s)&&0<s)s=Math.floor((t-u)/s);else for(this.BF&&this.Ja.warn("The duration of the first sidx is not defined or sidx","durations vary, so use brute force to get starting sidx"),s=0;s<a&&(u=i[s],!c.BAb(u,t));s++);for(;s<a&&(!n||o.length<n);){if(u=i[s],!r||!u.images.length&&u.endTime>t)o.push(u);else if(o.length)break;if(e&&e<=u.Eq)break;s++}return o}},r.prototype.jmb=function(t){var e,i,n=this.Hi;if(n&&0!==n.length){if((e=n[Math.floor(t/6e4)])&&(e.Xw>t||t>e.Eq))t:{this.Zlb||(this.Zlb=!0,e=c.$Fb(this.pr.language),this.Ja.error("bruteforce search for ",{movieId:this.pr.J,packageId:this.pr.Vo,lang:e})),e=n.length;for(var r=0;r<e;r++)if((i=n[r]).Xw<=t&&t<=i.Eq){e=i;break t}e=void 0}return e}},r.prototype.qNa=function(t){var e,i,n,r,a=this.zp,o=a.zs,s=a.index,u=this.Hi;if(this.Ffa(c.Xc(t)),o&&(o.entries.length?(0===s&&t<=o.startTime||t>=o.startTime&&t<=o.endTime||0<s&&h(t,n=u[s-1],o))&&(e=!0,i=a):(n=u[s-1],r=u[s+1],h(t,n,o)?(e=!0,i=a):r&&r.endTime&&t<=r.endTime&&(t>=o.endTime||t>=o.Eq)&&(e=!0,i=new f(r,s+1)))),!e)for(a=u.length,o=0;o<a;o++)if((s=u[o]).entries.length&&t<=s.endTime){i=new f(s,o);break}return i},r.prototype.Dmb=function(t){return this.Gv+this.PF+t<=this.enb},r.prototype.yfa=function(t){var e,i=this.Hi[t],n=i&&i.images&&i.images.length||0;0<n&&(e=c.Vna([i]),i.images=[],this.ZF.G4a(t),this.GOa(e),this.BF&&this.Ja.debug("cleaning up space from sidx",{index:t,start:i.startTime,size:e,images:n,jbc:this.Gv}))},r.prototype.Ffa=function(t){this.BF&&c.assert(t,this.Ja)},t.exports=r},function(t,e,i){var h,f;function n(t){this.vl=t.url,this.NF=t.request,this.KF=t.Ed||0,this.BF=t.qf,this.Ja=t.ta,this.US={}}h=i(281),f=i(159),n.prototype.JAb=function(t,e,i,n){this.US[f.hna(e,i)]=!0,t&&t.forEach(function(t){t.t7a=!0}),this.NF({url:this.vl,offset:e,size:i},this.dob.bind(this,t,e,i,n))},n.prototype.dob=function(t,n,e,i,r,a){var o,s,u=this,c=f.hna(n,e);setTimeout(function(){delete u.US[c]},1e3),r?(i&&i(r,0),t&&t.forEach(function(t){delete t.t7a})):(o=new h(a),s=0,t&&t.forEach(function(i){delete i.t7a,i.entries.forEach(function(t,e){o.position=t.lH-n,t={data:o.Mh(t.Uoa)},i.images[e]=t,f.g2b(i.images[e].data,u.Ffa.bind(u)),s+=i.images[e].data.length})}),i&&i(null,s))},n.prototype.Ffa=function(t){this.BF&&f.assert(t,this.Ja)},t.exports=n},function(t){function e(t,e,i,n){this.Ja=n,this.id=t,this.startTime=e&&e.Jb||0,this.endTime=e&&e.Ob,this.I3a=e&&e.next||[],this.q8a,this.gX=[],this.zN=!1,t=this.startTime,e=this.endTime;for(var r=[],a=0;a<i.length;a++)(n=i[a])&&(!e||e>n.Xw)&&t<n.Eq&&(n.NJb(),r.push(n));this.Tn=r}e.prototype.eSa=function(){this.Ja.debug("Cleaning up segment",this.id);for(var t,e,i=0,n=[],r=0;r<this.Tn.length;r++)(e=(t=this.Tn[r]).rzb())&&n.push(t),t&&(i+=e);return this.Tn=[],{size:i,Tn:n}},t.exports=e},function(t,e,i){var o;function r(t,e){return e.reduce(function(t,e,i){var n,r;return n=i.displayTime-t,t=i.displayTime+i.duration-t,r=0<e.length?e[0].timeout:1/0,0<n&&n<r?[a("showsubtitle",i,n)]:n===r?e.concat([a("showsubtitle",i,n)]):0<t&&t<r?[a("removesubtitle",i,t)]:t===r?e.concat([a("removesubtitle",i,t)]):e}.bind(this,t),[])}function a(t,e,i){return{timeout:i,type:t,entry:e}}o=i(114).EventEmitter,e=i(1085)({}),(i=function t(e,i,n,r,a){if(!(this instanceof t))return new t(e,i,n,r,a);o.call(this),this.hy=e,this.tmb=i,this.Rmb=n,this.ry={},this.TF={},this.Ja=r||console,this.iS=!1,this.Lob=a&&a.aua||0}).prototype=Object.create(o.prototype),i.prototype.stop=function(){clearTimeout(this.Tg),this.pVb()},i.prototype.pVb=function(){var e=this;Object.keys(e.ry).forEach(function(t){e.emit("removesubtitle",e.ry[t])}),e.ry={},e.TF={}},i.prototype.pause=function(){this.iS||clearTimeout(this.Tg)},i.prototype.Is=function(t,e){var i=this,n=i.hy();clearTimeout(this.Tg),null!==(t=i.tmb(n))&&i.iS&&(i.iS=!1,this.Ja.info("bufferingComplete"),i.emit("bufferingComplete"),this.Rmb())?this.Ja.info("bufferingComplete while paused, no longer scheduling internal pts events"):(e="number"==typeof e?e:0,Object.keys(i.ry).forEach(function(t){(t=i.ry[t]).displayTime-i.Lob<=n&&n<t.displayTime+t.duration||(delete i.ry[t.id],i.emit("removesubtitle",t))}),Object.keys(i.TF).forEach(function(t){t=i.TF[t],n>=t.displayTime+t.duration&&delete i.TF[t.id]}),null!==t&&0<t.length?(e=t.length,i.Ja.info("found "+e+" entries for pts "+n),t.forEach(function(t){+t.displayTime<=n&&n<t.displayTime+t.duration&&!i.ry[t.id]&&(i.emit("showsubtitle",t),i.ry[t.id]=t,delete i.TF[t.id])}),e=t[t.length-1],i.ry[e.id]||i.TF[e.id]||(i.emit("stagesubtitle",e),i.TF[e.id]=e),0<(e=r(n,t)).length?i.A2(e[0].timeout):i.A2(2e4)):null===t?(2e3<(t=250*Math.pow(2,e))&&(t=2e3),i.Ja.warn("checking buffer again in "+t+"ms"),i.iS||(i.iS=!0,i.emit("underflow")),i.A2(t,e+1)):i.A2(2e4))},i.prototype.A2=function(t,e){var i=this;i.Ja.info("Scheduling pts check."),i.Tg=setTimeout(function(){i.Is(i.hy(),e)},t)},t.exports=e(["function","function","function","object","object"],i)},function(t){t.exports=function(e){var i,r,n,a;function o(t,e,i){throw new TypeError((void 0!==i.key?"Types: expected "+i.key:"Types: expected argument "+i.index)+" to be '"+t+"' but found '"+e+"'")}function s(t,e,i){var n=r[t];void 0!==n?n(e)||o(t,e,i):t!==typeof e&&o(t,e,i)}function t(t,e){var i=t.filter(function(t){return"object"!=typeof t&&-1===n.indexOf(t)});if(0<(i=i.concat(t.filter(function(t){return"object"==typeof t}).reduce(function(t,e){return t.concat(Object.keys(e).map(function(t){return e[t]}).filter(function(t){return-1===n.indexOf(t)}))},[]))).length)throw Error(i.join(",")+" are invalid types");return function(){var n=Array.prototype.slice.call(arguments);if(n.length!==t.length)throw new TypeError("Types: unexpected number of arguments");return t.forEach(function(e,t){var i=n[t];if("string"==typeof e)s(e,i,{index:t});else{if("object"!=typeof e)throw Error("Types: unexpected type in type array");Object.keys(e).forEach(function(t){s(e[t],i[t],{key:t})})}}),e.apply(this,n)}}if(i="number boolean string object function symbol".split(" "),r={array:function(t){return Array.isArray(t)}},void 0!==e){if("object"!=typeof e||(a=e,!Object.keys(a).every(function(t){return"function"==typeof a[t]})))throw new TypeError("Types: extensions must be an object of type definitions");Object.keys(e).forEach(function(t){if(void 0!==r[t]||-1<i.indexOf(t))throw new TypeError("Types: attempting to override a built in type with "+t);r[t]=e[t]})}return n=Object.keys(r).concat(i),t(["array","function"],t)}},function(t,e,i){var n,r,a;_esm(e),e.DD=void 0,t=i(0),n=i(476),r=i(1087),a=i(156),e.DD=new t.rd(function(t){t(n.tda).to(r.xGa).aa(),t(a.yR).wZ(function(t){return function(){return t.$a.get(n.tda).kPb}})})},function(t,e,i){function n(){var e=this;this.ready=!1,this.kPb=new Promise(function(t){e.gWb=t})}_esm(e),e.xGa=void 0,t=i(1),i=i(0),n.prototype.lPb=function(t){this.ready||(this.gWb(t),this.ready=!0)},n.prototype.isReady=function(){return this.ready},i=t.__decorate([i.R()],n),e.xGa=i},function(t,e,i){var n,r,a,o,s;_esm(e),e.gk=void 0,t=i(0),n=i(91),r=i(477),a=i(1089),o=i(479),s=i(1090),e.gk=new t.rd(function(t){t(n.zx).wf(function(){return function(){return pt._cad_global.device}}),t(o.nBa).to(s.mBa).aa(),t(r.kBa).to(a.jBa).aa()})},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.za=t,this.hua=e}_esm(e),e.jBa=void 0,t=i(1),n=i(38),r=i(4),a=i(140),o=i(478),s=i(56),i=i(0),c.prototype.bEb=function(){for(var t="",e=this.za.ff.da(r.ja),i=6;i--;)t="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[e%32]+t,e=Math.floor(e/32);for(;t.length<30;)t+="0123456789ACDEFGHJKLMNPQRTUVWXYZ"[this.hua.y6a(new o.vea(0,31,s.h4a))];return t},u=c,u=t.__decorate([i.R(),t.__param(0,i.l(n.Uh)),t.__param(1,i.l(a.b1))],u),e.jBa=u},function(t,e,i){var l,n,p,r,a,o,s,u,c,h,f,d;function b(t,e,i,n,r,a,o,s,u){this.bAb=t,this.Wn=e,this.jb=n,this.wka=r,this.Uc=a,this.debug=o,this.b2b=s,this.$Rb=u,this.VBa=/^(SDK-|SLW32-|SLW64-|SLMAC-|WWW-BROWSE-|.{10})([A-Z0-9-=]{4,})$/,this.log=i.ib("Device")}_esm(e),e.mBa=void 0,t=i(1),l=i(3),n=i(27),p=i(1091),r=i(7),a=i(477),o=i(36),s=i(96),u=i(29),c=i(0),h=i(79),f=i(480),i=i(481),b.prototype.OVa=function(t){try{return t.match(this.VBa)[2]}catch(t){}},b.prototype.QVa=function(t){try{return t.match(this.VBa)[1]}catch(t){}},b.prototype.create=function(h){var f=this;return new Promise(function(u,c){f.Wn.create().then(function(r){var a,e,o,i,n,t;function s(t){f.jb.kn(t)&&f.jb.kn(a)?(e=new p.lBa(t,a,void 0,o,h.BU||"cadmium"),u(e)):c({na:l.L.SAa})}a=h.Fo,h.ena?(o="bind_device",f.$Rb.og(f.log,{}).then(function(t){s(t.esn)}).catch(function(t){c(t)})):h.PM?(n=h.Vk,f.jb.kn(n)?(t=f.QVa(n))!=h.Fo&&f.log.error("esn prefix from ui is different",{ui:t,cad:h.Fo,ua:h.userAgent}):h.Cqa&&f.log.error("esn from ui is missing"),!h.rJ&&f.jb.kn(n)?(o="config",s(n)):r.load(h.nUa).then(function(t){i=t.value,f.jb.kn(i)&&(o=f.jb.kn(n)?(t=f.OVa(n))===i?"storage_matched_esn_in_config":"storage_did_not_match_esn_in_config":"storage_esn_not_in_config",s(a+i))}).catch(function(t){var e;function i(){r.save(h.nUa,e,!1).then(function(){s(a+e)}).catch(function(t){c(t)})}function n(){e=f.bAb.bEb(),i()}t.na===l.L.EB?f.jb.kn(h.Vk)?(e=f.OVa(h.Vk),f.jb.kn(e)?(o="config_since_not_in_storage",i()):(o="generated_since_invalid_in_config_and_not_in_storage",f.log.error("invalid esn passed from UI",h.Vk),n())):(o="generated_since_not_in_config_and_storage",n()):c(t)})):h.cAb&&f.wka&&f.wka.getKeyByName?f.wka.getKeyByName(h.nsb).then(function(t){if(t=t.id,!f.jb.Ip(t))throw"ESN from getKeyByName is not a string";t=String.fromCharCode.apply(void 0,f.Uc.decode(t)),f.debug.assert(""!=t),a=f.QVa(t),s(t)}).catch(function(t){c({na:l.L.RAa,ub:f.b2b.wd(t)})}):s()}).catch(function(t){c(t)})})},d=b,d=t.__decorate([c.R(),t.__param(0,c.l(a.kBa)),t.__param(1,c.l(h.jB)),t.__param(2,c.l(r.qb)),t.__param(3,c.l(n.bg)),t.__param(4,c.l(f.LAa)),t.__param(5,c.l(o.Ci)),t.__param(6,c.l(s.pv)),t.__param(7,c.l(u.cg)),t.__param(8,c.l(i.uHa))],d),e.mBa=d},function(t,e){_esm(e),e.lBa=void 0,e.lBa=function(t,e,i,n){this.Vk=t,this.Fo=e,this.b5=n}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O;_esm(e),e.H1a=void 0,t=i(0),n=i(156),r=i(1093),a=i(1094),o=i(1095),s=i(1096),u=i(1097),c=i(13),h=i(1098),f=i(1099),l=i(1100),p=i(48),d=i(91),b=i(486),m=i(483),g=i(482),v=i(89),y=i(282),w=i(49),_=i(180),E=i(1101),k=i(488),S=i(489),T=i(1104),A=i(490),O=i(1105),e.H1a=new t.rd(function(t){t(w.Um).to(a.WEa).aa(),t(m.qGa).to(o.pGa).aa(),t(g.kFa).to(s.jFa).aa(),t(y.gFa).to(u.fFa).aa(),t(w.Vca).to(h.VEa).aa(),t(v.Ix).to(f.cFa).aa(),t(y.eFa).to(l.dFa).aa(),t(_.nR).to(E.mR).aa(),t(_.Yca).to(T.hFa).aa(),t(A.qR).to(O.pR).aa(),t(k.uBa).to(S.tBa).aa(),t(b.Jya).to(r.Iya).aa(),t(w.XEa).wZ(function(o){return function(){return o.$a.get(n.yR)().then(function(a){return new Promise(function(e){var i,n,r;i=o.$a.get(p.Qj),n=o.$a.get(c.Zc),r=o.$a.get(d.zx),i.Ol(function t(){n()&&r()&&a.$W?e(o.$a.get(w.Um)):i.Ol(t)})})})}})})},function(t,e,i){var a,n,r,o,s,u,c;function h(t,e,i,n){var r=this;this.dNb=t,this.Yz=e,this.config=n,this.zua=[],this.dNb.e$(a.jcb,this.fIb.bind(this)),i().then(function(t){var e=n().Ir.EDb;r.PNb=e?c.Nj[e.toUpperCase()]:c.Nj.Mf,r.Vf=t,r.iXb()})}_esm(e),e.Iya=void 0,t=i(1),n=i(0),r=i(13),o=i(113),s=i(49),u=i(89),c=i(7),h.prototype.fIb=function(t,e){this.Vf?this.v6a(t,e):this.zua.push([t,e])},h.prototype.iXb=function(){var e=this,t=this.zua;this.zua=[],t.forEach(function(t){e.v6a(t[0],t[1])})},h.prototype.v6a=function(t,e){var i;this.Vf&&this.vYb(t)&&(i={debugMessage:t.message,debugCategory:t.Ao},t.ic.forEach(function(t){return i=Object.assign(Object.assign({},i),t.value)}),i=Object.assign(Object.assign({},i),{prefix:"debug"}),t=this.Yz.Gt("debug",c.Nj[t.level].toLowerCase(),i,e),this.Vf.Hc(t))},h.prototype.vYb=function(t){var e=this.PNb;return void 0!==e&&t.level<=e&&!t.ic.find(function(t){return t.WU(c.FQ)})},(i=a=h).jcb="adaptorAll",i=a=t.__decorate([n.R(),t.__param(0,n.l(o.ZJ)),t.__param(1,n.l(u.Ix)),t.__param(2,n.l(s.XEa)),t.__param(3,n.l(r.Zc))],i),e.Iya=i},function(t,e,i){var n,s,r,a,o,u,c,h,f,l,p;function d(t,e,i,n,r,a,o){this.config=t,this.json=e,this.Oc=i,this.UMb=n,this.PW=a,this.Hka=o,this.s7=this.En=!1,this.listeners=[],s.Qo(this,"json"),this.ta=r.ib("LogBatcher")}_esm(e),e.WEa=void 0,t=i(1),n=i(0),s=i(56),r=i(39),a=i(482),o=i(48),u=i(7),c=i(49),h=i(483),f=i(3),l=i(97),i(187),p=i(272),d.prototype.xb=function(){this.En=!0},d.prototype.Hc=function(e){var t=this;this.CYb(e)||(0<e.size.Al(this.config.MNb)?this.ta.error("Logblob is too large, dropping from the queue",{logblobType:e.type,logblobSize:e.size.toString()}):(this.listeners.forEach(function(t){return t.wOb(e)}),this.PW.Lha(e),this.Oc.Ol(function(){t.pDb()})))},d.prototype.flush=function(i){var n=this;return i=void 0!==i&&i,this.s7?(this.ta.trace("LogBatcher is in error state, ignoring flush"),Promise.reject()):new Promise(function(t,e){n.ta.trace("Flushing",u.FQ),n.Bs(),n.Oc.Ol(function(){n.Iva(i).then(function(){t()}).catch(function(t){e(t)})})})},d.prototype.addListener=function(t){this.listeners.push(t)},d.prototype.removeListener=function(t){0<=(t=this.listeners.indexOf(t))&&this.listeners.splice(t,1)},d.prototype.Iva=function(t){var e,i=this;if(t=void 0!==t&&t,!this.En)return this.ta.trace("LogBatcher is not initialized"),Promise.resolve();if(this.s7)return this.ta.trace("LogBatcher is in error state, ignoring sendLogMessages"),Promise.resolve();if(0===(e=this.PW.CEb()).length&&!t)return this.ta.trace("No logblobs to send"),Promise.resolve();this.Bs(),this.listeners.forEach(function(){}),t=Promise.resolve();for(var n={},r=nt(e),a=r.next();!a.done;n={$aa:n.$aa},a=r.next())n.$aa=a.value,t=t.then(function(t){return function(){return i.eXb(t.$aa)}}(n));return t.then(function(){return i.NG()}).catch(function(t){throw e.filter(function(t){return!t.Pz}).forEach(function(t){return t.Pt()}),i.NG(),Error("Send failure. "+t)})},d.prototype.eXb=function(e){var i=this;return this.ta.trace("Sending batch: "+e.size,u.FQ),Promise.resolve(this.PW.qVb(e)).then(function(){return i.UMb.send(e.HH)}).then(function(){return e.EP()}).catch(function(t){throw i.ta.warn("Failed to send batch of logblobs.",t,u.FQ),e.Pt(),i.sYb(t)&&i.PW.nqb(e),i.DYb(t)&&(i.s7=!0),t})},d.prototype.sYb=function(t){return t.Kd!==f.t0.pHa&&this.config.Iha},d.prototype.DYb=function(t){return t.Cc===f.L.MCa||t.Cc===f.L.cR||t.Cc===f.L.gR},d.prototype.pDb=function(){var e=this;0<this.PW.size.Al(this.config.w2a)?this.Iva().catch(function(t){return e.ta.warn("Failed to send log messages on size threshold. "+t)}):this.NG()},d.prototype.Bs=function(){this.G7&&(this.G7.cancel(),this.G7=void 0)},d.prototype.NG=function(){this.G7||(this.G7=this.Oc.zk(this.config.fXb,this.nO.bind(this)))},d.prototype.nO=function(){var e=this;this.s7=!1,this.Bs(),this.Iva().catch(function(t){return e.ta.warn("Failed to send log messages on timer. "+t)})},d.prototype.stringify=function(t){var e="";try{e=this.json.stringify(t.data,void 0,"  ")}catch(t){}return e},d.prototype.CYb=function(t){return 0<=this.config.m9a.indexOf(t.type)||t.type===p.cd.debug&&0<=this.config.l9a.indexOf(t.data.debugCategory)},i=d,i=t.__decorate([n.R(),t.__param(0,n.l(c.Vca)),t.__param(1,n.l(r.LE)),t.__param(2,n.l(o.Qj)),t.__param(3,n.l(a.kFa)),t.__param(4,n.l(u.qb)),t.__param(5,n.l(h.qGa)),t.__param(6,n.l(l.U_))],i),e.WEa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t){this.oL=a.Gb,this.Bga=[],this.IS=this.e2=!1,t&&(this.oL=t.size,this.Bga=t.HH)}function f(t,e,i,n){this.xOb=t,this.config=e,this.Wf=i,this.json=n,r.Qo(this,"json"),this.ta=this.Wf.ib("MessageQueue"),this.yt=[]}_esm(e),e.pGa=void 0,t=i(1),n=i(0),r=i(56),a=i(52),o=i(282),s=i(7),u=i(39),i=i(49),f.prototype.Lha=function(t){var e,i;0===this.yt.length&&this.yt.push(this.jna()),(t=this.dHb(t))&&(e=this.xOb.measure([t]),0<(i=this.yt[this.yt.length-1]).size.add(e).Al(this.config.w2a)&&(i=this.jna(),this.yt.push(i)),i.Lha(t))},f.prototype.CEb=function(){var t=this.yt.filter(function(t){return t.Xtb});return this.yt.push(this.jna()),t.forEach(function(t){return t.ANb()}),t},f.prototype.nqb=function(t){t.Pz||this.yt.unshift(new h(t))},f.prototype.qVb=function(t){0<=(t=this.yt.indexOf(t))&&this.yt.splice(t,1)},f.prototype.dHb=function(e){try{return{data:this.json.parse(this.json.stringify(e.data)),severity:e.severity,size:e.size,timestamp:e.timestamp,type:e.type}}catch(t){var i,n={};(i=(e=e.data).debugMessage)&&"string"==typeof i&&(n.originalDebugMessage=i),(e=e.debugCategory)&&"string"==typeof e&&(n.originalDebugCategory=e),this.ta.error("JSON.stringify error: "+t.message,n)}},f.prototype.jna=function(){return new h},it.Object.defineProperties(f.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this.yt.reduce(function(t,e){return t.add(e.size)},a.Gb)}}}),c=f,c=t.__decorate([n.R(),t.__param(0,n.l(o.gFa)),t.__param(1,n.l(i.Vca)),t.__param(2,n.l(s.qb)),t.__param(3,n.l(u.LE))],c),e.pGa=c,h.prototype.EP=function(){this.e2=!1,this.IS=!0},h.prototype.Pt=function(){this.e2=!1},h.prototype.Lha=function(t){this.Bga.push(t),this.oL=this.oL.add(t.size)},h.prototype.ANb=function(){this.e2=!0},it.Object.defineProperties(h.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this.oL}},HH:{configurable:!0,enumerable:!0,get:function(){return this.Bga}},Xtb:{configurable:!0,enumerable:!0,get:function(){return 0<this.HH.length&&!1===this.e2}},Pz:{configurable:!0,enumerable:!0,get:function(){return this.IS}}})},function(t,e,i){var n,u,r,a,o,s,c,h,f,l,p;function d(t,e,i,n,r,a,o,s){this.Aa=t,this.platform=i,this.gk=n,this.json=r,this.ce=a,this.Yg=o,this.bNb=s,u.Qo(this,"json"),this.ta=e.ib("LogblobSender")}function b(){this.entries=[]}_esm(e),e.jFa=void 0,t=i(1),n=i(0),u=i(56),r=i(39),a=i(4),o=i(29),s=i(18),c=i(34),h=i(91),f=i(7),l=i(484),i=i(66),d.prototype.send=function(n){var r=this;return new Promise(function(t,e){var i;try{i=n.reduce(function(t,e){return t.entries.push(r.fyb(e)),t},new b),t(r.eEb(i))}catch(t){r.ta.error(t.message),e(t)}}).then(function(t){return r.Lva(t)})},d.prototype.fyb=function(t){return this.ce.LH(this.ce.LH({},t.data),{esn:this.gk().Vk,sev:t.severity,type:t.type,lver:this.platform.Hqa,jssid:this.Aa.id,devmod:this.platform.fz,jsoffms:t.timestamp.Qa(this.Aa.Vz).da(a.ja),clienttime:t.timestamp.da(a.ja),client_utc:t.timestamp.da(a.io),uiver:this.Yg.YA})},d.prototype.eEb=function(e){var n=this;try{return this.json.stringify(e)}catch(t){for(var i={},r=0;r<e.entries.length;i={gQ:i.gQ,jv:i.jv},++r){i.jv=Object.assign({},e.entries[r]);try{this.json.stringify(i.jv)}catch(t){i.gQ=void 0,this.ce.KC(i.jv,function(i){return function(e,t){try{n.json.stringify(t)}catch(t){i.gQ=t.message,i.jv[e]=i.gQ}}}(i)),i.jv.stringifyException=i.gQ,i.jv.originalType=i.jv.type,i.jv.type="debug",i.jv.sev="error"}}return this.json.stringify(e)}},d.prototype.Lva=function(t){var e=this;return this.bNb.og(this.ta,{logblobs:t}).then(function(){}).catch(function(t){return e.ta.error("PBO logblob failed",t),Promise.reject(t)})},p=d,p=t.__decorate([n.R(),t.__param(0,n.l(s.jd)),t.__param(1,n.l(f.qb)),t.__param(2,n.l(c.Hk)),t.__param(3,n.l(h.zx)),t.__param(4,n.l(r.LE)),t.__param(5,n.l(o.cg)),t.__param(6,n.l(i.Xs)),t.__param(7,n.l(l.MHa))],p),e.jFa=p},function(t,e,i){var n,r,a;function o(t){this.config=t}_esm(e),e.fFa=void 0,t=i(1),n=i(0),r=i(282),a=i(52),o.prototype.measure=function(t){var e=this;return t.map(function(t){return t.size.add(e.config.XMb())}).reduce(function(t,e){return t.add(e)},a.fa(0))},i=o,i=t.__decorate([n.R(),t.__param(0,n.l(r.eFa))],i),e.fFa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e){return(t=u.Ze.call(this,t,"LogBatcherConfigImpl")||this).config=e,t.MNb=n.fa(5e5),t.fXb=r.H8(1),t.w2a=n.fa(1e6),t}_esm(e),e.VEa=void 0,t=i(1),n=i(52),r=i(4),a=i(0),o=i(13),s=i(45),u=i(46),i=i(37),T(h,u.Ze),it.Object.defineProperties(h.prototype,{Iha:{configurable:!0,enumerable:!0,get:function(){return this.config().Iha}},m9a:{configurable:!0,enumerable:!0,get:function(){return[]}},l9a:{configurable:!0,enumerable:!0,get:function(){return["MslTransport","Pbo","LogblobSender"]}}}),c=h,t.__decorate([s.config(s.object(),"shedLogblobTypes")],c.prototype,"m9a",null),t.__decorate([s.config(s.Cy("string"),"shedDebugTypes")],c.prototype,"l9a",null),c=t.__decorate([a.R(),t.__param(0,a.l(i.Wl)),t.__param(1,a.l(o.Zc))],c),e.VEa=c},function(t,e,i){var n,r,a,h,o,s,u,c,f;function l(t,e,i,n,r,a,o,s,u,c){this.platform=e,this.xka=i,this.type=n,this.severity=r,this.timestamp=a,this.Aa=s,this.data=o,this.data.type=n,this.data.sev=r,this.data.devmod=this.platform.fz,this.data.clver=this.platform.version,t&&t.he&&(t.he.os&&(this.data.osplatform=t.he.os.name,this.data.osver=t.he.os.version),this.data.browsername=t.he.name,this.data.browserver=t.he.version),t.Spa&&(this.data.tester=!0),t.Cz&&!this.data.groupname&&(this.data.groupname=t.Cz),t.SL&&(this.data.groupname=this.data.groupname?this.data.groupname+"|"+t.SL:t.SL),t.mJ&&(this.data.uigroupname=t.mJ),this.data.uigroupname&&(this.data.groupname=this.data.groupname?this.data.groupname+("|"+this.data.uigroupname):this.data.uigroupname),this.data.appLogSeqNum=this.Aa.fGb(),this.data.uniqueLogId=u.OWa(),this.data.appId=this.Aa.id,c&&(t=this.Aa.Yb(),this.data.soffms=t.Qa(c.vk).da(h.ja),this.data.mid=this.data.mid||c.J,this.data.lvpi=c.Gqa,this.data.uiLabel=c.ye,this.data.uxLabels=c.Laa,n="startup"===n?"playbackxid":"xid",this.data[n]="xid"===n&&this.data.xid||c.ba,c.II&&(n=c.II,(c=c.II.split("."))&&1<c.length&&"S"!==c[0][0]&&(n="SABTest"+c[0]+".Cell"+c[1]),this.data.groupname=this.data.groupname?this.data.groupname+"|"+n:n))}function p(t,e,i,n,r,a){this.za=t,this.xka=e,this.config=i,this.Aa=n,this.d2b=r,this.platform=a}_esm(e),e.cFa=void 0,t=i(1),n=i(52),r=i(0),a=i(38),h=i(4),o=i(330),s=i(40),u=i(18),c=i(485),i=i(34),p.prototype.Gt=function(t,e,i,n){return new l(this.config,this.platform,this.xka,t,e,this.za.ff,i,this.Aa,this.d2b,n)},f=p,f=t.__decorate([r.R(),t.__param(0,r.l(a.Uh)),t.__param(1,r.l(o.NAa)),t.__param(2,r.l(s.Tm)),t.__param(3,r.l(u.jd)),t.__param(4,r.l(c.RLa)),t.__param(5,r.l(i.Hk))],f),e.cFa=f,it.Object.defineProperties(l.prototype,{size:{configurable:!0,enumerable:!0,get:function(){return this.DRa||(this.DRa=n.fa(this.xka.encode(this.data).length)),this.DRa}}})},function(t,e,i){var n,r,a;function o(t){this.gk=t}_esm(e),e.dFa=void 0,t=i(1),n=i(0),r=i(52),i=i(91),o.prototype.XMb=function(){var t=this.gk()?this.gk().Vk.length:40;return r.fa(t+33)},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(i.zx))],a),e.dFa=a},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k;function S(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v){this.L$a=t,this.Vf=e,this.tra=i,this.Vla=n,this.pe=r,this.L4=a,this.hf=o,this.config=s,this.Fd=u,this.za=c,this.Aa=h,this.platform=f,this.Aq=l,this.Yz=p,this.Vi=d,this.Kr=b,this.JH=m,this.yc=g,this.yD=v}_esm(e),e.mR=void 0,t=i(1),n=i(444),r=i(49),a=i(29),o=i(452),s=i(276),u=i(0),c=i(180),h=i(487),f=i(488),l=i(87),p=i(13),d=i(38),b=i(18),m=i(34),g=i(89),v=i(120),y=i(161),w=i(39),_=i(40),E=i(283),i=i(70),S.prototype.create=function(t,e){return new h.oR(t,e,this.L$a,this.Vf,this.tra,this.Vla,this.pe,this.L4,this.hf,this.config,this.Fd,this.za,this.Aa,this.Aq,this.Yz,this.Vi,this.Kr,this.JH,this.yc,this.yD)},k=S,k=t.__decorate([u.R(),t.__param(0,u.l(n.kLa)),t.__param(1,u.l(r.Um)),t.__param(2,u.l(o.VFa)),t.__param(3,u.l(s.oca)),t.__param(4,u.l(a.cg)),t.__param(5,u.l(f.uBa)),t.__param(6,u.l(l.Hx)),t.__param(7,u.l(p.Zc)),t.__param(8,u.l(v.sF)),t.__param(9,u.l(d.Uh)),t.__param(10,u.l(b.jd)),t.__param(11,u.l(m.Hk)),t.__param(12,u.l(w.KR)),t.__param(13,u.l(g.Ix)),t.__param(14,u.l(y.hF)),t.__param(15,u.l(_.Tm)),t.__param(16,u.l(E.qda)),t.__param(17,u.l(c.Yca)),t.__param(18,u.l(i.Vs))],k),e.mR=k},function(t,e,i){var n;_esm(e),e.sBa=void 0,n=i(52),e.sBa=function(t,e){this.LAb=t,this.size=e.Fpa()?n.Gb:e}},function(t,e){_esm(e),e.q2a=void 0,e.q2a=function(t,e){var i,n;if(0!==t.length){if(1===t.length)return t[0];for(var r=t[0],a=e(r),o=1;o<t.length;o++)a<(n=e(i=t[o]))&&(r=i,a=n);return r}}},function(t,e,i){var n,a,r,o,s,u,c,h,f,l;function p(t,e,i){this.platform=t,this.config=e,this.Aa=i,this.aMa=/-?l(\d\d)/i}_esm(e),e.hFa=void 0,t=i(1),n=i(0),a=i(47),r=i(18),o=i(3),s=i(34),u=i(4),c=i(13),h=i(24),f=i(11),l=i(160),p.prototype.pq=function(t,e,i){i&&(t.adlid=i.Bc,t.abitrate=i.bitrate),e&&(t.vdlid=e.Bc,t.vbitrate=e.bitrate)},p.prototype.p_a=function(t,e,i){i?t=Object.assign(t,l.Ena(this.platform.bq,i)):t.errorcode=o.M.Vl,t.errorcode===this.platform.bq+o.M.dHa&&(t.lastSyncWithVideoElement=this.getTime()-e.jZ)},p.prototype.w_a=function(t,e){var i;Object.assign(t,l.Pna());try{i=e.getBoundingClientRect(),t.rendersize=i.width+"x"+i.height,t.renderpos=i.left+"x"+i.top}catch(t){}},p.prototype.v_a=function(t,e){var i=e.qc[a.Tb.Ta.Mb].value,n=e.qc[a.Tb.Ta.Wb].value,r=e.jf.value;e=e.oe.value,i&&(t.cdnid=i.id,t.cdnname=i.name),n&&(t.acdnid=n.id,t.acdnname=n.name),null!=r&&r.stream&&(t.adlid=r.stream.Bc,t.abitrate=r.stream.bitrate),null!=e&&e.stream&&(t.vdlid=e.stream.Bc,t.vbitrate=e.stream.bitrate,t.vheight=e.stream.height,t.vwidth=e.stream.width)},p.prototype.t_a=function(t,e){0<=e.mediaTime.value&&(t.moff=h.Go(e.mediaTime.value),t.moffms=h.Sf(e.mediaTime.value))},p.prototype.m_a=function(t,e){e.Fg&&(t.pbcid=e.Fg),e.Ti&&(t.playbackcontextid=e.Ti)},p.prototype.apa=function(t){var e,i;t.browserua=f.xB,t.browseruad=null===(i=null===(e=f.kf.userAgentData)||void 0===e?void 0:e.brands)||void 0===i?void 0:i.map(function(t){return[t.brand,t.version]}),t.browserhref=location.href,(e=f.kf&&f.kf.connection&&f.kf.connection.type)&&(t.nettype=e)},p.prototype.sN=function(t){var e,i;this.config().IBb&&(i=null===(e=null===f.kf||void 0===f.kf?void 0:f.kf.connection)||void 0===e?void 0:e.effectiveType,e=null===f.kf||void 0===f.kf?void 0:f.kf.deviceMemory,i&&(t.effectiveType=i),e&&(t.deviceMemory=e)),(i=null===(e=null===f.kf||void 0===f.kf?void 0:f.kf.connection)||void 0===e?void 0:e.type)&&(t.connectionType=i),"number"==typeof(e=null===(i=null===f.kf||void 0===f.kf?void 0:f.kf.connection)||void 0===i?void 0:i.downlink)&&isFinite(e)&&(t.downlink=e),"number"==typeof(i=null===(e=null===f.kf||void 0===f.kf?void 0:f.kf.connection)||void 0===e?void 0:e.rtt)&&isFinite(i)&&(t.rtt=i)},p.prototype.U6=function(t,e){(e=e.bb.Jm)&&(e.isUIAutoPlay&&(t.isUIAutoPlay=!0),e.clLogId&&(t.cl_log_id=e.clLogId))},p.prototype.tN=function(t,e){var i,n,r,a=this;(e=e&&e.streams)&&(i=new Set,n=new Set,r=new Set,e.forEach(function(t){t=t.kh,i.add(t),n.add(t.replace(a.aMa,"")),(t=t.match(a.aMa))&&0<t.length&&r.add(t[1])}),t.videoProfiles=[].concat(G(i)),t.videoProfile=0===n.size?"none":[].concat(G(n))[0],t.videoProfileLevels=[].concat(G(r)))},p.prototype.j_a=function(t,e){var i;(e=e&&e.streams)&&(i={},e.forEach(function(t){i[t.kh]=void 0}),t.audioProfiles=Object.keys(i))},p.prototype.n_a=function(t){t.configversion=this.config().version,this.config().endpoint||(t.configendpoint="error")},p.prototype.getTime=function(){return this.Aa.Yb().da(u.ja)},i=p,i=t.__decorate([n.R(),t.__param(0,n.l(s.Hk)),t.__param(1,n.l(c.Zc)),t.__param(2,n.l(r.jd))],i),e.hFa=i},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n,r){this.Vf=t,this.config=e,this.za=i,this.Aa=n,this.Iqa=r}_esm(e),e.pR=void 0,t=i(1),n=i(49),r=i(0),a=i(180),o=i(13),s=i(38),u=i(18),c=i(1106),h.prototype.create=function(t,e,i){var n=this.Iqa.create(t,e);return new c.rR(t,e,i,this.Vf,this.config,this.Aa,n)},i=h,i=t.__decorate([r.R(),t.__param(0,r.l(n.Um)),t.__param(1,r.l(o.Zc)),t.__param(2,r.l(s.Uh)),t.__param(3,r.l(u.jd)),t.__param(4,r.l(a.nR))],i),e.pR=i},function(t,e,i){var n,u,r,c,h;function a(t,e,i,n,r,a,o){var s=this;this.j=t,this.va=e,this.Vf=n,this.config=r,this.Aa=a,this.kb=o,this.Wz=function(i,n){return function(t){var e=n(t);if("number"!=typeof e)throw Error("Event "+JSON.stringify(t)+" does not have movie Id");e===s.J&&i(t)}},this.c2a=this.Wz(function(t){s.T$(t.p7)},function(t){return t.J}),this.a2a=this.Wz(function(){s.bU()},function(t){return t.J}),this.rSa=this.Wz(function(){s.bU()},function(t){return t.movieId}),this.vja=this.Wz(function(){s.j.yb.value===h.cb.Kc&&(s.j.yb.removeListener(s.vja),s.Cq())},function(){return s.j.J}),this.UA=function(t){s.uA&&s.kb.UA(t)},this.wSa=this.Wz(this.kb.jvb,function(t){return t.J}),this.HUa=this.Wz(this.kb.FAb,function(t){return t.J}),this.A1a=this.Wz(this.kb.Xz,function(t){return s.j.um(t.segmentId).J}),this.y8a=this.Wz(this.kb.GY,function(t){return s.j.um(t.segmentId).J}),this.wUa=this.Wz(this.kb.hla,function(t){return t.J}),this.wk=function(t){switch(t.skip&&(s.Vn=!0),t.cause){case h.Ce.CB:case h.Ce.UR:s.qs&&s.jp&&s.kb.ota(s.getTime()-s.jp,s.qs),s.qs="repos",s.kb.QO(t.Csa,t.jf,t.oe),s.jp=s.getTime(),c.Rf(s.fw);break;case h.Ce.c0:s.qs="force_rebuffer",s.jp=s.getTime(),c.Rf(s.fw)}},this.gm=function(t){s.Tz=t.oldValue,s.kb.gm(t)},this.fw=function(){var t;s.jp&&s.j.yb.value!==h.cb.Pf&&(t=s.getTime()-s.jp,s.kb.$O(t,s.Vn,s.qs),s.Tz&&s.Tz!=s.j.oc.value&&s.kb.uia(),s.jp=void 0,s.qs=void 0,s.Vn=void 0)},this.Cq=function(){s.uA||(s.uA=!0,s.kb.gE(!1),s.hpa(),s.config().b7&&(s.Mz=pt.setTimeout(function(){s.Vf.flush(!1).catch(function(){return s.log.warn("failed to flush log batcher on initialLogFlushTimeout")}),s.Mz=void 0},s.config().b7)))},this.kg=function(){s.Mz&&(pt.clearTimeout(s.Mz),s.Mz=void 0),(s.config().M4||s.config().GL)&&(s.jla&&(pt.clearInterval(s.jla),s.jla=void 0),s.kb.uUa()),s.JZ&&s.JZ(),s.uA?s.kb.MG(!!s.j.li):s.j.li?s.kb.gE(!0):s.va.background||s.kb.pta()},this.VZ=function(t){t.oldValue&&t.om&&t.om.nG&&s.kb.WL(t.oldValue,t.newValue,t.om.nG,t.om.NT)},this.PX=function(t){var e;t.newValue&&(e=t.newValue.stream,s.zH!=e&&(s.zH&&s.kb.Oua(s.zH,e,t.newValue.im.startTime),s.zH=e))},this.J=e.J,this.log=u.Ih(t,"LogblobBuilder"),this.xb(),i&&this.T$()}_esm(e),e.rR=void 0,n=i(12),u=i(8),r=i(4),c=i(61),h=i(15),a.prototype.xb=function(){this.j.addEventListener(h.ca.CH,this.c2a),this.j.addEventListener(h.ca.Yqa,this.a2a),this.j.addEventListener(h.ca.Xz,this.A1a),this.j.addEventListener(h.ca.GY,this.y8a),this.j.addEventListener(h.ca.kg,this.rSa),this.j.addEventListener(h.ca.GG,this.wUa,n.P0),(this.config().M4||this.config().GL)&&(this.j.addEventListener(h.ca.GG,this.HUa),this.jla=pt.setInterval(this.kb.uUa,this.config().KAb)),this.config().Uua&&this.j.addEventListener(h.ca.GG,this.wSa)},a.prototype.T$=function(t){var e=this;this.p3a||(this.j.yb.value!==h.cb.Kc||void 0!==t&&t?this.j.yb.addListener(this.vja):this.Cq(),this.j.ci.addListener(this.UA),this.j.jc.addListener(this.kb.Rl),this.j.oc.addListener(this.gm),this.j.jh.addListener(this.kb.HT),this.j.paused.addListener(this.kb.y9),this.j.oe.addListener(this.PX),this.j.yb.addListener(this.fw),this.j.yb.addListener(this.kb.hab),this.j.We.addListener(this.VZ),this.j.playbackRate.addListener(this.kb.UY),this.j.addEventListener(h.ca.ei,this.kb.ei),this.j.addEventListener(h.ca.FL,this.kb.FL),this.j.addEventListener(h.ca.DP,this.kb.DP),this.j.addEventListener(h.ca.Jy,function(t){e.qs="rebuffer",e.kb.Jy(t),e.jp=e.getTime(),c.Rf(e.fw)}),this.j.addEventListener(h.ca.wk,this.wk),this.j.addEventListener(h.ca.IP,this.kb.IP),this.va.Np&&this.va.Np.addListener(this.kb.Np),this.p3a=!0)},a.prototype.bU=function(){this.kg(),this.p3a&&(this.j.removeEventListener(h.ca.CH,this.c2a),this.j.removeEventListener(h.ca.Yqa,this.a2a),this.j.removeEventListener(h.ca.Xz,this.A1a),this.j.removeEventListener(h.ca.GY,this.y8a),this.j.ci.removeListener(this.UA),this.j.jc.removeListener(this.kb.Rl),this.j.oc.removeListener(this.gm),this.j.jh.removeListener(this.kb.HT),this.j.paused.removeListener(this.kb.y9),this.j.oe.removeListener(this.PX),this.j.yb.removeListener(this.fw),this.j.yb.removeListener(this.vja),this.j.yb.removeListener(this.kb.hab),this.j.We.removeListener(this.VZ),this.j.playbackRate.removeListener(this.kb.UY),this.j.removeEventListener(h.ca.GG,this.wUa),this.j.removeEventListener(h.ca.kg,this.rSa),this.j.removeEventListener(h.ca.ei,this.kb.ei),this.j.removeEventListener(h.ca.FL,this.kb.FL),this.j.removeEventListener(h.ca.DP,this.kb.DP),this.j.removeEventListener(h.ca.Jy,this.kb.Jy),this.j.removeEventListener(h.ca.wk,this.wk),this.j.removeEventListener(h.ca.IP,this.kb.IP),this.va.Np&&this.va.Np.removeListener(this.kb.Np),this.j.removeEventListener(h.ca.GG,this.HUa),this.j.removeEventListener(h.ca.GG,this.wSa))},a.prototype.getTime=function(){return this.Aa.Yb().da(r.ja)},a.prototype.hpa=function(){var t,e=this,i=[];this.config().Z2a&&(this.config().$2a.forEach(function(t){i.push(pt.setTimeout(e.kb.zD,t))}),this.config().v8&&(t=pt.setInterval(this.kb.zD,this.config().v8)),this.JZ=function(){i.forEach(function(t){pt.clearTimeout(t)}),t&&pt.clearInterval(t)})},e.rR=a},function(t,e,i){var n,r,a,o,s,u,c,h,f;_esm(e),e.C3a=void 0,t=i(0),n=i(1108),r=i(87),a=i(491),o=i(1109),s=i(284),u=i(492),c=i(1110),h=i(429),f=i(1114),e.C3a=new t.rd(function(t){t(a.oMa).to(n.nMa).aa(),t(r.Hx).nE(function(){return pt._cad_global.http}),t(s.K0).to(o.GGa).aa(),t(u.HGa).$i(c.default),t(h.BDa).to(f.ADa).aa()})},function(t,e,i){function n(){}_esm(e),e.nMa=void 0,t=i(1),i=i(0),n.prototype.create=function(){return new XMLHttpRequest},i=t.__decorate([i.R()],n),e.nMa=i},function(t,e,i){var n,r,a,o;function s(t,e,i){this.config=t,this.PMb=e,this.Qb=i}_esm(e),e.GGa=void 0,t=i(1),n=i(319),r=i(0),a=i(183),i=i(492),s.prototype.mka=function(){if(this.config.qbb)return this.Qb(this.PMb())},o=s,o=t.__decorate([r.R(),t.__param(0,r.l(n.FGa)),t.__param(1,r.l(a.CGa)),t.__param(2,r.l(i.HGa))],o),e.GGa=o},function(t,e,i){var n,r,a;_esm(e),n=i(1111),r=i(1112),a=i(1113),e.default=function(t){var e;return t=new n.rba(t),e=new a.dib(t),new r.cib(t,e)}},function(t,e){function i(t){this.y1a=t}_esm(e),i.prototype.Wva=function(t){try{this.y1a.setItem("gtp",JSON.stringify(t))}catch(t){return!1}return!0},i.prototype.VXa=function(){var t;try{if(t=this.y1a.getItem("gtp"))return JSON.parse(t)}catch(t){}},i.prototype.Zt=function(){var t=this.VXa();if(t&&t.tp)return t.tp.a},i.prototype.UFb=function(){var t=this.qna();if(t)return t.p25},i.prototype.VFb=function(){var t=this.qna();if(t)return t.p50},i.prototype.WFb=function(){var t=this.qna();if(t)return t.p75},i.prototype.qna=function(){var t=this.VXa();if(t=t&&t.iqr)return t},e.rba=i},function(t,e){function i(t,e){this.Yv=t,this.hX=e}_esm(e),i.prototype.Wva=function(t){return this.Yv.Wva(t)},i.prototype.Zt=function(){return this.Yv.Zt()},i.prototype.wGb=function(){return this.hX.hX()},e.cib=i},function(t,e){function i(t){this.Yv=t}_esm(e),i.prototype.hX=function(){var t=this.Yv.UFb(),e=this.Yv.VFb(),i=this.Yv.WFb();if("number"==typeof t&&"number"==typeof e&&"number"==typeof i)return(i-t)/e},e.dib=i},function(t,e,i){var n,r,a;function o(t,e){this.hf=e,this.ta=t.ib("HttpDispatcherImpl")}_esm(e),e.ADa=void 0,t=i(1),n=i(0),r=i(7),i=i(87),o.prototype.download=function(a,o){var s=this;return o=void 0===o?{F2a:0}:o,new Promise(function(i,n){var r;r=0,s.hf.download(a,function t(e){return e.$?i(e.content):r===o.F2a?n({na:e.na,cD:e.ik}):(r++,void s.hf.download(a,t))})})},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(i.Hx))],a),e.ADa=a},function(t,e,i){var n,r,a,o,s,u,c,h;_esm(e),e.KWa=void 0,t=i(0),n=i(1116),r=i(1117),a=i(1118),o=i(1119),s=i(1120),u=i(493),c=i(494),h=i(167),e.KWa=new t.rd(function(t){t(h.KCa).to(n.JCa).aa(),t(h.MJa).to(r.LJa).aa(),t(h.KJa).to(a.JJa).aa(),t(u.GCa).to(o.FCa).aa(),t(c.EDa).to(s.DDa).aa()})},function(t,e,i){var d,n,b,r,a,o,s,u;function c(t,e,i,n,r,a,o){this.config=t,this.b_a=e,this.Oc=i,this.tc=n,this.LVb=r,this.Sua=a,this.yLb=0,this.ta=o.ib("FTL")}_esm(e),e.JCa=void 0,t=i(1),n=i(0),b=i(4),r=i(48),a=i(7),o=i(493),s=i(494),i=i(167),c.prototype.start=function(){this.config.enabled&&!this.rs&&(this.rs=this.Oc.zk(this.config.L9a,this.ax.bind(this)))},c.prototype.stop=function(){this.rs&&(this.rs.cancel(),this.rs=void 0)},c.prototype.ax=function(){var i=this,t=this.config.endpoint+(-1===this.config.endpoint.indexOf("?")?"?":"&")+"iter="+this.yLb++;this.yHb(t).then(function(e){return Promise.all(e.urls.map(function(t){return i.pIb(e,t.url,t.name)})).then(function(t){0<t.length&&i.LVb.oY({data:t,context:e.context,Jqa:e.Jqa})}).then(function(){return e})}).then(function(t){i.rs&&(t.Q0a?i.rs=i.Oc.zk(t.Q0a,i.ax.bind(i)):i.stop())}).catch(function(t){return i.ta.error("FTL run failed",t)})},c.prototype.yHb=function(i){var n=this;return this.b_a.get(i,!1).then(function(t){var e;return 200!=t.status||null==t.body?(n.Sua.oY({url:i,status:t.status,lta:"FTL API request failed",ke:t.ke}),Promise.reject(Error("FTL API request failed: "+t.status))):(e=n.tc.parse(t.body))instanceof Error?(n.Sua.oY({url:i,status:4,lta:"FTL Probe API JSON parsing error",ke:t.ke}),Promise.reject(e)):Promise.resolve(e)}).catch(function(t){return t instanceof Error&&(n.Sua.oY({url:i,status:0,lta:t.message}),n.ta.error("FTL API call failed",t.message)),Promise.reject(t)})},c.prototype.pIb=function(h,f,l){var p=this;return new Promise(function(e,i){for(var t,n,r,a,o,s=[],u={},c=0;c<h.kUb;u={aba:u.aba,bba:u.bba},++c)u.aba=c<h.s6a.length?h.s6a[c]:b.Gb,u.bba=f+(-1===f.indexOf("?")?"?":"&")+"pulse="+(c+1),t=function(t){return function(){return new Promise(function(i,e){p.Oc.zk(t.aba,function(){d.QTb(p.b_a,t.bba,h.jUb).then(function(t){function e(t,e,i){return t=t||i.headers[e]}n=e(n,"via",t),r=e(r,"x-ftl-probe-data",t),a=e(a,"x-ftl-error",t),o=e(o,"latency-trace",t),t={status:t.status,ke:t.ke,p2b:n||"",Kub:r||"",XU:a||"",aMb:p.SRb(o)},i(t)}).catch(function(t){e(t)})})})}}(u),s.push(0<c?s[c-1].then(t):t());Promise.all(s).then(function(t){e({url:f,name:l,data:t})}).catch(function(t){i(t)})})},c.prototype.SRb=function(t){var e;if(t){e={};for(var i=(t=nt(t.split(";"))).next();!i.done;i=t.next())if((i=i.value.trim().split("="))&&2==i.length)try{e[i[0].trim()]=Number.parseInt(i[1])}catch(t){}return e}},c.QTb=function(t,e,i){return t.get(e,!1,i).then(function(t){return Object.assign({},t)})},u=d=c,u=d=t.__decorate([n.R(),t.__param(0,n.l(i.ICa)),t.__param(1,n.l(s.EDa)),t.__param(2,n.l(r.Qj)),t.__param(3,n.l(o.GCa)),t.__param(4,n.l(i.MJa)),t.__param(5,n.l(i.KJa)),t.__param(6,n.l(a.qb))],u),e.JCa=u},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.Vf=t,this.Cra=e}_esm(e),e.LJa=void 0,t=i(1),r=i(0),a=i(52),o=i(4),s=i(49),i=i(89),c.prototype.oY=function(t){var e={ctx:t.context,data:t.data.map(function(t){return{name:t.name,url:t.url,data:t.data.map(function(t){return n.V2b({d:t.ke.duration.da(o.ja),sc:t.status,sz:t.ke.size.da(a.ov),via:t.p2b,cip:t.Kub,err:t.XU},t)})}})};t=this.Cra.Gt(t.Jqa,"info",e),this.Vf.Hc(t)},c.V2b=function(t,e){return n.Xv(t,"dns",e.ke.BUa),n.Xv(t,"tcp",e.ke.cxa),n.Xv(t,"tls",e.ke.mxa),n.Xv(t,"ttfb",e.ke.ixa),n.Fqb(t,e.aMb),t},c.Fqb=function(t,e){e&&(t.rtts=e)},c.Xv=function(t,e,i){i&&(t[e]=i.da(o.ja))},u=n=c,u=n=t.__decorate([r.R(),t.__param(0,r.l(s.Um)),t.__param(1,r.l(i.Ix))],u),e.LJa=u},function(t,e,i){var n,r,a,o,s,u;function c(t,e){this.Vf=t,this.Cra=e}_esm(e),e.JJa=void 0,t=i(1),r=i(0),a=i(52),o=i(4),s=i(49),i=i(89),c.prototype.oY=function(t){t=this.Cra.Gt("ftlProbeError","info",n.U2b({url:t.url,sc:t.status,pf_err:t.lta},t)),this.Vf.Hc(t)},c.U2b=function(t,e){return e.ke&&(e=e.ke,n.Xv(t,"d",e.duration),n.Xv(t,"dns",e.BUa),n.Xv(t,"tcp",e.cxa),n.Xv(t,"tls",e.mxa),n.Xv(t,"ttfb",e.ixa),t.sz=e.size.da(a.ov)),t},c.Xv=function(t,e,i){i&&(t[e]=i.da(o.ja))},u=n=c,u=n=t.__decorate([r.R(),t.__param(0,r.l(s.Um)),t.__param(1,r.l(i.Ix))],u),e.JJa=u},function(t,e,i){var n,r,a,o,s;function u(t,e){this.is=t,this.json=e,r.Qo(this,"json")}_esm(e),e.FCa=void 0,t=i(1),n=i(0),r=i(56),a=i(39),o=i(4),i=i(27),u.prototype.parse=function(t){var e;if(t=this.json.parse(t),!this.is.xha(t))throw Error("FtlProbe: param: not an object");if(t.next&&!this.is.qT(t.next))throw Error("FtlProbe: param.next: not a positive integer");if(!this.is.qT(t.pulses))throw Error("FtlProbe: param.pulses: not a positive integer");if(t.pulse_delays&&!this.is.By(t.pulse_delays))throw Error("FtlProbe: param.pulse_delays: not an array");if(!this.is.qT(t.pulse_timeout))throw Error("FtlProbe: param.pulse_timeout: not a positive integer");if(!this.is.By(t.urls))throw Error("FtlProbe: param.urls: not an array");if(!this.is.kn(t.logblob))throw Error("FtlProbe: param.logblob: not a string");if(!this.is.CL(t.ctx))throw Error("FtlProbe: param.ctx: not an object");for(var i=0;i<t.urls.length;++i){if(e=t.urls[i],!this.is.xha(e))throw Error("FtlProbe: param.urls["+i+"]: not an object");if(!this.is.Ip(e.name))throw Error("FtlProbe: param.urls["+i+"].name: not a string");if(!this.is.Ip(e.url))throw Error("FtlProbe: param.urls["+i+"].url: not a string")}return{kUb:t.pulses,s6a:t.pulse_delays?t.pulse_delays.map(o.Nc):[],jUb:o.Nc(t.pulse_timeout),Q0a:t.next?o.Nc(t.next):void 0,urls:t.urls,Jqa:t.logblob,context:t.ctx}},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.bg)),t.__param(1,n.l(a.LE))],s),e.FCa=s},function(t,e,i){var c,n,r,h,a,o,s,u,f;function l(t,e,i){this.za=t,this.X2b=e,this.performance=i,n.Qo(this,"performance")}_esm(e),e.DDa=void 0,t=i(1),n=i(56),r=i(278),h=i(52),a=i(39),o=i(38),s=i(0),u=i(491),f=i(4),l.prototype.get=function(o,t,s){var u=this;return new Promise(function(e,i){var n,r,a;try{"withCredentials"in(n=u.X2b.create())||i(Error("Missing CORS support")),n.open("GET",o,!0),t&&(n.withCredentials=!0),s&&(n.timeout=s.da(f.ja)),r=u.za.ff,a=void 0,n.onreadystatechange=function(){var t;switch(n.readyState){case XMLHttpRequest.HEADERS_RECEIVED:a=u.za.ff.Qa(r);break;case XMLHttpRequest.DONE:t=u.za.ff.Qa(r),t={body:n.responseText,status:n.status,headers:c.Vsa(n.getAllResponseHeaders()),ke:u.xna(o,h.fa(n.responseText.length),t,a)},e(t)}},n.send()}catch(t){i(t)}})},l.Vsa=function(t){var e,i,n={};t=t.split("\r\n");for(var r=0;r<t.length;r++)0<(i=(e=t[r]).indexOf(": "))&&(n[e.substring(0,i).toLowerCase()]=e.substring(i+2));return n},l.prototype.xna=function(t,e,i,n){return e={size:e,duration:i,ixa:n},this.performance&&this.performance.getEntriesByName&&(0==(i=this.performance.getEntriesByName(t)).length&&0==(i=this.performance.getEntriesByName(t+"/")).length||(t=i[i.length-1],e=r.PN(e),t.decodedBodySize&&(e.size=h.fa(t.decodedBodySize)),0<t.duration?e.duration=f.timestamp(t.duration):0<t.startTime&&0<t.responseEnd&&(e.duration=f.timestamp(t.responseEnd-t.startTime)),0<t.requestStart&&(e.BUa=f.timestamp(t.domainLookupEnd-t.domainLookupStart),e.cxa=f.timestamp(t.connectEnd-t.connectStart),e.ixa=f.timestamp(t.responseStart-t.startTime),0===t.secureConnectionStart?e.mxa=f.timestamp(0):void 0!==t.secureConnectionStart&&(i=t.connectEnd-t.secureConnectionStart,e.mxa=f.timestamp(i),e.cxa=f.timestamp(t.connectEnd-t.connectStart-i))))),e},i=c=l,i=c=t.__decorate([s.R(),t.__param(0,s.l(o.Uh)),t.__param(1,s.l(u.oMa)),t.__param(2,s.l(a.Rda)),t.__param(2,s.optional())],i),e.DDa=i},function(t,e,i){var n,r,a,o;_esm(e),e.q6a=void 0,t=i(0),n=i(320),r=i(1122),a=i(188),o=i(1123),e.q6a=new t.rd(function(t){t(n.CBa).to(r.BBa).aa(),t(a.lR).to(o.QEa).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n){this.ce=t,this.Fy=e,this.a2b=i,this.JN=n}_esm(e),e.BBa=void 0,t=i(1),n=i(0),r=i(29),a=i(36),o=i(78),s=i(137),u=i(57),c=i(63),i=i(188),f.prototype.Hg=function(t){var e=this;return this.ce.Bt(t.dk[0].data[0],[8,4])?Promise.resolve({we:[{id:"ddd",BH:"cert",zW:void 0}],qj:[{sessionId:"ddd",data:new Uint8Array(this.Fy.decode(c.eMa))}]}):this.ce.Bt(t.dk[0].data[0],this.a2b.decode("certificate"))?Promise.resolve({we:[{id:"ddd",BH:"cert",zW:void 0}],qj:[{sessionId:"ddd",data:new Uint8Array(this.Fy.decode(c.b0))}]}):this.JN.vy(this.SDb(t)).then(function(t){return e.TDb(t)})},f.prototype.release=function(t){return this.JN.release(this.WDb(t)).then(function(){})},f.prototype.SDb=function(t){var i=this,e=t.dk.map(function(e){return e.data.map(function(t){return{sessionId:e.sessionId,dataBase64:i.Fy.encode(t)}})});return{ba:t.ba,Ti:t.Ti,N4:t.N4,Uf:u.tqa(t.Uf),Eo:s.bo[t.Eo],dk:e.reduce(function(t,e){return t.concat(e)},[]),MW:t.MW,lk:t.lk}},f.prototype.WDb=function(t){return{ba:t.ba,we:t.we}},f.prototype.TDb=function(t){return{we:t.we,qj:t.qj}},h=f,h=t.__decorate([n.R(),t.__param(0,n.l(r.cg)),t.__param(1,n.l(a.Ci)),t.__param(2,n.l(o.Bv)),t.__param(3,n.l(i.lR))],h),e.BBa=h},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n,r){this.gqb=t,this.jVb=e,this.y7a=n,this.kWb=r,this.ta=i.ib("LicenseProviderImpl")}_esm(e),e.QEa=void 0,t=i(1),n=i(0),r=i(7),a=i(495),i(496),o=i(497),s=i(498),i=i(285),c.prototype.vy=function(t){var e=this,i=this.y7a.m0b(t);return this.gqb.gq(this.ta,t.lk,i).then(function(t){return t.map(function(t){return t.hMb}),e.kWb.mab(t)}).catch(function(t){return e.ta.error("PBO license failed",t),Promise.reject(t)})},c.prototype.release=function(t){var e=this;return t=this.y7a.p0b(t),this.jVb.og(this.ta,t).then(function(){return{$:!0}}).catch(function(t){return e.ta.error("PBO release license failed",t),Promise.reject(t)})},u=c,u=t.__decorate([n.R(),t.__param(0,n.l(a.rHa)),t.__param(1,n.l(o.eIa)),t.__param(2,n.l(r.qb)),t.__param(3,n.l(s.GHa)),t.__param(4,n.l(i.Oda))],u),e.QEa=u},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m;function g(t){return function(){return t.$a.get(n.$Ha).xb()}}_esm(e),e.fI=void 0,t=i(0),n=i(153),r=i(212),a=i(286),o=i(499),s=i(1125),u=i(1126),c=i(500),h=i(1127),f=i(501),l=i(1128),p=i(287),d=i(1129),b=i(502),m=i(1130),e.fI=new t.rd(function(t){t(c.IIa).to(h.HIa).aa(),t(r.Qda).to(a.WHa).aa(),t(o.wHa).to(s.vHa).aa(),t(n.$Ha).to(u.ZHa).aa(),t(n.IR).wZ(g),t(b.YHa).to(m.XHa).aa(),t(f.CHa).to(l.BHa).aa().$Z(),t(p.bIa).to(d.aIa).aa(),t(p.THa).to(d.SHa).aa(),t(p.VHa).to(d.UHa).aa()})},function(t,e,i){var n,r,o,a,s,u,c,h,f,l;function p(){}function d(){}function b(t,e,i,n,r){var a=this;this.is=t,this.Wn=e,this.config=i,this.FG=n,this.bSb=r,this.gx=function(){return(new p).encode({version:a.version,data:a.fI})},this.z1b=function(t){return t=a.upgrade(t),a.bSb.validate(t),t},this.upgrade=function(t){var e;if(a.is.kn(t))return a.C1b(t);if(null!=(e=t.version)&&a.is.Ii(e)&&1==e)return a.D1b(t);if(null!=(e=t.version)&&a.is.Ii(e)&&2==e)return(new p).decode(t);if(t.version&&a.is.Ii(t.version))throw new s.qd(o.M.rB,o.L.Lza,void 0,void 0,void 0,"Version number is not supported. Version: "+t.version,void 0,t);throw new s.qd(o.M.rB,o.L.nB,void 0,void 0,void 0,"The format of the playdata is inconsistent with what is expected.",void 0,t)},this.xs=new u.Jca(2,this.config().J5a,""!==this.config().J5a&&0<this.config().FSb,this.Wn,this.gx)}_esm(e),e.vHa=void 0,t=i(1),n=i(0),r=i(13),o=i(3),a=i(27),s=i(41),u=i(317),c=i(79),h=i(91),f=i(286),i=i(287),b.prototype.xUb=function(){return this.xs.load(this.z1b).catch(function(t){throw new s.qd(o.M.rB,t.na||t.Cc,void 0,void 0,void 0,"Unable to load persisted playdata.",void 0,t)})},b.prototype.Jqb=function(t){return this.xs.add(t)},b.prototype.g7a=function(t){return this.xs.remove(t,function(t,e){return t.ba===e.ba})},b.prototype.Rxa=function(t){return this.xs.update(t,function(t,e){return t.ba===e.ba})},b.prototype.toString=function(){return JSON.stringify(this.gx(),null,"  ")},b.prototype.fbb=function(t){return t?"/events?playbackContextId="+t+"&esn="+this.FG().Vk:""},b.prototype.Vxa=function(t){return t.map(function(t){return{Bc:t.downloadableId,duration:t.duration}})},b.prototype.gbb=function(t){var e;return t?{total:t.playTimes.total,gJ:null!==(e=t.playTimes.totalContentTime)&&void 0!==e?e:t.playTimes.total,audio:this.Vxa(t.playTimes.audio||[]),video:this.Vxa(t.playTimes.video||[]),text:this.Vxa(t.playTimes.timedtext||[])}:{total:0,gJ:0,audio:[],video:[],text:[]}},b.prototype.C1b=function(t){var e,i,n=this;if(t=JSON.parse(t),e={type:"online",href:this.fbb(t.playbackContextId),ba:t.xid?t.xid.toString():"",J:t.movieId,position:t.position,aU:t.timestamp,HY:t.playback?1e3*t.playback.startEpoch:-1,TN:t.mediaId,GX:this.gbb(t.playback),trackId:"",Jm:{},profileId:t.accountKey},i=JSON.stringify({keySessionIds:t.keySessionIds,movieId:t.movieId,xid:t.xid,licenseContextId:t.licenseContextId,profileId:t.profileId}),this.Wn.create().then(function(t){t.save(n.config().JU,i,!1)}),""===e.href||""===e.ba)throw new s.qd(o.M.rB,o.L.nB);return{version:2,data:[e]}},b.prototype.D1b=function(t){var e=this;if(!t.playdata||!this.is.By(t.playdata))throw new s.qd(o.M.rB,o.L.nB,void 0,void 0,void 0,"The version 1 playdata is corrupted.",void 0,t);return{version:2,data:t.playdata.map(function(t){return{type:t.type,href:e.fbb(t.playbackContextId),ba:t.xid?t.xid.toString():"",J:t.movieId,position:t.position,aU:t.timestamp,HY:t.playback?1e3*t.playback.startEpoch:-1,TN:t.mediaId,GX:e.gbb(t.playback),trackId:"",Jm:{},profileId:t.profileId}})}},it.Object.defineProperties(b.prototype,{version:{configurable:!0,enumerable:!0,get:function(){return this.xs.version}},fI:{configurable:!0,enumerable:!0,get:function(){return this.xs.cw}}}),l=b,l=t.__decorate([n.R(),t.__param(0,n.l(a.bg)),t.__param(1,n.l(c.jB)),t.__param(2,n.l(r.Zc)),t.__param(3,n.l(h.zx)),t.__param(4,n.l(i.VHa))],l),e.vHa=l,d.prototype.encode=function(t){var e=new f.T0;return t.map(e.encode)},d.prototype.decode=function(t){var e=new f.T0;return t.map(e.decode)},p.prototype.encode=function(t){return{version:t.version,data:(new d).encode(t.data)}},p.prototype.decode=function(t){return{version:t.version,data:(new d).decode(t.data)}}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b;function m(t,e,i,n,r,a,o,s){this.config=t,this.Oc=i,this.jx=n,this.Au=r,this.I9=a,this.Lh=o,this.xH=Promise.resolve(),this.closed=!1,this.log=e.ib("PlaydataServices"),this.eI=[],this.active=new Set,this.oWb=new g(t,s)}function g(t,e){this.config=t,this.za=e}function v(t,e,i,n,r,a){this.log=t,this.Oc=e,this.Ui=i,this.Au=n,this.jx=r,this.ySb=a,this.RVa=this.Eh=!1}_esm(e),e.ZHa=e.hjb=void 0,t=i(1),n=i(0),r=i(4),a=i(7),o=i(48),s=i(212),u=i(499),c=i(500),h=i(3),f=i(286),l=i(501),p=i(129),d=i(38),i=i(141),v.prototype.J8=function(e,i){var n;function r(){var t=n.Au.create(n.Ui);n.jx.Rxa(t).catch(function(t){var e=n.RVa?a.Nj.afa:a.Nj.Mf;n.RVa=!0,n.log.write(e,"Unable to save playdata changes to IDB",t)})}(n=this).log.trace("Adding initial playdata",i),this.jx.Jqb(i).then(function(){n.log.trace("Scheduling monitor",{interval:e}),n.rs=n.Oc.u$(e,r)}).catch(function(t){n.log.error("Unable to add playdata",{error:t,playdata:(new f.T0).encode(i)}),n.rs=n.Oc.u$(e,r)})},v.prototype.stop=function(t){var e,i=this;return this.Eh?Promise.resolve():(this.rs&&this.rs.cancel(),e=this.Au.create(this.Ui),this.jx.Rxa(e).catch(function(t){i.log.error("Unable to update playdata changes during stop",t)}).then(function(){return t?i.Ui.background?(i.log.trace("Playback is currently in the background and never played, not sending the playdata",e),Promise.resolve()):(i.log.trace("Sending final playdata to the server",e),i.ySb.v8a(e)):void i.log.trace("Currently configured to not send play data, not sending the data to the server")}).then(function(){return t?(i.log.trace("Removing playdata from the persisted store",e),i.jx.g7a(e)):void i.log.trace("Currently configured to not send play data, not removing the play data from IDB")}).then(function(){i.log.info("Successfully stopped the playback",e.J)}).catch(function(t){throw i.log.error("Unable to remove playdata changes",t),t}))},v.prototype.cancel=function(){this.Eh=!0,this.rs&&this.rs.cancel(),this.jx.Rxa(this.Au.create(this.Ui))},it.Object.defineProperties(g.prototype,{Ttb:{configurable:!0,enumerable:!0,get:function(){var t=this.za.ff;return(!this.xH||0<=t.Qa(this.xH).Al(this.config.S0a))&&(this.xH=t,!0)}}}),e.hjb=g,m.prototype.xb=function(){var e=this;return this.gD||(this.log.trace("Starting playdata services"),this.gD=this.jx.xUb().then(function(){return e}).catch(function(t){return e.log.error("Unable to read the playdata, it will be deleted and not sent to the server",t),e})),this.gD},m.prototype.close=function(){this.closed=!0,this.eI.forEach(function(t){t.J8.cancel()})},m.prototype.send=function(t){var e;return!this.closed&&(e=this.config).sO&&e.Jva?this.dXb(t):Promise.resolve()},m.prototype.ap=function(t,e,i,n){var r=this;this.closed||(this.Dwa(t),this.Mva(t,n).catch(function(t){r.log.error("Start command failed",{playdata:t.fI,error:t.XU})}),e&&this.Awa(this.XFb(t),t,i))},m.prototype.$Y=function(t){var e,i,n=this;return this.closed?Promise.resolve():(e=this.Au.create(t),this.active.delete(e.ba),i=(t=nt(p.yu(function(t){return t.key===e.ba},this.eI))).next().value,this.eI=t.next().value,Promise.all(i.map(function(t){return t.stopped=!0,t.J8.stop(n.config.Jva)})).then(function(){}))},m.prototype.Dwa=function(t){var e,i;t.Dd("pdb"),this.config.jta.ZKb()&&(e=this.Au.create(t),i=e.ba,this.eI.some(function(t){return t.key===i})?this.log.trace("Already collecting playdata, ignoring",e):(this.log.info("Starting to collect playdata",e),this.active.add(i),this.eI.push({key:i,J8:this.nGb(t,e),ex:!1,stopped:!1})))},m.prototype.dXb=function(e){var i=this,t=this.jx.fI.filter(function(t){return!i.active.has(t.ba)}),n=void 0,r=void 0;return e&&1/0===e?n=t:(n=(t=nt(p.yu(function(t){return t.J===e},t))).next().value,r=t.next().value),r&&0<r.length&&this.Oc.zk(this.config.s8a,function(){i.u8a(r)}),n&&0!==n.length?this.u8a(n):Promise.resolve()},m.prototype.u8a=function(t){var i;return i=this,t.reduce(function(t,e){return t.then(function(){return t=e,i.I9.v8a(t).then(function(){return i.wVb(t)});var t})},Promise.resolve())},m.prototype.wVb=function(t){var e=this;return this.jx.g7a(t).then(function(){}).catch(function(t){throw e.log.error("Unable to complete the stop lifecycle event",t),t})},m.prototype.nGb=function(t,e){return(t=new v(this.log,this.Oc,t,this.Au,this.jx,this.I9)).J8(this.config.jta,e),t},m.prototype.Mva=function(e,t){var i=this,n=this.Au.Xxb(e,t);return this.I9.Mva(e,n).then(function(){i.eI.filter(function(t){return t.key===e.ba.toString()}).forEach(function(t){t.ex=!0})}).catch(function(t){throw{fI:n,XU:t}})},m.prototype.t8a=function(t){return this.oWb.Ttb?this.DY(l.Nda.pW,t,h.M.Pca):Promise.resolve()},m.prototype.E$=function(t){return this.DY(l.Nda.splice,t,h.M.$Ja)},m.prototype.DY=function(i,n,r){var a;function e(e){var t=a.eI.filter(function(t){return t.key===e.ba.toString()});return 0===t.length||t.reduce(function(t,e){return t||e.stopped||!e.ex},!1)}return a=this,e(n)?this.xH:this.xH=this.xH.catch(function(){return Promise.resolve()}).then(function(){var t;return e(n)?Promise.resolve():(t=a.Au.create(n),a.I9.DY(i,n,t))}).then(function(t){return t}).catch(function(t){var e;throw a.log.error("Failed to send event",{eventKey:i,xid:n.ba,error:t}),!t.hk&&t.mA!==h.D0.Wea||(e=a.Lh(r,t)),{XU:t,wO:e}})},m.prototype.Awa=function(i,n,r){var a=this;this.Jja(),this.Ypa=this.Oc.zk(i,function(){a.Jja(),a.DY(l.Nda.pW,n,h.M.Pca).then(function(){a.Awa(i,n,r)}).catch(function(t){var e=t.XU;(t=t.wO)&&r(t),e.mA===h.D0.Wea&&a.Awa(i,n,r)})})},m.prototype.V9a=function(){this.Jja()},m.prototype.Jja=function(){this.Ypa&&(this.Ypa.cancel(),this.Ypa=void 0)},m.prototype.XFb=function(t){return t.bb.Eoa?r.Nc(t.bb.Eoa):this.config.R0a},b=m,b=t.__decorate([n.R(),t.__param(0,n.l(c.IIa)),t.__param(1,n.l(a.qb)),t.__param(2,n.l(o.Qj)),t.__param(3,n.l(u.wHa)),t.__param(4,n.l(s.Qda)),t.__param(5,n.l(l.CHa)),t.__param(6,n.l(i.LR)),t.__param(7,n.l(d.Uh))],b),e.ZHa=b},function(t,e,i){var n,r,a,o,s,u;function c(t,e){return(t=r.Ze.call(this,t,"PlaydataConfigImpl")||this).config=e,t}_esm(e),e.HIa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(45),s=i(4),i=i(40),T(c,r.Ze),it.Object.defineProperties(c.prototype,{sO:{configurable:!0,enumerable:!0,get:function(){return this.config.nw?"unsentplaydatatest":"unsentplaydata"}},Jva:{configurable:!0,enumerable:!0,get:function(){return!0}},s8a:{configurable:!0,enumerable:!0,get:function(){return s.Nc(1e4)}},jta:{configurable:!0,enumerable:!0,get:function(){return s.Nc(4e3)}},R0a:{configurable:!0,enumerable:!0,get:function(){return s.H8(1)}},S0a:{configurable:!0,enumerable:!0,get:function(){return s.vh(30)}}}),u=c,t.__decorate([o.config(o.string,"playdataPersistKey")],u.prototype,"sO",null),t.__decorate([o.config(o.dd,"sendPersistedPlaydata")],u.prototype,"Jva",null),t.__decorate([o.config(o.$k,"playdataSendDelayMilliseconds")],u.prototype,"s8a",null),t.__decorate([o.config(o.$k,"playdataPersistIntervalMilliseconds")],u.prototype,"jta",null),t.__decorate([o.config(o.$k,"heartbeatCooldown")],u.prototype,"R0a",null),t.__decorate([o.config(o.$k,"keepAliveWindow")],u.prototype,"S0a",null),u=t.__decorate([n.R(),t.__param(0,n.l(a.Wl)),t.__param(1,n.l(i.Tm))],u),e.HIa=u},function(t,e,i){var n,r,a;function o(t,e){this.eU=e,this.log=t.ib("PboEventSenderImpl")}_esm(e),e.BHa=void 0,t=i(1),n=i(82),r=i(7),i=i(0),o.prototype.Mva=function(t,e){var i=this.eU(n.mp.start);return this.KVa(i,t,e)},o.prototype.v8a=function(t){var e=this;return this.eU(n.mp.stop).og(this.log,t).then(function(){}).catch(function(t){throw e.log.error("PBO stop event failed",t),t})},o.prototype.DY=function(t,e,i){return t=this.eU(t),this.KVa(t,e,i)},o.prototype.KVa=function(t,e,i){var n=this;return t.gq(this.log,e.oa.lk,i).then(function(){}).catch(function(t){throw n.log.error("PBO event failed",t),t})},a=o,a=t.__decorate([i.R(),t.__param(0,i.l(r.qb)),t.__param(1,i.l(n.mca))],a),e.BHa=a},function(t,e,i){var n,r,a,o;function s(){}function u(t){this.aSb=t}function c(t){this.cSb=t}_esm(e),e.aIa=e.UHa=e.SHa=void 0,t=i(1),n=i(0),r=i(287),a=i(41),o=i(3),c.prototype.validate=function(t){t.map(this.cSb.validate)},i=c,i=t.__decorate([n.R(),t.__param(0,n.l(r.bIa))],i),e.SHa=i,u.prototype.validate=function(t){this.aSb.validate(t.data)},i=u,i=t.__decorate([n.R(),t.__param(0,n.l(r.THa))],i),e.UHa=i,s.prototype.validate=function(t){var e;if(t.ba&&"string"==typeof t.ba?t.href&&"string"==typeof t.href?t.profileId&&"string"==typeof t.profileId||(e="ProfileId value is corrupted."):e="Href value is corrupted.":e="Xid value is corrupted.",e)throw new a.qd(o.M.rB,o.L.nB,void 0,void 0,void 0,e,void 0,t.ba)},t=t.__decorate([n.R()],s),e.aIa=t},function(t,e,i){var n,r,a,o;function s(t,e){this.p5a=e,this.log=t.ib("PlaydataServices")}_esm(e),e.XHa=void 0,t=i(1),n=i(0),r=i(7),a=i(15),i=i(153),s.prototype.ap=function(n){var r=this;this.p5a().then(function(i){n.addEventListener(a.ca.CH,function(t){var e;void 0!==t.BO&&(e=n.dN(t.BO),i.$Y(e),t.p7||new Promise(function(e){var i;n.yj.value?e():(i=function(t){t.newValue&&(e(),n.yj.removeListener(i))},n.yj.addListener(i))}).then(function(){return i.ap(n,r.p9a(n),function(t){return n.qG(t)},n.aM)}))}),n.addEventListener(a.ca.Cq,function(){i.ap(n,r.p9a(n),function(t){return n.qG(t)},n.aM)}),n.background||n.addEventListener(a.ca.KN,function(t){t=n.dN(t.J),i.Dwa(t)}),n.addEventListener(a.ca.kg,function(){i.V9a()}),n.addEventListener(a.ca.ybb,function(){i.t8a(n.ha).catch(function(t){(t=t.wO)&&n.qG(t)})}),n.jc.addListener(function(){n.bb.fla?r.log.trace("stickiness is disabled for timedtext"):i.E$(n.ha)}),n.oc.addListener(function(){n.bb.fla?r.log.trace("stickiness is disabled for audio"):i.E$(n.ha).catch(function(t){(t=t.wO)&&n.qG(t)})})})},s.prototype.p9a=function(t){return t.state.value==a.Rb.re},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(i.IR))],o),e.XHa=o},function(t,e,i){var n,r,a,o,s,u,c,h;function f(n){return function(){return new Promise(function(t,e){var i=n.$a.get(r.KBa);i.xb().then(function(){t(i)}).catch(function(t){e(t)})})}}_esm(e),e.UUa=void 0,t=i(0),n=i(503),i(1132),r=i(505),a=i(1134),o=i(98),s=i(1135),u=i(506),c=i(1136),h=i(1137),i(1138),e.UUa=new t.rd(function(t){t(u.ZEa).to(c.YEa).aa(),t(n.HBa).to(h.$Ea),t(o.jQ).to(s.Mya).aa(),t(r.KBa).to(a.IBa).aa(),t(r.JBa).wZ(f)})},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i){var n=s.WR.call(this,t,e,"idb")||this;return n.Wn=i,n.X7a=function(t){n.Kzb(t.target.id).then(function(){return n.refresh()})},n.yQb=function(){n.Uub().then(function(){return n.refresh()})},n.VQb=function(){n.refresh()},n.BQb=function(){n.Zvb()},n}_esm(e),e.bhb=void 0,t=i(1),n=i(0),r=i(29),a=i(27),o=i(184),s=i(504),u=i(133),c=i(288),T(h,s.WR),h.prototype.xb=function(){var e=this;return this.En?Promise.resolve():(pt.addEventListener("keydown",function(t){t.ctrlKey&&t.altKey&&t.shiftKey&&t.keyCode==u.tv.$fb&&e.toggle()}),this.Wn.create().then(function(t){e.storage=t,e.En=!0}))},h.prototype.Xk=function(){return'<tr class="'+this.prefix+'-display-headerrow"><th width="30px"><span class="'+this.prefix+'-display-indexheader">#</span></th><th width="150px"><span class="'+this.prefix+'-display-keyheader">Name</span></th><th style="border-right:solid 0px"><span class="'+this.prefix+'-display-valueheader">Value</span></th><th style="border-left:solid 0px" width="30px"><button id="'+this.prefix+'-display-close-btn">X</button></th></tr>'},h.prototype.Ona=function(t,e,i){var n;return t=t.toString(),n='<font color="#C41A16">"'+e+'"</font>',i=this.kb.gi({name:e,data:i}),'<tr><td><span class="'+this.prefix+'-display-indexvalue">'+t+'</span></td><td><span class="'+this.prefix+'-display-keyvalue">'+n+'</span></td><td style="border-right:solid 0px"><ul class="'+this.prefix+'-display-tree">'+i+'</ul></td><td style="border-left:solid 0px"><ul class="'+this.prefix+'-display-item-inline"><button id="'+e+'" class="'+this.prefix+'-display-btn-inline">X</button></ul></td></tr>'},h.prototype.aoa=function(t){var n=this,r='<table class="'+this.prefix+'-display-table" width="100%">'+this.Xk();return Object.entries(t).forEach(function(t,e){var i=nt(t);t=i.next().value,i=i.next().value,r+=n.Ona(e,t,i)}),r+"</table>"},h.prototype.qXa=function(){var t=this.ce.createElement("button",s.EJ,"Clear",{class:this.prefix+"-display-btn"}),e=this.ce.createElement("button",s.EJ,"Refresh",{class:this.prefix+"-display-btn"}),i=this.ce.createElement("button",s.EJ,"Copy",{class:this.prefix+"-display-btn"});return t.onclick=this.yQb,e.onclick=this.VQb,i.onclick=this.BQb,[t,e,i]},h.prototype.KMb=function(){var e=this;return this.storage.loadAll().then(function(t){return e.g_a=t.reduce(function(t,e){return t[e.key]=e.value,t},{}),e.g_a})},h.prototype.Kzb=function(t){return this.storage.remove(t)},h.prototype.Uub=function(){return this.storage.removeAll()},h.prototype.Y6a=function(){var e=this;return this.KMb().then(function(t){return e.aoa(t)})},h.prototype.Zvb=function(){var t=JSON.stringify(this.g_a,null,4);c.E_.ika(t)},i=h,i=t.__decorate([n.R(),t.__param(0,n.l(r.cg)),t.__param(1,n.l(a.bg)),t.__param(2,n.l(o.Kca))],i),e.bhb=i},function(t,e){function i(t){this.is=t,this.ELb="#881391",this.DZb="#C41A16",this.Vsb=this.cQb="#1C00CF",this.mKb="#D79BDB",this.O0b=this.$Pb="#808080"}_esm(e),e.BLa=void 0,i.prototype.gi=function(t){return this.getValue("~~NONAME~~",t)},i.prototype.RC=function(t,e){return'<font color="'+(void 0!==e&&e?this.mKb:this.ELb)+'">'+t+": </font>"},i.prototype.SWa=function(t,e){e=e||"",t='<li><a href="#">'+this.RC(t)+"Array["+e.length+"]</a><ul>";for(var i=0;i<e.length;++i)t+=this.getValue(i.toString(),e[i]);return(t+=this.getValue("length",e.length,!0))+"</ul></li>"},i.prototype.yYa=function(t,e){var i,n=this;return e instanceof CryptoKey?this.$Eb(t,e):(i='<li><a href="#">'+("~~NONAME~~"!==t?this.RC(t):"")+"Object</a><ul>",Object.entries(e).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i=t.startsWith("$")?i+n.getValue(t,"REMOVED"):i+n.getValue(t,e)}),i+="</ul>",i+="</li>")},i.prototype.$Eb=function(t,e){return t=(t='<li><a href="#">'+this.RC(t)+"CryptoKey</a>")+"<ul>"+this.yYa("algorithm",e.algorithm),t+=this.ZWa("extractable",e.extractable),t+=this.cZa("type",e.type),(t+=this.SWa("usages",e.usages))+"</ul></li>"},i.prototype.AGb=function(t,e,i){return'<li><a href="#">'+this.RC(t,void 0!==i&&i)+'<font color="'+this.cQb+'">'+e.toString()+"</font></a></li>"},i.prototype.ZWa=function(t,e,i){return'<li><a href="#">'+this.RC(t,void 0!==i&&i)+'<font color="'+this.Vsb+'">'+e.toString()+"</font></a></li>"},i.prototype.cZa=function(t,e,i){return 128<e.length&&(e=e.substr(0,128)+"..."),'<li><a href="#">'+this.RC(t,void 0!==i&&i)+'<font color="'+this.DZb+'">"'+e+'"</font></a></li>'},i.prototype.zGb=function(t){return'<li><a href="#">'+this.RC(t)+'<font color="'+this.$Pb+'">null</font></a></li>'},i.prototype.IHb=function(t,e){return 255<(e=void 0===e?"":e.toString()).length&&(e=e.substr(0,255)+"..."),'<li><a href="#">'+this.RC(t)+'<font color="'+this.O0b+'">'+e+"</font></a></li>"},i.prototype.getValue=function(t,e,i){return i=void 0!==i&&i,null===e?""+this.zGb(t):this.is.By(e)?""+this.SWa(t,e):this.is.CL(e)?""+this.yYa(t,e):this.is.Ip(e)?""+this.cZa(t,e,i):this.is.Ii(e)?""+this.AGb(t,e,i):this.is.pT(e)?""+this.ZWa(t,e,i):""+this.IHb(t,e)},e.BLa=i},function(t,e,i){var n,r;function a(t){this.uAb=t}_esm(e),e.IBa=void 0,t=i(1),n=i(0),i=i(503),a.prototype.xb=function(){var n=this;return this.gD||(this.gD=new Promise(function(t,e){var i=[];n.uAb.forEach(function(t){i.push(t.xb())}),Promise.all(i).then(function(){t()}).catch(function(t){e(t)})})),this.gD},r=a,r=t.__decorate([n.R(),t.__param(0,n.OH(i.HBa))],r),e.IBa=r},function(t,e,i){var n,r;function a(){this.Cva="",this.Lbb=[[],[]],this.U=[[],[]]}_esm(e),e.Mya=void 0,t=i(1),n=i(0),i(4),r=i(98),a.prototype.downloadRequest=function(t){var e;""===this.Cva&&(this.Cva=t.xa),t.ad||(e=this.S_b(t),this.U[t.mediaType].push(e),this.Lbb[t.mediaType].forEach(function(t){t.R8b(e)}))},a.prototype.S_b=function(t){return{id:t.mi(),xa:t.xa,mediaType:t.mediaType,ek:t.ek,startTime:t.AA,endTime:t.Vw,offset:t.Ou,QL:t.QL,PL:t.PL,duration:t.Hr,bitrate:t.bitrate,state:r.uba.NUa,yj:!1,V$b:!1,CZa:!1,O9b:r.tba.waiting}},a.prototype.update=function(e){this.Lbb[e.mediaType].forEach(function(t){t.Tcc(e)})},it.Object.defineProperties(a.prototype,{xa:{configurable:!0,enumerable:!0,get:function(){return this.Cva}}}),i=t.__decorate([n.R()],a),e.Mya=i},function(t,e,i){var n,r,a,o,s;function u(t,e){return(t=a.Ze.call(this,t,"LogDisplayConfigImpl")||this).oj=e,t}_esm(e),e.YEa=void 0,t=i(1),n=i(0),r=i(45),a=i(46),o=i(37),i=i(108),T(u,a.Ze),it.Object.defineProperties(u.prototype,{nY:{configurable:!0,enumerable:!0,get:function(){return!0}},MN:{configurable:!0,enumerable:!0,get:function(){return this.oj.MN}},F1a:{configurable:!0,enumerable:!0,get:function(){return-1}}}),s=u,t.__decorate([r.config(r.dd,"renderDomDiagnostics")],s.prototype,"nY",null),t.__decorate([r.config(r.hD,"logDisplayMaxEntryCount")],s.prototype,"MN",null),t.__decorate([r.config(r.hD,"logDisplayAutoshowLevel")],s.prototype,"F1a",null),s=t.__decorate([n.R(),t.__param(0,n.l(o.Wl)),t.__param(1,n.l(i.fF))],s),e.YEa=s},function(t,e,i){var n,r,a,o,s,u,f,c,h,l,p,d,b,m,g;function v(t,e,i,n,r,a,o,s,u,c){var h=this;this.za=t,this.hg=e,this.ce=i,this.Oc=n,this.Un=r,this.config=a,this.FG=o,this.exa=s,this.Xyb=u,this.Wn=c,this.z_b=function(){h.MZ.Ol(function(){h.update()})},this.clear=function(){h.entries=[],h.update()},this.h3a=function(){h.Ke.EN=!h.Ke.EN,h.vD&&h.AD&&(h.Ke.EN?(h.vD.style.display="inline-block",h.AD.style.display="none"):(h.AD.style.display="inline-block",h.vD.style.display="none")),h.LI(!1)},this.cNb=function(t){var e;h.entries.push(t),0<=(e=h.config.MN)&&h.entries.length>e&&h.entries.shift(),void 0===h.Ke.Oy[t.Ao]&&(h.Ke.Oy[t.Ao]=!0,h.LI(!1)),h.Ke.isVisible&&!h.E$a?h.z_b():h.MZ.Ol()},this.EAb=function(){w.download("all",h.entries.map(function(t){return t.maa(!1,!1)})).catch(function(t){console.error("Unable to download all logs to the file",t)})},this.En=!1,this.Ke={isVisible:!1,EN:!0,J4:!0,Eqa:l.Nj.Fca,Oy:{}},this.MZ=this.exa(f.vh(1)),this.WCb=this.Xyb(f.Nc(250)),this.entries=[]}function y(t){var e;this.elements=[],(e=document.createElementNS(y.iZ,"svg")).setAttribute("viewBox",t),this.elements.push(e)}function w(){}_esm(e),e.$Ea=void 0,t=i(1),n=i(0),r=i(29),a=i(112),o=i(339),s=i(48),u=i(38),f=i(4),c=i(18),h=i(91),l=i(7),p=i(113),d=i(289),b=i(506),m=i(79),g=i(133),i(288),w.download=function(t,e){return w.xFb(t).then(function(t){return w.zHb(t,e.join("\r\n")).then(function(t){return w.AAb(t.filename,t.text)})})},w.xFb=function(u){return new Promise(function(t,e){var i,n,r,a,o,s;try{i=(s=new Date).getDate().toString(),n=(s.getMonth()+1).toString(),r=s.getFullYear().toString(),a=s.getHours().toString(),o=s.getMinutes().toString(),s=s.getSeconds().toString(),1===i.length&&(i="0"+i),1===n.length&&(n="0"+n),1===a.length&&(a="0"+a),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),t(r+n+i+a+o+s+"."+u+".log")}catch(t){e(t)}})},w.zHb=function(i,n){return new Promise(function(t,e){try{t({filename:i,text:URL.createObjectURL(new Blob([n],{type:"text/plain"}))})}catch(t){e(t)}})},w.AAb=function(t,e){var i;try{return(i=document.createElement("a")).setAttribute("href",e),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),Promise.resolve()}catch(t){return Promise.reject(t)}},y.prototype.xP=function(){var t=document.createElementNS(y.iZ,"g");return t.setAttribute("stroke","none"),t.setAttribute("stroke-width",1..toString()),t.setAttribute("fill","none"),t.setAttribute("fill-rule","evenodd"),t.setAttribute("stroke-linecap","round"),this.addElement(t),this},y.prototype.zP=function(t,e,i){var n=document.createElementNS(y.iZ,"path");return n.setAttribute("d",t),e&&n.setAttribute("fill",e),i&&n.setAttribute("fill-rule",i),this.addElement(n),this},y.prototype.XY=function(t,e,i,n,r){var a;return r=void 0===r?"#000000":r,(a=document.createElementNS(y.iZ,"rect")).setAttribute("x",t.toString()),a.setAttribute("y",e.toString()),a.setAttribute("height",i.toString()),a.setAttribute("width",n.toString()),r&&a.setAttribute("fill",r),this.addElement(a),this},y.prototype.hZb=function(){var t=document.createElementNS(y.iZ,"polygon");return t.setAttribute("points","0 0 24 0 24 24 0 24"),t.setAttribute("transform","translate(12.000000, 12.000000) scale(-1, 1) translate(-12.000000, -12.000000)"),this.addElement(t),this},y.prototype.end=function(){return this.elements.pop(),this},y.prototype.gi=function(){if(1<this.elements.length)throw new RangeError("Some item wasn't terminated correctly");if(0===this.elements.length)throw new RangeError("Too many items were terminated");return this.elements[0]},y.prototype.addElement=function(t){if(0===this.elements.length)throw new RangeError("Too many items were terminated");this.elements[this.elements.length-1].appendChild(t),this.elements.push(t)},it.Object.defineProperties(y,{background:{configurable:!0,enumerable:!0,get:function(){return"transparent"}},CG:{configurable:!0,enumerable:!0,get:function(){return"#000000"}}}),y.iZ="http://www.w3.org/2000/svg",v.prototype.xb=function(){var e=this;return this.gD||(this.gD=new Promise(function(t){pt.addEventListener("keydown",function(t){t.keyCode==g.tv.ehb&&e.toggle()}),e.Un.e$(d.Zca.zeb,e.cNb),t()})),this.gD},v.prototype.show=function(){document.body&&(this.element||(this.Lxb(),this.En=!0),!this.Ke.isVisible&&this.element&&(document.body.appendChild(this.element),this.Ke.isVisible=!0,this.update(!0)))},v.prototype.Qr=function(){this.En&&this.Ke.isVisible&&this.element&&(document.body.removeChild(this.element),this.Ke.isVisible=!1)},v.prototype.toggle=function(){this.Ke.isVisible?this.Qr():this.show(),this.LI(!1)},v.prototype.Lxb=function(){this.wrap=document.querySelector(".watch-video");var t=this.createElement("div","","",{class:"player-log"});t.appendChild(this.cp=this.Cyb()),t.appendChild(this.Dyb()),t.appendChild(this.Fxb()),this.element=t},v.prototype.Cyb=function(){var t=this.createElement("textarea","","",{readonly:1}),e=this;return t.addEventListener("focus",function(){e.E$a=!0,e.update()}),t.addEventListener("blur",function(){e.E$a=!1,e.update()}),t},v.prototype.Dyb=function(){var t=this.createElement("menu");return t.appendChild(this.eyb()),t.appendChild(this.Vxb()),t.appendChild(this.Qxb()),t.appendChild(this.Fyb()),t.appendChild(this.Jxb()),t.appendChild(this.kyb()),t.appendChild(this.iyb()),t.appendChild(this.Sxb()),t.appendChild(this.Kxb()),t},v.prototype.Fxb=function(){var t,e=this,i=this.createElement("div","float:right;opacity:0.8;background:#fff;font-size:small;padding:2px;font-family:sans-serif"),n=this.createElement("select",this.uw(22,160,1,2),"<option>Select categories</option>"),r=this.createElement("div","display:none;padding:0 2px");return i.appendChild(n),i.appendChild(r),i.addEventListener("mousedown",function(t){t.preventDefault()}),t=!1,i.addEventListener("click",function(){t?r.style.display="none":(r.innerHTML="",["all","none"].concat(Object.keys(e.Ke.Oy).sort()).forEach(function(t){r.appendChild(e.Gxb(t,i))}),r.style.display="block"),t=!t}),i},v.prototype.Gxb=function(e,t){var i=this,n=this.createElement("label","display: block;padding:1px"),r=this.createElement("input","margin-right: 2px");return r.type="checkbox",r.checked=this.Ke.Oy[e],r.addEventListener("click",function(){"all"===e||"none"===e?(Object.keys(i.Ke.Oy).forEach(function(t){i.Ke.Oy[t]="all"===e}),t.click()):i.Ke.Oy[e]=!i.Ke.Oy[e],i.update(!0)}),n.appendChild(r),n.insertAdjacentText("beforeend",18<e.length?e.slice(0,15)+"...":e),n},v.prototype.eyb=function(){var e=this,t=this.createElement("select",this.uw(22,NaN,1,2),'<option value="'+l.Nj.Mf+'">Error</option><option value="'+l.Nj.afa+'">Warn</option><option value="'+l.Nj.Fca+'">Info</option><option value="'+l.Nj.aLa+'">Trace</option><option value="'+l.Nj.ga+'">Debug</option>');return t.value=this.Ke.Eqa.toString(),t.addEventListener("change",function(t){e.Ke.Eqa=parseInt(t.target.value),e.LI(!0)},!1),t},v.prototype.Vxb=function(){var i=this,t=this.createElement("input",this.uw(22,150,1,2));function e(e){return i.WCb.Ol(function(){var t=e.target.value;i.Ke.filter=t?new RegExp(t):void 0,i.update(!0)})}return t.value=this.Ke.filter?this.Ke.filter.source:"",t.title="Filter (RegEx)",t.placeholder="Filter (RegEx)",t.addEventListener("keydown",e,!1),t.addEventListener("change",e,!1),t},v.prototype.Qxb=function(){var t,e=this,i=this.createElement("div",this.uw(NaN,NaN)),n=this.createElement("input","margin: 0 2px 0 0;");return n.type="checkbox",n.id="details",n.title="Details",n.checked=this.Ke.J4,n.addEventListener("change",function(t){e.Ke.J4=t.target.checked,e.update(!0)},!1),(t=this.createElement("label","margin: 0 2px")).setAttribute("for","details"),t.innerHTML="View details",i.appendChild(n),i.appendChild(t),i},v.prototype.Fyb=function(){var t=this,e=this.createElement("button",this.uw()),i=new y("0 0 24 24").xP().hZb().end().zP("M20,12.3279071 L21.9187618,10.9573629 L23.0812382,12.5848299 L19,15.5 L14.9187618,12.5848299 L16.0812382,10.9573629 L18,12.3279071 L18,12 C18,8.13 14.87,5 11,5 C7.13,5 4,8.13 4,12 C4,15.87 7.13,19 11,19 C12.93,19 14.68,18.21 15.94,16.94 L17.36,18.36 C15.73,19.99 13.49,21 11,21 C6.03,21 2,16.97 2,12 C2,7.03 6.03,3 11,3 C15.97,3 20,7.03 20,12 L20,12.3279071 Z",y.CG,"nonzero").end().end().gi();return e.appendChild(i),e.addEventListener("click",function(){t.update()},!1),e.setAttribute("title","Refresh the log console"),e},v.prototype.Jxb=function(){var t=this.createElement("button",this.uw()),e=new y("0 0 24 24").xP().XY(0,0,24,24,y.background).end().zP("M19,4 L15.5,4 L14.5,3 L9.5,3 L8.5,4 L5,4 L5,6 L19,6 L19,4 Z M6,19 C6,20.1 6.9,21 8,21 L16,21 C17.1,21 18,20.1 18,19 L18,7 L6,7 L6,19 Z",y.CG).end().end().gi();return t.appendChild(e),t.addEventListener("click",this.clear,!1),t.setAttribute("title","Remove all log messages"),t},v.prototype.kyb=function(){var t;return this.AD=this.createElement("button",this.uw()),this.AD.style.display=this.Ke.EN?"none":"inline-block",t=new y("0 0 24 24").xP().XY(0,0,24,24,y.background).end().zP("M3,3 L21,3 L21,21 L3,21 L3,3 Z M5,5 L5,19 L19,19 L19,5 L5,5 Z M6,6 L18,6 L18,12 L6,12 L6,6 Z",y.CG,"nonzero").end().end().gi(),this.AD.addEventListener("click",this.h3a,!1),this.AD.appendChild(t),this.AD.setAttribute("title","Shrink the log console"),this.AD},v.prototype.iyb=function(){var t;return this.vD=this.createElement("button",this.uw()),this.vD.style.display=this.Ke.EN?"inline-block":"none",t=new y("0 0 24 24").xP().XY(4,4,16,16,y.background).end().zP("M5,5 L5,19 L19,19 L19,5 L5,5 Z M3,3 L21,3 L21,21 L3,21 L3,3 Z",y.CG,"nonzero").end().end().gi(),this.vD.addEventListener("click",this.h3a,!1),this.vD.appendChild(t),this.vD.setAttribute("title","Expand the log console"),this.vD},v.prototype.Sxb=function(){var t=this.createElement("button",this.uw()),e=new y("0 0 26 26").xP().XY(0,0,24,24,y.background).end().zP("M20,20 L20,22 L4,22 L4,20 L20,20 Z M7.8,12.85 L12,16 L16.2,12.85 L17.4,14.45 L12,18.5 L6.6,14.45 L7.8,12.85 Z M7.8,7.85 L12,11 L16.2,7.85 L17.4,9.45 L12,13.5 L6.6,9.45 L7.8,7.85 Z M7.8,2.85 L12,6 L16.2,2.85 L17.4,4.45 L12,8.5 L6.6,4.45 L7.8,2.85 Z",y.CG,"nonzero").end().end().gi();return t.appendChild(e),t.addEventListener("click",this.EAb,!1),t.setAttribute("title","Download all log messages"),t},v.prototype.Kxb=function(){var t=this,e=this.createElement("button",this.uw()),i=new y("0 0 24 24").xP().XY(0,0,24,24,y.background).end().zP("M12,10.5857864 L19.2928932,3.29289322 L20.7071068,4.70710678 L13.4142136,12 L20.7071068,19.2928932 L19.2928932,20.7071068 L12,13.4142136 L4.70710678,20.7071068 L3.29289322,19.2928932 L10.5857864,12 L3.29289322,4.70710678 L4.70710678,3.29289322 L12,10.5857864 Z",y.CG,"nonzero").end().end().gi();return e.appendChild(i),e.addEventListener("click",function(){t.toggle()},!1),e.setAttribute("title","Close the log console"),e},v.prototype.LI=function(t){var e=void 0!==e&&e;(t=void 0!==t&&t)&&this.update(e)},v.prototype.update=function(e){var i=this;this.element&&this.config.nY&&Promise.resolve(this.jtb()+this.yFb().join("\r\n")).then(function(t){i.element&&i.cp&&(i.element.classList[i.Ke.EN?"remove":"add"]("maximum"),i.cp.value=t,e&&i.Oc.zk(f.Gb,function(){i.cp.scrollTop=i.cp.scrollHeight}))}).catch(function(t){console.error("Unable to update the log console",t)})},v.prototype.yFb=function(){var e=this,i=[];return this.entries.forEach(function(t){(t.level||t.level)<=e.Ke.Eqa&&e.Ke.Oy[t.Ao]&&(t=t.maa(!e.Ke.J4,!e.Ke.J4),e.Ke.filter&&!e.Ke.filter.test(t)||i.push(t))}),i},v.prototype.jtb=function(){var t=this.FG();return"Version: 6.0033.414.911 \n"+(t?"Esn: "+t.Vk:"")+"\nJsSid: "+this.hg.id+", Epoch: "+this.za.ff.da(f.io)+", Start: "+this.hg.Vz.da(f.io)+", TimeZone: "+(new Date).getTimezoneOffset()+"\nHref: "+location.href+"\nUserAgent: "+navigator.userAgent+"\n--------------------------------------------------------------------------------\n"},v.prototype.createElement=function(t,e,i,n){return this.ce.createElement(t,e,i,n)},v.prototype.uw=function(t,e,i,n){return t=void 0===t?26:t,e=void 0===e?26:e,"border:"+(i||0)+"px solid "+y.CG+";"+(isNaN(t)?"":"height:"+t+"px")+";"+(isNaN(e)?"":"width:"+e+"px")+";margin:0 3px;"+(n?"border-radius:"+n+"px;":"")},(i=v).rZb="logDxDisplay",i=t.__decorate([n.R(),t.__param(0,n.l(u.Uh)),t.__param(1,n.l(c.jd)),t.__param(2,n.l(r.cg)),t.__param(3,n.l(s.Qj)),t.__param(4,n.l(p.ZJ)),t.__param(5,n.l(b.ZEa)),t.__param(6,n.l(h.zx)),t.__param(7,n.l(a.nK)),t.__param(8,n.l(o.$Aa)),t.__param(9,n.l(m.jB))],i),e.$Ea=i},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i){var n=u.WR.call(this,t,e,"network")||this;return n.Hka=i,n.K4=s.dBa.Jhb,n.LNb=30,n.gRb=function(t){n.K4=t.target.value,n.refresh()},n.xQb=function(){n.data={},n.refresh()},n.X7a=function(t){var e,i=Number(t.target.id);t=t.target.getAttribute("data-type"),i=n.data[n.K4][i].value,e=JSON.stringify(i,null,4),"copy"===t?h.E_.ika(e):"log"===t&&console.log(i)},n}_esm(e),e.bib=void 0,t=i(1),n=i(0),r=i(29),a=i(27),o=i(97),s=i(187),u=i(504),c=i(133),h=i(288),T(f,u.WR),f.prototype.xb=function(){var i=this;return this.En||(pt.addEventListener("keydown",function(t){t.ctrlKey&&t.altKey&&t.shiftKey&&t.keyCode==c.tv.Qhb&&i.toggle()}),this.data={},this.Hka.addListener(s.aca.gjb,function(t){var e;i.data[t.type]||(i.data[t.type]=[]),(e=i.data[t.type]).length===i.LNb&&e.shift(),e.push(t),t.type===i.K4&&i.refresh()}),this.En=!0),Promise.resolve()},f.prototype.Xk=function(){return'<tr class="'+this.prefix+'-display-headerrow"><th width="30px"><span class="'+this.prefix+'-display-indexheader">#</span></th><th width="150px"><span class="'+this.prefix+'-display-keyheader">Name</span></th><th style="border-right:solid 0px"><span class="'+this.prefix+'-display-valueheader">Value</span></th><th style="border-left:solid 0px" width="30px"><button id="'+this.prefix+'-display-close-btn">X</button></th></tr>'},f.prototype.Ona=function(t,e,i){var n=t.toString();return e='<font color="#C41A16">"'+e+'"</font>',i=this.kb.gi(i),'\n            <tr>\n                <td><span class="'+this.prefix+'-display-indexvalue">'+n+'</span></td>\n                <td><span class="'+this.prefix+'-display-keyvalue">'+e+'</span></td>\n                <td style="border-right:solid 0px"><ul class="'+this.prefix+'-display-tree">'+i+'</ul></td>\n                <td style="border-left:solid 0px">\n                    <div style="width: 88px">\n                        <button data-type="copy" id="'+t+'" class="'+this.prefix+'-display-btn-inline">\n                            Copy\n                        </button>\n                        <button data-type="log" id="'+t+'" class="'+this.prefix+'-display-btn-inline">\n                            Log\n                        </button>\n                    </div>\n                </td>\n            </tr>\n        '},f.prototype.aoa=function(){for(var t='<table class="'+this.prefix+'-display-table" width="100%">'+this.Xk(),e=this.data[this.K4]||[],i=0;i<e.length;++i)t+=this.Ona(i,e[i].name,e[i].value);return t+"</table>"},f.prototype.qXa=function(){var t=this.ce.createElement("button",u.EJ,"Clear",{class:this.prefix+"-display-btn"});return t.onclick=this.xQb,[t,this.Eyb(),this.syb()]},f.prototype.Eyb=function(){var t=this.ce.createElement("select",u.EJ,Object.values(s.dBa).reduce(function(t,e){return t+'<option value="'+e+'">'+e+"</option>"},""),{class:this.prefix+"-display-select"});return t.onchange=this.gRb,t},f.prototype.syb=function(){var t,e,i=this,n=this.ce.createElement("input","margin:3px;",void 0,{id:"preventRefresh",type:"checkbox",title:"PreventRefresh"});return n.checked=this.SX,n.onchange=function(){return i.Z_b()},t=this.ce.createElement("label",void 0,"Prevent Refresh",{for:"preventRefresh"}),(e=this.ce.createElement("div",void 0,void 0,{class:this.prefix+"-display-div"})).appendChild(n),e.appendChild(t),e},f.prototype.Y6a=function(){return Promise.resolve(this.aoa())},i=f,i=t.__decorate([n.R(),t.__param(0,n.l(r.cg)),t.__param(1,n.l(a.bg)),t.__param(2,n.l(o.U_))],i),e.bib=i},function(t,e,i){var n,r;_esm(e),e.crypto=void 0,t=i(0),n=i(480),r=i(11),e.crypto=new t.rd(function(t){t(n.LAa).$i(r.F0)})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;_esm(e),e.pe=void 0,t=i(0),n=i(1141),r=i(1142),a=i(1143),o=i(139),s=i(318),u=i(485),c=i(1144),h=i(1145),f=i(507),l=i(1146),e.pe=new t.rd(function(t){t(o.m1).to(n.VKa).aa(),t(s.qea).to(a.zJa).aa(),t(u.RLa).to(r.QLa).aa(),t(c.nib).to(h.SGa).aa(),t(f.kMa).to(l.jMa).aa()})},function(t,e,i){var a,n,r,o,s,c;function u(t,e){this.is=t,this.json=e,n.Qo(this,"json")}_esm(e),e.VKa=void 0,t=i(1),n=i(56),r=i(39),o=i(0),s=i(27),c=i(139),u.prototype.G6a=function(t){var e=this;return a.read(t,function(t){return parseInt(t)},function(t){return e.is.Yha(t)})},u.prototype.lua=function(t){var e=this;return a.read(t,function(t){return"true"==t||"false"!=t&&void 0},function(t){return e.is.pT(t)})},u.prototype.Gq=function(t){var e=this;return a.read(t,function(t){return parseInt(t)},function(t){return e.is.yT(t)})},u.prototype.vUb=function(t){var e=this;return a.read(t,function(t){return parseFloat(t)},function(t){return e.is.Ii(t)})},u.prototype.F6a=function(t,e){return a.read(t,function(t){return a.dDb(t,e)},function(t){return void 0!==t})},u.prototype.sua=function(t,e){return a.read(t,function(t){return t},function(t){return!e||e.test(t)})},u.prototype.H6a=function(t){var e=this,i=void 0===i?function(){return!0}:i;try{return a.read(t,function(t){return e.json.parse(decodeURIComponent(t))},function(t){return e.is.CL(t)&&i(t)})}catch(t){return new c.pp}},u.prototype.Mh=function(t,e,i){var n,r=this;if(i=void 0===i?1:i,t=t.trim(),n=e instanceof Function?e:this.lyb(e,i),e=t.indexOf("["),i=t.lastIndexOf("]"),0!=e||i!=t.length-1)return new c.pp;t=t.substring(e+1,i);try{return a.PRb(t).map(function(t){if((t=n(r,a.h2b(t)))instanceof c.pp)throw t;return t})}catch(t){return t instanceof c.pp?t:new c.pp}},u.prototype.lyb=function(i,n){var r=this;return n=void 0===n?1:n,function(t,e){return t=a.CGb(i),1<n?r.Mh(e,i,n-1):t(r,e)}},u.dDb=function(t,e){var i,n;for(n in e)if(e[i=parseInt(n)]==t)return i},u.read=function(t,e,i){return void 0!==(t=e(t))&&i(t)?t:new c.pp},u.CGb=function(t){switch(t){case"int":return function(t,e){return t.G6a(e)};case"bool":return function(t,e){return t.lua(e)};case"uint":return function(t,e){return t.Gq(e)};case"float":return function(t,e){return t.vUb(e)};case"string":return function(t,e){return t.sua(e)};case"object":return function(t,e){return t.H6a(e)}}},u.PRb=function(t){for(var e,i=[["[","]"]],n=[],r=0,a=0,o=0,s=[],u={};a<t.length;u={dQ:u.dQ},++a)u.dQ=t.charAt(a),","==u.dQ&&0==o?(n.push(t.substr(r,a-r)),r=a+1):(e=i.find(function(e){return function(t){return t[0]==e.dQ}}(u)))?(++o,s.push(e)):0<s.length&&s[s.length-1][1]==u.dQ&&(--o,s.pop());if(r!=a)n.push(t.substr(r,a-r));else if(r==a&&0<r)throw new c.pp;return n},u.h2b=function(t){var e=t.charAt(0);if('"'!=e&&"'"!=e)return t;if(t.charAt(t.length-1)!=e)throw new c.pp;return t.substring(1,t.length-1)},i=a=u,i=a=t.__decorate([o.R(),t.__param(0,o.l(s.bg)),t.__param(1,o.l(r.LE))],i),e.VKa=i},function(t,e,i){function n(){}_esm(e),e.QLa=void 0,t=i(1),i=i(0),n.prototype.OWa=function(t){var e=this;return t?(t^16*Math.random()>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(t){return e.OWa(t)})},i=t.__decorate([i.R()],n),e.QLa=i},function(t,e,i){var a,n,r,o;function s(t){this.location=t,n.Qo(this,"location")}_esm(e),e.zJa=void 0,t=i(1),n=i(56),r=i(39),i=i(0),s.zX=function(t){var e,i,n={};if(0<t.length){t=t.split("&");for(var r=0;r<t.length;r++)0<=(i=(e=t[r].trim()).indexOf("="))?n[decodeURIComponent(e.substr(0,i).replace(a.lHa,"%20"))]=decodeURIComponent(e.substr(i+1).replace(a.lHa,"%20")):n[e.toLowerCase()]=""}return n},it.Object.defineProperties(s.prototype,{nUb:{configurable:!0,enumerable:!0,get:function(){return this.data||(this.data=a.zX(this.u6a))}},u6a:{configurable:!0,enumerable:!0,get:function(){var t;return void 0!==this.ZX||(this.ZX=this.location.search.substr(1),0<=(t=this.ZX.indexOf("#"))&&(this.ZX=this.u6a.substr(0,t))),this.ZX}}}),(o=a=s).lHa=/[+]/g,o=a=t.__decorate([i.R(),t.__param(0,i.l(r.UEa))],o),e.zJa=o},function(t,e){_esm(e),e.nib="ObjectComparerSymbol"},function(t,e,i){var n,s;function r(){}_esm(e),e.SGa=void 0,t=i(1),n=i(0),s=i(195),r.prototype.compare=function(t,e){var i=[];return this.Rja(t,e,"",i),i},r.prototype.Rja=function(i,n,r,a){var o=this;if(s.KE.By(i))s.KE.By(n)&&i.length===n.length?i.forEach(function(t,e){o.Rja(i[e],n[e],r+"["+e+"]",a)}):a.push({a:i,b:n,path:r});else if(s.KE.CL(i)&&null!=i)if(s.KE.CL(n)&&null!=n){for(var t in i)this.Rja(i[t],n[t],r+"."+t,a);for(var e in n)e in i||void 0===n[e]||a.push({a:void 0,b:n[e],path:r+"."+e})}else a.push({a:i,b:n,path:r});else i!==n&&a.push({a:i,b:n,path:r})},i=t.__decorate([n.R()],r),e.SGa=i},function(t,e,i){var n,r,a,o,s;function u(){}_esm(e),e.jMa=void 0,t=i(1),n=i(0),r=i(11),a=i(34),o=i(290),s=i(8),u.prototype.$Gb=function(){var t=pt.devicePixelRatio||1;return{width:this.Pga.k4b||r.yv.width*t,height:this.Pga.j4b||r.yv.height*t}},it.Object.defineProperties(u.prototype,{Pga:{configurable:!0,enumerable:!0,get:function(){return s.ka.get(a.yB)}}}),i=u,t.__decorate([o.uW],i.prototype,"Pga",null),i=t.__decorate([n.R()],i),e.jMa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v;_esm(e),e.Fd=void 0,t=i(0),n=i(508),r=i(1148),a=i(120),o=i(291),s=i(1149),u=i(1150),c=i(1152),h=i(1153),f=i(1154),l=i(509),p=i(510),d=i(134),b=i(293),m=i(1155),g=i(292),v=i(1156),e.Fd=new t.rd(function(t){t(n.qIa).to(r.pIa).aa(),t(o.lea).to(s.rJa).aa(),t(a.sF).to(u.$La).aa(),t(l.qJa).to(f.KFa).aa(),t(l.pJa).to(h.PEa).aa(),t(l.oJa).to(c.GEa).aa(),t(b.Zya).W_b(function(){var t;return null===(t=d.ln.yi)||void 0===t?void 0:t.Gu}),t(b.Yya).to(m.Xya).aa(),t(p.jea).to(p.dJa),t(g.Mba).to(v.dAa).aa()})},function(t,e,i){var n,r,a;function o(t,e){this.jb=e,this.ta=t.ib("PlayPredictionDeserializer")}_esm(e),e.pIa=void 0,t=i(1),n=i(0),r=i(7),i=i(27),o.prototype.Wzb=function(e){var i=this;try{return{direction:e.direction,jac:e.layoutHasChanged,Wbc:e.rowInteractionIndex,Ya:e.lolomos.map(function(t){return i.Rzb(t)})}}catch(t){this.ta.error("Failed to deserialize update Payload: ",{payload:JSON.stringify(e)})}},o.prototype.Rzb=function(t){var e=this;return{context:t.context,list:t.list.map(function(t){return e.Qzb(t)}),requestId:t.requestId,rowIndex:t.rowIndex,Xbc:t.rowSegment}},o.prototype.Qzb=function(t){var e={Ed:t.pts,property:t.property,W:t.viewableId,index:t.index},i=t.preplay;return this.jb.Gg(i)&&(e.R9=this.Vzb(i)),t=t.params,this.jb.Gg(t)&&(e.Fb=this.jUa(t)),e},o.prototype.Vzb=function(t){var e={Ed:t.pts,W:t.viewableId,tO:t.pipelineNum,index:t.index};return t=t.params,this.jb.Gg(t)&&(e.Fb=this.jUa(t)),e},o.prototype.jUa=function(t){return{ye:t.uiLabel,Fj:t.trackingId,Jm:t.sessionParams}},o.prototype.Uzb=function(e){var i=this;try{return e.map(function(t){return i.Szb(t)})}catch(t){this.ta.error("Failed to deserialize uprepareList",{prepareList:JSON.stringify(e)})}},o.prototype.Szb=function(t){var e,i=t.params;return this.jb.Gg(i)&&(e=this.Tzb(i)),{J:t.movieId,priority:t.priority,force:t.force,Fb:e,ye:t.uiLabel,Pcc:t.uiExpectedStartTime,Occ:t.uiExpectedEndTime,Dl:t.firstTimeAdded}},o.prototype.Tzb=function(t){var e=void 0,i=t.sessionParams;return this.jb.Gg(i)&&(e=i),{w3:this.Pzb(t.authParams),Jm:e,Fj:t.trackingId,Z:t.startPts,oa:t.manifest,Fl:t.isBranching}},o.prototype.Pzb=function(t){return{mSb:null==t?void 0:t.pinCapableClient}},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(i.bg))],a),e.pIa=a},function(t,e,i){var n,a,r,o,s,u,c,h,f,l,p;function d(t,e,i,n){this.is=i,this.hg=n,this.log=t.ib("TaskScheduler"),this.Ub=new f.Gk,this.config=e(),this.currentIteration=this.pU=0,this.aJ=[],this.paused=!1,this.V$=[],this.GSa=[],this.eKb=this.config.uTb||l.append,this.addEventListener=this.Ub.addListener}_esm(e),e.rJa=void 0,t=i(1),n=i(0),a=i(291),r=i(7),o=i(13),s=i(132),u=i(27),c=i(18),h=i(4),f=i(73),(p=l=l||{}).prepend="prepend",p.append="append",p.qJb="ignore",d.prototype.Qqb=function(t){this.log.trace("adding tasks, number of tasks: "+t.length),this.paused=!1,this.aJ=this.fKb(t),this.pU=0,this.currentIteration+=1,this.Rf()},d.prototype.pause=function(){this.paused=!0},d.prototype.Rf=function(){var e,i,n,r=this;this.pU===this.aJ.length?this.log.trace("all tasks completed"):this.paused?this.log.trace("in paused state",{currentTaskIndex:this.pU,numberOfTasks:this.aJ.length}):(e=this.vGb(),i=this.currentIteration,e.startTime=this.hg.Yb().da(h.ja),e.status=s.Ik.ex,this.Ub.Fc(a.iK.t_b,{J:e.J,type:e.type}),this.V$.push(e),n=function(t){e.endTime=r.hg.Yb().da(h.ja),t(),r.GSa.push(e),r.V$.splice(r.V$.indexOf(e),1),r.currentIteration===i&&(r.pU++,r.Rf())},e.yWb().then(function(){n(function(){e.status=s.Ik.EP,r.Vta(e,a.iK.u_b,"task succeeded")})}).catch(function(t){n(function(){0<=[s.Ik.Eh,s.Ik.Ztb,s.Ik.nja].indexOf(t.status)?(e.status=t.status,r.Vta(e,a.iK.r_b,"cancelled task")):(e.status=s.Ik.Pt,r.Vta(e,a.iK.s_b,"task failed",t))})}))},d.prototype.vGb=function(){return this.aJ[this.pU]},d.prototype.getStats=function(i,n,e){var t=this.GSa.map(function(t){return t.Xt()}),r=this.V$.map(function(t){return t.Xt()}),a=this.is.Gg(i)&&this.is.Gg(n),o={};return this.is.Gg(e)?o.uvb=t.filter(function(t){return t.movieId===e}):t.concat(r).forEach(function(t){var e;o[t.type+"_"+t.status]=1+(0|o[t.type+"_"+t.status]),e=t.status==s.Ik.ex?t.startTime:t.endTime,a&&e&&i<=e&&e<n&&(o[t.type+"_"+t.status+"_delta"]=1+(0|o[t.type+"_"+t.status+"_delta"]))}),o},d.prototype.Vta=function(t,e,i,n){var r=t.Xt();n?this.log.warn(i,r,n):this.log.trace(i,r),this.Ub.Fc(e,{J:t.J,type:t.type,reason:t.status}),t.gO(r)},d.prototype.fKb=function(t){var e=this.aJ.filter(function(t){return t.kSb&&t.status===s.Ik.Co}),i=this.eKb;return i===l.qJb?[].concat(t):i===l.prepend?e.concat(t):t.concat(e)},i=d,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(o.Zc)),t.__param(2,n.l(u.bg)),t.__param(3,n.l(c.jd))],i),e.rJa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m;function g(t,e,i,n,r,a,o,s,u,c,h){this.Y2b=i,this.jb=n,this.hg=r,this.Yf=a,this.ZVa=o,this.OCb=s,this.PCb=u,this.Zla=c,this.events=new m.EventEmitter,this.log=t.ib("VideoPreparer"),this.config=e(),this.uya={},this.K8={},this.ec={num_of_calls:0,num_of_movies:0},this.Eg=h.Eg}function v(t){return void 0!==t}_esm(e),e.$La=void 0,t=i(1),n=i(1151),r=i(13),a=i(0),o=i(7),s=i(81),u=i(27),c=i(291),h=i(18),f=i(4),l=i(132),p=i(292),d=i(509),b=i(293),m=i(17),g.prototype.I8a=function(t,e,i){this.Eg.setData(t,"ldl",e,i)},g.prototype.zZa=function(t){return this.Eg.TV(t,"ldl")},g.prototype.gSa=function(t){this.Eg.clearData(t,"ldl",void 0,!0)},g.prototype.QM=function(t,e){return this.Eg.getData(t,e)},g.prototype.fXa=function(t){var e=this.Eg.getData(t,"ldl");return this.Eg.clearData(t,"ldl",void 0,!0),e},g.prototype.Kbb=function(t){return this.R9a===t||this.FTa===t},g.prototype.iI=function(t,e){var i,n=this,r=(i=(t=t.map(function(t){return t.Fb=t.Fb||{w3:{mSb:!1},Fj:0},n.jb.EG(t.Fb.Fj)||(t.Fb.Fj=0),n.jb.EG(t.Ed)&&(t.Fb.Z=t.Ed),t})).map(function(t){return n.Byb(t,e)}).reduce(function(t,e){return t.concat(e)},[])).map(function(t){return t.J+"-"+t.type});this.log.trace("prepare tasks",r),this.Yf.Qqb(i),this.ec.num_of_calls++,this.ec.num_of_movies+=t.length},g.prototype.getStats=function(t,e,i){return Object.assign(Object.assign({},i&&this.K8[i]||{}),{aJ:this.Yf.getStats(t,e,i),cache:this.Eg.getStats(t,e),aEb:Object.assign(Object.assign({},this.ec),this.Zla.getStats())})},g.prototype.lIb=function(t){this.R9a=t},g.prototype.kIb=function(t){this.log.trace("task scheduler paused on playback created"),this.Yf.pause(),this.config.Nzb&&this.Eg.Fja(t,["manifest"]),this.config.Mzb&&this.Eg.Fja(t,["ldl"]),this.config.Izb&&this.Eg.clearData(t,"manifest"),this.Zla.c7a(t),this.FTa=t},g.prototype.wZa=function(){this.log.info("track changed, clearing all manifests from cache"),this.Eg.Fja("none",["manifest"])},g.prototype.jIb=function(e){var i=this;this.config.Jzb?this.Eg.clearData(e,"manifest"):this.Eg.TV(e,"manifest")&&this.Eg.getData(e,"manifest").then(function(t){t.$b.isSupplemental||i.Eg.clearData(e,"manifest")},function(t){i.log.warn("Failed to get manifest for movieId ["+e+"] from cacheManager.",t)}),this.Kja(e),this.R9a=this.FTa=void 0},g.prototype.Kja=function(t){delete this.uya[t]},g.prototype.Az=function(t){return this.uya[t]},g.prototype.ETa=function(t){return this.uya[t]=this.Y2b.Wy()},g.prototype.n9a=function(t,e){return this.zZa(t)?l.Ik.Eh:e.UV?void 0:l.Ik.nja},g.prototype.Byb=function(t,e){var i;return t.ye&&t.Fb&&(t.Fb.ye=t.ye),this.p1b(t.J,t.Dl),[i=this.hyb(t,e),this.dyb(t,null==i?void 0:i.id,e),t=this.jyb(t,null==i?void 0:i.id,e)].filter(v)},g.prototype.hyb=function(t,e){if(!this.Eg.TV(t.J,"manifest"))return new n.NR("manifest",this.hg.Yb().da(f.ja),!!t.Fb.Ph,void 0,e,this.ZVa,t,this);this.log.trace("manifest exists in cache for "+t.J)},g.prototype.dyb=function(t,e,i){if(this.config.RU&&!this.Eg.TV(t.J,"ldl"))return this.config.hp?new n.NR("ldl",this.hg.Yb().da(f.ja),!!t.Fb.Ph,e,i,this.OCb,t,this):new n.NR("ldl",this.hg.Yb().da(f.ja),!!t.Fb.Ph,e,i,this.PCb,t,this)},g.prototype.jyb=function(t,e,i){if(this.config.kVa)return new n.NR("getMedia",this.hg.Yb().da(f.ja),!!t.Fb.Ph,e,i,this.Zla,t,this)},g.prototype.p1b=function(t,e){this.K8[t]||(this.K8[t]={P9:0,Dl:0}),(t=this.K8[t]).P9=(void 0!==t&&void 0!==t.P9?t.P9:0)+1,t.Dl=e},i=g,i=t.__decorate([a.R(),t.__param(0,a.l(o.qb)),t.__param(1,a.l(r.Zc)),t.__param(2,a.l(s.Gx)),t.__param(3,a.l(u.bg)),t.__param(4,a.l(h.jd)),t.__param(5,a.l(c.lea)),t.__param(6,a.l(d.qJa)),t.__param(7,a.l(d.pJa)),t.__param(8,a.l(d.oJa)),t.__param(9,a.l(b.Yya)),t.__param(10,a.l(p.Mba))],i),e.$La=i},function(t,e,i){var u,c;function n(t,e,i,n,r,a,o,s){this.type=t,this.Co=e,this.kSb=void 0!==i&&i,this.notify=r,this.QCb=a,this.AO=o,this.Fd=s,this.id=++c,this.status=u.Ik.Co}_esm(e),e.NR=void 0,u=i(132),c=0,n.prototype.Xt=function(){var t={id:this.id,type:this.type,created:this.Co,status:this.status,movieId:this.J};return this.startTime&&(t.startTime=this.startTime),this.endTime&&this.startTime&&(t.duration=this.endTime-this.startTime,t.endTime=this.endTime),t},n.prototype.gO=function(t){this.notify&&this.notify(t)},n.prototype.yWb=function(){return this.QCb.fetch(this.AO,this.Fd)},it.Object.defineProperties(n.prototype,{J:{configurable:!0,enumerable:!0,get:function(){return this.AO.J}},priority:{configurable:!0,enumerable:!0,get:function(){return this.AO.priority}}}),e.NR=n},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v;function y(t,e,i,n,r,a,o,s,u,c){this.fs=i,this.SY=n,this.Uc=r,this.za=a,this.Aa=o,this.JN=s,this.uSb=u,this.nk=c,this.log=t.ib("VideoPreparer"),this.config=e()}_esm(e),e.GEa=void 0,t=i(1),n=i(0),r=i(7),a=i(13),o=i(132),s=i(62),u=i(57),c=i(34),h=i(155),f=i(188),l=i(36),p=i(4),d=i(38),b=i(18),m=i(189),g=i(200),i=i(119),y.prototype.fetch=function(n,r){var a=this;return this.log.trace("Fetching LDL",m.PJ(n)),this.J=n.J,(this.Fd=r).QM(n.J,"ldl").catch(function(){return a.log.trace("Requesting a new license",m.PJ(n)),a.nk.L5(n.J).then(function(t){var e,i;if(a.oa=t,a.$b=t.$b,t=a.Fd.n9a(n.J,a.$b))throw{status:t};return t=a.$b.eB[0].Iu,e=a.$b.eB[0].nla,i=(t||[e]).map(function(t){return a.Uc.decode(t.bytes)}),a.nf=a.zG({ZUa:a.log,Lla:function(t){return a.handleError(t)},Dd:void 0,lsa:function(){},za:{getTime:function(){return a.Aa.Yb().da(p.ja)},v$b:function(){return a.za.ff.da(p.io)}}}),r.I8a(n.J,a.nf),a.nf.create(a.config.xm).then(function(){return a.nf.Hg(u.Xh.eo,i,!0)}).then(function(){return a.nf}).catch(function(t){throw a.handleError(t),t})}).catch(function(t){if(a.log.warn("Manifest not available for ldl request",t),void 0!==t.status)throw t;throw{status:o.Ik.Eh}})})},y.prototype.handleError=function(t){this.log.warn("ldl is now invalid",t),this.nf.close(),this.Fd.gSa(this.J),this.Fd.Kja(this.J)},y.prototype.zG=function(t){var e,i=this;return this.fs.NJ&&this.fs.LJ||(e=this.uSb(),this.fs.NJ=e.ac,this.fs.LJ=e.request),e=new this.fs.LJ(t.ZUa,function(t){var e=[];return t.dk.forEach(function(t){e.push({sessionId:t.sessionId,dataBase64:i.Uc.encode(t.data)})}),t={dk:e,N4:[i.$b.rm],Uf:s.co.$Sa(t.Uf),Ti:i.$b.Ti,ba:i.Fd.ETa(i.J),lk:i.oa.lk},i.log.trace("xid created ",{MovieId:i.J,xid:t.ba}),i.JN.vy(t)},void 0,{qf:!1,Yk:!1}),this.fs.NJ(t.ZUa,t.Dd,{qf:!1,Yk:!1,Nl:e,UX:this.config.m6a,X:void 0,bB:this.config.gVa,onerror:t.Lla,lsa:t.lsa,za:t.za,dI:!1,csb:this.SY.i4([]),u2b:this.SY.l4([]),T6:this.config.T6})},v=y,v=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.Zc)),t.__param(2,n.l(c.yB)),t.__param(3,n.l(h.TR)),t.__param(4,n.l(l.Ci)),t.__param(5,n.l(d.Uh)),t.__param(6,n.l(b.jd)),t.__param(7,n.l(f.lR)),t.__param(8,n.l(g.Wda)),t.__param(9,n.l(i.RE))],v),e.GEa=v},function(t,e,i){var n,r,a,u,o,s,c,h,f,l;function p(t,e,i,n,r,a){this.Uc=i,this.TAb=n,this.UN=r,this.nk=a,this.log=t.ib("VideoPreparer")}_esm(e),e.PEa=void 0,t=i(1),n=i(0),r=i(7),a=i(13),u=i(57),o=i(36),s=i(122),c=i(138),h=i(132),f=i(189),i=i(119),p.prototype.fetch=function(a,o){var s=this;return this.log.trace("Fetching LDL",f.PJ(a)),this.J=a.J,(this.Fd=o).QM(a.J,"ldl").then(function(t){return t.H$}).catch(function(){return s.log.trace("Requesting a new license",f.PJ(a)),s.nk.L5(a.J).then(function(i){var t,n,r,e;if(s.$b=i.$b,o.zZa(a.J))return o.QM(a.J,"ldl").then(function(t){return t.H$});if(t=s.Fd.n9a(a.J,s.$b))throw{status:t};return n=s.$b.eB[0].Iu,t=s.$b.eB[0].nla,r=(n||[t]).map(function(t){return s.Uc.decode(t.bytes)}),e=s.TAb().then(function(t){var e={type:u.Xh.eo,initData:r,context:{Iu:n},Si:{J:a.J,ba:o.ETa(a.J),Ti:s.$b.Ti,rm:s.$b.rm,lk:i.lk}};return t.Hg(e,s.UN())}).catch(function(t){throw s.handleError("Unable to prepare an EME session.",t),t}),s.Fd.I8a(a.J,{H$:e,source:"videopreparer"},function(){if(!s.Fd.Kbb(a.J))try{e.then(function(t){return t.close()}).catch(function(t){s.handleError("Unable to cleanup LDL session, Unable to get the session.",t)})}catch(t){s.handleError("Unable to cleanup LDL session, unexpected exception.",t)}}),e}).catch(function(t){if(s.log.warn("Manifest not available for ldl request",t),void 0!==t.status)throw t;throw{status:h.Ik.Eh}})})},p.prototype.handleError=function(t,e){this.log.warn(t+" LDL is now invalid.",e),this.Fd.gSa(this.J),this.Fd.Kja(this.J)},l=p,l=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.Zc)),t.__param(2,n.l(o.Ci)),t.__param(3,n.l(s.X_)),t.__param(4,n.l(c.uR)),t.__param(5,n.l(i.RE))],l),e.PEa=l},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function p(t,e,i,n,r){this.Zqa=i,this.hg=n,this.nk=r,this.log=t.ib("VideoPreparer"),this.config=e()}_esm(e),e.KFa=void 0,t=i(1),n=i(13),r=i(0),a=i(7),o=i(18),s=i(4),u=i(157),c=i(103),h=i(189),f=i(119),l=i(57),p.prototype.fetch=function(t,e){var i;return this.log.trace("Fetching manifest",h.PJ(t)),i=t.Fb,this.config.eqb&&i&&i.oa&&!this.nk.uoa(t.J)&&(!("clientGenesis"in i.oa&&i.oa.clientGenesis)||Date.now()-i.oa.clientGenesis<this.config.$5a)&&(i=this.Zqa.create(i.oa))&&(i.uI=this.hg.Yb().da(s.ja),i.TO=this.hg.Yb().da(s.ja),this.nk.aZ(t.J,i)),this.nk.ZM({W:t.J,bb:null!==(i=t.Fb)&&void 0!==i?i:{},Tt:c.Vm.eF,Uf:l.Xh.eo},!0,function(){e.events.emit("manifestRemovedFromCache",{target:e,type:"manifestRemovedFromCache",W:t.J})})},i=p,i=t.__decorate([r.R(),t.__param(0,r.l(a.qb)),t.__param(1,r.l(n.Zc)),t.__param(2,r.l(u.tR)),t.__param(3,r.l(o.jd)),t.__param(4,r.l(f.RE))],i),e.KFa=i},function(t,e,i){var n,o,s,r,u,a,c,h,f,l,p,d,b;function m(){var i=this;this.promise=new Promise(function(t,e){i.resolve=t,i.reject=e})}function g(t,e,i,n,r){var a=this;this.Ata=i,this.rTb=n,this.nk=r,this.a_=[],this.wA=new Map,this.SQb=function(t){var e,i;t=t.wishListItem.key.W,a.wA.has(t)&&(t=(i=a.wA.get(t)).AO,null!==(e=(i=i.Vja).resolve)&&void 0!==e&&e.call(i,t))},this.p4a=function(t){!t.target.Kbb(t.W)&&a.wA.has(t.W)&&(a.c7a(t.W),a.g9a(a.a_),a.Gj.has(t.W)&&(a.Gj.Cn(t.W).Ot=!0))},this.ta=t.ib("VideoPreparer"),this.config=e(),this.Gj=new b.$ea}_esm(e),e.Xya=void 0,t=i(1),n=i(7),i(189),o=i(134),s=i(47),r=i(13),u=i(14),a=i(103),c=i(293),h=i(0),f=i(510),l=i(17),p=i(119),d=i(57),b=i(511),g.prototype.fetch=function(t,e){return-1===e.events.listeners("manifestRemovedFromCache").indexOf(this.p4a)&&e.events.on("manifestRemovedFromCache",this.p4a),this.g9a(this.lvb(this.Kyb(t,e))),this.wA.get(t.J).Vja.promise},g.prototype.getStats=function(){return this.Gu.getStats()},g.prototype.lvb=function(e){return[e].concat(G(this.a_.filter(function(t){return t.key.W!==e.key.W}))).slice(0,this.config.pTb).map(this.config.qTb?function(t,e){return Object.assign({},t,{priority:e})}:function(t){return t})},g.prototype.ZM=function(t){return this.nk.ZM({W:t.J,Tt:a.Vm.eF,Uf:d.Xh.eo,bb:null!==(t=t.Fb)&&void 0!==t?t:{}}).then(function(t){return t.$b})},g.prototype.Kyb=function(e,t){var i,n,r,a=new m;return this.wA.has(e.J)&&((n=(i=this.wA.get(e.J)).AO).J===e.J&&n.ye===e.ye&&(r=i.S2b.key),this.Gu.getStats().contents.some(function(t){return t.id===e.J})&&(a=i.Vja)),i=o.ln.Oe.Et(u.Yja(e.ye)),r=r||{W:e.J,config:i},this.Gj.has(e.J)||this.Gj.store(e.J,this.Jyb(e,t,i)),t={key:r,dac:!1,priority:e.priority,z3:s.T.Eb(null!==(r=null===(r=e.Fb)||void 0===r?void 0:r.Z)&&void 0!==r?r:0),Gj:this.Gj},this.wA.set(e.J,{S2b:t,AO:e,Vja:a}),t},g.prototype.Jyb=function(t,i,e){var n,r=this,a=t.J;return{get ba(){return i.Az(a)},Ot:!1,events:new l.EventEmitter,mja:function(){},get hv(){return n=n||r.ZM(t).then(function(t){return{oa:t,ii:t.woa&&!t.UV,config:e,t9a:{}}})},W:a,p$a:!1,equals:function(t){var e=i.Az(a);return!(t.W!==a||t.ba&&e&&e!==t.ba)}}},g.prototype.Q8a=function(t){this.a_=t},g.prototype.g9a=function(t){this.Q8a(t),this.Gu.f9a(this.a_)},g.prototype.c7a=function(e){this.wA.has(e)&&(this.Q8a(this.a_.filter(function(t){return t.key.W!==e})),this.wA.delete(e))},it.Object.defineProperties(g.prototype,{Gu:{configurable:!0,enumerable:!0,get:function(){return this.my||(this.my=this.rTb(),this.my.Zva(this.Ata).H8a({mH:this.config.oTb}),this.my.events.on("prefetchComplete",this.SQb)),this.my}}}),i=g,i=t.__decorate([h.R(),t.__param(0,h.l(n.qb)),t.__param(1,h.l(r.Zc)),t.__param(2,h.l(f.jea)),t.__param(3,h.l(c.Zya)),t.__param(4,h.l(p.RE))],i),e.Xya=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i){var n=this;this.hg=e,e=i(),this.Eg=new u({log:t.ib("CacheManager"),za:{getTime:function(){return n.hg.Yb().da(o.ja)}},Promise:Promise,qf:!1,ttb:e.xTb,stb:e.vTb,tCb:e.$5a,sCb:e.wTb})}_esm(e),e.dAa=void 0,t=i(1),n=i(0),r=i(18),a=i(7),o=i(4),s=i(13),u=i(1157),c=t.__decorate([n.R(),t.__param(0,n.l(a.qb)),t.__param(1,n.l(r.jd)),t.__param(2,n.l(s.Zc))],c),e.dAa=c},function(t,e,i){var n;function u(){return Object.create(null)}function r(t){this.log=t.log,this.za=t.za,this.CD=u(),this.Promise=t.Promise,this.Ty=t.Ty,this.Fxa=t.Fxa,this.qf=t.qf||!1,this.pw=u(),this.uC=u(),this.jG=u(),this.spb(t),t.cq&&(this.cq=t.cq)}function h(t){return void 0!==t}function a(t){for(var e,i=0,n=arguments.length;i<n;)if(h(e=arguments[i++]))return e}i(1158),n=i(1159),r.prototype.spb=function(t){this.pw.manifest=a(t.tCb,n.pw.oa),this.pw.ldl=a(t.sCb,n.pw.vW),this.pw.metadata=a(t.f$b,n.pw.Gc),this.uC.manifest=a(t.ttb,n.uC.oa),this.uC.ldl=a(t.stb,n.uC.vW),this.uC.metadata=a(t.n9b,n.uC.Gc),this.jG.manifest=a(t.l9b,n.jG.oa),this.jG.ldl=a(t.k9b,n.jG.vW),this.jG.metadata=a(t.m9b,n.jG.Gc)},r.prototype.TV=function(t,e){return this.Kt(void 0!==t),this.Kt(void 0!==e),!!this.cNa(t,e,void 0).value},r.prototype.cNa=function(t,e,i){var n={value:null,reason:"",log:""},r=this.CD[e];return void 0===r?(n.log="cache miss: no data exists for field:"+e,n.reason="unavailable"):void 0===r[t]?(n.log="cache miss: no data exists for movieId:"+t,n.reason="unavailable"):(i=r[t][i||"DEFAULTCAPS"])&&i.value?this.o7(e,i.creationTime)?(n.log="cache miss: "+e+" data expired for movieId:"+t,n.reason="expired"):(n.log=this.Promise&&i.value instanceof this.Promise?"cache hit: "+e+" request in flight for movieId:"+t:"cache hit: "+e+" available for movieId:"+t,n.value=i.value):(n.log="cache miss: "+e+" data not available for movieId:"+t,n.reason="unavailable"),n},r.prototype.getData=function(t,e,i){return this.Kt(void 0!==t),this.Kt(void 0!==e),t=this.cNa(t,e,i),this.log.trace(t.log),t.value?this.Promise?t.value instanceof this.Promise?t.value:Promise.resolve(t.value):this.Fxa?JSON.parse(this.Fxa(t.value,"gzip",!1)):t.value:this.Promise?Promise.reject(t.reason):t.reason},r.prototype.setData=function(t,e,i,n,r){var a,o,s;return this.Kt(void 0!==t),this.Kt(void 0!==e),a=this.CD,o=r||"DEFAULTCAPS",a[e]||(a[e]=u(),Object.defineProperty(a[e],"numEntries",{enumerable:!1,configurable:!0,writable:!0,value:0}),Object.defineProperty(a[e],"size",{enumerable:!1,configurable:!0,writable:!0,value:0})),i=this.Ty?this.Ty(JSON.stringify(i),"gzip",!0):i,a=a[e],this.dnb(t,e,o,a),n={creationTime:(s=this).za.getTime(),value:i,size:0,type:e,Zka:n,rCb:setTimeout(function(){s.clearData(t,e,o,!1,"expired")},this.pw[e]+1)},a[t]=a[t]||u(),a[t][o]=a[t][o]||u(),a[t][o]=n,a.size+=0,a.numEntries++,this.cq&&this.cq.emit("addedCacheItem",n),n},r.prototype.dnb=function(t,i,n,r){var e,a,o,s,u,c=this,h=r.numEntries,f=this.uC[i],l=r[t]&&r[t][n];l&&l.value?(e=t,a="promise_or_expired"):f<=h&&(s=Number.POSITIVE_INFINITY,Object.keys(r).every(function(t){var e=r[t]&&r[t][n];return e&&e.value&&c.o7(i,e.creationTime)&&(u=t),e&&e.value&&e.creationTime<s&&(s=e.creationTime,o=t),!0}),e=u||o,a="cache_full"),this.qf&&this.log.debug("makespace ",{maxCount:f,currentCount:r.numEntries,field:i,movieId:t,movieToBeRemoved:e}),e&&(c.clearData(e,i,n,void 0,a),this.log.debug("removed from cache: ",e,i))},r.prototype.Fja=function(t,e){var i,n=this;n.Kt(void 0!==t),i=t+"",e.forEach(function(e){var t=n.CD[e];t&&Object.keys(t).forEach(function(t){t!=i&&n.clearData(t,e,void 0,void 0,"clear_all")})})},r.prototype.clearData=function(t,e,i,n,r){var a;this.Kt(void 0!==t),this.Kt(void 0!==e),i=i||"DEFAULTCAPS",(e=(a=this.CD[e])?a[t]:void 0)&&e[i]&&(a.size-=e[i].size,a.numEntries--,(a=e&&e[i])&&(clearTimeout(a.rCb),e[i]=void 0,!n&&a.Zka&&a.Zka()),this.cq&&(t={creationTime:a.creationTime,destroyFn:a.Zka,size:a.size,type:a.type,value:a.value,reason:r,movieId:t},this.cq.emit("deletedCacheItem",t)))},r.prototype.flush=function(t){var e;this.Kt(void 0!==t),(e=this.CD)[t]=u(),e[t].numEntries=0,e[t].size=0},r.prototype.eSa=function(){var i,n;this.Kt(!1),(n=(i=this).CD)[void 0]instanceof Object&&Object.keys(n[void 0]).forEach(function(t){var e=n[void 0][t].DEFAULTCAPS;i.za.getTime()-e.creationTime>i.pw[void 0]&&this.clearData(t,void 0,"DEFAULTCAPS",void 0,"clean_up")})},r.prototype.o7=function(t,e){return this.za.getTime()-e>this.pw[t]},r.prototype.getStats=function(n,r,t){var a={},o=this,s=o.CD,u=h(n)&&h(r),c=t||"DEFAULTCAPS";return Object.keys(s).forEach(function(e){var t=Object.keys(s[e]),i=s[e];t.forEach(function(t){!(t=i&&i[t]&&i[t][c])||!h(t.value)||t.value instanceof this.Promise||(a[e]=1+(0|a[e]),o.o7(t.type,t.creationTime)&&(a[e+"_expired"]=1+(0|a[e+"_expired"])),u&&t.creationTime>=n&&t.creationTime<r&&(a[e+"_delta"]=1+(0|a[e+"_delta"])))})}),a},r.prototype.getState=function(t){var a=[],o=this,e=o.CD,s=t||"DEFAULTCAPS";return Object.keys(e).forEach(function(n){var t=Object.keys(e[n]),r=e[n];t.forEach(function(t){var e,i=r&&r[t]&&r[t][s];i&&h(i.value)&&(e=o.o7(i.type,i.creationTime)?"expired":i.value instanceof this.Promise?"loading":"cached",a.push({movieId:t,state:e,type:n,size:i.size}))})}),a},r.prototype.Kt=function(t){if(!t&&(this.log.error("Debug Assert Failed",void 0),this.qf))throw Error("Debug Assert Failed ")},t.exports=r},function(t){t.exports=function(t,e){var i,n;if(e&&(n=[],function t(e){if(e&&"object"==typeof e){if(-1!==n.indexOf(e))return 1;for(var i in n.push(e),e)if(e.hasOwnProperty(i)&&t(e[i]))return 1}}(t)))return-1;e=[],t=[t];for(var r=0;t.length;)if("boolean"==typeof(i=t.pop()))r+=4;else if("string"==typeof i)r+=2*i.length;else if("number"==typeof i)r+=8;else if("object"==typeof i&&-1===e.indexOf(i))for(var a in e.push(i),i)t.push(i[a]);return r}},function(t){t.exports={pw:{oa:12e5,vW:9e5,Gc:12e5},uC:{oa:10,vW:10,Gc:10},jG:{oa:10240,vW:10240,Gc:10240}}},function(t,e,i){var n,r,a,o,s,u,c,h,f;_esm(e),e.Ka=void 0,t=i(0),n=i(190),r=i(1161),a=i(512),o=i(1162),s=i(513),u=i(1163),c=i(1164),h=i(514),f=i(1165),e.Ka=new t.rd(function(t){t(n.fca).to(r.vBa).aa(),t(a.aGa).to(o.$Fa).aa(),t(s.WGa).to(u.VGa).aa(),t(s.hGa).to(c.gGa).aa(),t(h.fGa).to(f.eGa).aa()})},function(t,e,i){var n,r,a,o;function s(i){function t(t,e){this.I=t,this.Yl=e,this.k5=!1,this.emit=o.prototype.emit,this.addListener=o.prototype.addListener,this.on=o.prototype.on,this.once=o.prototype.once,this.removeListener=o.prototype.removeListener,this.removeAllListeners=o.prototype.removeAllListeners,this.listeners=o.prototype.listeners,this.listenerCount=o.prototype.listenerCount,o.call(this),this.Dg=i.ib("DownloadTrack")}t.prototype.Yp=function(){this.R2=void 0,this.emit("destroyed")},t.prototype.toString=function(){return"id:"+this.R2+" config: "+JSON.stringify(this.I)},t.prototype.toJSON=function(){return"Download Track id:"+this.R2+" config: "+JSON.stringify(this.I)},t.prototype.c$=function(t){this.I.connections!==t.connections&&(this.I=t)},t.prototype.ku=function(){return 1<this.I.connections},it.Object.defineProperties(t.prototype,{trackId:{configurable:!0,enumerable:!0,get:function(){return this.R2}},Co:{configurable:!0,enumerable:!0,get:function(){return void 0===this.R2}},config:{configurable:!0,enumerable:!0,get:function(){return this.I}},vO:{configurable:!0,enumerable:!0,get:function(){return this.Dg}},FH:{configurable:!0,enumerable:!0,get:function(){return this.Yl.FH}}}),this.JJ=Object.assign(t,new a.wBa)}_esm(e),e.vBa=void 0,t=i(1),n=i(0),r=i(7),a=i(190),o=i(114).EventEmitter,s=t.__decorate([n.R(),t.__param(0,n.l(r.qb))],s),e.vBa=s},function(t,e,i){var a,n,o,r,s,u,c,h,f,l;function p(t,e,i,n,r,a){this.EL=t,this.hf=i,this.jb=n,this.Aa=r,this.config=a,this.log=e.ib("MediaHttp")}_esm(e),e.$Fa=void 0,t=i(1),a=i(191),n=i(98),o=i(3),r=i(7),s=i(0),u=i(87),c=i(27),h=i(18),f=i(4),i=i(13),p.prototype.uz=function(){return this.Aa.Yb().da(f.ja)},p.prototype.V3a=function(t,e){t.LPb({mediaRequest:t,timestamp:e})},p.prototype.o4a=function(t){var e=t.mediaRequest.kA;e.readyState=a.wc.Sc.Sx,(t=t.connect?t:{timestamp:this.uz(),connect:!1}).mediaRequest=e,t.readyState=e.readyState,e.ksa(t)},p.prototype.k9=function(t){this.V3a(t.mediaRequest.kA,t.timestamp)},p.prototype.m9=function(t){var e=t.mediaRequest.kA,i=t.bytes;void 0!==e&&(e.readyState===a.wc.Sc.Tx&&this.o4a(t),this.jb.Ii(i)&&(t.mediaRequest=e,t.timestamp=this.uz(),i>e.bytesReceived&&(t.newBytes=i-e.bytesReceived,t.bytesLoaded=i,e.PPb(t))))},p.prototype.Mn=function(t){var e=t.mediaRequest,i=t.errorcode,n=t.httpcode,r=a.wc.$_;if(void 0!==e&&(e=e.kA,void 0!==e&&e.readyState!==a.wc.Sc.OJ))if(i===o.L.qB)e.readyState=a.wc.Sc.hQ,t.mediaRequest=e,t.readyState=e.readyState,e.GPb(t);else{switch(e.readyState=a.wc.Sc.OJ,i){case o.L.gR:n=r.Vza;break;case o.L.Bca:n=r.yca;break;case o.L.dR:n=400<n&&n<500?r.Aca:500<=n?r.oDa:r.yca;break;case o.L.eR:n=r.zca;break;case o.L.cR:n=r.Wza;break;case o.L.fR:case o.L.IE:n=r.r0;break;case o.L.nDa:n=r.mDa;break;case o.L.jDa:n=r.Aca;break;case o.L.Zeb:n=r.zca;break;default:n=r.r0}t.mediaRequest=e,t.readyState=e.readyState,t.errorcode=n,t.nativecode=i,e.msa(t)}},p.prototype.Esa=function(t,e){var i,n=e.request.kA;if(n)if(e.$){if(t.j&&n.readyState!==a.wc.Sc.DONE){switch(n.readyState){case a.wc.Sc.hQ:return;case a.wc.Sc.OJ:case a.wc.Sc.Sx:break;case a.wc.Sc.Tx:this.o4a({mediaRequest:e.request})}n.readyState=a.wc.Sc.DONE,n.ad||(i={mediaRequest:n,readyState:n.readyState,timestamp:this.uz(),cadmiumResponse:e},t.j.nxa+=1,n.EHb(),n.cLb()&&(t.j.gva+=1,e.zm.vi=Math.ceil(n.oma),e.zm.Zo=Math.ceil(n.sG),e.zm.Iq=Math.floor(n.sD)),n.b4=i,n.gO(i))}}else n.readyState!==a.wc.Sc.hQ&&(t={mediaRequest:e.request,timestamp:this.uz(),errorcode:e.na,httpcode:e.ik},this.Mn(t))},p.prototype.download=function(e,t){var i,n=this;return t=this.hf.download(e,t),e.kA&&(i=e.kA,-1<[a.wc.Sc.OPENED,a.wc.Sc.OJ].indexOf(i.readyState)&&(i.readyState=a.wc.Sc.Tx,this.config().yra?t.MXb(function(t){n.k9(t)}):this.V3a(i,this.uz()))),t.Eha(function(t){n.Esa(e,t)}),t.SXb(function(t){n.m9(t)}),t.DXb(function(t){n.Mn(t)}),t},l=p,l=t.__decorate([s.R(),t.__param(0,s.l(n.jQ)),t.__param(1,s.l(r.qb)),t.__param(2,s.l(u.Hx)),t.__param(3,s.l(c.bg)),t.__param(4,s.l(h.jd)),t.__param(5,s.l(i.Zc))],l),e.$Fa=l},function(t,e,i){var n,r,a;function o(t,e){this.hf=e,this.log=t.ib("OpenConnectSideChannel")}_esm(e),e.VGa=void 0,t=i(1),n=i(0),r=i(7),i=i(87),o.prototype.mV=function(t,e,i){t={url:t.url,NWb:i},this.hf.KYb(t)},o.prototype.$F=function(t){try{t.Roa()}catch(t){this.log.warn("exception aborting request")}},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(i.Hx))],a),e.VGa=a},function(t,e,i){var o,n,r,a,s,u,c,h,f,l,p;function d(t,e,i,n,r,a){this.Aa=t,this.Kr=e,this.config=i,this.hf=r,this.mOb=a,this.log=n.ib("MediaRequestDownloader")}_esm(e),e.gGa=void 0,t=i(1),o=i(47),n=i(0),r=i(7),a=i(87),s=i(512),u=i(90),c=i(191),h=i(18),f=i(4),l=i(40),i=i(13),d.prototype.mV=function(e,i,n){var r,t,a;r=this,e.eac=!0,t=this.mOb.download({url:e.url,responseType:this.hf.Ajb.Ncb,withCredentials:!1,EC:e.mediaType===o.Tb.Ta.Wb?"audio":"video",offset:i.start,length:e.bh,track:{type:e.mediaType===o.Tb.Ta.Wb?u.Ei.audio:u.Ei.video},stream:{Bc:e.Oa,bitrate:e.bitrate},qc:e.Md,kA:e,Q$:n,Js:this.Kr.Js},function(t){t.$&&e.readyState!==c.wc.Sc.DONE&&e.readyState!==c.wc.Sc.hQ&&(e.readyState!==c.wc.Sc.OJ&&(e.readyState===c.wc.Sc.Tx?(e.readyState=c.wc.Sc.Sx,e.ksa({mediaRequest:e,readyState:e.readyState,timestamp:r.uz(),connect:!1})):e.readyState!==c.wc.Sc.Tx&&(e.readyState,c.wc.Sc.Sx)),e.readyState=c.wc.Sc.DONE,t={mediaRequest:e,readyState:e.readyState,timestamp:r.uz(),cadmiumResponse:t,response:t.content},e.b4=t,e.gO(t))}),e.ad&&(a={mediaRequest:e,readyState:e.readyState,timestamp:this.uz(),connect:!1},e.ksa(a)),e.addEventListener(c.wc.Le.bF,function t(){e.removeEventListener(c.wc.Le.bF,t),e.ZU?e.ZU++:e.ZU=1,e.ZU>=r.config().Xla.length&&(e.ZU=r.config().Xla.length-1),setTimeout(function(){r.mV(e,i,n)},r.config().Xla[e.ZU])}),e.Roa=t.abort},d.prototype.$F=function(t){try{t.Roa()}catch(t){this.log.warn("exception aborting request")}},d.prototype.uz=function(){return this.Aa.Yb().da(f.ja)},p=d,p=t.__decorate([n.R(),t.__param(0,n.l(h.jd)),t.__param(1,n.l(l.Tm)),t.__param(2,n.l(i.Zc)),t.__param(3,n.l(r.qb)),t.__param(4,n.l(a.Hx)),t.__param(5,n.l(s.aGa))],p),e.gGa=p},function(t,e,i){var n,r,a,h,o,s,f,l;function u(i,n,r,a,o,s){function u(t,e){this.track=t,this.label=e,this.Bh=l.wc.Sc.UNSENT,this.bytesReceived=0,this.ps=[],this.requestId=s.Wy().toString(),this.jb=r,this.log=n.ib("MediaRequest"),this.config=i,this.Ub=new f.Gk,"notification"===this.label?this.config().jz&&(this.FH=a):this.FH=o}function c(t,e){this.requestId=s.Wy().toString(),this.jb=r,this.log=n.ib("MediaRequest"),this.config=i,this.Ub=new f.Gk,this.label=e,"notification"===this.label?this.config().jz&&(this.FH=a):this.FH=o,this.fW=this.PL=this.QL=void 0,this.track=t,this.J3=this.url=this.responseType=void 0,this.Bh=l.wc.Sc.UNSENT,this.uj=this.HM=this.ph=this.status=void 0,this.ks=this.bytesReceived=0,this.connect=this.oma=this.sG=this.sD=this.eqa=this.rf=this.nma=this.loadTime=this.lL=void 0,this.ps=[],this.Co=!1}u.prototype.addEventListener=function(t,e,i){this.Ub.addListener.call(this,t,e,i)},u.prototype.removeEventListener=function(t,e){this.Ub.removeListener.call(this,t,e)},u.prototype.emit=function(t,e,i){this.Ub.Fc.call(this,t,e,i)},u.prototype.LPb=function(t){this.Bh===l.wc.Sc.OPENED&&(this.fW=!0,this.loadTime=this.rf=t.timestamp,this.Bh=l.wc.Sc.Tx,this.emit(l.wc.Le.OGa,t))},u.prototype.ksa=function(t){var e;this.Bh<l.wc.Sc.Sx&&(this.ps=[],e=t.timestamp-this.loadTime,!this.ad&&0<e&&(this.connect=!0,this.ps.push(e)),!0===this.config().uJb?this.nma=t.timestamp:this.nma=this.rf=t.timestamp,this.Bh=l.wc.Sc.Sx,this.emit(l.wc.Le.NGa,t))},u.prototype.PPb=function(t){this.Bh===l.wc.Sc.Sx&&(this.eqa=this.rf=t.timestamp,t.newBytes=t.bytesLoaded-this.bytesReceived,this.bytesReceived=t.bytesLoaded,this.jb.Gg(this.eqa)&&this.emit(l.wc.Le.PGa,t))},u.prototype.gO=function(t){-1<[l.wc.Sc.Tx,l.wc.Sc.Sx].indexOf(this.Bh)&&(this.fW=!1,this.rf=t.timestamp,this.Bh=l.wc.Sc.DONE,t.newBytes=this.bh-this.bytesReceived,this.bytesReceived=this.bh,this.jb.Gg(this.sG)&&(this.rf=this.sG,0===t.newBytes&&(this.eqa=this.sG)),this.jb.Gg(this.sD)&&(this.loadTime=this.sD),this.lL=t.response,this.emit(l.wc.Le.CR,t))},u.prototype.GPb=function(t){this.fW=!1,this.emit(l.wc.Le.jib,t)},u.prototype.msa=function(t){this.rf=t.timestamp,this.status=t.httpcode,this.ph=t.errorcode,this.HM=l.wc.$_.name[this.ph],this.uj=t.nativecode,this.emit(l.wc.Le.bF,t),this.fW=!1},u.prototype.open=function(t,e,i,n,r,a,o){return this.ex=!1,this.J3=e,this.url=t,this.responseType=i,!!this.url&&(this.Bh=l.wc.Sc.OPENED,this.FH.mV(this,e,o),!0)},u.prototype.ed=function(){return-1!==[l.wc.Sc.OPENED,l.wc.Sc.Tx,l.wc.Sc.Sx].indexOf(this.Bh)&&this.abort(),!0},u.prototype.fSa=function(){this.lL=void 0,this.b4&&(this.b4.response=void 0,this.b4.cadmiumResponse.content=void 0),this.Roa=void 0},u.prototype.daa=function(t){return this.url=t,!0},u.prototype.abort=function(){return this.Bh=l.wc.Sc.hQ,this.FH.$F(this),!0},u.prototype.pause=function(){},u.prototype.getResponseHeader=function(){return null},u.prototype.getAllResponseHeaders=function(){return""},u.prototype.iY=function(){},u.prototype.mi=function(){return this.requestId},u.prototype.toString=function(){var t={requestId:this.mi(),segmentId:this.xa,isHeader:this.ad,ptsStart:this.AA,ptsOffset:this.Ou,responseType:this.responseType,duration:this.Hr,readystate:this.Bh};return this.stream&&(t.bitrate=this.stream.bitrate),JSON.stringify(t)},u.prototype.toJSON=function(){return this.toString()},u.prototype.EHb=function(){var t,e;this.config().ubb&&h.xv&&h.xv.getEntriesByType&&(!this.jb.Gg(this.sD)||!this.jb.Gg(this.sG)&&this.jb.Gg(this.url))&&(t=this.url.split("nflxvideo.net")[0].split("//").pop()+("*nflxvideo.net/range/"+this.QL+"-"+this.PL)+"*",e=new RegExp(t),t=h.xv.getEntriesByType("resource").filter(function(t){return e.exec(t.name)})[0],this.jb.Gg(t)&&(0<t.startTime&&(this.sD=t.startTime,0<t.requestStart&&(this.sD=Math.max(this.sD,t.requestStart))),0<t.responseStart&&(this.oma=t.responseStart),0<t.responseEnd&&(this.sG=t.responseEnd)))},u.prototype.cLb=function(){return this.jb.Gg(this.sD)&&this.jb.Gg(this.sG)&&this.jb.Gg(this.oma)},it.Object.defineProperties(u.prototype,{bh:{configurable:!0,enumerable:!0,get:function(){return this.J3.end-this.J3.start+1}},byteLength:{configurable:!0,enumerable:!0,get:function(){return this.PL-this.QL+1}},CZa:{configurable:!0,enumerable:!0,get:function(){return!!(this.response&&0<this.response.byteLength)}},ad:{configurable:!0,enumerable:!0,get:function(){return!this.kD}},response:{configurable:!0,enumerable:!0,get:function(){return this.lL}},readyState:{configurable:!0,enumerable:!0,get:function(){return this.Bh},set:function(){}}}),Object.getOwnPropertyNames(u.prototype).forEach(function(t){var e=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(c.prototype,t,e)}),this.$q=Object.assign(c,l.wc)}_esm(e),e.eGa=void 0,t=i(1),n=i(0),r=i(7),a=i(13),h=i(11),o=i(27),s=i(513),f=i(73),l=i(191),i=i(81),u=t.__decorate([n.R(),t.__param(0,n.l(a.Zc)),t.__param(1,n.l(r.qb)),t.__param(2,n.l(o.bg)),t.__param(3,n.l(s.WGa)),t.__param(4,n.l(s.hGa)),t.__param(5,n.l(i.Gx))],u),e.eGa=u},function(t,e,i){var n,r;_esm(e),e.t3a=void 0,t=i(0),n=i(332),r=i(1167),e.t3a=new t.rd(function(t){t(n.sda).to(r.wGa).aa()})},function(t,e,i){var n,r,a,o,s;function u(t){return r.Ze.call(this,t,"MseConfigImpl")||this}_esm(e),e.wGa=void 0,t=i(1),n=i(45),r=i(46),a=i(0),o=i(37),s=i(4),T(u,r.Ze),it.Object.defineProperties(u.prototype,{k3a:{configurable:!0,enumerable:!0,get:function(){return s.Nc(5e3)}},B4a:{configurable:!0,enumerable:!0,get:function(){return s.Nc(1e3)}},C4a:{configurable:!0,enumerable:!0,get:function(){return s.Nc(1e3)}}}),i=u,t.__decorate([n.config(n.$k,"minDecoderBufferMilliseconds")],i.prototype,"k3a",null),t.__decorate([n.config(n.$k,"optimalDecoderBufferMilliseconds")],i.prototype,"B4a",null),t.__decorate([n.config(n.$k,"optimalDecoderBufferMillisecondsBranching")],i.prototype,"C4a",null),i=t.__decorate([a.R(),t.__param(0,a.l(o.Wl))],i),e.wGa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;_esm(e),e.o5a=void 0,t=i(0),n=i(515),r=i(1169),a=i(66),o=i(1171),s=i(518),u=i(1172),c=i(470),h=i(1173),f=i(192),l=i(1174),e.o5a=new t.rd(function(t){t(a.Xs).to(o.yHa).aa(),t(n.AHa).to(r.zHa).aa(),t(c.KHa).to(h.JHa),t(c.IHa).wf(function(t){return function(){return t.$a.get(c.KHa)}}),t(s.gIa).to(u.fIa).aa(),t(f.U0).to(l.cIa).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v;function y(t){this.config=t,this.Ry=[]}function w(t,e,i){this.Aa=t,this.OP=e,this.context=i,this.startTime=this.Aa.Yb()}function _(t,e,i,n,r,a,o,s,u){this.qab=e,this.json=i,this.Aa=n,this.Kr=r,this.hua=a,this.Oc=o,this.config=s,this.Ub=u,this.log=t.ib("Pbo"),s.V6a&&(this.Ry=new y(s)),this.OP=this.qab()}_esm(e),e.zHa=void 0,t=i(1),n=i(0),r=i(4),a=i(516),o=i(7),s=i(39),u=i(18),c=i(40),h=i(140),f=i(48),l=i(517),p=i(66),d=i(97),b=i(15),m=i(68),g=i(1170),v={"shakti-":"akira","UI-":"chromecast"},_.prototype.send=function(t,e){var i=new w(this.Aa,this.OP,t);return this.Ry&&this.Ry.append(i),this.Lva(t,e,i)},_.prototype.Lva=function(t,e,a){var o=this;return new Promise(function(n,r){o.retry(t,e).then(function(t){var e,i;o.jXb(t),i=(e=nt(o.i2b(t))).next().value,e=e.next().value,i&&(o.gvb(a),n(t)),e&&(o.tSa(a,e),r(e))}).catch(function(t){var e=o.tSa(a,t);t.ub&&(t.ub=[t.ub," ",e].join("")),r(t)})})},_.prototype.jXb=function(t){(t=t.serverTime)&&this.Ub.Fc(b.Lca.z8a,r.Nc(t))},_.prototype.i2b=function(t){var e=t.result;if("deviceCommand"in t){switch(t=t.deviceCommand,this.log.trace("Received device command '"+t+"'"),t){case"reset":e="RESET_DEVICE";break;case"reload":e="RELOAD_DEVICE";break;case"exit":e="EXIT_DEVICE";break;default:e="FAIL",this.log.error("Unhandled device command '"+t+"'")}return[,{MD:!0,code:e,detail:{message:"Server sent device action to '"+t+"' device"}}]}return e?[e,void 0]:t.code?(this.log.error("Response did not contain a result or an error but did contain an error code",t),[,{code:t.code,detail:{message:t.message}}]):(this.log.error("Response did not contain a result or an error",t),[,{code:"FAIL",detail:{message:"Response did contain a result or an error"}}])},_.prototype.Wrb=function(n,r,t){var a=this;return this.v1b(r,n),this.OP=this.qab(t),this.OP.send(r,t).then(function(t){return{retry:!1,result:g.S0.RRb(a.json,t.body)}}).catch(function(t){var e=g.S0.iGb(t),i=void 0!==e?Math.min(e,r.jva):r.jva;return a.N$(r,t,n,i)?(e=a.Itb(t,n,i),a.log.warn("Method failed, retrying",Object.assign({Method:r.zl,Attempt:n+1,WaitTime:e,MaxRetries:i},a.Lka(t))),Promise.resolve({retry:!0,delay:e,error:t})):Promise.resolve({retry:!1,error:t})})},_.prototype.jEb=function(i){var n,t;return this.yha&&this.yha.vRb===i||(n="",t=i,Object.entries(v).find(function(t){var e=nt(t);if(t=e.next().value,e=e.next().value,0===i.indexOf(t))return n=e,i=i.slice(t.length),!0}),this.yha={oSa:n,YA:i,vRb:t}),this.yha},_.prototype.v1b=function(t,e){var i=t.url.searchParams;i.set(m.BB.Djb,(e+1).toString()),i.set(m.BB.Ejb,t.Vua),(t=this.jEb(null!==(e=this.config.YA)&&void 0!==e?e:"")).oSa&&(i.set(m.BB.$db,t.oSa),t.YA&&i.set(m.BB.rkb,encodeURIComponent(t.YA)),null!=(e=this.Kr.he)&&e.name&&i.set(m.BB.vdb,encodeURIComponent(e.name)),null!=e&&e.version&&i.set(m.BB.Adb,encodeURIComponent(e.version)),null!==(t=null==e?void 0:e.os)&&void 0!==t&&t.name&&i.set(m.BB.kib,encodeURIComponent(e.os.name)),null!==(t=null==e?void 0:e.os)&&void 0!==t&&t.version&&i.set(m.BB.lib,encodeURIComponent(e.os.version)))},_.prototype.retry=function(e,i,n){var r=this;return n=void 0===n?0:n,this.Wrb(n++,e,i).then(function(t){if(t.retry)return r.wait(t.delay).then(function(){return r.retry(e,i,n)});if(t.error)throw t.error;if(void 0===t.result)throw{pboc:!1,code:"FAIL",detail:{message:"The response was undefined"}};return t.result})},_.prototype.N$=function(t,e,i,n){var r=this.Kr.S7a||g.S0.dLb(e);return!!(r&&i<n)||(r?this.log.error("Method failed, retry limit exceeded, giving up",Object.assign({Method:t.zl,Attempt:i+1,MaxRetries:n},this.Lka(e))):this.log.error("Method failed with an error that is not retriable, giving up",Object.assign({Method:t.zl},this.Lka(e))),!1)},_.prototype.Itb=function(t,e,i){return t&&t.XD&&void 0!==t.XD.retryAfterSeconds?r.vh(t.XD.retryAfterSeconds):r.Nc(this.hua.y6a(1e3*(0===e?1:e),1e3*Math.pow(2,Math.min(e,i))))},_.prototype.wait=function(e){var i=this;return new Promise(function(t){i.Oc.zk(e||r.Gb,t)})},_.prototype.Lka=function(t){return l.n0a(t)?t:{message:t.message,subCode:t.Cc,extCode:t.Kd,mslCode:t.mA,data:t.data}},_.prototype.gvb=function(t){t.EP()},_.prototype.tSa=function(t,e){var i;if(t.Pt(e),this.Ry)try{return i=this.json.stringify(this.Ry),this.log.error("PBO command history",i),i}catch(t){}return""},i=_,i=t.__decorate([n.R(),t.__param(0,n.l(o.qb)),t.__param(1,n.l(a.zLa)),t.__param(2,n.l(s.LE)),t.__param(3,n.l(u.jd)),t.__param(4,n.l(c.Tm)),t.__param(5,n.l(h.b1)),t.__param(6,n.l(f.Qj)),t.__param(7,n.l(p.Xs)),t.__param(8,n.l(d.qca))],i),e.zHa=i,w.prototype.EP=function(){this.$=!0,this.elapsedTime=this.Aa.Yb().Qa(this.startTime)},w.prototype.Pt=function(t){this.$=!1,this.elapsedTime=this.Aa.Yb().Qa(this.startTime),this.JZb=t.Cc||t.subCode,this.xCb=t.Kd||t.extCode},w.prototype.toString=function(){return JSON.stringify(this)},w.prototype.toJSON=function(){var t=Object.assign({success:this.$,method:this.context.zl,startTime:this.startTime.da(r.ja),elapsedTime:this.elapsedTime?this.elapsedTime.da(r.ja):"in progress"},this.OP.cka());return this.$?t:Object.assign(Object.assign(Object.assign({},t),this.OP.cka()),{subcode:this.JZb,extcode:this.xCb})},y.prototype.append=function(t){this.Ry.push(t),0<this.config.Noa&&this.Ry.length>this.config.Noa&&this.Ry.shift()},y.prototype.toJSON=function(){return this.Ry}},function(t,e,i){var n;function r(){}_esm(e),e.S0=void 0,n=i(3),r.dLb=function(t){var e=t&&t.code,i=t&&(t.na||t.Cc);return t=t.Kd!==n.t0.pHa,i=!!i&&i>=n.L.gR&&i<=n.L.eR&&t,!("RETRY"!==e&&"FAIL"!==e)||i},r.iGb=function(t){var e=null===(e=null==t?void 0:t.XD)||void 0===e?void 0:e.maxRetries;return"number"==typeof e?e:"FAIL"===(null==t?void 0:t.code)?1:void 0},r.RRb=function(t,e){var i;if(e){try{i=t.parse(e)}catch(t){throw{MD:!0,code:"FAIL",message:"Unable to parse the response body",data:e}}if(i.error)throw i.error;if(i.result){if(Array.isArray(i.result)&&(t=i.result.find(function(t){return t.error})))throw t.error;return i}throw{MD:!0,code:"FAIL",message:"There is no result property on the response"}}throw{MD:!0,code:"FAIL",message:"There is no body property on the response"}},e.S0=r},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n){return(t=r.Ze.call(this,t,"PboConfigImpl")||this).config=e,t.srb=i,t.oj=n,t}_esm(e),e.yHa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(45),s=i(13),u=i(123),i=i(108),T(h,r.Ze),it.Object.defineProperties(h.prototype,{YA:{configurable:!0,enumerable:!0,get:function(){return this.config().Ir.YA||""}},Aaa:{configurable:!0,enumerable:!0,get:function(){return this.config().Ir.Aaa||""}},version:{configurable:!0,enumerable:!0,get:function(){return 2}},organization:{configurable:!0,enumerable:!0,get:function(){return"cadmium"}},languages:{configurable:!0,enumerable:!0,get:function(){return this.config().Ir.Kta}},Gpa:{configurable:!0,enumerable:!0,get:function(){return!1}},eOb:{configurable:!0,enumerable:!0,get:function(){return!0}},gOb:{configurable:!0,enumerable:!0,get:function(){return!0}},A8a:{configurable:!0,enumerable:!0,get:function(){return Object.assign({manifest:{service:"pbo_manifests",version:"^1.0.0"},license:{service:"pbo_licenses",version:"^1.0.0"},events:{service:"event",isPlayApiDirect:!0,version:"1"},bind:{service:this.srb.dRa,version:"^1.0.0"},pair:{service:"pbo_mdx",version:"^1.0.0"},ping:{service:"pbo_events",version:"^1.0.0"},config:{service:"pbo_config",version:"^1.0.0"}},this.B8a)}},B8a:{configurable:!0,enumerable:!0,get:function(){return{}}},V6a:{configurable:!0,enumerable:!0,get:function(){return!1}},Noa:{configurable:!0,enumerable:!0,get:function(){return 10}},RPa:{configurable:!0,enumerable:!0,get:function(){return!1}},Z3:{configurable:!0,enumerable:!0,get:function(){return!1}},iVa:{configurable:!0,enumerable:!0,get:function(){return!1}},M1b:{configurable:!0,enumerable:!0,get:function(){return!1}},wbb:{configurable:!0,enumerable:!0,get:function(){return!1}},hVa:{configurable:!0,enumerable:!0,get:function(){return!0}},pVa:{configurable:!0,enumerable:!0,get:function(){return!0}},KG:{configurable:!0,enumerable:!0,get:function(){return this.oj.KG}},USa:{configurable:!0,enumerable:!0,get:function(){return[]}}}),c=h,t.__decorate([o.config(o.string,"uiVersion")],c.prototype,"YA",null),t.__decorate([o.config(o.string,"uiPlatform")],c.prototype,"Aaa",null),t.__decorate([o.config(o.ZA,"pboVersion")],c.prototype,"version",null),t.__decorate([o.config(o.string,"pboOrganization")],c.prototype,"organization",null),t.__decorate([o.config(o.cZ,"pboLanguages")],c.prototype,"languages",null),t.__decorate([o.config(o.dd,"hasLimitedPlaybackFunctionality")],c.prototype,"Gpa",null),t.__decorate([o.config(o.dd,"mdxBindUsingNodeQuark")],c.prototype,"eOb",null),t.__decorate([o.config(o.dd,"mdxPairUsingNodeQuark")],c.prototype,"gOb",null),t.__decorate([o.config(o.object(),"pboCommands")],c.prototype,"A8a",null),t.__decorate([o.config(o.object(),"pboCommandsOverride")],c.prototype,"B8a",null),t.__decorate([o.config(o.dd,"pboRecordHistory")],c.prototype,"V6a",null),t.__decorate([o.config(o.ZA,"pboHistorySize")],c.prototype,"Noa",null),t.__decorate([o.config(o.dd,"pboAddXEsnHeader")],c.prototype,"RPa",null),t.__decorate([o.config(o.dd,"combineManifestAndLicense")],c.prototype,"Z3",null),t.__decorate([o.config(o.dd,"enableLicensedManifestForPrefetch")],c.prototype,"iVa",null),t.__decorate([o.config(o.dd,"useLdlForPrefetchLicensedManifest")],c.prototype,"M1b",null),t.__decorate([o.config(o.dd,"pboUseStudioManifest")],c.prototype,"wbb",null),t.__decorate([o.config(o.dd,"pboEnableLeanManifest")],c.prototype,"hVa",null),t.__decorate([o.config(o.dd,"pboEnableV2OptimizedManifest")],c.prototype,"pVa",null),t.__decorate([o.config(o.dd,"pboEnableManifestPartialHydrationSupport")],c.prototype,"KG",null),t.__decorate([o.config(o.cZ,"pboContentPlaygraphTypes")],c.prototype,"USa",null),c=t.__decorate([n.R(),t.__param(0,n.l(a.Wl)),t.__param(1,n.l(s.Zc)),t.__param(2,n.l(u.zJ)),t.__param(3,n.l(i.fF))],c),e.yHa=c},function(t,e,i){var n,r;function a(t,e,i,n,r,a,o){this.version=t,this.url=e,this.id=i,this.languages=n,this.Fb=r,this.aBb=a,this.iPb=o}function o(t){this.Yg=t}_esm(e),e.fIa=void 0,t=i(1),n=i(0),i=i(66),o.prototype.create=function(t,e,i,n,r){return new a(this.Yg.version,e,t,this.Yg.languages,i,n,r)},r=o,r=t.__decorate([n.R(),t.__param(0,n.l(i.Xs))],r),e.fIa=r,a.prototype.toJSON=function(){return{version:this.version,url:this.url,id:this.id,languages:this.languages,params:this.Fb,echo:this.aBb}}},function(t,e,i){var n,r,a;function o(t,e){this.FG=e,this.log=t.ib("Pbo"),this.links={}}_esm(e),e.JHa=void 0,t=i(1),n=i(0),r=i(7),i=i(91),o.prototype.EPa=function(t){t&&(this.links=Object.assign(Object.assign({},this.links),t))},o.prototype.zV=function(t){return this.links[t]},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(i.zx))],a),e.JHa=a},function(t,e,i){function n(){}_esm(e),e.cIa=void 0,t=i(1),i=i(0),n.prototype.LXb=function(t){this.listener=t},n.prototype.FO=function(t){var e;null!==(e=this.listener)&&void 0!==e&&e.call(this,t)},i=t.__decorate([i.R()],n),e.cIa=i},function(t,e,h){var i,n,r,a,o,s,u,c,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C,L,M,D,U,B,F;_esm(e),e.j=void 0,t=h(0),i=h(468),n=h(519),r=h(1176),a=h(521),o=h(1177),s=h(346),u=h(343),c=h(1178),f=h(1189),l=h(13),p=h(18),d=h(96),b=h(27),m=h(7),g=h(1190),v=h(259),y=h(1191),w=h(4),_=h(1192),E=h(1193),k=h(541),S=h(1194),T=h(97),A=h(522),O=h(1195),I=h(112),x=h(29),P=h(155),R=h(91),N=h(283),j=h(544),C=h(1196),L=h(71),M=h(40),D=h(523),U=h(1197),B=h(294),F=h(26),e.j=new t.rd(function(t){t(j.eea).to(C.DIa).aa(),t(B.wba).wf(function(t){var i=t.$a;return function(t,e){return new(h(1198).Rya)(t,e,i.get(d.pv))}}),t(i.CLa).wf(function(t){var c=t.$a;return function(t,e,i,n,r,a,o,s,u){return new(h(1201).DLa)(c.get(_.ILa),t,e,i,n,r,a,o,s,u)}}),t(_.ILa).to(E.HLa).aa(),t(n.GLa).to(r.FLa).aa(),t(u.yIa).to(c.xIa).aa(),t(D.QJa).to(U.PJa),t(D.OJa).$$a(D.QJa),t(s.pBa).wf(function(t){var e=t.$a;return function(t){return new(h(1202).qBa)(e.get(T.oBa),e.get(d.pv),e.get(p.jd),t)}}),t(a.qza).wf(function(){return function(t){return new o.rza(t)}}),t(g.sIa).wf(function(t){var e=t.$a;return function(t){return new f.tIa(t,e.get(m.qb),e.get(l.Zc),e.get(b.bg),e.get(d.pv))}}),t(v.gea).wf(function(t){var c=t.$a;return function(t,e,i,n,r,a,o,s,u){return new y.FIa(t,e,i,n,r,a,o,s,u,c.get(g.sIa),c.get(j.eea))}}),t(k.iKa).wf(function(n){return function(t){var e=n.$a.get(l.Zc),i=n.$a.get(m.qb);return new S.jKa(e,t,i)}}),t(A.AIa).wf(function(o){return function(t){var e=o.$a.get(R.zx),i=o.$a.get(I.nK),n=o.$a.get(x.cg),r=o.$a.get(P.TR),a=o.$a.get(F.yx);return new O.BIa(t,e,i(w.vh(1)),n,r,a)}}),t(N.qda).nE(function(t){return new(h(1203).sGa)(t.$a.get(L.xR),t.$a.get(M.Tm))}).aa()})},function(t,e,i){var a,o,n,r,s,u;function c(t,e){this.hg=t,this.config=e}_esm(e),e.FLa=void 0,t=i(1),a=i(15),o=i(520),n=i(18),r=i(0),s=i(4),i=i(13),c.prototype.zM=function(t){var e;t.EZ={},!t.nD()&&t.XA&&0<t.XA.length&&(t.WA=this.XXa(t),t.WA)&&((e=this.lYb(t))()||(t.yb.addListener(e),t.We.addListener(e)))},c.prototype.lYb=function(n){var r;return r=this,function t(){var e,i;return!(!n.We.value||n.yb.value===a.cb.Pf||(i=(e=n.WA).getState())===o.wp.LOADING||(i!==o.wp.ME&&e.retry?!(e=r.HHb(n))||(n.EZ.offset=r.hg.Yb().da(s.ja),(n.WA=e).download(),0):(n.yb.removeListener(t),n.We.removeListener(t),1)))}},c.prototype.HHb=function(t){var e=this.config(),i=t.Ll.jN()<e.v0b;return e=(t.We.value?t.We.value.bitrate:0)>e.u0b,this.eHb(t,i&&e)},c.prototype.eHb=function(t,e){return e&&(e=this.XXa(t),this.VYa(t,e.size))?(t.EZ.C7a="h",e):(e=this.gGb(t),this.VYa(t,e.size)?(t.EZ.C7a="l",e):void 0)},c.prototype.VYa=function(t,e){var i=this.config(),n=Math.min(t.DT(),t.QZ());return t.Csb.ytb(e)*(1+.01*i.Wqb[2])<n*i.y0b},c.prototype.XXa=function(t){return t.XA[t.XA.length-1]},c.prototype.gGb=function(t){return t.XA[0]},u=c,u=t.__decorate([r.R(),t.__param(0,r.l(n.jd)),t.__param(1,r.l(i.Zc))],u),e.FLa=u},function(t,e){function i(t){this.j=t}_esm(e),e.rza=void 0,i.prototype.$ab=function(){var t=this.j.Ka;null!=t&&t.PB&&(null!=(t=t.Qb.get())&&t.Aj&&(this.j.Aj=t.Aj.Ga),null!=t&&t.Ra&&(this.j.Ra=t.Ra.Ga))},i.prototype.Zt=function(){return-1===this.j.Ra&&this.$ab(),this.j.Ra},i.prototype.ytb=function(t){return-1!==this.j.Aj&&-1!==this.j.Ra||this.$ab(),-1===this.j.Aj||-1===this.j.Ra?Number.MAX_VALUE:this.j.Aj+8*t/this.j.Ra},e.rza=i},function(t,e,u){var i,n,r,a,o,s,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P;function R(t,e,i,n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T){this.Gz=t,this.mC=e,this.Aa=i,this.za=n,this.Dsb=r,this.exa=a,this.GW=o,this.$qa=s,this.NN=u,this.Fd=c,this.Lh=h,this.Vi=f,this.KL=l,this.KX=p,this.nk=d,this.uxa=b,this.Vf=m,this.Dm=g,this.pe=v,this.qta=y,this.NVb=w,this.hia=_,this.JH=E,this.$sa=k,this.Q3=S,this.EL=T}_esm(e),e.xIa=void 0,t=u(1),i=u(81),n=u(0),r=u(112),a=u(31),o=u(18),s=u(38),c=u(521),h=u(260),f=u(469),l=u(490),p=u(120),d=u(141),b=u(161),m=u(98),g=u(459),v=u(259),y=u(1179),w=u(519),_=u(49),E=u(29),k=u(522),S=u(71),T=u(523),A=u(294),O=u(283),I=u(119),x=u(502),R.prototype.create=function(t,e,i,n,r,a,o,s){return new(u(524).zIa)(t,e,a,o,n,r,this.Gz,i,this.Aa,this.mC,this.za,this.GW,this.Dsb,this.exa,this.$qa,this.NN,this.Fd,this.Lh,this.Vi,this.KL,this.KX,this.nk,this.uxa,this.Vf,this.pe,this.qta,this.Dm,this.NVb(),this.hia,this.JH,this.$sa,void 0,this.Q3,s)},P=R,P=t.__decorate([n.R(),t.__param(0,n.l(i.Gx)),t.__param(1,n.l(a.fh)),t.__param(2,n.l(o.jd)),t.__param(3,n.l(s.Uh)),t.__param(4,n.l(c.qza)),t.__param(5,n.l(r.nK)),t.__param(6,n.l(h.kda)),t.__param(7,n.l(f.LFa)),t.__param(8,n.l(l.qR)),t.__param(9,n.l(p.sF)),t.__param(10,n.l(d.LR)),t.__param(11,n.l(b.hF)),t.__param(12,n.l(g.zza)),t.__param(13,n.l(v.gea)),t.__param(14,n.l(I.RE)),t.__param(15,n.l(w.GLa)),t.__param(16,n.l(_.Um)),t.__param(17,n.l(S.xR)),t.__param(18,n.l(E.cg)),t.__param(19,n.l(k.AIa)),t.__param(20,n.l(T.OJa)),t.__param(21,n.l(A.wba)),t.__param(22,n.l(O.qda)),t.__param(23,n.l(x.YHa)),t.__param(24,n.l(y.kAa)),t.__param(24,n.optional()),t.__param(25,n.l(m.jQ)),t.__param(25,n.optional())],P),e.xIa=P},function(t,e){_esm(e),e.kAa=e.lAa=void 0,(t=e.lAa||(e.lAa={}))[t.rib=0]="PAUSE",t[t.Bjb=1]="RESUME",t[t.R3b=2]="CAPTIONS_ON",t[t.Q3b=3]="CAPTIONS_OFF",t[t.S3b=4]="CAPTION_LANGUAGE_CHANGED",t[t.h3b=5]="AUDIO_LANGUAGE_CHANGED",t[t.r6b=6]="NEXT_EP",t[t.i7b=7]="PREV_EP",t[t.CB=8]="SEEK",t[t.bKa=9]="STOP",e.kAa="CastInteractionTrackerSymbol"},function(t,e,i){var n,r,s,u,a,o,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A;function O(){this.paa=[],this.d0b=50}function I(t){var e=this;this.j=t,this.Sbb=Promise.resolve(),this.ZBa=pt.WebKitMediaKeys?"webkit":HTMLVideoElement.prototype.msSetMediaKeys?"ms":"",this.dC=[],this.ft=new a.Gk,this.PMa=this.jfa=0,this.K1=[],this.Dg=h.Ih(this.j,"MediaElementASE"),this.LOa=m.ql,this.Gfa=!1,this.bc=new O,this.wo={},this.rNa={},this.S5=this.rS(function(){var t;if(e.X)return null!==(t=e.X.webkitDecodedFrameCount)&&void 0!==t?t:0}),this.QC=this.rS(function(){var t;if(e.X)return(t=e.b2())?t.totalVideoFrames:e.X.webkitDecodedFrameCount}),this.XG=this.rS(function(){var t;if(e.X)return(t=e.b2())?t.droppedVideoFrames:e.X.webkitDroppedFrameCount}),this.sV=this.rS(function(){var t;if(e.X)return(t=e.b2())&&t.corruptedVideoFrames}),this.X5=this.rS(function(){var t;if(e.X)return(t=e.b2())&&v.bj(t.totalFrameDelay*m.pl)}),this.NNa=function(t){return e.ft.Fc(_.Oj.n1a,{W:t})},this.Gl=h.ka.get(w.NEa).create(u.config.hp,this,this.j),u.config.rD&&(this.Sbb=new Promise(function(t){e.LOa=t,e.j.addEventListener(S.ca.kg,t)})),this.Dg.trace("Created Media Element"),this.addEventListener=this.ft.addListener,this.removeEventListener=this.ft.removeListener}function x(t){return t.preventDefault(),!1}_esm(e),e.ZFa=void 0,n=i(47),r=i(300),s=i(12),u=i(14),a=i(73),o=i(60),c=i(50),h=i(8),f=i(3),l=i(21),p=i(92),d=i(327),b=i(24),m=i(30),g=i(301),v=i(11),y=i(19),w=i(530),_=i(302),E=i(507),k=i(4),S=i(15),T=i(62),A=!!(v.$E&&HTMLVideoElement&&URL&&HTMLVideoElement.prototype.play),I.prototype.tV=function(e){try{this.X&&(this.PMa=this.X.currentTime)}catch(t){this.Dg.error("Exception while getting VIDEO.currentTime",t),e&&this.nS(f.M.Wib,t)}return v.bj(this.PMa*m.pl)},I.prototype.seek=function(t){var e;if(l.hb(!this.Fp),this.EOa(),e=this.tV(!0),!u.config.mrb&&v.SE(e-t)<=this.Bva)this.Dg.trace("Seek delta too small",{currentTime:e,seekTime:t,min:this.Bva}),this.bc.trace("smallseek",t);else{this.bc.trace("seek",t);try{this.Dg.trace("Setting video elements currentTime",{From:p.cj(e),To:p.cj(t)}),this.Fp={},this.X.currentTime=t/m.pl,this.ft.Fc(_.Oj.Wp)}catch(t){this.Dg.error("Exception while setting VIDEO.currentTime",t),this.nS(f.M.Xib,t)}}},I.prototype.WYa=function(){return!!this.Fp},I.prototype.addSourceBuffer=function(e){var i,t=m.He(this.jfa.toString()+this.dC.length.toString());t={TY:this.jfa,F3:t};try{return i=new r.nda(this.j,e,this.eg,t,this.Dg),this.dC.push(i),e==s.aK&&i.pma&&i.pma.addListener(this.LOa),i}catch(t){i=m.wd(t),this.Dg.error("Unable to add source buffer.",{error:i}),this.j.Xd(f.M.Hda,{na:e===n.Tb.ol.Wb?m.L.hda:m.L.ida,ub:i})}},I.prototype.b3=function(t){var e=this;return t.forEach(function(t){return e.addSourceBuffer(t)}),this.ft.Fc(_.Oj.G9a),!0},I.prototype.removeSourceBuffer=function(e){this.dC=this.dC.filter(function(t){return!c.ASa(e,t)}),this.eg.removeSourceBuffer(e)},I.prototype.endOfStream=function(){this.bc.trace("endofstream"),u.config.kja&&this.eg.endOfStream()},I.prototype.Yp=function(t){return this.dC=[],t&&t.ubc(),!0},I.prototype.rXb=function(t){this.jfa=t},I.prototype.rYa=function(){if(this.eg)return k.W5a(this.eg.duration)},I.prototype.dAb=function(){var t;return!this.Gfa&&this.X&&this.X.readyState>=T.co.q0.HAVE_CURRENT_DATA&&(void 0===(t=this.X.webkitDecodedFrameCount)||0<t||u.config.L2b)&&(this.Gfa=!0),this.Gfa},I.prototype.open=function(){var t,e,i,n,r,a=this;if(this.X=(i=this.j.cB,r=h.ka.get(E.kMa).$Gb(),i=i.width/i.height*r.height,n=(r.width-i)/2,u.config.fYb?m.createElement("VIDEO","position:absolute;width:"+i+"px;height:"+r.height+"px;left:"+n+"px;top:0px"):m.createElement("VIDEO","position:absolute;width:100%;height:100%")),this.sourceBuffers=this.dC,this.j.addEventListener(S.ca.q9a,function(t){return a.iob(t)}),A){this.j.oD&&!u.config.lbb&&this.Gl.l9();try{this.eg=new v.$E}catch(t){return void this.nS(f.M.Nib,t)}try{this.vl=URL.createObjectURL(this.eg)}catch(t){return void this.nS(f.M.Oib,t)}try{this.Gl.zqb(this.NNa),this.eg.addEventListener("sourceopen",function(t){return a.mOa(t)}),this.eg.addEventListener(this.ZBa+"sourceopen",function(t){return a.mOa(t)}),this.X.addEventListener("error",this.wo.error=function(t){return a.RS(t)}),this.X.addEventListener("seeking",this.wo.seeking=function(){return a.hob()}),this.X.addEventListener("seeked",this.wo.seeked=function(){return a.gob()}),this.X.addEventListener("timeupdate",this.wo.timeupdate=function(){return a.job()}),this.X.addEventListener("loadstart",this.wo.loadstart=function(){return a.Jga()}),this.X.addEventListener("volumechange",this.wo.volumechange=function(t){return a.kob(t)}),this.X.addEventListener(this.Gl.FD,this.wo[this.Gl.FD]=function(){a.Dg.trace(a.Gl.FD),a.eob()}),(e=(t=this.j.Jg).lastChild)?t.insertBefore(this.X,e):t.appendChild(this.X),u.config.sUa&&this.X.addEventListener("contextmenu",x),this.X.src=this.vl,o.ve.addListener(o.Nr,this.rNa[o.Nr]=function(){return a.lOa()}),this.lOa()}catch(t){this.nS(f.M.Pib,t)}}else this.G1(f.M.jHa)},I.prototype.close=function(){var t;function e(){t.vl&&(t.EOa(),o.ve.removeListener(o.Nr,t.rNa[o.Nr]),t.wlb())}(t=this).bc.trace("close"),this.X.removeEventListener(this.Gl.FD,this.wo[this.Gl.FD]),this.X.removeEventListener("error",this.wo.error),this.X.removeEventListener("seeking",this.wo.seeking),this.X.removeEventListener("seeked",this.wo.seeked),this.X.removeEventListener("timeupdate",this.wo.timeupdate),this.X.removeEventListener("loadstart",this.wo.loadstart),this.X.removeEventListener("volumechange",this.wo.volumechange),this.Gl.uVb(this.NNa),u.config.hp?this.Gl.FA().then(e):e(),this.Gl.m7a&&clearTimeout(this.Gl.m7a)},I.prototype.VC=function(){return this.bc.VC()},I.prototype.eob=function(){u.config.lbb&&this.Gl.l9()},I.prototype.b2=function(){if(this.X)return this.X.getVideoPlaybackQuality&&this.X.getVideoPlaybackQuality()||this.X.videoPlaybackQuality||this.X.playbackQuality},I.prototype.upb=function(){var t=this.j.li;return(t=t&&t.errorCode)&&0<=[f.M.Q0,f.M.u0].indexOf(t)},I.prototype.wlb=function(){var t=!1;u.config.GTb&&this.upb()&&(t=!0),u.config.$ub&&!t&&(this.X.removeAttribute("src"),this.X.load&&this.X.load()),URL.revokeObjectURL(this.vl),u.config.sUa&&this.X.removeEventListener("contextmenu",x),!t&&this.X&&this.j.Jg.removeChild(this.X),this.X=this.eg=void 0,this.vl=""},I.prototype.lOa=function(){!0===v.Be.hidden?this.K1.forEach(function(t){t.refresh(),t.cZb()}):this.K1.forEach(function(t){t.refresh(),t.pZb()})},I.prototype.rS=function(t){var e=h.ka.get(d.TGa)(t);return this.K1.push(e),function(){return e.refresh(),e.ZEb()}},I.prototype.nS=function(t,e){var i,n={na:m.L.Lj,ub:m.wd(e)};try{(i=e.message.match(/(?:[x\W\s]|^)([0-9a-f]{8})(?:[x\W\s]|$)/i)[1].toUpperCase())&&8==i.length&&(n.pf=i)}catch(t){}this.j.Xd(t,n)},I.prototype.EOa=function(){this.K1.forEach(function(t){t.refresh()})},I.prototype.qmb=function(){return this.X&&this.X.msGraphicsTrustStatus},I.prototype.G1=function(t,e){this.j.Xd(t,e,void 0)},I.prototype.iob=function(t){var e,i,n,r,a,o;if(this.X){t=t.SZ,(e=this.qmb())&&(t.ConstrictionActive=e.constrictionActive,t.Status=e.status);try{t.readyState=""+this.X.readyState,t.currentTime=""+this.X.currentTime,t.pbRate=""+this.X.playbackRate}catch(t){}e=this.dC.length;for(;e--;)i="",(o=this.dC[e]).type==s.z0?i="audio":o.type==s.aK&&(i="video"),m.Zb(t,o.K5(),{prefix:i}),u.config.ABb&&this.j.li&&s.aK==o.type&&(((i=m.pP(o.Q5())).data&&i.data.length)<3e3&&(i.data=b.bTa(i.data).join(),m.Zb(t,i,{prefix:o.type})));if(this.eg&&(e=this.eg.duration)&&!isNaN(e)&&(t.duration=e.toFixed(4)),u.config.VMb)try{(r=(n=this.j.nf)&&n.Ib)&&(n=r.expiration,isNaN(n)||(t.exp=n),(r=r.keyStatuses.entries()).next&&(a=r.next().value)&&(t.keyStatus=a[1]))}catch(t){}}},I.prototype.mOa=function(t){this.wpb||(this.wpb=!0,this.ft.Fc(_.Oj.H9a,t))},I.prototype.hob=function(){this.bc.trace("seeking"),this.Dg.trace("Video element event: seeking"),this.Fp?this.Fp.hQb=!0:(this.Dg.error("unexpected seeking event"),u.config.LCb&&this.G1(f.M.bjb,{ub:{Trace:this.VC()}}))},I.prototype.gob=function(){this.bc.trace("seeked"),this.Dg.trace("Video element event: seeked"),this.Fp?(l.hb(this.Fp.hQb),this.Fp.gQb=!0,this.hPa()):(this.Dg.error("unexpected seeked event"),u.config.KCb&&this.G1(f.M.ajb,{ub:{Trace:this.VC()}}))},I.prototype.job=function(){var t;this.bc.trace("timeupdate",null===(t=this.X)||void 0===t?void 0:t.currentTime),this.Fp&&(this.Fp.jQb=!0,this.hPa()),this.ft.Fc(_.Oj.Wp)},I.prototype.Jga=function(){this.Dg.trace("Video element event: loadstart")},I.prototype.kob=function(t){this.Dg.trace("Video element event:",t.type);try{this.j.volume.set(this.X.volume),this.j.muted.set(this.X.muted)}catch(t){this.Dg.error("error updating volume",t)}},I.prototype.RS=function(t){var e,i,n=this.G1,r=f.M.iHa,a=f.qCa,o=this.VC(),s=t.target,u=s&&s.error,c=t.errorCode;if(s=u&&u.code,m.Xc(s)||(s=c&&c.code),c=u&&u.message,e=u&&u.msExtendedCode,m.Xc(e)||(e=u&&u.systemCode),m.Xc(e)||(e=t.systemCode),!m.Xc(e))try{for(t=/\(([^)]+)\)/g;i=t.exec(c);)i=Number(i[1]),y.Ba(i)&&(e=i)}catch(t){}o=m.Zb({},{code:s,systemCode:e,trace:JSON.stringify(o)},{pA:!0}),a={na:a(s),ub:g.Uqa(o)};try{c&&(a.OW=c)}catch(t){}e=m.He(e),y.Ba(e)&&(a.pf=h.Hia(e,4)),n.call(this,r,a)},I.prototype.hPa=function(){this.Fp&&this.Fp.gQb&&this.Fp.jQb&&(this.bc.trace("seekcomplete"),this.Fp=void 0,this.ft.Fc(_.Oj.BY))},it.Object.defineProperties(I.prototype,{Bva:{configurable:!0,enumerable:!0,get:function(){return u.config.VYb}}}),e.ZFa=I,O.prototype.trace=function(t,e){this.paa.push([t,e]),this.paa.length>this.d0b&&this.paa.shift()},O.prototype.VC=function(){return this.paa}},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p;function d(t){var i=this;this.j=t,this.Wwa=this.y3a=0,this.kg=this.Bq=!1,this.p$=0,this.Rl=function(){var t,e;i.m$(),i.BG&&(i.log.info("Deactivating",i.BG),i.SA.Wyb(i.Re())),i.j.ci.set(null),i.dJ.R8a(void 0),i.lSa(),(t=i.j.jc.value)&&t.Vr()&&!t.rq()&&(t=null),t&&i.j.yb.value!==l.cb.Pf&&(e=i.Re(),i.SA.jqb(e,t)),t?(i.log.info("Activating",t),i.j.Mm.set(t.getState()===n.nF.DB.ME?l.yf.re:l.yf.xd),i.Bq||i.j.Dd("tt_start"),t.X6().then(i.zL).catch(i.zL)):i.j.Mm.set(l.yf.re),i.BG=t,i.pJ()},this.sync=function(){i.Bq&&(i.dJ.start(),i.j.yb.value!==l.cb.Kc&&i.dJ.stop())},this.pJ=function(){var t;i.j.state.value===l.Rb.re&&i.j.yb.value!==l.cb.Pf&&(i.wh?t=i.dJ.lEb():i.j.jc.value&&(t=d.lZb[i.j.jc.value.getState()])),t&&f.Xc(t.startTime)&&i.j.cv.value!==t&&(i.y3a++,i.Wwa+=i.dJ.sYa()-t.startTime,i.ZQa=Math.ceil(i.Wwa/(i.y3a+0))),i.j.cv.set(t)},this.Re=function(){var t=i.j.Fna();return i.BG&&i.BG.du&&(t+=i.BG.du),t},this.bRb=function(t){i.fireEvent(d.JYb,t),t&&t.id&&i.SA.dbb(t.id),i.log.trace("showsubtitle",i.dZa(t))},this.XQb=function(t){i.fireEvent(d.CVb,t),i.log.trace("removesubtitle",i.dZa(t))},this.sk=function(){i.log.warn("imagesubs buffer underflow",i.j.jc.value.Ri),i.j.Mm.set(l.yf.xd)},this.vQb=function(){i.log.info("imagesubs buffering complete",i.j.jc.value.Ri),i.j.Mm.set(l.yf.re)},this.g9=function(){i.Bq&&i.wh&&i.wh.Is(i.Re())},this.t4a=function(t){i.Bq&&i.wh&&(i.wh.pause(),i.wh.NA(t.ek))},this.JD=function(){i.Bq&&i.wh&&i.wh.cua()},this.q4a=function(t){i.wh&&i.wh.wi(t.oh,t.dO)},this.y4a=function(t){i.wh&&i.wh.Ai(t.xa,t.y1b)},this.PQb=function(){i.Bq=!0,h.Rf(function(){var t;null!==(t=i.BG)&&void 0!==t&&t.kk?null!==(t=i.wh)&&void 0!==t&&t.Is(i.Re()):i.sync(),i.pJ()})},this.MQb=function(){i.lSa(),i.dJ.stop(),i.pJ(),i.kg=!0,i.m$()},this.Msa=function(t){(t=t.newValue)&&f.isArray(t.blocks)&&i.SA.dbb.apply(i.SA,G(t.blocks.map(function(t){return t.id})))},this.TQb=function(t){i.s1b(t.newValue,t.oldValue),i.sync(),i.pJ()},this.zL=function(t){var e;if(!i.kg){if((e=t.track)===i.j.jc.value)try{i.wh=e.Twa,e.kk?i.hqb(t):i.iqb(t)}catch(t){return void i.log.error("Error activating track:",t,e)}i.Bq||i.j.Dd(t.$?"tt_comp":"tt_err"),t.$?(o.config.d8a?setTimeout(function(){i.j.Mm.set(l.yf.re)},o.config.d8a):i.j.Mm.set(l.yf.re),e.kk||i.pJ()):t.aborted?i.log.warn("aborted timed text track loading"):o.config.JCb?i.j.Xd(c.M.Mgb,{ub:t.track?t.track.Ri:{}}):(i.log.error("ignore subtitle initialization error",t),i.j.Mm.set(l.yf.re))}},this.Ub=new a.Gk,this.SA=new u.WKa(s.Ih(t,"SubtitleTracker"),o.config.NBb),this.log=s.Ih(t,"TimedTextManager"),this.dJ=new r.rLa(this.Re,this.pJ),this.j.jc.addListener(this.Rl),o.config.cTb?(this.j.addEventListener(l.ca.Bq,this.PQb),this.Rl()):(this.j.Mm.set(l.yf.re),this.j.addEventListener(l.ca.Bq,function(){i.Bq=!0,i.Rl()})),this.j.yb.addListener(this.TQb),this.j.addEventListener(l.ca.fxa,this.sync),this.j.cv.addListener(this.Msa),this.j.addEventListener(l.ca.kg,this.MQb)}_esm(e),e.pLa=void 0,n=i(279),r=i(531),a=i(73),o=i(14),s=i(8),u=i(1182),c=i(3),h=i(61),f=i(19),l=i(15),p=i(1183),d.prototype.addEventListener=function(t,e,i){this.Ub.addListener(t,e,i)},d.prototype.removeEventListener=function(t,e){this.Ub.removeListener(t,e)},d.prototype.fireEvent=function(t,e,i){this.Ub.Fc(t,e,i)},d.prototype.Gha=function(t,e,i){var n=this,r=p.nLa.Nxb(this.j,t,e,i);this.R_a(this.j.Qh,r),this.j.Ki.forEach(function(t){n.R_a(t.Qh,r)}),this.j.jc.set(r),this.j.fireEvent(l.ca.ev)},d.prototype.iTb=function(t){this.$ua(t)?t.X6().then(function(){}):Promise.resolve()},d.prototype.xHb=function(t){return this.SA.fHb(t)},d.prototype.$na=function(t){return this.SA.$na(t)},d.prototype.LV=function(){var t=this.j.sZ,e=o.config.kxa.characterSize;return e={size:o.config.kaa.characterSize||e},t&&(e.visibility=t.goa(),e.RT=t.eoa(),e.Zr=t.foa()),e},d.prototype.bYb=function(t){o.config.kaa.characterSize=t,t=this.j.jc.value,this.$ua(t)&&!t.kk&&t.X6().then(this.zL).catch(this.zL)},d.prototype.s1b=function(t,e){t===l.cb.Kc||t==l.cb.hh?e!==l.cb.Kc&&e!==l.cb.hh&&((e=this.j.jc.value)&&!this.$ua(e)||this.SA.D3a(this.Re(),e||void 0,"presentingstate:"+t)):t!==l.cb.Pf&&t!==l.cb.Wq||this.SA.Ela(null!==(e=this.Re())&&void 0!==e?e:void 0,"presentingstate:"+t)},d.prototype.m$=function(){this.p$=0,clearTimeout(this.qWb)},d.prototype.lSa=function(){var t;this.wh&&this.wh.stop(),null!==(t=this.BG)&&void 0!==t&&t.kk&&this.Y1a("removeListener"),this.wh=void 0},d.prototype.Y1a=function(t){this.wh&&(this.wh[t]("showsubtitle",this.bRb),this.wh[t]("removesubtitle",this.XQb),this.wh[t]("underflow",this.sk),this.wh[t]("bufferingComplete",this.vQb),"addListener"===t?(this.j.addEventListener(l.ca.Wp,this.g9),this.j.addEventListener(l.ca.wk,this.t4a),this.j.addEventListener(l.ca.DI,this.JD),this.j.addEventListener(l.ca.V8,this.q4a),this.j.addEventListener(l.ca.Pxa,this.y4a)):(this.j.removeEventListener(l.ca.Wp,this.g9),this.j.removeEventListener(l.ca.wk,this.t4a),this.j.removeEventListener(l.ca.DI,this.JD),this.j.removeEventListener(l.ca.V8,this.q4a),this.j.removeEventListener(l.ca.Pxa,this.y4a)))},d.prototype.dZa=function(t){return{currentPts:this.Re(),displayTime:t.displayTime,duration:t.duration,id:t.id,originX:t.originX,originY:t.originY,sizeX:t.sizeX,sizeY:t.sizeY,rootContainerExtentX:t.rootContainerExtentX,rootContainerExtentY:t.rootContainerExtentY}},d.prototype.hqb=function(t){var e=this,i=t.track;if(!i||!i.kk)throw Error("Not an image base subtitle");t.$?(this.m$(),this.Y1a("addListener"),this.log.info("Activated",i),this.j.ci.set(i),this.Bq?h.Rf(function(){e.wh.Is(e.Re())}):this.wh.pause()):this.R7a(i,t)},d.prototype.iqb=function(t){var e=t.track,i=t.$;if(!e||e.kk)throw Error("Not a valid text track");i?(this.m$(),this.dJ.R8a(this.wh),this.log.info("Activated",e),this.j.ci.set(e)):this.R7a(e,c.Ts(t)),this.pJ()},d.prototype.R7a=function(t,e){var i=this,n=this.p$<o.config.VNb;n&&(this.qWb=setTimeout(function(){i.p$++,t.X6().then(i.zL).catch(i.zL)},o.config.L_b)),this.log.error("Failed to activate"+(null!=t&&t.kk?" img subtitle":""),{retry:n},e,t)},d.prototype.$ua=function(t){return!(!t||t.Vr()&&!t.rq())},d.prototype.R_a=function(t,e){var i=t.findIndex(function(t){return t.uc>=e.uc});-1===i&&(i=0),t.splice(i,0,e)},(e.pLa=d).lZb=((t={})[n.nF.DB.LOADING]={T7:!0},t[n.nF.DB.kR]={Pt:!0},t),d.JYb="showsubtitle",d.CVb="removesubtitle"},function(t,e,i){var a;function o(t,e,i){this.start=t,this.track=e,this.YI=Array.isArray(i)?i:[]}function n(t,e){this.log=t,this.bB=e,this.jua=[],this.orphans=[]}_esm(e),e.WKa=void 0,a=i(21),n.prototype.jqb=function(t,e){this.D3a(t,e,"activating")},n.prototype.Wyb=function(t){this.Ela(t,"de-activating")},n.prototype.D3a=function(t,e,i){var n;this.Rk&&this.Ela(t,"close current for new"),n=[],this.orphans.length&&(n.push.apply(n,G(this.orphans)),this.orphans=[]),this.Rk=new o(t,e,n),this.bB&&this.log.trace("new range: "+i,this.Rk)},n.prototype.Ela=function(t,e){this.Rk&&(this.Rk.end=t,this.jua.push(this.Rk),this.bB&&this.log.trace("end range: "+e,this.Rk||{}),this.Rk=void 0)},n.prototype.dbb=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.Rk?this.Rk.YI.push.apply(this.Rk.YI,G(e)):this.orphans.push.apply(this.orphans,G(e))},n.prototype.$na=function(t){var e,i=this.jua.slice(0);return this.Rk&&void 0!==t&&((e=new o(this.Rk.start,this.Rk.track,this.Rk.YI)).end=t,i.push(e)),t=i.reduce(function(t,e){var i,n,r;return e.track?(i=e.track.Bc,null==(n=e.track.Mr(e.start,e.end))||(r=new Set(e.YI),t[i]?((e=t[i]).expected+=n,e.missed+=n-r.size):t[i]={dlid:i,bcp47:e.track.Wd,profile:e.track.profile,expected:n,missed:n-r.size,startPts:null!==(e=e.track.rHb())&&void 0!==e?e:0}),t):t},{}),t=Object.values(t),this.bB&&this.log.trace("subtitleqoe:",JSON.stringify(t,null,"\t")),t},n.prototype.fHb=function(t){var e,i=this.jua.slice(0),n=0,r=0;return this.Rk&&void 0!==t&&((e=new o(this.Rk.start,this.Rk.track,this.Rk.YI)).end=t,i.push(e)),i.forEach(function(t){var e,i;if(t.track){if(t.end<t.start)return a.hb(!1,"negative range"),void(t.YD=0);e=new Set(t.YI),i=t.track.Mr(t.start,t.end),t.h5=i,t.YD=null==i?0:0===i?100:100*e.size/i}else t.YD=100;e=t.end-t.start,n+=e,r+=t.YD*e}),e=n?Math.round(r/n):100,this.log.trace("qoe score "+e+", at pts: "+t),this.bB&&(t=i.map(function(t){return{start:t.start,"end  ":t.end,duration:t.end-t.start,score:Math.round(t.YD),lang:t.track?t.track.Wd:"none","actual  ":t.YI.join(" "),expected:t.h5}}),this.log.trace("score for each range: ",JSON.stringify(t,function(t,e){return e}," "))),e},e.WKa=n},function(t,e,i){var n,o,s,u,c,h,a,f,l;function p(t,e,i,n,r,a){return(t=c.nF.call(this,e,t,t,r,!0,"","1",{0:i},[{id:0,name:"custom"}],"xx",n||t,h.vp.gK,void 0,void 0,"primary",null!==(n=null==a?void 0:a.profile)&&void 0!==n?n:"dfxp-ls-sdh",null!==(n=null==a?void 0:a.midx)&&void 0!==n?n:{},!1,!1,null==a?void 0:a.isLanguageLeftToRight)||this).j=e,t.url=i,t.options=a,t.Js=null==a?void 0:a.useRangeHeader,t}_esm(e),e.nLa=void 0,t=i(58),n=i(14),o=i(60),s=i(8),u=i(30),c=i(279),h=i(131),a=i(74),f=i(133),l=i(15),t.dea(t.$da,function(r){var a;function t(t){var n;t.ctrlKey&&t.altKey&&t.shiftKey&&t.keyCode==f.tv.jkb&&((n=u.createElement("INPUT",void 0,void 0,{type:"file"})).addEventListener("change",function(){var t,e,i=n.files[0];i&&(t=i.name,a.info("Loading file",{FileName:t}),(e=new FileReader).readAsText(i),e.addEventListener("load",function(){return r.Qq.Gha("nourl",t,{content:e.result})}))}),n.click())}a=s.Ih(r,"TimedTextCustomTrack"),n.config.Dka&&(a.info("Loading url",{Url:n.config.Dka}),r.Qq.Gha(n.config.Dka,"custom")),o.ve.addListener(o.YC,t),r.addEventListener(l.ca.kg,function(){o.ve.removeListener(o.YC,t)})}),T(p,c.nF),p.Nxb=function(t,e,i,n){var r="custom"+p.gKb++;return new p(r,t,e,i,-1,n)},p.prototype.LUa=function(){var r=this;return new Promise(function(e,i){var t,n;null!==(t=r.options)&&void 0!==t&&t.content?e(r.options.content):r.url&&(n={responseType:a.Ooa,url:r.url,track:r,qc:null,EC:"tt-"+r.Wd},r.j.O6.download(n,function(t){t.$?e(t.content):(t.reason="downloadfailed",t.url=n.url,t.track=r,i(t))}))})},(e.nLa=p).gKb=0},function(t,e,i){var n,r,a,o,s,u;function c(t){var e,i=this;this.j=t,this.AQb=function(){var t;a.ve.removeListener(a.x6,i.w4a),(t=i.Rr.Dn())&&t.parentNode&&t.parentNode.removeChild(t)},this.Msa=function(t){i.Rr.CXb(t.newValue)},this.eRb=function(t){i.Rr.JXb(t.newValue?t.newValue.t7:void 0)},this.w4a=function(){i.Rr.NO()},this.Rr=new s.oLa(o.config.jxa,t.jc.value?t.jc.value.t7:void 0),e=t.cB,r.hb(.1<e.width/e.height),this.Rr.sXb(e.width/e.height),t.Jg.appendChild(this.Rr.Dn()),t.cv.addListener(this.Msa),t.jc.addListener(this.eRb),t.addEventListener(u.ca.kg,this.AQb,n.cF),a.ve.addListener(a.x6,this.w4a)}_esm(e),e.qLa=void 0,n=i(12),r=i(21),a=i(60),o=i(14),s=i(536),u=i(15),c.prototype.fwa=function(t){this.Rr.fwa(t)},c.prototype.goa=function(){return this.Rr.goa()},c.prototype.dwa=function(t){this.Rr.dwa(t)},c.prototype.eoa=function(){return this.Rr.eoa()},c.prototype.ewa=function(t){this.Rr.ewa(t)},c.prototype.foa=function(){return this.Rr.foa()},e.qLa=c},function(t,e){_esm(e),e.o6a=void 0,e.o6a=function(t){var e=!1,i=!1;return function(){if(e)i=!0;else for(i=!0;i;)e=!(i=!1),t(),e=!1}}},function(t,e,i){var f,l,r,n,a,p,d,o,s,u,c;function h(t){this.j=t,this.f_b=!1,this.log=n.Ih(this.j,"MediaAppendManager"),this.Vb=this.j.Vb,this.X=this.Vb.X,this.WZ=this.IT=!1,this.audio={type:r.Ei.audio,iw:[],Il:[],rO:!1},this.video={type:r.Ei.video,iw:[],Il:[],rO:!1},t={},this.hJ=(t[f.Tb.ol.Mb]=this.video,t[f.Tb.ol.Wb]=this.audio,t),this.closed=!1,this.dA=l.config.dA,this.A8=l.config.A8,this.$H=l.LSa(!!this.j.bb.Fl).$H,this.$Qa=!0,p.hb(this.dA>this.A8,"bad config"),p.hb(this.dA>this.$H,"bad config")}_esm(e),e.QFa=void 0,f=i(47),l=i(14),r=i(90),n=i(8),a=i(3),p=i(21),d=i(30),o=i(15),s=i(185),u=i(4),c=i(62),h.prototype.J5=function(){var t,e;function i(t,e){return n(t,e.q8)}function n(t,e){var i,n=!!e.response,r=e.response;return e.ad?t+(r.byteLength||0):(e=(null!==(i=null==e?void 0:e.PL)&&void 0!==i?i:0)-(null!==(i=null==e?void 0:e.QL)&&void 0!==i?i:0),(n?r.byteLength:e)+t)}return t=this.hJ[f.Tb.ol.Mb],e=this.hJ[f.Tb.ol.Wb],{videoToAppend:t.Il.reduce(n,0),videoInBuffer:t.iw.reduce(i,0),audioToAppend:e.Il.reduce(n,0),audioInBuffer:e.iw.reduce(i,0)}},h.prototype.YPb=function(){this.audio.Zi&&!this.audio.Zi.Hh()&&this.audio.Zi.oQa(new Uint8Array([0,0,0,8,102,114,101,101]))},h.prototype.VXb=function(){this.audio.kwa=!0,this.video.kwa=!0},h.prototype.$Xb=function(t){t===f.Tb.ol.Wb?this.IT=!0:t===f.Tb.ol.Mb&&(this.WZ=!0)},h.prototype.Hh=function(){var t;return!(null===(t=this.audio.Zi)||void 0===t||!t.Hh())||!(null===(t=this.video.Zi)||void 0===t||!t.Hh())},h.prototype.J$=function(t){var e;null!==(e=this.audio.Zi)&&void 0!==e&&e.J$(t),null!==(e=this.video.Zi)&&void 0!==e&&e.J$(t)},h.prototype.wrb=function(t){var e;t.mediaType===f.Tb.ol.Wb?this.IT=!1:t.mediaType===f.Tb.ol.Mb&&(this.WZ=!1),(e=this.hJ[t.mediaType])?e.Il.push(t):p.hb(!1)},h.prototype.urb=function(t,e,i){e={mediaType:t.type,kD:!1,response:e,mi:function(){return"header"},get ad(){return!this.kD},profile:i.profile},(t=this.hJ[t.type])?t.Il.push(e):p.hb(!1)},h.prototype.YXb=function(e){var t=this.hJ[e.type];if(t)try{t.Zi=e}catch(t){this.Xd(a.M.Hda,{na:s.V5(e.type),ub:d.wd(t)})}},h.prototype.close=function(){this.closed=!0},h.prototype.Xd=function(t,e,i){this.closed||this.j.Xd(t,e,i)},h.prototype.Nka=function(t){return this.DUa(this.audio,t,this.s4())&&this.DUa(this.video,t,this.s4())},h.prototype.s4=function(){return this.j.yb.value===o.cb.Pf?this.$H:this.A8},h.prototype.R_b=function(){var t=this.video.Il.filter(function(t){return!t.ad}).reduce(function(t,e){return t+e.Hr},0),e=this.audio.Il.filter(function(t){return!t.ad}).reduce(function(t,e){return t+e.Hr},0);return Math.min(t,e)},h.prototype.DUa=function(t,e,i){var n=(n=t.Oka)&&n.q8;return!(t.Zi&&(0!==t.Il.length||!(t.type===r.Ei.audio&&this.IT||t.type===r.Ei.video&&this.WZ)))||(n&&n.Vw-e>=i||!1)},h.prototype.xxa=function(t){this.f_b||(this.tab(this.audio,t),this.tab(this.video,t)),this.closed||this.YRa()},h.prototype.YRa=function(){var t,e=!this.audio.Zi||0!==this.audio.iw.length,i=0===this.video.Il.length&&this.WZ,n=!this.video.Zi||0!==this.video.iw.length;!(!(0===this.audio.Il.length&&this.IT&&n||i&&e)||null!==(t=this.audio.Zi)&&void 0!==t&&t.Hh()||null!==(t=this.video.Zi)&&void 0!==t&&t.Hh()||this.Dla)&&this.X.readyState>c.co.q0.HAVE_NOTHING&&(this.Dla=!0,this.Vb.endOfStream())},h.prototype.tab=function(t,e){var i,n,r;if(!this.closed&&t.Zi){if(i=t.Zi,n=t.iw,!i.Hh()&&0<n.length&&(t.Oka=n[n.length-1]),t.kwa){if(i.Hh())return;t.kwa=!1,0<(r=this.Vb.rYa().V5a(u.io))&&i.remove(0,r)}for(r=t.Il[0];r&&r.response&&(r.ad||r.AA-e<=this.dA)&&(this.Dla=!1,this.F0b(r));)t.Il.shift(),r=t.Il[0];!i.Hh()&&0<n.length&&(t.Oka=n[n.length-1])}},h.prototype.F0b=function(e){var t,i,n;if(p.hb(e&&!!e.response),t=e.response,i=e.mediaType,n=this.hJ[i],!this.closed&&n.Zi&&!n.Zi.Hh()){try{e.ad&&e.profile&&n.Zi.lub(e.profile),this.log.trace("Feeding media segment to decoder",{Bytes:t.byteLength}),n.Zi.oQa(t,e),e.ad||n.iw.push(this.Pxb(e)),l.config.qAb&&!e.ad&&e.fSa()}catch(t){return void("QuotaExceededError"===t.name?(this.j.u4=this.j.u4?this.j.u4+1:1,this.$Qa=!1,n.rO=!0):(this.log.error("Exception while appending media",e,t),this.Xd("CodecSwitchingError"===t.name?a.M.kHa:a.M.Yib,s.V5(i))))}return!0}},h.prototype.Hxb=function(t){var e=this.j.rIb(t.Md);return e||(this.log.warn("Could not find CDN",{cdnId:t.Md}),e={id:t.Md,yqa:t.location}),e},h.prototype.yTa=function(t){var e,i=t.Oa;return t.mediaType===f.Tb.ol.Wb?e=this.j.xZa(i):t.mediaType===f.Tb.ol.Mb&&(e=this.j.IZa(i)),e||this.log.error("Could not find stream",{stream:i}),e},h.prototype.Pxb=function(t){return{q8:t,stream:this.yTa(t),im:{startTime:Math.floor(t.AA),endTime:Math.floor(t.Vw)},qc:this.Hxb(t)}},h.prototype.uja=function(t){this.bSa(t,f.Tb.ol.Wb),this.bSa(t,f.Tb.ol.Mb)},h.prototype.bSa=function(n,r){var t,e,a,o,s,i,u,c=this,h=n;if(this.$Qa&&(h-=l.config.XO),e=(t=this.hJ[r]).iw,s=!1,e.some(function(t,e){var i=t.q8;return n<i.AA?(p.hb(!1,"decoder content does not contain media time"),!0):(h>=i.Vw&&(a=e),n<i.Vw?(o=e,t!==(e=r===f.Tb.ol.Wb?c.j.jf:c.j.oe).value&&(e.set(t),s=!0),!0):void 0)}),(t.rO||s)&&void 0!==a&&!this.Dla){if(a+1===o){if(0===a)return;a--}0<(i=e[a].q8.Vw-1)&&((u=t.Zi)&&!u.Hh()?(u.remove(0,i/d.pl),t.rO=!1,e.splice(0,a+1)):t.rO=!0)}},h.prototype.H7a=function(){[this.audio,this.video].forEach(function(t){t.iw=[],t.Oka=void 0,t.Il=[]}),this.WZ=this.IT=!1,this.j.fireEvent(o.ca.n8)},h.prototype.noa=function(){return[this.audio,this.video].filter(function(t){return t.Zi})},h.prototype.IEb=function(){var t,e;if(this.Hh())p.hb(!1,"should not be busy while checking buffer ranges");else if(t=this.noa().map(function(t){var e,i=t.Il.filter(function(t){return t.kD}),n=t.Zi.buffered();if(t=n.length?Math.ceil(1e3*n.start(0)):void 0,n=n.length?Math.floor(1e3*n.end(n.length-1)):void 0,t=null!=t?t:null===(e=i[0])||void 0===e?void 0:e.AA,e=null!==(i=null===(i=i[i.length-1])||void 0===i?void 0:i.Vw)&&void 0!==i?i:n,void 0!==t&&void 0!==e)return{start:t,end:e}}),t.every(function(t){return t})&&(e=Math.max.apply(Math,G(t.map(function(t){return t.start}))))<(t=Math.min.apply(Math,G(t.map(function(t){return t.end})))))return{start:u.Nc(e),end:u.Nc(t)}},h.prototype.skip=function(e){p.hb(!this.Hh(),"should not be busy while skipping"),this.noa().forEach(function(t){t.rO=!0}),this.uja(e),this.noa().forEach(function(t){0<t.iw.length||(t.Il=t.Il.filter(function(t){return!!(t.ad||t.Vw>e)}))})},e.QFa=h},function(t,e){function i(t,e,i){var n,r,a,o=[];return t.forEach(function(t){-1==o.indexOf(t.kh)&&o.push(t.kh)}),r=n=null,e.forEach(function(t){null===n?r=n=t.bitrate:r<t.bitrate?r=t.bitrate:n>t.bitrate&&(n=t.bitrate)}),a=[],o.forEach(function(e){var t={ranges:[],profile:e};n&&r&&(t.ranges.push({min:n,max:r}),i&&(t.disallowed=i.filter(function(t){return t.stream.kh===e}).map(function(t){return{stream:{bitrate:t.stream.bitrate},disallowedBy:t.H4}})),a.push(t))}),a}function n(t,i){var n=void 0;t=t.filter(function(t){var e=i(t);return e&&(n=n||[]).push({stream:t,H4:e}),!e});for(var e=0;e<t.length;e++)t[e].lower=t[e-1],t[e].SIb=t[e+1];return{LC:t,oAb:n}}_esm(e),e.nAb=e.Ft=e.Gyb=e.oZa=void 0,e.oZa=function(t,e){return i(t,(e=n(t,e)).LC,e.oAb)},e.Gyb=i,e.Ft=n,e.nAb=function(t){if(t.lower&&1080<t.height)return["Prefetch UHD"]}},function(t,e,i){var n,r;function a(t,e){return(t=n.dc.call(this,t)||this).lra=e,t}_esm(e),e.EIa=void 0,n=i(80),r=i(92),T(a,n.dc),a.prototype.set=function(t){n.dc.prototype.set.call(this,r.op(t,0,this.lra))},e.EIa=a},function(t,e,i){var u,n,r,a,o,s,c,h;function f(t,e,i,n,r){var a=this;this.Ui=t,this.config=i,this.jb=n,this.debug=r,this.J9=[],this.hs=[],this.tta=[],this.hG={},this.EUa=!1,this.MT={},this.qpa=0,this.log=e.ib("PlayTimeTracker"),this.startTime=this.Ui.mediaTime.value,this.X7=this.config().dqb,this.uJ(),this.hG.abrdel=0,this.X7.forEach(function(t){t="abrdel"+t,a.MT[t]=0,a.hG[t]=0})}function l(){}_esm(e),e.tIa=void 0,u=i(1),t=i(0),n=i(7),r=i(13),a=i(94),i(4),o=i(27),s=i(96),c=i(12),h=i(24),l.prototype.encode=function(t){return{downloadableId:t.Bc,correlationId:t.Fg,bitrate:t.bitrate,vmaf:t.sb,duration:t.duration,metric:t.QW,cdnId:t.wC}},l.prototype.decode=function(t){return{Bc:t.downloadableId,Fg:t.correlationId,bitrate:t.bitrate,sb:t.vmaf,duration:t.duration,QW:t.metric,wC:t.cdnId}},f.prototype.jN=function(){var e;return this.RI(this.Ui.mediaTime.value),e=0,this.hs.forEach(function(t){e+=(t.endTime-t.startTime)/t.rate}),Math.floor(e)},f.prototype.hoa=function(){var e;return this.RI(this.Ui.mediaTime.value),e=0,this.hs.forEach(function(t){e+=t.endTime-t.startTime}),this.debug.assert(e===Math.floor(e),"Value of totalContentPlayTime is not an integer."),Math.floor(e)},f.prototype.uEb=function(){return this.RI(this.Ui.mediaTime.value),{audio:this.vV(this.J9,this.AXa),video:this.vV(this.hs,this.AXa)}},f.prototype.KGb=function(){var t={total:this.jN(),totalContentTime:this.hoa(),audio:this.vV(this.J9,this.U5),video:this.vV(this.hs,this.U5),timedtext:this.vV(this.tta,this.U5)};return this.debug.assert(!(!t.audio||!t.video)),t},f.prototype.Tma=function(){var t,e;this.RI(this.Ui.mediaTime.value),t=this.Oma(this.hs,this.GEb);try{e=this.XWa(t)}catch(t){return this.log.warn("Failed to calc average bitrate."),null}return this.hG.abrdel=Math.round(e),this.hG.abrdel},f.prototype.YWa=function(){var t,e;this.RI(this.Ui.mediaTime.value),t=this.Oma(this.hs,this.SHb);try{e=this.XWa(t)}catch(t){return this.log.warn("Failed to calc average vmaf."),null}return Math.round(e)},f.prototype.WWa=function(){var t,a=this;return this.EUa||(t=this.jN(),this.X7.forEach(function(e){var i,n,r;0===a.MT["abrdel"+e]&&t>e*c.pl&&(r=n=i=0,a.hs.some(function(t){if(i+=t.stream.bitrate*(t.endTime-t.startTime),n+=t.endTime-t.startTime,r=t.stream.bitrate,n>e*c.pl)return!0}),i&&(a.MT["abrdel"+e]=Math.round((i-r*(n-e*c.pl))/(e*c.pl))))}),0!==this.MT["abrdel"+this.X7[this.X7.length-1]]&&(this.EUa=!0),h.te(this.MT,function(t,e){a.hG[t]=0===e?a.hG.abrdel:e})),this.hG},f.prototype.xqb=function(t){this.qpa+=t},f.prototype.JZa=function(){return!!(this.hs[0]&&this.hs[0].stream&&this.jb.Gg(this.hs[0].stream.sb))},f.prototype.uJ=function(){var e=this;this.Ui.jf.addListener(function(t){e.fM=e.URa(e.fM,e.J9,t.newValue)}),this.Ui.oe.addListener(function(t){e.iM=e.URa(e.iM,e.hs,t.newValue)}),this.Ui.playbackRate.addListener(function(t){e.RI(e.Ui.mediaTime.value,t.oldValue)}),this.Ui.ci.addListener(this.pQb.bind(this))},f.prototype.nsa=function(t,e){this.RI(t),this.startTime=e,this.iM=this.fM=void 0,this.hM&&(this.hM.startTime=this.startTime)},f.prototype.pQb=function(t){this.XX(this.hM,this.tta,this.Ui.mediaTime.value),this.hM=t.newValue?{track:t.newValue,startTime:this.Ui.mediaTime.value,endTime:a.tB}:void 0},f.prototype.RI=function(t,e){e=void 0===e?this.Ui.playbackRate.value:e,t&&this.fM&&this.iM&&(t=Math.min(t,this.fM.endTime,this.iM.endTime),this.XX(this.fM,this.J9,t,e),this.fM.startTime=t,this.XX(this.iM,this.hs,t,e),this.iM.startTime=t,this.hM&&(this.XX(this.hM,this.tta,t,e),this.hM.startTime=t),this.startTime=t)},f.prototype.URa=function(t,e,i){if(t&&this.XX(t,e,Math.min(t.endTime,this.Ui.mediaTime.value)),i&&i.stream)return t=i.im,e=i.stream,{qc:i.qc,track:e.track,stream:e,startTime:Math.max(t.startTime,this.startTime),endTime:t.endTime}},f.prototype.XX=function(t,e,i,n){n=void 0===n?this.Ui.playbackRate.value:n,t&&i&&i>=t.startTime&&(t={qc:t.qc,track:t.track,stream:t.stream,startTime:t.startTime,endTime:i,rate:n},(i=e[e.length-1])&&i.track===t.track&&i.stream===t.stream&&i.qc===t.qc&&i.endTime===t.startTime&&i.rate===t.rate?i.endTime=t.endTime:e.push(t))},f.prototype.Oma=function(t,a){var o=this,s={};return t.reduce(function(t,e){var i,n=a.bind(o,e)(),r=n.key;return n=u.__rest(n,["key"]),e=e.endTime-e.startTime,(i=s[r])?i.duration+=e:((i=n).duration=e,t.push(i),s[r]=i),t},[])},f.prototype.vV=function(t,e){return this.Oma(t,e).map(function(t){return(new l).encode(t)})},f.prototype.U5=function(t){var e,i,n=t.stream;return n?(t=n.Bc,e=n.bitrate,i=n.sb):t=t.track.Bc,{key:t+"$"+e+"$"+i,Bc:t,bitrate:e,sb:i}},f.prototype.AXa=function(t){var e=this.U5(t),i=null===(i=t.qc)||void 0===i?void 0:i.id;return t=t.track.Fg,Object.assign({},e,{key:e.key+"$"+i+"$"+t,wC:i,Fg:t})},f.prototype.GEb=function(t){var e=t.stream;return{key:(t=null==e?void 0:e.Bc)+"$"+(e=null==e?void 0:e.bitrate),Bc:null!=t?t:"",QW:e}},f.prototype.SHb=function(t){var e=t.stream;return{key:(t=null==e?void 0:e.Bc)+"$"+(e=null==e?void 0:e.sb),Bc:null!=t?t:"",QW:e}},f.prototype.XWa=function(t){var e,i=this,n=0;return t.forEach(function(t){if(!i.jb.Gg(t.duration)||!i.jb.Gg(t.QW))throw Error("Invalid arguments: missing duration and/or metric in segment.");n+=t.duration}),n?(e=0,t.forEach(function(t){e+=t.QW*t.duration/n}),e):0},i=f,i=u.__decorate([t.R(),u.__param(1,t.l(n.qb)),u.__param(2,t.l(r.Zc)),u.__param(3,t.l(o.bg)),u.__param(4,t.l(s.pv))],i),e.tIa=i},function(t,e){_esm(e),e.sIa="PlayTimeTrackerFactorySymbol"},function(t,e,i){var f,n;function r(t,e,i,n,r,a,o,s,u,c,h){this.index=t,this.J=e,this.xa=i,this.bb=n,this.ba=r,this.vk=a,this.Gqa=o,this.Qvb=u,this.b3a=h,this.oc=new f.dc(null),this.xg=new f.dc(null),this.jc=new f.dc(null),this.ci=new f.dc(null),this.cv=new f.dc(void 0),this.We=new f.dc(null),this.jh=new f.dc(null),this.jf=new f.dc(null),this.oe=new f.dc(null),this.qc=[new f.dc(null),new f.dc(null)],this.mediaTime=new f.dc(void 0),this.playbackRate=new f.dc(1),this.Np=new f.dc(null),this.lG=this.kG="notcached",this.G4=this.background=!1,s&&(this.We.set(s.We.value),this.jh.set(s.jh.value)),this.Ll=c(this),this.Dm=this.b3a.fVb(this.ba,this.vk)}_esm(e),e.FIa=void 0,f=i(80),n=i(4),r.prototype.Dd=function(t){this.Dm.Kp(t)},r.prototype.Hz=function(t){var i=this;Object.entries(t).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i.Dm.Kp(t,n.Nc(e-i.vk.da(n.ja)))})},r.prototype.c9=function(){this.b3a.xVb(this.ba)},it.Object.defineProperties(r.prototype,{ye:{configurable:!0,enumerable:!0,get:function(){return this.bb.ye}},Laa:{configurable:!0,enumerable:!0,get:function(){return this.bb.Laa}},rm:{configurable:!0,enumerable:!0,get:function(){return this.Rc&&this.Rc.rm}},Ki:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.Ki)&&void 0!==t?t:[]}},ip:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.ip)&&void 0!==t?t:[]}},XA:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.XA)&&void 0!==t?t:[]}},Qh:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.Qh)&&void 0!==t?t:[]}},Ti:{configurable:!0,enumerable:!0,get:function(){return this.Rc&&this.Rc.Ti}},oD:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.oD)&&void 0!==t&&t}},Lu:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.Lu)&&void 0!==t?t:[]}},hi:{configurable:!0,enumerable:!0,get:function(){var t;return null!==(t=this.Rc&&this.Rc.hi)&&void 0!==t?t:[]}},Uy:{configurable:!0,enumerable:!0,get:function(){return this.zfa&&0<this.zfa.da(n.ja)?this.zfa:n.Nc(this.oa?this.oa.$b.duration:0)},set:function(t){this.zfa=t}},Fj:{configurable:!0,enumerable:!0,get:function(){return this.bb.Fj||0}},zka:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.iU?this.iU:void 0===this.mediaTime.value?null:this.Qvb(this.mediaTime.value,this.xa)}},Fg:{configurable:!0,enumerable:!0,get:function(){var t;return null===(t=null===(t=this.oa)||void 0===t?void 0:t.$b.S3)||void 0===t?void 0:t.ds}},II:{configurable:!0,enumerable:!0,get:function(){var t;return null===(t=null===(t=this.oa)||void 0===t?void 0:t.$b.S3)||void 0===t?void 0:t.II}},pd:{configurable:!0,enumerable:!0,get:function(){return this.Dm.pd}}}),e.FIa=r},function(t,e){_esm(e),e.ILa="TrickPlayParserSymbol"},function(t,e,i){var n,r,a;function o(){}_esm(e),e.HLa=void 0,t=i(1),r=i(165),i=i(0),o.prototype.parse=function(t){var e,i;if(!t)throw Error("invalid array buffer");return e=new Uint8Array(t),i=new r.BQ(e),{header:t=this.LRb(i),images:this.MRb(i,e,t)}},o.prototype.LRb=function(e){var t,i;if(e.Mna()<this.$Vb())throw Error("array buffer too short");if(n.oFa.forEach(function(t){if(t!=e.DA())throw Error("BIF has invalid magic.")}),(t=e.HO())>n.VERSION)throw Error("BIF version in unsupported");if(0==(i=e.HO()))throw Error("BIF has no frames.");return{version:t,eQb:i,X$a:e.HO(),F7a:e.Mh(n.AJa)}},o.prototype.MRb=function(t,e,i){for(var n,r,a=[],o=0;o<=i.eQb;o++)n={timestamp:t.HO(),offset:t.HO()},null!=r&&a.push(e.subarray(r.offset,n.offset)),r=n;return a},o.prototype.$Vb=function(){return n.oFa.length+4+4+4+n.AJa},(a=n=o).oFa=[137,66,73,70,13,10,26,10],a.VERSION=0,a.AJa=44,a=n=t.__decorate([i.R()],a),e.HLa=a},function(t,e,i){var c,h,n;function r(t,e,i){this.config=t,this.j=e,this.Wf=i,this.EX=void 0,this.z9=!1,this.iqa=0,this.log=this.Wf.ib()}_esm(e),e.jKa=void 0,c=i(15),h=i(4),n=i(92),r.prototype.rGb=function(t,e,i,n,r){var a,o,s,u;return i=void 0===i?this.j.xa:i,n=void 0!==n&&n,a=e===c.Ce.lK,o=this.Ktb(a?t:this.Qub(t,i),n,i),n=this.j.Ka,a?(t=o,o=n.Dt(o)):t=n.cM(i,o),e===c.Ce.Fx&&(this.j.lRa=o),r=this.Li(t,e,r),s=(a=a||r)?t:o,this.j.Bu&&(u=this.config().$H,this.j.AZa(s,u)||e!==c.Ce.CB||(s=this.j.Bu.da(h.ja)-u-1e3,o=a?(t=s,n.Dt(s)):(t=n.cM(i,s),s))),{U8:s,ek:o,KSb:t,Li:r}},r.prototype.Ktb=function(t,e,i){return t=this.$Kb()||e?Math.round(t):this.j.Ka.jja(t,i),this.j.bb.Fl&&(t=this.HDb(t)),this.config().Ava&&(t+=this.config().Ava),t},r.prototype.Li=function(t,e,i){return!(this.config().mAb||e===c.Ce.Fx||e===c.Ce.UR||e===c.Ce.c0||!i||t<i.start.da(h.ja)||t>=i.end.da(h.ja))&&(null==(e=this.j.Ka)?void 0:e.$h)&&e.Li(t)||!1},r.prototype.$Kb=function(){return!!this.j.bb.Fl||("boolean"==typeof this.j.bb.NX?this.j.bb.NX:navigator.hardwareConcurrency&&navigator.hardwareConcurrency<=2?this.config().NX&&this.config().fTb:this.config().NX)},r.prototype.Qub=function(t,e){var i=(e=this.j.um(e)).Uy;return e=(e.WNb||i).da(h.ja)-this.config().W2b,n.op(t,0,e)},r.prototype.HDb=function(i){var n,r,t=this.j.qV();return Object.values(t).find(function(t){var e=t.Ob,e=i<(null!=e?e:1/0);return t.Jb<=i&&e})?i:(r=i,Object.entries(t).forEach(function(t){var e;(t=nt(t)).next(),0<(e=(t=t.next().value.Jb)-i)&&(void 0===n||e<n)&&(n=e,r=t)}),r)},it.Object.defineProperties(r.prototype,{Ipa:{configurable:!0,enumerable:!0,get:function(){return this.z9||!!this.EX}}}),e.jKa=r},function(t,e,i){var f,s,l,u,p,n;function r(t,e,i,n,r,a){var o=this;this.j=t,this.gk=e,this.MZ=i,this.ce=n,this.SY=r,this.sn=a,this.LTa={},this.update=function(){var i="";o.xV().forEach(function(t){i+=i?"\n":"",Object.entries(t).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,i+=t+": "+e+"\n"})}),o.element.value=i},this.FQb=function(){var t,e;o.j.Xf&&(e=o.j.Xf.XG())&&(o.Aka=e-(null!==(t=o.eab)&&void 0!==t?t:0),o.eab=e,o.lO())},this.lO=function(){o.MZ.Ol(o.update)},this.onkeydown=function(t){81!=t.keyCode&&192!=t.keyCode||o.toggle()},this.G5a=[t.mediaTime,t.qc[f.Tb.Ta.Wb],t.qc[f.Tb.Ta.Mb],t.jf,t.oe,t.jh,t.We,t.ci,t.state,t.zr,t.yb,t.volume,t.muted],this.parent=document.querySelector(".watch-video"),this.element=this.ce.createElement("textarea","","",{readonly:1,class:"video-info"}),s.ve.addListener(s.YC,this.onkeydown),t.addEventListener(u.ca.kg,function(){s.ve.removeListener(s.YC,o.onkeydown),o.Qr()})}_esm(e),e.BIa=void 0,f=i(47),i(58),s=i(60),l=i(92),i(301),i(11),i(19),u=i(15),i(133),p=i(4),(t={})[u.Rb.dK]="Not Loaded",t[u.Rb.LOADING]="Loading",t[u.Rb.re]="Normal",t[u.Rb.CLOSING]="Closing",t[u.Rb.CLOSED]="Closed",(t={})[u.yf.re]="Normal",t[u.yf.xd]="Pre-buffering",t[u.yf.aKa]="Network stalled",(t={})[u.cb.Pf]="Waiting for decoder",t[u.cb.Kc]="Playing",t[u.cb.hh]="Paused",t[u.cb.Wq]="Media ended",n=[u.ca.n8],r.prototype.zXb=function(t){this.LTa.DFR=t},r.prototype.show=function(){var e=this;this.visible||(this.kKb=pt.setInterval(this.FQb,1e3),e.parent.appendChild(this.element),this.G5a.forEach(function(t){t.addListener(e.lO)}),n.forEach(function(t){e.j.addEventListener(t,e.lO)}),this.visible=!0,this.sn.fZ().then(function(t){e.Aoa=t,e.lO()})),this.update()},r.prototype.Qr=function(){var e=this;this.visible&&(clearInterval(this.kKb),this.eab=this.Aka=void 0,e.parent.removeChild(this.element),this.G5a.forEach(function(t){t.removeListener(e.lO)}),n.forEach(function(t){e.j.removeEventListener(t,e.lO)}),this.MZ.Ol(),this.visible=!1)},r.prototype.toggle=function(){this.visible?this.Qr():this.show()},r.prototype.xV=function(){var t,e,i,n,r,a,o,s=[],u=this.j.We.value?this.j.We.value.framerate:0,c=this.j.qc[f.Tb.Ta.Mb].value,h=this.j.qc[f.Tb.Ta.Wb].value;return s.push({Version:"6.0033.414.911","Current CDN (a/v)":(h?h.name+"":"?")+" / "+(c?c.name:"?")}),this.j.jf.value&&this.j.oe.value&&(t=(o=this.j.jf.value.stream).track,r=this.j.oe.value.stream,e=this.j.ci.value,i=this.SY.l4(this.j.xg.value?this.j.xg.value.streams:[]),n=this.SY.i4(t.streams),a=r.kh,r=/hevc/.test(a)?"hevc":/vp9/.test(a)?"vp9":/h264hpl/.test(a)?"avchigh":/av1/.test(a)?"av1":"avc",/hdr/.test(a)&&(r+=", hdr"),/dv/.test(a)&&(r+=", dv"),/prk/.test(a)&&(r+=", prk"),a=o.kh,o=/xheaac/.test(a)?"xhe-aac":/heaac/.test(a)?"he-aac":/ddplus/.test(a)?"ddplus":"unknown",/atmos/.test(a)&&(o+=", atmos"),s.push({"Audio Track":t.Wd+", Channels: "+t.channels+", Codec: "+n+" ("+o+")","Video Track":"Codec: "+i+" ("+r+")","Timed Text Track":e?e.Wd+", Profile: "+e.profile:"none","HDR support":this.Aoa?this.Aoa.result+" ("+this.Aoa.reason+")":"unknown"})),this.j.gya(),this.j.oia(),a=this.j.jf.value,t=this.j.oe.value,n=null==a?void 0:a.stream,o=null==t?void 0:t.stream,r=null!==(i=null==n?void 0:n.bitrate)&&void 0!==i?i:"?",e=o?o.bitrate+" ("+o.width+"x"+o.height+"@"+u.toFixed(3)+")":"?",t=null!==(a=null==o?void 0:o.sb)&&void 0!==a?a:"?",a=null!==(u=null===(i=this.j.We.value)||void 0===i?void 0:i.sb)&&void 0!==u?u:"?",i=null!==(u=null===(i=this.j.jh.value)||void 0===i?void 0:i.bitrate)&&void 0!==u?u:"?",u=null!==(u=null===(u=this.j.We.value)||void 0===u?void 0:u.bitrate)&&void 0!==u?u:"?",s.push({"Playing bitrate (a/v)":r+" / "+e,"Playing/Buffering vmaf":t+"/"+a,"Buffering bitrate (a/v)":i+" / "+u,"Buffer size in Seconds (a/v)":l.cj(this.j.DT())+" / "+l.cj(this.j.QZ()),Throughput:this.j.Ra+" kbps"}),n&&s.push({PlaybackTime:sec2time(l.cj(this.j.mediaTime.value))+" / "+sec2time(l.cj(this.j.Uy.da(p.ja))),"Size (A+V)":(n.size/1024/1024/1024).toFixed(2)+" GB + "+(o.size/1024/1024/1024).toFixed(2)+" GB = "+(n.size/1024/1024/1024+o.size/1024/1024/1024).toFixed(2)+" GB"}),s},e.BIa=r},function(t,e,i){var n,r,a,o;function s(t,e,i,n){this.ba=t,this.WVb=e,this.ta=i,this.hg=n,this.pd={}}function u(t,e){this.Wf=t,this.hg=e,this.Gc={},this.ta=t.ib("PlaybackMilestoneStoreImpl")}_esm(e),e.ojb=e.DIa=void 0,t=i(1),n=i(0),r=i(7),a=i(18),o=i(4),u.prototype.fVb=function(t,e){return this.Gc[t]&&this.ta.warn("registerPlayback: xid "+t+" already registered, overriding"),e=(e||this.hg.Yb()).da(o.ja),this.ta.trace("registerPlayback: xid "+t+" at "+e),this.Gc[t]=new s(t,e,this.ta,this.hg),this.Gc[t]},u.prototype.MGb=function(t){return this.Gc[t]||this.ta.warn("getPlaybackMilestones: xid "+t+" is not registered"),this.Gc[t]},u.prototype.xVb=function(t){this.ta.trace("removePlayback: xid "+t),delete this.Gc[t]},i=u,i=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.jd))],i),e.DIa=i,s.prototype.Kp=function(t,e){e=e?e.da(o.ja):this.hg.Yb().da(o.ja)-this.WVb,this.ta.trace("addMilestone: xid "+this.ba+" "+t+" at "+e),this.pd[t]=e},e.ojb=s},function(t,e,i){var n,r,a,o;function s(t){this.Aa=t,this.trace=[]}_esm(e),e.PJa=void 0,t=i(1),n=i(15),r=i(0),a=i(18),o=i(4),s.prototype.wk=function(t){t.cause!==n.Ce.Fx&&(this.trace.unshift({time:this.Aa.Yb(),event:t}),5<this.trace.length&&this.trace.pop())},s.prototype.fZa=function(){var t,e=this;return 0===this.trace.length?{}:(t=this.trace[0],{timeSinceLastRepositionMs:this.T$a(t.time),lastRepositionCause:this.iXa(t.event.cause),repositionTrace:this.trace.map(function(t){return{timeSince:e.T$a(t.time),cause:e.iXa(t.event.cause),newMediaTime:t.event.U8,oldMediaTime:t.event.Csa,contentPts:t.event.ek,skip:t.event.skip}})})},s.prototype.T$a=function(t){return this.Aa.Yb().Qa(t).da(o.ja)},s.prototype.iXa=function(t){switch(t){case n.Ce.Fx:return"initial";case n.Ce.CB:return"seek";case n.Ce.lK:return"segment_changed";case n.Ce.UR:return"track_changed";case n.Ce.c0:return"force_rebuffer"}},i=s,i=t.__decorate([r.R(),t.__param(0,r.l(a.jd))],i),e.PJa=i},function(t,e,u){var c,a,r,o,s,h,f,l,p,d,b,m,g,v,y;function i(t,e,i){var n=this;this.fb=t,this.j=e,this.debug=i,this.nr=this.$h=this.PB=!1,this.kt=this.hn=void 0,this.Pe=function(){var t,e,i;n.debug.assert(n.pa,"has access to asePlaygraph"),n.debug.assert(n.od,"has access to internalLogger"),n.debug.assert(n.su,"has access to mediaBufferGetLogFields"),n.tf.value!==c.ma.gr&&n.tf.value!==c.ma.dj&&(e=n.yo,i=null===(i=null===(t=n.Qb.get())||void 0===t?void 0:t.Ra)||void 0===i?void 0:i.Ga,t={type:"logdata",target:"startplay",fields:{hasasereport:n.j.wM,hashindsight:!1,buffCompleteReason:e.reason,actualbw:i,initSelReason:null!==(i=e.initSelReason)&&void 0!==i?i:"unknown",bcVBufferLevelMs:e.vBufferLevelMs,bcABufferLevelMs:e.aBufferLevelMs}},h.mia({JVa:t,mk:n.mk,loadTime:n.loadTime}),n.pa.FZ("startplay",r.de.ap),null!==(t=n.Fa)&&void 0!==t&&t.vm?(n.od.trace("Buffering complete",{Cause:"ASE Buffering complete",evt:e},n.su()),n.j.yo=e,n.j.zr.set(f.yf.re),n.xDb||(n.xDb=!0,n.j.Dd("pb")),n.play()):n.od.error("Shim received buffering complete but player has no position (player "+(n.Fa?"":"un")+"defined, state "+n.j.state+")"))},this.JT=function(){var t;n.debug.assert(n.od,"has access to internalLogger"),n.hn=void 0,n.j.paused.value&&n.LD&&(n.LD=!1,n.j.paused.set(!1,{hsa:!0})),null!==(t=n.j.Xf)&&void 0!==t&&t.svb(),null!==(t=n.lX)&&void 0!==t&&t.call(n),n.lX=void 0},this.events=new y,this.Gj=new v.$ea}_esm(e),e.Rya=void 0,c=u(47),a=u(17),r=u(294),o=u(61),s=u(3),h=u(1199),f=u(15),l=u(14),p=u(19),d=u(4),b=u(1200),m=u(92),g=u(80),v=u(511),y=u(114).EventEmitter,i.prototype.K3=function(){},i.prototype.ed=function(){var t;this.nr=!1,this.Qb.lP(null),this.debug.assert(this.yi,"has access to streamingEngine"),this.pa&&this.yi.Qu(this.pa),this.Fa&&this.yi.LO(this.Fa),this.yi.Kua(this.Gj.Cn(this.fb.ha.W)),this.Gj.clear(),null!==(t=this.sj)&&void 0!==t&&t.Yp()},i.prototype.kYb=function(t){var e=t.config,i=t.ln,n=t.od,r=t.pe,a=t.su,o=t.Oi,s=t.JY;t=t.EI,this.od=n,this.su=a,this.JY=s,this.EI=t,a=this.j.ha,this.debug.assert(a,"has a playback segment"),this.debug.assert(e,"has access to config"),this.debug.assert(r,"has access to utils"),this.debug.assert(o,"has access to getCategoryLog"),this.debug.assert(i,"has access to aseGlobals"),this.debug.assert(i.yi,"has access to streamingEngine"),this.debug.assert(a.oa,"has access to manifest"),this.yi=i.yi,i.Oe.set(u(186)(e),!0,o("ASE")),i.Oe.set({maxNumberTitlesScheduled:null!==(o=null===(o=e.bTb)||void 0===o?void 0:o.maxNumberTitlesScheduled)&&void 0!==o?o:1},!0,n),e.awb&&a.oa.$b.duration<3e5?i.Oe.wX({expandDownloadTime:!1},!0,n):i.Oe.wX({expandDownloadTime:i.Oe.u5a().expandDownloadTime},!0,n),e=a.background||e.$Sb&&"postplay"===a.ye?"historical":i.Oe.u5a().initBitrateSelectorAlgorithm,i.Oe.wX({initBitrateSelectorAlgorithm:e},!0,n),e=null===(o=null===(o=null===(o=null===(o=a.xg)||void 0===o?void 0:o.value)||void 0===o?void 0:o.streams)||void 0===o?void 0:o[0])||void 0===o?void 0:o.kh,i.Oe.wX(l.KSa(!!a.bb.Fl,!!a.bb.w7,e),!0,n),n=r.LH({},l.Yja(a.ye)),this.Oe=i.Oe.Et(n),c.platform.events.emit("networkchange",a.Rc.qXb),this.PB=!0},i.prototype.e7=function(t){var e,i;this.debug.assert(this.yi,"has access to streamingEngine"),e=this.j.um(t.xa),this.debug.assert(e.Rc,"has access to playback parsedManifest"),i=t.flags,this.Qb.reset(),this.Bd=new Set([c.Tb.Ta.Wb,c.Tb.Ta.Mb]),(i.sE||i.GT)&&this.Bd.delete(i.sE?c.Tb.Ta.Wb:c.Tb.Ta.Mb),this.MP=[e.Rc.tzb,e.Rc.Dzb],this.oU(t.xa,t.hw),this.XJb(t),this.pka()},i.prototype.KZ=function(t){var e;null!==(e=this.pa)&&void 0!==e&&e.KZ(t)},i.prototype.Osb=function(t){var e,a=this,i=t.loadTime,n=t.mk;this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),this.mk=n,this.loadTime=i,t=this.pa.events,e=this.Fa.events,t.addListener("error",function(t){"NFErr_MC_StreamingFailure"===t.error&&(a.od.trace("receiving an unrecoverable streaming error: "+JSON.stringify(t)),a.od.trace("StreamingFailure, buffer status:"+JSON.stringify(a.su())),o.Rf(function(){a.j.Xd(s.M.qcb,{na:t.nativeCode,ub:t.errormsg,ik:t.httpCode,O8:t.networkErrorCode})}))}),t.addListener("logdata",function(t){var e;"string"==typeof t.target&&"object"==typeof t.fields&&(t.fields.aseApiVersion=null===(e=a.pa)||void 0===e?void 0:e.dG,h.mia({JVa:t,mk:n,loadTime:i}))}),t.addListener("bufferingStarted",function(){a.j.zr.set(f.yf.xd)}),t.addListener("bufferingComplete",function(t){a.yo=t}),this.j.paused.addListener(function(t){var e;a.debug.assert(a.od,"has access to internalLogger"),null!==(e=t.om)&&void 0!==e&&e.hsa||!a.PB||(t.newValue&&a.tf.value===c.ma.Kc?(a.tf.set(c.ma.hh),a.Cd.emit("paused",{type:"paused",pts:a.Cd.Mc})):t.newValue||a.tf.value!==c.ma.hh||(a.tf.set(c.ma.Kc),a.Cd.emit("playing",{type:"playing",pts:a.Cd.Mc}))),t.newValue||(a.LD=!1),a.od.info("Paused changed",{From:t.oldValue,To:t.newValue,MediaTime:m.cj(a.j.mediaTime.value)})}),this.j.oc.addListener(function(t){var e,i,n;a.PB&&(a.debug.assert(a.od,"has access to internalLogger"),t.om&&t.om.dQa?a.od.trace("Not processing already applied track",null===(e=t.newValue)||void 0===e?void 0:e.trackId):(n=t.newValue,a.eaa({pn:n.Nz,toJSON:function(){return n.Ri}})?a.od.trace("ASE accepted the audio track switch",null===(i=t.newValue)||void 0===i?void 0:i.trackId):(a.od.trace("ASE rejected the audio track switch",null===(i=t.newValue)||void 0===i?void 0:i.trackId),t.oldValue&&t.oldValue.Nz!==n.Nz&&a.j.oc.set(t.oldValue,{dQa:!0}))))}),t.addListener("serverSwitch",function(t){var e;a.j.fireEvent(f.ca.GY,t),"video"===t.mediatype?e=c.Tb.Ta.Mb:"audio"===t.mediatype&&(e=c.Tb.Ta.Wb),p.Xc(e)&&a.JY(t.segmentId,t.server,e)}),t.addListener("streamSelected",function(t){var e,i,n=(null===(r=a.pa)||void 0===r?void 0:r.ZC(t.position)).wG.Y,r=[];t.mediaType===c.Tb.Ta.Mb?(e=a.j.IZa(t.streamId),i=a.j.We,r=a.j.fH()):t.mediaType===c.Tb.Ta.Wb&&(e=a.j.xZa(t.streamId),i=a.j.jh,r=a.j.rEb()),e&&i?i.set(e,{nG:n,NT:t.bandwidth}):a.od.error("no matching stream for streamSelected event",{streamId:t.streamId,mediaType:t.mediaType,streamList:r,cachedManifest:a.j.lG})}),t.addListener("segmentNormalized",function(t){var e=a.j.um(t.segmentId),i=Math.floor(t.viewableEarliestContentEnd.Y);t=d.Nc(Math.floor(t.viewableContentEnd.Y)),i=d.Nc(i),e&&(e.Uy=t,e.WNb=i),a.j.Bu||(a.j.Bu=t)}),e.addListener("segmentPresenting",function(t){var e;a.debug.assert(a.pa,"has access to asePlaygraph"),a.debug.assert(a.Fa,"has access to asePlayer"),a.debug.assert(a.EI,"has access to segmentPresentingHandler"),e=a.pa.ZC(t.position),a.EI(e.W,!1),a.j.fireEvent(f.ca.DI,{type:"segmentPresenting",position:{segmentId:t.position.xa,offset:t.position.offset},playerTimestamp:t.playerTimestamp,metrics:t.metrics}),a.kt=a.Fa.Ko()}),e.addListener("ptsChanged",function(){a.Cd.emit("skipped")}),t.addListener("locationSelected",function(t){a.j.fireEvent(f.ca.Xz,t)}),t.addListener("aseReportEnabled",function(){a.j.wM=!0}),t.addListener("aseReport",function(t){a.j.fireEvent(f.ca.FL,t)})},i.prototype.Ko=function(){var t,e=null===(i=this.Fa)||void 0===i?void 0:i.F6(),i=(null!==(n=this.kt)&&void 0!==n?n:e&&this.Fa.Ko())||{},n=i.O;return e=i.jg,t=i.xO,i=i.gI,{id:String(null==n?void 0:n.id),Fe:null!==(e=null==e?void 0:e.Y)&&void 0!==e?e:0,fd:null!==(e=null==n?void 0:n.Mg.Y)&&void 0!==e?e:1/0,Lc:null!==(n=null==n?void 0:n.Uk.Y)&&void 0!==n?n:0,me:null!==(t=null==t?void 0:t.Y)&&void 0!==t?t:1/0,zd:null!==(i=null==i?void 0:i.Y)&&void 0!==i?i:0}},i.prototype.M5=function(){return{Fe:0}},i.prototype.f7=function(){var t,e;return this.debug.assert(this.pa,"has access to asePlaygraph"),t={},e=this.pa.tw(),t.vbuflmsec=e.totalvbuflmsecs,t.vbuflbytes=e.vbuflbytes,t.abuflmsec=e.totalabuflmsecs,t.abuflbytes=e.abuflbytes,t},i.prototype.paused=function(){},i.prototype.sta=function(){this.Cd.emit("playbackRateChanged",{type:"playbackRateChanged",pts:this.Cd.Mc})},i.prototype.eaa=function(i){var t,n,e=this;return this.debug.assert(this.od,"has access to internalLogger"),this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),this.debug.assert(this.j.oa,"has access to playback manifest"),!this.iJ&&(!!this.j.oa.$b.audio_tracks.some(function(t,e){if(t.track_id===i.pn)return n=e,!0})&&(this.hn=n,null!==(t=this.j.Xf)&&void 0!==t&&t.kZb(),null!==(t=this.Fa)&&void 0!==t&&t.TA?this.LD=!1:l.config.WRb&&!this.j.paused.value&&(this.Fa.pause([c.Tb.Ta.Wb]),this.LD=!0,this.j.paused.set(!0,{hsa:!0})),this.debug.kia(this.hn,"has access to valid requestedAudioTrackIndex number"),this.MP[c.Tb.Ta.Wb]=this.hn,(this.pa.bE({us:function(){return e.MP[c.Tb.Ta.Wb]}},{us:function(){return e.MP[c.Tb.Ta.Mb]}})||this.LD)&&this.Fa.resume(this.LD?[c.Tb.Ta.Wb]:void 0),this.Sq(this.JT),!0))},i.prototype.Zn=function(){var t;this.tf.set(c.ma.Of),null!==(t=this.pa)&&void 0!==t&&t.FZ("intrplay",r.de.Zn),this.Cd.emit("underflow",{type:"underflow",pts:this.Cd.Mc}),this.Sq(this.Pe)},i.prototype.Lq=function(t,e){this.dB.Lq(t,e)},i.prototype.open=function(){this.nr||(this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),this.nr=this.$h=!0,this.pa.open(),this.debug.assert(this.dx,"invalid start position relative to playgraph"),this.pa.ZD(this.dx),this.tf.set(c.ma.xd),this.Sq(this.Pe),this.pa.nia(this.Fa),this.EMb())},i.prototype.play=function(){this.debug.assert(this.pa,"has access to asePlaygrah"),this.debug.assert(this.Fa,"has access to asePlayer"),0!==this.pa.state&&(this.Fa.resume(this.LD?[c.Tb.Ta.Wb]:void 0),this.tf.set(c.ma.Kc),this.Cd.emit("playing",{type:"playing",pts:this.Cd.Mc}))},i.prototype.stop=function(){var t;this.tf.set(c.ma.gr),null!==(t=this.Fa)&&void 0!==t&&t.pause(),this.events.emit("stop"),this.Cd.emit("paused",{type:"paused",pts:this.Cd.Mc})},i.prototype.flush=function(){this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.yi,"has access to streamingEngine"),this.nr&&this.tf.value!==c.ma.dj&&this.tf.value!==c.ma.gr&&this.stop(),this.pa.FZ("endplay",r.de.$p),this.pa.Df(),this.yi.Kh.save(),this.yi.In.save()},i.prototype.Dt=function(t){var e;return this.debug.assert(this.pa,"has access to asePlaygraph"),e=c.T.Eb(t),(e=this.pa.js(e,{C9a:!0,B9a:!0}))?this.pa.Ca.qa[e.xa].Jb+Number(e.offset.Y.toFixed(0)):this.fail("convertPlayerPtsToContentPts failed to convert playerPts: "+t)},i.prototype.cM=function(t,e){return this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.od,"has access to internalLogger"),this.pa.Ca.qa[t]||(t=this.dV(e)),this.debug.p3(t,"has access to segmentId"),t={xa:t,offset:c.T.Eb(e-this.pa.Ca.qa[t].Jb)},(t=this.pa.OV(t))?t.Y:e},i.prototype.jja=function(t,e){var i;return this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),e&&this.pa.Ca.qa[e]||(e=null!==(i=this.dV(t))&&void 0!==i?i:null===(i=this.Fa)||void 0===i?void 0:i.nj.xa),null===(t=this.pa.yn(e,t))||void 0===t?void 0:t.fd},i.prototype.gz=function(t){var e=void 0===e||e;this.$h?Number.isFinite(t)&&(this.debug.assert(this.Fa,"has access to asePlayer"),e?this.Fa.LY(t):this.Fa.Uva(t)):this.fail("Must call open prior to drmReady")},i.prototype.D6=function(){var t;return!(null===(t=this.Fa)||void 0===t||!t.vm)&&this.Fa.Oo(this.pa.Ca.qa[this.Fa.nj.xa].W)},i.prototype.Li=function(t){return!!this.Fa&&this.Fa.Li(c.T.Eb(t))},i.prototype.ss=function(t,e){var i;return this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),e&&this.pa.Ca.qa[e]||(e=null!==(i=this.dV(t))&&void 0!==i?i:this.Fa.nj.xa),this.debug.p3(e,"has access to segmentId"),this.debug.assert(this.pa.Ca.qa[e],"segment exists in playgraph map"),t={xa:e,offset:c.T.Eb(t-this.pa.Ca.qa[e].Jb)},this.pa.ZD(t),this.Fa.resume(),this.tf.set(c.ma.xd),this.Sq(this.Pe),t=this.pa.rva(t),this.debug.assert(t,"Valid position must be provided for seek"),t.offset.Y},i.prototype.addEventListener=function(t,e){return this.events.addListener(t,e),this},i.prototype.removeEventListener=function(t,e){return this.events.removeListener(t,e),this},i.prototype.QP=function(t,e){var i={};this.pa.Ai((i[t]=e,i))},i.prototype.Cr=function(t,e){var i,n;return this.debug.assert(this.od,"has access to internalLogger"),this.debug.assert(this.pa,"has access to asePlaygraph"),this.debug.assert(this.Fa,"has access to asePlayer"),i=this.Ko().id,n=this.pa.bN(i,t),e?n.zbb?void 0!==n.cO?n.cO===t:(this.pa.wi(i,t,!1,e),!0):(this.od.warn("chooseNextSegment, seamless transition, invalid destination: "+t+" for current segment: "+i),!1):void 0===n.cO&&(n.NL&&(this.Fa.reset(),this.pa.wi(i,t,!1,e),this.Fa.resume(),this.tf.set(c.ma.xd),this.Sq(this.Pe)),!!n.NL)},i.prototype.wi=function(t,e,i,n){this.debug.assert(this.pa,"has access to asePlaygraph"),this.pa.wi(t,e,i,n)},i.prototype.Vn=function(){var t;return this.debug.assert(this.od,"has access to internalLogger"),t=this.Cd.Mc,this.Cd.emit("skipped",{type:"skipped",pts:t}),new c.pF(Promise.resolve()).iva},i.prototype.dV=function(t){var e,i,n,r,a,o,s,u,c;for(r in this.debug.assert(this.pa,"has acccess to asePlaygraph"),this.debug.assert(this.od,"has acccess to internalLogger"),i=[],n=1/0,(e=this.pa.Ca).qa)o=(a=e.qa[r]).Jb,a=a.Ob,s=o<=t,u=t<Number(null!=a?a:1/0),s&&u?i.push(r):(o=Math.min(Math.abs(t-o),Math.abs(t-a)))<n&&(n=o,c=r);return t=i[0]||c,this.debug.p3(t,"has access to locatedSegmentId"),t},i.prototype.EMb=function(){var t,e=this;this.debug.assert(this.j.Vb,"has acccess to mediaElement"),t=this.j.Vb.X,this.debug.assert(t,"has acccess to videoElement"),t.addEventListener("play",function(){e.tf.value===c.ma.hh&&(e.tf.set(c.ma.Kc),e.Cd.emit("playing",{type:"playing",pts:e.Cd.Mc}))}),t.addEventListener("pause",function(){e.tf.value===c.ma.Kc&&(e.tf.set(c.ma.hh),e.Cd.emit("paused",{type:"paused",pts:e.Cd.Mc}))})},i.prototype.fail=function(t){var e;null!==(e=this.pa)&&void 0!==e&&e.events.emit("error",{type:"error",error:"NFErr_MC_StreamingFailure",errormsg:t})},i.prototype.Sq=function(t){var e,i,n,r=this;t!==this.JT&&this.iJ?this.lX=t:(n=!0===(null===(i=this.Fa)||void 0===i?void 0:i.jA.value),i=(null===(e=this.pa)||void 0===e?void 0:e.Cf.value)===c.Jc.ej,null!==(e=this.Fa)&&void 0!==e&&e.jA.removeListener(this.M2a),null!==(e=this.pa)&&void 0!==e&&e.Cf.removeListener(this.wRa),n&&i?t():(this.M2a=function(){return r.Sq(t)},this.wRa=function(){return r.Sq(t)},null!==(i=this.Fa)&&void 0!==i&&i.jA.addListener(this.M2a),null!==(i=this.pa)&&void 0!==i&&i.Cf.addListener(this.wRa)))},i.prototype.PWa=function(t){var e=this,i=this.j.um(t);return Promise.resolve(null!==(t=i.oa)&&void 0!==t?t:this.j.pUb(i).then(function(){return e.j.lTb(i),i.oa})).then(function(t){return{oa:t=t.$b,ii:t.woa&&!t.UV,config:e.Oe,Bd:[].concat(G(e.Bd))}})},i.prototype.oU=function(t,e){var i,n,r=this;this.debug.assert(this.yi,"has access to streamingEngine"),i=this.fb.ue(t).W,this.Gj.has(i)||(this.Gj.store(i,{mja:function(){},equals:function(t){return!(t.W!==i||e.ba!==t.ba&&t.ba&&e.ba)},get hv(){return n=n||r.PWa(t)},set hv(t){n=t},events:new a.EventEmitter,ba:e.ba,W:i,Ot:!1,p$a:!1}),this.Oe.jz&&this.yi.aE(this.Gj.Cn(i),{ba:e.ba,ds:e.ds,HC:e.iz}))},i.prototype.lx=function(t){var e;return this.debug.assert(this.yi,"has access to streamingEngine"),e=this.fb.ue(t).W,this.Gj.has(e)?((e=this.Gj.Cn(e)).hv=this.PWa(t),this.yi.lx(e)):Promise.resolve()},i.prototype.bN=function(t){var e;return this.debug.assert(this.Fa,"has access to asePlayer"),this.debug.assert(this.pa,"has access to asePlaygraph"),this.pa.bN(null===(e=this.Fa.Ko().O)||void 0===e?void 0:e.id,t)},i.prototype.XJb=function(t){var e=this,i=t.hw,n=t.xa;this.debug.assert(this.yi,"has access to streamingEngine"),this.debug.assert(this.od,"has access to internalLogger"),t=this.j.um(n),n=(t=this.fb.k6(t)).qa[n],this.debug.assert(n,"segment exists"),this.dx=b.JV(n.W,t,this.j.Z,n.Jb),i=Object.create(this.Oe,{iz:{value:i.iz}}),this.tf=new g.dc(c.ma.zh),this.pa=this.yi.aG(t,this.Oe.M5a,i,this.Gj),this.dB=new c.rF(this.od),i=this.pa.CC(this.dB),t=this.pa.BC(),this.pa.M$(t,i),this.pa.bE({us:function(){return e.MP[c.Tb.Ta.Wb]}},{us:function(){return e.MP[c.Tb.Ta.Mb]}}),this.LD=!1},i.prototype.pka=function(){var t,e=this;this.debug.assert(this.yi,"has access to streamingEngine"),t=Object.create(this.Oe,{Bd:{value:[].concat(G(this.Bd))},CV:{value:function(){return e.h6()}}}),this.Cd=Object.create(new a.EventEmitter,{Mc:{get:function(){return e.debug.kia(e.j.mediaTime.value,"has access to mediaTime.value"),c.T.Eb(e.j.mediaTime.value)}},playbackRate:{get:function(){return Math.max(e.j.playbackRate.value,.01)}},BV:{value:function(){return e.debug.assert(e.j.Vb,"has access to mediaElement"),e.j.Vb}}}),this.Fa=this.yi.JPa(this.Cd,t)},i.prototype.h6=function(){return this.sj||(this.sj=new c.platform.MediaSource(this.Cd),this.sj.pc||(this.sj.pc=c.platform.MediaSource.pc)),this.sj},it.Object.defineProperties(i.prototype,{iJ:{configurable:!0,enumerable:!0,get:function(){return void 0!==this.hn}},Qb:{configurable:!0,enumerable:!0,get:function(){return this.debug.assert(this.yi,"has access to streamingEngine"),this.yi.Qb}}}),e.Rya=i},function(t,e,i){var n;_esm(e),e.mia=void 0,n=i(19),e.mia=function(t){var a,o,e=t.mk,i=t.loadTime;t=t.JVa,a=n.Ba(i)?i:0,o=e[t.target]||{},e[t.target]!==o&&(e[t.target]=o),Object.entries(t.fields).forEach(function(t){var e,i,n,r=nt(t);t=r.next().value,"object"!=typeof(r=r.next().value)||null===r?o[t]=r:"count"===(e=r.type)?(void 0===o[t]&&(o[t]=0),++o[t]):void 0!==r.value?"array"===e?(e=o[t],i=r.adjust,n=r.value,e=e||(o[t]=[]),i&&0<i.length&&i.forEach(function(t){n[t]-=a||0}),e.push(n)):o[t]="sum"===e?(o[t]||0)+r.value:r.value:o[t]=r})}},function(t,e,i){var r,a;_esm(e),e.JV=void 0,r=i(47),a=i(21),e.JV=function(t,e,i,n){return e.qa[e.Yd].Jb===n?(t=r.gka(e,t,r.T.Eb(i)),a.hb(t,"has valid start position relative to playgraph"),t):{xa:e.Yd,offset:r.T.Gb}}},function(t,e,i){var f,n,l,r,p,d,b;function a(t,e,i,n,r,a,o,s,u,c){var h=this;this.x0b=t,this.j=e,this.id=i,this.height=n,this.width=r,this.oSb=a,this.pSb=o,this.size=s,this.du=u,this.urls=c,this.type=f.Ei.vxa,this.retry=!0,this.state=p.wp.J0,this.Ri={},this.r3={},this.XTb=function(t){if(t.$)try{h.data=h.x0b.parse(t.content),h.state=p.wp.ME,h.log.trace("TrickPlay parsed",{Images:h.data.images.length},h.Ri),h.j.fireEvent(d.ca.DZ)}catch(t){h.state=p.wp.XGa,h.log.error("TrickPlay parse failed.",t)}else h.state=p.wp.J0,h.log.error("TrickPlay download failed.",b.Ts(t),h.Ri)},this.log=l.Ih(e,"TrickPlay")}_esm(e),e.DLa=void 0,f=i(90),n=i(14),l=i(8),r=i(74),p=i(520),d=i(15),b=i(3),a.prototype.DFb=function(t){if(this.data&&(this.du&&(t+=this.du),0<=(t=Math.floor(t/this.data.header.X$a))&&t<this.data.images.length))return{image:this.data.images[t],time:t*this.data.header.X$a,height:this.height,width:this.width,pixelAspectHeight:this.oSb,pixelAspectWidth:this.pSb}},a.prototype.o6=function(){switch(this.state){case p.wp.ME:return"downloaded";case p.wp.LOADING:return"loading";case p.wp.kR:return"downloadfailed";case p.wp.XGa:return"parsefailed";default:return"notstarted"}},a.prototype.download=function(){var t=this.KHb();t?(this.state=p.wp.LOADING,this.IAb(t)):this.retry=!1},a.prototype.getState=function(){return this.state},a.prototype.KHb=function(){var t,e=this,i=Object.keys(this.urls).find(function(t){return(e.r3[e.urls[t]]||0)<=n.config.t0b});if(i)return(t=this.urls[i])in this.r3?this.r3[t]++:this.r3[t]=1,{url:t,wC:i}},a.prototype.IAb=function(t){this.log.trace("Downloading",t.url,this.Ri),t={responseType:r.YV,qc:this.Xma(t.wC),url:t.url,track:this},this.j.O6.download(t,this.XTb)},a.prototype.Xma=function(e){return this.j.hi.find(function(t){return t&&t.id===e})},e.DLa=a},function(t,e,i){var n;function r(t,e,i,n){this.cla=t,this.debug=e,this.Aa=i,this.j=n,this.u9=[],this.I8={},this.ela={},this.lma=!1,this.B$a=1,this.mza=7.8125}_esm(e),e.qBa=void 0,n=i(4),i(15),i(19),i(74),r.prototype.register=function(t,e){this.debug.assert(!(0<=this.u9.indexOf(t)),"panel already registered"),this.I8[t]=e,this.u9.push(t)},r.prototype.a4a=function(t){var e=this;this.ela[t]=!0,this.lma||(this.lma=!0,setTimeout(function(){return e.rDb()},0))},r.prototype.mGb=function(t){return(t=this.I8[t])?t():void 0},r.prototype.xV=function(){var t=this.j.E9;return t?t.xV():[]},r.prototype.addEventListener=function(t,e){this.cla.addListener(t,e),this.I8[t]&&this.a4a(t)},r.prototype.removeEventListener=function(t,e){this.cla.removeListener(t,e)},r.prototype.getTime=function(){return this.Aa.Yb().da(n.ja)},r.prototype.rDb=function(){this.lma=!1;for(var t,e=this.u9.length;e--;)t=this.u9[e],this.ela[t]&&(this.ela[t]=!1,this.cla.Fc(t+"changed",{getModel:this.I8[t]}))},e.qBa=r},function(t,e,i){var n,h,r,f,a,o,s;function u(t,e){var u=this;this.Dm=t,this.Kr=e,this.gab=function(t){var e,i,n,r,a=u.B$a++,o=t.request.EC||"dl",s=u.lZa(o,"start");s&&(i=(e=t.request.kA).stream.P.Wo,e=nt(e.stream.P.Yh).next().value,(i||e)&&(i=null!=i?i:e.O.id,u.S9a.has(i)||(n=u.HYa(i),r=t.ls,u.Dm.mark(s,n,r?o+"-"+r+"-"+a:o),t.Eha(function(){var t=u.lZa(o,"end"),e=r?o+"-"+r+"-"+a:o;t&&u.Dm.mark(t,n,e)}))))},this.B$a=0,this.S9a=new Set,this.Dva=new Map,e.SU&&this.P2b()}_esm(e),e.sGa=void 0,t=i(1),n=i(0),h=i(62),r=i(71),f=i(4),a=i(74),i=i(40),o={start:{video:h.Ia.uQ,audio:h.Ia.qQ},end:{video:h.Ia.tQ,audio:h.Ia.pQ}},u.prototype.IYa=function(e){var i,n,t,r,a,o,s,u;function c(t){return f.timestamp(i.WPa(f.timestamp(t),e,!0))}return i=this,n=new Set,t=e.pd,r=e.ba,a=void 0===e.M9a?null:e.M9a,o=e.xa,s=this.Dm.lYa(r),(u=o&&this.HYa(o))&&s.push.apply(s,G(this.Dm.lYa(u))),this.Dm.e7a(e.ba),u&&this.Dm.e7a(u),o&&this.S9a.add(o),o=[],"pr_ats"in t&&o.push({name:h.Ia.a1,Es:c(t.pr_ats),ba:r,Fg:"request-pre-manifest"}),"ats"in t&&o.push({name:h.Ia.Z0,Es:c(t.ats),ba:r,Fg:"request-manifest"}),"pr_at"in t&&o.push({name:h.Ia.$0,Es:c(t.pr_at),ba:r,Fg:"request-pre-manifest"}),"at"in t&&o.push({name:h.Ia.Y0,Es:c(t.at),ba:r,Fg:"request-manifest"}),"lg"in t&&o.push({name:h.Ia.X0,Es:c(t.lg),ba:r,Fg:"request-license"}),"lr"in t&&(o.push({name:h.Ia.W0,Es:c(t.lr),ba:r,Fg:"request-license"}),o.push({name:h.Ia.j_,Es:c(t.lr),ba:r,Fg:"apply-license"})),"ld"in t&&o.push({name:h.Ia.i_,Es:c(t.ld),ba:r,Fg:"apply-license"}),"tt_start"in t&&o.push({name:h.Ia.sQ,Es:c(t.tt_start),ba:r,Fg:"request-timed-text"}),"tt_comp"in t&&o.push({name:h.Ia.rQ,Es:c(t.tt_comp),ba:r,Fg:"request-timed-text"}),o.concat(s).map(function(t){return i.P_b(t,e)}).filter(function(t){return t.ts<=(null!=a?a:t.ts)&&("end"===t.step&&n.add(t.eventId),!0)}).filter(function(t){return!("start"===t.step&&!n.has(t.eventId))}).sort(function(t,e){return t.ts-e.ts}).reduce(function(t,e){var i=e.eventName;return delete e.eventName,i&&(t[i]=e),t},{})},u.prototype.Xqb=function(t,e,i){return void 0!==i&&i?t.da(f.ja)+e.vk.da(f.ja):t.da(f.ja)-e.vk.da(f.ja)},u.prototype.WPa=function(t,e,i){if(i=void 0!==i&&i,e.Nm){if(!i)return t.da(f.ja)-e.Nm;t.da(f.ja),e.Nm}return this.Xqb(t,e,i)},u.prototype.P_b=function(t,e){var i=t.Fg,n=t.name;return{eventName:this.CPb(n,i),eventId:i||n,ts:this.WPa(t.Es,e),comp:this.rV(n),cat:this.NEb(n),step:this.tHb(n)}},u.prototype.CPb=function(t,e){switch(t){case h.Ia.sQ:case h.Ia.rQ:case h.Ia.qQ:case h.Ia.pQ:case h.Ia.uQ:case h.Ia.tQ:return t+"-"+e;default:return t}},u.prototype.rV=function(t){switch(t){case h.Ia.a1:case h.Ia.$0:case h.Ia.Z0:case h.Ia.Y0:return"manifest";case h.Ia.X0:case h.Ia.W0:case h.Ia.yea:case h.Ia.xea:case h.Ia.f0:case h.Ia.e0:case h.Ia.j_:case h.Ia.i_:return"license";case h.Ia.sQ:case h.Ia.rQ:case h.Ia.qQ:case h.Ia.pQ:case h.Ia.uQ:case h.Ia.tQ:case h.Ia.eba:case h.Ia.dba:return"buffering";case h.Ia.Eda:case h.Ia.Dda:return"playback";default:return null}},u.prototype.NEb=function(t){switch(t){case h.Ia.a1:case h.Ia.$0:case h.Ia.Z0:case h.Ia.Y0:return"aws";case h.Ia.X0:case h.Ia.W0:return"mixed";case h.Ia.Eda:case h.Ia.Dda:case h.Ia.yea:case h.Ia.xea:case h.Ia.f0:case h.Ia.e0:case h.Ia.j_:case h.Ia.i_:case h.Ia.eba:case h.Ia.dba:return"device";case h.Ia.sQ:case h.Ia.rQ:case h.Ia.qQ:case h.Ia.pQ:case h.Ia.uQ:case h.Ia.tQ:return"cdn";default:return null}},u.prototype.tHb=function(t){switch(t){case h.Ia.a1:case h.Ia.Eda:case h.Ia.Z0:case h.Ia.X0:case h.Ia.eba:case h.Ia.sQ:case h.Ia.qQ:case h.Ia.uQ:case h.Ia.yea:case h.Ia.f0:case h.Ia.j_:return"start";case h.Ia.$0:case h.Ia.Dda:case h.Ia.Y0:case h.Ia.W0:case h.Ia.xea:case h.Ia.e0:case h.Ia.i_:case h.Ia.dba:case h.Ia.rQ:case h.Ia.pQ:case h.Ia.tQ:return"end";default:return null}},u.prototype.lZa=function(t,e){if(t in o[e])return o[e][t]},u.prototype.T0b=function(){a.hf.removeEventListener(a.L6,this.gab)},u.prototype.P2b=function(){this.T0b(),a.hf.addEventListener(a.L6,this.gab)},u.prototype.HYa=function(t){var e;return this.Dva.has(t)?this.Dva.get(t):(e=Date.now(),this.Dva.set(t,e),e)},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(r.xR)),t.__param(1,n.l(i.Tm))],s),e.sGa=s},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C,L,M,D,U;_esm(e),e.ySa=void 0,t=i(0),n=i(484),r=i(1205),a=i(103),o=i(1206),s=i(495),u=i(1207),c=i(497),h=i(1208),f=i(498),l=i(1209),p=i(285),d=i(1210),b=i(82),m=i(1211),g=i(1212),v=i(41),y=i(3),w=i(1213),_=i(1214),E=i(1215),k=i(53),S=i(1216),T=i(299),A=i(1217),O=i(1218),I=i(1219),x=i(481),P=i(1220),R=i(1221),N=i(1222),j=i(347),C=i(1223),L=i(66),M=i(545),D=i(1224),U=i(1225),e.ySa=new t.rd(function(t){t(k.Wm).to(S.xHa),t(n.MHa).to(r.LHa),t(T.Mda).to(A.sHa),t(x.uHa).to(P.tHa),t(O.ijb).to(I.QHa),t(a.Pda).to(o.NHa),t(M.OHa).wf(function(e){return function(){var t=e.$a.get(L.Xs);return t&&t.wbb?e.$a.resolve(U.hIa):e.$a.resolve(D.PHa)}}),t(s.rHa).to(u.qHa),t(c.eIa).to(h.dIa),t(f.GHa).to(l.FHa),t(p.Oda).to(d.HHa),t(b.JKa).to(m.IKa),t(b.NKa).to(g.MKa),t(b.xEa).to(w.wEa),t(b.EKa).to(_.DKa),t(b.jCa).to(E.iCa),t(N.jjb).to(R.RHa),t(j.EHa).to(C.DHa),t(b.mca).wf(function(e){return function(t){switch(t){case b.mp.start:return e.$a.get(b.JKa);case b.mp.stop:return e.$a.get(b.NKa);case b.mp.pW:return e.$a.get(b.xEa);case b.mp.splice:return e.$a.get(b.EKa);case b.mp.AM:return e.$a.get(b.jCa)}throw new v.qd(y.M.xib,void 0,void 0,void 0,void 0,"The event key was invalid - "+t)}})})},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.ihb,1,a.fj.G1a,a.fj.G1a)||this}_esm(e),e.LHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e){var i=this;return this.send(t,"/"+this.name,e).then(function(t){return t.result}).catch(function(t){throw i.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with logblobs"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.LHa=s},function(t,e,i){var s,a,u,o,n,r,c,h,f,l,p;function d(t,e,i,n,r){return(t=o.Di.call(this,t,a.M.sR,3,u.fj.oa,u.fj.oa)||this).platform=e,t.Zqa=i,t.iMb=n,t.uNb=r,t}_esm(e),e.NHa=void 0,t=i(1),s=i(103),a=i(3),u=i(68),i(187),o=i(75),n=i(53),r=i(34),c=i(40),h=i(157),f=i(285),l=i(0),i=i(545),T(d,o.Di),d.prototype.og=function(n,r){var a,o=this;return this.x2=r.Tt===s.Vm.eF?"prefetch/manifest":u.fj.oa,a=r.Tt===s.Vm.g1?c.wv.kJa:c.wv.MR,this.uNb().transform(r,a).then(function(t){var i,e=(t=nt(t)).next().value;return(i=t.next().value).kw&&(o.x2=r.Tt===s.Vm.eF?"prefetch/licensedManifest":"licensedManifest"),o.send(n,i.zl,e,void 0,void 0,a).then(function(t){var e=(t=o.Zqa.create(t.result)).$b.eB.map(function(t){return t.Hg}).filter(Boolean);return i.kw&&(0<e.length?(e=o.iMb.mab(e),i.kw.CPa(e),t.kw=i.kw,t.i0a=r.Tt===s.Vm.eF,t.h0a=!0):i.kw.close()),t})}).catch(function(t){throw o.Bn(t)})},d.prototype.gq=function(){return Promise.reject(Error("Links are not supported with manifest command"))},p=d,p=t.__decorate([l.R(),t.__param(0,l.l(n.Wm)),t.__param(1,l.l(r.Hk)),t.__param(2,l.l(h.tR)),t.__param(3,l.l(f.Oda)),t.__param(4,l.l(i.OHa))],p),e.NHa=p},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.XJ,3,a.fj.Hg,a.fj.Hg)||this}_esm(e),e.qHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(){return Promise.reject(Error("Links are required with acquire command"))},u.prototype.gq=function(t,e,i){var n=this;return e=e.zV(i.p1a).href,this.x2="ldl"===i.p1a?"prefetch/license":a.fj.Hg,this.send(t,e,i.inputs,"drmSessionId").then(function(t){return t=t.result,n.tub(t),t}).catch(function(t){throw n.Bn(t)})},u.prototype.tub=function(t){t.forEach(function(t){if(!t.licenseResponseBase64)throw Error("Received empty licenseResponseBase64")})},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.qHa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.tea,3,a.fj.Hg,"release/license")||this}_esm(e),e.dIa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e){var i=this;return this.send(t,"/bundle",e).then(function(t){return t.result}).catch(function(t){throw i.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with release"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.dIa=s},function(t,e,i){var n,r,a;function o(t){this.za=t}_esm(e),e.FHa=void 0,t=i(1),n=i(0),r=i(38),a=i(4),o.prototype.m0b=function(e){var i=this.za.ff.da(a.io);return{inputs:e.dk.map(function(t){return{drmSessionId:t.sessionId,clientTime:i,challengeBase64:t.dataBase64,xid:e.ba.toString(),mdxControllerEsn:e.MW}}),p1a:"standard"===e.Uf.toLowerCase()?"license":"ldl"}},o.prototype.p0b=function(e){var i=this,n=[];return e.we.map(function(t){return n.push(t.id),{url:i.ltb(t.BH,t.zW),echo:"drmSessionId",params:{drmSessionId:t.id,xid:e.ba.toString()}}})},o.prototype.ltb=function(t,e){return"/releaseLicense?drmLicenseContextId="+t+(e?"&licenseId="+e:"")},i=o,i=t.__decorate([n.R(),t.__param(0,n.l(r.Uh))],i),e.FHa=i},function(t,e,i){var n,r,a;function o(t,e){this.ce=t,this.Fy=e}_esm(e),e.HHa=void 0,t=i(1),n=i(0),r=i(29),i=i(36),o.prototype.mab=function(t){var e=this,i=t.map(function(t){return t.links.releaseLicense.href}).map(function(t){return e.ce.zX(t.substring(t.indexOf("?")+1))});return{$:!0,we:t.map(function(t,e){return{id:t.drmSessionId,BH:i[e].drmlicensecontextid,zW:i[e].licenseid}}),qj:t.map(function(t){return{data:e.Fy.decode(t.licenseResponseBase64),sessionId:t.drmSessionId}})}},a=o,a=t.__decorate([n.R(),t.__param(0,n.l(r.cg)),t.__param(1,n.l(i.Ci))],a),e.HHa=a},function(t,e,i){var n,r,a,o,s;function u(t){return a.Vq.call(this,t,r.M.Tjb,o.mp.start,3)||this}_esm(e),e.IKa=void 0,t=i(1),n=i(0),r=i(3),a=i(162),o=i(82),i=i(53),T(u,a.Vq),s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.IKa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Vq.call(this,t,r.M.bKa,o.mp.stop,3)||this}_esm(e),e.MKa=void 0,t=i(1),n=i(0),r=i(3),a=i(162),o=i(82),i=i(53),T(u,a.Vq),s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.MKa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Vq.call(this,t,r.M.Pca,o.mp.pW,1)||this}_esm(e),e.wEa=void 0,t=i(1),n=i(0),r=i(3),a=i(162),o=i(82),i=i(53),T(u,a.Vq),s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.wEa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Vq.call(this,t,r.M.$Ja,o.mp.splice,1)||this}_esm(e),e.DKa=void 0,t=i(1),n=i(0),r=i(3),a=i(162),o=i(82),i=i(53),T(u,a.Vq),s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.DKa=s},function(t,e,i){var n,r,a,o,s;function u(t){return a.Vq.call(this,t,r.M.wfb,o.mp.AM,3)||this}_esm(e),e.iCa=void 0,t=i(1),n=i(0),r=i(3),a=i(162),o=i(82),i=i(53),T(u,a.Vq),u.prototype.G3=function(t){return Object.assign(Object.assign({},a.Vq.prototype.G3.call(this,t)),{action:t.action})},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.iCa=s},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a,o,s,u){this.Ch=t,this.hf=e,this.Yg=i,this.tAb=n,this.Gz=r,this.G1b=a,this.Hka=o,this.QVb=s,this.FG=u}_esm(e),e.xHa=void 0,t=i(1),n=i(0),r=i(123),a=i(66),o=i(518),s=i(515),u=i(81),c=i(87),h=i(334),f=i(97),i=i(91),l=t.__decorate([n.R(),t.__param(0,n.l(r.zJ)),t.__param(1,n.l(c.Hx)),t.__param(2,n.l(a.Xs)),t.__param(3,n.l(s.AHa)),t.__param(4,n.l(u.Gx)),t.__param(5,n.l(h.LLa)),t.__param(6,n.l(f.U_)),t.__param(7,n.l(o.gIa)),t.__param(8,n.l(i.zx))],l),e.xHa=l},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.Ocb,2,a.fj.bind,a.fj.bind)||this}_esm(e),e.sHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e,i){var n=this;return this.send(t,"/"+this.name,e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with bind"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.sHa=s},function(t,e){_esm(e),e.ijb="PboPairCommandSymbol"},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.pib,2,a.fj.S4a,a.fj.S4a)||this}_esm(e),e.QHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e,i){var n=this;return this.send(t,"/"+this.name,e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with pair"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.QHa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.Pcb,2,a.fj.bind,a.fj.bind)||this}_esm(e),e.tHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e,i){var n=this;return this.send(t,"/bindDevice",e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with bindDevice"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.tHa=s},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.Iib,1,a.fj.ping,a.fj.ping)||this}_esm(e),e.RHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e,i){var n=this;return this.send(t,"/"+this.name,e,void 0,i).then(function(t){return t.result}).catch(function(t){throw n.Bn(t)})},u.prototype.gq=function(){return Promise.reject(Error("Links are unsupported with ping"))},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.RHa=s},function(t,e){_esm(e),e.jjb="PboPingCommandSymbol"},function(t,e,i){var n,r,a,o,s;function u(t){return o.Di.call(this,t,r.M.Mfb,2,a.fj.oa,"generateScreenshots")||this}_esm(e),e.DHa=void 0,t=i(1),n=i(0),r=i(3),a=i(68),o=i(75),i=i(53),T(u,o.Di),u.prototype.og=function(t,e){var i=this;return this.send(t,"/generateScreenshots",e).then(function(t){return t.result}).catch(function(t){throw i.Bn(t)})},u.prototype.gq=function(t,e,i){var n=this;return this.send(t,e.zV("generateScreenshots").href,i).then(function(t){return t.result}).catch(function(t){throw n.Bn(t)})},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(i.Wm))],s),e.DHa=s},function(t,e,i){var n,d,r,b,a,o,s,u,c,m,h,f,l,p,g;function v(t,e,i,n,r,a,o,s,u,c){this.Yg=t,this.platform=e,this.config=i,this.cub=n,this.CSb=r,this.pk=a,this.ZT=o,this.za=s,this.p8=u,this.sn=c}_esm(e),e.PHa=void 0,t=i(1),n=i(0),d=i(103),r=i(13),b=i(464),a=i(462),o=i(544),s=i(70),u=i(34),c=i(38),m=i(4),h=i(166),f=i(66),l=i(336),p=i(26),g=i(57),v.prototype.transform=function(s,t){var e,i,u,n,r,c=this,h=s.bb,f=Object.assign({},h.w3,h.Jm),l={},p=s.W;return l[p]={unletterboxed:!!f.preferUnletterboxed},i=this.config(),u=i.S1b?30:25,n=i.hp?this.pk.oFb():Promise.resolve(this.p8.Vt()),r=null===(r=null===(e=i.Dxa)||void 0===e?void 0:e[null==h?void 0:h.ye])||void 0===r?void 0:r.gv,e=null===(i=null===(i=i.Dxa)||void 0===i?void 0:i[null==h?void 0:h.ye])||void 0===i?void 0:i.oC,Promise.all([this.sn.gZa(e),this.sn.iZa(r),this.sn.cN(),this.sn.j6(),this.OEb(s.ba,t),this.sFb(s),n]).then(function(t){var e=nt(t),i=e.next().value,n=e.next().value,r=e.next().value,a=e.next().value,o=e.next().value;return t=e.next().value,e=e.next().value,i=(i||[]).concat(n||[]).concat(c.config().dv).concat(["BIF240","BIF320"]).filter(Boolean),a=a?a.DEVICE_SECURITY_LEVEL:void 0,n="postplay"===h.ye||!!f.isUIAutoPlay,30==u?(useAVC&&(i.push("playready-h264hpl22-dash"),i.push("playready-h264hpl30-dash"),i.push("playready-h264hpl31-dash"),i.push("playready-h264hpl40-dash")),useDV&&/hevc-hdr/.test(i)&&(i.push("hevc-dv5-main10-L30-dash-cenc-prk"),i.push("hevc-dv5-main10-L31-dash-cenc-prk"),i.push("hevc-dv5-main10-L40-dash-cenc-prk"),i.push("hevc-dv5-main10-L41-dash-cenc-prk"),i.push("hevc-dv5-main10-L50-dash-cenc-prk"),i.push("hevc-dv5-main10-L51-dash-cenc-prk")),useDDplus&&(i.push("ddplus-2.0-dash"),i.push("ddplus-5.1-dash"),i.push("ddplus-5.1hq-dash"),i.push("ddplus-atmos-dash"),i=i.filter(t=>{if(!new RegExp(/heaac/g).test(JSON.stringify(t)))return t})),useHEVC&&(i=i.filter(t=>{if(!new RegExp(/main10-L5/g).test(JSON.stringify(t)))return t}))):(useFHD&&(i.push("playready-h264mpl40-dash"),i.push("playready-h264hpl40-dash"),i.push("vp9-profile0-L40-dash-cenc")),useHA&&i.push("heaac-5.1-dash"),useAVCH&&(i=(i=i.filter(t=>{if(!new RegExp(/vp9-profile/g).test(JSON.stringify(t)))return t})).filter(t=>{if(!new RegExp(/playready-h264mp/g).test(JSON.stringify(t)))return t})),useCAVC&&(i=(i=i.filter(t=>{if(!new RegExp(/vp9-profile/g).test(JSON.stringify(t)))return t})).filter(t=>{if(!new RegExp(/playready-h264hp/g).test(JSON.stringify(t)))return t}))),useAllSub&&(f.showAllSubDubTracks=1),r={type:"standard",manifestVersion:c.Yg.pVa?"v2":"v1",viewableId:p,profiles:i,flavor:s.Tt,drmType:e,drmVersion:u,usePsshBox:!0,isBranching:!!s.bb.Fl,useHttpsStreams:!0,supportsUnequalizedDownloadables:c.config().e_b,imageSubtitleHeight:b.Nea.NYa(),uiVersion:c.Yg.YA,uiPlatform:c.Yg.Aaa,clientVersion:c.platform.version,supportsPreReleasePin:c.config().Ir.ZZb,supportsWatermark:c.config().Ir.$Zb,packageId:c.FGb(h),deviceSecurityLevel:a,videoOutputInfo:r,titleSpecificData:l,preferAssistiveAudio:!!f.assistiveAudioPreferred,preferredTextLocale:f.preferredTextLocale,preferredAudioLocale:f.preferredAudioLocale,isUIAutoPlay:n,challenge:o,isNonMember:c.Yg.Gpa,pin:h.v5a,desiredVmaf:c.config().pbb?c.config().lUa:c.config().mUa,desiredSegmentVmaf:c.config().pbb?c.config().lUa:c.config().mUa,requestSegmentVmaf:c.config().VVb,supportsPartialHydration:c.Yg.KG,contentPlaygraph:c.Yg.USa},h.NVa&&(r.extraParams=h.NVa),h.kUa&&(r.desiredDownloadables=h.kUa),h.Xua&&(r.requestReference=h.Xua),o={zl:t?"licensedManifest":"manifest",kw:null==t?void 0:t.ac},t&&(t={drmSessionId:t.ac.vz()||"session",clientTime:c.za.FY.da(m.io),challengeBase64:t.rja},r.challenges={default:[t]},r.profileGroups=[{name:"default",profiles:i}],r.licenseType=s.Uf==g.Xh.eo?"limited":"standard",s.ba&&(r.xid=s.ba.toString())),c.Yg.KG||(r.showAllSubDubTracks=c.config().Ir.IYb||!!f.showAllSubDubTracks,c.Yg.hVa&&s.Tt===d.Vm.g1&&(r.maxSupportedLanguages=2)),s.raa&&(r.originalPlaybackContextId=s.raa.uRb,r.requiredAudioTrackId=s.raa.ZVb,r.requiredTextTrackId=s.raa.bWb),[r,o]})},v.prototype.FGb=function(t){if(this.config().W9.enabled)return void 0!==t.Vo?t.Vo:void 0!==this.config().W9.Vo?Number(this.config().W9.Vo):void 0},v.prototype.OEb=function(i,t){var n=this;return this.cub.jXa(t).then(function(t){var e=i&&n.CSb.MGb(i);return e&&e.Kp("cad"),t})},v.prototype.sFb=function(t){var e;return void 0!==t.Uf&&this.config().hp?(e=t.Uf===g.Xh.rp&&this.Yg.Z3,t.Uf===g.Xh.eo&&this.Yg.iVa||e?this.ZT.Tna(t.Uf):Promise.resolve(void 0)):Promise.resolve(void 0)},i=v,i=t.__decorate([n.R(),t.__param(0,n.l(f.Xs)),t.__param(1,n.l(u.Hk)),t.__param(2,n.l(r.Zc)),t.__param(3,n.l(a.Qza)),t.__param(4,n.l(o.eea)),t.__param(5,n.l(s.Vs)),t.__param(6,n.l(h.C_)),t.__param(7,n.l(c.Uh)),t.__param(8,n.l(l.mda)),t.__param(9,n.l(p.yx))],i),e.PHa=i},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){this.platform=t,this.config=e,this.ZT=i,this.sn=n}_esm(e),e.hIa=void 0,t=i(1),n=i(0),r=i(13),a=i(34),o=i(166),s=i(26),u=i(57),c.prototype.transform=function(n){var r=this,a=n.bb;return Promise.all([this.sn.gZa(),this.sn.iZa(),this.ZT.Tna(u.Xh.rp)]).then(function(t){var e,i=nt(t);return t=i.next().value,e=i.next().value,i=i.next().value,[{viewableId:n.W,packageId:a.Vo,assetId:a.lia,challenge:i.rja,audioProfiles:t,textProfiles:r.config().dv,trickplayProfiles:["BIF240","BIF320"],videoProfiles:e,audioLanguages:a.dsb,textLanguages:a.x_b,videoLanguages:a.Fbb?[a.Fbb]:void 0,requestReference:a.Xua},{kw:null==i?void 0:i.ac,zl:"studioManifest"}]})},i=c,i=t.__decorate([n.R(),t.__param(0,n.l(a.Hk)),t.__param(1,n.l(r.Zc)),t.__param(2,n.l(o.C_)),t.__param(3,n.l(s.yx))],i),e.hIa=i},function(t,e,i){var n,r,a,o,s,u;_esm(e),e.transports=void 0,t=i(0),n=i(277),r=i(516),a=i(1227),o=i(1228),s=i(1229),u=i(40),e.transports=new t.rd(function(t){t(n.r1).to(s.yLa).aa(),t(r.zGa).to(a.yGa),t(r.GKa).to(o.FKa),t(r.zLa).wf(function(e){return function(t){return e.$a.get(n.r1).O$(null!==(t=null==t?void 0:t.iPb)&&void 0!==t?t:u.wv.MR)?e.$a.get(r.zGa):e.$a.get(r.GKa)}})})},function(t,e,i){var n,r,a,o,s,u,c;function h(t,e,i,n){var r=this;this.DD=e,this.receiver=i,this.profile=n,this.log=t.ib("MslTransport"),this.DD().then(function(t){return r.L8=t})}_esm(e),e.yGa=void 0,t=i(1),n=i(0),r=i(7),a=i(156),o=i(4),s=i(192),i=i(94),u={license:!0},h.prototype.send=function(i,n){var r=this,e={u3a:Object.assign({hf:i.hf,log:i.log,profile:this.profile},i.Nsb),method:i.zl,url:i.url.href,body:JSON.stringify(n),timeout:i.timeout.da(o.ja),Y1b:this.profile,Pbc:!u[i.zl],APb:!!u[i.zl],Tk:!0,p$:i.jva,headers:i.headers};return this.DD().then(function(t){return t.send(e).then(function(t){return r.receiver.FO({command:i.zl,inputs:n,outputs:t}),t}).catch(function(t){var e;if(!t.error)throw t.Cc=t.na||t.Cc,r.receiver.FO({command:i.zl,inputs:n,outputs:t}),t;throw(e=t.error).XD=t.XD,r.log.error("Error sending MSL request",{mslCode:e.mA,subCode:e.Cc,data:e.data,message:e.message}),r.receiver.FO({command:i.zl,inputs:n,outputs:e}),e})})},h.prototype.cka=function(){var t;return{userTokens:null===(t=this.L8)||void 0===t?void 0:t.$W.getUserIdTokenKeys()}},c=h,c=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(a.yR)),t.__param(2,n.l(s.U0)),t.__param(3,n.l(i.OR))],c),e.yGa=c},function(t,e,i){var n,a,r,o,s;function u(t,e,i){this.receiver=e,this.hf=i,this.log=t.ib("SslTransport")}_esm(e),e.FKa=void 0,t=i(1),n=i(0),a=i(4),r=i(7),o=i(192),i=i(87),u.prototype.send=function(i,n){var r=this,t={url:i.url.href,EC:"nq-"+i.zl,Fta:JSON.stringify(n),d4:i.timeout.da(a.ja),headers:i.headers,withCredentials:!0};return new Promise(function(e,i){r.hf.download(t,function(t){(t.$?e:i)(t)})}).then(function(t){return t={status:"success",body:t.content},r.receiver.FO({command:i.zl,inputs:n,outputs:t}),t}).catch(function(t){var e;if(!t.error)throw t.Cc=t.na||t.Cc,r.receiver.FO({command:i.zl,inputs:n,outputs:t}),t;throw(e=t.error).XD=t.XD,r.log.error("Error sending SSL request",{subCode:e.Cc,data:e.content,message:e.message}),r.receiver.FO({command:i.zl,inputs:n,outputs:e}),e})},u.prototype.cka=function(){return{}},s=u,s=t.__decorate([n.R(),t.__param(0,n.l(r.qb)),t.__param(1,n.l(o.U0)),t.__param(2,n.l(i.Hx))],s),e.FKa=s},function(t,e,i){var n,r,a,o,s;function u(t){return r.Ze.call(this,t,"TransportConfigImpl")||this}_esm(e),e.yLa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(45),s=i(40),T(u,r.Ze),u.prototype.O$=function(t){var e=this.rJ,i=this.aQa;switch(t){case s.wv.MR:return e;case s.wv.kJa:return e&&!i;case s.wv.gib:return!1}},it.Object.defineProperties(u.prototype,{rJ:{configurable:!0,enumerable:!0,get:function(){return!0}},aQa:{configurable:!0,enumerable:!0,get:function(){return!1}}}),i=u,t.__decorate([o.config(o.dd,"usesMsl")],i.prototype,"rJ",null),t.__decorate([o.config(o.dd,"allowRequestsWithoutMsl")],i.prototype,"aQa",null),i=t.__decorate([n.R(),t.__param(0,n.l(a.Wl))],i),e.yLa=i},function(t,e,i){var n,r;_esm(e),e.Gl=void 0,t=i(0),n=i(530),r=i(1231),e.Gl=new t.rd(function(t){t(n.NEa).to(r.MEa)})},function(t,e,i){var n,r,a,o,s,u,c,h;function f(t,e,i,n,r){this.IG=t,this.Zp=e,this.config=i,this.UN=n,this.Fd=r}_esm(e),e.MEa=void 0,t=i(1),n=i(0),r=i(122),a=i(1232),o=i(1233),s=i(69),u=i(13),c=i(138),i=i(120),f.prototype.create=function(t,e,i){return t?new a.OEa(this.config(),this.Zp,this.Fd,e,i,this.IG,this.UN()):new o.FEa(this.config,this.Fd,e,i)},h=f,h=t.__decorate([n.R(),t.__param(0,n.l(r.X_)),t.__param(1,n.l(s.sv)),t.__param(2,n.l(u.Zc)),t.__param(3,n.l(c.uR)),t.__param(4,n.l(i.sF))],h),e.MEa=h},function(t,e,i){var n,s,r,a,o,u,c,h,f;function l(t,e,i,n,r,a,o){return(n=c.oQ.call(this,n,r)||this).config=t,n.Zp=e,n.Fd=i,n.IG=a,n.wra=o,n.log=s.Ih(n.j,"LicenseBroker"),n.xW=new Set,n.vra=!1,n}_esm(e),e.OEa=void 0,t=i(1),n=i(3),s=i(8),r=i(325),a=i(4),o=i(0),u=i(290),c=i(546),h=i(57),f=i(15),T(l,c.oQ),l.prototype.l9=function(){var e=this,i=this.j.ha;this.xW.has(i.J)||(this.xW.add(i.J),this.yrb(i).catch(function(){return e.s7a(i)}).then(function(){return e.sQa(i)}).catch(function(t){return e.rQa(i,t)}).catch(function(t){return e.Xd(t.code,t,t.Kd)}))},l.prototype.yrb=function(r){var a=this;return Promise.all([this.Fd.fXa(r.J),this.IG()]).then(function(t){var i,n;return t=nt(t),i=t.next().value,n=t.next().value,i.H$.then(function(t){var e;return"manifest"===i.source&&(e=a.gYa(r),n.o3a(e,t)),t}).then(function(t){return a.k3(t,r,i.source)})}).catch(function(t){throw a.log.warn("eme not in cache",t),t})},l.prototype.k3=function(t,e,i){return this.h6a(t,e),e.kG=i,this.wra.setMediaKeys(t.mediaKeys),t.dia()},l.prototype.KDb=function(t){var e={};return t.forEach(function(t){e[r.RUa(t.RW)]=t.time.da(a.ja)}),e},l.prototype.h6a=function(t,e){var i=this;(e.nf=t).EXb(function(t){i.Xd(t.code,t,t.Kd)})},l.prototype.sQa=function(t){this.log.info("Successfully applied license for xid: "+t.ba+", viewable: "+t.J+", segment: "+t.xa),this.Hz(t),this.vra?this.r5(t.J):this.setMediaKeys(t)},l.prototype.rQa=function(t,e){throw this.Hz(t),e},l.prototype.Hz=function(t){t.nf&&t.Hz(this.KDb(t.nf.pd))},l.prototype.gYa=function(t){var e;return{type:this.b6(!1),initData:t.Lu.map(function(t){return s.Ar(t)}),context:{X:this.Vb.X,Iu:null===(e=t.xg.value)||void 0===e?void 0:e.Iu},Si:{J:t.J,ba:t.ba,Ti:t.Ti,rm:t.rm,lk:t.oa.lk}}},l.prototype.s7a=function(i){var n=this;return this.IG().then(function(t){var e=n.gYa(i);return n.xW.add(i.J),t.Hg(e,n.wra).then(function(t){return n.h6a(t,i),n.j.fireEvent(f.ca.KN,{J:i.J}),t.dia()})})},l.prototype.setMediaKeys=function(t){var e=this;if(this.vra)this.log.trace("Media Keys already set");else try{this.Vb.X?this.Vb.X.setMediaKeys(t.nf.mediaKeys).then(function(){e.r5(t.J),e.vra=!0}).catch(function(t){t=e.nZa(t),e.Xd(n.M.fK,t,t.pf)}):this.r5(t.J)}catch(t){this.Xd(n.M.fK,t,void 0)}},l.prototype.FA=function(){var e=this,i=this.j.ha.nf;return i?this.IG().then(function(t){return t.release(i,e.wra).then(function(t){return e.log.trace("Successfully released the license"),t.close()}).catch(function(t){e.log.error("Unable to release the license",t)})}):Promise.resolve()},l.prototype.r7a=function(e){var i=this;return e=void 0===e?this.j:e,this.s7a(e).then(function(){return i.sQa(e)}).catch(function(t){return i.rQa(e,t)})},l.prototype.b6=function(t){return this.Zp.iV||t?h.Xh.eo:h.Xh.rp},it.Object.defineProperties(l.prototype,{FD:{configurable:!0,enumerable:!0,get:function(){return"encrypted"}},xm:{configurable:!0,enumerable:!0,get:function(){return this.config.xm}}}),i=l,t.__decorate([u.uW],i.prototype,"FD",null),i=t.__decorate([o.R()],i),e.OEa=i},function(t,e,s){var u,c,h,r,a,i,n,o,f,l,p;function d(t,e,i,n){return(i=f.oQ.call(this,i,n)||this).config=t,i.Fd=e,i.log=c.Ih(i.j,"LegacyLicenseBroker"),i.xm=i.config().xm,i.config().m6a?r.q0a()?i.Kaa=!0:i.log.error("Promise based eme requested but platform does not support it",{browserua:a.xB}):i.Kaa=!1,i}_esm(e),e.FEa=void 0,t=s(1),u=s(3),c=s(8),h=s(155),r=s(50),a=s(11),i=s(0),n=s(290),o=s(34),f=s(546),l=s(57),T(d,f.oQ),d.prototype.kTa=function(t){var e=void 0===e?this.j:e;return new this.fs.LJ(t,function(t){return e.e4.aH(t)},function(t){return e.e4.release(t)},{qf:!1,Yk:!1})},d.prototype.zG=function(e){var t,i,n,r,a,o=this;return e=void 0===e?this.j:e,t=s(51).lj,this.fs.LJ||this.Xd(u.M.XJ,u.L.ofb),i=c.Ih(e,"Eme"),n=this.kTa(i),a=(r=c.ka.get(h.TR)).i4(e.oc.value.streams),r=r.l4(e.xg.value.streams),this.fs.NJ(i,function(t){return e.Dd(t)},{qf:!1,Yk:!1,za:{getTime:t},Nl:n,UX:!!this.Kaa,X:this.Vb.X,bB:this.config().gVa,onerror:function(t,e,i){return o.Xd(t,e,i)},lsa:function(){},dI:!0,csb:a,u2b:r,T6:this.config().T6})},d.prototype.setMediaKeys=function(e){var n=this;return this.Kaa?new Promise(function(t,i){if(!n.Vb.X)return Promise.resolve();n.Vb.X.setMediaKeys(e).then(function(){t()}).catch(function(t){var e=n.nZa(t);i({$:!1,code:u.M.fK,Cc:e.na,Kd:e.pf,ub:e.ub,message:"Set media keys is a failure",cause:t})})}):Promise.resolve()},d.prototype.FVa=function(t){return{code:t.code,subCode:t.Cc,extCode:t.Kd,edgeCode:t.un,message:t.message,errorDetails:t.ub,errorData:t.DM,state:t.state}},d.prototype.Xva=function(t,e,i){var n,r,a;function o(){r.rI().catch(function(t){n.log.error("Unable to set the license",n.FVa(t)),t.cause&&t.cause.ub&&(t.ub=t.ub?t.ub+t.cause.ub:t.cause.ub),n.Xd(t.code,t,t.Kd)})}return n=this,i=void 0===i?this.j:i,r=i.nf,this.log.info("Setting the license"),a=e?function(){return Promise.resolve()}:function(){return r.Hg(n.b6(!1),t)},(e?function(){return r.k3(n.Vb.X)}:function(){return r.create(n.xm).then(function(){return Promise.resolve()})})().then(function(){return n.config().S8a?n.setMediaKeys(r.mediaKeys):Promise.resolve()}).then(a).then(function(){return n.config().S8a?Promise.resolve():n.setMediaKeys(r.mediaKeys)}).then(function(){n.log.info("license set"),n.r5(i.J),n.Vb.Sbb.then(function(){n.config().rD&&(e||n.config().iV)&&(n.m7a=pt.setTimeout(o,n.config().rD))})}).catch(function(t){if(n.log.error("Unable to set the license",n.FVa(t)),t.cause&&t.cause.ub&&(t.ub=t.ub?t.ub+t.cause.ub:t.cause.ub),e)throw Error(t&&t.message?t.message:"failed to set license");n.Xd(t.code,t,t.Kd)})},d.prototype.FA=function(){return Promise.resolve()},d.prototype.l9=function(){var n;function e(){var e;n.j.nf=n.zG(),e=[],n.j.Lu.forEach(function(t){e.push(c.Ar(t))}),n.Xva(e)}(n=this).xW||(this.xW=!0,this.fs.NJ?this.j.Lu?this.config().RU&&this.config().Sw?this.Fd.fXa(this.j.J).then(function(i){return(n.j.nf=i).lya.then(function(){var e=[];return n.j.Lu.forEach(function(t){e.push(c.Ar(t))}),n.Xva(e,!0).then(function(){var t;i.x9b?n.Xd(u.M.rfb):(t=c.Ih(n.j,"Eme"),i.Yab({log:t,Nn:function(t){return n.j.Dd(t)}},{Nl:n.kTa(t),onerror:function(t,e,i){return n.Xd(t,e,i)}}),n.j.Hz(i.pd||{}),n.j.kG="videopreparer")})})}).catch(function(t){n.log.warn("eme not in cache",t),e()}):e():(this.log.error("Missing the PSSH on the video track, closing the player"),this.Xd(u.M.Uib)):this.Xd(u.M.XJ,u.L.pfb))},d.prototype.r7a=function(t){var e;return(t=void 0===t?this.j:t).nf=this.zG(),e=[],t.Lu.forEach(function(t){e.push(c.Ar(t))}),this.Xva(e,!1,t)},d.prototype.b6=function(t){return this.config().iV||t?l.Xh.eo:l.Xh.rp},it.Object.defineProperties(d.prototype,{fs:{configurable:!0,enumerable:!0,get:function(){return c.ka.get(o.yB)}},FD:{configurable:!0,enumerable:!0,get:function(){return this.Kaa?"encrypted":this.Vb.ZBa+"needkey"}}}),p=d,t.__decorate([n.uW],p.prototype,"fs",null),t.__decorate([n.uW],p.prototype,"FD",null),p=t.__decorate([i.R()],p),e.FEa=p},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g;_esm(e),e.Zg=void 0,t=i(0),n=i(303),r=i(1235),a=i(304),o=i(1240),s=i(121),u=i(1242),c=i(1243),h=i(161),f=i(547),l=i(1244),p=i(548),d=i(1246),b=i(81),m=i(549),g=i(1247),e.Zg=new t.rd(function(t){t(n.iea).to(r.WIa).aa(),t(a.kea).to(o.hJa).aa(),t(s.hK).to(u.UIa).aa(),t(h.hF).to(c.SIa).aa(),t(f.bJa).to(l.aJa).aa(),t(p.fJa).wf(function(t){var e=t.$a;return function(t){return new d.gJa(t,e.get(b.Gx),e.get(h.hF))}}),t(m.JEa).wf(function(t){var n=t.$a;return function(t,e,i){return new g.KEa(t,e,i,n.get(h.hF),n.get(s.hK))}})})},function(t,e,i){var n,r,a,o,s,u,c,h,f;function l(t,e,i,n,r,a,o){this.Wf=t,this.Rla=e,this.Vi=i,this.rxa=n,this.QSb=r,this.SSb=a,this.RSb=o}_esm(e),e.WIa=void 0,t=i(1),n=i(0),r=i(1236),a=i(7),o=i(161),s=i(337),u=i(547),c=i(345),h=i(548),i=i(304),l.prototype.create=function(t){return new r.XIa(t,this.Wf,this.Rla,this.Vi,this.rxa,this.QSb,this.SSb,this.RSb)},f=l,f=t.__decorate([n.R(),t.__param(0,n.l(a.qb)),t.__param(1,n.l(s.JQ)),t.__param(2,n.l(o.hF)),t.__param(3,n.l(c.wLa)),t.__param(4,n.l(u.bJa)),t.__param(5,n.l(h.fJa)),t.__param(6,n.l(i.kea))],f),e.WIa=f},function(t,e,i){var n,u,c;function r(t,e,i,n,r,a,o,s){this.rxa=r,this.iya=s,this.fV=!1,n.Jaa&&(t=(new c.YIa).o0b(t)),this.fb=o(t),this.Ek=new u.iJa(this.fb),this.Ek.L8a(this.fb.ha.W),this.log=e.ib("PlaygraphManager"),this.Ub=i.create(),this.zu=a.create(this.fb,this.Ek,this.log,this.Ub),this.nYb()}_esm(e),e.XIa=void 0,n=i(15),u=i(1237),c=i(1239),r.prototype.PGb=function(){return this.fb.L9},r.prototype.Q5=function(){return this.fb.ha},r.prototype.tXa=function(){return this.fb.oh},r.prototype.eH=function(){return this.fb.fl},r.prototype.wi=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.fb.wi.apply(this.fb,G(e))},r.prototype.Xub=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];this.fb.HQa(e)},r.prototype.KZ=function(t){this.fb.fl=t},r.prototype.Ai=function(t,e){this.fb.Ai(t,e)},r.prototype.poa=function(t,e,i,n){var r;if(i=void 0===i?{}:i,n=void 0===n||n,t!==this.fb.oh)throw Error("Invalid currentSegmentId");if(-1===Object.keys(null!==(r=this.eH().qa[t].next)&&void 0!==r?r:{}).indexOf(e))throw Error("Invalid nextSegmentId");return this.log.info("Transition initiated: "+t+" -> "+e),this.k9a(),null!==(t=i.Jm)&&void 0!==t&&t.isUIAutoPlay,this.zu.qoa(e,i,n)},r.prototype.isReady=function(){return this.zu.isReady()},r.prototype.addListener=function(t,e,i){this.Ub.addListener(t,e,i)},r.prototype.removeListener=function(t,e){this.Ub.removeListener(t,e)},r.prototype.Dn=function(){return this.zu.Dn()},r.prototype.Ab=function(){return this.zu.cH()},r.prototype.uyb=function(t,e,i){var n;return t=void 0===t?this.eH().Yd:t,e=void 0===e?{}:e,n=this.iya.wTa(this),this.tTb(null!=t?t:this.eH().Yd,e,i),n},r.prototype.Tqb=function(t){var e;return this.log.info("Adding segment - movieId: "+t.J+", startPts: "+t.Z+", logicalEnd: "+t.rj),e=Object.assign({},t.Fb,t.Z?{Z:t.Z}:{},t.rj?{rj:t.rj}:{}),this.$9a(t.J,e,t.oa),t=this.zu.QPa(t),this.k9a(),t},r.prototype.transition=function(t){var e=this.fb.DV(this.fb.oh);return e?this.poa(this.fb.oh,e,t):(this.log.error("Next segment is not defined"),Promise.reject())},r.prototype.close=function(t){return this.zu.close(t)},r.prototype.tTb=function(t,e,i){var n;void 0===t&&(t=null===(n=this.eH())||void 0===n?void 0:n.Yd),(e||i)&&this.$9a(this.eH().qa[t].W,null!=e?e:{},i),this.zu.jI(t)},r.prototype.$9a=function(t,e,i){i&&this.Ek.AL(t,i),this.Ek.Iqb(t,e)},r.prototype.nYb=function(){var e=this;this.fb.NZb(function(){e.Ek.Nw(),e.zu.Nw()}),this.fb.OZb(function(t){e.zu.Ksa(t)}),this.fb.MZb(function(t){e.zu.WH(t)}),this.addListener(n.iF.CY,function(){return e.$Qb()}),this.addListener(n.Da.T_a,function(t){return e.NQb(t)})},r.prototype.k9a=function(){var e=this;this.fV||(this.Ab().Mha(n.ca.DI,function(t){return e.JD(t)}),this.fV=!0)},r.prototype.NQb=function(t){var e=this;this.zu.xab(t).catch(function(){return e.Ub.Fc(n.Da.error,t.xZ())})},r.prototype.$Qb=function(){var t=this.Ab().getError();t?this.Ub.Fc(n.Da.OL,t):(this.Ub.Fc(n.Da.u3),this.Ub.Fc(n.Da.gm),this.Ub.Fc(n.Da.ev),this.Ub.Fc(n.Da.Rl),this.Ub.Fc(n.Da.DZ),this.Ub.Fc(n.Da.OL))},r.prototype.JD=function(t){var e,i,n=t.metrics;n&&(i=(e=this.Ab()).um(t.position.segmentId),n=e.um(n.srcsegment),this.rxa.YTb(t,i,n,!!e.JYa().Fl))},e.XIa=r},function(t,e,i){var r;function n(t){this.Ca=t,this.WP={},this.Nw()}_esm(e),e.iJa=void 0,r=i(1238),n.prototype.Nw=function(){var e=this;Object.values(this.Ca.fl.qa).forEach(function(t){t=t.W,e.WP[t]||e.N_a(t)}),this.Caa()},n.prototype.lN=function(t){return this.WP[t]},n.prototype.GXb=function(t){this.FV(t).state=r.Yx.DCa,this.Caa()},n.prototype.FXb=function(t,e){(t=this.FV(t)).state=r.Yx.Error,t.error=e,t.P7a(!1),this.Caa()},n.prototype.L8a=function(t){(t=this.FV(t)).state=r.Yx.gfb,t.P7a(!0),this.Caa()},n.prototype.Iqb=function(t,e){this.FV(t).Fb=e},n.prototype.AL=function(t,e){this.FV(t).oa=e},n.prototype.FV=function(t){var e;return null!==(e=this.lN(t))&&void 0!==e?e:this.N_a(t)},n.prototype.N_a=function(t){var n=void 0,e=new Promise(function(e,i){n=function(t){(t?e:i)()}});return this.WP[t]={state:r.Yx.JGa,zUb:e,P7a:n}},n.prototype.Caa=function(){for(var t,e=this.Ca.oh;(e=this.Ca.DV(e))&&(t=this.oq(e),this.WP[t].state!==r.Yx.Error)&&this.WP[t].state!==r.Yx.DCa&&this.WP[t].state!==r.Yx.JGa;);},n.prototype.oq=function(t){return this.Ca.fl.qa[t].W},e.iJa=n},function(t,e){_esm(e),e.Yx=void 0,(t=e.Yx||(e.Yx={}))[t.JGa=0]="None",t[t.DCa=1]="Fetching",t[t.gfb=2]="Done",t[t.Error=3]="Error"},function(t,e,i){var r;function n(){}_esm(e),e.YIa=void 0,r=i(67),n.prototype.o0b=function(i){var n;return this.fLb(i.qa)?(n=(new r.AB).JI(i.Yd),Object.entries(i.qa).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,t===i.Yd?n.Nk(t,Object.assign(Object.assign({},e),{next:void 0,Ob:void 0,Qe:void 0})):n.Nk(t,e)}),n.gi()):i},n.prototype.fLb=function(t){return t=Object.values(t).map(function(t){return t.W}),1===new Set(t).size},e.YIa=n},function(t,e,i){var n,r,a,o;function s(t,e){this.Aa=t,this.eMb=e}_esm(e),e.hJa=void 0,t=i(1),n=i(0),r=i(18),a=i(549),s.prototype.create=function(t){return new(i(305).t1)(this.Aa.Yb(),t)},s.prototype.wTa=function(t){return new(i(1241).WLa)(this.Aa.Yb(),t,this.eMb)},o=s,o=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(a.JEa))],o),e.hJa=o},function(t,e,i){var r;function n(t,e,i){var n=r.t1.call(this,t,e)||this;return n.seek=function(t){return n.Ab().seek(t)},n.addEpisode=function(t){return n.sqa.sqb(t)},n.playNextEpisode=function(t){return t=void 0===t?{}:t,n.sqa.zSb(t)},n.watchCredits=function(t){return n.sqa.J2b(t)},n.playSegment=function(t){return n.Ab().D5a(t)},n.queueSegment=function(t){return n.Ab().w6a(t)},n.updateNextSegmentWeights=function(t,e){return n.Ab().Ai(t,e)},n.setNextSegment=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];e=e.map(function(t){return{xa:t.segmentId,dO:t.nextSegmentId}}),n.Zg.wi.apply(n.Zg,G(e))},n.clearNextSegment=function(t){for(var e=[],i=0;i<arguments.length;++i)e[+i]=arguments[i];return n.Zg.Xub.apply(n.Zg,G(e))},n.goToNextSegment=function(t,e){return n.Zg.poa(t,e)},n.getPlaying=function(){return n.isPlaying()},n.getPaused=function(){return n.isPaused()},n.getMuted=function(){return n.isMuted()},n.getEnded=function(){return n.isEnded()},n.getTimedTextVisibility=function(){return n.isTimedTextVisible()},n.isTimedTextVisible=function(){return!!n.Ab().LV().visibility},n.setTimedTextVisibility=function(t){return n.setTimedTextVisible(t)},n.setTimedTextSize=function(t){return n.Ab().oP({size:t})},n.setTimedTextBounds=function(t){return n.Ab().oP({bounds:t})},n.setTimedTextMargins=function(t){return n.Ab().oP({margins:t})},n.setTimedTextVisible=function(t){return n.Ab().oP({visibility:t})},n.getCongestionInfo=function(t){t&&t({success:!1,name:null,isCongested:null})},n.sqa=i(t,e,n.log),n}_esm(e),e.WLa=void 0,T(n,(r=i(305)).t1),e.WLa=n},function(t,e,i){var n,r,o;function a(){}_esm(e),e.UIa=void 0,t=i(1),n=i(121),r=i(0),o=i(67),a.prototype.pyb=function(t){for(var i,n,r,e=[],a=0;a<arguments.length;++a)e[+a]=arguments[a];if(i=this,0===e.length)throw Error("Empty playgraph");return n=(new o.AB).JI(this.Lr(e[0])),e.reverse().forEach(function(t){var e=i.Lr(t);n.Nk(e,Object.assign({W:t,Jb:0,Ob:1/0},r?{Qe:r}:{})),r=e}),n.gi()},a.prototype.Lr=function(t,e){return t+":"+(e=void 0===e?n.jF.bda:e)},a.prototype.xrb=function(t,e){var i,n,r,a;return void 0===r&&(r=null!==(i=e.id)&&void 0!==i?i:this.Lr(e.J)),i=this.dYa(t),(a=new o.AB(t)).Nk(r,{W:e.J,Jb:null!==(n=e.Z)&&void 0!==n?n:0,Ob:1/0}),t=t.qa[i],e={},a.Nk(i,Object.assign({},t,{Qe:r,next:Object.assign({},t.next||{},(e[r]={},e))})),a.gi()},a.prototype.dYa=function(t){for(var e=t.Yd,i=e;i=t.qa[i].Qe;)e=i;return e},i=t.__decorate([r.R()],a),e.UIa=i},function(t,e,i){var n,r,a,o,s;function u(t){return r.Ze.call(this,t,"PlaygraphConfigImpl")||this}_esm(e),e.SIa=void 0,t=i(1),n=i(0),r=i(46),a=i(37),o=i(45),s=i(4),T(u,r.Ze),it.Object.defineProperties(u.prototype,{zTb:{configurable:!0,enumerable:!0,get:function(){return 2}},yTb:{configurable:!0,enumerable:!0,get:function(){return s.H8(3)}},bya:{configurable:!0,enumerable:!0,get:function(){return!1}},Jaa:{configurable:!0,enumerable:!0,get:function(){return!1}},vbb:{configurable:!0,enumerable:!0,get:function(){return!1}},yWa:{configurable:!0,enumerable:!0,get:function(){return!1}},N9:{configurable:!0,enumerable:!0,get:function(){return!0}}}),i=u,t.__decorate([o.config(o.ZA,"prepareSegmentsUpfront")],i.prototype,"zTb",null),t.__decorate([o.config(o.$k,"prepareSegmentsDuration")],i.prototype,"yTb",null),t.__decorate([o.config(o.dd,"usePlaygraphForPostPlay")],i.prototype,"bya",null),t.__decorate([o.config(o.dd,"usePlaygraphForSkipSegment")],i.prototype,"Jaa",null),t.__decorate([o.config(o.dd,"useSinglePlayerPlayback")],i.prototype,"vbb",null),t.__decorate([o.config(o.dd,"forcePlaygraphTrace")],i.prototype,"yWa",null),t.__decorate([o.config(o.dd,"postPlayDefaultNextEpisode")],i.prototype,"N9",null),i=t.__decorate([n.R(),t.__param(0,n.l(a.Wl))],i),e.SIa=i},function(t,e,i){var n,r,a,o,s,u,c,h,f,l;function p(t,e,i,n,r,a,o){this.Aa=t,this.UWb=i,this.Vi=r,this.Em=o,this.TWb=e.PC(!1,"6.0033.414.911",t.id,a,n)}_esm(e),e.aJa=void 0,t=i(1),n=i(0),r=i(18),a=i(161),o=i(1245),s=i(342),u=i(211),c=i(13),h=i(550),f=i(39),i=i(121),p.prototype.create=function(t,e,i,n){var r=this.UWb.gyb(t,this.TWb,e),a=t.cya;return i.debug("Using "+(a?"single":"multiple")+" player playback strategy"),a?new o.BKa(this.Vi,t,e,i,r,n,this.Em):new h.WE(t,e,r,n,this.Em)},l=p,l=t.__decorate([n.R(),t.__param(0,n.l(r.jd)),t.__param(1,n.l(s.nKa)),t.__param(2,n.l(u.Eea)),t.__param(3,n.l(c.Zc)),t.__param(4,n.l(a.hF)),t.__param(5,n.l(f.KR)),t.__param(6,n.l(i.hK))],l),e.aJa=l},function(t,e,i){var l,u,n,c,p;function r(t,e,i,n,r,a,o){var s=c.WE.call(this,e,i,r,a,o)||this;return s.Vi=t,s.ta=n,s.fV=!1,s.Mla=new Map,s.QQb=function(){s.cH().Mha(u.ca.DI,function(t){s.Ub.Fc(u.iF.CY),s.fb.oh=t.position.segmentId})},s.RJb(),a.addListener(u.Da.loaded,s.QQb),s}_esm(e),e.BKa=void 0,l=i(67),u=i(15),n=i(3),c=i(550),p=i(121),T(r,c.WE),r.prototype.QPa=function(t){var e,r,a=this,i=this.fb.fl,n=this.Em.Lr(t.J,"ident"),o=this.Em.Lr(t.J,"main"),s=this.Em.Lr(t.J,"credits"),u=isFinite(t.rj),c=isFinite(t.Z)&&t.J!==i.qa[i.Yd].W,h={},f=new l.AB(i).Nk(o,Object.assign({W:t.J,Jb:c&&t.Z||0,Ob:null!==(e=t.rj)&&void 0!==e?e:1/0},u?{next:(h[s]={},h),Qe:s}:{}));return c&&(e={},f.Nk(n,{W:t.J,Jb:0,Ob:t.Z,next:(e[o]={},e),Qe:o})),u&&f.Nk(s,{W:t.J,Jb:t.rj,Ob:1/0}),this.fb.$D(o)||(t=i.qa[this.Em.dYa(i)].W,r=this.Em.Lr(t,p.jF.Zza),[this.Em.Lr(t,p.jF.bda),r].filter(function(t){return a.fb.$D(t)}).forEach(function(t){var e=a.fb.ue(t),i=t===r||a.Vi.N9,n={};f.Nk(t,Object.assign({},e,{next:Object.assign({},e.next,(n[o]={},n))},i?{Qe:o}:{}))})),this.fb.fl=f.gi(),this.jI(o)},r.prototype.Nw=function(){this.isReady()&&this.cH().Nw()},r.prototype.Ksa=function(){},r.prototype.WH=function(t){this.cH().WH(t)},r.prototype.qoa=function(t,e,i){return e=void 0===e?{}:e,this.ta.debug("goToSegment "+t),this.cH().NV(t,e,i)},r.prototype.jI=function(t){return t===this.SWb?null:(this.SWb=t,this.fV?this.Ek.lN(this.fb.ue(t).W).zUb:(this.fV=!0,c.WE.prototype.jI.call(this,t)))},r.prototype.xab=function(t){return t.errorCode&&this.Mla.has(t.errorCode)?this.Mla.get(t.errorCode)(t):Promise.reject(Error("Error "+t.errorCode+" isn't recoverable"))},r.prototype.RJb=function(){var e=this;this.Mla.set(n.M.kHa,function(){var t;return null!==(t=null===(t=c.WE.prototype.jI.call(e,e.fb.oh))||void 0===t?void 0:t.then(function(){var t;c.WE.prototype.qoa.call(e,e.fb.oh,null!==(t=null===(t=e.Ek.lN(e.fb.ha.W))||void 0===t?void 0:t.Fb)&&void 0!==t?t:{})}))&&void 0!==t?t:Promise.reject(Error("Couldn't prepare segment for transition"))})},e.BKa=r},function(t,e,i){var n,a;function r(t,e,i){this.Gz=e,this.Vi=i,this.n2={},this.Rab=[],this.z9a=[],this.G3a=[],this.iia=new WeakMap,this.reset(t)}_esm(e),e.gJa=void 0,n=i(67),a=i(67),r.prototype.reset=function(t){var e=1<Object.keys(t.qa).length&&1===new Set(Object.values(t.qa).map(function(t){return t.W})).size;this.Rpb=this.Vi.vbb||e,this.Y8a(t),this.oh=t.Yd,this.yob=this.Gz.Wy(),this.twa=new Map},r.prototype.k6=function(t){return this.cya?this.fl:(this.iia.has(t)||this.iia.set(t,n.NI(t.J,t.xa)),this.iia.get(t))},r.prototype.Y8a=function(t){this.zob=t,this.n2={},t=Object.keys(t.qa),this.HQa(t),this.XPb()},r.prototype.wi=function(t){for(var i,e=[],n=0;n<arguments.length;++n)e[+n]=arguments[n];i=this,e.filter(function(t){return i.$D(t.xa)}).filter(function(t){return!(t=t.dO)||i.$D(t)}).forEach(function(t){var e=t.xa;i.n2[e]=i.b4a(t.dO),i.OPb(e)})},r.prototype.HQa=function(t){var e=this;t.filter(function(t){return e.$D(t)}).forEach(function(t){e.n2[t]=e.b4a(e.ue(t).Qe)})},r.prototype.Ai=function(t,i){var e,n,r=this.ue(t);r&&r.next&&(e=new a.AB(this.fl),n=Object.keys(r.next).reduce(function(t,e){return t[e]=void 0===i[e]?r.next[e]:Object.assign({},r.next[e],{weight:i[e]}),t},{}),n=Object.assign({},r,{next:n}),e.Nk(t,n),this.fl=e.gi())},r.prototype.$D=function(t,e){return t in(e=void 0===e?this.fl.qa:e)},r.prototype.DV=function(t){return this.n2[t]},r.prototype.ue=function(t){return this.fl.qa[t]},r.prototype.oHb=function(t){return this.twa.has(t)?this.twa.get(t):(t=this.ue(t),isFinite(t.Ob)?t.Ob:void 0)},r.prototype.o1b=function(t,e){this.twa.set(t,e),this.TPb(t)},r.prototype.NZb=function(t){this.Rab.push(t)},r.prototype.OZb=function(t){this.z9a.push(t)},r.prototype.MZb=function(t){this.G3a.push(t)},r.prototype.XPb=function(){var e=this;this.Rab.forEach(function(t){return t(e.fl)})},r.prototype.OPb=function(e){this.G3a.forEach(function(t){return t(e)})},r.prototype.TPb=function(e){this.z9a.forEach(function(t){return t(e)})},r.prototype.b4a=function(t){return null===t?void 0:t},it.Object.defineProperties(r.prototype,{L9:{configurable:!0,enumerable:!0,get:function(){return this.yob}},cya:{configurable:!0,enumerable:!0,get:function(){return this.Rpb}},fl:{configurable:!0,enumerable:!0,get:function(){return this.zob},set:function(t){if(this.oh&&!this.$D(this.oh,t.qa))throw Error("Provided playgraphMap does not contain the current segmentId "+this.oh);this.Y8a(t)}},oh:{configurable:!0,enumerable:!0,get:function(){return this.Jlb},set:function(t){if(!this.$D(t))throw Error("Provided currentSegmentId "+t+" does not exist in the current playgraph");this.Jlb=t}},ha:{configurable:!0,enumerable:!0,get:function(){return this.ue(this.oh)}}}),e.gJa=r},function(t,e,i){var a,n;function r(t,e,i,n,r){this.vk=t,this.Zg=e,this.log=i,this.Vi=n,this.Em=r,this.F9=new a.fea}_esm(e),e.KEa=void 0,a=i(551),n=i(121),r.prototype.sqb=function(t){var e,i,n,r;return this.log.info("Next episode added",t),n=this.F9.ara(t.playbackParams),r=Math.max(0,null!==(i=null!==(r=null!==(e=t.startPts)&&void 0!==e?e:t.nextStartPts)&&void 0!==r?r:n.Z)&&void 0!==i?i:0),e=null!==(i=null!==(i=t.endPts)&&void 0!==i?i:t.currentEndPts)&&void 0!==i?i:n.rj,this.Zg.Tqb({J:t.movieId,Z:r,rj:e,Fb:n,oa:t.manifest,vk:this.vk})},r.prototype.zSb=function(t){var e,i,n,r,a,o;return t=this.F9.ara(t),this.log.info("Playing the next episode",t),n=this.Zg.tXa(),r=this.Zg.eH(),a=r.qa[n],o=Object.keys(null!==(e=a.next)&&void 0!==e?e:{}).find(function(t){return a.W!==r.qa[t].W}),e=!this.Vi.N9||!(null!==(i=t.Jm)&&void 0!==i&&i.isUIAutoPlay),o?this.Zg.poa(n,o,t,e):Promise.reject(Error("Next episode not found"))},r.prototype.J2b=function(t){var e,i=this.Em.Lr(t,n.jF.bda);t=this.Em.Lr(t,n.jF.Zza),e=this.Zg.fb,this.Vi.N9&&e.oh!==t&&e.$D(t)&&e.DV(i)!==t&&this.Zg.wi({xa:i,dO:t})},e.KEa=r},function(t,e,i){var n,r;_esm(e),e.KQa=void 0,t=i(0),n=i(1249),r=i(31),e.KQa=new t.rd(function(t){t(r.fh).to(n.gza).aa()})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b;function m(t,e,i,n,r,a){var o=this;this.ll=t,this.config=i,this.Xo=n,this.debug=r,this.Aa=a,this.aab=[],this.pd={},this.log=e.ib("loadAsync"),this.nNb=p.LCa(function(e){o.gVb=!0,o.startTime=o.Aa.Yb().da(f.ja),o.load(o.aab).then(function(){o.endTime=o.Aa.Yb().da(f.ja),e(b.Ye)}).catch(function(t){o.endTime=o.Aa.Yb().da(f.ja),e(t)})})}_esm(e),e.gza=void 0,t=i(1),n=i(71),r=i(3),a=i(1250),o=i(62),s=i(0),u=i(7),c=i(13),h=i(64),f=i(4),l=i(96),p=i(552),d=i(18),b=i(12),m.prototype.LN=function(t){this.nNb(t)},m.prototype.register=function(t,e){this.debug.assert(!this.gVb),this.aab.push({JMb:this.Qtb(e),errorCode:t})},m.prototype.Dd=function(t){this.debug.assert(void 0===this.pd[t]),this.pd[t]=this.Aa.Yb().da(f.ja)},m.prototype.load=function(t){var i=this;return a.f6a(t).then(function(t){return i.ll.mark(o.co.Rj.ycb),t.reduce(function(t,e){return t.then(function(){return i.GMb(e)})},Promise.resolve()).then(function(){i.ll.mark(o.co.Rj.wcb)})})},m.prototype.GMb=function(e){var i=this,t=e.JMb;return this.Xo.Jq(f.Nc(this.config().Qrb),t()).catch(function(t){if(i.log.error("Failed to load component "+e.errorCode,t),i.ll.mark(o.co.Rj.xcb),t instanceof h.hr)throw{na:r.L.vcb,errorCode:e.errorCode};throw t.errorCode=t.errorCode||e.errorCode,t.na=t.na||r.L.ucb,t})},m.prototype.Qtb=function(t){return function(){return new Promise(function(e,i){t(function(t){t.$?e():i(t)})})}},i=m,i=t.__decorate([s.R(),t.__param(0,s.l(n.oF)),t.__param(1,s.l(u.qb)),t.__param(2,s.l(c.Zc)),t.__param(3,s.l(h.Rx)),t.__param(4,s.l(l.pv)),t.__param(5,s.l(d.jd))],i),e.gza=i},function(t,e,i){var r,a,o;_esm(e),e.f6a=void 0,r=i(3),a=[r.M.vgb,r.M.UDa,r.M.SDa,r.M.TDa,r.M.YDa,r.M.PDa,r.M.NDa,r.M.Hca,r.M.$Da,r.M.QDa,r.M.sgb,r.M.tgb,r.M.ODa,r.M.rB,r.M.KDa,r.M.MDa,r.M.VDa,r.M.WDa,r.M.XDa,r.M.wgb,r.M.ygb,r.M.Cgb,r.M.Agb,r.M.zgb,r.M.xgb,r.M.Bgb,r.M.Egb,r.M.RDa,r.M.Dgb,r.M.LDa],(i=o=o||{}).eib=function(t){for(var e,i={},n=0;n<t.length;n++){if(i[(e=t[n]).errorCode])return{errorCode:e.errorCode,na:r.L.scb};i[e.errorCode]=1}},i.fib=function(t){for(var e,i=0;i<t.length;i++)if(e=t[i],-1===a.indexOf(e.errorCode))return{errorCode:e.errorCode,na:r.L.tcb}},e.f6a=function(n){return new Promise(function(t,e){var i=o.fib(n);i&&e(i),(i=o.eib(n))&&e(i),t(n.sort(function(t,e){return a.indexOf(t.errorCode)-a.indexOf(e.errorCode)}))})}},function(t,e,i){var n,r;_esm(e),e.oa=void 0,t=i(0),n=i(1252),r=i(119),e.oa=new t.rd(function(t){t(r.RE).to(n.FFa).aa()})},function(t,e,i){var n,r,o,a,s,u,c,h,f;function l(t,e,i,n,r){this.hg=e,this.rNb=n,this.kY=new Map,this.log=t.ib("ManifestFetcher"),this.Eg=i.Eg,this.rtb=r().BBb}_esm(e),e.FFa=void 0,t=i(1),n=i(0),r=i(18),o=i(41),a=i(7),s=i(4),u=i(13),c=i(103),h=i(51),i=i(292),l.prototype.ZM=function(t,e,i){var n=this;return e=void 0===e||e,i&&this.Nqb(t.W,i),e&&this.uoa(t.W)?this.L5(t.W).catch(function(){return n.u7a(t,e)}):this.u7a(t,e)},l.prototype.uoa=function(t){return this.Eg.TV(t,"manifest")},l.prototype.aZ=function(t,e){var i=this;this.rtb&&this.Eg.setData(t,"manifest",e,function(){return i.gIb(t)})},l.prototype.L5=function(e){var i=this;return this.Eg.getData(e,"manifest").then(function(t){if(!t)throw Error("Manifest not found");if(t.$b.expiration<=h.W3())throw i.Eg.clearData(e,"manifest"),Error("Manifest has expired");return t})},l.prototype.gIb=function(t){var e;null!==(e=this.kY.get(t))&&void 0!==e&&e.forEach(function(t){return t()}),this.kY.delete(t)},l.prototype.Nqb=function(t,e){this.kY.has(t)||this.kY.set(t,[]),this.kY.get(t).push(e)},l.prototype.u7a=function(n,e){var r,t,a=this;return this.log.trace("Requesting a new manifest",n.W),r=this.hg.Yb().da(s.ja),t=this.rNb.og(this.log,n).then(function(t){var e,i;return t.kw&&(e=t.kw,i={H$:Promise.resolve(e),source:"manifest"},delete t.kw,a.Eg.setData(n.W,"ldl",i,function(){e.close().catch(function(t){a.log.info("Unable to cleanup LDL session.",t)})})),n.Tt===c.Vm.eF&&(t.uI=r,t.TO=a.hg.Yb().da(s.ja)),t}).catch(function(t){throw e&&a.aZ(n.W,void 0),a.log.error("Failed to fetch manifest",o.qd.wd(t)),t}),e&&this.aZ(n.W,t),t},f=l,f=t.__decorate([n.R(),t.__param(0,n.l(a.qb)),t.__param(1,n.l(r.jd)),t.__param(2,n.l(i.Mba)),t.__param(3,n.l(c.Pda)),t.__param(4,n.l(u.Zc))],f),e.FFa=f},function(t,e,i){var n,r,a,o;_esm(e),e.profile=e.lQa=void 0,n=i(1254),r=i(123),t=i(0),a=i(94),o=i(13),e.lQa=new t.rd(function(t){t(r.zJ).to(n.Hya).aa()}),e.profile=new t.rd(function(t){t(a.OR).nE(function(t){return(t=t.$a.get(o.Zc)())&&t.nw?"browsertest":"browser"})})},function(t,e,i){var n,r,a,o,s,u;function c(t,e,i,n){return(t=o.Ze.call(this,t,void 0===n?"AppInfoConfigImpl":n)||this).config=e,t.xaa=i,t}_esm(e),e.Hya=void 0,t=i(1),n=i(0),r=i(40),a=i(45),o=i(46),s=i(37),i=i(277),T(c,o.Ze),c.prototype.yGb=function(t){return this.xVa+(this.xaa.O$(t)?"/msl_v1":"")},c.prototype.JGb=function(t){return this.host+(this.xaa.O$(t)?"/msl":"")+"/playapi"},it.Object.defineProperties(c.prototype,{endpoint:{configurable:!0,enumerable:!0,get:function(){return this.host+"/api"}},xVa:{configurable:!0,enumerable:!0,get:function(){return this.host+"/nq"}},host:{configurable:!0,enumerable:!0,get:function(){var t;switch(this.config.CM){case r.Cx.akb:t="www.stage";break;case r.Cx.fLa:t="www-qa.test";break;case r.Cx.pEa:t="www-int.test";break;default:t="www"}return"https://"+t+".netflix.com"}},dRa:{configurable:!0,enumerable:!0,get:function(){return"pbo_manifests"}}}),u=c,t.__decorate([a.config(a.string,"apiEndpoint")],u.prototype,"endpoint",null),t.__decorate([a.config(a.string,"nqEndpoint")],u.prototype,"xVa",null),t.__decorate([a.config(a.string,"bindService")],u.prototype,"dRa",null),u=t.__decorate([n.R(),t.__param(0,n.l(s.Wl)),t.__param(1,n.l(r.Tm)),t.__param(2,n.l(i.r1)),t.__param(3,n.l(s.F_)),t.__param(3,n.optional())],u),e.Hya=u},function(t,e,i){var n,r;_esm(e),e.$1b=e.hkb=e.fkb=e.ekb=e.gkb=void 0,n=i(30),r=i(11),e.gkb=function(t,e,i){for(i=(i-t.length)/e.length;0<i--;)t+=e;return t},e.ekb=function(t,e,i){return i=n.Se(i)?i:"...",t.length<=e?t:t.substr(0,t.length-(t.length+i.length-e))+i},e.fkb=function(t,e){for(var i,n=1;n<arguments.length;++n);return i=r.slice.call(arguments,1),t.replace(/{(\d+)}/g,function(t,e){return void 0!==i[e]?i[e]:t})},e.hkb=function(t){for(var e=t.length,i=new Uint16Array(e),n=0;n<e;n++)i[n]=t.charCodeAt(n);return i.buffer},e.$1b=function(t){var i=new Uint8Array(t.length);return Array.prototype.forEach.call(t,function(t,e){i[e]=t.charCodeAt(0)}),i}},function(t,e,i){_esm(e),t=i(8),e=i(113),i=i(289),t.ka.get(e.ZJ).e$(i.Zca.Qdb,function(t){var e,i=t.level;(!pt._cad_global.config||i<=pt._cad_global.config.aNb)&&(t=t.maa(),e=pt.console,i<=1?e.error(t):i<=2?e.warn(t):e.log(t))})},function(t,s,e){var i,r,a,u,o;function c(t){var e,i;if(r.lM(t),a.Se(t)&&s.cEa.test(t)&&4===(e=t.split(".")).length){for(var n=0;n<e.length;n++)if((i=a.He(e[n]))<0||!o.Rz(i,0,255)||1!==e[n].length&&0===e[n].indexOf("0"))return;return t}}function h(t){var e=0;if(c(t)===t)return t=t.split("."),e+=a.He(t[0])<<24,e+=a.He(t[1])<<16,(e+=a.He(t[2])<<8)+a.He(t[3])}function f(t){var e;if(r.lM(t),a.Se(t)&&t.match(s.dEa)&&(-1!==(e=t.split(":"))[e.length-1].indexOf(".")&&(t=n(e[e.length-1]),e.pop(),e.push(t[0]),e.push(t[1]),t=e.join(":")),!(2<(t=t.split("::")).length||1===t.length&&8!==e.length)&&8===(t=(e=1<t.length?l(t):e).length))){for(;t--;)if(!o.Rz(parseInt(e[t],16),0,i.qFa))return;return e.join(":")}}function n(t){var e;return t=h(t)>>>0,(e=[]).push((t>>>16&65535).toString(16)),e.push((65535&t).toString(16)),e}function l(t){var e,i,n=t[0].split(":");if(t=t[1].split(":"),1===n.length&&""===n[0]&&(n=[]),1===t.length&&""===t[0]&&(t=[]),(e=8-(n.length+t.length))<1)return[];for(i=0;i<e;i++)n.push("0");for(i=0;i<t.length;i++)n.push(t[i]);return n}function p(t){return-1<<32-t}_esm(s),s.Vgb=s.$gb=s.Xgb=s.Wgb=s.Zgb=s.Ugb=s.Ygb=s.JE=s.dEa=s.cEa=void 0,i=e(12),r=e(21),a=e(30),u=e(11),o=e(19),s.cEa=/^[0-9.]*$/,s.dEa=/^([a-fA-F0-9]*:){2}[a-fA-F0-9:.]*$/,s.JE="0000000000000000",s.Ygb=c,s.Ugb=h,s.Zgb=f,s.Wgb=n,s.Xgb=l,s.$gb=function(t,e,i){var n=c(t),r=f(t),a=c(e),o=f(e);if(!n&&!r||!a&&!o||n&&!a||r&&!o)return!1;if(t===n)return i=p(i),(h(t)&i)==(h(e)&i);if(t!==r)return!1;for(t=t.split(":"),e=e.split(":"),n=u.Kx(i/s.JE.length);n--;)if(t[n]!==e[n])return!1;if(0!==(i%=s.JE.length))for(t=parseInt(t[n],16).toString(2),e=parseInt(e[n],16).toString(2),t=s.JE.substring(0,s.JE.length-t.length)+t,e=s.JE.substring(0,s.JE.length-e.length)+e,n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0},s.Vgb=p},function(t,e,i){_esm(e),i(14),i(12),t=i(8),i(113),i(289),i(3),i(112),i(4),i=i(31),t.ka.get(i.fh)},function(t,e,i){var n,r,a,o,s,u,c,h,f;_esm(e),n=i(50),r=i(12),a=i(14),o=i(3),s=i(199),u=i(34),c=i(11),h=i(8),t=i(31),(f=h.ka.get(t.fh)).register(o.M.YDa,function(i){c.Vp&&c.Vp.generateKey&&c.Vp.importKey&&c.Vp.unwrapKey?!h.ka.get(u.yB).Tba&&a.config.JL!=s.sx.fjb&&a.config.JL!=s.sx.shb||c.F0?(f.Dd("wcs"),n.ZH(c.Vp.generateKey({name:"AES-CBC",length:128},!0,["encrypt","decrypt"])).then(function(){f.Dd("wcdone"),i(r.Ye)},function(t){var e;0<=(t=""+t).indexOf("missing crypto.subtle")?e=o.L.bfa:0<=t.indexOf("timeout waiting for iframe to load")&&(e=o.L.Akb),i({na:e,ub:t})})):i({na:o.L.zkb}):i({na:o.L.bfa})})},function(t,e,i){var n,r;_esm(e),t=i(3),n=i(8),r=i(505),i=i(31),n.ka.get(i.fh).register(t.M.NDa,function(e){n.ka.get(r.JBa)().then(function(){e({$:!0})}).catch(function(t){n.log.error("error in initializing indexedDb debug tool",t),e({$:!0})})})},function(t,e,i){var u,c,s,h;function f(t,e,i,n){var r,a,o;return u.hb(h.Jh(t)&&!h.isArray(t)),n=n||"",r="",(a=t.hasOwnProperty(s.Fk)&&t[s.Fk])&&c.te(a,function(t,e){r&&(r+=" "),r+=t+'="'+p(e)+'"'}),a=n+"<"+(i=(e?e+":":"")+i)+(r?" "+r:""),(o=t.hasOwnProperty(s.Ms)&&t[s.Ms].trim&&""!==t[s.Ms].trim()&&t[s.Ms])?a+">"+p(o)+"</"+i+">":a+((t=l(t,e,n+"  "))?">\n"+t+"\n"+n+"</"+i+">":"/>")}function l(t,a,o){var s;return u.hb(h.Jh(t)&&!h.isArray(t)),o=o||"",s="",c.te(t,function(t,e){var i;if("$"!=t[0])for(var n=c.Bw(e),r=0;r<n.length;r++)e=n[r],s&&(s+="\n"),h.Jh(e)?s+=f(e,a,t,o):s+=o+"<"+(i=(a?a+":":"")+t)+">"+p(e)+"</"+i+">"}),s}function p(t){return h.Se(t)?c.XV(t):h.Ba(t)?(u.tU(t,"Convert non-integer numbers to string for xml serialization."),""+t):(null==t||u.hb(!1,"Invalid xml value."),"")}_esm(e),e.Y_b=e.BLb=e.ALb=void 0,u=i(21),c=i(24),s=i(158),h=i(19),e.ALb=f,e.BLb=l,e.Y_b=p},function(t,e,i){var g,v,y,w,_,E,k,S,T,A,O,I,x,P,R,N,j,C,L;_esm(e),g=i(295),v=i(193),y=i(14),w=i(12),_=i(3),E=i(21),k=i(8),S=i(71),T=i(62),A=i(79),O=i(24),I=i(11),x=i(19),P=i(50),R=i(112),N=i(4),t=i(31),j=i(476),C={},(L=k.ka.get(t.fh)).register(_.M.QDa,function(r){var i,n,t,e,s,u,c,a,h,f,l,p,o,d;function b(t){t&&t.userList&&y.config.xYb&&(t.userList=[]),e({esn:v.gk.Vk,esnPrefix:v.gk.Fo,authenticationType:y.config.JL,authenticationKeyNames:y.config.TQa,systemKeyWrapFormat:y.config.k_b,serverIdentityId:"MSL_TRUSTED_NETWORK_SERVER_KEY",serverIdentityKeyData:o,storeState:t,notifyMilestone:L.Dd.bind(L),log:c,ErrorSubCodes:{MSL_REQUEST_TIMEOUT:_.L.Ghb,MSL_READ_TIMEOUT:_.L.Fhb}},{result:function(t){function e(){p&&k.ka.get(A.jB).create().then(function(t){return t.save(f,n,!1)}).catch(function(t){c.error("Error persisting msl store",_.Ts(t))})}var a,i,n,o;a=t,i=k.ka.get(R.nK)(N.Nc(100)),o=s.extend({init:function(t){this.bOa=t},getResponse:function(t,e,i){var n,r=(e=this.bOa).u3a.hf||r;return t=x.Tpa(t.body)?k.OZ(t.body):t.body,E.lM(t,"Msl should not be sending empty request"),t={url:e.url,Fta:t,withCredentials:!0,EC:"nq-"+e.method,headers:e.headers},e=this.bOa.timeout,t.d4=e,t.esa=e,n=r.download(t,function(t){try{if(t.$)i.result({body:t.content});else{if(400!==t.ik||!t.ub)throw O.Zb(new u("HTTP error, SubCode: "+t.na+(t.ik?", HttpCode: "+t.ik:"")),{cadmiumResponse:t});i.result({body:t.ub})}}catch(t){i.error(t)}}),{abort:function(){n.abort()}}}}),h&&a.addEventHandler("shouldpersist",function(t){n=t.storeState,i.Ol(e)}),O.Zb(C,{W$b:function(){l=!0},send:function(r){return new Promise(function(e,n){var t,i,i=(t=r.u3a,i={method:r.method,nonReplayable:r.APb,encrypted:r.Tk,userId:r.Y1b,body:r.body,timeout:2*r.timeout,url:new o(r),allowTokenRefresh:p,sendUserAuthIfRequired:d,shouldSendUserAuthData:y.config.BYb},t.email?(i.email=t.email,i.password=t.password||""):t.$_b?(i.token=t.$_b,i.mechanism=t.Mac,t.Vra&&(i.netflixId=t.Vra,i.secureNetflixId=t.QWb),t.Yta&&(i.profileGuid=t.Yta)):t.Vra?(i.netflixId=t.Vra,i.secureNetflixId=t.QWb):t.fOb?(i.mdxControllerToken=t.fOb,i.mdxPin=t.Kac,i.mdxNonce=t.Jac,i.mdxEncryptedPinB64=t.Iac,i.mdxSignature=t.Lac):l||t.useNetflixUserAuthData?i.useNetflixUserAuthData=!0:t.Yta&&(i.profileGuid=t.Yta),i);a.send(i).then(function(t){l=l&&!1,e({$:!0,body:t.body})}).catch(function(t){var e,i;t.error?(e=t.error.cadmiumResponse&&t.error.cadmiumResponse.na?t.error.cadmiumResponse.na:a.isErrorReauth(t.error)?_.L.yFa:a.isErrorHeader(t.error)?_.L.zhb:_.L.yhb,i=a.getErrorCode(t.error),n(m(e,i,t.error))):(c.error("Unknown MSL error",t),t.Cc=t.subCode,n({na:t.Cc||_.L.Hhb}))})})},$W:a}),r(w.Ye),k.ka.get(j.tda).lPb(C)},timeout:function(){r({na:_.L.zFa})},error:function(t){r(m(_.L.zFa,void 0,t))}})}function m(t,e,i){var n,r,a,o={na:t,Z4:e};if(i){if(a=function(t){var e;return t=t||""+i,i.stack&&(t=0<=(e=""+i.stack).indexOf(t)?e:t+e),t},r=i.cadmiumResponse)return(n=r.pf&&r.pf.toString())&&(r.pf=n),r.na=t,r.Z4=e,r.ub=a(i.message),r.error={Cc:t,Kd:n,mA:e,data:i.cause,message:i.message},r;a=a(i.errorMessage),n=O.He(i.internalCode)||O.He(i.error&&i.error.internalCode),r=void 0!==i.iCb?P.tsa(i.iCb):void 0}return a&&(o.ub=a),n&&(o.pf=n),o.error={Cc:t,Kd:n.toString(),mA:e,data:r,message:a},o}if(E.hb(y.config),i=k.ka.get(S.oF),n=T.co.Rj,I.wB&&I.Vp&&I.Vp.unwrapKey){try{t=pt.netflix.msl,e=t.createMslClient,s=t.IHttpLocation,u=t.MslIoException}catch(t){return void r({na:_.L.Ahb})}c=k.Oi("Msl"),a=y.config.hPb,h=y.config.jPb,f=y.config.nw?"mslstoretest":"mslstore",t=g.UI.D8a,l=y.config.GJb,p=!t||t.$,o=k.Ar(y.config.nw?"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAm84o+RfF7KdJgbE6lggYAdUxOArfgCsGCq33+kwAK/Jmf3VnNo1NOGlRpLQUFAqYRqG29u4wl8fH0YCn0v8JNjrxPWP83Hf5Xdnh7dHHwHSMc0LxA2MyYlGzn3jOF5dG/3EUmUKPEjK/SKnxeKfNRKBWnm0K1rzCmMUpiZz1pxgEB/cIJow6FrDAt2Djt4L1u6sJ/FOy/zA1Hf4mZhytgabDfapxAzsks+HF9rMr3wXW5lSP6y2lM+gjjX/bjqMLJQ6iqDi6++7ScBh0oNHmgUxsSFE3aBRBaCL1kz0HOYJe26UqJqMLQ71SwvjgM+KnxZvKa1ZHzQ+7vFTwE7+yxwIDAQAB":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAlibeiUhffUDs6QqZiB+jXH/MNgITf7OOcMzuSv4G3JysWkc0aPbT3vkCVaxdjNtw50zo2Si8I24z3/ggS3wZaF//lJ/jgA70siIL6J8kBt8zy3x+tup4Dc0QZH0k1oxzQxM90FB5x+UP0hORqQEUYZCGZ9RbZ/WNV70TAmFkjmckutWN9DtR6WUdAQWr0HxsxI9R05nz5qU2530AfQ95h+WGZqnRoG0W6xO1X05scyscNQg0PNCy3nfKBG+E6uIl5JB4dpc9cgSNgkfAIeuPURhpD0jHkJ/+4ytpdsXAGmwYmoJcCSE1TJyYYoExuoaE8gLFeM01xXK5VINU7/eWjQIDAQAB"),d=!!y.config.Nva,k.ka.get(A.jB).create().then(function(e){a?e.remove(f).then(function(){b()}).catch(function(t){c.error("Unable to delete MSL store",_.Ts(t)),b()}):h?e.load(f).then(function(t){i.mark(n.Chb),b(t.value)}).catch(function(t){t.na==_.L.EB?(i.mark(n.Ehb),b()):(c.error("Error loading msl store",_.Ts(t)),i.mark(n.Dhb),e.remove(f).then(function(){b()}).catch(function(t){r(t)}))}):b()}).catch(function(t){c.error("Error creating app storage while loading msl store",_.Ts(t)),r(t)})}else r({na:_.L.Bhb})})},function(t,e,i){var r,n,a,o,s,u,c,h,f,l,p,d,b,m,g;_esm(e),r=i(160),n=i(12),a=i(14),o=i(58),s=i(51),t=i(3),u=i(8),c=i(71),h=i(11),f=i(61),l=i(19),p=i(49),d=i(89),i=i(31),(g=u.ka.get(i.fh)).register(t.M.ODa,function(t){var e;function i(){var i,t=g.startTime,n={browserua:h.xB,browserhref:h.H0.href,initstart:t,initdelay:g.endTime-t};(t=h.Be.documentMode)&&(n.browserdm=""+t),void 0!==pt.nrdp&&pt.nrdp.device&&(n.firmware_version=pt.nrdp.device.firmwareVersion),l.Sz(a.config.XVa)&&(n.fesn=a.config.XVa),Object.assign(n,r.Pna()),(i=h.xv&&h.xv.timing)&&a.config.YMb.map(function(t){var e=i[t];e&&(n["pt_"+t]=e-s.pSa())}),t=e.iYa(),Object.entries(t).forEach(function(t){var e=nt(t);return t=e.next().value,e=e.next().value,n["m_"+t]=e}),t=m.Gt("startup","info",n,o.zB.rma),b.Hc(t)}m=u.ka.get(d.Ix),b=u.ka.get(p.Um),e=u.ka.get(c.oF),g.LN(function(){b.xb(),f.Rf(i)}),t(n.Ye)})},function(t,e){_esm(e)},function(t,e,u){var c,h,f,l,p,d,b,m,g,v,y,w,_,E,k,S;_esm(e),c=u(1),h=u(47),f=u(514),l=u(1266),p=u(300),d=u(14),b=u(12),m=u(190),g=u(554),v=u(51),t=u(3),y=u(8),w=u(284),_=u(11),E=u(296),e=u(31),k=u(58),S=u(134),y.ka.get(e.fh).register(t.M.KDa,function(r){var t,e,i,a=y.ka.get(w.K0).mka(),n=y.ka.get(m.fca).JJ,o=y.ka.get(f.fGa).$q,s={vO:y.oV("ASE"),Crb:y.oV("JS-ASE",void 0,"Platform"),Oi:y.oV,storage:E.storage,xGb:_.HJ,getTime:v.lj,IN:{},$q:o,zv:l.zv,JJ:n,MediaSource:g.iGa,SourceBuffer:p.nda,Io:function(){return[d.config.AT,d.config.BT]},Ft:function(e){k.ho.forEach(function(t){t.b9a(e)})}};n=new Promise(function(e){E.storage.load("nh",function(t){s.IN.nh=t.$?t.data:void 0,e()})}),o=new Promise(function(e){E.storage.load("lh",function(t){s.IN.lh=t.$?t.data:void 0,e()})}),t=new Promise(function(e){E.storage.load("gh",function(t){s.IN.gh=t.$?t.data:void 0,e()})}),e=new Promise(function(e){E.storage.load("sth",function(t){s.IN.sth=t.$?t.data:void 0,e()})}),i=new Promise(function(e){E.storage.load("vb",function(t){s.IN.vb=t.$?t.data:void 0,e()})}),Promise.all([n,o,i,e,t]).then(function(){return c.__awaiter(this,void 0,void 0,function t(){var i,n;return A(t,function(t){var e;return 1==t.SH?(n=u(1268)(s),S.ln.Oe=u(555),S.ln.Oe.declare(h.oj),S.ln.Oe.set(u(186)(d.config),!0,y.oV("ASE")),i=h.V1a(n),S.ln.FQa=new i(S.ln.Oe,a),S.ln.FQa.xb(d.config.AT,d.config.BT,{vO:s.vO},d.config.XO),e=h.bH(n),t.SH=2,{value:e}):((n=t.wya).open(S.ln.Oe,a),n.Sva({audio:d.config.AT,video:d.config.BT},{Y:d.config.XO,fa:void 0}),S.ln.yi=n,r(b.Ye),void(t.SH=0))})})}).catch(function(t){s.vO.error("Exception loading location history from local storage",t)})})},function(t,r,e){var i,n,a,o,s,u;function c(){var t=new n.Gk;this.addEventListener=t.addListener.bind(this),this.removeEventListener=t.removeListener.bind(this),this.emit=t.Fc.bind(this),this.w2=s++,this.Dg=a.Oi("ProbeRequest"),this.wOa=i.vJa,o.hb(void 0!==this.wOa),this.Bh=r.zv.Sc.UNSENT}function h(){return JSON.stringify({url:this.vl,id:this.w2,affected:this.z1,readystate:this.Bh})}_esm(r),r.zv=void 0,i=e(1267),n=e(73),a=e(8),o=e(21),e=e(30),s=0,e.Zb(c.prototype,{gO:function(t){t.affected=this.z1,t.probed={requestId:this.w2,url:this.vl,Md:this.gT,groupId:this.c2},this.emit(r.zv.Le.CR,t)},msa:function(t){this.zpb=t.httpcode,t.affected=this.z1,t.probed={requestId:this.w2,url:this.vl,Md:this.gT,groupId:this.c2},this.emit(r.zv.Le.bF,t)},open:function(t,e,i,n){return!!t&&(this.vl=t,this.z1=e,this.gT=i,this.Bh=r.zv.Sc.OPENED,this.Zmb=n,this.wOa.mV(this),!0)},ed:function(){return!0},mi:function(){return this.w2},toString:h,toJSON:h}),Object.defineProperties(c.prototype,{readyState:{get:function(){return this.Bh},set:function(){}},status:{get:function(){return this.zpb}},url:{get:function(){return this.vl}},T8b:{get:function(){return this.z1}},QMb:{get:function(){return this.Zmb}}}),(e=u=u||{}).Le={CR:"pr0",bF:"pr1"},e.Sc={UNSENT:0,OPENED:1,Tx:2,DONE:3,OJ:4,name:["UNSENT","OPENED","SENT","DONE","FAILED"]},r.zv=Object.assign(c,u)},function(t,e,i){var n,r;_esm(e),e.vJa=void 0,n=i(8),r=i(74),e.vJa=(n.Oi("ProbeDownloader"),{mV:function(t){t={url:t.url,MTb:t},r.hf.PTb(t)}})},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b,m,g;function v(t,e,i){this.Ao=t,this.groups=e,this.prefix=i,t=f(t,e,i),this.info=t.info.bind(t),this.fatal=t.fatal.bind(t),this.error=t.error.bind(t),this.warn=t.warn.bind(t),this.trace=t.trace.bind(t),this.debug=t.debug.bind(t),this.log=t.log.bind(t)}function y(){this.iTa=function(){throw Error("Not implemented")},this.sAb={query:function(){throw Error("Not implemented")},read:function(){throw Error("Not implemented")},create:function(){throw Error("Not implemented")},append:function(){throw Error("Not implemented")}}}function w(){}function _(){return h||"0.0.0.0"}function E(t){t({F4a:0,kZ:0,TZa:0,WVa:0})}n=i(17),y.prototype.set=function(t,e){a[t]=e,o.save(t,e)},y.prototype.get=function(e,i){if(a.hasOwnProperty(e))return a[e];c.trace("key: "+e+", is not available in storage cache and needs to be retrieved asynchronously"),o.load(e,function(t){t.$?(a[e]=t.data,i&&i(t.data)):a[e]=void 0})},y.prototype.remove=function(t){o.remove(t)},y.prototype.clear=function(){c.info("WARNING: Calling unimplemented function Storage.clear()")},w.prototype.now=function(){return s()},w.prototype.ea=function(){return u()},w.prototype.Rra=function(t){return t+s()-u()},w.prototype.osa=function(t){return t+u()-s()},v.prototype.zTa=function(t){var e=[];return this.prefix&&Array.isArray(this.prefix)?e.push.apply(e,G(this.prefix)):this.prefix&&e.push(this.prefix),e.push(t),new v(this.Ao,this.groups,e)},(i=Promise).prototype.fail=Promise.prototype.catch,l=i,t.exports=function(t){return r=t.vO,f=t.Oi,o=t.storage,a=t.IN,s=t.xGb,u=t.getTime,c=t.Crb,p=t.$q,g=t.zv,d=t.JJ,b=t.SourceBuffer,m=t.MediaSource,h=t.Z$b,{name:"cadmium",Ft:t.Ft,vO:r,storage:new y,Storage:y,time:new w,events:new n.EventEmitter,console:new v("JS-ASE",void 0,"default"),Console:v,options:{},Promise:l,$q:p,JJ:d,Khb:b,MediaSource:m,zv:g,Uo:{name:_},memory:{IFb:E},Io:t.Io}}},function(t,e,i){t.exports={EventEmitter:i(1270),Wh:i(1271)}},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ad?(this.Ad={},this.Ad[t]=[e],!0):void 0===(i=this.Ad[t])?(this.Ad[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ad?this.Ad[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ad&&(void 0!==(i=this.Ad[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ad[t]:i.splice(e,1),!0)))},Va:i,emit:i,removeAllListeners:function(t){return this.Ad&&(void 0===t?delete this.Ad:delete this.Ad[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e},function(t,e,i){var n,r,w,c,a,h,_,E,k;function o(o,f){var l,p,d,b,m,s,u,g,v,y,e;function t(){var t=o.yb.value===E.cb.Kc&&o.state.value===E.Rb.re&&o.J===f.J;e?t||(clearInterval(e),s=e=void 0):t&&(e=pt.setInterval(i,1e3))}function i(){var t,e,i,n,r,a=o.oe.value;null!==(a=(a=a&&a.stream)&&a.height)&&0<a&&(t=c.lj(),(e=o.Xf.XG())&&(s&&t-s.time<2e3&&a===s.height&&(i=e-s.UAb,(n=p[a])||(p[a]=n=[],g<a&&(m.push(a),w.r_(m))),0<i&&!(y&&y<a)&&(y=a),n.push(i),n.length>u&&n.shift(),(n=b[a])||(b[a]=n={}),r=n[i],n[i]=r?r+1:1),s={time:t,UAb:e,height:a},o.E9&&o.E9.zXb(p)))}if(l=a.Ih(o,"DFF"),p={},d=n.config.YAb,b={},m=[],u=n.config.WAb,g=n.config.XAb,v=r.pFa,n.config.VAb)return f.sla={zEb:function(){var r={};return b&&m.forEach(function(t){var i,n,e=b[t];e&&(n=i=0,k.te(e,function(t,e){n+=h.He(t),i+=e}),r[t]=n/i)}),r},GV:function(c){var h={};return c.forEach(function(t){h[t]={}}),b&&(w.r_(c),m.forEach(function(t){var i,e,n,r=b[t];if(r){e=i=0,k.te(r,function(t,e){i+=e}),n=Object.keys(r).map(Number),w.r_(n);for(var a=n.length-1,o=n[a],s=c.length-1;0<=s;s--){for(var u=c[s];u<=o&&0<=a;)(o=r[o])&&(e+=o),o=n[--a];h[u][t]=_.bj(e/i*100)}}})),h}},o.state.addListener(t),o.yb.addListener(t),o.addEventListener(E.ca.CH,t),{IM:"df",Yu:function(t){var e,i,n,r,a;if(t.lower&&t.height>g){t=t.height;t:{if(y){for(var o=m.length,s=0;s<o;s++)if(e=m[s],y<=e&&e<v){if(n=i=p[e])e:{n=d.length;for(var u=i.length,c=0;c<n;c++){a=(r=d[c])[0],r=r[1];for(var h=0;h<u;h++)if(i[h]>=r&&--a<=0){n=!0;break e}}n=!1}if(n&&v!=e){l.warn("Restricting resolution due to high number of dropped frames",{MaxHeight:e}),f.Np.set({reason:"droppedFrames",height:e}),o=v=e;break t}}y=void 0}o=v}t=o<=t}else t=!1;return t}}}_esm(e),e.Mhb=void 0,t=i(106),n=i(14),r=i(12),w=i(50),c=i(51),a=i(8),h=i(30),_=i(11),E=i(15),k=i(24),t.UE(o),e.Mhb=o},function(t,e,i){_esm(e),i(106).UE(function(){return{IM:"op",Yu:function(){}}})},function(t,e,i){var o,s;function n(t,n){var r,a=s.Ih(t,"MSS");if(o.config.FOb)return{IM:"mss",Yu:function(t){var e,i;if(t.lower&&2160<=t.height)t:{for(e=t;e.lower;){if(e.height<2160&&1080<e.height){e=!0;break t}if(e.height<=1080)break;e=e.lower}e=!1}else e=void 0;if(e){if(void 0===r){try{i=pt.MSMediaKeys,r=!(!i||!i.isTypeSupportedWithFeatures)&&"probably"===i.isTypeSupportedWithFeatures("com.microsoft.playready.software",'video/mp4; codecs="avc1,mp4a";features="display-res-x=3840,display-res-y=2160,display-bpc=8"')}catch(t){a.error("hasUltraHdDisplay exception"),r=!0}r||(a.warn("Restricting resolution due screen size",{MaxHeight:t.height}),n.Np.set({reason:"microsoftScreenSize",height:t.height}))}return!r}}}}_esm(e),e.Nhb=void 0,t=i(106),o=i(14),s=i(8),t.UE(n),e.Nhb=n},function(t,e,i){var n,r,a,o;_esm(e),t=i(106),n=i(1276),r=i(8),a=i(34),o=i(70),t.UE(function(t){var e;if(r.ka.get(a.Hk).jY)return e=r.ka.get(o.Vs),new n.zEa(t,r.Wf,e)})},function(t,e,i){var r;function n(i,t,e){var n=this;this.j=i,this.ta=t,this.yD=e,this.Qpa=!1,this.log=this.ta.ib("KeySystemRobustness",this.j),this.Qpa=!1,this.yD.vw().then(function(t){var e=null===(e=t.getConfiguration().videoCapabilities)||void 0===e?void 0:e.map(function(t){return t.robustness});n.Qpa=!(null==e||!e.some(function(t){return t===r.TJ})),i.c9a("keySystem",t.keySystem),i.c9a("robustness",null==e?void 0:e.toString()),n.log.trace("KeySystemRobustness: "+e)}).catch(function(t){n.log.error("KeySystemRobustness exception",t)})}_esm(e),e.zEa=void 0,r=i(63),n.prototype.Yu=function(t){return t.lower&&t.Qz&&!this.Qpa&&720<t.height},it.Object.defineProperties(n.prototype,{IM:{configurable:!0,enumerable:!0,get:function(){return"KeySystemRobustness"}}}),e.zEa=n},function(t,e,i){var n,r,a;_esm(e),t=i(106),n=i(14),r=i(8),a=i(1278),t.UE(function(t,e){if(n.config.GLb)return new a.yEa(t,e,r.Wf,n.config,r.za,r.Oc)})},function(t,e,i){var n,s,u;function r(t,e,i,n,r,a){var o=this;this.j=t,this.va=e,this.ta=i,this.config=n,this.za=r,this.Oc=a,this.nrb=function(t){!0===t.oldValue&&!1===t.newValue&&(o.log.error("RestartStreaming: UHD key is no longer usable"),o.j.mWb())},this.H0b=function(t){var e,i;o.log.trace("UhdKeyStatus: "+t.oldValue+" -> "+t.newValue),e=null==t?void 0:t.newValue,i=null==t?void 0:t.oldValue,"usable"!==e&&(o.tXb(e,(null===(e=null==t?void 0:t.om)||void 0===e?void 0:e.height)||0),"usable"===i&&(t=o.za.ff.Qa(o.ILb),o.log.error("UHD KeyStatus unexpectedly changed: "+t.da(u.ja))))},this.B0a=!1,this.log=this.ta.ib("KeyStatusStreamFilter",this.j),this.bQa=new s.dc(!1,this.nrb),this.G0b=new s.dc(void 0,this.H0b)}_esm(e),e.yEa=void 0,n=i(207),s=i(80),u=i(4),r.prototype.Yu=function(t){return this.KZb(),this.bQa.set(this.B0a&&this.HIb),!(!(t.lower&&1080<t.height)||this.bQa.value)},r.prototype.rvb=function(){this.HIb=!0,this.log.trace("HDCP enagement wait is complete: "+this.config.NZa)},r.prototype.byb=function(){var e={},t=null===(t=this.va.xg.value)||void 0===t?void 0:t.Iu;return null!=t&&t.forEach(function(t){e[t.pj]=t.xI.height}),this.log.trace("KeyStatusMap",e),e},r.prototype.E3a=function(t){var i=this;Object.entries(t).forEach(function(t){var e=nt(t);t=e.next().value,e=e.next().value,1080<(t=i.HLb[t])&&(i.B0a="usable"===e,i.G0b.set(e,{height:t}))})},r.prototype.KZb=function(){var e=this,t=this.va.nf;!this.jLb&&n.upa(t)&&(this.jLb=!0,this.HLb=this.byb(),this.E3a(t.keyStatuses.value),t.keyStatuses.addListener(function(t){return e.E3a(t.newValue)}),this.Oc.zk(u.Nc(this.config.NZa),function(){return e.rvb()}),this.ILb=this.za.ff)},r.prototype.tXb=function(t,e){this.log.error("Restricting resolution due to keyStatus",{keyHeight:e,keyStatus:t}),this.va.Np.set({reason:"keyStatus",height:e})},it.Object.defineProperties(r.prototype,{IM:{configurable:!0,enumerable:!0,get:function(){return"UhdKeyStatus"}}}),e.yEa=r},function(t,e,i){var o,s;_esm(e),t=i(106),o=i(14),s=i(8),t.UE(function(t,e){var i,n,r,a={"video-merch-bob-vertical":480,"video-merch-bob-horizontal":384,"video-merch-jaw":720,"show-as-a-row-bob-horizontal":480,"mini-modal-horizontal":720};if(Object.assign(a,o.config.I0b),i=a[e.ye],o.config.J0b&&i)return n={},r=s.Ih(t,"MediaStreamFilter"),{IM:"uiLabel",Yu:function(t){if(t.lower&&t.height>i)return n[t.height]||(n[t.height]=!0,r.warn("Restricting resolution due to uiLabel",{MaxHeight:i,streamHeight:t.height}),e.Np.set({reason:"uiLabel",height:t.height})),!0}}})},function(t,e,i){var l,p,d,b,m,g,v,y,w,_,E,k,S,T;_esm(e),l=i(160),p=i(553),t=i(58),d=i(14),b=i(60),m=i(12),g=i(50),v=i(51),y=i(24),w=i(11),_=i(8),E=i(123),k=i(15),S=i(31),T=i(34),t.dea(t.Zda,function(r){var e,a,o,s,i,n;function u(){n("type=startplay&sev=info&outcome=success")}function c(){var i,t=r.li;t?(i="type=startplay&sev=error&outcome=error",t=l.Ena(_.ka.get(T.Hk).bq,t),y.te(t,function(t,e){i+="&"+w.G0(t)+"="+w.G0(e||"")}),n(i)):n("type=startplay&sev=info&outcome=abort")}function h(){n("type=startplay&sev=info&outcome=unload")}function f(t){t=i+"&soffms="+r.Lna()+"&"+t,r.pd&&Object.keys(r.pd).length&&(t+="&"+g.kO(y.Zb({},r.pd,{prefix:"sm_"}))),p.iab("playback",t,e)}e=_.ka.get(E.zJ).host+d.config.pxa,d.config.jab&&e&&d.config.kab.playback&&(s=d.config.k0b.slice(),i="xid="+r.ba+"&pbi="+r.index+"&uiLabel="+(r.ye||""),r.state.addListener(function t(e){var i,n;if(e.newValue>=k.Rb.LOADING){r.state.removeListener(t),e=w.G0;try{i=""+v.V3(),localStorage.setItem("player$test",i),n=localStorage.getItem("player$test"),localStorage.removeItem("player$test"),i=i==n?"success":"mism"}catch(t){i="ex: "+t}f("type=openplay&sev=info&locstor="+e.call(w,i)),o=v.lj(),function t(){var e,i;0<(e=s.shift())&&(i=w.fo(e-(v.lj()-o),0),a=setTimeout(function(){f("type=startstall&sev=info&kt="+e),t()},i))}()}}),r.addEventListener(k.ca.Cq,u),r.addEventListener(k.ca.kg,c),b.ve.addListener(b.El,h,m.cF),n=function(t){var e;n=m.ql,f(t+="&initstart="+(e=_.ka.get(S.fh)).startTime+"&initend="+e.endTime),clearTimeout(a),r.removeEventListener(k.ca.Cq,u),r.removeEventListener(k.ca.kg,c),b.ve.removeListener(b.El,h)})})},function(t,e,i){var n,r,a,o;_esm(e),n=i(14),r=i(12),t=i(3),a=i(8),o=i(167),i=i(31),a.ka.get(i.fh).register(t.M.MDa,function(t){n.config.C5&&a.ka.get(o.KCa).start(),t(r.Ye)})},function(t,e,i){var n,r,a,d,b;_esm(e),e.yAa=void 0,n=i(74),r=i(50),a=i(21),d=i(24),b=i(30),e.yAa=function(t,e){a.hb(t),a.hb(e),a.lM(e.ZBb,"endpointURL property is required"),a.hb(e.he),this.log=t,this.K5a=e},e.yAa.prototype.PC=function(){var t,l,p=this;return p.log.trace("Downloading config data."),t={browserInfo:JSON.stringify(p.K5a.he)},l=p.K5a.ZBb+"?"+r.kO(t),new Promise(function(h,f){return n.hf?function o(s,u,c){n.hf.download(s,function(t){var e,i,n,r,a;if((t=function(e){var t;try{return e.$?(t=new Uint8Array(e.content),t=String.fromCharCode.apply(null,t),{$:!0,config:JSON.parse(t).core.initParams}):{$:!1,message:"Unable to download the config. "+e.ub,cD:e.ik}}catch(t){return e=d.wd(t),p.log.error("Unable to download the config. Received an exception parsing response",{message:t.message,exception:e,url:l}),{$:!1,ub:e,message:"Unable to download the config. "+t.message}}}(t)).$)h(t);else{if(p.log.warn("Config download failed, retrying",b.Zb({Attempt:u,WaitTime:e,MaxRetries:c},t)),n=t,!((a=c)<(r=u+1))||(p.log.error("Config download failed, retry limit exceeded, giving up",b.Zb({Attempts:r-1,MaxRetries:a},n)),0))return e=d.iua(1e3,1e3*Math.pow(2,Math.min(u-1,c))),i=e,new Promise(function(t){setTimeout(function(){t()},i)}).then(function(){return o(s,u+1,c)});f(t)}})}({url:l,responseType:3,withCredentials:!0,EC:"config-download"},1,3):Promise.reject({$:!1,message:"Unable to download Config. There was no HTTP object supplied"})})}},function(t,e,i){var n,o,s,u,c,h,f,l,p,d,b;_esm(e),n=i(193),o=i(163),s=i(12),u=i(14),t=i(3),c=i(8),h=i(21),f=i(24),l=i(30),p=i(19),d=i(49),b=i(89),i=i(31),c.ka.get(i.fh).register(t.M.VDa,function(t){var r=c.Oi("NccpApi"),a=f.BQa(["info","warn","trace","error"]);o.sK.CT.nccp={getEsn:function(){return n.gk.Vk},getPreferredLanguages:function(){return u.config.Ir.Kta},setPreferredLanguages:function(t){h.hb(p.isArray(t)&&l.Sz(t[0])),u.config.Ir.Kta=t},queueLogblob:function(t,e,i){var n;t&&e&&(e=e.toLowerCase(),a[e]?(n=c.ka.get(d.Um),t=c.ka.get(b.Ix).Gt(t,e,i),n.Hc(t)):r.warn("Invalid severity",{severity:e}))},flushLogblobs:function(){c.ka.get(d.Um).flush(!0)}},t(s.Ye)})},function(t,e,i){var n,a,o,s,u,c,h,f,l,p,d;_esm(e),t=i(31),e=i(3),n=i(7),a=i(34),o=i(192),s=i(12),u=i(14),c=i(8),h=i(134),f=i(58),l=i(163),p=i(299),d=i(120),c.ka.get(t.fh).register(e.M.XDa,function(t){var e,i,r;u.config.vCb&&(e=c.ka.get(o.U0),i=c.ka.get(a.Hk),r=c.ka.get(n.qb).ib("Test"),l.sK.CT.test={setPboRequestsListener:function(t){return e.LXb(t)},playbacks:f.ho,getPlayback:function(e){return f.ho.find(function(t){return t.ba===e})},playgraphManager:{isNextSegmentReady:function(e,t){var i;return void 0!==(null===(i=null===(i=f.ho.find(function(t){return t.ba===e}))||void 0===i?void 0:i.Ka)||void 0===i?void 0:i.M5(t))},isNextSegmentBuffering:function(e,t){var i;return null===(i=null===(i=f.ho.find(function(t){return t.ba===e}))||void 0===i?void 0:i.Ka)||void 0===i?void 0:i.bN(t).NL}},aseManager:{cacheDestroy:function(){return h.ln.FQa.Ly()}},device:{esn:pt._cad_global.device.Vk,esnPrefix:i.Fo,errorPrefix:i.bq},log:{info:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.info(t,i)},error:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.error(t,i)},warn:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.warn(t,i)},trace:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.trace(t,i)},log:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.log(t,i)},debug:function(t,e){for(var i=[],n=1;n<arguments.length;++n)i[n-1]=arguments[n];return r.debug(t,i)}},login:function(t,e){return void 0===t||void 0===e?Promise.reject("Invalid email and/or password"):c.ka.get(p.Mda).og(this.log,{},{email:t,password:e}).then(function(){})},getManifest:function(t){var e=c.ka.get(d.sF);return e.ZVa.fetch(t,e)}}),t(s.Ye)})},function(t,e,i){var r,n,a,o,s,u,c,h,f;_esm(e),t=i(1286),r=i(12),n=i(14),a=i(58),e=i(7),o=i(8),s=i(49),u=i(113),c=i(21),h=i(30),f=i(11),pt.netflix=pt.netflix||{},c.hb(!pt.netflix.player),pt.netflix.player={VideoSession:t.cMa,diag:{togglePanel:function(t,e){var i=[];if(!n.config||n.config.nY){switch(t){case"info":i=a.ho.map(function(t){return t.E9});break;case"streams":i=a.ho.map(function(t){return t.G9});break;case"log":i=[]}i.forEach(function(t){h.Xc(e)?e?t.show():t.Qr():t.toggle()})}},addLogMessageSink:function(e){o.ka.get(s.Um).addListener({jcc:function(){},wOb:function(t){e({data:t.data})}})}},log:o.Oi("Ext"),LogLevel:e.Nj,addLogSink:function(t,e){o.ka.get(u.ZJ).e$(t,e)},getVersion:function(){return"6.0033.414.911"},getMostRecentPlaybackDiagnosticGroups:function(){var t;return null===(t=a.zB.r3a)||void 0===t?void 0:t.E4.xV()},isWidevineSupported:function(i){var t;function n(i){return function(t,e){return e.contentType==i}}if("function"!=typeof i)throw Error("input param is not a function");t=[{distinctiveIdentifier:"not-allowed",videoCapabilities:[{contentType:r.Jx,robustness:"SW_SECURE_DECODE"}],audioCapabilities:[{contentType:r.$J,robustness:"SW_SECURE_CRYPTO"}]}];try{f.kf.requestMediaKeySystemAccess("com.widevine.alpha",t).then(function(t){var e=t.getConfiguration();t=e.videoCapabilities||[],e=(e.audioCapabilities||[]).reduce(n(r.$J),!1),t=t.reduce(n(r.Jx),!1),i(e&&t)}).catch(function(){i(!1)})}catch(t){i(!1)}}}},function(t,e,i){var o,s,n,u,c,h;function r(t){var a=n.sK.call(this,t)||this;return a.createPlayer=function(t,e){var i,n,r;return e="number"==typeof(e=void 0===e?{}:e)?{Fj:e}:e,i=o.ka.get(s.hK),n=o.ka.get(c.tR).create(e.manifest),r=o.ka.get(u.kea),t=i.pyb(t),t=(i=o.ka.get(h.iea).create(t)).Q5(),(r=r.wTa(i)).addEpisode({movieId:t.W,playbackParams:a.SQa(e,t),manifest:n}),r},a}_esm(e),e.cMa=void 0,o=i(8),s=i(121),n=i(163),u=i(304),c=i(157),h=i(303),T(r,n.sK),e.cMa=r},function(t,e,i){var n,r,a,o,s,u,c,h,f,l,p,d,b;_esm(e),n=i(163),r=i(193),a=i(12),o=i(50),t=i(3),s=i(8),u=i(165),c=i(21),h=i(30),f=i(11),e=i(31),l=i(51),p=i(94),d=i(156),b=i(164),s.ka.get(e.fh).register(t.M.WDa,function(t){var e;((e=s.ka.get(b.mB)).$_a||e.xw)&&(n.sK.CT.mdx={getEsn:function(){return r.gk.Vk},createCryptoContext:function(n){var r=s.ka.get(p.OR);s.ka.get(d.yR)().then(function(t){var e=t.$W.getStateForMdx(r),i=e.cryptoContext;t=e.masterToken,e=e.userIdToken,t&&e?(c.hb(i),t=["1",s.pC(JSON.stringify(t.toJSON())),s.pC(JSON.stringify(e.toJSON()))].join(),n({success:!0,cryptoContext:{cTicket:t,encrypt:function(t,e){t=h.Se(t)?s.RP(t):t,i.encrypt(t,{result:function(t){t=s.pC(t),e({success:!0,mslEncryptionEnvelopeBase64:t})},timeout:function(){e({success:!1})},error:function(t){c.hb(!1,"Encrypt error: "+t),e({success:!1})}})},decrypt:function(t,e){t=s.Ar(t),i.decrypt(t,{result:function(t){e({success:!0,text:s.OZ(t)})},timeout:function(){e({success:!1})},error:function(t){c.hb(!1,"Decrypt error: "+t),e({success:!1})}})},hmac:function(t,e){t=h.Se(t)?s.RP(t):t,i.sign(t,{result:function(t){e({success:!0,hmacBase64:s.pC(t)})},timeout:function(){e({success:!1})},error:function(t){c.hb(!1,"Hmac error: "+t),e({success:!1})}})}}})):(c.hb(!1,"Must login first"),n({success:!1}))})},createCryptoContextFromSharedSecret:function(t,e){var i=s.Ar(t);if(t=i.subarray(32,48),i=i.subarray(0,32),16!=t.length||32!=i.length)throw Error("Bad shared secret");Promise.all([o.ZH(f.Vp.importKey("raw",t,{name:"AES-CBC"},!1,["encrypt","decrypt"])),o.ZH(f.Vp.importKey("raw",i,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign","verify"]))]).then(function(t){var a,i;e({success:!0,cryptoContext:(a=t[0],i=t[1],{encrypt:function(t,n){var r;t=h.Se(t)?s.RP(t):t,r=f.wB.getRandomValues(new Uint8Array(16)),o.ZH(f.Vp.encrypt({name:"AES-CBC",iv:r},a,t)).then(function(t){var e,i;t=new Uint8Array(t),e=[],(i=new u.BQ(e)).Yaa(2),i.$bb(r),i.$bb(t),t=s.pC(e),n({success:!0,encryptedDataAsn1Base64:t})},function(t){c.hb(!1,"Encrypt error: "+t),n({success:!1})})},decrypt:function(t,e){var i;i=t,(i=new u.BQ(s.Ar(i))).DA(),t={iv:i.C6a(),XBb:i.C6a()},o.ZH(f.Vp.decrypt({name:"AES-CBC",iv:t.iv},a,t.XBb)).then(function(t){t=new Uint8Array(t),e({success:!0,text:s.OZ(t)})},function(t){c.hb(!1,"Decrypt error: "+t),e({success:!1})})},hmac:function(t,e){t=h.Se(t)?s.RP(t):t,o.ZH(f.Vp.sign({name:"HMAC",hash:{name:"SHA-256"}},i,t)).then(function(t){t=new Uint8Array(t),e({success:!0,hmacBase64:s.pC(t)})},function(t){c.hb(!1,"Hmac error: "+t),e({success:!1})})}})})},function(){e({success:!1})})},getServerEpoch:function(){return l.W3()}}),t(a.Ye)})},function(t,e,r){var a,o,s,u,c;_esm(e),a=r(14),o=r(12),t=r(3),s=r(8),e=r(31),u=r(120),s.ka.get(e.fh).register(t.M.RDa,function(t){var e,i,n;a.config.JSb&&(e=s.Oi("PlayerPredictionModel"),i=s.ka.get(u.sF),n=r(1289),e.log=e.trace.bind(e),c=new n({},e,{pY:function(){},JVb:function(){}},i,{iI:function(){}}),pt._cad_global.playerPredictionModel=c,e.info("ppm v2 initialized")),t(o.Ye)})},function(t,e,i){var a,o,s,u,n,h,c;function f(t,e,i,n,r,a){this.J=this.W=t,this.priority=e,this.Ed=i,a&&a.ye&&(this.ye=a.ye),void 0!==n&&(this.tO=n),this.Dl=r,this.Fb=a}function r(t,e,i,n,r){s(void 0!==n,"video preparer is null"),s(void 0!==r,"ui preparer is null"),this.H=e,this.Ja=i,this.Spb=n,this.Lpb=r,this.uOa=h.Hta,this.rL=[],this.sha=!1,this.uS=0,(new c).on(h,"changed",l,this),this.reset()}function l(){this.H.log("config changed"),h.Hta&&(this.uOa=h.Hta),h.ZW!==this.fL&&(this.reset(),this.Rua())}a=i(306),o=i(307),e=i(556),s=e.assert,u=e.hWa,n=i(1290),h=i(557).config,c=i(1291).Wh,h.declare({Hta:["ppmConfig",{I3b:{g4a:0,f4a:2,d4a:0,e4a:5,h9a:0},W7b:{g4a:0,f4a:1,d4a:0,e4a:3,h9a:1e3},Y3b:{g4a:0,f4a:1,d4a:0,e4a:3,h9a:1e3}}]}),(r.prototype.constructor=r).prototype.reset=function(){this.Wfa=!0,this.fL=h.ZW,this.H.log("create model: "+h.ZW,h.W7a,h.uSa),h.ZW,this.fL=new n(this.H)},r.prototype.Rua=function(){var t,e;if(!1===this.sha){this.sha=!0;for(var i=0;i<this.rL.length;i++)this.H.log("PlayPredictionModel replay: ",JSON.stringify(this.rL[i])),t=this.aTa(this.rL[i]),e=this.QWa(t),this.fL.update(t,e),this.Wfa=!1;this.rL=[]}},r.prototype.update=function(t){var e,i,n;this.H.log("PlayPredictionModel update: ",JSON.stringify(t)),t&&t.Ya&&t.Ya[0]&&(!1===this.sha&&this.rL.length<h.RNb&&this.rL.push(t),e=this.aTa(t),i=this.QWa(e),this.H.log("actionType",i),e="mlmodel"==h.ZW?this.fL.update(t,i):this.fL.update(e,i),e=this.hEb(e,h.vLb||1),this.H.log("PlayPredictionModel.prototype.update() - returnedList: ",JSON.stringify(e)),0===this.uS&&(this.uS=a(),this.Ja&&this.Ja.pY&&this.Ja.pY({Xzb:this.uS})),this.Ja&&this.Ja.JVb&&(this.fFb(),n=[],e.forEach(function(t){n.push({Mcc:t.W})}),JSON.stringify(t),JSON.stringify(e)),this.Spb.iI(e),this.Lpb.iI(e),this.Wfa=!1)},r.prototype.fFb=function(){a()},r.prototype.pY=function(){this.uS=a(),this.Ja&&this.Ja.pY&&this.Ja.pY({Xzb:this.uS})},r.prototype.aTa=function(t){var n,r={},e=t.Ya||[],i=function(t){var e,i={};n=o.jR.name.indexOf(t.context),i.context=0<=n?n:o.jR.Px,i.rowIndex=t.rowIndex,i.requestId=t.requestId,i.list=[],(t.list||[]).forEach(function(t){e={W:t.W,Ed:t.Ed,index:t.index,tO:t.tO,R9:t.R9,list:t.list,Fb:t.Fb},void 0!==t.property&&(n=o.VJ.name.indexOf(t.property),e.property=0<=n?n:o.VJ.Px),i.list.push(e)}.bind(this)),r.Ya.push(i)}.bind(this);return void 0!==t.direction&&(n=o.vv.name.indexOf(t.direction),r.direction=0<=n?n:o.vv.Px),void 0!==t.gV&&(r.l$b=t.gV.rowIndex,r.k$b=t.gV.kvb),r.gV=t.gV,r.Ya=[],e.forEach(i),r},r.prototype.QWa=function(t){var e=t.direction||o.vv.Px,i=t.gV,n=t.Ya||[];return!0===this.Wfa?t=o.qx.yCa:!0===n.some(this.DIb)?(t=o.qx.FR,this.g$(n,e,i)):t=n[0].context===o.jR.d1?o.qx.d1:e===o.vv.DJa||e===o.vv.AEa?o.qx.XJa:o.qx.Px,t},r.prototype.DIb=function(t){return(t.list||[]).some(function(t){return t.property===o.VJ.FR||t.property===o.VJ.QAa})},r.prototype.g$=function(t,e,i){var n,r;this.H.log("reportPlayFocusEvent: ",e,i),n={},r=u(t),this.Ja&&this.Ja.g$&&(n.c$b=a(),n.direction=o.vv.name[e],i&&(n.rowIndex=i.rowIndex,n.Pja=i.kvb),void 0!==r.xk&&(n.requestId=t[r.xk].requestId),this.Ja.g$&&this.Ja.g$(n))},r.prototype.hEb=function(t,e){for(var i,n,r,a,o=t.length,s=[],u=0;u<o;u++){if(n=t[u],i=Math.floor(u/e)+1,void 0!==n.list){a=(r=n.list).length;for(var c=0;c<Math.min(h.ivb,a)&&(r[c].Dl=n.Dl,this.HPa(r[c],i,s),!(s.length>=h.z2a));c++);}else this.HPa(n,i,s);if(s.length>=h.z2a)break}return s},r.prototype.HPa=function(e,i,n){var t,r;function a(t){return t.ye&&(t.Fb||(t.Fb={}),t.Fb.ye=t.ye),t.Fb}void 0!==(t=e.R9)&&t instanceof Array?t.forEach(function(t){void 0!==t.W&&(r=a(t),n.push(new f(t.W,i,t.Ed,t.tO,e.Dl,r)))}):void 0!==t&&void 0!==t.W&&(t=e.R9,r=a(t),n.push(new f(t.W,i,t.Ed,t.tO,e.Dl,r))),void 0!==e.W&&(r=a(e),n.push(new f(e.W,i,e.Ed,e.tO,e.Dl,r)))},r.prototype.PC=function(t){var e=this.uOa;return t?e[t]:e},t.exports=r},function(t,e,i){var n,o,s,r,a,u,c,h,f,l;function p(t,e){this.xk=t,this.jm=e}function d(t){this.H=t,this.reset()}n=i(306),o=i(307),e=i(556),s=i(557).config,r=e.YEb,a=e.FEb,u=e.Zzb,c=e.nQb,h=e.mQb,f=e.lQb,l=e.hWa,(d.prototype.constructor=d).prototype.reset=function(){this.vOa=void 0,this.Lk=[],this.jOa=this.kOa=!1},d.prototype.update=function(t,e){var i;switch(this.Lk&&(this.Lk=this.Lk.filter(this.zYb,this)),!1===this.kOa&&0<(i=r(t.Ya).slice(0,s.MTa)).length&&(this.MH(i,o.vx.rl),this.kOa=!0,this.Lk=this.nJ(i.concat(this.Lk))),!1===this.jOa&&(0<(i=a(t.Ya).slice(0,s.MTa)).length&&(this.MH(i,o.vx.rl),this.jOa=!0,this.Lk=this.nJ(i.concat(this.Lk)))),e){case o.qx.yCa:e=this.dIb(t);break;case o.qx.XJa:e=this.mIb(t);break;case o.qx.d1:e=this.nIb(t);break;case o.qx.FR:e=this.iIb(t);break;default:e=this.aIb(t)}return this.vOa=t,e},d.prototype.dIb=function(t){return t=c(t.Ya,s.W7a,s.uSa),this.MH(t,o.vx.rl),this.Lk=this.nJ(this.Lk.concat(t))},d.prototype.mIb=function(t){var e;return this.H.log("handleScrollHorizontal"),e=t.Ya,t=c(e,s.Y7a,s.vSa),(e=e[u(e,this.vOa.Ya)].list.slice(0,s.vWb)).concat(t),this.MH(e,o.vx.Pea),this.nJ(e.concat(this.Lk))},d.prototype.MH=function(t,e){t.forEach(function(t){(void 0===t.vC||t.vC<e)&&(t.vC=e),void 0===t.HP&&(t.HP=n()),void 0===t.Dl&&(t.Dl=n())})},d.prototype.nIb=function(t){return this.H.log("handleSearch"),t=h(t.Ya,s.OWb),this.MH(t,o.vx.YJa),this.Lk=t.concat(this.Lk),this.Lk=this.nJ(this.Lk)},d.prototype.iIb=function(t){var e,i,n,r,a;if(this.H.log("handlePlayFocus: ",s.WV),e=t.direction,i=t.Ya,t=[],void 0!==(n=l(i)).xk)switch(t.push(n),e){case o.vv.DJa:for(e=1;e<s.WV;e++)t.push(new p(n.xk,n.jm+e));t.push(new p(n.xk-1,n.jm)),t.push(new p(n.xk+1,n.jm));break;case o.vv.AEa:for(e=1;e<s.WV;e++)t.push(new p(n.xk,n.jm-e));t.push(new p(n.xk-1,n.jm)),t.push(new p(n.xk+1,n.jm));break;case o.vv.ukb:for(t.push(new p(n.xk-1,n.jm)),e=1;e<=s.WV/2;e++)t.push(new p(n.xk,n.jm+e)),t.push(new p(n.xk,n.jm-e));break;case o.vv.Yeb:for(t.push(new p(n.xk+1,n.jm)),e=1;e<=s.WV/2;e++)t.push(new p(n.xk,n.jm+e)),t.push(new p(n.xk,n.jm-e))}return r=[],t.forEach(function(t){void 0!==(a=f(i,t.xk,t.jm))&&r.push(a)}),this.MH(r,o.vx.Pea),this.nJ(r.concat(this.Lk))},d.prototype.aIb=function(t){return this.H.log("ModelOne: handleDefaultCase"),t=c(t.Ya,s.Y7a,s.vSa),this.MH(t,o.vx.Pea),this.nJ(t.concat(this.Lk))},d.prototype.zYb=function(t){return t.vC==o.vx.rl|t.vC==o.vx.YJa&n()-t.HP<s.YIb},d.prototype.nJ=function(t){for(var e,i,n=[],r={},a=0,o=t.length,s=0;s<o;s++)e=t[s].W,i=t[s],!1==e in r?(n.push(i),r[e]=a,a++):(e=n[r[e]],i.Dl<e.Dl&&(e.Dl=i.Dl),i.vC>e.vC&&(e.vC=i.vC),i.HP>e.HP&&(e.HP=i.HP));return n},t.exports=d},function(t,e,i){t.exports={EventEmitter:i(1292),Wh:i(1293)}},function(t){function e(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: addEventListener requires a string and a function as arguments");return void 0===this.Ad?(this.Ad={},this.Ad[t]=[e],!0):void 0===(i=this.Ad[t])?(this.Ad[t]=[e],!0):i.indexOf(e)<0&&(i.push(e),!0)}function i(t,e){return!!(t=this.Ad?this.Ad[t]:void 0)&&(t.forEach(function(t){t(e)}),!0)}t.exports={addEventListener:e,on:e,removeEventListener:function(t,e){var i;if(void 0===e||"function"!=typeof e||"string"!=typeof t)throw new TypeError("EventEmitter: removeEventListener requires a string and a function as arguments");return void 0!==this.Ad&&(void 0!==(i=this.Ad[t])&&(!((e=i.indexOf(e))<0)&&(1===i.length?delete this.Ad[t]:i.splice(e,1),!0)))},Va:i,emit:i,removeAllListeners:function(t){return this.Ad&&(void 0===t?delete this.Ad:delete this.Ad[t]),this}}},function(t){function e(t){this.listeners=[],this.console=t}(e.prototype.constructor=e).prototype.on=e.prototype.addEventListener=function(t,e,i,n){if(i=n?i.bind(n):i,n=!1,t){if(this.console&&(i=function(t,e,i,n){t.trace(":",i,":",n),e(n)}.bind(null,this.console,i,e)),"function"==typeof t.addEventListener)n=t.addEventListener(e,i);else{if("function"!=typeof t.addListener)throw Error("Emitter does not have a function to add listeners for '"+e+"'");n=t.addListener(e,i)}this.listeners.push([t,e,i])}return n},e.prototype.clear=function(){var t=this.listeners.length;this.listeners.forEach(function(t){var e=t[0],i=t[1];t=t[2],"function"==typeof e.removeEventListener?e.removeEventListener(i,t):"function"==typeof e.removeListener&&e.removeListener(i,t)}),this.listeners=[],this.console&&this.console.trace("removed",t,"listener(s)")},t.exports=e}],O.c=h,O.d=function(t,e,i){O.fQb(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},O.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),_esm(t)},O.t=function(e,t){var i;if(1&t&&(e=O(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;if(i=Object.create(null),O.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)O.d(i,n,function(t){return e[t]}.bind(null,n));return i},O.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return O.d(e,"a",e),e},O.fQb=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},O.p="",O(O.BWb=558)}.call(pt)}(window);